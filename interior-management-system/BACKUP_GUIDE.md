# 데이터베이스 백업 및 복구 가이드

이 시스템은 자동 백업 시스템을 통해 데이터 손실을 방지합니다.

## 📦 백업 시스템

### 자동 백업
- **위치**: `backend/backups/` 폴더
- **보관 기간**: 최근 30개 백업 파일 유지
- **포함 데이터**: 프로젝트, 일정, 결제, 협력업체, 공사대금, AS요청, 사용자

### 수동 백업 실행
```bash
cd backend
npx ts-node src/scripts/backupDatabase.ts
```

## 📋 백업 목록 확인
```bash
cd backend
npx ts-node src/scripts/listBackups.ts
```

이 명령어는 모든 백업 파일의 목록과 각 백업의 정보를 보여줍니다:
- 백업 날짜/시간
- 파일 크기
- 프로젝트 개수

## 🔄 백업 복구

### 최신 백업 복구
```bash
cd backend
npx ts-node src/scripts/restoreBackup.ts
```

### 특정 백업 복구
```bash
cd backend
npx ts-node src/scripts/restoreBackup.ts backup-2025-10-13T10-26-56-694Z.json
```

## ⚠️ 중요 사항

1. **데이터 손실 방지**:
   - 중요한 작업 전에는 항상 수동 백업을 실행하세요
   - 백업 파일은 절대 삭제하지 마세요

2. **복구 프로세스**:
   - 복구는 기존 데이터를 삭제하지 않고 누락된 데이터만 추가합니다
   - 복구 전에 현재 데이터의 백업을 먼저 생성하는 것을 권장합니다

3. **백업 파일 관리**:
   - 백업 파일은 `backend/backups/` 폴더에 JSON 형식으로 저장됩니다
   - 중요한 백업은 별도의 안전한 장소에 복사해두세요

## 🛡️ 데이터 보호 권장사항

1. **정기적인 백업**: 중요한 작업 전에는 항상 백업하세요
2. **외부 백업**: 주요 백업 파일은 외부 저장소(클라우드, 외장하드 등)에도 저장하세요
3. **백업 확인**: 백업이 제대로 생성되었는지 정기적으로 확인하세요

## 📞 문제 발생 시

데이터가 손실되었거나 문제가 발생한 경우:

1. 즉시 백업을 실행하여 현재 상태를 저장
2. `listBackups.ts`로 사용 가능한 백업 확인
3. 적절한 백업 파일을 선택하여 복구
4. 복구 후 데이터 확인

---

**생성일**: 2025-10-13
**마지막 업데이트**: 2025-10-13
