import{u as ge,z as b,j as e,l as De}from"./index-BS6f6lKr.js";import{r}from"./vendor-react-B9Yt5e0k.js";import{u as Ve}from"./index.esm-CwHht2tV.js";import{u as be}from"./useFilteredProjects-CHN3dzbL.js";import{X as Q,I as Y,U as ee,T as se,o as pe,p as fe,n as Ne}from"./vendor-ui-CcgAtStV.js";import{a as X}from"./additionalWorkService-BcwR4LVY.js";import{u as ve}from"./dataStore-AmzhqypY.js";import{p as K}from"./vendor-date-9Cl9d1sr.js";import"./vendor-data-BwGxWJIh.js";const he=({work:l,onClose:k,onSave:T,initialProject:H})=>{const{register:E,handleSubmit:O,setValue:x,formState:{errors:A}}=Ve(),{user:D}=ge(),u=be(),[$,v]=r.useState(!1),[I,W]=r.useState([]),[z,L]=r.useState([]),[B,F]=r.useState(!1);r.useEffect(()=>{if(l)x("project",l.project),x("description",l.description),x("amount",l.amount),x("date",l.date.toISOString().split("T")[0]),x("notes",l.notes||""),L(l.images||[]),W(l.images||[]);else{const o=new Date().toISOString().split("T")[0];x("date",o),L([]),W([]),(D==null?void 0:D.name)==="안팀"&&u.length>0?x("project",u[0].name):H&&x("project",H)}},[l,x,H,D,u]);const P=r.useCallback(o=>{var p;const m=(p=o.clipboardData)==null?void 0:p.items;if(m){for(let c=0;c<m.length;c++)if(m[c].type.indexOf("image")!==-1){o.preventDefault();const V=m[c].getAsFile();if(V){const j=new FileReader;j.onload=_=>{var d;const f=(d=_.target)==null?void 0:d.result;W(N=>[...N,f]),L(N=>[...N,f]),b.success("이미지가 추가되었습니다")},j.readAsDataURL(V)}}}},[]);r.useEffect(()=>(document.addEventListener("paste",P),()=>document.removeEventListener("paste",P)),[P]);const h=o=>{o.preventDefault(),v(!0)},U=o=>{o.preventDefault(),v(!1)},w=o=>{o.preventDefault(),v(!1);const m=Array.from(o.dataTransfer.files);m.forEach(p=>{if(p.type.startsWith("image/")){const c=new FileReader;c.onload=V=>{var _;const j=(_=V.target)==null?void 0:_.result;W(f=>[...f,j]),L(f=>[...f,j])},c.readAsDataURL(p)}}),m.length>0&&b.success(`${m.length}개의 이미지가 추가되었습니다`)},S=o=>{var p;const m=Array.from(((p=o.target)==null?void 0:p.files)||[]);m.forEach(c=>{if(c.type.startsWith("image/")){const V=new FileReader;V.onload=j=>{var f;const _=(f=j.target)==null?void 0:f.result;W(d=>[...d,_]),L(d=>[...d,_])},V.readAsDataURL(c)}}),m.length>0&&b.success(`${m.length}개의 이미지가 추가되었습니다`)},q=o=>{W(m=>m.filter((p,c)=>c!==o)),L(m=>m.filter((p,c)=>c!==o)),b.success("이미지가 삭제되었습니다")},R=async o=>{if(B)return;F(!0);const m={...o,amount:Number(o.amount),date:new Date(o.date),images:z};try{await T(m)}catch(p){throw F(!1),p}};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:l?"추가내역 수정":"추가내역 등록"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:180,columnNumber:11},void 0),e.jsxDEV("button",{onClick:k,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsxDEV(Q,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:187,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:183,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:179,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:O(R),className:"p-6 space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"프로젝트명 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:195,columnNumber:13},void 0),e.jsxDEV("select",{...E("project",{required:"프로젝트를 선택하세요"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[(D==null?void 0:D.name)!=="안팀"&&e.jsxDEV("option",{value:"",children:"선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:202,columnNumber:39},void 0),u.map(o=>e.jsxDEV("option",{value:o.name,children:o.name},o.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:204,columnNumber:17},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:198,columnNumber:13},void 0),A.project&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(A.project.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:210,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:194,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"내용 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:216,columnNumber:13},void 0),e.jsxDEV("textarea",{...E("description",{required:"추가내역 내용을 입력하세요"}),rows:3,className:"input",placeholder:"추가 공사 내용을 입력하세요 (예: 거실 조명 추가 설치)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:219,columnNumber:13},void 0),A.description&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(A.description.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:226,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:215,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"금액 (원) *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:233,columnNumber:15},void 0),e.jsxDEV("input",{...E("amount",{required:"금액을 입력하세요",min:{value:0,message:"금액은 0 이상이어야 합니다"}}),type:"number",className:"input",placeholder:"예: 500000"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:236,columnNumber:15},void 0),A.amount&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(A.amount.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:246,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:232,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"일자 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:251,columnNumber:15},void 0),e.jsxDEV("input",{...E("date",{required:"일자를 선택하세요"}),type:"date",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:254,columnNumber:15},void 0),A.date&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(A.date.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:260,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:250,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:231,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"비고"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:267,columnNumber:13},void 0),e.jsxDEV("textarea",{...E("notes"),rows:2,className:"input",placeholder:"추가 메모 (선택사항)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:270,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:266,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"증빙 이미지 (Ctrl+V로 붙여넣기 가능)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:280,columnNumber:13},void 0),e.jsxDEV("div",{className:`border-2 border-dashed rounded-lg p-6 transition-colors ${$?"border-gray-500 bg-gray-50":"border-gray-300"}`,onDragOver:h,onDragLeave:U,onDrop:w,children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Y,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:293,columnNumber:17},void 0),e.jsxDEV("p",{className:"mt-2 text-sm text-gray-600",children:"이미지를 드래그하여 놓거나 클릭하여 선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:294,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"또는 Ctrl+V로 클립보드 이미지 붙여넣기"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:297,columnNumber:17},void 0),e.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:S,className:"hidden",id:"file-upload-additional"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:300,columnNumber:17},void 0),e.jsxDEV("label",{htmlFor:"file-upload-additional",className:"mt-4 inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[e.jsxDEV(ee,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:312,columnNumber:19},void 0),"파일 선택"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:308,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:292,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:284,columnNumber:13},void 0),I.length>0&&e.jsxDEV("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:I.map((o,m)=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:o,alt:`증빙 ${m+1}`,className:"w-full h-32 object-cover rounded-lg"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:323,columnNumber:21},void 0),e.jsxDEV("button",{type:"button",onClick:()=>q(m),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(se,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:333,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:328,columnNumber:21},void 0)]},m,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:322,columnNumber:19},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:320,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:279,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsxDEV("button",{type:"button",onClick:k,className:"btn btn-outline",children:"취소"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:343,columnNumber:13},void 0),e.jsxDEV("button",{type:"submit",disabled:B,className:"btn btn-primary disabled:opacity-50",children:B?"저장 중...":l?"수정":"등록"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:350,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:342,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:192,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:177,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:176,columnNumber:5},void 0)},Me=()=>{var de;const{user:l}=ge(),k=be(),{constructionPayments:T}=ve(),[H,E]=r.useState([]),[O,x]=r.useState(!1),[A,D]=r.useState(null),[u,$]=r.useState(null),[v,I]=r.useState(new Set),[W,z]=r.useState(void 0),[L,B]=r.useState(!1),[F,P]=r.useState(null),[h,U]=r.useState({}),[w,S]=r.useState([]);r.useRef(null);const q=r.useRef(null),[R,o]=r.useState(!1),[m,p]=r.useState(!1),[c,V]=r.useState(!1),j=s=>H.filter(n=>n.project===s).reduce((n,t)=>n+t.amount,0),f=((l==null?void 0:l.name)==="안팀"?T.filter(s=>k.some(n=>n.name===s.project)):T).filter(s=>{var g;const n=j(s.project);let t;if(s.vatType==="amount")t=(s.totalAmount||0)+(s.vatAmount||0);else{const y=(s.totalAmount||0)*((s.vatPercentage??100)/100)*.1;t=(s.totalAmount||0)+y}const i=t+n,a=((g=s.payments)==null?void 0:g.reduce((y,C)=>y+C.amount,0))||0;return i>0&&a>=i}).map(s=>s.project),[d,N]=r.useState({project:"",description:"",amount:"",date:K(new Date,"yyyy-MM-dd"),notes:""});r.useEffect(()=>{var s;if(k.length>0&&!d.project){const n=localStorage.getItem("lastSelectedProject"),t=((s=k.find(i=>i.name===n))==null?void 0:s.name)||k[0].name;N(i=>({...i,project:t}))}},[k]);const Z=r.useCallback(s=>{var a;const n=document.activeElement;if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)return;const i=(a=s.clipboardData)==null?void 0:a.items;if(i){for(let g=0;g<i.length;g++)if(i[g].type.indexOf("image")!==-1){s.preventDefault();const y=i[g].getAsFile();if(y){const C=new FileReader;C.onload=Ae=>{var ce;const le=(ce=Ae.target)==null?void 0:ce.result;u?U(J=>{const ue=[...J[u]||[],le];return ne(u,ue),{...J,[u]:ue}}):S(J=>[...J,le]),b.success("이미지가 첨부되었습니다")},C.readAsDataURL(y)}}}},[u]);r.useEffect(()=>(document.addEventListener("paste",Z),()=>document.removeEventListener("paste",Z)),[Z]),r.useEffect(()=>{const s=localStorage.getItem("additionalWorkImages");s&&U(JSON.parse(s))},[]),r.useEffect(()=>{localStorage.setItem("additionalWorkImages",JSON.stringify(h))},[h]),r.useEffect(()=>{const s=()=>{o(n=>{const t=!n;return window.dispatchEvent(new CustomEvent("mobileFormStateChange",{detail:{isOpen:t}})),t})};return window.addEventListener("headerAddButtonClick",s),()=>window.removeEventListener("headerAddButtonClick",s)},[]),r.useEffect(()=>{window.dispatchEvent(new CustomEvent("mobileFormStateChange",{detail:{isOpen:R}}))},[R]);const ne=async(s,n)=>{try{await X.updateAdditionalWork(s,{images:n})}catch(t){console.error("Failed to save images:",t)}},ke=s=>{const n=Array.from(s.target.files||[]);if(!u){b.error("먼저 추가내역을 선택해주세요");return}n.forEach(t=>{if(t.type.startsWith("image/")){const i=new FileReader;i.onload=a=>{var y;const g=(y=a.target)==null?void 0:y.result;U(C=>({...C,[u]:[...C[u]||[],g]}))},i.readAsDataURL(t)}}),n.length>0&&b.success("이미지가 첨부되었습니다")},xe=(s,n)=>{U(i=>({...i,[s]:(i[s]||[]).filter((a,g)=>g!==n)})),b.success("이미지가 삭제되었습니다");const t=(h[s]||[]).filter((i,a)=>a!==n);ne(s,t)},te=s=>{P(s),B(!0)},G=async()=>{try{const s=await X.getAllAdditionalWorks(),n=k.map(a=>a.name),t=(l==null?void 0:l.name)==="안팀"?s.filter(a=>n.includes(a.project)):s;E(t.map(a=>({id:a._id,project:a.project,description:a.description,amount:a.amount,date:new Date(a.date),notes:a.notes,images:a.images||[]})));const i={};t.forEach(a=>{a.images&&a.images.length>0&&(i[a._id]=a.images)}),U(i)}catch(s){console.error("Failed to load additional works:",s),E([])}};r.useEffect(()=>{G()},[]);const re=s=>{D(s),z(s.project),x(!0)},ie=async s=>{if(window.confirm("이 추가내역을 삭제하시겠습니까?"))try{await X.deleteAdditionalWork(s),await G(),b.success("추가내역이 삭제되었습니다"),u===s&&$(null)}catch(n){console.error("Failed to delete additional work:",n),b.error("추가내역 삭제에 실패했습니다")}},ye=async s=>{x(!1),D(null),z(void 0),s&&await G()},ae=async s=>{if(s.preventDefault(),!c){if(!d.project||!d.description||!d.amount||!d.date){b.error("모든 필수 항목을 입력해주세요");return}V(!0);try{const n=await X.createAdditionalWork({project:d.project,description:d.description,amount:parseFloat(d.amount),date:new Date(d.date),images:w});b.success("추가내역이 등록되었습니다"),N(t=>({...t,description:"",amount:"",date:K(new Date,"yyyy-MM-dd"),notes:""})),S([]),await G(),w.length>0&&n._id&&U(t=>({...t,[n._id]:w})),localStorage.setItem("lastSelectedProject",d.project)}catch(n){console.error("Failed to create additional work:",n),b.error("추가내역 등록에 실패했습니다")}finally{V(!1)}}},oe=H.filter(s=>{const n=f.includes(s.project);return m?n:!n}),M=oe.reduce((s,n)=>{const t=s.find(i=>i.projectName===n.project);return t?(t.works.push(n),t.totalAmount+=n.amount):s.push({projectName:n.project,works:[n],totalAmount:n.amount}),s},[]);M.sort((s,n)=>s.projectName.localeCompare(n.projectName)),M.forEach(s=>{s.works.sort((n,t)=>t.date.getTime()-n.date.getTime())}),r.useEffect(()=>{const s=new Set(M.map(n=>n.projectName));I(s)},[oe.length]);const me=s=>{const n=new Set(v);n.has(s)?n.delete(s):n.add(s),I(n)};return e.jsxDEV("div",{className:"space-y-4 md:space-y-6",children:[e.jsxDEV("div",{className:"additional-work-container hidden desktop:grid desktop:gap-4 2xl:gap-6 desktop:grid-cols-12",children:[e.jsxDEV("div",{className:"additional-work-form md:col-span-4 lg:col-span-4 bg-white border border-gray-200 rounded-lg p-4 md:p-5 lg:p-6 h-fit sticky top-4",children:e.jsxDEV("div",{className:"aw-form-inner space-y-4",children:[e.jsxDEV("div",{className:"aw-project",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"프로젝트 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:421,columnNumber:15},void 0),e.jsxDEV("select",{value:d.project,onChange:s=>N(n=>({...n,project:s.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white",children:[(l==null?void 0:l.name)!=="안팀"&&e.jsxDEV("option",{value:"",children:"선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:429,columnNumber:41},void 0),k.map(s=>e.jsxDEV("option",{value:s.name,children:s.name},s.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:431,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:424,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:420,columnNumber:13},void 0),e.jsxDEV("div",{className:"aw-date",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"일자 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:440,columnNumber:15},void 0),e.jsxDEV("input",{type:"date",value:d.date,onChange:s=>N(n=>({...n,date:s.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:443,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:439,columnNumber:13},void 0),e.jsxDEV("div",{className:"aw-description",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"내용 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:453,columnNumber:15},void 0),e.jsxDEV("textarea",{value:d.description,onChange:s=>N(n=>({...n,description:s.target.value})),rows:5,className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 resize-none",placeholder:"추가내역 내용을 입력하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:456,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:452,columnNumber:13},void 0),e.jsxDEV("div",{className:"aw-amount",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"금액 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:467,columnNumber:15},void 0),e.jsxDEV("input",{type:"number",value:d.amount,onChange:s=>N(n=>({...n,amount:s.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"0"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:470,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:466,columnNumber:13},void 0),e.jsxDEV("div",{className:"aw-images",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["이미지 첨부",e.jsxDEV("span",{className:"text-xs text-gray-500 ml-2",children:"(Ctrl+V로 붙여넣기 가능)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:483,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:481,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("input",{ref:q,type:"file",accept:"image/*",multiple:!0,onChange:s=>{Array.from(s.target.files||[]).forEach(t=>{if(t.type.startsWith("image/")){const i=new FileReader;i.onload=a=>{var y;const g=(y=a.target)==null?void 0:y.result;S(C=>[...C,g])},i.readAsDataURL(t)}}),s.target.value=""},className:"hidden"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:486,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",onClick:()=>{var s;return(s=q.current)==null?void 0:s.click()},className:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 flex items-center justify-center gap-2",children:[e.jsxDEV(ee,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:512,columnNumber:19},void 0),"이미지 첨부"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:507,columnNumber:17},void 0),w.length>0&&e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 mt-2",children:w.map((s,n)=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:s,alt:`첨부 ${n+1}`,className:"w-full h-20 object-cover rounded cursor-pointer",onClick:()=>te(s)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:519,columnNumber:25},void 0),e.jsxDEV("button",{type:"button",onClick:()=>S(t=>t.filter((i,a)=>a!==n)),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(Q,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:530,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:525,columnNumber:25},void 0)]},n,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:518,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:516,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:485,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:480,columnNumber:13},void 0),e.jsxDEV("button",{onClick:ae,disabled:c,className:"aw-submit w-full py-3.5 bg-gray-900 text-white text-base font-semibold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"등록 중...":"추가내역 등록"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:540,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:418,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:417,columnNumber:9},void 0),e.jsxDEV("div",{className:"additional-work-list md:col-span-4 lg:col-span-5 flex flex-col h-[calc(100vh-120px)]",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 flex-shrink-0",children:e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"flex border-b border-gray-200",children:[e.jsxDEV("button",{onClick:()=>p(!1),className:`flex-1 py-2 text-sm font-medium border-b-2 transition-colors ${m?"border-transparent text-gray-500 hover:text-gray-700":"border-gray-900 text-gray-900"}`,children:["미납 (",M.filter(s=>!f.includes(s.projectName)).length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:557,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>p(!0),className:`flex-1 py-2 text-sm font-medium border-b-2 transition-colors ${m?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["완납 (",f.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:567,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:556,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:554,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:553,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-4 flex-1 overflow-y-auto mt-3 pr-1",children:M.map(s=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxDEV("div",{className:"px-4 py-3.5 border-b border-gray-200 flex items-center justify-between cursor-pointer bg-gray-100 hover:bg-gray-200",onClick:()=>me(s.projectName),children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[v.has(s.projectName)?e.jsxDEV(pe,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:591,columnNumber:23},void 0):e.jsxDEV(fe,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:593,columnNumber:23},void 0),e.jsxDEV("h3",{className:"text-base font-semibold text-gray-900",children:s.projectName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:595,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-sm text-gray-500",children:["(",s.works.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:596,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:589,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-base font-bold text-gray-900",children:[s.totalAmount.toLocaleString(),"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:598,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:585,columnNumber:17},void 0),v.has(s.projectName)&&e.jsxDEV("div",{className:"divide-y divide-gray-100",children:s.works.map(n=>{var t;return e.jsxDEV("div",{className:`px-4 py-3.5 hover:bg-gray-50 cursor-pointer transition-colors ${u===n.id?"bg-blue-50 border-l-4 border-blue-500":""}`,onClick:()=>$(n.id),children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"text-base text-gray-900 line-clamp-2",children:n.description},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:615,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxDEV("span",{className:"text-sm text-gray-500",children:K(n.date,"yyyy.MM.dd")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:617,columnNumber:31},void 0),((t=h[n.id])==null?void 0:t.length)>0&&e.jsxDEV("span",{className:"text-sm text-blue-600 flex items-center gap-1",children:[e.jsxDEV(Y,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:622,columnNumber:35},void 0),h[n.id].length]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:621,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:616,columnNumber:29},void 0),n.notes&&e.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:n.notes},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:628,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:614,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 ml-4",children:[e.jsxDEV("span",{className:"text-base font-semibold text-gray-900",children:[n.amount.toLocaleString(),"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:632,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:i=>{i.stopPropagation(),re(n)},className:"p-1.5 text-gray-500 hover:text-gray-700",children:e.jsxDEV(Ne,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:643,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:636,columnNumber:31},void 0),e.jsxDEV("button",{onClick:i=>{i.stopPropagation(),ie(n.id)},className:"p-1.5 text-red-500 hover:text-red-700",children:e.jsxDEV(se,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:652,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:645,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:635,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:631,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:613,columnNumber:25},void 0)},n.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:606,columnNumber:23},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:604,columnNumber:19},void 0)]},s.projectName,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:584,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:582,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:551,columnNumber:9},void 0),e.jsxDEV("div",{className:"additional-work-images md:col-span-4 lg:col-span-3 bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-5 lg:p-6 h-[calc(100vh-120px)] overflow-y-auto",children:u?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-5 sticky top-0 bg-white pb-2",children:[e.jsxDEV("h3",{className:"text-base font-semibold text-gray-900",children:"이미지 관리"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:671,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("span",{className:"text-sm text-gray-500",children:"Ctrl+V로 이미지 붙여넣기"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:673,columnNumber:19},void 0),e.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:ke,className:"hidden",id:"work-image-upload"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:676,columnNumber:19},void 0),e.jsxDEV("label",{htmlFor:"work-image-upload",className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 cursor-pointer flex items-center gap-2 font-medium",children:[e.jsxDEV(ee,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:688,columnNumber:21},void 0),"이미지 첨부"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:684,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:672,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:670,columnNumber:15},void 0),((de=h[u])==null?void 0:de.length)>0?e.jsxDEV("div",{className:"grid grid-cols-2 xl:grid-cols-3 gap-4",children:h[u].map((s,n)=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:s,alt:`이미지 ${n+1}`,className:"w-full h-40 object-cover rounded-lg cursor-pointer",onClick:()=>te(s)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:698,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>xe(u,n),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(Q,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:708,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:704,columnNumber:23},void 0)]},n,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:697,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:695,columnNumber:17},void 0):e.jsxDEV("div",{className:"text-center py-16 text-gray-500",children:[e.jsxDEV(Y,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:715,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-base",children:"이미지가 없습니다"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:716,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm mt-2",children:"이미지를 업로드하거나 Ctrl+V로 붙여넣기"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:717,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:714,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:669,columnNumber:13},void 0):e.jsxDEV("div",{className:"text-center py-16 text-gray-500",children:[e.jsxDEV(Y,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:725,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-base",children:"추가내역을 선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:726,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm mt-2",children:"선택한 항목의 이미지를 관리할 수 있습니다"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:727,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:724,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:667,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:415,columnNumber:7},void 0),e.jsxDEV("div",{className:"desktop:hidden space-y-3",children:[R&&e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"프로젝트 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:741,columnNumber:17},void 0),e.jsxDEV("select",{value:d.project,onChange:s=>N(n=>({...n,project:s.target.value})),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white",children:[(l==null?void 0:l.name)!=="안팀"&&e.jsxDEV("option",{value:"",children:"선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:749,columnNumber:43},void 0),k.map(s=>e.jsxDEV("option",{value:s.name,children:s.name},s.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:751,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:744,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:740,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"일자 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:760,columnNumber:17},void 0),e.jsxDEV("input",{type:"date",value:d.date,onChange:s=>N(n=>({...n,date:s.target.value})),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:763,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:759,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"내용 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:773,columnNumber:17},void 0),e.jsxDEV("textarea",{value:d.description,onChange:s=>N(n=>({...n,description:s.target.value})),rows:4,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 resize-none",placeholder:"추가내역 내용을 입력하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:776,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:772,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"금액 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:787,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",value:d.amount,onChange:s=>N(n=>({...n,amount:s.target.value})),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white",placeholder:"0"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:790,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:786,columnNumber:15},void 0),e.jsxDEV("button",{onClick:ae,disabled:c,className:"w-full py-3 bg-gray-900 text-white text-sm font-semibold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"등록 중...":"추가내역 등록"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:800,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:738,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:737,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex border-b border-gray-200",children:[e.jsxDEV("button",{onClick:()=>p(!1),className:`flex-1 py-2 text-xs font-medium border-b-2 transition-colors ${m?"border-transparent text-gray-500":"border-gray-900 text-gray-900"}`,children:["미납 (",H.filter(s=>!f.includes(s.project)).length>0?M.filter(s=>!f.includes(s.projectName)).length:0,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:813,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>p(!0),className:`flex-1 py-2 text-xs font-medium border-b-2 transition-colors ${m?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:["완납 (",f.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:823,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:812,columnNumber:9},void 0),M.map(s=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxDEV("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between bg-gray-100",onClick:()=>me(s.projectName),children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[v.has(s.projectName)?e.jsxDEV(pe,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:844,columnNumber:19},void 0):e.jsxDEV(fe,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:846,columnNumber:19},void 0),e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:s.projectName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:848,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-sm text-gray-500",children:["(",s.works.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:849,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:842,columnNumber:15},void 0),e.jsxDEV("span",{className:"font-bold text-gray-900",children:[s.totalAmount.toLocaleString(),"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:851,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:838,columnNumber:13},void 0),v.has(s.projectName)&&e.jsxDEV("div",{className:"divide-y divide-gray-100",children:s.works.map(n=>e.jsxDEV("div",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"text-sm text-gray-900",children:n.description},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:862,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:K(n.date,"yyyy.MM.dd",{locale:De})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:863,columnNumber:25},void 0),n.notes&&e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:n.notes},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:867,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:861,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 ml-3",children:[e.jsxDEV("span",{className:"font-semibold text-gray-900",children:[n.amount.toLocaleString(),"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:871,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex gap-1",children:[e.jsxDEV("button",{onClick:()=>re(n),className:"p-1 text-gray-500 hover:text-gray-700",children:e.jsxDEV(Ne,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:879,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:875,columnNumber:27},void 0),e.jsxDEV("button",{onClick:()=>ie(n.id),className:"p-1 text-red-500 hover:text-red-700",children:e.jsxDEV(se,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:885,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:881,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:874,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:870,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:860,columnNumber:21},void 0)},n.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:859,columnNumber:19},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:857,columnNumber:15},void 0)]},s.projectName,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:837,columnNumber:11},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:734,columnNumber:7},void 0),O&&e.jsxDEV(he,{isOpen:O,onClose:ye,work:A,projects:k,initialProject:W},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:901,columnNumber:9},void 0),L&&F&&e.jsxDEV("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",onClick:()=>B(!1),children:e.jsxDEV("div",{className:"relative max-w-4xl max-h-full",children:[e.jsxDEV("button",{onClick:()=>B(!1),className:"absolute top-4 right-4 p-2 bg-white rounded-full hover:bg-gray-100 z-10",children:e.jsxDEV(Q,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:921,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:917,columnNumber:13},void 0),e.jsxDEV("img",{src:F,alt:"확대 이미지",className:"max-w-full max-h-[90vh] object-contain",onClick:s=>s.stopPropagation()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:923,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:916,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:912,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:413,columnNumber:5},void 0)};export{Me as default};
