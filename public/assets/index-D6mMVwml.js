const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Drawings-DJ5Mawab.js","assets/vendor-react-DN7YJcfR.js","assets/vendor-ui-D8A9iq7X.js","assets/vendor-data-DrLf5NIQ.js","assets/vendor-date-DbWJ9m7c.js","assets/vendor-calendar-DjAQlTCo.js","assets/SiteLog-BpMMrsDv.js","assets/AfterService-CBa9hdYC.js","assets/AdditionalWork-BQGLRBmc.js","assets/additionalWorkService-BcK4oIty.js","assets/ConstructionPayment-B24cVZBT.js","assets/WorkRequest-pBBwC_sw.js","assets/Specbook-C2aR_fu8.js","assets/EstimatePreview-D_YMCdK0.js","assets/ExecutionHistory-jtEao5Qo.js"])))=>i.map(i=>d[i]);
var Ml=Object.defineProperty;var Tl=(t,s,e)=>s in t?Ml(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var Ia=(t,s,e)=>Tl(t,typeof s!="symbol"?s+"":s,e);import{r as b,b as Rl,u as Ai,d as Fl,N as Ei,e as Vr,O as Ol,R as Re,f as Bn,B as ql,h as $l,i as Et}from"./vendor-react-DN7YJcfR.js";import{a as Wl,c as Zr,Q as zl,b as Kl}from"./vendor-data-DrLf5NIQ.js";import{B as Cr,X as Dt,C as wi,T as Ys,a as Yl,b as ji,W as Ql,c as Xl,d as ss,P as rn,R as Jl,e as Gl,S as Li,f as Zl,g as em,h as Bi,i as tm,U as Sr,I as kn,j as Pr,k as Ma,l as Ta,m as Ra,n as sm,M as nm,o as rm,p as am,L as im}from"./vendor-ui-D8A9iq7X.js";import{k as _r,l as gn,m as hn,n as om,o as lm,p as et,q as mm,r as Fa,s as cm,t as Me}from"./vendor-date-DbWJ9m7c.js";import{c as dm,p as Hi,l as or,s as ns,i as um,h as pm,q as ea,a as ta,m as sa,b as fm,d as lr,o as tr,e as gm,f as sr,r as na,g as ra,j as aa,k as ia,n as oa,t as Ui,u as Si,v as Pi,w as Ii,x as Mi,y as Ti,z as Ri,A as Fi,B as Oi,C as qi,D as $i,E as Wi,F as hm,G as bm,H as Nm,I as ym,J as xm,K as vm,L as km}from"./vendor-calendar-DjAQlTCo.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=e(a);fetch(a.href,i)}})();var zi={exports:{}},Ir={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=b,s=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),A=Symbol.iterator,x="@@iterator";function _(m){if(m===null||typeof m!="object")return null;var v=A&&m[A]||m[x];return typeof v=="function"?v:null}var E=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function D(m){{for(var v=arguments.length,k=new Array(v>1?v-1:0),j=1;j<v;j++)k[j-1]=arguments[j];O("error",m,k)}}function O(m,v,k){{var j=E.ReactDebugCurrentFrame,F=j.getStackAddendum();F!==""&&(v+="%s",k=k.concat([F]));var S=k.map(function(M){return String(M)});S.unshift("Warning: "+v),Function.prototype.apply.call(console[m],console,S)}}var ie=!1,X=!1,U=!1,ee=!1,P=!1,pe;pe=Symbol.for("react.module.reference");function Ne(m){return!!(typeof m=="string"||typeof m=="function"||m===r||m===i||P||m===a||m===d||m===f||ee||m===N||ie||X||U||typeof m=="object"&&m!==null&&(m.$$typeof===g||m.$$typeof===p||m.$$typeof===o||m.$$typeof===l||m.$$typeof===c||m.$$typeof===pe||m.getModuleId!==void 0))}function ce(m,v,k){var j=m.displayName;if(j)return j;var F=v.displayName||v.name||"";return F!==""?k+"("+F+")":k}function Y(m){return m.displayName||"Context"}function oe(m){if(m==null)return null;if(typeof m.tag=="number"&&D("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case r:return"Fragment";case e:return"Portal";case i:return"Profiler";case a:return"StrictMode";case d:return"Suspense";case f:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case l:var v=m;return Y(v)+".Consumer";case o:var k=m;return Y(k._context)+".Provider";case c:return ce(m,m.render,"ForwardRef");case p:var j=m.displayName||null;return j!==null?j:oe(m.type)||"Memo";case g:{var F=m,S=F._payload,M=F._init;try{return oe(M(S))}catch{return null}}}return null}var he=Object.assign,Le=0,Z,xe,Ye,gt,it,W,_e;function J(){}J.__reactDisabledLog=!0;function ke(){{if(Le===0){Z=console.log,xe=console.info,Ye=console.warn,gt=console.error,it=console.group,W=console.groupCollapsed,_e=console.groupEnd;var m={configurable:!0,enumerable:!0,value:J,writable:!0};Object.defineProperties(console,{info:m,log:m,warn:m,error:m,group:m,groupCollapsed:m,groupEnd:m})}Le++}}function Be(){{if(Le--,Le===0){var m={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:he({},m,{value:Z}),info:he({},m,{value:xe}),warn:he({},m,{value:Ye}),error:he({},m,{value:gt}),group:he({},m,{value:it}),groupCollapsed:he({},m,{value:W}),groupEnd:he({},m,{value:_e})})}Le<0&&D("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Je=E.ReactCurrentDispatcher,$e;function tt(m,v,k){{if($e===void 0)try{throw Error()}catch(F){var j=F.stack.trim().match(/\n( *(at )?)/);$e=j&&j[1]||""}return`
`+$e+m}}var Fe=!1,We;{var _t=typeof WeakMap=="function"?WeakMap:Map;We=new _t}function B(m,v){if(!m||Fe)return"";{var k=We.get(m);if(k!==void 0)return k}var j;Fe=!0;var F=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var S;S=Je.current,Je.current=null,ke();try{if(v){var M=function(){throw Error()};if(Object.defineProperty(M.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(M,[])}catch(rt){j=rt}Reflect.construct(m,[],M)}else{try{M.call()}catch(rt){j=rt}m.call(M.prototype)}}else{try{throw Error()}catch(rt){j=rt}m()}}catch(rt){if(rt&&j&&typeof rt.stack=="string"){for(var $=rt.stack.split(`
`),Ee=j.stack.split(`
`),je=$.length-1,Ve=Ee.length-1;je>=1&&Ve>=0&&$[je]!==Ee[Ve];)Ve--;for(;je>=1&&Ve>=0;je--,Ve--)if($[je]!==Ee[Ve]){if(je!==1||Ve!==1)do if(je--,Ve--,Ve<0||$[je]!==Ee[Ve]){var re=`
`+$[je].replace(" at new "," at ");return m.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",m.displayName)),typeof m=="function"&&We.set(m,re),re}while(je>=1&&Ve>=0);break}}}finally{Fe=!1,Je.current=S,Be(),Error.prepareStackTrace=F}var Ie=m?m.displayName||m.name:"",Nt=Ie?tt(Ie):"";return typeof m=="function"&&We.set(m,Nt),Nt}function ve(m,v,k){return B(m,!1)}function De(m){var v=m.prototype;return!!(v&&v.isReactComponent)}function ge(m,v,k){if(m==null)return"";if(typeof m=="function")return B(m,De(m));if(typeof m=="string")return tt(m);switch(m){case d:return tt("Suspense");case f:return tt("SuspenseList")}if(typeof m=="object")switch(m.$$typeof){case c:return ve(m.render);case p:return ge(m.type,v,k);case g:{var j=m,F=j._payload,S=j._init;try{return ge(S(F),v,k)}catch{}}}return""}var Ue=Object.prototype.hasOwnProperty,st={},mt=E.ReactDebugCurrentFrame;function ut(m){if(m){var v=m._owner,k=ge(m.type,m._source,v?v.type:null);mt.setExtraStackFrame(k)}else mt.setExtraStackFrame(null)}function y(m,v,k,j,F){{var S=Function.call.bind(Ue);for(var M in m)if(S(m,M)){var $=void 0;try{if(typeof m[M]!="function"){var Ee=Error((j||"React class")+": "+k+" type `"+M+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof m[M]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ee.name="Invariant Violation",Ee}$=m[M](v,M,j,k,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(je){$=je}$&&!($ instanceof Error)&&(ut(F),D("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",j||"React class",k,M,typeof $),ut(null)),$ instanceof Error&&!($.message in st)&&(st[$.message]=!0,ut(F),D("Failed %s type: %s",k,$.message),ut(null))}}}var w=Array.isArray;function T(m){return w(m)}function ne(m){{var v=typeof Symbol=="function"&&Symbol.toStringTag,k=v&&m[Symbol.toStringTag]||m.constructor.name||"Object";return k}}function z(m){try{return G(m),!1}catch{return!0}}function G(m){return""+m}function fe(m){if(z(m))return D("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ne(m)),G(m)}var Ae=E.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0},le,Rt,ot;ot={};function R(m){if(Ue.call(m,"ref")){var v=Object.getOwnPropertyDescriptor(m,"ref").get;if(v&&v.isReactWarning)return!1}return m.ref!==void 0}function Pe(m){if(Ue.call(m,"key")){var v=Object.getOwnPropertyDescriptor(m,"key").get;if(v&&v.isReactWarning)return!1}return m.key!==void 0}function C(m,v){if(typeof m.ref=="string"&&Ae.current&&v&&Ae.current.stateNode!==v){var k=oe(Ae.current.type);ot[k]||(D('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',oe(Ae.current.type),m.ref),ot[k]=!0)}}function ae(m,v){{var k=function(){le||(le=!0,D("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",v))};k.isReactWarning=!0,Object.defineProperty(m,"key",{get:k,configurable:!0})}}function de(m,v){{var k=function(){Rt||(Rt=!0,D("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",v))};k.isReactWarning=!0,Object.defineProperty(m,"ref",{get:k,configurable:!0})}}var ye=function(m,v,k,j,F,S,M){var $={$$typeof:s,type:m,key:v,ref:k,props:M,_owner:S};return $._store={},Object.defineProperty($._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty($,"_self",{configurable:!1,enumerable:!1,writable:!1,value:j}),Object.defineProperty($,"_source",{configurable:!1,enumerable:!1,writable:!1,value:F}),Object.freeze&&(Object.freeze($.props),Object.freeze($)),$};function Q(m,v,k,j,F){{var S,M={},$=null,Ee=null;k!==void 0&&(fe(k),$=""+k),Pe(v)&&(fe(v.key),$=""+v.key),R(v)&&(Ee=v.ref,C(v,F));for(S in v)Ue.call(v,S)&&!Oe.hasOwnProperty(S)&&(M[S]=v[S]);if(m&&m.defaultProps){var je=m.defaultProps;for(S in je)M[S]===void 0&&(M[S]=je[S])}if($||Ee){var Ve=typeof m=="function"?m.displayName||m.name||"Unknown":m;$&&ae(M,Ve),Ee&&de(M,Ve)}return ye(m,$,Ee,F,j,Ae.current,M)}}var Qe=E.ReactCurrentOwner,nt=E.ReactDebugCurrentFrame;function ct(m){if(m){var v=m._owner,k=ge(m.type,m._source,v?v.type:null);nt.setExtraStackFrame(k)}else nt.setExtraStackFrame(null)}var jt;jt=!1;function Lt(m){return typeof m=="object"&&m!==null&&m.$$typeof===s}function St(){{if(Qe.current){var m=oe(Qe.current.type);if(m)return`

Check the render method of \``+m+"`."}return""}}function Jt(m){{if(m!==void 0){var v=m.fileName.replace(/^.*[\\\/]/,""),k=m.lineNumber;return`

Check your code at `+v+":"+k+"."}return""}}var cs={};function zt(m){{var v=St();if(!v){var k=typeof m=="string"?m:m.displayName||m.name;k&&(v=`

Check the top-level render call using <`+k+">.")}return v}}function pn(m,v){{if(!m._store||m._store.validated||m.key!=null)return;m._store.validated=!0;var k=zt(v);if(cs[k])return;cs[k]=!0;var j="";m&&m._owner&&m._owner!==Qe.current&&(j=" It was passed a child from "+oe(m._owner.type)+"."),ct(m),D('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',k,j),ct(null)}}function fn(m,v){{if(typeof m!="object")return;if(T(m))for(var k=0;k<m.length;k++){var j=m[k];Lt(j)&&pn(j,v)}else if(Lt(m))m._store&&(m._store.validated=!0);else if(m){var F=_(m);if(typeof F=="function"&&F!==m.entries)for(var S=F.call(m),M;!(M=S.next()).done;)Lt(M.value)&&pn(M.value,v)}}}function _s(m){{var v=m.type;if(v==null||typeof v=="string")return;var k;if(typeof v=="function")k=v.propTypes;else if(typeof v=="object"&&(v.$$typeof===c||v.$$typeof===p))k=v.propTypes;else return;if(k){var j=oe(v);y(k,m.props,"prop",j,m)}else if(v.PropTypes!==void 0&&!jt){jt=!0;var F=oe(v);D("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",F||"Unknown")}typeof v.getDefaultProps=="function"&&!v.getDefaultProps.isReactClassApproved&&D("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function bs(m){{for(var v=Object.keys(m.props),k=0;k<v.length;k++){var j=v[k];if(j!=="children"&&j!=="key"){ct(m),D("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",j),ct(null);break}}m.ref!==null&&(ct(m),D("Invalid attribute `ref` supplied to `React.Fragment`."),ct(null))}}var $s={};function h(m,v,k,j,F,S){{var M=Ne(m);if(!M){var $="";(m===void 0||typeof m=="object"&&m!==null&&Object.keys(m).length===0)&&($+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ee=Jt(F);Ee?$+=Ee:$+=St();var je;m===null?je="null":T(m)?je="array":m!==void 0&&m.$$typeof===s?(je="<"+(oe(m.type)||"Unknown")+" />",$=" Did you accidentally export a JSX literal instead of a component?"):je=typeof m,D("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",je,$)}var Ve=Q(m,v,k,F,S);if(Ve==null)return Ve;if(M){var re=v.children;if(re!==void 0)if(j)if(T(re)){for(var Ie=0;Ie<re.length;Ie++)fn(re[Ie],m);Object.freeze&&Object.freeze(re)}else D("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else fn(re,m)}if(Ue.call(v,"key")){var Nt=oe(m),rt=Object.keys(v).filter(function(Yt){return Yt!=="key"}),Kt=rt.length>0?"{key: someKey, "+rt.join(": ..., ")+": ...}":"{key: someKey}";if(!$s[Nt+Kt]){var yt=rt.length>0?"{"+rt.join(": ..., ")+": ...}":"{}";D(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Kt,Nt,yt,Nt),$s[Nt+Kt]=!0}}return m===r?bs(Ve):_s(Ve),Ve}}var H=h;Ir.Fragment=r,Ir.jsxDEV=H})();zi.exports=Ir;var n=zi.exports,Ki,Oa=Rl;{var qa=Oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ki=function(t,s){qa.usingClientEntryPoint=!0;try{return Oa.createRoot(t,s)}finally{qa.usingClientEntryPoint=!1}}}const Dm="modulepreload",Vm=function(t){return"/"+t},$a={},hs=function(s,e,r){let a=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(e.map(c=>{if(c=Vm(c),c in $a)return;$a[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Dm,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,N)=>{p.addEventListener("load",g),p.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return s().catch(i)})};let Cm={data:""},_m=t=>{if(typeof window=="object"){let s=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return s.nonce=window.__nonce__,s.parentNode||(t||document.head).appendChild(s),s.firstChild}return t||Cm},Am=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Em=/\/\*[^]*?\*\/|  +/g,Wa=/\n+/g,Ls=(t,s)=>{let e="",r="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?e=i+" "+o+";":r+=i[1]=="f"?Ls(o,i):i+"{"+Ls(o,i[1]=="k"?"":s)+"}":typeof o=="object"?r+=Ls(o,s?s.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Ls.p?Ls.p(i,o):i+":"+o+";")}return e+(s&&a?s+"{"+a+"}":a)+r},ys={},Yi=t=>{if(typeof t=="object"){let s="";for(let e in t)s+=e+Yi(t[e]);return s}return t},wm=(t,s,e,r,a)=>{let i=Yi(t),o=ys[i]||(ys[i]=(c=>{let d=0,f=11;for(;d<c.length;)f=101*f+c.charCodeAt(d++)>>>0;return"go"+f})(i));if(!ys[o]){let c=i!==t?t:(d=>{let f,p,g=[{}];for(;f=Am.exec(d.replace(Em,""));)f[4]?g.shift():f[3]?(p=f[3].replace(Wa," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][f[1]]=f[2].replace(Wa," ").trim();return g[0]})(t);ys[o]=Ls(a?{["@keyframes "+o]:c}:c,e?"":"."+o)}let l=e&&ys.g?ys.g:null;return e&&(ys.g=ys[o]),((c,d,f,p)=>{p?d.data=d.data.replace(p,c):d.data.indexOf(c)===-1&&(d.data=f?c+d.data:d.data+c)})(ys[o],s,r,l),o},jm=(t,s,e)=>t.reduce((r,a,i)=>{let o=s[i];if(o&&o.call){let l=o(e),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ls(l,""):l===!1?"":l}return r+a+(o??"")},"");function mr(t){let s=this||{},e=t.call?t(s.p):t;return wm(e.unshift?e.raw?jm(e,[].slice.call(arguments,1),s.p):e.reduce((r,a)=>Object.assign(r,a&&a.call?a(s.p):a),{}):e,_m(s.target),s.g,s.o,s.k)}let Qi,Mr,Tr;mr.bind({g:1});let Ds=mr.bind({k:1});function Lm(t,s,e,r){Ls.p=s,Qi=t,Mr=e,Tr=r}function Ps(t,s){let e=this||{};return function(){let r=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;e.p=Object.assign({theme:Mr&&Mr()},l),e.o=/ *go\d+/.test(c),l.className=mr.apply(e,r)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),Tr&&d[0]&&Tr(l),Qi(d,l)}return a}}var Bm=t=>typeof t=="function",nr=(t,s)=>Bm(t)?t(s):t,Hm=(()=>{let t=0;return()=>(++t).toString()})(),Xi=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),Um=20,la="default",Ji=(t,s)=>{let{toastLimit:e}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,e)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===s.toast.id?{...o,...s.toast}:o)};case 2:let{toast:r}=s;return Ji(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:a}=s;return{...t,toasts:t.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let i=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Xn=[],Gi={toasts:[],pausedAt:void 0,settings:{toastLimit:Um}},ps={},Zi=(t,s=la)=>{ps[s]=Ji(ps[s]||Gi,t),Xn.forEach(([e,r])=>{e===s&&r(ps[s])})},eo=t=>Object.keys(ps).forEach(s=>Zi(t,s)),Sm=t=>Object.keys(ps).find(s=>ps[s].toasts.some(e=>e.id===t)),cr=(t=la)=>s=>{Zi(s,t)},Pm={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Im=(t={},s=la)=>{let[e,r]=b.useState(ps[s]||Gi),a=b.useRef(ps[s]);b.useEffect(()=>(a.current!==ps[s]&&r(ps[s]),Xn.push([s,r]),()=>{let o=Xn.findIndex(([l])=>l===s);o>-1&&Xn.splice(o,1)}),[s]);let i=e.toasts.map(o=>{var l,c,d;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((l=t[o.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((c=t[o.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||Pm[o.type],style:{...t.style,...(d=t[o.type])==null?void 0:d.style,...o.style}}});return{...e,toasts:i}},Mm=(t,s="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...e,id:(e==null?void 0:e.id)||Hm()}),Hn=t=>(s,e)=>{let r=Mm(s,t,e);return cr(r.toasterId||Sm(r.id))({type:2,toast:r}),r.id},wt=(t,s)=>Hn("blank")(t,s);wt.error=Hn("error");wt.success=Hn("success");wt.loading=Hn("loading");wt.custom=Hn("custom");wt.dismiss=(t,s)=>{let e={type:3,toastId:t};s?cr(s)(e):eo(e)};wt.dismissAll=t=>wt.dismiss(void 0,t);wt.remove=(t,s)=>{let e={type:4,toastId:t};s?cr(s)(e):eo(e)};wt.removeAll=t=>wt.remove(void 0,t);wt.promise=(t,s,e)=>{let r=wt.loading(s.loading,{...e,...e==null?void 0:e.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let i=s.success?nr(s.success,a):void 0;return i?wt.success(i,{id:r,...e,...e==null?void 0:e.success}):wt.dismiss(r),a}).catch(a=>{let i=s.error?nr(s.error,a):void 0;i?wt.error(i,{id:r,...e,...e==null?void 0:e.error}):wt.dismiss(r)}),t};var Tm=1e3,Rm=(t,s="default")=>{let{toasts:e,pausedAt:r}=Im(t,s),a=b.useRef(new Map).current,i=b.useCallback((p,g=Tm)=>{if(a.has(p))return;let N=setTimeout(()=>{a.delete(p),o({type:4,toastId:p})},g);a.set(p,N)},[]);b.useEffect(()=>{if(r)return;let p=Date.now(),g=e.map(N=>{if(N.duration===1/0)return;let A=(N.duration||0)+N.pauseDuration-(p-N.createdAt);if(A<0){N.visible&&wt.dismiss(N.id);return}return setTimeout(()=>wt.dismiss(N.id,s),A)});return()=>{g.forEach(N=>N&&clearTimeout(N))}},[e,r,s]);let o=b.useCallback(cr(s),[s]),l=b.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=b.useCallback((p,g)=>{o({type:1,toast:{id:p,height:g}})},[o]),d=b.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),f=b.useCallback((p,g)=>{let{reverseOrder:N=!1,gutter:A=8,defaultPosition:x}=g||{},_=e.filter(O=>(O.position||x)===(p.position||x)&&O.height),E=_.findIndex(O=>O.id===p.id),D=_.filter((O,ie)=>ie<E&&O.visible).length;return _.filter(O=>O.visible).slice(...N?[D+1]:[0,D]).reduce((O,ie)=>O+(ie.height||0)+A,0)},[e]);return b.useEffect(()=>{e.forEach(p=>{if(p.dismissed)i(p.id,p.removeDelay);else{let g=a.get(p.id);g&&(clearTimeout(g),a.delete(p.id))}})},[e,i]),{toasts:e,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:f}}},Fm=Ds`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Om=Ds`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qm=Ds`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,$m=Ps("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Fm} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Om} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${qm} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Wm=Ds`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zm=Ps("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Wm} 1s linear infinite;
`,Km=Ds`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ym=Ds`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Qm=Ps("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Km} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ym} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Xm=Ps("div")`
  position: absolute;
`,Jm=Ps("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Gm=Ds`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Zm=Ps("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Gm} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ec=({toast:t})=>{let{icon:s,type:e,iconTheme:r}=t;return s!==void 0?typeof s=="string"?b.createElement(Zm,null,s):s:e==="blank"?null:b.createElement(Jm,null,b.createElement(zm,{...r}),e!=="loading"&&b.createElement(Xm,null,e==="error"?b.createElement($m,{...r}):b.createElement(Qm,{...r})))},tc=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,sc=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,nc="0%{opacity:0;} 100%{opacity:1;}",rc="0%{opacity:1;} 100%{opacity:0;}",ac=Ps("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ic=Ps("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,oc=(t,s)=>{let e=t.includes("top")?1:-1,[r,a]=Xi()?[nc,rc]:[tc(e),sc(e)];return{animation:s?`${Ds(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ds(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},lc=b.memo(({toast:t,position:s,style:e,children:r})=>{let a=t.height?oc(t.position||s||"top-center",t.visible):{opacity:0},i=b.createElement(ec,{toast:t}),o=b.createElement(ic,{...t.ariaProps},nr(t.message,t));return b.createElement(ac,{className:t.className,style:{...a,...e,...t.style}},typeof r=="function"?r({icon:i,message:o}):b.createElement(b.Fragment,null,i,o))});Lm(b.createElement);var mc=({id:t,className:s,style:e,onHeightUpdate:r,children:a})=>{let i=b.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return b.createElement("div",{ref:i,className:s,style:e},a)},cc=(t,s)=>{let e=t.includes("top"),r=e?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Xi()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(e?1:-1)}px)`,...r,...a}},dc=mr`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,In=16,uc=({reverseOrder:t,position:s="top-center",toastOptions:e,gutter:r,children:a,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=Rm(e,i);return b.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:In,left:In,right:In,bottom:In,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(f=>{let p=f.position||s,g=d.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:s}),N=cc(p,g);return b.createElement(mc,{id:f.id,key:f.id,onHeightUpdate:d.updateHeight,className:f.visible?dc:"",style:N},f.type==="custom"?nr(f.message,f):a?a(f):b.createElement(lc,{toast:f,position:p}))}))},q=wt;const gs=Object.create(null);gs.open="0";gs.close="1";gs.ping="2";gs.pong="3";gs.message="4";gs.upgrade="5";gs.noop="6";const Jn=Object.create(null);Object.keys(gs).forEach(t=>{Jn[gs[t]]=t});const Rr={type:"error",data:"parser error"},to=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",so=typeof ArrayBuffer=="function",no=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ma=({type:t,data:s},e,r)=>to&&s instanceof Blob?e?r(s):za(s,r):so&&(s instanceof ArrayBuffer||no(s))?e?r(s):za(new Blob([s]),r):r(gs[t]+(s||"")),za=(t,s)=>{const e=new FileReader;return e.onload=function(){const r=e.result.split(",")[1];s("b"+(r||""))},e.readAsDataURL(t)};function Ka(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Ar;function pc(t,s){if(to&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ka).then(s);if(so&&(t.data instanceof ArrayBuffer||no(t.data)))return s(Ka(t.data));ma(t,!1,e=>{Ar||(Ar=new TextEncoder),s(Ar.encode(e))})}const Ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ya.length;t++)Dn[Ya.charCodeAt(t)]=t;const fc=t=>{let s=t.length*.75,e=t.length,r,a=0,i,o,l,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const d=new ArrayBuffer(s),f=new Uint8Array(d);for(r=0;r<e;r+=4)i=Dn[t.charCodeAt(r)],o=Dn[t.charCodeAt(r+1)],l=Dn[t.charCodeAt(r+2)],c=Dn[t.charCodeAt(r+3)],f[a++]=i<<2|o>>4,f[a++]=(o&15)<<4|l>>2,f[a++]=(l&3)<<6|c&63;return d},gc=typeof ArrayBuffer=="function",ca=(t,s)=>{if(typeof t!="string")return{type:"message",data:ro(t,s)};const e=t.charAt(0);return e==="b"?{type:"message",data:hc(t.substring(1),s)}:Jn[e]?t.length>1?{type:Jn[e],data:t.substring(1)}:{type:Jn[e]}:Rr},hc=(t,s)=>{if(gc){const e=fc(t);return ro(e,s)}else return{base64:!0,data:t}},ro=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},ao="",bc=(t,s)=>{const e=t.length,r=new Array(e);let a=0;t.forEach((i,o)=>{ma(i,!1,l=>{r[o]=l,++a===e&&s(r.join(ao))})})},Nc=(t,s)=>{const e=t.split(ao),r=[];for(let a=0;a<e.length;a++){const i=ca(e[a],s);if(r.push(i),i.type==="error")break}return r};function yc(){return new TransformStream({transform(t,s){pc(t,e=>{const r=e.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(a[0]|=128),s.enqueue(a),s.enqueue(e)})}})}let Er;function Mn(t){return t.reduce((s,e)=>s+e.length,0)}function Tn(t,s){if(t[0].length===s)return t.shift();const e=new Uint8Array(s);let r=0;for(let a=0;a<s;a++)e[a]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),e}function xc(t,s){Er||(Er=new TextDecoder);const e=[];let r=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(e.push(o);;){if(r===0){if(Mn(e)<1)break;const c=Tn(e,1);i=(c[0]&128)===128,a=c[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(Mn(e)<2)break;const c=Tn(e,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Mn(e)<8)break;const c=Tn(e,8),d=new DataView(c.buffer,c.byteOffset,c.length),f=d.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(Rr);break}a=f*Math.pow(2,32)+d.getUint32(4),r=3}else{if(Mn(e)<a)break;const c=Tn(e,a);l.enqueue(ca(i?c:Er.decode(c),s)),r=0}if(a===0||a>t){l.enqueue(Rr);break}}}})}const io=4;function Vt(t){if(t)return vc(t)}function vc(t){for(var s in Vt.prototype)t[s]=Vt.prototype[s];return t}Vt.prototype.on=Vt.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};Vt.prototype.once=function(t,s){function e(){this.off(t,e),s.apply(this,arguments)}return e.fn=s,this.on(t,e),this};Vt.prototype.off=Vt.prototype.removeListener=Vt.prototype.removeAllListeners=Vt.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+t];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,a=0;a<e.length;a++)if(r=e[a],r===s||r.fn===s){e.splice(a,1);break}return e.length===0&&delete this._callbacks["$"+t],this};Vt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),e=this._callbacks["$"+t],r=1;r<arguments.length;r++)s[r-1]=arguments[r];if(e){e=e.slice(0);for(var r=0,a=e.length;r<a;++r)e[r].apply(this,s)}return this};Vt.prototype.emitReserved=Vt.prototype.emit;Vt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Vt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const dr=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,e)=>e(s,0),es=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),kc="arraybuffer";function oo(t,...s){return s.reduce((e,r)=>(t.hasOwnProperty(r)&&(e[r]=t[r]),e),{})}const Dc=es.setTimeout,Vc=es.clearTimeout;function ur(t,s){s.useNativeTimers?(t.setTimeoutFn=Dc.bind(es),t.clearTimeoutFn=Vc.bind(es)):(t.setTimeoutFn=es.setTimeout.bind(es),t.clearTimeoutFn=es.clearTimeout.bind(es))}const Cc=1.33;function _c(t){return typeof t=="string"?Ac(t):Math.ceil((t.byteLength||t.size)*Cc)}function Ac(t){let s=0,e=0;for(let r=0,a=t.length;r<a;r++)s=t.charCodeAt(r),s<128?e+=1:s<2048?e+=2:s<55296||s>=57344?e+=3:(r++,e+=4);return e}function lo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ec(t){let s="";for(let e in t)t.hasOwnProperty(e)&&(s.length&&(s+="&"),s+=encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return s}function wc(t){let s={},e=t.split("&");for(let r=0,a=e.length;r<a;r++){let i=e[r].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class jc extends Error{constructor(s,e,r){super(s),this.description=e,this.context=r,this.type="TransportError"}}class da extends Vt{constructor(s){super(),this.writable=!1,ur(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,e,r){return super.emitReserved("error",new jc(s,e,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const e=ca(s,this.socket.binaryType);this.onPacket(e)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,e={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const e=Ec(s);return e.length?"?"+e:""}}class Lc extends da{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const e=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||e()})),this.writable||(r++,this.once("drain",function(){--r||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const e=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Nc(s,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,bc(s,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=lo()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(s,e)}}let mo=!1;try{mo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Bc=mo;function Hc(){}class Uc extends Lc{constructor(s){if(super(s),typeof location<"u"){const e=location.protocol==="https:";let r=location.port;r||(r=e?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||r!==s.port}}doWrite(s,e){const r=this.request({method:"POST",data:s});r.on("success",e),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(e,r)=>{this.onError("xhr poll error",e,r)}),this.pollXhr=s}}class fs extends Vt{constructor(s,e,r){super(),this.createRequest=s,ur(this,r),this._opts=r,this._method=r.method||"GET",this._uri=e,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var s;const e=oo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(e);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=fs.requestsCount++,fs.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Hc,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete fs.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}fs.requestsCount=0;fs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Qa);else if(typeof addEventListener=="function"){const t="onpagehide"in es?"pagehide":"unload";addEventListener(t,Qa,!1)}}function Qa(){for(let t in fs.requests)fs.requests.hasOwnProperty(t)&&fs.requests[t].abort()}const Sc=function(){const t=co({xdomain:!1});return t&&t.responseType!==null}();class Pc extends Uc{constructor(s){super(s);const e=s&&s.forceBase64;this.supportsBinary=Sc&&!e}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new fs(co,this.uri(),s)}}function co(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||Bc))return new XMLHttpRequest}catch{}if(!s)try{return new es[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const uo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ic extends da{get name(){return"websocket"}doOpen(){const s=this.uri(),e=this.opts.protocols,r=uo?{}:oo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,e,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let e=0;e<s.length;e++){const r=s[e],a=e===s.length-1;ma(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&dr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=lo()),this.supportsBinary||(e.b64=1),this.createUri(s,e)}}const wr=es.WebSocket||es.MozWebSocket;class Mc extends Ic{createSocket(s,e,r){return uo?new wr(s,e,r):e?new wr(s,e):new wr(s)}doWrite(s,e){this.ws.send(e)}}class Tc extends da{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const e=xc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=s.readable.pipeThrough(e).getReader(),a=yc();a.readable.pipeTo(s.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let e=0;e<s.length;e++){const r=s[e],a=e===s.length-1;this._writer.write(r).then(()=>{a&&dr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const Rc={websocket:Mc,webtransport:Tc,polling:Pc},Fc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Oc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Fr(t){if(t.length>8e3)throw"URI too long";const s=t,e=t.indexOf("["),r=t.indexOf("]");e!=-1&&r!=-1&&(t=t.substring(0,e)+t.substring(e,r).replace(/:/g,";")+t.substring(r,t.length));let a=Fc.exec(t||""),i={},o=14;for(;o--;)i[Oc[o]]=a[o]||"";return e!=-1&&r!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=qc(i,i.path),i.queryKey=$c(i,i.query),i}function qc(t,s){const e=/\/{2,9}/g,r=s.replace(e,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&r.splice(0,1),s.slice(-1)=="/"&&r.splice(r.length-1,1),r}function $c(t,s){const e={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(e[a]=i)}),e}const Or=typeof addEventListener=="function"&&typeof removeEventListener=="function",Gn=[];Or&&addEventListener("offline",()=>{Gn.forEach(t=>t())},!1);class Hs extends Vt{constructor(s,e){if(super(),this.binaryType=kc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(e=s,s=null),s){const r=Fr(s);e.hostname=r.host,e.secure=r.protocol==="https"||r.protocol==="wss",e.port=r.port,r.query&&(e.query=r.query)}else e.host&&(e.hostname=Fr(e.host).host);ur(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=wc(this.opts.query)),Or&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Gn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const e=Object.assign({},this.opts.query);e.EIO=io,e.transport=s,this.id&&(e.sid=this.id);const r=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&Hs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(s);e.open(),this.setTransport(e)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Hs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=s.data,this._onError(e);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(e+=_c(a)),r>0&&e>this._maxPayload)return this.writeBuffer.slice(0,r);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,dr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,e,r){return this._sendPacket("message",s,e,r),this}send(s,e,r){return this._sendPacket("message",s,e,r),this}_sendPacket(s,e,r,a){if(typeof e=="function"&&(a=e,e=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:s,data:e,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),s()},r=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():s()}):this.upgrading?r():s()),this}_onError(s){if(Hs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Or&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Gn.indexOf(this._offlineEventListener);r!==-1&&Gn.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,e),this.writeBuffer=[],this._prevBufferLen=0}}}Hs.protocol=io;class Wc extends Hs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let e=this.createTransport(s),r=!1;Hs.priorWebsocketSuccess=!1;const a=()=>{r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Hs.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=e.name,this.emitReserved("upgradeError",g)}}))};function i(){r||(r=!0,f(),e.close(),e=null)}const o=p=>{const g=new Error("probe error: "+p);g.transport=e.name,i(),this.emitReserved("upgradeError",g)};function l(){o("transport closed")}function c(){o("socket closed")}function d(p){e&&p.name!==e.name&&i()}const f=()=>{e.removeListener("open",a),e.removeListener("error",o),e.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};e.once("open",a),e.once("error",o),e.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{r||e.open()},200):e.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const e=[];for(let r=0;r<s.length;r++)~this.transports.indexOf(s[r])&&e.push(s[r]);return e}}let zc=class extends Wc{constructor(s,e={}){const r=typeof s=="object"?s:e;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>Rc[a]).filter(a=>!!a)),super(s,r)}};function Kc(t,s="",e){let r=t;e=e||typeof location<"u"&&location,t==null&&(t=e.protocol+"//"+e.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=e.protocol+t:t=e.host+t),/^(https?|wss?):\/\//.test(t)||(typeof e<"u"?t=e.protocol+"//"+t:t="https://"+t),r=Fr(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+s,r.href=r.protocol+"://"+i+(e&&e.port===r.port?"":":"+r.port),r}const Yc=typeof ArrayBuffer=="function",Qc=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,po=Object.prototype.toString,Xc=typeof Blob=="function"||typeof Blob<"u"&&po.call(Blob)==="[object BlobConstructor]",Jc=typeof File=="function"||typeof File<"u"&&po.call(File)==="[object FileConstructor]";function ua(t){return Yc&&(t instanceof ArrayBuffer||Qc(t))||Xc&&t instanceof Blob||Jc&&t instanceof File}function Zn(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let e=0,r=t.length;e<r;e++)if(Zn(t[e]))return!0;return!1}if(ua(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Zn(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&Zn(t[e]))return!0;return!1}function Gc(t){const s=[],e=t.data,r=t;return r.data=qr(e,s),r.attachments=s.length,{packet:r,buffers:s}}function qr(t,s){if(!t)return t;if(ua(t)){const e={_placeholder:!0,num:s.length};return s.push(t),e}else if(Array.isArray(t)){const e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=qr(t[r],s);return e}else if(typeof t=="object"&&!(t instanceof Date)){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=qr(t[r],s));return e}return t}function Zc(t,s){return t.data=$r(t.data,s),delete t.attachments,t}function $r(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=$r(t[e],s);else if(typeof t=="object")for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=$r(t[e],s));return t}const ed=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],td=5;var Ke;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ke||(Ke={}));class sd{constructor(s){this.replacer=s}encode(s){return(s.type===Ke.EVENT||s.type===Ke.ACK)&&Zn(s)?this.encodeAsBinary({type:s.type===Ke.EVENT?Ke.BINARY_EVENT:Ke.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let e=""+s.type;return(s.type===Ke.BINARY_EVENT||s.type===Ke.BINARY_ACK)&&(e+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(e+=s.nsp+","),s.id!=null&&(e+=s.id),s.data!=null&&(e+=JSON.stringify(s.data,this.replacer)),e}encodeAsBinary(s){const e=Gc(s),r=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(r),a}}function Xa(t){return Object.prototype.toString.call(t)==="[object Object]"}class pa extends Vt{constructor(s){super(),this.reviver=s}add(s){let e;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(s);const r=e.type===Ke.BINARY_EVENT;r||e.type===Ke.BINARY_ACK?(e.type=r?Ke.EVENT:Ke.ACK,this.reconstructor=new nd(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(ua(s)||s.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(s),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let e=0;const r={type:Number(s.charAt(0))};if(Ke[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ke.BINARY_EVENT||r.type===Ke.BINARY_ACK){const i=e+1;for(;s.charAt(++e)!=="-"&&e!=s.length;);const o=s.substring(i,e);if(o!=Number(o)||s.charAt(e)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(s.charAt(e+1)==="/"){const i=e+1;for(;++e&&!(s.charAt(e)===","||e===s.length););r.nsp=s.substring(i,e)}else r.nsp="/";const a=s.charAt(e+1);if(a!==""&&Number(a)==a){const i=e+1;for(;++e;){const o=s.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===s.length)break}r.id=Number(s.substring(i,e+1))}if(s.charAt(++e)){const i=this.tryParse(s.substr(e));if(pa.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,e){switch(s){case Ke.CONNECT:return Xa(e);case Ke.DISCONNECT:return e===void 0;case Ke.CONNECT_ERROR:return typeof e=="string"||Xa(e);case Ke.EVENT:case Ke.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&ed.indexOf(e[0])===-1);case Ke.ACK:case Ke.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class nd{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const e=Zc(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const rd=Object.freeze(Object.defineProperty({__proto__:null,Decoder:pa,Encoder:sd,get PacketType(){return Ke},protocol:td},Symbol.toStringTag,{value:"Module"}));function ts(t,s,e){return t.on(s,e),function(){t.off(s,e)}}const ad=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fo extends Vt{constructor(s,e,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[ts(s,"open",this.onopen.bind(this)),ts(s,"packet",this.onpacket.bind(this)),ts(s,"error",this.onerror.bind(this)),ts(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...e){var r,a,i;if(ad.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(e.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:Ke.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const f=this.ids++,p=e.pop();this._registerAckCallback(f,p),o.id=f}const l=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(s,e){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[s]=e;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===s&&this.sendBuffer.splice(l,1);e.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),e.apply(this,l)};o.withError=!0,this.acks[s]=o}emitWithAck(s,...e){return new Promise((r,a)=>{const i=(o,l)=>o?a(o):r(l);i.withError=!0,e.push(i),this.emit(s,...e)})}_addToQueue(s){let e;typeof s[s.length-1]=="function"&&(e=s.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((a,...i)=>r!==this._queue[0]?void 0:(a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(a)):(this._queue.shift(),e&&e(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!s||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:Ke.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(r=>String(r.id)===s)){const r=this.acks[s];delete this.acks[s],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case Ke.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ke.EVENT:case Ke.BINARY_EVENT:this.onevent(s);break;case Ke.ACK:case Ke.BINARY_ACK:this.onack(s);break;case Ke.DISCONNECT:this.ondisconnect();break;case Ke.CONNECT_ERROR:this.destroy();const r=new Error(s.data.message);r.data=s.data.data,this.emitReserved("connect_error",r);break}}onevent(s){const e=s.data||[];s.id!=null&&e.push(this.ack(s.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const r of e)r.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const e=this;let r=!1;return function(...a){r||(r=!0,e.packet({type:Ke.ACK,id:s,data:a}))}}onack(s){const e=this.acks[s.id];typeof e=="function"&&(delete this.acks[s.id],e.withError&&s.data.unshift(null),e.apply(this,s.data))}onconnect(s,e){this.id=s,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ke.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const e=this._anyListeners;for(let r=0;r<e.length;r++)if(s===e[r])return e.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const e=this._anyOutgoingListeners;for(let r=0;r<e.length;r++)if(s===e[r])return e.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const r of e)r.apply(this,s.data)}}}function on(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}on.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),e=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+e:t-e}return Math.min(t,this.max)|0};on.prototype.reset=function(){this.attempts=0};on.prototype.setMin=function(t){this.ms=t};on.prototype.setMax=function(t){this.max=t};on.prototype.setJitter=function(t){this.jitter=t};class Wr extends Vt{constructor(s,e){var r;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(e=s,s=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,ur(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((r=e.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new on({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=s;const a=e.parser||rd;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var e;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(e=this.backoff)===null||e===void 0||e.setMin(s),this)}randomizationFactor(s){var e;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(e=this.backoff)===null||e===void 0||e.setJitter(s),this)}reconnectionDelayMax(s){var e;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(e=this.backoff)===null||e===void 0||e.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new zc(this.uri,this.opts);const e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=ts(e,"open",function(){r.onopen(),s&&s()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),s?s(l):this.maybeReconnectOnOpen()},o=ts(e,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),e.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(ts(s,"ping",this.onping.bind(this)),ts(s,"data",this.ondata.bind(this)),ts(s,"error",this.onerror.bind(this)),ts(s,"close",this.onclose.bind(this)),ts(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(e){this.onclose("parse error",e)}}ondecoded(s){dr(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,e){let r=this.nsps[s];return r?this._autoConnect&&!r.active&&r.connect():(r=new fo(this,s,e),this.nsps[s]=r),r}_destroy(s){const e=Object.keys(this.nsps);for(const r of e)if(this.nsps[r].active)return;this._close()}_packet(s){const e=this.encoder.encode(s);for(let r=0;r<e.length;r++)this.engine.write(e[r],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,e){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(a=>{a?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",a)):s.onreconnect()}))},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const bn={};function Cn(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const e=Kc(t,s.path||"/socket.io"),r=e.source,a=e.id,i=e.path,o=bn[a]&&i in bn[a].nsps,l=s.forceNew||s["force new connection"]||s.multiplex===!1||o;let c;return l?c=new Wr(r,s):(bn[a]||(bn[a]=new Wr(r,s)),c=bn[a]),e.query&&!s.query&&(s.query=e.queryKey),c.socket(e.path,s)}Object.assign(Cn,{Manager:Wr,Socket:fo,io:Cn,connect:Cn});function id(t={}){const{immediate:s=!1,onNeedRefresh:e,onOfflineReady:r,onRegistered:a,onRegisteredSW:i,onRegisterError:o}=t;let l,c,d;const f=async(g=!0)=>{await c,await(d==null?void 0:d())};async function p(){if("serviceWorker"in navigator){if(l=await hs(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/sw.js",{scope:"/",type:"classic"})).catch(g=>{o==null||o(g)}),!l)return;d=async()=>{await(l==null?void 0:l.messageSkipWaiting())};{let g=!1;const N=()=>{g=!0,l==null||l.addEventListener("controlling",A=>{A.isUpdate&&window.location.reload()}),e==null||e()};l.addEventListener("installed",A=>{typeof A.isUpdate>"u"?typeof A.isExternal<"u"?A.isExternal?N():!g&&(r==null||r()):A.isExternal?window.location.reload():!g&&(r==null||r()):A.isUpdate||r==null||r()}),l.addEventListener("waiting",N),l.addEventListener("externalwaiting",N)}l.register({immediate:s}).then(g=>{i?i("/sw.js",g):a==null||a(g)}).catch(g=>{o==null||o(g)})}}return c=p(),f}const od=()=>{if(typeof window<"u"){const t=window.location.hostname;if(t==="hvlab.app"||t.includes("hv-lab-app")||t.includes("firebaseapp.com"))return"https://asia-northeast3-hv-lab-app.cloudfunctions.net/api"}return"/api"},ld=od(),ue=Wl.create({baseURL:ld,headers:{"Content-Type":"application/json"}});ue.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));ue.interceptors.response.use(t=>t,t=>{var s,e,r;return((s=t.response)==null?void 0:s.status)===401&&!((r=(e=t.config)==null?void 0:e.url)!=null&&r.includes("/auth/me"))&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)});const md=10*60*1e3,cd=Zr((t,s)=>({libraryItems:[],libraryLoaded:!1,libraryLoading:!1,libraryLoadedAt:null,categories:[],categoriesLoaded:!1,projectItemsCache:new Map,preloadLibrary:async()=>{const e=s();if(!e.libraryLoading){if(e.libraryLoaded&&e.libraryLoadedAt&&Date.now()-e.libraryLoadedAt<md){console.log("[SpecbookStore]   , ");return}t({libraryLoading:!0});try{console.log("[SpecbookStore]    ...");const r=await ue.get("/specbook/library/meta");t({libraryItems:r.data,libraryLoaded:!0,libraryLoading:!1,libraryLoadedAt:Date.now()}),console.log("[SpecbookStore]   :",r.data.length," ")}catch(r){console.error("[SpecbookStore]   :",r),t({libraryLoading:!1})}}},preloadCategories:async()=>{if(!s().categoriesLoaded)try{const r=await ue.get("/specbook/categories");t({categories:r.data,categoriesLoaded:!0}),console.log("[SpecbookStore]   :",r.data.length,"")}catch(r){console.error("[SpecbookStore]   :",r)}},preloadAll:async()=>{const{preloadLibrary:e,preloadCategories:r}=s();await Promise.all([e(),r()])},getLibraryItems:(e,r)=>{const{libraryItems:a}=s();let i=a;return e&&e!==""&&(i=i.filter(o=>o.category===e)),r&&r.length>0&&(i=i.filter(o=>{if(!o.grade)return!1;const l=o.grade.split(",").map(c=>c.trim());return r.some(c=>l.includes(c))})),i=[...i].sort((o,l)=>{var f,p;const c=parseInt(((f=o.price)==null?void 0:f.replace(/[^0-9]/g,""))||"0",10);return parseInt(((p=l.price)==null?void 0:p.replace(/[^0-9]/g,""))||"0",10)-c}),i},getProjectItems:e=>{const{projectItemsCache:r}=s();return r.get(e)||null},loadProjectItems:async e=>{const a=s().projectItemsCache.get(e);if(a)return a;try{const o=(await ue.get(`/specbook/project/${e}/meta`)).data;return t(l=>{const c=new Map(l.projectItemsCache);return c.set(e,o),{projectItemsCache:c}}),o}catch(i){return console.error("[SpecbookStore]    :",i),[]}},invalidateLibrary:()=>{t({libraryItems:[],libraryLoaded:!1,libraryLoadedAt:null})},invalidateProject:e=>{t(r=>{const a=new Map(r.projectItemsCache);return a.delete(e),{projectItemsCache:a}})},invalidateAll:()=>{t({libraryItems:[],libraryLoaded:!1,libraryLoadedAt:null,categories:[],categoriesLoaded:!1,projectItemsCache:new Map})},addItemToCache:e=>{e.is_library?t(r=>({libraryItems:[e,...r.libraryItems]})):e.project_id&&t(r=>{const a=new Map(r.projectItemsCache),i=a.get(e.project_id)||[];return a.set(e.project_id,[e,...i]),{projectItemsCache:a}})},updateItemInCache:e=>{e.is_library?t(r=>({libraryItems:r.libraryItems.map(a=>a.id===e.id?e:a)})):e.project_id&&t(r=>{const a=new Map(r.projectItemsCache),i=a.get(e.project_id);return i&&a.set(e.project_id,i.map(o=>o.id===e.id?e:o)),{projectItemsCache:a}})},removeItemFromCache:(e,r,a)=>{r?t(i=>({libraryItems:i.libraryItems.filter(o=>o.id!==e)})):a&&t(i=>{const o=new Map(i.projectItemsCache),l=o.get(a);return l&&o.set(a,l.filter(c=>c.id!==e)),{projectItemsCache:o}})}})),go=b.createContext(void 0);function dd({children:t}){const[s,e]=b.useState(null),[r,a]=b.useState(!0),i=Ai(),o=cd(p=>p.preloadAll);b.useEffect(()=>{l()},[]);const l=async()=>{var p;try{const g=localStorage.getItem("token");if(!g){a(!1);return}ue.defaults.headers.common.Authorization=`Bearer ${g}`;const N=await ue.get("/auth/me");N.data.success&&(e(N.data.user),o())}catch(g){if(((p=g.response)==null?void 0:p.status)===401)localStorage.removeItem("token"),delete ue.defaults.headers.common.Authorization;else{const A=localStorage.getItem("user");if(A)try{e(JSON.parse(A))}catch{}}}finally{a(!1)}},c=async(p,g)=>{var N,A;try{const x=await ue.post("/auth/login",{username:p,password:g}),{token:_,user:E}=x.data;localStorage.setItem("token",_),localStorage.setItem("user",JSON.stringify(E)),ue.defaults.headers.common.Authorization=`Bearer ${_}`,e(E),o(),q.success(`${E.name}, !`);const D=sessionStorage.getItem("redirectAfterLogin");D?(sessionStorage.removeItem("redirectAfterLogin"),i(D)):i("/")}catch(x){const _=x;throw q.error(((A=(N=_.response)==null?void 0:N.data)==null?void 0:A.message)||" "),x}},d=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),delete ue.defaults.headers.common.Authorization,e(null),i("/login"),q.success("")},f=p=>{e(p)};return n.jsxDEV(go.Provider,{value:{user:s,loading:r,login:c,logout:d,updateUser:f},children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/contexts/AuthContext.tsx",lineNumber:122,columnNumber:5},this)}function Is(){const t=b.useContext(go);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const ud={};function pd(t,s){let e;try{e=t()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=e.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>e.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>e.removeItem(a)}}const jn=t=>s=>{try{const e=t(s);return e instanceof Promise?e:{then(r){return jn(r)(e)},catch(r){return this}}}catch(e){return{then(r){return this},catch(r){return jn(r)(e)}}}},fd=(t,s)=>(e,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,E)=>({...E,..._}),...s},o=!1;const l=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(..._)},r,a);const f=jn(i.serialize),p=()=>{const _=i.partialize({...r()});let E;const D=f({state:_,version:i.version}).then(O=>d.setItem(i.name,O)).catch(O=>{E=O});if(E)throw E;return D},g=a.setState;a.setState=(_,E)=>{g(_,E),p()};const N=t((..._)=>{e(..._),p()},r,a);let A;const x=()=>{var _;if(!d)return;o=!1,l.forEach(D=>D(r()));const E=((_=i.onRehydrateStorage)==null?void 0:_.call(i,r()))||void 0;return jn(d.getItem.bind(d))(i.name).then(D=>{if(D)return i.deserialize(D)}).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==i.version){if(i.migrate)return i.migrate(D.state,D.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return D.state}).then(D=>{var O;return A=i.merge(D,(O=r())!=null?O:N),e(A,!0),p()}).then(()=>{E==null||E(A,void 0),o=!0,c.forEach(D=>D(A))}).catch(D=>{E==null||E(void 0,D)})};return a.persist={setOptions:_=>{i={...i,..._},_.getStorage&&(d=_.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:_=>(l.add(_),()=>{l.delete(_)}),onFinishHydration:_=>(c.add(_),()=>{c.delete(_)})},x(),A||N},gd=(t,s)=>(e,r,a)=>{let i={storage:pd(()=>localStorage),partialize:x=>x,version:0,merge:(x,_)=>({..._,...x}),...s},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...x)},r,a);const f=()=>{const x=i.partialize({...r()});return d.setItem(i.name,{state:x,version:i.version})},p=a.setState;a.setState=(x,_)=>{p(x,_),f()};const g=t((...x)=>{e(...x),f()},r,a);a.getInitialState=()=>g;let N;const A=()=>{var x,_;if(!d)return;o=!1,l.forEach(D=>{var O;return D((O=r())!=null?O:g)});const E=((_=i.onRehydrateStorage)==null?void 0:_.call(i,(x=r())!=null?x:g))||void 0;return jn(d.getItem.bind(d))(i.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==i.version){if(i.migrate)return[!0,i.migrate(D.state,D.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var O;const[ie,X]=D;if(N=i.merge(X,(O=r())!=null?O:g),e(N,!0),ie)return f()}).then(()=>{E==null||E(N,void 0),N=r(),o=!0,c.forEach(D=>D(N))}).catch(D=>{E==null||E(void 0,D)})};return a.persist={setOptions:x=>{i={...i,...x},x.storage&&(d=x.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>A(),hasHydrated:()=>o,onHydrate:x=>(l.add(x),()=>{l.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||A(),N||g},hd=(t,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((ud?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),fd(t,s)):gd(t,s),ho=hd,bo=Zr()(ho((t,s)=>({notifications:[],unreadCount:0,addNotification:e=>{const r={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),read:!1,createdAt:new Date};t(a=>({notifications:[r,...a.notifications].slice(0,50),unreadCount:a.unreadCount+1}))},markAsRead:e=>{t(r=>({notifications:r.notifications.map(a=>a.id===e?{...a,read:!0}:a),unreadCount:Math.max(0,r.unreadCount-1)}))},markAllAsRead:()=>{t(e=>({notifications:e.notifications.map(r=>({...r,read:!0})),unreadCount:0}))},deleteNotification:e=>{t(r=>{const a=r.notifications.find(o=>o.id===e),i=a&&!a.read;return{notifications:r.notifications.filter(o=>o.id!==e),unreadCount:i?Math.max(0,r.unreadCount-1):r.unreadCount}})},clearAll:()=>{t({notifications:[],unreadCount:0})},getUnreadCount:()=>s().unreadCount}),{name:"notification-storage",partialize:t=>({notifications:t.notifications,unreadCount:t.unreadCount})}));var bd={lessThanXSeconds:{one:"1 ",other:"{{count}} "},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1 ",other:"{{count}} "},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:" 1",other:" {{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:" 1",other:" {{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:" 1",other:" {{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:" 1",other:" {{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1 ",other:"{{count}} "},almostXYears:{one:" 1",other:" {{count}}"}},Nd=function(s,e,r){var a,i=bd[s];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?a+" ":a+" ":a},yd={full:"y M d EEEE",long:"y M d",medium:"y.MM.dd",short:"y.MM.dd"},xd={full:"a H mm ss zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},vd={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},kd={date:_r({formats:yd,defaultWidth:"full"}),time:_r({formats:xd,defaultWidth:"full"}),dateTime:_r({formats:vd,defaultWidth:"full"})},Dd={lastWeek:"'' eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"'' eeee p",other:"P"},Vd=function(s,e,r,a){return Dd[s]},Cd={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["",""]},_d={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},Ad={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},Ed={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},wd={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},jd={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},Ld=function(s,e){var r=Number(s),a=String(e==null?void 0:e.unit);switch(a){case"minute":case"second":return String(r);case"date":return r+"";default:return r+""}},Bd={ordinalNumber:Ld,era:gn({values:Cd,defaultWidth:"wide"}),quarter:gn({values:_d,defaultWidth:"wide",argumentCallback:function(s){return s-1}}),month:gn({values:Ad,defaultWidth:"wide"}),day:gn({values:Ed,defaultWidth:"wide"}),dayPeriod:gn({values:wd,defaultWidth:"wide",formattingValues:jd,defaultFormattingWidth:"wide"})},Hd=/^(\d+)(|)?/i,Ud=/\d+/i,Sd={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(|)/i},Pd={any:[/^(bc|)/i,/^(ad|)/i]},Id={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]?/i},Md={any:[/1/i,/2/i,/3/i,/4/i]},Td={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])/i,wide:/^(1[012]|[123456789])/i},Rd={any:[/^1?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},Fd={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},Od={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},qd={any:/^(am|pm|||||||)/i},$d={any:{am:/^(am|)/i,pm:/^(pm|)/i,midnight:/^/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},Wd={ordinalNumber:om({matchPattern:Hd,parsePattern:Ud,valueCallback:function(s){return parseInt(s,10)}}),era:hn({matchPatterns:Sd,defaultMatchWidth:"wide",parsePatterns:Pd,defaultParseWidth:"any"}),quarter:hn({matchPatterns:Id,defaultMatchWidth:"wide",parsePatterns:Md,defaultParseWidth:"any",valueCallback:function(s){return s+1}}),month:hn({matchPatterns:Td,defaultMatchWidth:"wide",parsePatterns:Rd,defaultParseWidth:"any"}),day:hn({matchPatterns:Fd,defaultMatchWidth:"wide",parsePatterns:Od,defaultParseWidth:"any"}),dayPeriod:hn({matchPatterns:qd,defaultMatchWidth:"any",parsePatterns:$d,defaultParseWidth:"any"})},kt={code:"ko",formatDistance:Nd,formatLong:kd,formatRelative:Vd,localize:Bd,match:Wd,options:{weekStartsOn:0,firstWeekContainsDate:1}};const zd=({isOpen:t,onClose:s})=>{const e=Ai(),{notifications:r,unreadCount:a,markAsRead:i,markAllAsRead:o,deleteNotification:l,clearAll:c}=bo();if(!t)return null;const d=g=>{switch(g){case"payment":return n.jsxDEV(Xl,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:21,columnNumber:16},void 0);case"as_request":return n.jsxDEV(Ql,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:23,columnNumber:16},void 0);case"schedule":return n.jsxDEV(ji,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:25,columnNumber:16},void 0);case"work_request":return n.jsxDEV(Yl,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:27,columnNumber:16},void 0);default:return n.jsxDEV(Cr,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:29,columnNumber:16},void 0)}},f=g=>{switch(g){case"payment":return"text-green-600 bg-green-50";case"as_request":return"text-yellow-600 bg-yellow-50";case"schedule":return"text-blue-600 bg-blue-50";case"work_request":return"text-purple-600 bg-purple-50";default:return"text-gray-600 bg-gray-50"}},p=g=>{i(g.id),g.link&&(e(g.link),s())};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-25 z-40",onClick:s},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:59,columnNumber:7},void 0),n.jsxDEV("div",{className:"fixed right-0 top-16 h-[calc(100vh-4rem)] w-full sm:w-96 bg-white shadow-2xl z-50 flex flex-col",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV(Cr,{className:"h-5 w-5 text-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:69,columnNumber:13},void 0),n.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:70,columnNumber:13},void 0),a>0&&n.jsxDEV("span",{className:"px-2 py-0.5 bg-gray-900 text-white text-xs font-bold rounded-full",children:a},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:72,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:68,columnNumber:11},void 0),n.jsxDEV("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV(Dt,{className:"h-5 w-5 text-gray-600"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:81,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:77,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:67,columnNumber:9},void 0),r.length>0&&n.jsxDEV("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 border-b border-gray-200",children:[a>0&&n.jsxDEV("button",{onClick:o,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-gray-900",children:[n.jsxDEV(wi,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:93,columnNumber:17},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:89,columnNumber:15},void 0),n.jsxDEV("button",{onClick:c,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-red-600 ml-auto",children:[n.jsxDEV(Ys,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:101,columnNumber:15},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:97,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:87,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:r.length===0?n.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[n.jsxDEV(Cr,{className:"h-12 w-12 text-gray-300 mb-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:111,columnNumber:15},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:112,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:110,columnNumber:13},void 0):n.jsxDEV("div",{className:"divide-y divide-gray-100",children:r.map(g=>n.jsxDEV("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${g.read?"":"bg-blue-50"}`,onClick:()=>p(g),children:n.jsxDEV("div",{className:"flex gap-3",children:[n.jsxDEV("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${f(g.type)}`,children:d(g.type)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:126,columnNumber:21},void 0),n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[n.jsxDEV("p",{className:`text-sm font-semibold ${g.read?"text-gray-700":"text-gray-900"}`,children:g.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:133,columnNumber:25},void 0),!g.read&&n.jsxDEV("span",{className:"flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-1"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:137,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:132,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:g.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:140,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:lm(new Date(g.createdAt),{addSuffix:!0,locale:kt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:143,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:131,columnNumber:21},void 0),n.jsxDEV("button",{onClick:N=>{N.stopPropagation(),l(g.id)},className:"flex-shrink-0 p-1 hover:bg-gray-200 rounded transition-colors",children:n.jsxDEV(Dt,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:159,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:152,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:124,columnNumber:19},void 0)},g.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:117,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:115,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:108,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:65,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:57,columnNumber:5},void 0)},Kd={getAllWorkRequests:async()=>(await ue.get("/workrequests")).data,getWorkRequestById:async t=>(await ue.get(`/workrequests/${t}`)).data,createWorkRequest:async t=>{console.log("[workRequestService.createWorkRequest] Input data:",t);const s={project:t.project,requestType:t.requestType,description:t.description,requestDate:t.requestDate instanceof Date?t.requestDate.toISOString():t.requestDate,dueDate:t.dueDate instanceof Date?t.dueDate.toISOString():t.dueDate,requestedBy:t.requestedBy,assignedTo:t.assignedTo,priority:t.priority||"medium",status:t.status||"pending",notes:t.notes||""};return console.log("[workRequestService.createWorkRequest] Sending to backend:",s),(await ue.post("/workrequests",s)).data},updateWorkRequest:async(t,s)=>{console.log("[workRequestService.updateWorkRequest] Input data:",s);const e={};return s.project!==void 0&&(e.project=s.project),s.requestType!==void 0&&(e.requestType=s.requestType),s.description!==void 0&&(e.description=s.description),s.requestDate!==void 0&&(e.requestDate=s.requestDate instanceof Date?s.requestDate.toISOString():s.requestDate),s.dueDate!==void 0&&(e.dueDate=s.dueDate instanceof Date?s.dueDate.toISOString():s.dueDate),s.requestedBy!==void 0&&(e.requestedBy=s.requestedBy),s.assignedTo!==void 0&&(e.assignedTo=s.assignedTo),s.priority!==void 0&&(e.priority=s.priority),s.status!==void 0&&(e.status=s.status),s.notes!==void 0&&(e.notes=s.notes),s.completedDate!==void 0&&(e.completedDate=s.completedDate instanceof Date?s.completedDate.toISOString():s.completedDate),console.log("[workRequestService.updateWorkRequest] Sending to backend:",e),(await ue.put(`/workrequests/${t}`,e)).data},deleteWorkRequest:async t=>{await ue.delete(`/workrequests/${t}`)}},rs={getAllPayments:async()=>(await ue.get("/payments")).data,getPaymentById:async t=>(await ue.get(`/payments/${t}`)).data,createPayment:async t=>{var r,a,i;const s={project_id:t.projectId,request_type:t.category,vendor_name:t.process||"",description:t.purpose||"",amount:t.amount,account_holder:((r=t.bankInfo)==null?void 0:r.accountHolder)||"",bank_name:((a=t.bankInfo)==null?void 0:a.bankName)||"",account_number:((i=t.bankInfo)==null?void 0:i.accountNumber)||"",notes:t.notes||"",itemName:t.itemName||"",materialAmount:t.materialAmount||0,laborAmount:t.laborAmount||0,originalMaterialAmount:t.originalMaterialAmount||0,originalLaborAmount:t.originalLaborAmount||0,applyTaxDeduction:t.applyTaxDeduction||!1,includesVAT:t.includesVAT||!1,quickText:t.quickText||"",images:t.images||[]};return console.log("[paymentService.createPayment] Sending to backend:",s),(await ue.post("/payments",s)).data},updatePayment:async(t,s)=>{const e={};return s.projectId!==void 0&&(e.project=s.projectId),s.purpose!==void 0&&(e.description=s.purpose),s.amount!==void 0&&(e.amount=s.amount),s.process!==void 0&&(e.vendor_name=s.process),s.category!==void 0&&(e.request_type=s.category),s.itemName!==void 0&&(e.itemName=s.itemName),s.materialAmount!==void 0&&(e.materialAmount=s.materialAmount),s.laborAmount!==void 0&&(e.laborAmount=s.laborAmount),s.originalMaterialAmount!==void 0&&(e.originalMaterialAmount=s.originalMaterialAmount),s.originalLaborAmount!==void 0&&(e.originalLaborAmount=s.originalLaborAmount),s.applyTaxDeduction!==void 0&&(e.applyTaxDeduction=s.applyTaxDeduction),s.includesVAT!==void 0&&(e.includesVAT=s.includesVAT),s.notes!==void 0&&(e.notes=s.notes),s.requestDate!==void 0&&(e.requestDate=s.requestDate),s.bankInfo!==void 0&&(s.bankInfo.accountHolder&&(e.account_holder=s.bankInfo.accountHolder),s.bankInfo.bankName&&(e.bank_name=s.bankInfo.bankName),s.bankInfo.accountNumber&&(e.account_number=s.bankInfo.accountNumber)),(await ue.put(`/payments/${t}`,e)).data},updatePaymentStatus:async(t,s)=>(await ue.put(`/payments/${t}/status`,{status:s})).data,updatePaymentAmounts:async(t,s,e)=>(await ue.patch(`/payments/${t}/amounts`,{materialAmount:s,laborAmount:e})).data,updatePaymentImages:async(t,s)=>(await ue.put(`/payments/${t}/images`,{images:s})).data,deletePayment:async t=>{await ue.delete(`/payments/${t}`)}},Vn={getAllASRequests:async()=>(await ue.get("/as-requests")).data,getASRequestById:async t=>(await ue.get(`/as-requests/${t}`)).data,createASRequest:async t=>(await ue.post("/as-requests",t)).data,updateASRequest:async(t,s)=>(await ue.put(`/as-requests/${t}`,s)).data,deleteASRequest:async t=>{await ue.delete(`/as-requests/${t}`)}},nn={getAllProjects:async()=>(await ue.get("/projects")).data,getProjectById:async t=>(await ue.get(`/projects/${t}`)).data,createProject:async t=>{const s={name:t.name,client:typeof t.client=="string"?t.client:t.client.name,location:typeof t.location=="string"?t.location:t.location.address,status:t.status||"planning",manager:t.manager,description:t.description||""};if(t.startDate){const r=typeof t.startDate=="string"?new Date(t.startDate):t.startDate;s.startDate=r.toISOString().split("T")[0]}if(t.endDate){const r=typeof t.endDate=="string"?new Date(t.endDate):t.endDate;s.endDate=r.toISOString().split("T")[0]}return console.log("[projectService.createProject] Sending to backend:",s),(await ue.post("/projects",s)).data},updateProject:async(t,s)=>{var r;const e={};if(s.name!==void 0&&(e.name=s.name),s.client!==void 0&&(e.client=typeof s.client=="string"?s.client:s.client.name),s.location!==void 0&&(e.location=typeof s.location=="string"?s.location:s.location.address),s.startDate!==void 0)if(typeof s.startDate=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(s.startDate))e.startDate=s.startDate;else{const a=typeof s.startDate=="string"?new Date(s.startDate):s.startDate;e.startDate=a.toISOString().split("T")[0]}if(s.endDate!==void 0)if(typeof s.endDate=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(s.endDate))e.endDate=s.endDate;else{const a=typeof s.endDate=="string"?new Date(s.endDate):s.endDate;e.endDate=a.toISOString().split("T")[0]}s.status!==void 0&&(e.status=s.status),s.manager!==void 0&&(e.manager=s.manager),s.description!==void 0&&(e.description=s.description),s.meetingNotes!==void 0&&(e.meetingNotes=s.meetingNotes),s.customerRequests!==void 0&&(e.customerRequests=s.customerRequests),s.entrancePassword!==void 0&&(e.entrancePassword=s.entrancePassword),s.sitePassword!==void 0&&(e.sitePassword=s.sitePassword),console.log("[projectService.updateProject] Sending to backend:",e);try{return(await ue.put(`/projects/${t}`,e)).data}catch(a){const i=a;throw console.error("[projectService.updateProject] Error:",a),console.error("[projectService.updateProject] Error response:",(r=i.response)==null?void 0:r.data),a}},deleteProject:async t=>{await ue.delete(`/projects/${t}`)}},Yd=()=>{if(typeof window<"u"){const t=window.location.hostname;if(t==="hvlab.app"||t.includes("hv-lab-app")||t.includes("firebaseapp.com"))return"https://api.hvlab.app"}return window.location.origin},Qd=Yd();class Xd{constructor(){Ia(this,"socket",null)}connect(s){return this.socket=Cn(Qd,{auth:{token:s},transports:["websocket"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),this.socket.on("connect",()=>{console.log(" Socket connected")}),this.socket.on("disconnect",()=>{console.log(" Socket disconnected")}),this.socket.on("connect_error",e=>{console.error("Socket connection error:",e)}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}joinProject(s){var e;(e=this.socket)==null||e.emit("join:project",s)}leaveProject(s){var e;(e=this.socket)==null||e.emit("leave:project",s)}emitScheduleUpdate(s){var e;(e=this.socket)==null||e.emit("schedule:update",s)}onScheduleUpdated(s){var e;(e=this.socket)==null||e.on("schedule:updated",s)}emitPaymentRequest(s){var e;(e=this.socket)==null||e.emit("payment:request",s)}onNewPayment(s){var e;(e=this.socket)==null||e.on("payment:new",s)}emitPaymentStatusUpdate(s){var e;(e=this.socket)==null||e.emit("payment:statusUpdate",s)}onPaymentStatusChanged(s){var e;(e=this.socket)==null||e.on("payment:statusChanged",s)}onPaymentUpdate(s){var e;(e=this.socket)==null||e.on("payment:update",s)}sendMessage(s){var e;(e=this.socket)==null||e.emit("message:send",s)}onMessageReceive(s){var e;(e=this.socket)==null||e.on("message:receive",s)}sendNotification(s){var e;(e=this.socket)==null||e.emit("notification:send",s)}onNotificationReceive(s){var e;(e=this.socket)==null||e.on("notification:receive",s)}onActiveUsers(s){var e;(e=this.socket)==null||e.on("users:active",s)}on(s,e){var r;(r=this.socket)==null||r.on(s,e)}emit(s,e){var r;(r=this.socket)==null||r.emit(s,e)}off(s,e){var r;(r=this.socket)==null||r.off(s,e)}getSocket(){return this.socket}setSocket(s){this.socket=s}}const js=new Xd,Jd=()=>{var W,_e;const{user:t,logout:s,loading:e}=Is(),[r,a]=b.useState(!1),[i,o]=b.useState(!1),[l,c]=b.useState(!1),d=Fl(),{unreadCount:f}=bo(),[p,g]=b.useState(0),[N,A]=b.useState(0),[x,_]=b.useState(0),[E,D]=b.useState(0),[O,ie]=b.useState(!1),[X,U]=b.useState(0),[ee,P]=b.useState(!1),pe=b.useRef(0),Ne=b.useRef(null),ce=80,Y=b.useCallback(J=>{if(window.scrollY>0)return!1;let ke=J;for(;ke&&ke!==document.body;){const Je=window.getComputedStyle(ke).overflowY;if((Je==="auto"||Je==="scroll")&&ke.scrollTop>0)return!1;ke=ke.parentElement}return!0},[]),oe=b.useCallback(J=>{if(window.innerWidth>=768)return;const ke=J.target;Y(ke)&&(pe.current=J.touches[0].clientY,ie(!0))},[Y]),he=b.useCallback(J=>{if(!O||ee)return;const ke=J.target;if(!Y(ke)){ie(!1),U(0);return}const Je=J.touches[0].clientY-pe.current;if(Je>0){const $e=Math.min(Je*.5,120);U($e)}else ie(!1),U(0)},[O,ee,Y]),Le=b.useCallback(()=>{O&&(X>=ce&&!ee?(P(!0),U(50),setTimeout(()=>{window.location.reload()},300)):U(0),ie(!1))},[O,X,ee]);if(b.useEffect(()=>{c(!1)},[d.pathname]),b.useEffect(()=>{const J=ke=>{c(ke.detail.isOpen)};return window.addEventListener("mobileFormStateChange",J),()=>window.removeEventListener("mobileFormStateChange",J)},[]),b.useEffect(()=>{const J=()=>{D(ke=>Math.max(0,ke-1))};return window.addEventListener("quoteInquiryRead",J),()=>window.removeEventListener("quoteInquiryRead",J)},[]),b.useEffect(()=>{const J=()=>{A(ke=>Math.max(0,ke-1))};return window.addEventListener("paymentCompleted",J),()=>window.removeEventListener("paymentCompleted",J)},[]),b.useEffect(()=>{const J=js.getSocket();if(!J||!t)return;const ke=async()=>{try{const[Be,Je]=await Promise.all([rs.getAllPayments(),nn.getAllProjects()]);let $e=Be;if(t.name===""){const tt=Je.map(Fe=>Fe.name);$e=Be.filter(Fe=>tt.includes(Fe.project))}A($e.filter(tt=>tt.status==="pending").length)}catch(Be){console.error("Failed to refresh payment count:",Be)}};return J.on("payment:refresh",ke),()=>{J.off("payment:refresh",ke)}},[t]),b.useEffect(()=>{if(!t)return;const J=async()=>{try{const[Be,Je,$e,tt]=await Promise.all([Kd.getAllWorkRequests(),rs.getAllPayments(),Vn.getAllASRequests(),nn.getAllProjects()]);g(Be.filter(We=>We.assignedTo===t.name&&We.status==="pending").length);let Fe=Je;if(t.name===""){const We=tt.map(_t=>_t.name);Fe=Je.filter(_t=>We.includes(_t.project))}if(A(Fe.filter(We=>We.status==="pending").length),_($e.filter(We=>We.status==="in-progress").length),t.role==="admin"||t.role==="manager")try{const _t=(await ue.get("/quote-inquiries")).data.filter(B=>!B.isRead).length;D(_t)}catch(We){console.error("Failed to load quote inquiry count:",We)}}catch(Be){console.error("Failed to load badge counts:",Be)}};J();const ke=setInterval(J,3e4);return()=>clearInterval(ke)},[t]),e)return n.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxDEV("div",{className:"text-center",children:[n.jsxDEV("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:247,columnNumber:11},void 0),n.jsxDEV("p",{className:"mt-4 text-gray-600",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:248,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:246,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:245,columnNumber:7},void 0);if(!t){const J=window.location.pathname+window.location.search;return J&&J!=="/login"&&J!=="/"&&sessionStorage.setItem("redirectAfterLogin",J),n.jsxDEV(Ei,{to:"/login",replace:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:261,columnNumber:12},void 0)}const Z=[{name:"",href:"/dashboard"},{name:"",href:"/projects"},{name:"",href:"/schedule"},{name:"",href:"/drawings"},{name:"",href:"/site-log"},{name:"",href:"/additional-work"},{name:"",href:"/construction-payment",roles:["admin","manager"]},{name:"",href:"/work-request",...p>0&&{badge:p}},{name:"",href:"/specbook"},{name:"",href:"/finish-check"},{name:"",href:"/execution-history"},{name:"",href:"/payments",...N>0&&{badge:N}},{name:"AS ",href:"/after-service",...x>0&&{badge:x}},{name:"",href:"/estimate-preview",roles:["admin","manager"]},{name:"",href:"/quote-inquiry",roles:["admin","manager"],...E>0&&{badge:E}},{name:"",href:"/contractors"}],xe=Z.filter(J=>!J.roles||J.roles.includes((t==null?void 0:t.role)||"")),Ye=((W=Z.find(J=>J.href===d.pathname))==null?void 0:W.name)||"",it=(()=>{const J=d.pathname;return["/projects","/schedule","/after-service","/additional-work","/construction-payment","/contractors","/work-request","/execution-history"].includes(J)?()=>{const Be=new CustomEvent("headerAddButtonClick");window.dispatchEvent(Be)}:null})();return n.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[n.jsxDEV("div",{className:ss("fixed inset-0 z-40 lg:hidden",r?"block":"hidden"),children:[n.jsxDEV("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50",onClick:()=>a(!1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:329,columnNumber:9},void 0),n.jsxDEV("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[n.jsxDEV("div",{className:"flex h-16 items-center justify-between px-6 border-b border-gray-200",children:[n.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:335,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>a(!1),className:"text-sm text-gray-600 hover:text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:336,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:334,columnNumber:11},void 0),n.jsxDEV("nav",{className:"flex-1 space-y-1 px-4 py-4",children:xe.map(J=>n.jsxDEV(Vr,{to:J.href,className:({isActive:ke})=>ss("block px-4 py-3 text-sm font-medium border-l-2 transition-colors relative",ke?"border-gray-900 bg-gray-50 text-gray-900":"border-transparent text-gray-600 hover:border-gray-400 hover:bg-gray-50"),onClick:()=>{a(!1)},children:n.jsxDEV("span",{className:"flex items-center justify-between",children:[n.jsxDEV("span",{children:J.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:362,columnNumber:19},void 0),J.badge&&J.badge>0&&n.jsxDEV("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:J.badge>99?"99+":J.badge},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:364,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:361,columnNumber:17},void 0)},J.name,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:345,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:343,columnNumber:11},void 0),n.jsxDEV("div",{className:"border-t border-gray-200 px-4 py-4",children:n.jsxDEV("button",{onClick:s,className:"w-full px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 text-left",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:373,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:372,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:333,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:323,columnNumber:7},void 0),n.jsxDEV("div",{className:"desktop-sidebar hidden lg:fixed lg:inset-y-0 lg:flex lg:w-56 lg:flex-col",children:n.jsxDEV("div",{className:"flex flex-col bg-white border-r border-gray-200",children:[n.jsxDEV("div",{className:"flex h-16 items-center px-6 border-b border-gray-200",children:n.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:387,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:386,columnNumber:11},void 0),n.jsxDEV("nav",{className:"flex-1 space-y-1 px-4 py-4",children:xe.map(J=>n.jsxDEV(Vr,{to:J.href,className:({isActive:ke})=>ss("block px-4 py-3 text-sm font-medium border-l-2 transition-colors relative",ke?"border-gray-900 bg-gray-50 text-gray-900":"border-transparent text-gray-600 hover:border-gray-400 hover:bg-gray-50"),children:n.jsxDEV("span",{className:"flex items-center justify-between",children:[n.jsxDEV("span",{children:J.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:404,columnNumber:19},void 0),J.badge&&J.badge>0&&n.jsxDEV("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:J.badge>99?"99+":J.badge},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:406,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:403,columnNumber:17},void 0)},J.name,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:391,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:389,columnNumber:11},void 0),n.jsxDEV("div",{className:"border-t border-gray-200 px-4 py-4",children:n.jsxDEV("button",{onClick:s,className:"w-full px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 text-left",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:415,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:414,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:385,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:384,columnNumber:7},void 0),n.jsxDEV("div",{className:"main-content lg:pl-56",children:[n.jsxDEV("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200 print-hide",children:n.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 lg:px-8",children:[n.jsxDEV("div",{className:"flex items-center space-x-3",children:[n.jsxDEV("button",{onClick:()=>a(!0),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 -ml-2","aria-label":" ",children:n.jsxDEV("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:438,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:437,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:432,columnNumber:15},void 0),Ye&&n.jsxDEV("h1",{className:"text-lg font-bold text-gray-900",children:Ye},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:442,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:431,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex items-center space-x-2 sm:space-x-6 ml-auto",children:[it&&n.jsxDEV("button",{onClick:it,className:"lg:hidden p-2 text-gray-900 hover:text-gray-700","aria-label":l?"":"",children:l?n.jsxDEV(Dt,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:455,columnNumber:37},void 0):n.jsxDEV(rn,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:455,columnNumber:65},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:450,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>o(!i),className:"hidden sm:block relative p-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"",children:[n.jsxDEV("svg",{className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:465,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:464,columnNumber:17},void 0),f>0&&n.jsxDEV("span",{className:"absolute top-1 right-1 flex items-center justify-center h-4 w-4 bg-red-600 text-white text-[10px] font-bold rounded-full",children:f>9?"9+":f},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:468,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:459,columnNumber:15},void 0),n.jsxDEV("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-3",children:[n.jsxDEV("div",{className:"text-right",children:[n.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:475,columnNumber:19},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.role},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:476,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:474,columnNumber:17},void 0),n.jsxDEV("div",{className:"h-8 w-8 sm:h-9 sm:w-9 bg-gray-900 text-white flex items-center justify-center text-xs font-bold rounded-full",children:(_e=t==null?void 0:t.name)==null?void 0:_e.substring(0,1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:478,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:473,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:447,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:429,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:428,columnNumber:9},void 0),n.jsxDEV("div",{className:"portrait-top-nav hidden",children:n.jsxDEV("div",{className:"flex items-center gap-1 px-2 py-2 bg-white border-b border-gray-200 overflow-x-auto",children:xe.map(J=>n.jsxDEV(Vr,{to:J.href,className:({isActive:ke})=>ss("px-3 py-1.5 text-sm font-medium rounded-full whitespace-nowrap transition-colors relative",ke?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"),children:n.jsxDEV("span",{className:"flex items-center gap-1",children:[n.jsxDEV("span",{children:J.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:503,columnNumber:19},void 0),J.badge&&J.badge>0&&n.jsxDEV("span",{className:"inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-[10px] font-bold leading-none text-white bg-red-600 rounded-full",children:J.badge>99?"99+":J.badge},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:505,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:502,columnNumber:17},void 0)},J.name,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:490,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:488,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:487,columnNumber:9},void 0),n.jsxDEV("main",{ref:Ne,className:"py-[10px] md:py-6 lg:py-8",onTouchStart:oe,onTouchMove:he,onTouchEnd:Le,children:[X>0&&n.jsxDEV("div",{className:"md:hidden fixed left-0 right-0 flex items-center justify-center z-50 pointer-events-none",style:{top:56,height:X,transition:O?"none":"height 0.2s ease-out"},children:n.jsxDEV("div",{className:ss("flex items-center justify-center w-10 h-10 bg-white rounded-full shadow-lg border",ee&&"animate-spin"),style:{transform:`rotate(${ee?0:X*2}deg)`,opacity:Math.min(X/ce,1)},children:n.jsxDEV(Jl,{className:ss("w-5 h-5",X>=ce?"text-blue-600":"text-gray-400")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:543,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:533,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:525,columnNumber:13},void 0),n.jsxDEV("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8",style:{transform:X>0?`translateY(${X}px)`:"none",transition:O?"none":"transform 0.2s ease-out"},children:n.jsxDEV(Ol,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:560,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:553,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:516,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:426,columnNumber:7},void 0),n.jsxDEV(zd,{isOpen:i,onClose:()=>o(!1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:566,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:321,columnNumber:5},void 0)},Gd=t=>{try{const s=window.AudioContext||window.webkitAudioContext,e=new s,r=t==="emergency"?5:3;let a=0;const i=()=>{if(a>=r)return;const o=e.createOscillator(),l=e.createGain();o.connect(l),l.connect(e.destination),o.frequency.value=t==="emergency"?1e3:800,o.type="sine",l.gain.setValueAtTime(.3,e.currentTime),l.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),o.start(e.currentTime),o.stop(e.currentTime+.5),a++,a<r&&setTimeout(i,700)};i()}catch(s){console.error("  :",s)}},Zd=t=>{if("vibrate"in navigator){const s=t==="emergency"?[200,200,200,200,200,200,200,200,200,200]:[200,200,200,200,200,200];navigator.vibrate(s)}},eu=(t,s)=>{Gd(t),Zd(t),"Notification"in window&&Notification.permission==="granted"&&new Notification("  ",{body:s,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:"urgent-payment",requireInteraction:!0})},tu=async()=>"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":Notification.permission==="granted",Rn={getAllSchedules:async()=>(await ue.get("/schedules")).data,getScheduleById:async t=>(await ue.get(`/schedules/${t}`)).data,createSchedule:async t=>(await ue.post("/schedules",{project:t.project,title:t.title,type:t.type||"other",phase:t.phase||"",startDate:t.startDate,endDate:t.endDate,allDay:t.allDay!==void 0?t.allDay:!0,assignedTo:t.assignedTo||[],description:t.description,location:t.location,priority:t.priority||"medium",progress:t.progress||0,isCompleted:t.isCompleted||!1,asRequestId:t.asRequestId,time:t.time})).data,updateSchedule:async(t,s)=>(await ue.put(`/schedules/${t}`,s)).data,deleteSchedule:async t=>{await ue.delete(`/schedules/${t}`)}},ks={getAllContractors:async()=>(await ue.get("/contractors")).data,getContractorById:async t=>(await ue.get(`/contractors/${t}`)).data,createContractor:async t=>(await ue.post("/contractors",t)).data,updateContractor:async(t,s)=>(await ue.put(`/contractors/${t}`,s)).data,deleteContractor:async t=>{await ue.delete(`/contractors/${t}`)}},Fn={getAllConstructionPayments:async()=>(await ue.get("/construction-payments")).data,getConstructionPaymentById:async t=>(await ue.get(`/construction-payments/${t}`)).data,createConstructionPayment:async t=>(await ue.post("/construction-payments",t)).data,updateConstructionPayment:async(t,s)=>(await ue.put(`/construction-payments/${t}`,s)).data,deleteConstructionPayment:async t=>{await ue.delete(`/construction-payments/${t}`)}},On={getAllRecords:async()=>(await ue.get("/execution-records")).data,getRecordById:async t=>(await ue.get(`/execution-records/${t}`)).data,createRecord:async t=>(console.log("[executionRecordService.createRecord] Creating:",t),(await ue.post("/execution-records",t)).data),updateRecord:async(t,s)=>(await ue.put(`/execution-records/${t}`,s)).data,deleteRecord:async t=>{await ue.delete(`/execution-records/${t}`)}},Us=Zr()(ho((t,s)=>({projects:[],schedules:[],payments:[],contractors:[],constructionPayments:[],asRequests:[],executionRecords:[],setProjects:e=>t({projects:e}),addProject:e=>t(r=>{const a={id:e.id,project:e.name,client:e.client,totalAmount:e.contractAmount,vatType:"percentage",vatPercentage:100,vatAmount:0,payments:[]};return{projects:[e,...r.projects],constructionPayments:[a,...r.constructionPayments]}}),updateProject:(e,r)=>t(a=>({projects:a.projects.map(i=>i.id===e?{...i,...r}:i)})),deleteProject:e=>t(r=>({projects:r.projects.filter(a=>a.id!==e),constructionPayments:r.constructionPayments.filter(a=>a.id!==e)})),setSchedules:e=>t({schedules:e}),addSchedule:e=>t(r=>({schedules:[e,...r.schedules]})),updateSchedule:(e,r)=>t(a=>({schedules:a.schedules.map(i=>i.id===e?{...i,...r}:i)})),deleteSchedule:e=>t(r=>({schedules:r.schedules.filter(a=>a.id!==e)})),setPayments:e=>t({payments:e}),addPayment:e=>t(r=>({payments:[e,...r.payments]})),updatePayment:(e,r)=>t(a=>({payments:a.payments.map(i=>i.id===e?{...i,...r}:i)})),deletePayment:e=>t(r=>({payments:r.payments.filter(a=>a.id!==e)})),setContractors:e=>t({contractors:e}),addContractor:e=>t(r=>({contractors:[e,...r.contractors]})),updateContractor:(e,r)=>t(a=>({contractors:a.contractors.map(i=>i.id===e?{...i,...r}:i)})),deleteContractor:e=>t(r=>({contractors:r.contractors.filter(a=>a.id!==e)})),setConstructionPayments:e=>t({constructionPayments:e}),addConstructionPayment:e=>t(r=>({constructionPayments:[e,...r.constructionPayments]})),updateConstructionPayment:(e,r)=>t(a=>({constructionPayments:a.constructionPayments.map(i=>i.id===e?{...i,...r}:i)})),deleteConstructionPayment:e=>t(r=>({constructionPayments:r.constructionPayments.filter(a=>a.id!==e)})),setASRequests:e=>t({asRequests:e}),addASRequest:e=>t(r=>({asRequests:[e,...r.asRequests]})),updateASRequest:(e,r)=>t(a=>({asRequests:a.asRequests.map(i=>i.id===e?{...i,...r}:i)})),deleteASRequest:e=>t(r=>({asRequests:r.asRequests.filter(a=>a.id!==e)})),setExecutionRecords:e=>t({executionRecords:e}),addExecutionRecord:e=>{console.log("[dataStore]  :",e.id,e.itemName),t(r=>{const a=[e,...r.executionRecords];return console.log("[dataStore]   :",a.length),{executionRecords:a}})},updateExecutionRecord:(e,r)=>t(a=>({executionRecords:a.executionRecords.map(i=>i.id===e?{...i,...r}:i)})),deleteExecutionRecord:e=>t(r=>({executionRecords:r.executionRecords.filter(a=>a.id!==e)})),loadPaymentsFromAPI:async()=>{try{const e=await rs.getAllPayments();console.log("[loadPaymentsFromAPI] Raw API response sample:",e[0]);const r=e.map(d=>({id:String(d.id),project:d.project_name,purpose:d.description,process:d.vendor_name,itemName:d.item_name||"",amount:d.amount,materialAmount:d.material_amount||0,laborAmount:d.labor_amount||0,originalMaterialAmount:d.original_material_amount||0,originalLaborAmount:d.original_labor_amount||0,applyTaxDeduction:d.apply_tax_deduction===1,includesVAT:d.includes_vat===1,quickText:d.quick_text||"",images:(()=>{if(!d.images)return[];if(Array.isArray(d.images))return d.images;try{const f=JSON.parse(d.images);return Array.isArray(f)?f:[]}catch(f){return console.error("  :",f),[]}})(),category:d.request_type,status:d.status,urgency:"normal",requestedBy:d.requester_name,requestDate:new Date(d.created_at),approvalDate:d.approved_at?new Date(d.approved_at):void 0,bankInfo:{accountHolder:d.account_holder||"",bankName:d.bank_name||"",accountNumber:d.account_number||""},attachments:[],notes:d.notes||"",completionDate:d.paid_at?new Date(d.paid_at):void 0})),a=s().payments,i=new Set(r.map(d=>d.id)),o=3e4,l=Date.now();console.log("[loadPaymentsFromAPI] ===    ==="),console.log("[loadPaymentsFromAPI] API  :",r.length),console.log("[loadPaymentsFromAPI]   :",a.length),console.log("[loadPaymentsFromAPI]   ID :",a.map(d=>d.id));const c=a.filter(d=>{if(d.id.startsWith("temp_"))return console.log("[loadPaymentsFromAPI]     (temp ID):",d.id),!0;if(i.has(d.id))return console.log("[loadPaymentsFromAPI]   -  :",d.id),!1;const f=d._addedAt;return f&&l-f<o?(console.log("[loadPaymentsFromAPI]    :",d.id,"",(l-f)/1e3,""),!0):(console.log("[loadPaymentsFromAPI]   (  _addedAt ):",d.id),!1)});if(console.log("[loadPaymentsFromAPI]   :",c.length),console.log("[loadPaymentsFromAPI]   ID:",c.map(d=>d.id)),c.length>0){console.log(`[loadPaymentsFromAPI]  ${c.length}  `);const d=new Set(c.map(N=>N.id)),f=r.filter(N=>!d.has(N.id)),g=[...c.map(N=>({...N,_addedAt:Date.now()})),...f];console.log("[loadPaymentsFromAPI]   :",g.length),t({payments:g})}else console.log("[loadPaymentsFromAPI]    - API  "),t({payments:r})}catch(e){throw console.error("Failed to load payments from API:",e),e}},addPaymentToAPI:async e=>{const r=`temp_${Date.now()}`,a={...e,id:r,_addedAt:Date.now(),_tempId:r};t(i=>({payments:[a,...i.payments]})),console.log("[addPaymentToAPI]   - temp ID:",r);try{const o=s().projects.find(p=>p.name===e.project),c={projectId:o?o.id:e.project,purpose:e.purpose,process:e.process,itemName:e.itemName,amount:e.amount,status:e.status||"pending",category:e.category,urgency:e.urgency,requestedBy:e.requestedBy,bankInfo:e.bankInfo,notes:e.notes,attachments:[],materialAmount:e.materialAmount||0,laborAmount:e.laborAmount||0,originalMaterialAmount:e.originalMaterialAmount||0,originalLaborAmount:e.originalLaborAmount||0,applyTaxDeduction:e.applyTaxDeduction||!1,includesVAT:e.includesVAT||!1,quickText:e.quickText||"",images:e.images||[]};console.log("[addPaymentToAPI] Sending payment data:",c);const d=await rs.createPayment(c),f=String(d.id);return t(p=>({payments:p.payments.map(g=>g._tempId===r?{...g,id:f,_addedAt:Date.now()}:g)})),console.log("[addPaymentToAPI]   -  ID:",f),f}catch(i){throw console.error("Failed to add payment to API:",i),t(o=>({payments:o.payments.filter(l=>l._tempId!==r)})),i}},updatePaymentInAPI:async(e,r)=>{try{if(r.status&&Object.keys(r).length===1)await rs.updatePaymentStatus(e,r.status);else{let a=r.project;if(r.project){const o=s().projects.find(l=>l.name===r.project);a=o?o.id:r.project}await rs.updatePayment(e,{projectId:a,purpose:r.purpose,process:r.process,itemName:r.itemName,amount:r.amount,materialAmount:r.materialAmount,laborAmount:r.laborAmount,originalMaterialAmount:r.originalMaterialAmount,originalLaborAmount:r.originalLaborAmount,category:r.category,urgency:r.urgency,bankInfo:r.bankInfo,notes:r.notes,requestDate:r.requestDate,includesVAT:r.includesVAT,applyTaxDeduction:r.applyTaxDeduction})}t(a=>({payments:a.payments.map(i=>i.id===e?{...i,...r}:i)}))}catch(a){throw console.error("Failed to update payment in API:",a),a}},deletePaymentFromAPI:async e=>{try{await rs.deletePayment(e),t(r=>({payments:r.payments.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete payment from API:",r),r}},loadSchedulesFromAPI:async()=>{try{const e=await Rn.getAllSchedules();console.log(" LOAD SCHEDULES - Raw API response sample:",e[0]);const r=e.map(a=>{var o;console.log(" Processing schedule:",{id:a._id,title:a.title,assigneeNames:a.assigneeNames,assignedTo:a.assignedTo,assignedToType:typeof a.assignedTo,assignedToLength:Array.isArray(a.assignedTo)?a.assignedTo.length:"not array"});const i=Array.isArray(a.assigneeNames)?a.assigneeNames:a.assigneeNames?typeof a.assigneeNames=="string"?a.assigneeNames.split(",").map(l=>l.trim()):[a.assigneeNames]:((o=a.assignedTo)==null?void 0:o.map(l=>typeof l=="object"?l.name:l))||[];return console.log(" Final attendees:",i),{id:a._id,title:a.title,start:new Date(a.startDate),end:new Date(a.endDate),type:a.type,project:typeof a.project=="object"?a.project.name:a.project,location:a.location,attendees:i,description:a.description,time:a.time}});r.sort((a,i)=>{const o=parseInt(a.id)||0,l=parseInt(i.id)||0;return o-l}),t({schedules:r})}catch(e){throw console.error("Failed to load schedules from API:",e),e}},addScheduleToAPI:async e=>{var i,o;const r=(i=e.id)!=null&&i.startsWith("temp_")?e.id:`temp_${Date.now()}`,a={...e,id:r};t(l=>({schedules:[...l.schedules,a]}));try{const l=await Rn.createSchedule({project:e.project||"",title:e.title,type:e.type,startDate:e.start,endDate:e.end,allDay:!e.time||e.time==="-",location:e.location,assignedTo:e.attendees||[],description:e.description,asRequestId:e.asRequestId,time:e.time}),c=e.attendees||[];let d=l.assigneeNames||((o=l.assignedTo)==null?void 0:o.map(p=>typeof p=="object"?p.name:p))||[];c.length>0&&d.length>c.length&&(d=c);const f={id:l._id,title:l.title,start:new Date(l.startDate),end:new Date(l.endDate),type:l.type,project:typeof l.project=="object"?l.project.name:l.project,location:l.location,attendees:d,description:l.description,time:l.time};t(p=>({schedules:p.schedules.map(g=>g.id===r?f:g)}))}catch(l){throw console.error("Failed to add schedule to API:",l),t(c=>({schedules:c.schedules.filter(d=>d.id!==r)})),l}},updateScheduleInAPI:async(e,r)=>{var a,i,o;try{console.log(" updateScheduleInAPI called with:",{id:e,updatedSchedule:r});const l={};r.project!==void 0&&(l.project=r.project),r.title!==void 0&&(l.title=r.title),r.type!==void 0&&(l.type=r.type),r.start!==void 0&&(l.startDate=r.start),r.end!==void 0&&(l.endDate=r.end),r.location!==void 0&&(l.location=r.location),r.description!==void 0&&(l.description=r.description),r.attendees!==void 0&&(l.assignedTo=r.attendees),r.time!==void 0&&(l.time=r.time),console.log(" Sending update data:",l);const c=await Rn.updateSchedule(e,l);console.log(" updateScheduleInAPI response:",c);const d={id:c._id,title:c.title,start:new Date(c.startDate),end:new Date(c.endDate),type:c.type,project:typeof c.project=="object"?c.project.name:c.project,location:c.location,attendees:c.assigneeNames||((a=c.assignedTo)==null?void 0:a.map(f=>typeof f=="object"?f.name:f))||[],description:c.description,time:c.time};t(f=>({schedules:f.schedules.map(p=>p.id===e?d:p)}))}catch(l){throw console.error("Failed to update schedule in API:",l),console.error("Error details:",{message:l instanceof Error?l.message:"Unknown error",response:l&&typeof l=="object"&&"response"in l?(i=l.response)==null?void 0:i.data:void 0,status:l&&typeof l=="object"&&"response"in l?(o=l.response)==null?void 0:o.status:void 0}),l}},deleteScheduleFromAPI:async e=>{var i;const{schedules:r}=s(),a=r.find(o=>o.id===e);if(a){t(o=>({schedules:o.schedules.filter(l=>l.id!==e)}));try{e.startsWith("temp_")||await Rn.deleteSchedule(e)}catch(o){const l=o,c=(i=l==null?void 0:l.response)==null?void 0:i.status;if(c===404||c===502||c===503||c===504){console.log("Schedule delete - ignoring error (status:",c,"):",e);return}throw console.error("Failed to delete schedule from API:",o),a&&t(d=>({schedules:[...d.schedules,a]})),o}}},loadProjectsFromAPI:async()=>{try{const r=(await nn.getAllProjects()).map(a=>{var i,o;return{id:a._id||a.id,name:a.name,client:typeof a.client=="object"?a.client.name:a.client||"",location:typeof a.location=="object"?a.location.address:a.location||a.address||"",status:a.status==="inProgress"?"in-progress":a.status==="onHold"?"on-hold":a.status,progress:a.progress||0,startDate:a.startDate||a.start_date?new Date(a.startDate||a.start_date):void 0,endDate:a.endDate||a.end_date?new Date(a.endDate||a.end_date):void 0,contractAmount:a.budget||a.contractAmount||0,spent:a.actualCost||a.spent||0,manager:a.manager||"",team:[],description:a.description||"",meetingNotes:((i=a.meetingNotes)==null?void 0:i.map(l=>({id:l.id,content:l.content,date:new Date(l.date)})))||[],customerRequests:((o=a.customerRequests)==null?void 0:o.map(l=>({id:l.id,content:l.content,completed:l.completed,createdAt:new Date(l.createdAt)})))||[],entrancePassword:a.entrancePassword||"",sitePassword:a.sitePassword||""}});t({projects:r})}catch(e){throw console.error("Failed to load projects from API:",e),e}},addProjectToAPI:async e=>{var r,a;try{const i=await nn.createProject({name:e.name,client:e.client,location:e.location,startDate:e.startDate,endDate:e.endDate,status:e.status,contractAmount:e.contractAmount,spent:e.spent,manager:e.manager,team:e.team,progress:e.progress,description:e.description}),o={id:i._id||i.id,name:i.name,client:typeof i.client=="object"?i.client.name:i.client||"",location:typeof i.location=="object"?i.location.address:i.location||i.address||"",status:i.status==="inProgress"?"in-progress":i.status==="onHold"?"on-hold":i.status,progress:i.progress||0,startDate:i.startDate||i.start_date?new Date(i.startDate||i.start_date):void 0,endDate:i.endDate||i.end_date?new Date(i.endDate||i.end_date):void 0,contractAmount:i.budget||i.contractAmount||0,spent:i.actualCost||i.spent||0,manager:i.manager||"",team:[],description:i.description||"",meetingNotes:((r=i.meetingNotes)==null?void 0:r.map(l=>({id:l.id,content:l.content,date:new Date(l.date)})))||[],customerRequests:((a=i.customerRequests)==null?void 0:a.map(l=>({id:l.id,content:l.content,completed:l.completed,createdAt:new Date(l.createdAt)})))||[],entrancePassword:i.entrancePassword||"",sitePassword:i.sitePassword||""};t(l=>({projects:[o,...l.projects]}))}catch(i){throw console.error("Failed to add project to API:",i),i}},updateProjectInAPI:async(e,r)=>{var a,i;try{const o=await nn.updateProject(e,r),l={id:o._id||o.id,name:o.name,client:typeof o.client=="object"?o.client.name:o.client||"",location:typeof o.location=="object"?o.location.address:o.location||o.address||"",status:o.status==="inProgress"?"in-progress":o.status==="onHold"?"on-hold":o.status,progress:o.progress||0,startDate:o.startDate||o.start_date?new Date(o.startDate||o.start_date):void 0,endDate:o.endDate||o.end_date?new Date(o.endDate||o.end_date):void 0,contractAmount:o.budget||o.contractAmount||0,spent:o.actualCost||o.spent||0,manager:o.manager||"",team:[],description:o.description||"",meetingNotes:((a=o.meetingNotes)==null?void 0:a.map(c=>({id:c.id,content:c.content,date:new Date(c.date)})))||[],customerRequests:((i=o.customerRequests)==null?void 0:i.map(c=>({id:c.id,content:c.content,completed:c.completed,createdAt:new Date(c.createdAt)})))||[],entrancePassword:o.entrancePassword||"",sitePassword:o.sitePassword||""};t(c=>({projects:c.projects.map(d=>d.id===e?l:d)}))}catch(o){throw console.error("Failed to update project in API:",o),o}},deleteProjectFromAPI:async e=>{try{await nn.deleteProject(e),t(r=>({projects:r.projects.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete project from API:",r),r}},loadContractorsFromAPI:async()=>{try{const r=(await ks.getAllContractors()).map(a=>({id:a._id,rank:a.rank,companyName:a.companyName,name:a.name,process:a.process,contact:a.contact,accountNumber:a.accountNumber,notes:a.notes,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}));t({contractors:r})}catch(e){throw console.error("Failed to load contractors from API:",e),e}},addContractorToAPI:async e=>{try{const r=await ks.createContractor({rank:e.rank,companyName:e.companyName,name:e.name,process:e.process,contact:e.contact,accountNumber:e.accountNumber,notes:e.notes}),a={id:r._id,rank:r.rank,companyName:r.companyName,name:r.name,process:r.process,contact:r.contact,accountNumber:r.accountNumber,notes:r.notes,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt)};t(i=>({contractors:[a,...i.contractors]}))}catch(r){throw console.error("Failed to add contractor to API:",r),r}},updateContractorInAPI:async(e,r)=>{try{const a=await ks.updateContractor(e,{rank:r.rank,companyName:r.companyName,name:r.name,process:r.process,contact:r.contact,accountNumber:r.accountNumber,notes:r.notes}),i={id:a._id,rank:a.rank,companyName:a.companyName,name:a.name,process:a.process,contact:a.contact,accountNumber:a.accountNumber,notes:a.notes,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)};t(o=>({contractors:o.contractors.map(l=>l.id===e?i:l)}))}catch(a){throw console.error("Failed to update contractor in API:",a),a}},deleteContractorFromAPI:async e=>{try{await ks.deleteContractor(e),t(r=>({contractors:r.contractors.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete contractor from API:",r),r}},loadConstructionPaymentsFromAPI:async()=>{try{const r=(await Fn.getAllConstructionPayments()).map(a=>{var o;let i;return a.expectedPaymentDates&&(i={contract:a.expectedPaymentDates.contract?new Date(a.expectedPaymentDates.contract):void 0,start:a.expectedPaymentDates.start?new Date(a.expectedPaymentDates.start):void 0,middle:a.expectedPaymentDates.middle?new Date(a.expectedPaymentDates.middle):void 0,final:a.expectedPaymentDates.final?new Date(a.expectedPaymentDates.final):void 0}),{id:a._id,project:a.project,client:a.client,totalAmount:a.totalAmount,vatType:a.vatType,vatPercentage:a.vatPercentage,vatAmount:a.vatAmount,expectedPaymentDates:i,payments:((o=a.payments)==null?void 0:o.map(l=>{var f;const c=l.date?new Date(l.date):new Date,d=isNaN(c.getTime())?new Date:c;return{type:l.type||((f=l.types)==null?void 0:f[0])||"",amount:l.amount,date:d,method:l.method,notes:l.notes}}))||[]}});t({constructionPayments:r})}catch(e){throw console.error("Failed to load construction payments from API:",e),e}},addConstructionPaymentToAPI:async e=>{var r;try{const a=await Fn.createConstructionPayment(e),i={id:a._id,project:a.project,client:a.client,totalAmount:a.totalAmount,vatType:a.vatType,vatPercentage:a.vatPercentage,vatAmount:a.vatAmount,payments:((r=a.payments)==null?void 0:r.map(o=>{var d;const l=o.date?new Date(o.date):new Date,c=isNaN(l.getTime())?new Date:l;return{type:o.type||((d=o.types)==null?void 0:d[0])||"",amount:o.amount,date:c,method:o.method,notes:o.notes}}))||[]};t(o=>({constructionPayments:[i,...o.constructionPayments]}))}catch(a){throw console.error("Failed to add construction payment to API:",a),a}},updateConstructionPaymentInAPI:async(e,r)=>{var a;try{const i=await Fn.updateConstructionPayment(e,r);let o;i.expectedPaymentDates&&(o={contract:i.expectedPaymentDates.contract?new Date(i.expectedPaymentDates.contract):void 0,start:i.expectedPaymentDates.start?new Date(i.expectedPaymentDates.start):void 0,middle:i.expectedPaymentDates.middle?new Date(i.expectedPaymentDates.middle):void 0,final:i.expectedPaymentDates.final?new Date(i.expectedPaymentDates.final):void 0});const l={id:i._id,project:i.project,client:i.client,totalAmount:i.totalAmount,vatType:i.vatType,vatPercentage:i.vatPercentage,vatAmount:i.vatAmount,expectedPaymentDates:o,payments:((a=i.payments)==null?void 0:a.map(c=>{var d;return{type:c.type||((d=c.types)==null?void 0:d[0])||"",amount:c.amount,date:new Date(c.date),method:c.method,notes:c.notes}}))||[]};t(c=>({constructionPayments:c.constructionPayments.map(d=>d.id===e?l:d)}))}catch(i){throw console.error("Failed to update construction payment in API:",i),i}},deleteConstructionPaymentFromAPI:async e=>{try{await Fn.deleteConstructionPayment(e),t(r=>({constructionPayments:r.constructionPayments.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete construction payment from API:",r),r}},loadASRequestsFromAPI:async()=>{try{const r=(await Vn.getAllASRequests()).map(a=>({id:a._id,project:a.project,client:a.client,requestDate:new Date(a.requestDate),siteAddress:a.siteAddress,entrancePassword:a.entrancePassword,description:a.description,scheduledVisitDate:a.scheduledVisitDate?new Date(a.scheduledVisitDate):void 0,scheduledVisitTime:a.scheduledVisitTime,assignedTo:a.assignedTo?Array.isArray(a.assignedTo)?a.assignedTo:[a.assignedTo]:[],completionDate:a.completionDate?new Date(a.completionDate):void 0,notes:a.notes,status:a.status||"pending"}));t({asRequests:r})}catch(e){throw console.error("Failed to load AS requests from API:",e),e}},addASRequestToAPI:async e=>{try{const r=await Vn.createASRequest(e),a={id:r._id,project:r.project,client:r.client,requestDate:new Date(r.requestDate),siteAddress:r.siteAddress,entrancePassword:r.entrancePassword,description:r.description,scheduledVisitDate:r.scheduledVisitDate?new Date(r.scheduledVisitDate):void 0,scheduledVisitTime:r.scheduledVisitTime,assignedTo:Array.isArray(r.assignedTo)?r.assignedTo:[],completionDate:r.completionDate?new Date(r.completionDate):void 0,notes:r.notes};return t(i=>({asRequests:[a,...i.asRequests]})),a}catch(r){throw console.error("Failed to add AS request to API:",r),r}},updateASRequestInAPI:async(e,r)=>{try{const a=await Vn.updateASRequest(e,r),i={id:a._id,project:a.project,client:a.client,requestDate:new Date(a.requestDate),siteAddress:a.siteAddress,entrancePassword:a.entrancePassword,description:a.description,scheduledVisitDate:a.scheduledVisitDate?new Date(a.scheduledVisitDate):void 0,scheduledVisitTime:a.scheduledVisitTime,assignedTo:Array.isArray(a.assignedTo)?a.assignedTo:[],completionDate:a.completionDate?new Date(a.completionDate):void 0,notes:a.notes,status:a.status||"pending"};t(o=>({asRequests:o.asRequests.map(l=>l.id===e?i:l)}))}catch(a){throw console.error("Failed to update AS request in API:",a),a}},deleteASRequestFromAPI:async e=>{try{await Vn.deleteASRequest(e),t(r=>({asRequests:r.asRequests.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete AS request from API:",r),r}},loadExecutionRecordsFromAPI:async()=>{try{const e=await On.getAllRecords();console.log("[loadExecutionRecordsFromAPI] Loaded",e.length,"records");const r=e.map(a=>({id:String(a.id),project:a.project_name,author:a.author||void 0,date:new Date(a.date),process:a.process||void 0,itemName:a.item_name,materialCost:a.material_cost||0,laborCost:a.labor_cost||0,vatAmount:a.vat_amount||0,totalAmount:a.total_amount||0,notes:a.notes||void 0,images:a.images||[],paymentId:a.payment_id?String(a.payment_id):void 0,includesTaxDeduction:a.includes_tax_deduction===1,includesVat:a.includes_vat===1,createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)}));t({executionRecords:r})}catch(e){throw console.error("Failed to load execution records from API:",e),e}},addExecutionRecordToAPI:async e=>{try{console.log("[addExecutionRecordToAPI] Adding:",e.itemName,"includesTaxDeduction:",e.includesTaxDeduction,"includesVat:",e.includesVat);const r=await On.createRecord({project_name:e.project,author:e.author,date:e.date.toISOString().split("T")[0],process:e.process,item_name:e.itemName,material_cost:e.materialCost,labor_cost:e.laborCost,vat_amount:e.vatAmount,total_amount:e.totalAmount,notes:e.notes,payment_id:e.paymentId,includes_tax_deduction:e.includesTaxDeduction,includes_vat:e.includesVat}),a={id:String(r.id),project:r.project_name,author:r.author||void 0,date:new Date(r.date),process:r.process||void 0,itemName:r.item_name,materialCost:r.material_cost||0,laborCost:r.labor_cost||0,vatAmount:r.vat_amount||0,totalAmount:r.total_amount||0,notes:r.notes||void 0,paymentId:r.payment_id?String(r.payment_id):void 0,includesTaxDeduction:r.includes_tax_deduction===1,includesVat:r.includes_vat===1,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at)};return console.log("[addExecutionRecordToAPI] newRecord includesVat:",a.includesVat,"from API:",r.includes_vat),t(i=>({executionRecords:[a,...i.executionRecords]})),console.log("[addExecutionRecordToAPI] Added with ID:",a.id),a}catch(r){throw console.error("Failed to add execution record to API:",r),r}},updateExecutionRecordInAPI:async(e,r)=>{console.log("[updateExecutionRecordInAPI] Called with id:",e,"record:",r);try{let a;if(r.date){const i=r.date instanceof Date?r.date:new Date(r.date);console.log("[updateExecutionRecordInAPI] Date conversion:",{original:r.date,converted:i,isValid:!isNaN(i.getTime())}),isNaN(i.getTime())||(a=i.toISOString().split("T")[0])}console.log("[updateExecutionRecordInAPI] Calling API with dateStr:",a,"includesTaxDeduction:",r.includesTaxDeduction,"includesVat:",r.includesVat),await On.updateRecord(e,{project_name:r.project,author:r.author,date:a,process:r.process,item_name:r.itemName,material_cost:r.materialCost,labor_cost:r.laborCost,vat_amount:r.vatAmount,total_amount:r.totalAmount,notes:r.notes,payment_id:r.paymentId,images:r.images,includes_tax_deduction:r.includesTaxDeduction,includes_vat:r.includesVat}),t(i=>({executionRecords:i.executionRecords.map(o=>o.id===e?{...o,...r,updatedAt:new Date}:o)}))}catch(a){throw console.error("Failed to update execution record in API:",a),a}},deleteExecutionRecordFromAPI:async e=>{try{await On.deleteRecord(e),t(r=>({executionRecords:r.executionRecords.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete execution record from API:",r),r}}}),{name:"interior-management-storage",partialize:t=>({...t,payments:t.payments.map(s=>{const{images:e,...r}=s;return r}),executionRecords:t.executionRecords.map(s=>{const{images:e,...r}=s;return r})}),storage:{getItem:t=>{var c,d,f,p,g,N,A;const s=localStorage.getItem(t);if(!s)return null;const{state:e}=JSON.parse(s),r=((c=e.projects)==null?void 0:c.map(x=>({...x,startDate:x.startDate?new Date(x.startDate):void 0,endDate:x.endDate?new Date(x.endDate):void 0,contractAmount:x.contractAmount!==void 0?x.contractAmount:x.budget||0})))||[],a=((d=e.constructionPayments)==null?void 0:d.map(x=>{var _;return{...x,vatType:x.vatType||"percentage",vatPercentage:x.vatPercentage??100,vatAmount:x.vatAmount??0,payments:((_=x.payments)==null?void 0:_.map(E=>({...E,date:new Date(E.date)})))||[]}}))||[],i=new Set(a.map(x=>x.id)),o=r.filter(x=>!i.has(x.id)).map(x=>({id:x.id,project:x.name,client:x.client,totalAmount:x.contractAmount||0,vatType:"percentage",vatPercentage:100,vatAmount:0,payments:[]})),l=[...a,...o];return{state:{...e,projects:r,schedules:((f=e.schedules)==null?void 0:f.map(x=>({...x,start:new Date(x.start),end:new Date(x.end)})))||[],payments:((p=e.payments)==null?void 0:p.map(x=>({...x,requestDate:new Date(x.requestDate),approvalDate:x.approvalDate?new Date(x.approvalDate):void 0})))||[],contractors:((g=e.contractors)==null?void 0:g.map(x=>({...x,createdAt:new Date(x.createdAt),updatedAt:new Date(x.updatedAt)})))||[],constructionPayments:l,asRequests:((N=e.asRequests)==null?void 0:N.map(x=>({...x,requestDate:new Date(x.requestDate),scheduledVisitDate:x.scheduledVisitDate?new Date(x.scheduledVisitDate):void 0,completionDate:x.completionDate?new Date(x.completionDate):void 0})))||[],executionRecords:((A=e.executionRecords)==null?void 0:A.map(x=>({...x,date:new Date(x.date),createdAt:new Date(x.createdAt),updatedAt:new Date(x.updatedAt)})))||[]}}},setItem:(t,s)=>{try{const e=JSON.stringify(s);localStorage.setItem(t,e)}catch(e){console.error("[dataStore] localStorage  :",e),e instanceof DOMException&&e.name==="QuotaExceededError"&&console.warn("[dataStore] localStorage   -    ")}},removeItem:t=>localStorage.removeItem(t)}}));var Un=t=>t.type==="checkbox",Ks=t=>t instanceof Date,Ot=t=>t==null;const No=t=>typeof t=="object";var Ct=t=>!Ot(t)&&!Array.isArray(t)&&No(t)&&!Ks(t),su=t=>Ct(t)&&t.target?Un(t.target)?t.target.checked:t.target.value:t,nu=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ru=(t,s)=>t.has(nu(s)),au=t=>{const s=t.constructor&&t.constructor.prototype;return Ct(s)&&s.hasOwnProperty("isPrototypeOf")},fa=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ut(t){let s;const e=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(fa&&(t instanceof Blob||r))&&(e||Ct(t)))if(s=e?[]:Object.create(Object.getPrototypeOf(t)),!e&&!au(t))s=t;else for(const a in t)t.hasOwnProperty(a)&&(s[a]=Ut(t[a]));else return t;return s}var pr=t=>/^\w*$/.test(t),vt=t=>t===void 0,ga=t=>Array.isArray(t)?t.filter(Boolean):[],ha=t=>ga(t.replace(/["|']|\]/g,"").split(/\.|\[/)),be=(t,s,e)=>{if(!s||!Ct(t))return e;const r=(pr(s)?[s]:ha(s)).reduce((a,i)=>Ot(a)?a:a[i],t);return vt(r)||r===t?vt(t[s])?e:t[s]:r},us=t=>typeof t=="boolean",ft=(t,s,e)=>{let r=-1;const a=pr(s)?[s]:ha(s),i=a.length,o=i-1;for(;++r<i;){const l=a[r];let c=e;if(r!==o){const d=t[l];c=Ct(d)||Array.isArray(d)?d:isNaN(+a[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const Ja={BLUR:"blur",FOCUS_OUT:"focusout"},as={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iu=Re.createContext(null);iu.displayName="HookFormContext";var ou=(t,s,e,r=!0)=>{const a={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const o=i;return s._proxyFormState[o]!==as.all&&(s._proxyFormState[o]=!r||as.all),t[o]}});return a};const lu=typeof window<"u"?Re.useLayoutEffect:Re.useEffect;var Xt=t=>typeof t=="string",mu=(t,s,e,r,a)=>Xt(t)?(r&&s.watch.add(t),be(e,t,a)):Array.isArray(t)?t.map(i=>(r&&s.watch.add(i),be(e,i))):(r&&(s.watchAll=!0),e),zr=t=>Ot(t)||!No(t);function Bs(t,s,e=new WeakSet){if(zr(t)||zr(s))return t===s;if(Ks(t)&&Ks(s))return t.getTime()===s.getTime();const r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;if(e.has(t)||e.has(s))return!0;e.add(t),e.add(s);for(const i of r){const o=t[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=s[i];if(Ks(o)&&Ks(l)||Ct(o)&&Ct(l)||Array.isArray(o)&&Array.isArray(l)?!Bs(o,l,e):o!==l)return!1}}return!0}var cu=(t,s,e,r,a)=>s?{...e[t],types:{...e[t]&&e[t].types?e[t].types:{},[r]:a||!0}}:{},_n=t=>Array.isArray(t)?t:[t],Ga=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}};function yo(t,s){const e={};for(const r in t)if(t.hasOwnProperty(r)){const a=t[r],i=s[r];if(a&&Ct(a)&&i){const o=yo(a,i);Ct(o)&&(e[r]=o)}else t[r]&&(e[r]=i)}return e}var $t=t=>Ct(t)&&!Object.keys(t).length,ba=t=>t.type==="file",is=t=>typeof t=="function",rr=t=>{if(!fa)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},xo=t=>t.type==="select-multiple",Na=t=>t.type==="radio",du=t=>Na(t)||Un(t),jr=t=>rr(t)&&t.isConnected;function uu(t,s){const e=s.slice(0,-1).length;let r=0;for(;r<e;)t=vt(t)?r++:t[s[r++]];return t}function pu(t){for(const s in t)if(t.hasOwnProperty(s)&&!vt(t[s]))return!1;return!0}function xt(t,s){const e=Array.isArray(s)?s:pr(s)?[s]:ha(s),r=e.length===1?t:uu(t,e),a=e.length-1,i=e[a];return r&&delete r[i],a!==0&&(Ct(r)&&$t(r)||Array.isArray(r)&&pu(r))&&xt(t,e.slice(0,-1)),t}var fu=t=>{for(const s in t)if(is(t[s]))return!0;return!1};function vo(t){return Array.isArray(t)||Ct(t)&&!fu(t)}function Kr(t,s={}){for(const e in t)vo(t[e])?(s[e]=Array.isArray(t[e])?[]:{},Kr(t[e],s[e])):Ot(t[e])||(s[e]=!0);return s}function sn(t,s,e){e||(e=Kr(s));for(const r in t)vo(t[r])?vt(s)||zr(e[r])?e[r]=Kr(t[r],Array.isArray(t[r])?[]:{}):sn(t[r],Ot(s)?{}:s[r],e[r]):e[r]=!Bs(t[r],s[r]);return e}const Za={value:!1,isValid:!1},ei={value:!0,isValid:!0};var ko=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!vt(t[0].attributes.value)?vt(t[0].value)||t[0].value===""?ei:{value:t[0].value,isValid:!0}:ei:Za}return Za},Do=(t,{valueAsNumber:s,valueAsDate:e,setValueAs:r})=>vt(t)?t:s?t===""?NaN:t&&+t:e&&Xt(t)?new Date(t):r?r(t):t;const ti={isValid:!1,value:null};var Vo=t=>Array.isArray(t)?t.reduce((s,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:s,ti):ti;function si(t){const s=t.ref;return ba(s)?s.files:Na(s)?Vo(t.refs).value:xo(s)?[...s.selectedOptions].map(({value:e})=>e):Un(s)?ko(t.refs).value:Do(vt(s.value)?t.ref.value:s.value,t)}var gu=(t,s,e,r)=>{const a={};for(const i of t){const o=be(s,i);o&&ft(a,i,o._f)}return{criteriaMode:e,names:[...t],fields:a,shouldUseNativeValidation:r}},ar=t=>t instanceof RegExp,Nn=t=>vt(t)?t:ar(t)?t.source:Ct(t)?ar(t.value)?t.value.source:t.value:t,ni=t=>({isOnSubmit:!t||t===as.onSubmit,isOnBlur:t===as.onBlur,isOnChange:t===as.onChange,isOnAll:t===as.all,isOnTouch:t===as.onTouched});const ri="AsyncFunction";var hu=t=>!!t&&!!t.validate&&!!(is(t.validate)&&t.validate.constructor.name===ri||Ct(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===ri)),bu=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),ai=(t,s,e)=>!e&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const An=(t,s,e,r)=>{for(const a of e||Object.keys(t)){const i=be(t,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&s(o.refs[0],a)&&!r)return!0;if(o.ref&&s(o.ref,o.name)&&!r)return!0;if(An(l,s))break}else if(Ct(l)&&An(l,s))break}}};function ii(t,s,e){const r=be(t,e);if(r||pr(e))return{error:r,name:e};const a=e.split(".");for(;a.length;){const i=a.join("."),o=be(s,i),l=be(t,i);if(o&&!Array.isArray(o)&&e!==i)return{name:e};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:e}}var Nu=(t,s,e,r)=>{e(t);const{name:a,...i}=t;return $t(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(o=>s[o]===(!r||as.all))},yu=(t,s,e)=>!t||!s||t===s||_n(t).some(r=>r&&(e?r===s:r.startsWith(s)||s.startsWith(r))),xu=(t,s,e,r,a)=>a.isOnAll?!1:!e&&a.isOnTouch?!(s||t):(e?r.isOnBlur:a.isOnBlur)?!t:(e?r.isOnChange:a.isOnChange)?t:!0,vu=(t,s)=>!ga(be(t,s)).length&&xt(t,s),ku=(t,s,e)=>{const r=_n(be(t,e));return ft(r,"root",s[e]),ft(t,e,r),t};function oi(t,s,e="validate"){if(Xt(t)||Array.isArray(t)&&t.every(Xt)||us(t)&&!t)return{type:e,message:Xt(t)?t:"",ref:s}}var Zs=t=>Ct(t)&&!ar(t)?t:{value:t,message:""},li=async(t,s,e,r,a,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:f,min:p,max:g,pattern:N,validate:A,name:x,valueAsNumber:_,mount:E}=t._f,D=be(e,x);if(!E||s.has(x))return{};const O=l?l[0]:o,ie=Y=>{a&&O.reportValidity&&(O.setCustomValidity(us(Y)?"":Y||""),O.reportValidity())},X={},U=Na(o),ee=Un(o),P=U||ee,pe=(_||ba(o))&&vt(o.value)&&vt(D)||rr(o)&&o.value===""||D===""||Array.isArray(D)&&!D.length,Ne=cu.bind(null,x,r,X),ce=(Y,oe,he,Le=xs.maxLength,Z=xs.minLength)=>{const xe=Y?oe:he;X[x]={type:Y?Le:Z,message:xe,ref:o,...Ne(Y?Le:Z,xe)}};if(i?!Array.isArray(D)||!D.length:c&&(!P&&(pe||Ot(D))||us(D)&&!D||ee&&!ko(l).isValid||U&&!Vo(l).isValid)){const{value:Y,message:oe}=Xt(c)?{value:!!c,message:c}:Zs(c);if(Y&&(X[x]={type:xs.required,message:oe,ref:O,...Ne(xs.required,oe)},!r))return ie(oe),X}if(!pe&&(!Ot(p)||!Ot(g))){let Y,oe;const he=Zs(g),Le=Zs(p);if(!Ot(D)&&!isNaN(D)){const Z=o.valueAsNumber||D&&+D;Ot(he.value)||(Y=Z>he.value),Ot(Le.value)||(oe=Z<Le.value)}else{const Z=o.valueAsDate||new Date(D),xe=it=>new Date(new Date().toDateString()+" "+it),Ye=o.type=="time",gt=o.type=="week";Xt(he.value)&&D&&(Y=Ye?xe(D)>xe(he.value):gt?D>he.value:Z>new Date(he.value)),Xt(Le.value)&&D&&(oe=Ye?xe(D)<xe(Le.value):gt?D<Le.value:Z<new Date(Le.value))}if((Y||oe)&&(ce(!!Y,he.message,Le.message,xs.max,xs.min),!r))return ie(X[x].message),X}if((d||f)&&!pe&&(Xt(D)||i&&Array.isArray(D))){const Y=Zs(d),oe=Zs(f),he=!Ot(Y.value)&&D.length>+Y.value,Le=!Ot(oe.value)&&D.length<+oe.value;if((he||Le)&&(ce(he,Y.message,oe.message),!r))return ie(X[x].message),X}if(N&&!pe&&Xt(D)){const{value:Y,message:oe}=Zs(N);if(ar(Y)&&!D.match(Y)&&(X[x]={type:xs.pattern,message:oe,ref:o,...Ne(xs.pattern,oe)},!r))return ie(oe),X}if(A){if(is(A)){const Y=await A(D,e),oe=oi(Y,O);if(oe&&(X[x]={...oe,...Ne(xs.validate,oe.message)},!r))return ie(oe.message),X}else if(Ct(A)){let Y={};for(const oe in A){if(!$t(Y)&&!r)break;const he=oi(await A[oe](D,e),O,oe);he&&(Y={...he,...Ne(oe,he.message)},ie(he.message),r&&(X[x]=Y))}if(!$t(Y)&&(X[x]={ref:O,...Y},!r))return X}}return ie(!0),X};const Du={mode:as.onSubmit,reValidateMode:as.onChange,shouldFocusError:!0};function Vu(t={}){let s={...Du,...t},e={submitCount:0,isDirty:!1,isReady:!1,isLoading:is(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},a=Ct(s.defaultValues)||Ct(s.values)?Ut(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:Ut(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const g={array:Ga(),state:Ga()},N=s.criteriaMode===as.all,A=y=>w=>{clearTimeout(d),d=setTimeout(y,w)},x=async y=>{if(!s.disabled&&(f.isValid||p.isValid||y)){const w=s.resolver?$t((await ee()).errors):await pe(r,!0);w!==e.isValid&&g.state.next({isValid:w})}},_=(y,w)=>{!s.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((y||Array.from(l.mount)).forEach(T=>{T&&(w?ft(e.validatingFields,T,w):xt(e.validatingFields,T))}),g.state.next({validatingFields:e.validatingFields,isValidating:!$t(e.validatingFields)}))},E=(y,w=[],T,ne,z=!0,G=!0)=>{if(ne&&T&&!s.disabled){if(o.action=!0,G&&Array.isArray(be(r,y))){const fe=T(be(r,y),ne.argA,ne.argB);z&&ft(r,y,fe)}if(G&&Array.isArray(be(e.errors,y))){const fe=T(be(e.errors,y),ne.argA,ne.argB);z&&ft(e.errors,y,fe),vu(e.errors,y)}if((f.touchedFields||p.touchedFields)&&G&&Array.isArray(be(e.touchedFields,y))){const fe=T(be(e.touchedFields,y),ne.argA,ne.argB);z&&ft(e.touchedFields,y,fe)}(f.dirtyFields||p.dirtyFields)&&(e.dirtyFields=sn(a,i)),g.state.next({name:y,isDirty:ce(y,w),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else ft(i,y,w)},D=(y,w)=>{ft(e.errors,y,w),g.state.next({errors:e.errors})},O=y=>{e.errors=y,g.state.next({errors:e.errors,isValid:!1})},ie=(y,w,T,ne)=>{const z=be(r,y);if(z){const G=be(i,y,vt(T)?be(a,y):T);vt(G)||ne&&ne.defaultChecked||w?ft(i,y,w?G:si(z._f)):he(y,G),o.mount&&x()}},X=(y,w,T,ne,z)=>{let G=!1,fe=!1;const Ae={name:y};if(!s.disabled){if(!T||ne){(f.isDirty||p.isDirty)&&(fe=e.isDirty,e.isDirty=Ae.isDirty=ce(),G=fe!==Ae.isDirty);const Oe=Bs(be(a,y),w);fe=!!be(e.dirtyFields,y),Oe?xt(e.dirtyFields,y):ft(e.dirtyFields,y,!0),Ae.dirtyFields=e.dirtyFields,G=G||(f.dirtyFields||p.dirtyFields)&&fe!==!Oe}if(T){const Oe=be(e.touchedFields,y);Oe||(ft(e.touchedFields,y,T),Ae.touchedFields=e.touchedFields,G=G||(f.touchedFields||p.touchedFields)&&Oe!==T)}G&&z&&g.state.next(Ae)}return G?Ae:{}},U=(y,w,T,ne)=>{const z=be(e.errors,y),G=(f.isValid||p.isValid)&&us(w)&&e.isValid!==w;if(s.delayError&&T?(c=A(()=>D(y,T)),c(s.delayError)):(clearTimeout(d),c=null,T?ft(e.errors,y,T):xt(e.errors,y)),(T?!Bs(z,T):z)||!$t(ne)||G){const fe={...ne,...G&&us(w)?{isValid:w}:{},errors:e.errors,name:y};e={...e,...fe},g.state.next(fe)}},ee=async y=>{_(y,!0);const w=await s.resolver(i,s.context,gu(y||l.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return _(y),w},P=async y=>{const{errors:w}=await ee(y);if(y)for(const T of y){const ne=be(w,T);ne?ft(e.errors,T,ne):xt(e.errors,T)}else e.errors=w;return w},pe=async(y,w,T={valid:!0})=>{for(const ne in y){const z=y[ne];if(z){const{_f:G,...fe}=z;if(G){const Ae=l.array.has(G.name),Oe=z._f&&hu(z._f);Oe&&f.validatingFields&&_([G.name],!0);const le=await li(z,l.disabled,i,N,s.shouldUseNativeValidation&&!w,Ae);if(Oe&&f.validatingFields&&_([G.name]),le[G.name]&&(T.valid=!1,w))break;!w&&(be(le,G.name)?Ae?ku(e.errors,le,G.name):ft(e.errors,G.name,le[G.name]):xt(e.errors,G.name))}!$t(fe)&&await pe(fe,w,T)}}return T.valid},Ne=()=>{for(const y of l.unMount){const w=be(r,y);w&&(w._f.refs?w._f.refs.every(T=>!jr(T)):!jr(w._f.ref))&&$e(y)}l.unMount=new Set},ce=(y,w)=>!s.disabled&&(y&&w&&ft(i,y,w),!Bs(it(),a)),Y=(y,w,T)=>mu(y,l,{...o.mount?i:vt(w)?a:Xt(y)?{[y]:w}:w},T,w),oe=y=>ga(be(o.mount?i:a,y,s.shouldUnregister?be(a,y,[]):[])),he=(y,w,T={})=>{const ne=be(r,y);let z=w;if(ne){const G=ne._f;G&&(!G.disabled&&ft(i,y,Do(w,G)),z=rr(G.ref)&&Ot(w)?"":w,xo(G.ref)?[...G.ref.options].forEach(fe=>fe.selected=z.includes(fe.value)):G.refs?Un(G.ref)?G.refs.forEach(fe=>{(!fe.defaultChecked||!fe.disabled)&&(Array.isArray(z)?fe.checked=!!z.find(Ae=>Ae===fe.value):fe.checked=z===fe.value||!!z)}):G.refs.forEach(fe=>fe.checked=fe.value===z):ba(G.ref)?G.ref.value="":(G.ref.value=z,G.ref.type||g.state.next({name:y,values:Ut(i)})))}(T.shouldDirty||T.shouldTouch)&&X(y,z,T.shouldTouch,T.shouldDirty,!0),T.shouldValidate&&gt(y)},Le=(y,w,T)=>{for(const ne in w){if(!w.hasOwnProperty(ne))return;const z=w[ne],G=y+"."+ne,fe=be(r,G);(l.array.has(y)||Ct(z)||fe&&!fe._f)&&!Ks(z)?Le(G,z,T):he(G,z,T)}},Z=(y,w,T={})=>{const ne=be(r,y),z=l.array.has(y),G=Ut(w);ft(i,y,G),z?(g.array.next({name:y,values:Ut(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&T.shouldDirty&&g.state.next({name:y,dirtyFields:sn(a,i),isDirty:ce(y,G)})):ne&&!ne._f&&!Ot(G)?Le(y,G,T):he(y,G,T),ai(y,l)&&g.state.next({...e,name:y}),g.state.next({name:o.mount?y:void 0,values:Ut(i)})},xe=async y=>{o.mount=!0;const w=y.target;let T=w.name,ne=!0;const z=be(r,T),G=Oe=>{ne=Number.isNaN(Oe)||Ks(Oe)&&isNaN(Oe.getTime())||Bs(Oe,be(i,T,Oe))},fe=ni(s.mode),Ae=ni(s.reValidateMode);if(z){let Oe,le;const Rt=w.type?si(z._f):su(y),ot=y.type===Ja.BLUR||y.type===Ja.FOCUS_OUT,R=!bu(z._f)&&!s.resolver&&!be(e.errors,T)&&!z._f.deps||xu(ot,be(e.touchedFields,T),e.isSubmitted,Ae,fe),Pe=ai(T,l,ot);ft(i,T,Rt),ot?(!w||!w.readOnly)&&(z._f.onBlur&&z._f.onBlur(y),c&&c(0)):z._f.onChange&&z._f.onChange(y);const C=X(T,Rt,ot),ae=!$t(C)||Pe;if(!ot&&g.state.next({name:T,type:y.type,values:Ut(i)}),R)return(f.isValid||p.isValid)&&(s.mode==="onBlur"?ot&&x():ot||x()),ae&&g.state.next({name:T,...Pe?{}:C});if(!ot&&Pe&&g.state.next({...e}),s.resolver){const{errors:de}=await ee([T]);if(G(Rt),ne){const ye=ii(e.errors,r,T),Q=ii(de,r,ye.name||T);Oe=Q.error,T=Q.name,le=$t(de)}}else _([T],!0),Oe=(await li(z,l.disabled,i,N,s.shouldUseNativeValidation))[T],_([T]),G(Rt),ne&&(Oe?le=!1:(f.isValid||p.isValid)&&(le=await pe(r,!0)));ne&&(z._f.deps&&(!Array.isArray(z._f.deps)||z._f.deps.length>0)&&gt(z._f.deps),U(T,le,Oe,C))}},Ye=(y,w)=>{if(be(e.errors,w)&&y.focus)return y.focus(),1},gt=async(y,w={})=>{let T,ne;const z=_n(y);if(s.resolver){const G=await P(vt(y)?y:z);T=$t(G),ne=y?!z.some(fe=>be(G,fe)):T}else y?(ne=(await Promise.all(z.map(async G=>{const fe=be(r,G);return await pe(fe&&fe._f?{[G]:fe}:fe)}))).every(Boolean),!(!ne&&!e.isValid)&&x()):ne=T=await pe(r);return g.state.next({...!Xt(y)||(f.isValid||p.isValid)&&T!==e.isValid?{}:{name:y},...s.resolver||!y?{isValid:T}:{},errors:e.errors}),w.shouldFocus&&!ne&&An(r,Ye,y?z:l.mount),ne},it=(y,w)=>{let T={...o.mount?i:a};return w&&(T=yo(w.dirtyFields?e.dirtyFields:e.touchedFields,T)),vt(y)?T:Xt(y)?be(T,y):y.map(ne=>be(T,ne))},W=(y,w)=>({invalid:!!be((w||e).errors,y),isDirty:!!be((w||e).dirtyFields,y),error:be((w||e).errors,y),isValidating:!!be(e.validatingFields,y),isTouched:!!be((w||e).touchedFields,y)}),_e=y=>{y&&_n(y).forEach(w=>xt(e.errors,w)),g.state.next({errors:y?e.errors:{}})},J=(y,w,T)=>{const ne=(be(r,y,{_f:{}})._f||{}).ref,z=be(e.errors,y)||{},{ref:G,message:fe,type:Ae,...Oe}=z;ft(e.errors,y,{...Oe,...w,ref:ne}),g.state.next({name:y,errors:e.errors,isValid:!1}),T&&T.shouldFocus&&ne&&ne.focus&&ne.focus()},ke=(y,w)=>is(y)?g.state.subscribe({next:T=>"values"in T&&y(Y(void 0,w),T)}):Y(y,w,!0),Be=y=>g.state.subscribe({next:w=>{yu(y.name,w.name,y.exact)&&Nu(w,y.formState||f,st,y.reRenderRoot)&&y.callback({values:{...i},...e,...w,defaultValues:a})}}).unsubscribe,Je=y=>(o.mount=!0,p={...p,...y.formState},Be({...y,formState:p})),$e=(y,w={})=>{for(const T of y?_n(y):l.mount)l.mount.delete(T),l.array.delete(T),w.keepValue||(xt(r,T),xt(i,T)),!w.keepError&&xt(e.errors,T),!w.keepDirty&&xt(e.dirtyFields,T),!w.keepTouched&&xt(e.touchedFields,T),!w.keepIsValidating&&xt(e.validatingFields,T),!s.shouldUnregister&&!w.keepDefaultValue&&xt(a,T);g.state.next({values:Ut(i)}),g.state.next({...e,...w.keepDirty?{isDirty:ce()}:{}}),!w.keepIsValid&&x()},tt=({disabled:y,name:w})=>{(us(y)&&o.mount||y||l.disabled.has(w))&&(y?l.disabled.add(w):l.disabled.delete(w))},Fe=(y,w={})=>{let T=be(r,y);const ne=us(w.disabled)||us(s.disabled);return ft(r,y,{...T||{},_f:{...T&&T._f?T._f:{ref:{name:y}},name:y,mount:!0,...w}}),l.mount.add(y),T?tt({disabled:us(w.disabled)?w.disabled:s.disabled,name:y}):ie(y,!0,w.value),{...ne?{disabled:w.disabled||s.disabled}:{},...s.progressive?{required:!!w.required,min:Nn(w.min),max:Nn(w.max),minLength:Nn(w.minLength),maxLength:Nn(w.maxLength),pattern:Nn(w.pattern)}:{},name:y,onChange:xe,onBlur:xe,ref:z=>{if(z){Fe(y,w),T=be(r,y);const G=vt(z.value)&&z.querySelectorAll&&z.querySelectorAll("input,select,textarea")[0]||z,fe=du(G),Ae=T._f.refs||[];if(fe?Ae.find(Oe=>Oe===G):G===T._f.ref)return;ft(r,y,{_f:{...T._f,...fe?{refs:[...Ae.filter(jr),G,...Array.isArray(be(a,y))?[{}]:[]],ref:{type:G.type,name:y}}:{ref:G}}}),ie(y,!1,void 0,G)}else T=be(r,y,{}),T._f&&(T._f.mount=!1),(s.shouldUnregister||w.shouldUnregister)&&!(ru(l.array,y)&&o.action)&&l.unMount.add(y)}}},We=()=>s.shouldFocusError&&An(r,Ye,l.mount),_t=y=>{us(y)&&(g.state.next({disabled:y}),An(r,(w,T)=>{const ne=be(r,T);ne&&(w.disabled=ne._f.disabled||y,Array.isArray(ne._f.refs)&&ne._f.refs.forEach(z=>{z.disabled=ne._f.disabled||y}))},0,!1))},B=(y,w)=>async T=>{let ne;T&&(T.preventDefault&&T.preventDefault(),T.persist&&T.persist());let z=Ut(i);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:G,values:fe}=await ee();e.errors=G,z=Ut(fe)}else await pe(r);if(l.disabled.size)for(const G of l.disabled)xt(z,G);if(xt(e.errors,"root"),$t(e.errors)){g.state.next({errors:{}});try{await y(z,T)}catch(G){ne=G}}else w&&await w({...e.errors},T),We(),setTimeout(We);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$t(e.errors)&&!ne,submitCount:e.submitCount+1,errors:e.errors}),ne)throw ne},ve=(y,w={})=>{be(r,y)&&(vt(w.defaultValue)?Z(y,Ut(be(a,y))):(Z(y,w.defaultValue),ft(a,y,Ut(w.defaultValue))),w.keepTouched||xt(e.touchedFields,y),w.keepDirty||(xt(e.dirtyFields,y),e.isDirty=w.defaultValue?ce(y,Ut(be(a,y))):ce()),w.keepError||(xt(e.errors,y),f.isValid&&x()),g.state.next({...e}))},De=(y,w={})=>{const T=y?Ut(y):a,ne=Ut(T),z=$t(y),G=z?a:ne;if(w.keepDefaultValues||(a=T),!w.keepValues){if(w.keepDirtyValues){const fe=new Set([...l.mount,...Object.keys(sn(a,i))]);for(const Ae of Array.from(fe))be(e.dirtyFields,Ae)?ft(G,Ae,be(i,Ae)):Z(Ae,be(G,Ae))}else{if(fa&&vt(y))for(const fe of l.mount){const Ae=be(r,fe);if(Ae&&Ae._f){const Oe=Array.isArray(Ae._f.refs)?Ae._f.refs[0]:Ae._f.ref;if(rr(Oe)){const le=Oe.closest("form");if(le){le.reset();break}}}}if(w.keepFieldsRef)for(const fe of l.mount)Z(fe,be(G,fe));else r={}}i=s.shouldUnregister?w.keepDefaultValues?Ut(a):{}:Ut(G),g.array.next({values:{...G}}),g.state.next({values:{...G}})}l={mount:w.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!w.keepIsValid||!!w.keepDirtyValues,o.watch=!!s.shouldUnregister,g.state.next({submitCount:w.keepSubmitCount?e.submitCount:0,isDirty:z?!1:w.keepDirty?e.isDirty:!!(w.keepDefaultValues&&!Bs(y,a)),isSubmitted:w.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:z?{}:w.keepDirtyValues?w.keepDefaultValues&&i?sn(a,i):e.dirtyFields:w.keepDefaultValues&&y?sn(a,y):w.keepDirty?e.dirtyFields:{},touchedFields:w.keepTouched?e.touchedFields:{},errors:w.keepErrors?e.errors:{},isSubmitSuccessful:w.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ge=(y,w)=>De(is(y)?y(i):y,w),Ue=(y,w={})=>{const T=be(r,y),ne=T&&T._f;if(ne){const z=ne.refs?ne.refs[0]:ne.ref;z.focus&&(z.focus(),w.shouldSelect&&is(z.select)&&z.select())}},st=y=>{e={...e,...y}},ut={control:{register:Fe,unregister:$e,getFieldState:W,handleSubmit:B,setError:J,_subscribe:Be,_runSchema:ee,_focusError:We,_getWatch:Y,_getDirty:ce,_setValid:x,_setFieldArray:E,_setDisabledField:tt,_setErrors:O,_getFieldArray:oe,_reset:De,_resetDefaultValues:()=>is(s.defaultValues)&&s.defaultValues().then(y=>{ge(y,s.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:Ne,_disableForm:_t,_subjects:g,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(y){o=y},get _defaultValues(){return a},get _names(){return l},set _names(y){l=y},get _formState(){return e},get _options(){return s},set _options(y){s={...s,...y}}},subscribe:Je,trigger:gt,register:Fe,handleSubmit:B,watch:ke,setValue:Z,getValues:it,reset:ge,resetField:ve,clearErrors:_e,unregister:$e,setError:J,setFocus:Ue,getFieldState:W};return{...ut,formControl:ut}}function ya(t={}){const s=Re.useRef(void 0),e=Re.useRef(void 0),[r,a]=Re.useState({isDirty:!1,isValidating:!1,isLoading:is(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:is(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!is(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=Vu(t);s.current={...l,formState:r}}const i=s.current.control;return i._options=t,lu(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),Re.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Re.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Re.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Re.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Re.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),Re.useEffect(()=>{t.values&&!Bs(t.values,e.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),e.current=t.values,a(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),Re.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=ou(r,i),s.current}const mi=["","","","","","",""],Co=({event:t,slotInfo:s,defaultProjectName:e,onClose:r,onSave:a,onDelete:i})=>{const[o,l]=b.useState(!1),{register:c,handleSubmit:d,setValue:f,watch:p,formState:{errors:g},reset:N}=ya({defaultValues:{projectId:"",title:"",date:"",description:""}}),{projects:A}=Us(),[x,_]=b.useState([]),[E,D]=b.useState(""),[O,ie]=b.useState(!1),[X,U]=b.useState(""),[ee,P]=b.useState(9),[pe,Ne]=b.useState(0),[ce,Y]=b.useState(""),oe=p("projectId");b.useEffect(()=>{if(oe){const W=A.find(_e=>_e.id===oe||_e.id===parseInt(oe)||_e.id.toString()===oe.toString());console.log(" Selected project:",W==null?void 0:W.name),console.log(" Project team:",W==null?void 0:W.team),console.log(" Current selectedMembers:",x)}},[oe,A,x]),b.useEffect(()=>{console.log(" Modal mount - initializing states"),_([]),Y(""),D("")},[]),b.useEffect(()=>{if(console.log(" ScheduleModal useEffect triggered:",{hasEvent:!!t,eventId:t==null?void 0:t.id,hasSlotInfo:!!s,hasMergedEvents:!!(t!=null&&t.mergedEventIds)}),t&&t.id){console.log(" ScheduleModal processing event:",{title:t.title,projectId:t.projectId,projectName:t.projectName,start:t.start,assignedTo:t.assignedTo,time:t.time});const W=t.originalTitle||t.title,_e=/ - (|) \d{1,2}$/,J=W.replace(_e,"");if(f("title",J,{shouldValidate:!1,shouldDirty:!1}),f("date",et(t.start,"yyyy-MM-dd"),{shouldValidate:!1,shouldDirty:!1}),f("description",t.description||"",{shouldValidate:!1,shouldDirty:!1}),t.projectId&&t.projectId!==""&&t.projectId!=="undefined")console.log(" Setting projectId from event:",t.projectId),f("projectId",t.projectId,{shouldValidate:!1,shouldDirty:!1}),Y("");else if(t.projectName){const Be=A.find(Je=>Je.name===t.projectName);console.log(" Finding project by name:",t.projectName,"found:",Be),Be?(console.log(" Setting projectId from found project:",Be.id),f("projectId",Be.id,{shouldValidate:!1,shouldDirty:!1}),Y("")):(console.log(" Project not found, leaving empty"),f("projectId","",{shouldValidate:!1,shouldDirty:!1}),Y(""))}else console.log(" No project info, leaving empty"),f("projectId","",{shouldValidate:!1,shouldDirty:!1}),Y("");const ke=t.assignedTo||t.attendees||[];if(console.log(" Setting selectedMembers to:",ke),_(Array.isArray(ke)?ke:[]),t.time&&t.time!=="-"){console.log(" Setting time from event:",{eventTime:t.time,parsedHours:t.time.split(":")[0],parsedMinutes:t.time.split(":")[1]}),ie(!0);const[Be,Je]=t.time.split(":"),$e=parseInt(Be,10),tt=parseInt(Je,10);$e>=12?(U(""),P($e===12?12:$e-12)):(U(""),P($e===0?12:$e)),Ne(tt),console.log(" Time state set:",{hasTime:!0,period:$e>=12?"":"",hour:$e>=12?$e===12?12:$e-12:$e===0?12:$e,minute:tt})}else console.log(" No time in event, setting hasTime to false"),ie(!1),U(""),P(9),Ne(0)}else if(s&&!t&&(console.log(" New schedule from slot:",s),N({projectId:"",title:"",date:et(s.start,"yyyy-MM-dd"),description:""}),console.log(" New schedule - resetting selectedMembers to empty array"),_([]),Y(""),e)){const W=A.find(_e=>_e.name===e);W&&f("projectId",W.id,{shouldValidate:!1,shouldDirty:!1})}},[t==null?void 0:t.id]);const he=W=>{console.log(" toggleMember called with:",W),console.log(" Current selectedMembers before toggle:",x),_(_e=>{console.log(" Previous members in setState:",_e);const J=_e.includes(W)?_e.filter(ke=>ke!==W):[..._e,W];return console.log(" Updated members after toggle:",J),J})},Le=()=>{const W="HV LAB";x.includes(W)?_(_e=>_e.filter(J=>J!==W)):_(_e=>[..._e.filter(J=>J!==""),W])},Z=()=>{const W="";x.includes(W)?_(_e=>_e.filter(J=>J!==W)):_(_e=>[..._e,W])},xe=()=>{const W="";x.includes(W)?_(_e=>_e.filter(J=>J!==W)):_(_e=>[..._e,W])},Ye=()=>{E.trim()&&!x.includes(E.trim())&&(_(W=>[...W,E.trim()]),D(""))},gt=W=>{_(_e=>_e.filter(J=>J!==W))},it=async W=>{console.log(" Form onSubmit called with data:",W),console.log(" selectedMembers:",x),console.log(" hasTime state:",O),console.log(" timePeriod:",X,"timeHour:",ee,"timeMinute:",pe),console.log(" Available projects:",A.map(Fe=>({id:Fe.id,name:Fe.name,idType:typeof Fe.id}))),console.log(" Merged event IDs:",t==null?void 0:t.mergedEventIds);const _e=/ - (|) \d{1,2}$/,J=W.title.replace(_e,"").trim();let ke="",Be="";if(W.projectId){const Fe=A.find(We=>We.id===W.projectId||We.id===parseInt(W.projectId)||We.id.toString()===W.projectId.toString());console.log(" Looking for project with id:",W.projectId,"type:",typeof W.projectId),console.log(" Found project:",Fe),ke=(Fe==null?void 0:Fe.name)||"",Be=W.projectId}else ke="",Be="";console.log(" Final projectId:",Be,"projectName:",ke,"cleanedTitle:",J);const Je=new Date(W.date);let $e="-";if(O){let Fe=ee;X===""&&ee!==12?Fe=ee+12:X===""&&ee===12&&(Fe=0),$e=`${Fe.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`,console.log(" Time calculated:",$e)}else console.log(" No time set (hasTime is false)");const tt={...t,title:J,start:Je,end:Je,projectId:Be,projectName:ke,assignedTo:x,description:W.description||"",time:$e,mergedEventIds:t==null?void 0:t.mergedEventIds};if(!o){l(!0),console.log(" Calling onSave with newEvent:",tt);try{await a(tt),console.log(" onSave completed successfully")}catch(Fe){throw console.error(" onSave failed:",Fe),Fe}finally{l(!1)}}};return console.log(" Rendering ScheduleModal with selectedMembers:",x),n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 md:p-4",children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 md:p-6 border-b",children:[n.jsxDEV("h2",{className:"text-lg md:text-xl font-semibold",children:t?" ":"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:382,columnNumber:11},void 0),n.jsxDEV("button",{onClick:r,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV(Dt,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:389,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:385,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:381,columnNumber:9},void 0),n.jsxDEV("form",{onSubmit:d(it),className:"p-4 md:p-6 space-y-3 md:space-y-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:397,columnNumber:13},void 0),n.jsxDEV("select",{...c("projectId"),className:"input w-full",children:[n.jsxDEV("option",{value:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:404,columnNumber:15},void 0),A.filter(W=>t!=null&&t.isASVisit?!0:W.status!=="completed").map(W=>n.jsxDEV("option",{value:W.id,children:W.name},W.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:414,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:400,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:396,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:423,columnNumber:13},void 0),n.jsxDEV("input",{...c("title",{required:" "}),type:"text",className:"input w-full"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:426,columnNumber:13},void 0),g.title&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(g.title.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:432,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:422,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:438,columnNumber:13},void 0),n.jsxDEV("input",{...c("date",{required:" "}),type:"date",className:"input w-full"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:441,columnNumber:13},void 0),g.date&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(g.date.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:447,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:437,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:453,columnNumber:13},void 0),n.jsxDEV("div",{className:"mb-2",children:n.jsxDEV("button",{type:"button",onClick:()=>ie(!O),className:`px-3 py-1.5 text-xs rounded border transition-colors ${O?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:O?" ":"  (-)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:459,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:458,columnNumber:13},void 0),O&&n.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxDEV("div",{className:"flex gap-1",children:[n.jsxDEV("button",{type:"button",onClick:()=>U(""),className:`px-3 py-1.5 text-xs rounded border transition-colors ${X===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:477,columnNumber:19},void 0),n.jsxDEV("button",{type:"button",onClick:()=>U(""),className:`px-3 py-1.5 text-xs rounded border transition-colors ${X===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:488,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:476,columnNumber:17},void 0),n.jsxDEV("select",{value:ee,onChange:W=>P(parseInt(W.target.value)),className:"flex-1 min-w-[80px] max-w-[120px] px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(W=>n.jsxDEV("option",{value:W,children:[W,""]},W,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:508,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:502,columnNumber:17},void 0),n.jsxDEV("select",{value:pe,onChange:W=>Ne(parseInt(W.target.value)),className:"flex-1 min-w-[80px] max-w-[120px] px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(W=>n.jsxDEV("option",{value:W,children:[W,""]},W,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:521,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:515,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:474,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:452,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (  )"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:532,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[n.jsxDEV("button",{type:"button",onClick:Le,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${x.includes("HV LAB")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:539,columnNumber:15},void 0),n.jsxDEV("button",{type:"button",onClick:Z,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${x.includes("")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:552,columnNumber:15},void 0),n.jsxDEV("button",{type:"button",onClick:xe,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${x.includes("")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:565,columnNumber:15},void 0),mi.map(W=>n.jsxDEV("button",{type:"button",onClick:()=>he(W),className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${x.includes(W)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:W},W,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:579,columnNumber:17},void 0)),x.filter(W=>!mi.includes(W)&&W!=="HV LAB"&&W!==""&&W!=="").map(W=>n.jsxDEV("button",{type:"button",onClick:()=>gt(W),className:"px-2.5 py-1.5 rounded border transition-colors text-sm bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[W," "]},W,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:597,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:537,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:E,onChange:W=>D(W.target.value),onKeyPress:W=>{W.key==="Enter"&&(W.preventDefault(),Ye())},className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:611,columnNumber:15},void 0),n.jsxDEV("button",{type:"button",onClick:Ye,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:623,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:610,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:531,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:635,columnNumber:13},void 0),n.jsxDEV("textarea",{...c("description"),rows:2,className:"input w-full text-sm md:text-base"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:638,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:634,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2 sm:gap-0 pt-4 border-t",children:[n.jsxDEV("div",{children:t&&n.jsxDEV("button",{type:"button",onClick:()=>{window.confirm("  ?")&&i(t.id)},className:"btn btn-outline text-red-600 hover:bg-red-50 flex items-center w-full sm:w-auto justify-center text-sm md:text-base",children:[n.jsxDEV(Ys,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:658,columnNumber:19},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:649,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:647,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex gap-2 sm:space-x-3",children:[n.jsxDEV("button",{type:"button",onClick:r,className:"btn btn-outline flex-1 sm:flex-none text-sm md:text-base",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:664,columnNumber:15},void 0),n.jsxDEV("button",{type:"submit",disabled:o,className:"btn btn-primary flex-1 sm:flex-none text-sm md:text-base disabled:opacity-50",children:o?" ...":t?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:671,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:663,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:646,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:394,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:379,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:378,columnNumber:5},void 0)},Yr=t=>{if(!t||t==="-")return"";const[s,e]=t.split(":"),r=parseInt(s,10),a=parseInt(e,10),i=r>=12?"":"",o=r%12||12;return a>0?`${i} ${o} ${a}`:`${i} ${o}`},ir=["","","","","","","","","","","","","","","","","","","","","","","","","","",""],En=t=>{if(!t)return t;const s=t.replace(/$/g,"").trim(),e=s.split(" ");if(e.length>=2){const r=e[e.length-1];for(const a of ir)if(r===a)return e.slice(0,-1).join(" ").trim()}for(const r of ir)if(s.endsWith(r))return s.substring(0,s.length-r.length).trim()||s;return s},qn=t=>{const s=t.replace(/$/g,"").trim(),e=s.split(" ");if(e.length>=2){const r=e[e.length-1];for(const a of ir)if(r===a)return a}for(const r of ir)if(s.endsWith(r))return r;return""},Cu=["","","","","","",""],_u=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","/","","","","","","","",""],Lr=["","","/","","","","","","","","","","","","",""],Au={KB:"004",:"004",:"088",:"020",:"081",IBK:"003",:"003",NH:"011",:"011",SC:"023",:"023",:"027",:"027",:"045",:"048",:"071",KDB:"002",:"002",:"007",:"031",:"032",:"039",:"034",:"037",:"035",:"090",:"089",K:"089",:"092"},Eu={KB:"KB",:"KB",IBK:"",:"",NH:"",:"",SC:"SC",:"SC",:"",:"",KDB:"",:"",:"K"},ci=Cu,wu=()=>{const{schedules:t,loadSchedulesFromAPI:s,addScheduleToAPI:e,deleteScheduleFromAPI:r}=Us(),{user:a}=Is(),[i,o]=b.useState(!1),l=a!=null&&a.name?a.name.slice(-2):null,c=(a==null?void 0:a.name)===""?[""]:l?[l,...ci.filter(f=>f!==l)]:ci,d=f=>{const p=t.filter(x=>x.attendees?!!(x.attendees.includes(f)||x.attendees.includes("HV LAB")&&f!==""||x.attendees.includes("")&&["",""].includes(f)||x.attendees.includes("")&&["","",""].includes(f)):!1),g=x=>{const _=new Set;return x.filter(E=>{const O=`${et(new Date(E.start),"yyyy-MM-dd")}|${E.project}|${E.title}`;return _.has(O)?!1:(_.add(O),!0)})},N=g(p.filter(x=>Fa(new Date(x.start)))),A=g(p.filter(x=>cm(new Date(x.start))&&!Fa(new Date(x.start))).sort((x,_)=>new Date(x.start).getTime()-new Date(_.start).getTime())).slice(0,3);return{todaySchedules:N,upcomingSchedules:A,member:f}};return n.jsxDEV("div",{className:"space-y-3 md:space-y-5 lg:space-y-4",children:[n.jsxDEV("div",{children:n.jsxDEV("div",{className:"dashboard-grid grid grid-cols-1 sm:grid-cols-2 ipad:grid-cols-2 ipad-lg:grid-cols-2 ipad-xl:grid-cols-3 ipad-2xl:grid-cols-3 2xl:grid-cols-4 gap-3 md:gap-4 lg:gap-4",children:c.map(f=>{const{todaySchedules:p,upcomingSchedules:g}=d(f),N=p.length+g.length,A=f===l;return n.jsxDEV("div",{className:`card p-3 sm:p-4 md:p-5 lg:p-4 ${A?"ring-1 ring-gray-300":""}`,children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("h3",{className:"font-bold text-lg md:text-lg text-gray-900",children:f},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:113,columnNumber:21},void 0),A&&n.jsxDEV("span",{className:"text-xs px-2 py-0.5 bg-gray-200 text-gray-600 rounded font-medium",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:115,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:112,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex items-center gap-2",children:[A&&n.jsxDEV("button",{onClick:()=>o(!0),className:"p-1.5 hover:bg-gray-100 rounded-full transition-colors",title:" ",children:n.jsxDEV(rn,{className:"h-4 w-4 text-gray-700"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:125,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:120,columnNumber:23},void 0),n.jsxDEV("span",{className:`text-xs px-2.5 py-1 ${A&&p.length>0?"bg-amber-100 text-gray-900":"bg-gray-100 text-gray-900"} rounded-full font-semibold whitespace-nowrap`,children:[p.length," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:128,columnNumber:21},void 0),n.jsxDEV("span",{className:"text-xs px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full font-semibold whitespace-nowrap",children:[g.length," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:131,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:118,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:111,columnNumber:17},void 0),p.length>0&&n.jsxDEV("div",{className:"mb-4",children:[n.jsxDEV("div",{className:"flex items-center gap-1.5 mb-2",children:[n.jsxDEV(ji,{className:"h-4 w-4 text-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:141,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs font-semibold text-gray-900 uppercase",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:142,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:140,columnNumber:21},void 0),n.jsxDEV("div",{className:"space-y-2",children:(()=>{const x=p.reduce((_,E)=>{const D=E.project||"-";return _[D]||(_[D]=[]),_[D].push(E),_},{});return Object.entries(x).map(([_,E])=>{const D=f===l;return n.jsxDEV("div",{className:`border-l-3 ${D?"border-gray-400":"border-gray-900"} ${D?"bg-amber-50":"bg-gray-50"} rounded-r overflow-hidden`,children:[n.jsxDEV("div",{className:`px-3 py-1 ${D?"bg-amber-100":"bg-gray-100"} border-b ${D?"border-amber-200":"border-gray-200"}`,children:n.jsxDEV("span",{className:"text-xs font-semibold text-gray-900",children:_},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:164,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:163,columnNumber:31},void 0),n.jsxDEV("div",{className:"px-3 py-1.5 space-y-0.5",children:E.map(O=>{const ie=O.time&&O.time!=="-"?` - ${Yr(O.time)}`:"";return n.jsxDEV("p",{className:"font-medium text-gray-900 text-sm leading-snug",children:[" ",O.title,ie]},O.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:170,columnNumber:37},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:166,columnNumber:31},void 0)]},_,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:159,columnNumber:29},void 0)})})()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:144,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:139,columnNumber:19},void 0),g.length>0&&n.jsxDEV("div",{children:[n.jsxDEV("div",{className:"flex items-center gap-1.5 mb-2",children:[n.jsxDEV(Gl,{className:"h-4 w-4 text-gray-600"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:188,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:189,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:187,columnNumber:21},void 0),n.jsxDEV("div",{className:"space-y-2",children:(()=>{const x=g.reduce((_,E)=>{const D=et(new Date(E.start),"MM.dd",{locale:kt}),O=E.project||"-",ie=`${D}|${O}`;return _[ie]||(_[ie]={date:D,project:O,schedules:[]}),_[ie].schedules.push(E),_},{});return Object.values(x).map(({date:_,project:E,schedules:D})=>{const ie=D.length>0&&mm(new Date(D[0].start))?`${_} ()`:_;return n.jsxDEV("div",{className:"border-l-3 border-gray-400 bg-gray-50 rounded-r overflow-hidden",children:[n.jsxDEV("div",{className:"px-3 py-1 bg-gray-100 border-b border-gray-200 flex items-center justify-between",children:[n.jsxDEV("span",{className:"text-xs font-semibold text-gray-700",children:E},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:211,columnNumber:33},void 0),n.jsxDEV("span",{className:"text-xs text-gray-500 font-medium",children:ie},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:212,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:210,columnNumber:31},void 0),n.jsxDEV("div",{className:"px-3 py-1.5 space-y-0.5",children:D.map(X=>{const U=X.time&&X.time!=="-"?` - ${Yr(X.time)}`:"";return n.jsxDEV("p",{className:"font-medium text-gray-900 text-sm leading-snug",children:[" ",X.title,U]},X.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:218,columnNumber:37},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:214,columnNumber:31},void 0)]},`${_}-${E}`,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:209,columnNumber:29},void 0)})})()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:191,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:186,columnNumber:19},void 0),N===0&&n.jsxDEV("div",{className:"text-center py-8 text-gray-400 text-sm",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:234,columnNumber:19},void 0)]},f,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:109,columnNumber:15},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:101,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:100,columnNumber:7},void 0),i&&n.jsxDEV(Co,{event:null,slotInfo:{start:new Date,end:new Date},onClose:()=>o(!1),onSave:async f=>{try{console.log("Dashboard: Adding schedule...",f),await e({id:Date.now().toString(),title:f.title||"",start:f.start||new Date,end:f.end||new Date,type:"other",project:f.projectId||f.projectName||"",location:"",attendees:f.assignedTo||[],description:f.description||"",time:f.time}),console.log("Dashboard: Schedule added successfully"),await s(),console.log("Dashboard: Schedules fetched, closing modal"),o(!1)}catch(p){console.error("Failed to add schedule:",p),alert("  : "+(p instanceof Error?p.message:"   "))}},onDelete:async f=>{try{await r(f),await s(),o(!1)}catch(p){console.error("Failed to delete schedule:",p),alert("  : "+(p instanceof Error?p.message:"   "))}}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:246,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:98,columnNumber:5},void 0)},fr=()=>{const{user:t}=Is(),{projects:s}=Us();return b.useMemo(()=>t?t.name===""?s.filter(r=>{const i=(r.manager?r.manager.split(",").map(l=>l.trim()):[]).includes(""),o=r.team&&Array.isArray(r.team)&&r.team.includes("");return i||o}):s:[],[t,s])},ju=({value:t,detailValue:s="",onChange:e,onDetailChange:r,placeholder:a=" ",error:i})=>{const[o,l]=b.useState(!1),[c,d]=b.useState(t),[f,p]=b.useState(s),g=b.useRef(null);b.useEffect(()=>{const E=D=>{g.current&&!g.current.contains(D.target)&&l(!1)};return o&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[o]),b.useEffect(()=>{d(t)},[t]),b.useEffect(()=>{p(s)},[s]);const N=()=>new Promise((E,D)=>{if(window.daum&&window.daum.Postcode){E(!0);return}const O=document.createElement("script");O.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",O.async=!0,O.onload=()=>E(!0),O.onerror=()=>D(new Error("Kakao Postcode   ")),document.head.appendChild(O)}),A=E=>{const D=E.roadAddr||E.jibunAddr;d(D),e(D,f),l(!1)},x=E=>{const D=E.target.value;p(D),r&&r(D),c&&e(c,D)},_=async()=>{try{(!window.daum||!window.daum.Postcode)&&await N(),window.daum&&new window.daum.Postcode({oncomplete:function(E){const D={roadAddr:E.roadAddress,jibunAddr:E.jibunAddress||E.autoJibunAddress||"",zipNo:E.zonecode,bdNm:E.buildingName,siNm:E.sido,sggNm:E.sigungu,emdNm:E.bname,rn:E.roadname};A(D)}}).open()}catch(E){console.error("  :",E),alert("     .  .")}};return n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("div",{className:"relative flex-1",children:[n.jsxDEV("input",{type:"text",value:c,onClick:()=>_(),onChange:E=>{d(E.target.value),e(E.target.value,f)},placeholder:a,className:`input pr-8 cursor-pointer ${i?"border-red-500":""}`,readOnly:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:172,columnNumber:13},void 0),n.jsxDEV(Li,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:184,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:171,columnNumber:11},void 0),n.jsxDEV("button",{type:"button",onClick:_,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:188,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:170,columnNumber:9},void 0),i&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:i},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:197,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:169,columnNumber:7},void 0),n.jsxDEV("div",{children:n.jsxDEV("input",{type:"text",value:f,onChange:x,placeholder:" (/ )",className:"input",disabled:!c},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:203,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:202,columnNumber:7},void 0),c&&n.jsxDEV("div",{className:"p-3 bg-gray-50 rounded-lg",children:n.jsxDEV("p",{className:"text-sm text-gray-600",children:[n.jsxDEV("span",{className:"font-medium",children:" :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:217,columnNumber:13},void 0)," ",c,f&&`, ${f}`]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:216,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:215,columnNumber:9},void 0),n.jsxDEV("div",{id:"address-search-container",style:{display:"none",width:"100%",height:"400px"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:225,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:167,columnNumber:5},void 0)},di=["","","","","","",""],Lu=({project:t,onClose:s,onSave:e})=>{const{register:r,handleSubmit:a,setValue:i,reset:o,formState:{errors:l}}=ya({defaultValues:{name:"",client:"",location:"",detailLocation:"",startDate:"",endDate:""}}),[c,d]=b.useState([]),[f,p]=b.useState(""),[g,N]=b.useState(""),[A,x]=b.useState(""),[_,E]=b.useState(!1);b.useEffect(()=>{var U;if(t){const ee=t.location?t.location.split(","):["",""],P=((U=ee[0])==null?void 0:U.trim())||t.location||"",pe=ee.length>1?ee.slice(1).join(",").trim():"";o({name:t.name,client:t.client||"",location:P,detailLocation:pe,startDate:t.startDate?new Date(t.startDate).toISOString().split("T")[0]:"",endDate:t.endDate?new Date(t.endDate).toISOString().split("T")[0]:""}),N(P),x(pe);const Ne=t.manager?t.manager.split(",").map(ce=>ce.trim()).filter(ce=>ce&&ce!==""):[];d(Ne)}else o({name:"",client:"",location:"",detailLocation:"",startDate:"",endDate:""}),N(""),x(""),d([])},[t,o]);const D=U=>{d(ee=>ee.includes(U)?ee.filter(P=>P!==U):[...ee,U])},O=()=>{f.trim()&&!c.includes(f.trim())&&(d(U=>[...U,f.trim()]),p(""))},ie=U=>{d(ee=>ee.filter(P=>P!==U))},X=async U=>{if(_)return;E(!0),console.log(" ProjectModal onSubmit - Raw form data:",U);const ee=g&&A?`${g}, ${A}`:g||U.location,P={name:U.name,client:U.client,location:ee,manager:c.join(", "),contractAmount:(t==null?void 0:t.contractAmount)??0,spent:(t==null?void 0:t.spent)??0,status:(t==null?void 0:t.status)??"planning",progress:(t==null?void 0:t.progress)??0,description:(t==null?void 0:t.description)??"",meetingNotes:(t==null?void 0:t.meetingNotes)??[],customerRequests:(t==null?void 0:t.customerRequests)??[],entrancePassword:(t==null?void 0:t.entrancePassword)??"",sitePassword:(t==null?void 0:t.sitePassword)??""};if(U.startDate&&U.startDate!=="")P.startDate=U.startDate,console.log(" Setting startDate from form:",U.startDate);else if(t!=null&&t.startDate){const pe=typeof t.startDate=="string"&&t.startDate.includes("T")?t.startDate.split("T")[0]:t.startDate;P.startDate=pe,console.log(" Keeping existing startDate:",P.startDate)}if(U.endDate&&U.endDate!=="")P.endDate=U.endDate,console.log(" Setting endDate from form:",U.endDate);else if(t!=null&&t.endDate){const pe=typeof t.endDate=="string"&&t.endDate.includes("T")?t.endDate.split("T")[0]:t.endDate;P.endDate=pe,console.log(" Keeping existing endDate:",P.endDate)}console.log(" ProjectModal onSubmit - Final formData:",P);try{await e(P)}catch(pe){throw E(!1),pe}};return n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 md:p-4",children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 md:p-6 border-b sticky top-0 bg-white z-10",children:[n.jsxDEV("h2",{className:"text-lg md:text-xl font-semibold",children:t?" ":" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:186,columnNumber:11},void 0),n.jsxDEV("button",{onClick:s,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV(Dt,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:193,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:189,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:185,columnNumber:9},void 0),n.jsxDEV("form",{onSubmit:a(X),className:"p-4 md:p-6 space-y-4 md:space-y-6",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:202,columnNumber:15},void 0),n.jsxDEV("input",{...r("name",{required:" "}),type:"text",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:205,columnNumber:15},void 0),l.name&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(l.name.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:211,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:201,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:216,columnNumber:15},void 0),n.jsxDEV("input",{...r("client"),type:"text",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:219,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:215,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:200,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:229,columnNumber:13},void 0),n.jsxDEV(ju,{value:g,detailValue:A,onChange:(U,ee)=>{N(U),x(ee||""),i("location",U),i("detailLocation",ee||"")},onDetailChange:U=>{x(U),i("detailLocation",U)},placeholder:"  ",required:!0,error:l.location?String(l.location.message):void 0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:232,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:228,columnNumber:11},void 0),n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:255,columnNumber:15},void 0),n.jsxDEV("input",{...r("startDate"),type:"date",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:258,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:254,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:266,columnNumber:15},void 0),n.jsxDEV("input",{...r("endDate"),type:"date",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:269,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:265,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:253,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (  )"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:279,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[di.map(U=>n.jsxDEV("button",{type:"button",onClick:()=>D(U),className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${c.includes(U)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:U},U,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:287,columnNumber:17},void 0)),c.filter(U=>!di.includes(U)).map(U=>n.jsxDEV("button",{type:"button",onClick:()=>ie(U),className:"px-2.5 py-1.5 rounded border transition-colors text-sm bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[U," "]},U,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:305,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:284,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:f,onChange:U=>p(U.target.value),onKeyPress:U=>{U.key==="Enter"&&(U.preventDefault(),O())},placeholder:"   ",className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:319,columnNumber:15},void 0),n.jsxDEV("button",{type:"button",onClick:O,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:332,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:318,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:278,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex justify-end space-x-2 md:space-x-3 pt-4 border-t",children:[n.jsxDEV("button",{type:"button",onClick:s,className:"btn btn-outline text-sm md:text-base",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:345,columnNumber:13},void 0),n.jsxDEV("button",{type:"submit",disabled:_,className:"btn btn-primary text-sm md:text-base disabled:opacity-50",children:_?" ...":t?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:352,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:344,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:198,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:183,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:182,columnNumber:5},void 0)},Bu=({projectName:t,meetingNotes:s,onClose:e,onSave:r,onDelete:a})=>{const[i,o]=b.useState(""),[l,c]=b.useState(new Date().toISOString().split("T")[0]),[d,f]=b.useState(!1),[p,g]=b.useState(!1),N=()=>{f(!0),o(""),c(new Date().toISOString().split("T")[0])},A=async()=>{if(!p){if(!i.trim()){alert(" ");return}if(!l){alert(" ");return}g(!0);try{await r(i.trim(),new Date(l)),o(""),c(new Date().toISOString().split("T")[0]),f(!1)}finally{g(!1)}}},x=()=>{o(""),c(new Date().toISOString().split("T")[0]),f(!1)},_=E=>{window.confirm("   ?")&&a(E)};return n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col shadow-xl",onClick:E=>E.stopPropagation(),children:[n.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[n.jsxDEV("div",{children:[n.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:83,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500 mt-0.5",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:84,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:82,columnNumber:11},void 0),n.jsxDEV("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsxDEV(Dt,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:90,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:81,columnNumber:9},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6",children:[!d&&n.jsxDEV("button",{onClick:N,className:"w-full mb-4 px-4 py-2.5 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"+ "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:98,columnNumber:13},void 0),d&&n.jsxDEV("div",{className:"mb-4 p-4 bg-gray-50 rounded border border-gray-200",children:[n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:110,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:l,onChange:E=>c(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:113,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:109,columnNumber:15},void 0),n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:121,columnNumber:17},void 0),n.jsxDEV("textarea",{value:i,onChange:E=>o(E.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900 resize-none",rows:4},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:124,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:120,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:A,disabled:p,className:"px-4 py-1.5 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:p?" ...":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:133,columnNumber:17},void 0),n.jsxDEV("button",{onClick:x,disabled:p,className:"px-4 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:140,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:132,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:108,columnNumber:13},void 0),n.jsxDEV("div",{className:"space-y-3",children:s.length===0?n.jsxDEV("div",{className:"text-center py-12 text-gray-400 text-sm",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:154,columnNumber:15},void 0):s.map(E=>n.jsxDEV("div",{className:"p-4 bg-white border border-gray-200 rounded hover:border-gray-300 transition-colors group",children:n.jsxDEV("div",{className:"flex items-start justify-between gap-3",children:[n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("p",{className:"text-sm text-gray-600 mb-2",children:et(new Date(E.date),"yyyy.MM.dd (eee)",{locale:kt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:165,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:E.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:168,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:164,columnNumber:21},void 0),n.jsxDEV("button",{onClick:()=>_(E.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:172,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:163,columnNumber:19},void 0)},E.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:159,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:152,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:95,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:76,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:72,columnNumber:5},void 0)},Hu=({projectName:t,customerRequests:s,onClose:e,onSave:r,onToggleComplete:a,onDelete:i})=>{const[o,l]=b.useState(""),[c,d]=b.useState(new Date().toISOString().split("T")[0]),[f,p]=b.useState(!1),[g,N]=b.useState(!1),A=()=>{p(!0),l(""),d(new Date().toISOString().split("T")[0])},x=async()=>{if(!g){if(!o.trim()){alert(" ");return}if(!c){alert(" ");return}N(!0);try{await r(o.trim(),new Date(c)),l(""),d(new Date().toISOString().split("T")[0]),p(!1)}finally{N(!1)}}},_=()=>{l(""),d(new Date().toISOString().split("T")[0]),p(!1)},E=X=>{window.confirm("  ?")&&i(X)},D=X=>{a(X)},O=s.filter(X=>!X.completed),ie=s.filter(X=>X.completed);return n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col shadow-xl",onClick:X=>X.stopPropagation(),children:[n.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[n.jsxDEV("div",{children:[n.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:93,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500 mt-0.5",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:94,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:92,columnNumber:11},void 0),n.jsxDEV("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsxDEV(Dt,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:100,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:96,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:91,columnNumber:9},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6",children:[!f&&n.jsxDEV("button",{onClick:A,className:"w-full mb-4 px-4 py-2.5 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"+ "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:108,columnNumber:13},void 0),f&&n.jsxDEV("div",{className:"mb-4 p-4 bg-gray-50 rounded border border-gray-200",children:[n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:120,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:c,onChange:X=>d(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:123,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:119,columnNumber:15},void 0),n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:131,columnNumber:17},void 0),n.jsxDEV("textarea",{value:o,onChange:X=>l(X.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900 resize-none",rows:3},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:134,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:130,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:x,disabled:g,className:"px-4 py-1.5 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:g?" ...":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:143,columnNumber:17},void 0),n.jsxDEV("button",{onClick:_,disabled:g,className:"px-4 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:150,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:142,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:118,columnNumber:13},void 0),n.jsxDEV("div",{className:"space-y-2",children:s.length===0?n.jsxDEV("div",{className:"text-center py-12 text-gray-400 text-sm",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:164,columnNumber:15},void 0):n.jsxDEV(n.Fragment,{children:[O.map(X=>n.jsxDEV("div",{className:"p-3 bg-white border border-gray-300 rounded hover:border-gray-400 transition-colors group",children:n.jsxDEV("div",{className:"flex items-start gap-3",children:[n.jsxDEV("button",{onClick:()=>D(X.id),className:"mt-0.5 flex-shrink-0",children:n.jsxDEV(Zl,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:180,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:176,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:X.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:183,columnNumber:25},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:et(new Date(X.createdAt),"yyyy.MM.dd",{locale:kt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:186,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:182,columnNumber:23},void 0),n.jsxDEV("button",{onClick:()=>E(X.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:190,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:175,columnNumber:21},void 0)},X.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:171,columnNumber:19},void 0)),ie.map(X=>n.jsxDEV("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded hover:border-gray-300 transition-colors group",children:n.jsxDEV("div",{className:"flex items-start gap-3",children:[n.jsxDEV("button",{onClick:()=>D(X.id),className:"mt-0.5 flex-shrink-0",children:n.jsxDEV(em,{className:"h-4 w-4 text-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:211,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:207,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("p",{className:"text-sm text-gray-500 line-through whitespace-pre-wrap break-words",children:X.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:214,columnNumber:25},void 0),n.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:et(new Date(X.createdAt),"yyyy.MM.dd",{locale:kt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:217,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:213,columnNumber:23},void 0),n.jsxDEV("button",{onClick:()=>E(X.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:221,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:206,columnNumber:21},void 0)},X.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:202,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:168,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:162,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:105,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:86,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:82,columnNumber:5},void 0)},Uu=({projectName:t,entrancePassword:s,sitePassword:e,onClose:r,onSave:a})=>{const[i,o]=b.useState(s||""),[l,c]=b.useState(e||""),[d,f]=b.useState(!1),[p,g]=b.useState(!1),N=()=>{f(!0)},A=async()=>{if(!p){g(!0);try{await a(i,l),f(!1)}finally{g(!1)}}},x=()=>{o(s||""),c(e||""),f(!1)};return n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:r,children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl",onClick:_=>_.stopPropagation(),children:[n.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[n.jsxDEV("div",{children:[n.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:57,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500 mt-0.5",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:58,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:56,columnNumber:11},void 0),n.jsxDEV("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsxDEV(Dt,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:64,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:60,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:55,columnNumber:9},void 0),n.jsxDEV("div",{className:"p-6 space-y-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:72,columnNumber:13},void 0),d?n.jsxDEV("input",{type:"text",value:i,onChange:_=>o(_.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:76,columnNumber:15},void 0):n.jsxDEV("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded",children:i?n.jsxDEV("span",{className:"text-sm font-mono text-gray-900",children:i},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:86,columnNumber:19},void 0):n.jsxDEV("span",{className:"text-sm text-gray-400",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:88,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:84,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:71,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:96,columnNumber:13},void 0),d?n.jsxDEV("input",{type:"text",value:l,onChange:_=>c(_.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:100,columnNumber:15},void 0):n.jsxDEV("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded",children:l?n.jsxDEV("span",{className:"text-sm font-mono text-gray-900",children:l},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:110,columnNumber:19},void 0):n.jsxDEV("span",{className:"text-sm text-gray-400",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:112,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:108,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:95,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:69,columnNumber:9},void 0),n.jsxDEV("div",{className:"border-t border-gray-200 px-6 py-4 flex gap-2",children:d?n.jsxDEV(n.Fragment,{children:[n.jsxDEV("button",{onClick:A,disabled:p,className:"flex-1 px-4 py-2 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:p?" ...":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:123,columnNumber:15},void 0),n.jsxDEV("button",{onClick:x,disabled:p,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:130,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:122,columnNumber:13},void 0):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("button",{onClick:N,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:140,columnNumber:15},void 0),n.jsxDEV("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:146,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:139,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:120,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:50,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:46,columnNumber:5},void 0)},Su=({projectName:t,onClose:s})=>{var o;const[e,r]=b.useState({clientName:"",phoneNumber:"",address:"",startDate:"",endDate:"",area:"",designFee:"",bankAccount:" 487102-01-264798 ",companyAddress:"  277  109",representative:"  "}),a=()=>{window.print()},i=l=>{const c=Number(l.replace(/,/g,""));return isNaN(c)?"":c.toLocaleString()};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[n.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:40,columnNumber:13},void 0),n.jsxDEV("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full",children:n.jsxDEV(Dt,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:45,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:41,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:39,columnNumber:11},void 0),n.jsxDEV("div",{className:"p-6 space-y-4 print:hidden",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:52,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.clientName,onChange:l=>r({...e,clientName:l.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:53,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:51,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:63,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.phoneNumber,onChange:l=>r({...e,phoneNumber:l.target.value}),placeholder:"010-0000-0000",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:64,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:62,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:74,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.address,onChange:l=>r({...e,address:l.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:75,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:73,columnNumber:13},void 0),n.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:86,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:e.startDate,onChange:l=>r({...e,startDate:l.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:87,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:85,columnNumber:15},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:95,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:e.endDate,onChange:l=>r({...e,endDate:l.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:96,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:94,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:84,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:106,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.area,onChange:l=>r({...e,area:l.target.value}),placeholder:": 21.9(72.37m2)",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:107,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:105,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:117,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:i(e.designFee),onChange:l=>{const c=l.target.value.replace(/,/g,"");/^\d*$/.test(c)&&r({...e,designFee:c})},placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:118,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:116,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:133,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.bankAccount,onChange:l=>r({...e,bankAccount:l.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:134,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:132,columnNumber:13},void 0),n.jsxDEV("button",{onClick:a,disabled:!e.clientName||!e.phoneNumber||!e.address,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[n.jsxDEV(Bi,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:147,columnNumber:15},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:142,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:50,columnNumber:11},void 0),n.jsxDEV("div",{className:"hidden print:block p-16",children:n.jsxDEV("div",{className:"space-y-16",children:[n.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:156,columnNumber:15},void 0),n.jsxDEV("div",{className:"space-y-8 text-base leading-relaxed",children:[n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"1.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:161,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.clientName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:162,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:160,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"2.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:166,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.phoneNumber},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:167,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:165,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"3.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:171,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.address},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:172,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:170,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"3.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:176,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.startDate&&e.endDate?n.jsxDEV(n.Fragment,{children:[et(new Date(e.startDate),"yyyy",{locale:kt}),"",et(new Date(e.startDate),"MM",{locale:kt}),"",et(new Date(e.startDate),"dd",{locale:kt})," ~ ",et(new Date(e.endDate),"yyyy",{locale:kt}),"",et(new Date(e.endDate),"MM",{locale:kt}),"",et(new Date(e.endDate),"dd",{locale:kt})," ()"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:179,columnNumber:23},void 0):""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:177,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:175,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"5.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:187,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.area},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:188,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:186,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex flex-col",children:[n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"6.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:193,columnNumber:21},void 0),n.jsxDEV("span",{className:"flex-1",children:[e.designFee?`${i(e.designFee)}`:""," ()"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:194,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:192,columnNumber:19},void 0),e.bankAccount&&n.jsxDEV("div",{className:"ml-48 mt-2 text-center",children:e.bankAccount},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:199,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:191,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:159,columnNumber:15},void 0),n.jsxDEV("div",{className:"mt-20 space-y-3",children:[n.jsxDEV("div",{className:"text-base font-bold",children:"*"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:206,columnNumber:17},void 0),n.jsxDEV("div",{className:"ml-8 space-y-2 text-base",children:[n.jsxDEV("div",{children:[" : ",e.address]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:208,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("span",{children:[" : ",(o=e.clientName)==null?void 0:o.split("").join("    ")]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:210,columnNumber:21},void 0),n.jsxDEV("span",{className:"ml-8",children:"()"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:211,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:209,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:207,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:205,columnNumber:15},void 0),n.jsxDEV("div",{className:"mt-12 space-y-3",children:[n.jsxDEV("div",{className:"text-base font-bold",children:"*"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:218,columnNumber:17},void 0),n.jsxDEV("div",{className:"ml-8 space-y-2 text-base",children:[n.jsxDEV("div",{children:[" : ",e.companyAddress]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:220,columnNumber:19},void 0),n.jsxDEV("div",{children:" : HV LAB ()"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:221,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("span",{children:[" : ",e.representative]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:223,columnNumber:21},void 0),n.jsxDEV("div",{className:"ml-8 inline-flex items-center justify-center w-14 h-14 border-2 border-red-600",children:n.jsxDEV("span",{className:"text-red-600 text-xs font-bold leading-tight text-center",children:["",n.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:226,columnNumber:28},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:225,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:224,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:222,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:219,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:217,columnNumber:15},void 0),n.jsxDEV("div",{className:"border-t-[3px] border-gray-900 mt-32 pt-12 flex justify-between items-end",children:[n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("span",{className:"text-4xl font-bold",children:"H"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:236,columnNumber:19},void 0),n.jsxDEV("span",{className:"inline-block w-12 h-1 bg-gray-900 mx-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:237,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:235,columnNumber:17},void 0),n.jsxDEV("div",{className:"text-right",children:[n.jsxDEV("div",{className:"text-xs tracking-widest mb-1",children:"ARCHITECTURE & INTERIOR"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:240,columnNumber:19},void 0),n.jsxDEV("div",{className:"text-3xl font-bold",children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:241,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:239,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:234,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:154,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:37,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:36,columnNumber:7},void 0),n.jsxDEV("style",{children:`
        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:relative {
            position: relative !important;
            background: white !important;
          }
        }
      `},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:250,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:35,columnNumber:5},void 0)},Pu=()=>{const{loadProjectsFromAPI:t,addProjectToAPI:s,updateProjectInAPI:e,deleteProjectFromAPI:r}=Us(),{user:a}=Is(),i=fr(),[o,l]=b.useState("in-progress"),[c,d]=b.useState("grid"),[f,p]=b.useState(!1),[g,N]=b.useState(null),[A,x]=b.useState(!1),[_,E]=b.useState(!1),[D,O]=b.useState(!1),[ie,X]=b.useState(!1),[U,ee]=b.useState(null),P=(B,ve)=>`lastViewed_${a==null?void 0:a.id}_${B}_${ve}`,pe=(B,ve)=>{const De=P(B,ve),ge=localStorage.getItem(De);return ge?parseInt(ge,10):0},Ne=(B,ve)=>{const De=P(B,ve);localStorage.setItem(De,Date.now().toString())},ce=(B,ve)=>{const De=pe(B.id,ve);return ve==="meeting"?(B.meetingNotes||[]).some(Ue=>(Ue.createdAt?new Date(Ue.createdAt).getTime():new Date(Ue.date).getTime())>De):(B.customerRequests||[]).some(Ue=>!Ue.completed)};b.useEffect(()=>{t().catch(B=>{console.error("Failed to load projects:",B),q.error("   ")})},[t]),b.useEffect(()=>{const B=()=>{N(null),p(!0)};return window.addEventListener("headerAddButtonClick",B),()=>window.removeEventListener("headerAddButtonClick",B)},[]);const Y=(B,ve)=>{if(!B||!ve)return 0;const De=new Date,ge=new Date(B),Ue=new Date(ve);if(De<ge)return 0;if(De>Ue)return 100;const st=Math.ceil((Ue.getTime()-ge.getTime())/(1e3*60*60*24)),mt=Math.ceil((De.getTime()-ge.getTime())/(1e3*60*60*24)),ut=Math.round(mt/st*100);return Math.min(100,Math.max(0,ut))},oe=B=>{N(B),p(!0)},he=async(B,ve)=>{if(window.confirm(`"${ve}"  ?

    .`))try{await r(B),q.success(" ")}catch(De){console.error("Failed to delete project:",De),q.error("  ")}},Le=async B=>{try{if(g)await e(g.id,B),q.success(" ");else{const ve={id:"",...B,team:B.team||[]};await s(ve),q.success(" "),l(B.status||"planning")}p(!1),N(null)}catch(ve){console.error("Failed to save project:",ve),q.error("  ")}},Z=async(B,ve)=>{try{await e(B,{status:ve}),q.success(" ")}catch(De){console.error("Failed to update project status:",De),q.error("  ")}},xe=B=>{ee(B),x(!0),Ne(B.id,"meeting")},Ye=B=>{ee(B),E(!0),Ne(B.id,"request")},gt=B=>{ee(B),O(!0)},it=B=>{ee(B),X(!0)},W=async(B,ve)=>{if(!U)return;const De=U.entrancePassword,ge=U.sitePassword;ee({...U,entrancePassword:B,sitePassword:ve});try{await e(U.id,{entrancePassword:B,sitePassword:ve}),q.success(" ")}catch(Ue){console.error("Failed to save passwords:",Ue),q.error("  "),ee({...U,entrancePassword:De,sitePassword:ge})}},_e=async(B,ve)=>{if(!U)return;const De={id:Date.now().toString(),content:B,date:ve,createdAt:new Date},ge=[...U.meetingNotes||[],De];ee({...U,meetingNotes:ge});try{await e(U.id,{meetingNotes:ge}),q.success("  ")}catch(Ue){console.error("Failed to save meeting note:",Ue),q.error("   "),ee({...U,meetingNotes:U.meetingNotes||[]})}},J=async(B,ve)=>{if(!U)return;const De={id:Date.now().toString(),content:B,completed:!1,createdAt:ve},ge=[...U.customerRequests||[],De];ee({...U,customerRequests:ge});try{await e(U.id,{customerRequests:ge}),q.success("  ")}catch(Ue){console.error("Failed to save customer request:",Ue),q.error("   "),ee({...U,customerRequests:U.customerRequests||[]})}},ke=async B=>{if(!U)return;const ve=U.customerRequests||[],De=ve.map(ge=>ge.id===B?{...ge,completed:!ge.completed}:ge);ee({...U,customerRequests:De});try{await e(U.id,{customerRequests:De}),q.success("  ")}catch(ge){console.error("Failed to toggle request:",ge),q.error("  "),ee({...U,customerRequests:ve})}},Be=async B=>{if(!U)return;const ve=U.meetingNotes||[],De=ve.filter(ge=>ge.id!==B);ee({...U,meetingNotes:De});try{await e(U.id,{meetingNotes:De}),q.success("  ")}catch(ge){console.error("Failed to delete meeting note:",ge),q.error(" "),ee({...U,meetingNotes:ve})}},Je=async B=>{if(!U)return;const ve=U.customerRequests||[],De=ve.filter(ge=>ge.id!==B);ee({...U,customerRequests:De});try{await e(U.id,{customerRequests:De}),q.success("  ")}catch(ge){console.error("Failed to delete customer request:",ge),q.error(" "),ee({...U,customerRequests:ve})}},$e=({project:B})=>{const De={planning:{label:"",color:"bg-white text-gray-700 border-gray-300"},"in-progress":{label:"",color:"bg-white text-gray-900 border-gray-300"},completed:{label:"",color:"bg-gray-900 text-white border-gray-900"},"on-hold":{label:"",color:"bg-white text-gray-600 border-gray-300"}}[B.status];return n.jsxDEV("select",{value:B.status,onChange:ge=>Z(B.id,ge.target.value),className:ss("px-2 py-1 text-xs font-medium border rounded cursor-pointer","focus:outline-none focus:ring-2 focus:ring-gray-500",De.color),onClick:ge=>ge.stopPropagation(),children:[n.jsxDEV("option",{value:"planning",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:395,columnNumber:9},void 0),n.jsxDEV("option",{value:"in-progress",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:396,columnNumber:9},void 0),n.jsxDEV("option",{value:"completed",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:397,columnNumber:9},void 0),n.jsxDEV("option",{value:"on-hold",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:398,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:385,columnNumber:7},void 0)},Fe=(()=>{let B=i;return o!=="all"&&(B=B.filter(ve=>ve.status===o)),a!=null&&a.name&&(B=[...B].sort((ve,De)=>{var st,mt;const ge=ve.manager===a.name||((st=ve.team)==null?void 0:st.includes(a.name)),Ue=De.manager===a.name||((mt=De.team)==null?void 0:mt.includes(a.name));return ge&&!Ue?-1:!ge&&Ue?1:0})),B})(),We={planning:i.filter(B=>B.status==="planning").length,inProgress:i.filter(B=>B.status==="in-progress").length,completed:i.filter(B=>B.status==="completed").length,onHold:i.filter(B=>B.status==="on-hold").length},_t=({project:B})=>{var De,ge,Ue;const ve=Y(B.startDate,B.endDate);return n.jsxDEV("div",{className:"card p-3 md:p-4 hover:border-gray-400 transition-colors",children:[n.jsxDEV("div",{className:"flex items-start justify-between mb-3 md:mb-4",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("h3",{className:"font-bold text-base md:text-lg text-gray-900",children:B.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:444,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:[B.client,""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:445,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:443,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex flex-col items-end gap-2",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[B.status==="planning"&&n.jsxDEV("button",{onClick:()=>it(B),className:"px-2 py-1 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 rounded transition-colors",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:450,columnNumber:17},void 0),n.jsxDEV($e,{project:B},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:457,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:448,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>oe(B),className:"text-xs text-gray-600 hover:text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:459,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:447,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:442,columnNumber:9},void 0),n.jsxDEV("div",{className:"space-y-1.5 md:space-y-2 mb-3 md:mb-4 text-xs md:text-sm",children:[n.jsxDEV("div",{className:"text-gray-600",children:[": ",B.location]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:469,columnNumber:11},void 0),n.jsxDEV("div",{className:"text-gray-600",children:[": ",B.startDate&&B.endDate?`${et(B.startDate,"MM.dd (eee)",{locale:kt})} - ${et(B.endDate,"MM.dd (eee)",{locale:kt})}`:""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:472,columnNumber:11},void 0),n.jsxDEV("div",{className:"text-gray-600",children:[": ",B.manager]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:477,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:468,columnNumber:9},void 0),n.jsxDEV("div",{className:"mb-3 md:mb-4",children:[n.jsxDEV("div",{className:"flex items-center justify-end mb-2",children:n.jsxDEV("button",{onClick:()=>gt(B),className:"px-2.5 py-1 text-[10px] md:text-xs font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:485,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:484,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex items-center justify-between mb-1.5 md:mb-2",children:[n.jsxDEV("span",{className:"text-[10px] md:text-xs text-gray-600",children:" ( )"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:493,columnNumber:13},void 0),n.jsxDEV("span",{className:"text-xs md:text-sm font-medium text-gray-900",children:[ve,"%"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:494,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:492,columnNumber:11},void 0),n.jsxDEV("div",{className:"w-full bg-gray-200 h-1",children:n.jsxDEV("div",{className:"bg-gray-900 h-1 transition-all",style:{width:`${ve}%`}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:497,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:496,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:482,columnNumber:9},void 0),n.jsxDEV("div",{className:"pt-3 border-t border-gray-200 space-y-2",children:[n.jsxDEV("div",{onClick:()=>xe(B),className:"relative p-2.5 bg-gray-50 hover:bg-gray-100 rounded-lg cursor-pointer transition-colors border border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[n.jsxDEV("span",{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:["",(((De=B.meetingNotes)==null?void 0:De.length)||0)>0&&n.jsxDEV("span",{className:"text-gray-500",children:["(",(ge=B.meetingNotes)==null?void 0:ge.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:515,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:512,columnNumber:15},void 0),ce(B,"meeting")&&n.jsxDEV("span",{className:"px-1.5 py-0.5 text-[9px] font-bold text-white bg-red-500 rounded-full",children:"NEW"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:519,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:511,columnNumber:13},void 0),B.meetingNotes&&B.meetingNotes.length>0?n.jsxDEV("p",{className:"text-xs text-gray-600 line-clamp-1",children:((Ue=B.meetingNotes[B.meetingNotes.length-1])==null?void 0:Ue.content)||" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:523,columnNumber:15},void 0):n.jsxDEV("p",{className:"text-xs text-gray-400 italic",children:"+   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:527,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:507,columnNumber:11},void 0),(()=>{var ut;const st=((ut=B.customerRequests)==null?void 0:ut.filter(y=>!y.completed))||[],mt=st[st.length-1];return n.jsxDEV("div",{onClick:()=>Ye(B),className:"relative p-2.5 bg-gray-50 hover:bg-gray-100 rounded-lg cursor-pointer transition-colors border border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[n.jsxDEV("span",{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:["",st.length>0&&n.jsxDEV("span",{className:"text-gray-500",children:["(",st.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:544,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:541,columnNumber:19},void 0),ce(B,"request")&&n.jsxDEV("span",{className:"px-1.5 py-0.5 text-[9px] font-bold text-white bg-red-500 rounded-full",children:"NEW"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:548,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:540,columnNumber:17},void 0),mt?n.jsxDEV("p",{className:"text-xs text-gray-600 line-clamp-1",children:mt.content||" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:552,columnNumber:19},void 0):n.jsxDEV("p",{className:"text-xs text-gray-400 italic",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:556,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:536,columnNumber:15},void 0)})(),((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="manager")&&n.jsxDEV("div",{className:"flex justify-end pt-1",children:n.jsxDEV("button",{onClick:()=>he(B.id,B.name),className:"text-xs text-rose-500 hover:text-rose-600",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:564,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:563,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:505,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:441,columnNumber:7},void 0)};return n.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[n.jsxDEV("div",{className:"border-b border-gray-200",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("nav",{className:"flex space-x-4 md:space-x-8 overflow-x-auto",children:[{id:"planning",label:"",count:We.planning,color:"text-gray-700"},{id:"in-progress",label:"",count:We.inProgress,color:"text-gray-700"},{id:"completed",label:"",count:We.completed,color:"text-gray-700"},{id:"all",label:"",count:i.length,color:"text-gray-600"}].map(B=>n.jsxDEV("button",{onClick:()=>l(B.id),className:ss("py-3 md:py-4 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap",o===B.id?`border-gray-700 ${B.color}`:"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),children:[B.label,n.jsxDEV("span",{className:ss("ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold",o===B.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"),children:B.count},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:601,columnNumber:17},void 0)]},B.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:590,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:583,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex items-center gap-6 mb-3 md:mb-4",children:[n.jsxDEV("div",{className:"hidden sm:flex border border-gray-300 overflow-hidden rounded",children:[n.jsxDEV("button",{onClick:()=>d("grid"),className:ss("px-3 md:px-4 py-2 text-xs md:text-sm",c==="grid"?"bg-gray-100":"hover:bg-gray-50"),children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:615,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>d("list"),className:ss("px-3 md:px-4 py-2 text-xs md:text-sm border-l border-gray-300",c==="list"?"bg-gray-100":"hover:bg-gray-50"),children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:624,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:614,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>{N(null),p(!0)},className:"hidden lg:inline-flex btn btn-primary portrait:px-2 landscape:px-4 py-2 items-center gap-1",children:[n.jsxDEV(rn,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:642,columnNumber:15},void 0),n.jsxDEV("span",{className:"portrait:hidden landscape:inline",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:643,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:635,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:612,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:581,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:580,columnNumber:7},void 0),c==="grid"||window.innerWidth<768?n.jsxDEV("div",{className:"projects-grid grid grid-cols-1 md:grid-cols-2 ipad:grid-cols-2 ipad-lg:grid-cols-2 ipad-xl:grid-cols-3 ipad-2xl:grid-cols-3 2xl:grid-cols-4 gap-3 md:gap-6",children:Fe.map(B=>n.jsxDEV(_t,{project:B},B.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:652,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:650,columnNumber:9},void 0):n.jsxDEV("div",{className:"bg-white border border-gray-200 overflow-hidden",children:n.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsxDEV("thead",{className:"bg-gray-50",children:n.jsxDEV("tr",{children:[n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:660,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:663,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:666,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:669,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:672,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:675,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:659,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:658,columnNumber:13},void 0),n.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:Fe.map(B=>{var De,ge,Ue,st;const ve=Y(B.startDate,B.endDate);return n.jsxDEV("tr",{className:"hover:bg-gray-50",children:[n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{children:[n.jsxDEV("p",{className:"font-medium",children:B.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:687,columnNumber:25},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500",children:B.location},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:688,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:686,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:685,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("p",{className:"text-sm",children:[B.client,""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:692,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:691,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:B.startDate&&B.endDate?n.jsxDEV(n.Fragment,{children:[et(B.startDate,"yyyy.MM.dd (eee)",{locale:kt})," -",n.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:698,columnNumber:27},void 0),et(B.endDate,"yyyy.MM.dd (eee)",{locale:kt})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:696,columnNumber:25},void 0):""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:694,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"flex items-center gap-2",children:[B.status==="planning"&&n.jsxDEV("button",{onClick:()=>it(B),className:"px-2 py-1 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 rounded transition-colors",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:706,columnNumber:27},void 0),n.jsxDEV($e,{project:B},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:713,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:704,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:703,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("button",{onClick:()=>gt(B),className:"px-2.5 py-1 text-xs font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:718,columnNumber:25},void 0),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("div",{className:"w-24 bg-gray-200 h-1 mr-2",children:n.jsxDEV("div",{className:"bg-gray-900 h-1",style:{width:`${ve}%`}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:726,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:725,columnNumber:27},void 0),n.jsxDEV("span",{className:"text-sm",children:[ve,"%"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:731,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:724,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:717,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:716,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4",children:n.jsxDEV("div",{className:"flex flex-col gap-1.5 min-w-[280px]",children:[n.jsxDEV("div",{onClick:()=>xe(B),className:"flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 rounded cursor-pointer transition-colors",children:[n.jsxDEV("span",{className:"text-xs font-medium text-gray-700 whitespace-nowrap flex items-center gap-1",children:["",(((De=B.meetingNotes)==null?void 0:De.length)||0)>0&&n.jsxDEV("span",{className:"text-gray-500",children:["(",(ge=B.meetingNotes)==null?void 0:ge.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:745,columnNumber:31},void 0),ce(B,"meeting")&&n.jsxDEV("span",{className:"px-1 py-0.5 text-[9px] font-bold text-white bg-red-500 rounded",children:"N"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:748,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:742,columnNumber:27},void 0),n.jsxDEV("span",{className:"text-xs text-gray-600 truncate flex-1",children:(Ue=B.meetingNotes)!=null&&Ue.length?((st=B.meetingNotes[B.meetingNotes.length-1])==null?void 0:st.content)||"-":" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:751,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:738,columnNumber:25},void 0),(()=>{var y;const mt=((y=B.customerRequests)==null?void 0:y.filter(w=>!w.completed))||[],ut=mt[mt.length-1];return n.jsxDEV("div",{onClick:()=>Ye(B),className:"flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 rounded cursor-pointer transition-colors",children:[n.jsxDEV("span",{className:"text-xs font-medium text-gray-700 whitespace-nowrap flex items-center gap-1",children:["",mt.length>0&&n.jsxDEV("span",{className:"text-gray-500",children:["(",mt.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:767,columnNumber:35},void 0),ce(B,"request")&&n.jsxDEV("span",{className:"px-1 py-0.5 text-[9px] font-bold text-white bg-red-500 rounded",children:"N"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:770,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:764,columnNumber:31},void 0),n.jsxDEV("span",{className:"text-xs text-gray-600 truncate flex-1",children:ut?ut.content||"-":"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:773,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:760,columnNumber:29},void 0)})(),n.jsxDEV("div",{className:"flex space-x-2 pt-1",children:[n.jsxDEV("button",{onClick:()=>oe(B),className:"text-xs text-gray-600 hover:text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:781,columnNumber:27},void 0),((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="manager")&&n.jsxDEV("button",{onClick:()=>he(B.id,B.name),className:"text-xs text-rose-600 hover:text-rose-700",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:788,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:780,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:736,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:735,columnNumber:21},void 0)]},B.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:684,columnNumber:19},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:680,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:657,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:656,columnNumber:9},void 0),f&&n.jsxDEV(Lu,{project:g,onClose:()=>{p(!1),N(null)},onSave:Le},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:807,columnNumber:9},void 0),A&&U&&n.jsxDEV(Bu,{projectName:U.name,meetingNotes:U.meetingNotes||[],onClose:()=>{x(!1),ee(null)},onSave:_e,onDelete:Be},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:818,columnNumber:9},void 0),_&&U&&n.jsxDEV(Hu,{projectName:U.name,customerRequests:U.customerRequests||[],onClose:()=>{E(!1),ee(null)},onSave:J,onToggleComplete:ke,onDelete:Je},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:831,columnNumber:9},void 0),D&&U&&n.jsxDEV(Uu,{projectName:U.name,entrancePassword:U.entrancePassword||"",sitePassword:U.sitePassword||"",onClose:()=>{O(!1),ee(null)},onSave:W},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:845,columnNumber:9},void 0),ie&&U&&n.jsxDEV(Su,{projectName:U.name,onClose:()=>{X(!1),ee(null)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:858,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:578,columnNumber:5},void 0)};var xa={},_o={exports:{}};(function(t){function s(e){return e&&e.__esModule?e:{default:e}}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(_o);var Tt=_o.exports,va={},Ao={exports:{}},Eo={exports:{}},wo={exports:{}},jo={exports:{}};(function(t){function s(e){"@babel/helpers - typeof";return t.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(jo);var ln=jo.exports,Lo={exports:{}};(function(t){var s=ln.default;function e(r,a){if(s(r)!="object"||!r)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var o=i.call(r,a||"default");if(s(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Lo);var Iu=Lo.exports;(function(t){var s=ln.default,e=Iu;function r(a){var i=e(a,"string");return s(i)=="symbol"?i:i+""}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(wo);var Bo=wo.exports;(function(t){var s=Bo;function e(r,a,i){return(a=s(a))in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,r}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Eo);var Ho=Eo.exports;(function(t){var s=Ho;function e(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),o.push.apply(o,l)}return o}function r(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?e(Object(o),!0).forEach(function(l){s(a,l,o[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(o,l))})}return a}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(Ao);var Ms=Ao.exports,Uo={exports:{}},So={exports:{}};(function(t){function s(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(So);var Mu=So.exports;(function(t){var s=Mu;function e(r,a){if(r==null)return{};var i,o,l=s(r,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)i=c[o],a.indexOf(i)===-1&&{}.propertyIsEnumerable.call(r,i)&&(l[i]=r[i])}return l}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Uo);var ka=Uo.exports,Po={exports:{}};(function(t){function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Po);var Qs=Po.exports,Io={exports:{}};(function(t){var s=Bo;function e(a,i){for(var o=0;o<i.length;o++){var l=i[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,s(l.key),l)}}function r(a,i,o){return i&&e(a.prototype,i),o&&e(a,o),Object.defineProperty(a,"prototype",{writable:!1}),a}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(Io);var Xs=Io.exports,Mo={exports:{}},To={exports:{}};(function(t){function s(e){return t.exports=s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(To);var Tu=To.exports,Ro={exports:{}};(function(t){function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t.exports=s=function(){return!!e},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Ro);var Ru=Ro.exports,Fo={exports:{}},Oo={exports:{}};(function(t){function s(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Oo);var Fu=Oo.exports;(function(t){var s=ln.default,e=Fu;function r(a,i){if(i&&(s(i)=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e(a)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(Fo);var Ou=Fo.exports;(function(t){var s=Tu,e=Ru,r=Ou;function a(i,o,l){return o=s(o),r(i,e()?Reflect.construct(o,l||[],s(i).constructor):o.apply(i,l))}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports})(Mo);var mn=Mo.exports,qo={exports:{}},$o={exports:{}};(function(t){function s(e,r){return t.exports=s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},t.exports.__esModule=!0,t.exports.default=t.exports,s(e,r)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})($o);var qu=$o.exports;(function(t){var s=qu;function e(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),a&&s(r,a)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(qo);var cn=qo.exports;const Sn=Bn(dm);var os={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.views=an.navigate=void 0;an.navigate={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"};an.views={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"};var $u=Tt.default;Object.defineProperty(os,"__esModule",{value:!0});os.views=os.dateRangeFormat=os.dateFormat=os.accessor=os.DayLayoutAlgorithmPropType=void 0;var Wt=$u(Hi),ui=an,pi=Object.keys(ui.views).map(function(t){return ui.views[t]});os.accessor=Wt.default.oneOfType([Wt.default.string,Wt.default.func]);os.dateFormat=Wt.default.any;os.dateRangeFormat=Wt.default.func;os.views=Wt.default.oneOfType([Wt.default.arrayOf(Wt.default.oneOf(pi)),Wt.default.objectOf(function(t,s){var e=pi.indexOf(s)!==-1&&typeof t[s]=="boolean";if(e)return null;for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];return Wt.default.elementType.apply(Wt.default,[t,s].concat(a))})]);os.DayLayoutAlgorithmPropType=Wt.default.oneOfType([Wt.default.oneOf(["overlap","no-overlap"]),Wt.default.func]);var gr={},dn={},Wu=Tt.default;Object.defineProperty(dn,"__esModule",{value:!0});dn.accessor=Wo;dn.wrapAccessor=void 0;var zu=Wu(ln);function Wo(t,s){var e=null;return typeof s=="function"?e=s(t):typeof s=="string"&&(0,zu.default)(t)==="object"&&t!=null&&s in t&&(e=t[s]),e}dn.wrapAccessor=function(s){return function(e){return Wo(e,s)}};var Js={},Ku=Tt.default;Object.defineProperty(Js,"__esModule",{value:!0});Js.DnDContext=void 0;var Yu=Ku(b);Js.DnDContext=Yu.default.createContext();var Gs=Tt.default;Object.defineProperty(gr,"__esModule",{value:!0});gr.default=void 0;var Qu=Gs(Ms),Xu=Gs(Qs),Ju=Gs(Xs),Gu=Gs(mn),Zu=Gs(cn),en=Gs(b),fi=Gs(Sn),gi=dn,ep=Js,zo=function(t){function s(){var e;(0,Xu.default)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=(0,Gu.default)(this,s,[].concat(a)),e.handleResizeUp=function(o){o.button===0&&e.context.draggable.onBeginAction(e.props.event,"resize","UP")},e.handleResizeDown=function(o){o.button===0&&e.context.draggable.onBeginAction(e.props.event,"resize","DOWN")},e.handleResizeLeft=function(o){o.button===0&&e.context.draggable.onBeginAction(e.props.event,"resize","LEFT")},e.handleResizeRight=function(o){o.button===0&&e.context.draggable.onBeginAction(e.props.event,"resize","RIGHT")},e.handleStartDragging=function(o){var l;if(o.button===0){var c=(l=o.target.getAttribute("class"))===null||l===void 0?void 0:l.includes("rbc-addons-dnd-resize");if(!c){var d=(0,Qu.default)({},e.props.event);d.sourceResource=e.props.resource,e.context.draggable.onBeginAction(e.props.event,"move")}}},e}return(0,Zu.default)(s,t),(0,Ju.default)(s,[{key:"renderAnchor",value:function(r){var a=r==="Up"||r==="Down"?"ns":"ew";return en.default.createElement("div",{className:"rbc-addons-dnd-resize-".concat(a,"-anchor"),onMouseDown:this["handleResize".concat(r)]},en.default.createElement("div",{className:"rbc-addons-dnd-resize-".concat(a,"-icon")}))}},{key:"render",value:function(){var r=this.props,a=r.event,i=r.type,o=r.continuesPrior,l=r.continuesAfter,c=r.resizable,d=this.props.children;if(a.__isPreview)return en.default.cloneElement(d,{className:(0,fi.default)(d.props.className,"rbc-addons-dnd-drag-preview")});var f=this.context.draggable,p=f.draggableAccessor,g=f.resizableAccessor,N=p?!!(0,gi.accessor)(a,p):!0;if(!N)return d;var A=c&&(g?!!(0,gi.accessor)(a,g):!0);if(A||N){var x={onMouseDown:this.handleStartDragging,onTouchStart:this.handleStartDragging};if(A){var _=null,E=null;i==="date"?(_=!o&&this.renderAnchor("Left"),E=!l&&this.renderAnchor("Right")):(_=!o&&this.renderAnchor("Up"),E=!l&&this.renderAnchor("Down")),x.children=en.default.createElement("div",{className:"rbc-addons-dnd-resizable"},_,d.props.children,E)}f.dragAndDropAction.interacting&&f.dragAndDropAction.event===a&&(x.className=(0,fi.default)(d.props.className,"rbc-addons-dnd-dragged-event")),d=en.default.cloneElement(d,x)}return d}}])}(en.default.Component);zo.contextType=ep.DnDContext;gr.default=zo;var hr={},Ko={exports:{}};(function(t){var s=ln.default;function e(r,a){if(typeof WeakMap=="function")var i=new WeakMap,o=new WeakMap;return(t.exports=e=function(c,d){if(!d&&c&&c.__esModule)return c;var f,p,g={__proto__:null,default:c};if(c===null||s(c)!="object"&&typeof c!="function")return g;if(f=d?o:i){if(f.has(c))return f.get(c);f.set(c,g)}for(var N in c)N!=="default"&&{}.hasOwnProperty.call(c,N)&&((p=(f=Object.defineProperty)&&Object.getOwnPropertyDescriptor(c,N))&&(p.get||p.set)?f(g,N,p):g[N]=c[N]);return g},t.exports.__esModule=!0,t.exports.default=t.exports)(r,a)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Ko);var Yo=Ko.exports;function Da(t,s,e,r){if(e===void 0&&(e=!1),r===void 0&&(r=!0),t){var a=document.createEvent("HTMLEvents");a.initEvent(s,e,r),t.dispatchEvent(a)}}function tp(t){var s=ns(t,"transitionDuration")||"",e=s.indexOf("ms")===-1?1e3:1;return parseFloat(s)*e}function sp(t,s,e){e===void 0&&(e=5);var r=!1,a=setTimeout(function(){r||Da(t,"transitionend",!0)},s+e),i=or(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(a),i()}}function Va(t,s,e,r){e==null&&(e=tp(t)||0);var a=sp(t,e,r),i=or(t,"transitionend",s);return function(){a(),i()}}var hi={transition:"","transition-duration":"","transition-delay":"","transition-timing-function":""};function bi(t){var s=t.node,e=t.properties,r=t.duration,a=r===void 0?200:r,i=t.easing,o=t.callback,l=[],c={},d="";Object.keys(e).forEach(function(g){var N=e[g];um(g)?d+=g+"("+N+") ":(c[g]=N,l.push(pm(g)))}),d&&(c.transform=d,l.push("transform"));function f(g){g.target===g.currentTarget&&(ns(s,hi),o&&o.call(this,g))}a>0&&(c.transition=l.join(", "),c["transition-duration"]=a/1e3+"s",c["transition-delay"]="0s",c["transition-timing-function"]=i||"linear");var p=Va(s,f,a);return s.clientLeft,ns(s,c),{cancel:function(){p(),ns(s,hi)}}}function Qo(t,s,e,r,a){if(!("nodeType"in t))return bi(t);if(!s)throw new Error("must include properties to animate");return typeof r=="function"&&(a=r,r=""),bi({node:t,properties:s,duration:e,easing:r,callback:a})}function Xo(t,s,e){if(t){if(typeof e>"u")return t.getAttribute(s);!e&&e!==""?t.removeAttribute(s):t.setAttribute(s,String(e))}}function Jo(t){return t?Array.from(t.children):[]}function Go(t){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}return null}var np=Function.prototype.bind.call(Function.prototype.call,[].slice);function Zo(t){return t?np(t.childNodes):[]}function el(t,s){return function(r){var a=r.currentTarget,i=r.target,o=ea(a,t);o.some(function(l){return ta(l,i)})&&s.call(this,r)}}function tl(t,s){return t&&s&&s.parentNode?(s.nextSibling?s.parentNode.insertBefore(t,s.nextSibling):s.parentNode.appendChild(t),t):null}var rp=/^(?:input|select|textarea|button)$/i;function sl(t){return t?rp.test(t.nodeName):!1}function nl(t){return t?!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length):!1}function rl(t,s,e){s===void 0&&(s=null),e===void 0&&(e=null);for(var r=[];t;t=t.nextElementSibling)if(t!==s){if(e&&sa(t,e))break;r.push(t)}return r}function al(t,s){return rl(t,t,s)}function ap(t,s){var e=null,r=[];for(e=t?t[s]:null;e&&e.nodeType!==9;)r.push(e),e=e[s]||null;return r}function il(t){return ap(t,"parentElement")}function ol(t,s){return t&&s?(s.firstElementChild?s.insertBefore(t,s.firstElementChild):s.appendChild(t),t):null}function ll(t){return t&&t.parentNode?(t.parentNode.removeChild(t),t):null}function Ca(t,s){var e=ns(t,"position"),r=e==="absolute",a=t.ownerDocument;if(e==="fixed")return a||document;for(;(t=t.parentNode)&&!fm(t);){var i=r&&ns(t,"position")==="static",o=(ns(t,"overflow")||"")+(ns(t,"overflow-y")||"")+ns(t,"overflow-x");if(!i&&/(auto|scroll)/.test(o)&&(s||lr(t)<t.scrollHeight))return t}return a||document}function ml(t,s){var e=tr(t),r={top:0,left:0};if(t){var a=s||Ca(t),i=gm(a),o=sr(a),l=lr(a,!0);i||(r=tr(a)),e={top:e.top-r.top,left:e.left-r.left,height:e.height,width:e.width};var c=e.height,d=e.top+(i?0:o),f=d+c;o=o>d?d:f>o+l?f-l:o;var p=na(function(){return sr(a,o)});return function(){return ra(p)}}}function cl(t){return rl(t&&t.parentElement?t.parentElement.firstElementChild:null,t)}var ip=/&nbsp;/gi,op=/\xA0/g,lp=/\s+([^\s])/gm;function dl(t,s,e){s===void 0&&(s=!0),e===void 0&&(e=!0);var r="";return t&&(r=(t.textContent||"").replace(ip," ").replace(op," "),s&&(r=r.trim()),e&&(r=r.replace(lp," $1"))),r}function ul(t,s){t.classList?t.classList.toggle(s):aa(t,s)?ia(t,s):oa(t,s)}const mp={addEventListener:Wi,removeEventListener:$i,triggerEvent:Da,animate:Qo,filter:el,listen:or,style:ns,getComputedStyle:qi,attribute:Xo,activeElement:Oi,ownerDocument:Fi,ownerWindow:Ri,requestAnimationFrame:na,cancelAnimationFrame:ra,matches:sa,height:lr,width:Ti,offset:tr,offsetParent:Mi,position:Ii,contains:ta,scrollbarSize:Pi,scrollLeft:Si,scrollParent:Ca,scrollTo:ml,scrollTop:sr,querySelectorAll:ea,closest:Ui,addClass:oa,removeClass:ia,hasClass:aa,toggleClass:ul,transitionEnd:Va,childNodes:Zo,childElements:Jo,nextUntil:al,parents:il,siblings:cl,clear:Go,insertAfter:tl,isInput:sl,isVisible:nl,prepend:ol,remove:ll,text:dl},cp=Object.freeze(Object.defineProperty({__proto__:null,activeElement:Oi,addClass:oa,addEventListener:Wi,animate:Qo,attribute:Xo,cancelAnimationFrame:ra,childElements:Jo,childNodes:Zo,clear:Go,closest:Ui,contains:ta,default:mp,filter:el,getComputedStyle:qi,hasClass:aa,height:lr,insertAfter:tl,isInput:sl,isVisible:nl,listen:or,matches:sa,nextUntil:al,offset:tr,offsetParent:Mi,ownerDocument:Fi,ownerWindow:Ri,parents:il,position:Ii,prepend:ol,querySelectorAll:ea,remove:ll,removeClass:ia,removeEventListener:$i,requestAnimationFrame:na,scrollLeft:Si,scrollParent:Ca,scrollTo:ml,scrollTop:sr,scrollbarSize:Pi,siblings:cl,style:ns,text:dl,toggleClass:ul,transitionEnd:Va,triggerEvent:Da,width:Ti},Symbol.toStringTag,{value:"Module"})),dp=Bn(cp);var Qr={exports:{}};(function(t,s){s.__esModule=!0,s.default=r;var e=Function.prototype.bind.call(Function.prototype.call,[].slice);function r(a,i){return e(a.querySelectorAll(i))}t.exports=s.default})(Qr,Qr.exports);var up=Qr.exports,ls={};const pp=Bn(hm),fp=Bn(bm),gp=Bn(Nm);var un=Tt.default;Object.defineProperty(ls,"__esModule",{value:!0});ls.default=void 0;ls.getBoundsForNode=Ln;ls.getEventNodeFromPoint=fl;ls.getShowMoreNodeFromPoint=gl;ls.isEvent=vp;ls.isShowMore=kp;ls.objectsCollide=Jr;var hp=un(ln),bp=un(Qs),Np=un(Xs),Xr=un(pp),pl=un(fp),yp=un(gp);function Mt(t,s){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return(0,yp.default)(e,t,s,{passive:!1})}function xp(t,s,e){return!t||(0,Xr.default)(t,document.elementFromPoint(s,e))}function fl(t,s){var e=s.clientX,r=s.clientY,a=document.elementFromPoint(e,r);return(0,pl.default)(a,".rbc-event",t)}function gl(t,s){var e=s.clientX,r=s.clientY,a=document.elementFromPoint(e,r);return(0,pl.default)(a,".rbc-show-more",t)}function vp(t,s){return!!fl(t,s)}function kp(t,s){return!!gl(t,s)}function yn(t){var s=t;return t.touches&&t.touches.length&&(s=t.touches[0]),{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY}}var Ni=5,Dp=250,Vp=function(){function t(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.global,a=r===void 0?!1:r,i=e.longPressThreshold,o=i===void 0?250:i,l=e.validContainers,c=l===void 0?[]:l;(0,bp.default)(this,t),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=s,this.globalMouse=!s||a,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Mt("touchmove",function(){},window),this._removeKeyDownListener=Mt("keydown",this._keyListener),this._removeKeyUpListener=Mt("keyup",this._keyListener),this._removeDropFromOutsideListener=Mt("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Mt("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return(0,Np.default)(t,[{key:"on",value:function(e,r){var a=this._listeners[e]||(this._listeners[e]=[]);return a.push(r),{remove:function(){var o=a.indexOf(r);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var o,l=this._listeners[e]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var r=this._selectRect;return!r||!this.selecting?!1:Jr(r,Ln(e))}},{key:"filter",value:function(e){var r=this._selectRect;return!r||!this.selecting?[]:e.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(e,r){var a=this,i=null,o=null,l=null,c=function(g){i=setTimeout(function(){f(),e(g)},a.longPressThreshold),o=Mt("touchmove",function(){return f()}),l=Mt("touchend",function(){return f()})},d=Mt("touchstart",c),f=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return r&&c(r),function(){f(),d()}}},{key:"_addInitialEventListener",value:function(){var e=this,r=Mt("mousedown",function(i){e._removeInitialEventListener(),e._handleInitialEvent(i),e._removeInitialEventListener=Mt("mousedown",e._handleInitialEvent)}),a=Mt("touchstart",function(i){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,i)});this._removeInitialEventListener=function(){r(),a()}}},{key:"_dropFromOutsideListener",value:function(e){var r=yn(e),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:o,clientY:l}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var r=yn(e),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:o,clientY:l}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(this._initialEvent=e,!this.isDetached){var r=yn(e),a=r.clientX,i=r.clientY,o=r.pageX,l=r.pageY,c=this.container(),d,f;if(!(e.which===3||e.button===2||!xp(c,a,i))){if(!this.globalMouse&&c&&!(0,Xr.default)(c,e.target)){var p=Cp(0),g=p.top,N=p.left,A=p.bottom,x=p.right;if(f=Ln(c),d=Jr({top:f.top-g,left:f.left-N,bottom:f.bottom+A,right:f.right+x},{top:l,left:o}),!d)return}var _=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:o,y:l,clientX:a,clientY:i});if(_!==!1)switch(e.type){case"mousedown":this._removeEndListener=Mt("mouseup",this._handleTerminatingEvent),this._onEscListener=Mt("keydown",this._handleTerminatingEvent),this._removeMoveListener=Mt("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=Mt("touchend",this._handleTerminatingEvent),this._removeMoveListener=Mt("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(e){var r=e.target,a=this.validContainers;return!a||!a.length||!r?!0:a.some(function(i){return!!r.closest(i)})}},{key:"_handleTerminatingEvent",value:function(e){var r=this.selecting,a=this._selectRect;if(!r&&e.type.includes("key")&&(e=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!e){var i=!this.container||(0,Xr.default)(this.container(),e.target),o=this._isWithinValidContainer(e);return e.key==="Escape"||!o?this.emit("reset"):!r&&i?this._handleClickEvent(e):r?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var r=yn(e),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<Dp?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:a,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(e){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,a=r.x,i=r.y,o=yn(e),l=o.pageX,c=o.pageY,d=Math.abs(a-l),f=Math.abs(i-c),p=Math.min(l,a),g=Math.min(c,i),N=this.selecting,A=this.isClick(l,c);A&&!N&&!(d||f)||(!N&&!A&&this.emit("selectStart",this._initialEventData),A||(this.selecting=!0,this._selectRect={top:g,left:p,x:l,y:c,right:p+d,bottom:g+f},this.emit("selecting",this._selectRect)),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,r){var a=this._initialEventData,i=a.x,o=a.y,l=a.isTouch;return!l&&Math.abs(e-i)<=Ni&&Math.abs(r-o)<=Ni}}])}();function Cp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,hp.default)(t)!=="object"&&(t={top:t,left:t,right:t,bottom:t}),t}function Jr(t,s){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=Ln(t),a=r.top,i=r.left,o=r.right,l=o===void 0?i:o,c=r.bottom,d=c===void 0?a:c,f=Ln(s),p=f.top,g=f.left,N=f.right,A=N===void 0?g:N,x=f.bottom,_=x===void 0?p:x;return!(d-e<p||a+e>_||l-e<g||i+e>A)}function Ln(t){if(!t.getBoundingClientRect)return t;var s=t.getBoundingClientRect(),e=s.left+yi("left"),r=s.top+yi("top");return{top:r,left:e,right:(t.offsetWidth||0)+e,bottom:(t.offsetHeight||0)+r}}function yi(t){if(t==="left")return window.pageXOffset||document.body.scrollLeft||0;if(t==="top")return window.pageYOffset||document.body.scrollTop||0}ls.default=Vp;var br={},Nr=Tt.default;Object.defineProperty(br,"__esModule",{value:!0});br.default=void 0;var _p=Nr(Ho),xi=Nr(Ms),Ap=Nr(Sn),xn=Nr(b);function $n(t){return typeof t=="string"?t:t+"%"}function Ep(t){var s=t.style,e=t.className,r=t.event,a=t.accessors,i=t.rtl,o=t.selected,l=t.label,c=t.continuesPrior,d=t.continuesAfter,f=t.getters,p=t.onClick,g=t.onDoubleClick,N=t.isBackgroundEvent,A=t.onKeyPress,x=t.components,_=x.event,E=x.eventWrapper,D=a.title(r),O=a.tooltip(r),ie=a.end(r),X=a.start(r),U=f.eventProp(r,X,ie,o),ee=[xn.default.createElement("div",{key:"1",className:"rbc-event-label"},l),xn.default.createElement("div",{key:"2",className:"rbc-event-content"},_?xn.default.createElement(_,{event:r,title:D}):D)],P=s.height,pe=s.top,Ne=s.width,ce=s.xOffset,Y=(0,xi.default)((0,xi.default)({},U.style),{},(0,_p.default)({top:$n(pe),height:$n(P),width:$n(Ne)},i?"right":"left",$n(ce)));return xn.default.createElement(E,Object.assign({type:"time"},t),xn.default.createElement("div",{role:"button",tabIndex:0,onClick:p,onDoubleClick:g,style:Y,onKeyDown:A,title:O?(typeof l=="string"?l+": ":"")+O:void 0,className:(0,Ap.default)(N?"rbc-background-event":"rbc-event",e,U.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},ee))}br.default=Ep;var Vs={},hl=Tt.default;Object.defineProperty(Vs,"__esModule",{value:!0});Vs.dragAccessors=void 0;Vs.eventTimes=Pp;Vs.mergeComponents=Up;Vs.pointInColumn=Sp;var wp=hl(Ms),jp=hl(ka),vi=dn,Lp=b,Bp=["children"];Vs.dragAccessors={start:(0,vi.wrapAccessor)(function(t){return t.start}),end:(0,vi.wrapAccessor)(function(t){return t.end})};function Hp(){for(var t=arguments.length,s=new Array(t),e=0;e<t;e++)s[e]=arguments[e];var r=function(i){var o=i.children,l=(0,jp.default)(i,Bp);return s.filter(Boolean).reduceRight(function(c,d){return(0,Lp.createElement)(d,l,c)},o)};return r}function Up(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,e=Object.keys(s),r=(0,wp.default)({},t);return e.forEach(function(a){r[a]=t[a]?Hp(t[a],s[a]):s[a]}),r}function Sp(t,s){var e=t.left,r=t.right,a=t.top,i=s.x,o=s.y;return i<r+10&&i>e&&o>a}function Pp(t,s,e){var r=s.start(t),a=s.end(t),i=e.eq(r,a,"minutes")&&e.diff(r,a,"minutes")===0;i&&(a=e.add(a,1,"day"));var o=e.diff(r,a,"milliseconds");return{start:r,end:a,duration:o}}var Ip=Yo.default,Ts=Tt.default;Object.defineProperty(hr,"__esModule",{value:!0});hr.default=void 0;var As=Ts(Ms),Mp=Ts(Qs),Tp=Ts(Xs),Rp=Ts(mn),Fp=Ts(cn),Br=dp,Op=Ts(up),zs=Ts(b),qp=Js,Es=Ip(ls),$p=Ts(br),vs=Vs,bl=function(t){function s(){var e;(0,Mp.default)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=(0,Rp.default)(this,s,[].concat(a)),e.handleMove=function(o,l){if(!(0,vs.pointInColumn)(l,o))return e.reset();var c=e.context.draggable.dragAndDropAction.event,d=e.props,f=d.accessors,p=d.slotMetrics,g=p.closestSlotFromPoint({y:o.y-e.eventOffsetTop,x:o.x},l),N=(0,vs.eventTimes)(c,f,e.props.localizer),A=N.duration,x=e.props.localizer.add(g,A,"milliseconds");e.update(c,p.getRange(g,x,!1,!0))},e.handleDropFromOutside=function(o,l){var c=e.props,d=c.slotMetrics,f=c.resource,p=d.closestSlotFromPoint({y:o.y,x:o.x},l),g=e._calculateDnDEnd(p);e.context.draggable.onDropFromOutside({start:p,end:g,allDay:!1,resource:f}),e.reset()},e.handleDragOverFromOutside=function(o,l){var c=e.props.slotMetrics,d=c.closestSlotFromPoint({y:o.y,x:o.x},l),f=e._calculateDnDEnd(d),p=e.context.draggable.dragFromOutsideItem();e.update(p,c.getRange(d,f,!1,!0))},e._calculateDnDEnd=function(o){var l=e.props,c=l.accessors,d=l.slotMetrics,f=l.localizer,p=e.context.draggable.dragFromOutsideItem(),g=(0,vs.eventTimes)(p,c,f),N=g.duration,A=d.nextSlot(o),x=!isNaN(N);if(x){var _=f.add(o,N,"milliseconds");A=new Date(Math.max(_,A))}return A},e.updateParentScroll=function(o,l){setTimeout(function(){var c=(0,Op.default)(l,".rbc-addons-dnd-drag-preview")[0];c&&(c.offsetTop<o.scrollTop?(0,Br.scrollTop)(o,Math.max(c.offsetTop,0)):c.offsetTop+c.offsetHeight>o.scrollTop+o.clientHeight&&(0,Br.scrollTop)(o,Math.min(c.offsetTop-o.offsetHeight+c.offsetHeight,o.scrollHeight)))})},e._selectable=function(){var o=e.ref.current,l=o.children[0],c=!1,d=e._selector=new Es.default(function(){return o.closest(".rbc-time-view")}),f=(0,Br.scrollParent)(o);d.on("beforeSelect",function(p){var g=e.context.draggable.dragAndDropAction;if(!g.action)return!1;if(g.action==="resize")return(0,vs.pointInColumn)((0,Es.getBoundsForNode)(l),p);var N=(0,Es.getEventNodeFromPoint)(l,p);if(!N)return!1;e.eventOffsetTop=p.y-(0,Es.getBoundsForNode)(N).top}),d.on("selecting",function(p){var g=(0,Es.getBoundsForNode)(l),N=e.context.draggable.dragAndDropAction;N.action==="move"&&(e.updateParentScroll(f,l),e.handleMove(p,g)),N.action==="resize"&&(e.updateParentScroll(f,l),e.handleResize(p,g))}),d.on("dropFromOutside",function(p){if(e.context.draggable.onDropFromOutside){var g=(0,Es.getBoundsForNode)(l);(0,vs.pointInColumn)(g,p)&&e.handleDropFromOutside(p,g)}}),d.on("dragOverFromOutside",function(p){var g=e.context.draggable.dragFromOutsideItem?e.context.draggable.dragFromOutsideItem():null;if(g){var N=(0,Es.getBoundsForNode)(l);if(!(0,vs.pointInColumn)(N,p))return e.reset();e.handleDragOverFromOutside(p,N)}}),d.on("selectStart",function(){c=!0,e.context.draggable.onStart()}),d.on("select",function(p){var g=(0,Es.getBoundsForNode)(l);c=!1;var N=e.context.draggable.dragAndDropAction;if(N.action==="resize")e.handleInteractionEnd();else{if(!e.state.event||!(0,vs.pointInColumn)(g,p))return;e.handleInteractionEnd()}}),d.on("click",function(){c&&e.reset(),e.context.draggable.onEnd(null)}),d.on("reset",function(){e.reset(),e.context.draggable.onEnd(null)})},e.handleInteractionEnd=function(){var o=e.props.resource,l=e.state.event;e.reset(),e.context.draggable.onEnd({start:l.start,end:l.end,resourceId:o})},e._teardownSelectable=function(){e._selector&&(e._selector.teardown(),e._selector=null)},e.state={},e.ref=zs.default.createRef(),e}return(0,Fp.default)(s,t),(0,Tp.default)(s,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.event&&this.setState({event:null,top:null,height:null})}},{key:"update",value:function(r,a){var i=a.startDate,o=a.endDate,l=a.top,c=a.height,d=this.state.event;d&&i===d.start&&o===d.end||this.setState({top:l,height:c,event:(0,As.default)((0,As.default)({},r),{},{start:i,end:o})})}},{key:"handleResize",value:function(r,a){var i=this.props,o=i.accessors,l=i.slotMetrics,c=i.localizer,d=this.context.draggable.dragAndDropAction,f=d.event,p=d.direction,g=l.closestSlotFromPoint(r,a),N=(0,vs.eventTimes)(f,o,c),A=N.start,x=N.end,_;if(p==="UP"){var E=c.min(g,l.closestSlotFromDate(x,-1));_=l.getRange(E,x),_=(0,As.default)((0,As.default)({},_),{},{endDate:x})}else if(p==="DOWN"){var D=c.max(g,l.closestSlotFromDate(A));_=l.getRange(A,D),_=(0,As.default)((0,As.default)({},_),{},{startDate:A})}this.update(f,_)}},{key:"renderContent",value:function(){var r=this.props,a=r.children,i=r.accessors,o=r.components,l=r.getters,c=r.slotMetrics,d=r.localizer,f=this.state,p=f.event,g=f.top,N=f.height;if(!p)return a;var A=a.props.children,x=p.start,_=p.end,E,D="eventTimeRangeFormat",O=c.startsBeforeDay(x),ie=c.startsAfterDay(_);return O?D="eventTimeRangeEndFormat":ie&&(D="eventTimeRangeStartFormat"),O&&ie?E=d.messages.allDay:E=d.format({start:x,end:_},D),zs.default.cloneElement(a,{children:zs.default.createElement(zs.default.Fragment,null,A,p&&zs.default.createElement($p.default,{event:p,label:E,className:"rbc-addons-dnd-drag-preview",style:{top:g,height:N,width:100},getters:l,components:o,accessors:(0,As.default)((0,As.default)({},i),vs.dragAccessors),continuesPrior:O,continuesAfter:ie}))})}},{key:"render",value:function(){return zs.default.createElement("div",{ref:this.ref},this.renderContent())}}])}(zs.default.Component);bl.contextType=qp.DnDContext;hr.default=bl;var yr={},Nl={exports:{}},yl={exports:{}},xl={exports:{}};(function(t){function s(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,i=Array(r);a<r;a++)i[a]=e[a];return i}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(xl);var vl=xl.exports;(function(t){var s=vl;function e(r){if(Array.isArray(r))return s(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(yl);var Wp=yl.exports,kl={exports:{}};(function(t){function s(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(kl);var zp=kl.exports,Dl={exports:{}};(function(t){var s=vl;function e(r,a){if(r){if(typeof r=="string")return s(r,a);var i={}.toString.call(r).slice(8,-1);return i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set"?Array.from(r):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(r,a):void 0}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Dl);var Kp=Dl.exports,Vl={exports:{}};(function(t){function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Vl);var Yp=Vl.exports;(function(t){var s=Wp,e=zp,r=Kp,a=Yp;function i(o){return s(o)||e(o)||r(o)||a()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports})(Nl);var Cl=Nl.exports,xr={},vr={},kr={},Rs=Tt.default;Object.defineProperty(kr,"__esModule",{value:!0});kr.default=void 0;var ki=Rs(Ms),Qp=Rs(ka),Xp=Rs(Qs),Jp=Rs(Xs),Gp=Rs(mn),Zp=Rs(cn),vn=Rs(b),ef=Rs(Sn),tf=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],sf=function(t){function s(){return(0,Xp.default)(this,s),(0,Gp.default)(this,s,arguments)}return(0,Zp.default)(s,t),(0,Jp.default)(s,[{key:"render",value:function(){var r=this.props,a=r.style,i=r.className,o=r.event,l=r.selected,c=r.isAllDay,d=r.onSelect,f=r.onDoubleClick,p=r.onKeyPress,g=r.localizer,N=r.continuesPrior,A=r.continuesAfter,x=r.accessors,_=r.getters,E=r.children,D=r.components,O=D.event,ie=D.eventWrapper,X=r.slotStart,U=r.slotEnd,ee=(0,Qp.default)(r,tf);delete ee.resizable;var P=x.title(o),pe=x.tooltip(o),Ne=x.end(o),ce=x.start(o),Y=x.allDay(o),oe=c||Y||g.diff(ce,g.ceil(Ne,"day"),"day")>1,he=_.eventProp(o,ce,Ne,l),Le=vn.default.createElement("div",{className:"rbc-event-content",title:pe||void 0},O?vn.default.createElement(O,{event:o,continuesPrior:N,continuesAfter:A,title:P,isAllDay:Y,localizer:g,slotStart:X,slotEnd:U}):P);return vn.default.createElement(ie,Object.assign({},this.props,{type:"date"}),vn.default.createElement("div",Object.assign({},ee,{style:(0,ki.default)((0,ki.default)({},he.style),a),className:(0,ef.default)("rbc-event",i,he.className,{"rbc-selected":l,"rbc-event-allday":oe,"rbc-event-continues-prior":N,"rbc-event-continues-after":A}),onClick:function(xe){return d&&d(o,xe)},onDoubleClick:function(xe){return f&&f(o,xe)},onKeyDown:function(xe){return p&&p(o,xe)}}),typeof E=="function"?E(Le):Le))}}])}(vn.default.Component);kr.default=sf;var Fs={},nf=Tt.default;Object.defineProperty(Fs,"__esModule",{value:!0});Fs.dateCellSelection=lf;Fs.getSlotAtX=_l;Fs.isSelected=af;Fs.pointInBox=of;Fs.slotWidth=_a;var rf=nf(ym);function af(t,s){return!t||s==null?!1:(0,rf.default)(t,s)}function _a(t,s){var e=t.right-t.left,r=e/s;return r}function _l(t,s,e,r){var a=_a(t,r);return e?r-1-Math.floor((s-t.left)/a):Math.floor((s-t.left)/a)}function of(t,s){var e=s.x,r=s.y;return r>=t.top&&r<=t.bottom&&e>=t.left&&e<=t.right}function lf(t,s,e,r,a){var i=-1,o=-1,l=r-1,c=_a(s,r),d=_l(s,e.x,a,r),f=s.top<e.y&&s.bottom>e.y,p=s.top<t.y&&s.bottom>t.y,g=t.y>s.bottom,N=s.top>t.y,A=e.top<s.top&&e.bottom>s.bottom;return A&&(i=0,o=l),f&&(N?(i=0,o=d):g&&(i=d,o=l)),p&&(i=o=a?l-Math.floor((t.x-s.left)/c):Math.floor((t.x-s.left)/c),f?d<i?i=d:o=d:t.y<e.y?o=l:i=0),{startIdx:i,endIdx:o}}var Aa=Tt.default;Object.defineProperty(vr,"__esModule",{value:!0});vr.default=void 0;var ds=Aa(Hi),Di=Aa(b),mf=Aa(kr),cf=Fs;vr.default={propTypes:{slotMetrics:ds.default.object.isRequired,selected:ds.default.object,isAllDay:ds.default.bool,accessors:ds.default.object.isRequired,localizer:ds.default.object.isRequired,components:ds.default.object.isRequired,getters:ds.default.object.isRequired,onSelect:ds.default.func,onDoubleClick:ds.default.func,onKeyPress:ds.default.func},defaultProps:{segments:[],selected:{}},renderEvent:function(s,e){var r=s.selected;s.isAllDay;var a=s.accessors,i=s.getters,o=s.onSelect,l=s.onDoubleClick,c=s.onKeyPress,d=s.localizer,f=s.slotMetrics,p=s.components,g=s.resizable,N=f.continuesPrior(e),A=f.continuesAfter(e);return Di.default.createElement(mf.default,{event:e,getters:i,localizer:d,accessors:a,components:p,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:N,continuesAfter:A,slotStart:f.first,slotEnd:f.last,selected:(0,cf.isSelected)(e,r),resizable:g})},renderSpan:function(s,e,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(e)/s*100+"%";return Di.default.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}};var Os=Tt.default;Object.defineProperty(xr,"__esModule",{value:!0});xr.default=void 0;var df=Os(Ms),uf=Os(Qs),pf=Os(Xs),ff=Os(mn),gf=Os(cn),hf=Os(Sn),Vi=Os(b),er=Os(vr),Al=function(t){function s(){return(0,uf.default)(this,s),(0,ff.default)(this,s,arguments)}return(0,gf.default)(s,t),(0,pf.default)(s,[{key:"render",value:function(){var r=this,a=this.props,i=a.segments,o=a.slotMetrics.slots,l=a.className,c=1;return Vi.default.createElement("div",{className:(0,hf.default)(l,"rbc-row")},i.reduce(function(d,f,p){var g=f.event,N=f.left,A=f.right,x=f.span,_="_lvl_"+p,E=N-c,D=er.default.renderEvent(r.props,g);return E&&d.push(er.default.renderSpan(o,E,"".concat(_,"_gap"))),d.push(er.default.renderSpan(o,x,_,D)),c=A+1,d},[]))}}])}(Vi.default.Component);Al.defaultProps=(0,df.default)({},er.default.defaultProps);xr.default=Al;var Cs={},El=Tt.default;Object.defineProperty(Cs,"__esModule",{value:!0});Cs.endOfRange=wl;Cs.eventLevels=yf;Cs.eventSegments=Nf;Cs.inRange=xf;Cs.segsOverlap=jl;Cs.sortEvents=Gr;Cs.sortWeekEvents=vf;var Hr=El(Cl),bf=El(xm);function wl(t){var s=t.dateRange,e=t.unit,r=e===void 0?"day":e,a=t.localizer;return{first:s[0],last:a.add(s[s.length-1],1,r)}}function Nf(t,s,e,r){var a=wl({dateRange:s,localizer:r}),i=a.first,o=a.last,l=r.diff(i,o,"day"),c=r.max(r.startOf(e.start(t),"day"),i),d=r.min(r.ceil(e.end(t),"day"),o),f=(0,bf.default)(s,function(g){return r.isSameDate(g,c)}),p=r.diff(c,d,"day");return p=Math.min(p,l),p=Math.max(p-r.segmentOffset,1),{event:t,span:p,left:f+1,right:Math.max(f+p,1)}}function yf(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,e,r,a,i=[],o=[];for(e=0;e<t.length;e++){for(a=t[e],r=0;r<i.length&&jl(a,i[r]);r++);r>=s?o.push(a):(i[r]||(i[r]=[])).push(a)}for(e=0;e<i.length;e++)i[e].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function xf(t,s,e,r,a){var i={start:r.start(t),end:r.end(t)},o={start:s,end:e};return a.inEventRange({event:i,range:o})}function jl(t,s){return s.some(function(e){return e.left<=t.right&&e.right>=t.left})}function vf(t,s,e){var r=(0,Hr.default)(t),a=[],i=[];r.forEach(function(c){var d=s.start(c),f=s.end(c);e.daySpan(d,f)>1?a.push(c):i.push(c)});var o=a.sort(function(c,d){return Gr(c,d,s,e)}),l=i.sort(function(c,d){return Gr(c,d,s,e)});return[].concat((0,Hr.default)(o),(0,Hr.default)(l))}function Gr(t,s,e,r){var a={start:e.start(t),end:e.end(t),allDay:e.allDay(t)},i={start:e.start(s),end:e.end(s),allDay:e.allDay(s)};return r.sortEvents({evtA:a,evtB:i})}var kf=Yo.default,qs=Tt.default;Object.defineProperty(yr,"__esModule",{value:!0});yr.default=void 0;var Wn=qs(Ms),Df=qs(Cl),Vf=qs(Qs),Cf=qs(Xs),_f=qs(mn),Af=qs(cn),zn=qs(b),Ef=qs(xr),tn=kf(ls),wf=Cs,ws=Fs,Kn=Vs,jf=Js,Ll=function(t){function s(){var e;(0,Vf.default)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=(0,_f.default)(this,s,[].concat(a)),e.handleMove=function(o,l,c){if(!(0,ws.pointInBox)(l,o))return e.reset();var d=e.context.draggable.dragAndDropAction.event||c,f=e.props,p=f.accessors,g=f.slotMetrics,N=f.rtl,A=f.localizer,x=(0,ws.getSlotAtX)(l,o.x,N,g.slots),_=g.getDateForSlot(x),E=(0,Kn.eventTimes)(d,p,A),D=E.start,O=E.duration;D=A.merge(_,D);var ie=A.add(D,O,"milliseconds");e.update(d,D,ie)},e.handleDropFromOutside=function(o,l){if(e.context.draggable.onDropFromOutside){var c=e.props,d=c.slotMetrics,f=c.rtl,p=c.localizer,g=(0,ws.getSlotAtX)(l,o.x,f,d.slots),N=d.getDateForSlot(g);e.context.draggable.onDropFromOutside({start:N,end:p.add(N,1,"day"),allDay:!1})}},e.handleDragOverFromOutside=function(o,l){var c=e.context.draggable.dragFromOutsideItem?e.context.draggable.dragFromOutsideItem():null;c&&e.handleMove(o,l,c)},e._selectable=function(){var o=e.ref.current.closest(".rbc-month-row, .rbc-allday-cell"),l=o.closest(".rbc-month-view, .rbc-time-view"),c=o.classList.contains("rbc-month-row"),d=e._selector=new tn.default(function(){return l},{validContainers:(0,Df.default)(c?[]:[".rbc-day-slot",".rbc-allday-cell"])});d.on("beforeSelect",function(f){var p=e.props.isAllDay,g=e.context.draggable.dragAndDropAction.action,N=(0,tn.getBoundsForNode)(o),A=(0,ws.pointInBox)(N,f);return g==="move"||g==="resize"&&(!p||A)}),d.on("selecting",function(f){var p=(0,tn.getBoundsForNode)(o),g=e.context.draggable.dragAndDropAction;g.action==="move"&&e.handleMove(f,p),g.action==="resize"&&e.handleResize(f,p)}),d.on("selectStart",function(){return e.context.draggable.onStart()}),d.on("select",function(f){var p=(0,tn.getBoundsForNode)(o);e.state.segment&&((0,ws.pointInBox)(p,f)?e.handleInteractionEnd():e.reset())}),d.on("dropFromOutside",function(f){if(e.context.draggable.onDropFromOutside){var p=(0,tn.getBoundsForNode)(o);(0,ws.pointInBox)(p,f)&&e.handleDropFromOutside(f,p)}}),d.on("dragOverFromOutside",function(f){if(e.context.draggable.dragFromOutsideItem){var p=(0,tn.getBoundsForNode)(o);e.handleDragOverFromOutside(f,p)}}),d.on("click",function(){return e.context.draggable.onEnd(null)}),d.on("reset",function(){e.reset(),e.context.draggable.onEnd(null)})},e.handleInteractionEnd=function(){var o=e.props,l=o.resourceId,c=o.isAllDay,d=e.state.segment.event;e.reset(),e.context.draggable.onEnd({start:d.start,end:d.end,resourceId:l,isAllDay:c})},e._teardownSelectable=function(){e._selector&&(e._selector.teardown(),e._selector=null)},e.state={},e.ref=zn.default.createRef(),e}return(0,Af.default)(s,t),(0,Cf.default)(s,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.segment&&this.setState({segment:null})}},{key:"update",value:function(r,a,i){var o=(0,wf.eventSegments)((0,Wn.default)((0,Wn.default)({},r),{},{end:i,start:a,__isPreview:!0}),this.props.slotMetrics.range,Kn.dragAccessors,this.props.localizer),l=this.state.segment;l&&o.span===l.span&&o.left===l.left&&o.right===l.right||this.setState({segment:o})}},{key:"handleResize",value:function(r,a){var i=this.context.draggable.dragAndDropAction,o=i.event,l=i.direction,c=this.props,d=c.accessors,f=c.slotMetrics,p=c.rtl,g=c.localizer,N=(0,Kn.eventTimes)(o,d,g),A=N.start,x=N.end,_=(0,ws.getSlotAtX)(a,r.x,p,f.slots),E=f.getDateForSlot(_),D=(0,ws.pointInBox)(a,r);if(l==="RIGHT"){if(D){if(f.last<A)return this.reset();g.eq(g.startOf(x,"day"),x)?x=g.add(E,1,"day"):x=E}else if(g.inRange(A,f.first,f.last)||a.bottom<r.y&&+f.first>+A)x=g.add(f.last,1,"milliseconds");else{this.setState({segment:null});return}var O=d.end(o);x=g.merge(x,O),g.lt(x,A)&&(x=O)}else if(l==="LEFT"){if(D){if(f.first>x)return this.reset();A=E}else if(g.inRange(x,f.first,f.last)||a.top>r.y&&g.lt(f.last,x))A=g.add(f.first,-1,"milliseconds");else{this.reset();return}var ie=d.start(o);A=g.merge(A,ie),g.gt(A,x)&&(A=ie)}this.update(o,A,x)}},{key:"render",value:function(){var r=this.props,a=r.children,i=r.accessors,o=this.state.segment;return zn.default.createElement("div",{ref:this.ref,className:"rbc-addons-dnd-row-body"},a,o&&zn.default.createElement(Ef.default,Object.assign({},this.props,{selected:null,className:"rbc-addons-dnd-drag-row",segments:[o],accessors:(0,Wn.default)((0,Wn.default)({},i),Kn.dragAccessors)})))}}])}(zn.default.Component);Ll.contextType=jf.DnDContext;yr.default=Ll;var ms=Tt.default;Object.defineProperty(va,"__esModule",{value:!0});va.default=qf;var Yn=ms(Ms),Lf=ms(ka),Bf=ms(Qs),Hf=ms(Xs),Uf=ms(mn),Sf=ms(cn),Ur=ms(b),Pf=ms(Sn),If=ms(gr),Mf=ms(hr),Tf=ms(yr),Rf=Vs,Ff=Js,Of=["selectable","elementProps","components"];function qf(t){var s=function(e){function r(){var a;(0,Bf.default)(this,r);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=(0,Uf.default)(this,r,[].concat(o)),a.defaultOnDragOver=function(c){c.preventDefault()},a.handleBeginAction=function(c,d,f){a.setState({event:c,action:d,direction:f});var p=a.props.onDragStart;p&&p({event:c,action:d,direction:f})},a.handleInteractionStart=function(){a.state.interacting===!1&&a.setState({interacting:!0})},a.handleInteractionEnd=function(c){var d=a.state,f=d.action,p=d.event;if(f&&(a.setState({action:null,event:null,interacting:!1,direction:null}),c!=null)){c.event=p;var g=a.props,N=g.onEventDrop,A=g.onEventResize;f==="move"&&N&&N(c),f==="resize"&&A&&A(c)}},a.state={interacting:!1},a}return(0,Sf.default)(r,e),(0,Hf.default)(r,[{key:"getDnDContextValue",value:function(){return{draggable:{onStart:this.handleInteractionStart,onEnd:this.handleInteractionEnd,onBeginAction:this.handleBeginAction,onDropFromOutside:this.props.onDropFromOutside,dragFromOutsideItem:this.props.dragFromOutsideItem,draggableAccessor:this.props.draggableAccessor,resizableAccessor:this.props.resizableAccessor,dragAndDropAction:this.state}}}},{key:"render",value:function(){var i=this.props,o=i.selectable,l=i.elementProps,c=i.components,d=(0,Lf.default)(i,Of),f=this.state.interacting;delete d.onEventDrop,delete d.onEventResize,d.selectable=o?"ignoreEvents":!1,this.components=(0,Rf.mergeComponents)(c,{eventWrapper:If.default,eventContainerWrapper:Mf.default,weekWrapper:Tf.default});var p=this.props.onDropFromOutside?(0,Yn.default)((0,Yn.default)({},l),{},{onDragOver:this.props.onDragOver||this.defaultOnDragOver}):l;d.className=(0,Pf.default)(d.className,"rbc-addons-dnd",!!f&&"rbc-addons-dnd-is-dragging");var g=this.getDnDContextValue();return Ur.default.createElement(Ff.DnDContext.Provider,{value:g},Ur.default.createElement(t,Object.assign({},d,{elementProps:p,components:this.components})))}}])}(Ur.default.Component);return s.defaultProps=(0,Yn.default)((0,Yn.default)({},t.defaultProps),{},{draggableAccessor:null,resizableAccessor:null,resizable:!0}),s}var $f=Tt.default;Object.defineProperty(xa,"__esModule",{value:!0});var Bl=xa.default=void 0,Wf=$f(va);Bl=xa.default=Wf.default;const zf=Bl(vm),Kf=_u;Me.updateLocale("ko",{months:["1","2","3","4","5","6","7","8","9","10","11","12"],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],weekdays:["","","","","","",""],weekdaysShort:["","","","","","",""],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm"},meridiem:t=>t<12?"":"",week:{dow:0,doy:1}});Me.locale("ko");const Yf=km(Me),Ci=["#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6"],Qf=Re.memo(({onSave:t,onCancel:s,processList:e})=>{const[r,a]=b.useState(""),i=()=>{const d=window.innerWidth,f=window.innerHeight;return d>=768&&d<1024||d>=1024&&f>d},[o,l]=b.useState(i);b.useEffect(()=>{const d=()=>l(i());return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const c=o?"16px":"18px";return n.jsxDEV("div",{className:"w-full",onClick:d=>d.stopPropagation(),style:{padding:o?"2px 3px":"6px 0",minHeight:o?"28px":"32px"},children:[n.jsxDEV("input",{type:"text",list:"process-suggestions",value:r,onChange:d=>a(d.target.value),onBlur:()=>{r.trim()?t(r.trim()):s()},onKeyDown:d=>{d.stopPropagation(),d.key==="Enter"?r.trim()?t(r.trim()):s():d.key==="Escape"&&s()},onClick:d=>d.stopPropagation(),placeholder:"",className:"w-full bg-transparent border-none outline-none focus:outline-none focus:ring-0",autoFocus:!0,style:{fontSize:c,fontWeight:500,color:"#374151",padding:0,margin:0,lineHeight:"1.3",caretColor:"#374151"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:133,columnNumber:7},void 0),e&&n.jsxDEV("datalist",{id:"process-suggestions",children:e.map(d=>n.jsxDEV("option",{value:d},d,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:174,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:172,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:128,columnNumber:5},void 0)}),_i=t=>t,wn={"2025-01-01":"","2025-01-28":" ","2025-01-29":"","2025-01-30":" ","2025-03-01":"","2025-03-03":"","2025-05-05":"","2025-05-06":"","2025-06-06":"","2025-08-15":"","2025-10-03":"","2025-10-05":" ","2025-10-06":"","2025-10-07":" ","2025-10-08":"","2025-10-09":"","2025-12-25":"","2026-01-01":"","2026-02-16":" ","2026-02-17":"","2026-02-18":" ","2026-03-01":"","2026-03-02":"","2026-05-05":"","2026-05-24":"","2026-06-06":"","2026-08-15":"","2026-08-17":"","2026-09-24":" ","2026-09-25":"","2026-09-26":" ","2026-10-03":"","2026-10-05":"","2026-10-09":"","2026-12-25":""},Xf=Re.memo(({date:t,label:s,filteredEvents:e,selectedDate:r,user:a,isMobileView:i})=>{const o=Me(t).format("YYYY-MM-DD"),l=wn[o],c=!!wn[o],d=r&&Me(t).isSame(r,"day"),f=e.filter(U=>Me(U.start).isSame(t,"day")),p=f.length,g=f.filter(U=>U.assignedTo&&U.assignedTo.includes((a==null?void 0:a.name)||"")).length,N=p-g,A=s.replace(/^0/,""),x=t.getDay()===0,_=t.getDay()===6;let E="#000000";c||x?E="#dc2626":_&&(E="#3b82f6");const D=Me(t).isSame(Me(),"day");let O="#d1d5db";c||x?O="#fecaca":_&&(O="#bfdbfe");const ie=A.length===2,X=i?{backgroundColor:"transparent",color:E,borderRadius:"50%",width:"30px",height:"30px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:D?"700":"400",border:d?"1px solid #1f2937":"1px solid transparent",boxSizing:"border-box",gap:"1px"}:{color:E,fontWeight:D?"700":"400",paddingLeft:ie?"0px":"4px",...D&&{backgroundColor:O,borderRadius:"50%",width:"21px",height:"21px",display:"inline-flex",alignItems:"center",justifyContent:"center",paddingLeft:"0px"}};return n.jsxDEV("div",{className:i?"flex flex-col items-center":"flex items-center gap-2",style:{overflow:"visible",position:"relative",zIndex:10},children:i?n.jsxDEV("span",{style:X,children:[n.jsxDEV("span",{style:{fontSize:"13px",lineHeight:"1"},children:A},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:335,columnNumber:11},void 0),p>0&&n.jsxDEV("div",{className:"flex gap-0.5",style:{minHeight:"4px",marginTop:"1px"},children:[Array.from({length:g}).map((U,ee)=>n.jsxDEV("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#66BB6A",flexShrink:0}},`user-${ee}`,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:341,columnNumber:17},void 0)),Array.from({length:N}).map((U,ee)=>n.jsxDEV("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#757575",flexShrink:0}},`other-${ee}`,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:354,columnNumber:17},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:338,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:334,columnNumber:9},void 0):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{style:X,children:A},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:371,columnNumber:11},void 0),l&&n.jsxDEV("span",{className:"text-xs font-medium",style:{color:"#ef4444"},children:l},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:373,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:370,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:328,columnNumber:5},void 0)}),Jf=Re.memo(({event:t,user:s,filterProject:e,isEditing:r,editTitle:a,onEditTitleChange:i,onEditSave:o,onEditDelete:l,onEditCancel:c,onHoverDelete:d,onDeleteAction:f,processList:p})=>{const g=e&&e!=="all",N=t.assignedTo||[],[A,x]=b.useState(!1),_=Re.useRef(null),E=()=>{const Z=window.innerWidth,xe=window.innerHeight;return Z>=768&&Z<1024||Z>=1024&&xe>Z},[D,O]=b.useState(E),[ie,X]=b.useState(!1);Re.useRef(null),Re.useRef(!1);const[U,ee]=b.useState(a||""),P=Re.useRef(r);b.useEffect(()=>{r&&!P.current&&a!==void 0&&ee(a),P.current=r},[r,a]);const pe=s!=null&&s.name?s.name.slice(-2):null,Ne=pe&&["",""].includes(pe),ce=pe&&["","",""].includes(pe),Y=(s==null?void 0:s.name)&&(N.includes(s.name)||N.includes("HV LAB")||N.includes("")&&ce||N.includes("")&&Ne);b.useEffect(()=>{const Z=()=>{O(E())};return window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[]);const oe=Z=>{ee(Z)},he=()=>{U!=null&&U.trim()&&o&&(i&&i(U),o()),c&&c()},Le=Z=>{Z.stopPropagation(),(Z.key==="Enter"||Z.key==="Escape")&&Z.currentTarget.blur()};return D?n.jsxDEV("div",{className:"w-full relative block",onMouseEnter:()=>{X(!0),x(!0)},onMouseLeave:()=>{X(!1),x(!1)},style:{padding:g?"2px 3px":"1px 3px",minHeight:g?"28px":"30px",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[A&&g&&d&&!t.isASVisit&&!t.isExpectedPayment&&n.jsxDEV("div",{className:"absolute top-0 right-0 z-20",style:{padding:"4px"},children:n.jsxDEV("button",{ref:_,onMouseDown:Z=>{Z.stopPropagation(),Z.preventDefault(),f&&f(),d()},className:"p-1 text-gray-500 hover:text-red-500",style:{fontSize:"14px",lineHeight:1},title:" (Ctrl+Z )",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:512,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:511,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex items-center justify-between w-full",style:{fontSize:g?"13px":"10px",opacity:.8,marginBottom:"1px",lineHeight:"1.2"},children:[!g&&!t.isASVisit&&t.projectName?n.jsxDEV("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"60%",flexShrink:0},children:["[",_i(t.projectName),"]"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:533,columnNumber:13},void 0):n.jsxDEV("span",{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:543,columnNumber:13},void 0),!g&&N.length>0&&n.jsxDEV("span",{style:{flexShrink:0,fontSize:"10px",marginLeft:"auto"},children:N.map((Z,xe)=>{const Ye=Z==="HV LAB"||Z===""&&Ne||Z===""&&ce||Z===(s==null?void 0:s.name);return n.jsxDEV(Re.Fragment,{children:[n.jsxDEV("span",{style:{fontWeight:Ye?"bold":"normal"},children:Z},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:554,columnNumber:21},void 0),xe<N.length-1&&""]},Z,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:553,columnNumber:19},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:546,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:531,columnNumber:9},void 0),r?n.jsxDEV("input",{type:"text",list:"process-suggestions-edit",value:U,onChange:Z=>oe(Z.target.value),onBlur:he,onKeyDown:Le,onClick:Z=>Z.stopPropagation(),autoFocus:!0,className:"w-full bg-transparent border-none outline-none",style:{fontWeight:500,fontSize:g?"16px":"11px",lineHeight:"1.3",color:"inherit",padding:0,margin:0}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:567,columnNumber:11},void 0):n.jsxDEV("div",{style:{fontWeight:500,fontSize:g?"16px":"11px",lineHeight:"1.3",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",wordBreak:"keep-all",textOverflow:"ellipsis",textDecoration:Y?"underline":"none",textDecorationColor:Y?"#e57373":"transparent",textDecorationThickness:"2px",textUnderlineOffset:"2px"},title:t.title,children:t.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:587,columnNumber:11},void 0),ie&&n.jsxDEV("div",{className:"absolute z-50 bg-gray-900 text-white text-xs rounded p-2 shadow-lg",style:{bottom:"100%",left:"0",marginBottom:"4px",minWidth:"200px",maxWidth:"300px"},children:[n.jsxDEV("div",{className:"font-semibold mb-1",children:t.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:621,columnNumber:13},void 0),t.projectName&&n.jsxDEV("div",{className:"opacity-90",children:[": ",t.projectName]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:623,columnNumber:15},void 0),N.length>0&&n.jsxDEV("div",{className:"opacity-90 mt-1",children:[": ",N.join(", ")]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:626,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:611,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:497,columnNumber:7},void 0):n.jsxDEV("div",{className:"flex items-center justify-between w-full gap-1.5 overflow-hidden relative",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{minHeight:g?"32px":"18px",padding:g?"6px 0":"0"},children:[n.jsxDEV("div",{className:"flex items-center gap-1.5 overflow-hidden flex-1",children:[!g&&!t.isASVisit&&t.projectName&&n.jsxDEV("span",{className:"text-xs opacity-70 flex-shrink-0",children:["[",_i(t.projectName),"]"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:648,columnNumber:11},void 0),r?n.jsxDEV("input",{type:"text",list:"process-suggestions-edit",value:U,onChange:Z=>oe(Z.target.value),onBlur:he,onKeyDown:Le,onClick:Z=>Z.stopPropagation(),autoFocus:!0,className:"font-medium bg-transparent border-none outline-none flex-1",style:{fontSize:g?"18px":"12px",color:"inherit",padding:0,margin:0,minWidth:0}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:653,columnNumber:11},void 0):n.jsxDEV("span",{className:"font-medium truncate",style:{fontSize:g?"18px":"12px",textDecoration:Y?"underline":"none",textDecorationColor:Y?"#e57373":"transparent",textDecorationThickness:"2px",textUnderlineOffset:"2px"},children:t.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:672,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:645,columnNumber:7},void 0),!g&&N.length>0&&n.jsxDEV("span",{className:"opacity-80 flex-shrink-0 ml-auto",style:{fontSize:"11px"},children:N.map((Z,xe)=>{const Ye=Z==="HV LAB"||Z===""&&Ne||Z===""&&ce||Z===(s==null?void 0:s.name);return n.jsxDEV(Re.Fragment,{children:[n.jsxDEV("span",{className:Ye?"font-bold":"",children:Z},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:699,columnNumber:17},void 0),xe<N.length-1&&""]},Z,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:698,columnNumber:15},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:688,columnNumber:9},void 0),A&&g&&d&&!t.isASVisit&&!t.isExpectedPayment&&n.jsxDEV("div",{className:"absolute top-1/2 -translate-y-1/2 right-0 z-20",style:{padding:"2px"},children:n.jsxDEV("button",{ref:_,onMouseDown:Z=>{Z.stopPropagation(),Z.preventDefault(),f&&f(),d()},className:"p-1 text-gray-500 hover:text-red-500",style:{fontSize:"14px",lineHeight:1},title:" (Ctrl+Z )",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:711,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:710,columnNumber:9},void 0),p&&r&&n.jsxDEV("datalist",{id:"process-suggestions-edit",children:p.map(Z=>n.jsxDEV("option",{value:Z},Z,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:733,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:731,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:636,columnNumber:5},void 0)}),Gf=()=>{const{schedules:t,setSchedules:s,addSchedule:e,deleteSchedule:r,loadSchedulesFromAPI:a,addScheduleToAPI:i,updateScheduleInAPI:o,deleteScheduleFromAPI:l,asRequests:c,updateASRequestInAPI:d,loadASRequestsFromAPI:f,constructionPayments:p,updateConstructionPaymentInAPI:g}=Us(),{user:N}=Is(),A=fr(),[x,_]=b.useState(!1);b.useEffect(()=>{const u=()=>{const V=window.innerHeight>window.innerWidth&&window.innerWidth>=1024;_(V)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const E=u=>!u||u==="-"?"":x?u:Yr(u),D=N!=null&&N.name?N.name.slice(-2):null;console.log(" Current user:",N==null?void 0:N.name,"Short name:",D);const O=Re.useRef(!1);b.useEffect(()=>{O.current||(O.current=!0,a().catch(u=>{console.error("Failed to load schedules:",u),q.error("  ")}))},[a]);const[ie,X]=b.useState([]);b.useEffect(()=>{const u=async V=>{if((V.ctrlKey||V.metaKey)&&V.key==="z"){const I=V.target;if(I.tagName==="INPUT"||I.tagName==="TEXTAREA"||I.isContentEditable)return;if(ie.length>0){V.preventDefault();const L=ie[ie.length-1];try{const K=L.type==="as_visit"||L.type==="expected_payment"?"other":L.type;await i({id:"",title:L.originalTitle||L.title,start:L.start,end:L.end,type:K,project:L.originalProjectName||L.projectName,attendees:L.assignedTo||[],time:L.time,description:L.description}),X(te=>te.slice(0,-1)),q.success(" ")}catch(K){console.error("  :",K),q.error("  ")}}}};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[ie,i]);const[U,ee]=b.useState([]),[P,pe]=b.useState(!1),[Ne,ce]=b.useState(""),[Y,oe]=b.useState(null),[he,Le]=b.useState(""),[Z,xe]=b.useState(!1),[Ye,gt]=b.useState(null),[it,W]=b.useState(null),_e=b.useCallback(async()=>{xe(!0);try{const u=await ue.get("/processes");ee(u.data)}catch(u){console.error("   :",u),ee([])}finally{xe(!1)}},[]);b.useEffect(()=>{_e()},[_e]);const J=b.useMemo(()=>U.length>0?U.map(u=>u.name):Kf,[U]),ke=async()=>{if(Ne.trim())try{const u=await fetch("/api/processes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Ne.trim()})});if(u.ok)ce(""),_e(),q.success(" ");else{const V=await u.json();q.error(V.error||"  ")}}catch(u){console.error("  :",u),q.error("  ")}},Be=async()=>{if(!(!Y||!he.trim()))try{const u=await fetch(`/api/processes/${Y.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:he.trim()})});if(u.ok)oe(null),Le(""),_e(),q.success(" ");else{const V=await u.json();q.error(V.error||"  ")}}catch(u){console.error("  :",u),q.error("  ")}},Je=async u=>{if(confirm("   ?"))try{const V=await fetch(`/api/processes/${u}`,{method:"DELETE"});if(V.ok)_e(),q.success(" ");else{const I=await V.json();q.error(I.error||"  ")}}catch(V){console.error("  :",V),q.error("  ")}},$e=u=>{gt(u)},tt=(u,V)=>{u.preventDefault(),Ye!==null&&Ye!==V&&W(V)},Fe=async()=>{if(Ye!==null&&it!==null&&Ye!==it){const u=[...U],[V]=u.splice(Ye,1);u.splice(it,0,V),ee(u);try{(await fetch("/api/processes/reorder/bulk",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:u.map(L=>({id:L.id}))})})).ok||(_e(),q.error("  "))}catch(I){console.error("  :",I),_e(),q.error("  ")}}gt(null),W(null)},We=u=>{const V=A.findIndex(I=>I.name===u);return V>=0?Ci[V%Ci.length]:"#e8e2ea"},_t=A.map(u=>u.name),B=t.filter(u=>!u.asRequestId).filter(u=>(N==null?void 0:N.name)===""?u.project===""||_t.includes(u.project):!0).map(u=>{const V=A.find(se=>se.name===u.project);let I=u.project===""?"[]":u.project;if(V&&u.project!==""){const se=V.name.length>2?V.name.substring(0,2):V.name,ze=(V.location||"").match(/([A-Za-z]?\d+)/),Bt=ze?ze[1]:"";I=Bt?`${se}_${Bt}`:se}const L=u.time,K=L&&L!=="-"?` - ${E(L)}`:"",te=u.attendees||[];return{id:u.id,title:u.title+K,originalTitle:u.title,start:u.start,end:u.end,projectId:(V==null?void 0:V.id)||"",projectName:I||"",originalProjectName:u.project||"",type:u.type||"other",phase:"",assignedTo:te,priority:"medium",allDay:!L||L==="-",color:We(u.project||""),isASVisit:!1,time:L,description:u.description}}),ve=c.filter(u=>u.scheduledVisitDate).filter(u=>(N==null?void 0:N.name)===""?_t.includes(u.project):!0).map(u=>{const V=u.scheduledVisitTime,I=V&&V!=="-"?` - ${E(V)}`:"",L=A.find(se=>se.name===u.project);let K=u.project;if(L){const se=L.name.length>2?L.name.substring(0,2):L.name,ze=(L.location||"").match(/([A-Za-z]?\d+)/),Bt=ze?ze[1]:"";K=Bt?`${se}_${Bt}`:se}const te=`[AS] ${K}`;return{id:`as-${u.id}`,title:te+I,originalTitle:te,start:u.scheduledVisitDate,end:u.scheduledVisitDate,projectId:(L==null?void 0:L.id)||"",projectName:K,originalProjectName:u.project,type:"as_visit",phase:"",assignedTo:u.assignedTo?Array.isArray(u.assignedTo)?u.assignedTo:u.assignedTo.split(",").map(se=>se.trim()):[],priority:"high",allDay:!V||V==="-",color:"#FEF3C7",isASVisit:!0,time:V,description:u.description}}),De=(N==null?void 0:N.role)==="manager"?p.flatMap(u=>{var te,se,qe,ze,Bt,pt,Ge,At;const V=A.find(qt=>qt.name===u.project);if(!V){const qt=[],Ze=u.totalAmount+(u.vatType==="percentage"?u.totalAmount*(u.vatPercentage/100):u.vatAmount),Ht=new Set(u.payments.flatMap(Ft=>{var dt;return((dt=Ft.type)==null?void 0:dt.split(", ").map(ht=>ht.trim()))||[]}));return!Ht.has("")&&((te=u.expectedPaymentDates)!=null&&te.contract)&&qt.push({id:`payment-${u.id}-contract`,title:"[] ",originalTitle:"[] ",start:new Date(u.expectedPaymentDates.contract),end:new Date(u.expectedPaymentDates.contract),projectId:"",projectName:u.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(Ze*.1).toLocaleString()}`}),!Ht.has("")&&((se=u.expectedPaymentDates)!=null&&se.start)&&qt.push({id:`payment-${u.id}-start`,title:"[] ",originalTitle:"[] ",start:new Date(u.expectedPaymentDates.start),end:new Date(u.expectedPaymentDates.start),projectId:"",projectName:u.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(Ze*.4).toLocaleString()}`}),!Ht.has("")&&((qe=u.expectedPaymentDates)!=null&&qe.middle)&&qt.push({id:`payment-${u.id}-middle`,title:"[] ",originalTitle:"[] ",start:new Date(u.expectedPaymentDates.middle),end:new Date(u.expectedPaymentDates.middle),projectId:"",projectName:u.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(Ze*.4).toLocaleString()}`}),!Ht.has("")&&((ze=u.expectedPaymentDates)!=null&&ze.final)&&qt.push({id:`payment-${u.id}-final`,title:"[] ",originalTitle:"[] ",start:new Date(u.expectedPaymentDates.final),end:new Date(u.expectedPaymentDates.final),projectId:"",projectName:u.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(Ze*.1).toLocaleString()}`}),qt}if(!V.startDate||!V.endDate)return[];const I=u.totalAmount+(u.vatType==="percentage"?u.totalAmount*(u.vatPercentage/100):u.vatAmount),L=new Set(u.payments.flatMap(qt=>{var Ze;return((Ze=qt.type)==null?void 0:Ze.split(", ").map(Ht=>Ht.trim()))||[]})),K=[];return!L.has("")&&((Bt=u.expectedPaymentDates)!=null&&Bt.contract)&&K.push({id:`payment-${u.id}-contract`,title:"[] ",originalTitle:"[] ",start:new Date(u.expectedPaymentDates.contract),end:new Date(u.expectedPaymentDates.contract),projectId:V.id||"",projectName:u.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(I*.1).toLocaleString()}`}),!L.has("")&&((pt=u.expectedPaymentDates)!=null&&pt.start)&&K.push({id:`payment-${u.id}-start`,title:"[] ",originalTitle:"[] ",start:new Date(u.expectedPaymentDates.start),end:new Date(u.expectedPaymentDates.start),projectId:V.id||"",projectName:u.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(I*.4).toLocaleString()}`}),!L.has("")&&((Ge=u.expectedPaymentDates)!=null&&Ge.middle)&&K.push({id:`payment-${u.id}-middle`,title:"[] ",originalTitle:"[] ",start:new Date(u.expectedPaymentDates.middle),end:new Date(u.expectedPaymentDates.middle),projectId:V.id||"",projectName:u.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(I*.4).toLocaleString()}`}),!L.has("")&&((At=u.expectedPaymentDates)!=null&&At.final)&&K.push({id:`payment-${u.id}-final`,title:"[] ",originalTitle:"[] ",start:new Date(u.expectedPaymentDates.final),end:new Date(u.expectedPaymentDates.final),projectId:V.id||"",projectName:u.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(I*.1).toLocaleString()}`}),K}):[],ge=[...B,...ve,...De],Ue=b.useCallback(u=>{if(!(N!=null&&N.name))return!1;const V=u.assignedTo||[],I=N.name.slice(-2),L=["",""].includes(I),K=["","",""].includes(I);return V.includes(N.name)||V.includes("HV LAB")||V.includes("")&&K||V.includes("")&&L},[N==null?void 0:N.name]),st=(u,V)=>{if(!V)return[...u].sort((K,te)=>{const se=Ue(K),qe=Ue(te);return se&&!qe?-1:!se&&qe?1:K.start.getTime()-te.start.getTime()});const I=new Map;u.forEach(K=>{const te=K.time&&K.time!=="-"&&K.time.trim()!=="";if(K.isASVisit||K.isExpectedPayment||te){const se=`single_${K.id}`;I.set(se,[K])}else{const se=K.start.toISOString().split("T")[0],qe=[...K.assignedTo].sort().join(","),ze=`${se}_${K.projectName}_${qe}`;I.has(ze)||I.set(ze,[]),I.get(ze).push(K)}});const L=[];return I.forEach(K=>{if(K.length===1)L.push(K[0]);else{const te=K[0],se=K.map(Ge=>Ge.originalTitle||Ge.title),qe=[...new Set(se)],ze=K.map(Ge=>{const At=Ge.originalTitle||Ge.title;return At.startsWith(te.projectName+" - ")?At.substring(te.projectName.length+3):At}),Bt=[...new Set(ze)],pt={...te,id:K[0].id,title:Bt.join(", "),originalTitle:qe.join(", "),description:K.map(Ge=>Ge.description||Ge.originalTitle||Ge.title).join(`
`),assignedTo:[...new Set(K.flatMap(Ge=>Ge.assignedTo))],mergedEventIds:K.map(Ge=>Ge.id)};L.push(pt)}}),L.sort((K,te)=>{const se=Ue(K),qe=Ue(te);return se&&!qe?-1:!se&&qe?1:K.start.getTime()-te.start.getTime()})},[mt,ut]=b.useState("month"),[y,w]=b.useState(new Date),[T,ne]=b.useState(!1),[z,G]=b.useState(null),[fe,Ae]=b.useState(null),Oe=`schedule_filterProject_${(N==null?void 0:N.id)||"guest"}`,[le,Rt]=b.useState(()=>{const u=localStorage.getItem(Oe);return u||((N==null?void 0:N.name)===""&&A.length>0?A[0].name:"all")});b.useEffect(()=>{localStorage.setItem(Oe,le)},[le,Oe]),b.useCallback(()=>{document.body.classList.add("printing-schedule");const u=le==="all"?" ":le,V=Me(y).format("YYYY MM"),I=document.title;document.title=`${u} - ${V} `,setTimeout(()=>{window.print(),document.body.classList.remove("printing-schedule"),document.title=I},100)},[le,y]);const ot=st(ge,le==="all"),[R,Pe]=b.useState(window.innerWidth<768?new Date:null),[C,ae]=b.useState(null),de=Re.useRef(null),ye=Re.useRef(!1),[Q,Qe]=b.useState(null),nt=Re.useRef(!1),ct=Re.useRef(!1);b.useEffect(()=>{const u=L=>{L.key==="Control"&&(ct.current=!0)},V=L=>{L.key==="Control"&&(ct.current=!1)},I=()=>{ct.current=!1};return window.addEventListener("keydown",u),window.addEventListener("keyup",V),window.addEventListener("blur",I),()=>{window.removeEventListener("keydown",u),window.removeEventListener("keyup",V),window.removeEventListener("blur",I)}},[]),b.useEffect(()=>{if(!C)return;let u=null;const V=te=>{te.preventDefault(),te.dataTransfer&&(te.dataTransfer.dropEffect="copy")},I=te=>{te.preventDefault(),te.dataTransfer&&(te.dataTransfer.dropEffect="copy");const qe=te.target.closest(".rbc-day-bg");u&&u!==qe&&(u.style.backgroundColor=""),qe&&(qe.style.backgroundColor="rgba(59, 130, 246, 0.15)",u=qe)},L=()=>{u&&(u.style.backgroundColor="",u=null)},K=te=>{te.preventDefault(),u&&(u.style.backgroundColor="",u=null)};return document.addEventListener("dragenter",V),document.addEventListener("dragover",I),document.addEventListener("dragend",L),document.addEventListener("drop",K),()=>{document.removeEventListener("dragenter",V),document.removeEventListener("dragover",I),document.removeEventListener("dragend",L),document.removeEventListener("drop",K),u&&(u.style.backgroundColor="")}},[C]);const[jt,Lt]=b.useState(null),[St,Jt]=b.useState(null),[cs,zt]=b.useState(""),[pn,fn]=b.useState(!1),[_s,bs]=b.useState(null),[$s,h]=b.useState(!1),[H,m]=b.useState(""),[v,k]=b.useState(null),[j,F]=b.useState({x:0,y:0}),[S,M]=b.useState({x:0,y:0}),[$,Ee]=b.useState(!1),je=8;b.useEffect(()=>{if(!v)return;const u=I=>{F({x:I.clientX,y:I.clientY});const L=Math.abs(I.clientX-S.x),K=Math.abs(I.clientY-S.y);(L>je||K>je)&&Ee(!0)},V=()=>{k(null),Ee(!1)};return window.addEventListener("mousemove",u),window.addEventListener("mouseup",V),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",V)}},[v,S]);const Ve=Re.useRef(!1),re=b.useCallback(async({event:u,start:V,end:I})=>{if(u.isASVisit||u.isExpectedPayment){q.error("    ");return}const L=V instanceof Date?V:new Date(V),K=I instanceof Date?I:new Date(I);if(ct.current)try{const se=u.mergedEventIds||[u.id],qe=t.filter(ze=>se.includes(ze.id));for(const ze of qe)await i({id:Date.now().toString()+Math.random().toString(36).substr(2,9),title:ze.title,start:L,end:K,project:ze.project,attendees:ze.attendees||[],time:ze.time,priority:ze.priority||"medium"});q.success(" ")}catch(se){console.error("  :",se),q.error("  ")}else{const se=u.mergedEventIds||[u.id];try{for(const qe of se)await o(qe,{start:L,end:K})}catch(qe){console.error("  :",qe),q.error("  "),a()}}},[t,o,i,a]),Ie=b.useCallback(({event:u,action:V})=>{var L;if(u.isASVisit||u.isExpectedPayment||u.id==="__inline_add__")return;const I=document.querySelectorAll(".rbc-event");for(const K of I)if((L=K.textContent)!=null&&L.includes(u.originalTitle||u.title)){const te=K.getBoundingClientRect();M({x:te.left,y:te.top}),F({x:te.left,y:te.top});break}Ee(!1),k(u)},[]),Nt=b.useCallback(async(u,V,I=!1)=>{if(le==="all"){q.error("  ");return}const L={id:"",title:u,start:V,end:V,project:le,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};try{await i(L)}catch(K){console.error("  :",K),q.error("  ")}},[le,i,N]),rt=b.useCallback(({start:u})=>{const V=C||de.current;V&&le!=="all"&&(ye.current=!0,nt.current=!0,requestAnimationFrame(()=>{nt.current=!1}),Lt(null),Jt(null),zt(""),Nt(V,u),requestAnimationFrame(()=>{ae(null),de.current=null,ye.current=!1}))},[C,le,Nt]),Kt=b.useCallback(()=>{const u=C||de.current;return u?{title:u}:null},[C]),yt=b.useCallback(async u=>{if(!u.trim()||!jt||le==="all"){Lt(null);return}const V=jt;Lt(null);const I={id:"",title:u.trim(),start:V,end:V,type:"construction",project:le,location:"",attendees:N!=null&&N.name?[N.name]:[],description:""};try{await i(I)}catch(L){console.error("  :",L),q.error("  ")}},[jt,le,i,N]),Yt=b.useCallback(()=>{Lt(null)},[]),Gt=b.useCallback(async()=>{var u;if(!St||!cs.trim()){Jt(null),zt("");return}try{const V=((u=St.mergedEventIds)==null?void 0:u[0])||St.id;await o(V,{title:cs.trim()})}catch(V){console.error("  :",V),q.error("  ")}Jt(null),zt("")},[St,cs,o]),lt=b.useCallback(async u=>{X(I=>[...I,u]);const V=u.mergedEventIds||[u.id];q.success(" (Ctrl+Z )",{duration:2e3});try{await Promise.all(V.map(I=>l(I)))}catch(I){console.error("  :",I),q.error("  "),X(L=>L.slice(0,-1))}Jt(null),zt("")},[l]),we=le==="all"?ot:ot.filter(u=>(u.originalProjectName||u.projectName)===le),me=Re.useMemo(()=>{const u=le!=="all",V=new Map;we.forEach(L=>{const K=Me(L.start).format("YYYY-MM-DD");V.has(K)||V.set(K,[]),V.get(K).push(L)});const I=[];return V.forEach(L=>{if(u)L.forEach((K,te)=>{const se=Me(K.start).startOf("day").add(te,"milliseconds").toDate();I.push({...K,start:se,allDay:!1})});else{const K=[],te=[];L.forEach(se=>{Ue(se)?K.push(se):te.push(se)}),K.forEach((se,qe)=>{const ze=Me(se.start).startOf("day").add(qe,"milliseconds").toDate();I.push({...se,start:ze,allDay:!1})}),te.forEach((se,qe)=>{const ze=Me(se.start).startOf("day").add(1e3+qe,"milliseconds").toDate();I.push({...se,start:ze,allDay:!1})})}}),I.sort((L,K)=>L.start.getTime()-K.start.getTime())},[we,Ue,le]),He=Re.useMemo(()=>{if(jt&&le!=="all"){const u=Me(jt).format("YYYY-MM-DD"),V=me.filter(te=>Me(te.start).format("YYYY-MM-DD")===u),I=V.length>0?Math.max(...V.map(te=>te.start.getTime())):Me(jt).startOf("day").valueOf(),L=new Date(I+1),K={id:"__inline_add__",title:"",start:L,end:L,projectId:"",projectName:le,type:"other",phase:"",assignedTo:[],priority:"medium",allDay:!1};return[...me,K]}return me},[me,jt,le]);b.useEffect(()=>{(N==null?void 0:N.name)===""&&A.length>0&&(le==="all"||!A.find(u=>u.name===le))&&Rt(A[0].name)},[A,N]),b.useEffect(()=>{const u=()=>{document.querySelectorAll(".rbc-show-more, .rbc-button-link").forEach(se=>{se.style.display="none",se.style.visibility="hidden",se.style.pointerEvents="none"}),document.querySelectorAll('.rbc-overlay, .rbc-overlay-header, .rbc-popup, [class*="rbc-overlay"]').forEach(se=>{se.style.display="none",se.style.visibility="hidden",se.style.opacity="0",se.style.pointerEvents="none",se.style.position="absolute",se.style.left="-9999px",se.style.top="-9999px",se.style.zIndex="-1"})};u();const V=new MutationObserver(u),I=document.querySelector(".rbc-calendar");I&&V.observe(I,{childList:!0,subtree:!0});const L=new MutationObserver(u);return L.observe(document.body,{childList:!0,subtree:!0}),()=>{V.disconnect(),L.disconnect()}},[mt,y]);const[Se,Xe]=b.useState({date:null,projectId:"",title:""}),Ce=Re.useRef(!1),Te=Re.useRef(null),at=u=>{if(Ve.current){Ve.current=!1;return}if(u.id==="__inline_add__")return;Ce.current=!0,Te.current&&clearTimeout(Te.current);const V=le!=="all",I=window.innerWidth<768;if(V&&!I&&!u.isASVisit&&!u.isExpectedPayment)Lt(null),Jt(u),zt(u.originalTitle||u.title);else{const L={...u,title:u.originalTitle||u.title};Ae(null),G(L),ne(!0)}Te.current=setTimeout(()=>{Ce.current=!1,Te.current=null},300)},Qt=u=>{const V=window.innerWidth,I=V<768,L=V>=768&&V<1024,K=le==="all";if(nt.current)return;if(I){if(u.start){Pe(u.start);const se=document.querySelector(".md\\:hidden.mt-3.bg-white");se&&se.scrollIntoView({behavior:"smooth",block:"nearest"})}return}const te=u.action==="click"||u.action==="select";if(!(L&&!te)){if(K){Ce.current=!1,Jt(null),zt(""),Lt(null),Ae(u),G(null),ne(!0);return}if(!Ce.current){if(Q){Nt(Q,u.start,!0);return}Jt(null),zt(""),Lt(u.start)}}},Pt=async()=>{if(!Se.projectId||!Se.title.trim()){alert("  ");return}const u=A.find(V=>V.id===Se.projectId);if(!(!u||!Se.date))try{await i({id:Date.now().toString(),title:Se.title,start:Se.date,end:Se.date,type:"other",project:u.name,location:"",attendees:[],description:""}),Xe({date:null,projectId:"",title:""}),Pe(null)}catch(V){console.error("Failed to add schedule:",V),q.error("  ")}},Pn=u=>{if(u.id==="__inline_add__")return{style:{backgroundColor:"#ffffff",borderRadius:"6px",color:"#1f2937",border:"1px solid #d1d5db",display:"block",fontSize:"0.8125rem",padding:"0",fontWeight:"400",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",overflow:"visible"}};let V=u.color||"#E0E7FF",I="#1f2937";if(u.isASVisit)V="#E8F5E9",I="#1f2937";else{const L=u.assignedTo&&u.assignedTo.includes("HV LAB"),K=u.assignedTo&&u.assignedTo.includes("")&&D&&["",""].includes(D),te=u.assignedTo&&u.assignedTo.includes("")&&D&&["","",""].includes(D);u.assignedTo&&u.assignedTo.includes((N==null?void 0:N.name)||"")||L||K||te?(V="#FEF3C7",I="#1f2937"):u.color||(V="#e8e2ea")}return{style:{backgroundColor:V,"--event-bg-color":V,borderRadius:"6px",color:I,border:"none",display:"block",fontSize:"0.8125rem",padding:"4px 8px",fontWeight:"500",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",overflow:"hidden"}}},wa=Re.useCallback(u=>{const V=Me(u).format("YYYY-MM-DD"),I=!!wn[V],L=R&&Me(u).isSame(R,"day"),K=window.innerWidth<768;let te="";L&&(te+="selected-date "),I&&(te+="holiday-date ");const se=K?{backgroundColor:"transparent",background:"transparent"}:{};return{className:te.trim(),style:se}},[R]),[Zt,Hl]=b.useState(window.innerWidth<768);b.useEffect(()=>{const u=()=>{Hl(window.innerWidth<768)};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),b.useEffect(()=>{const u=()=>{const V=R||new Date;Ae({start:V,end:V}),G(null),ne(!0)};return window.addEventListener("headerAddButtonClick",u),()=>window.removeEventListener("headerAddButtonClick",u)},[R]);const ja=Re.useCallback(({date:u,label:V})=>n.jsxDEV(Xf,{date:u,label:V,filteredEvents:He,selectedDate:R,user:N,isMobileView:Zt},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2331,columnNumber:7},void 0),[He,R,N,Zt]),La=Re.useRef(cs);La.current=cs;const Ba=Re.useCallback(u=>{zt(u)},[]),Ha=Re.useCallback(()=>{Jt(null),zt("")},[]),Ua=Re.useCallback(({event:u})=>{if(u.id==="__inline_add__")return n.jsxDEV(Qf,{onSave:yt,onCancel:Yt,processList:J},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2361,columnNumber:9},void 0);const V=(St==null?void 0:St.id)===u.id||(St==null?void 0:St.mergedEventIds)&&St.mergedEventIds.includes(u.id);return n.jsxDEV(Jf,{event:u,user:N,filterProject:le,isEditing:V,editTitle:V?La.current:void 0,onEditTitleChange:V?Ba:void 0,onEditSave:V?Gt:void 0,onEditDelete:V?()=>lt(u):void 0,onEditCancel:V?Ha:void 0,onHoverDelete:()=>lt(u),onDeleteAction:()=>{Ve.current=!0},processList:J},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2374,columnNumber:7},void 0)},[N,le,St,Gt,lt,yt,Yt,Ba,Ha,J]),Ul=({onNavigate:u})=>{const[V,I]=Re.useState(!1),[L,K]=Re.useState(Me(y).year()),[te,se]=Re.useState(Me(y).month()),qe=window.innerWidth<768,ze=()=>{K(Me(y).year()),se(Me(y).month()),I(!0)},Bt=()=>{w(Me().year(L).month(te).toDate()),I(!1)};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:`calendar-toolbar flex flex-col bg-white border-b border-gray-200 ${qe?"px-2 py-1":"px-3 md:px-5 py-2"}`,children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("div",{className:"flex items-center space-x-1",children:[n.jsxDEV("button",{onClick:()=>u("PREV"),className:"px-2 py-1.5 text-2xl md:text-3xl text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-bold print-hide",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2417,columnNumber:15},void 0),n.jsxDEV("div",{className:"text-base md:text-lg font-bold text-gray-900 hover:bg-gray-50 px-2 md:px-3 py-1 rounded-lg transition-colors cursor-pointer print-title",onClick:ze,children:[n.jsxDEV("span",{children:Me(y).format("YYYY MM")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2427,columnNumber:17},void 0),n.jsxDEV("span",{className:"print-project-name hidden",children:[" - ",le==="all"?" ":le]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2429,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2423,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>u("NEXT"),className:"px-2 py-1.5 text-2xl md:text-3xl text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-bold print-hide",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2431,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2416,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex items-center space-x-2",children:n.jsxDEV("select",{className:"px-3 md:px-4 py-1.5 md:py-2 bg-white text-gray-700 rounded-lg text-xs md:text-sm font-medium focus:outline-none focus:ring-2 focus:ring-gray-300 border border-gray-300 print-hide",value:le,onChange:pt=>{Rt(pt.target.value),Qe(null)},style:{appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1.25rem",paddingRight:"2.5rem"},children:[(N==null?void 0:N.name)!==""&&n.jsxDEV("option",{value:"all",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2458,columnNumber:41},void 0),A.filter(pt=>pt.status!=="completed").map(pt=>n.jsxDEV("option",{value:pt.name,children:pt.name},pt.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2462,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2441,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2439,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2415,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2413,columnNumber:9},void 0),V&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-sm shadow-xl",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxDEV("h3",{className:"text-lg font-bold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2477,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>I(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2483,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2482,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2478,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2476,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("button",{onClick:()=>K(L-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2496,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2495,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2491,columnNumber:19},void 0),n.jsxDEV("span",{className:"text-xl font-bold text-gray-900",children:[L,""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2499,columnNumber:19},void 0),n.jsxDEV("button",{onClick:()=>K(L+1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2507,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2506,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2502,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2490,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2489,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-4",children:n.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(pt=>{const Ge=te===pt-1,At=Me().year()===L&&Me().month()===pt-1;return n.jsxDEV("button",{onClick:()=>se(pt-1),className:`py-3 px-4 rounded-lg text-sm font-medium transition-colors ${Ge?"bg-gray-900 text-white":At?"bg-gray-100 text-gray-900 border-2 border-gray-900":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[pt,""]},pt,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2520,columnNumber:23},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2515,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2514,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-4 border-t border-gray-200 flex gap-2",children:[n.jsxDEV("button",{onClick:()=>{w(new Date),I(!1)},className:"flex-1 py-2 px-4 bg-gray-100 text-gray-900 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2540,columnNumber:17},void 0),n.jsxDEV("button",{onClick:Bt,className:"flex-1 py-2 px-4 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2549,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2539,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2474,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2473,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2412,columnNumber:7},void 0)},Sl=()=>null,Pl=b.useMemo(()=>({toolbar:Ul,event:Ua,month:{dateHeader:ja,showMore:Sl}}),[ja,Ua]),Sa=Re.useMemo(()=>{if(!R)return[];let u;if(Zt)u=He.filter(I=>Me(I.start).isSame(R,"day"));else{const I=Me(R).startOf("week"),L=Me(R).endOf("week");u=He.filter(K=>{const te=Me(K.start);return te.isSameOrAfter(I,"day")&&te.isSameOrBefore(L,"day")})}const V=[...u].sort((I,L)=>{const K=I.assignedTo&&I.assignedTo.includes("HV LAB"),te=I.assignedTo&&I.assignedTo.includes("")&&D&&["",""].includes(D),se=I.assignedTo&&I.assignedTo.includes("")&&D&&["","",""].includes(D),qe=I.assignedTo&&D&&I.assignedTo.includes(D)||I.assignedTo&&(N==null?void 0:N.name)&&I.assignedTo.includes(N.name)||K||te||se,ze=L.assignedTo&&L.assignedTo.includes("HV LAB"),Bt=L.assignedTo&&L.assignedTo.includes("")&&D&&["",""].includes(D),pt=L.assignedTo&&L.assignedTo.includes("")&&D&&["","",""].includes(D),Ge=L.assignedTo&&D&&L.assignedTo.includes(D)||L.assignedTo&&(N==null?void 0:N.name)&&L.assignedTo.includes(N.name)||ze||Bt||pt;return qe&&!Ge?-1:!qe&&Ge?1:new Date(I.start).getTime()-new Date(L.start).getTime()});return console.log("Sorted events:",V.map(I=>({title:I.title,assignedTo:I.assignedTo,user:N==null?void 0:N.name,userShort:D}))),V},[R,He,N,D,Zt]);return b.useEffect(()=>{const V=setTimeout(()=>{const I=Zt?document.querySelectorAll(".rbc-month-view td.rbc-date-cell"):document.querySelectorAll(".rbc-date-cell"),L=document.querySelectorAll(".rbc-month-row"),K=[];L.forEach((Ze,Ht)=>{const Ft=Ze.querySelectorAll(".rbc-date-cell");let dt=0;Ft.forEach(ht=>{const It=ht.querySelector("button");let bt=It==null?void 0:It.textContent;if(!bt){const Ns=ht.querySelector("span");bt=Ns==null?void 0:Ns.textContent}if(bt&&!isNaN(parseInt(bt))){const Ns=Me(y).date(parseInt(bt)),Ws=He.filter(Dr=>Me(Dr.start).isSame(Ns,"day"));dt=Math.max(dt,Ws.length)}}),K.push(dt)});const te=le&&le!=="all",se=100,qe=te?60:18,ze=25,Bt=Math.floor((se-ze)/qe),pt=K.length,Ge=se*pt,At=K.map(Ze=>Ze<=Bt?se:ze+Ze*qe+10),qt=At.reduce((Ze,Ht)=>Ze+Ht,0);if(qt>Ge){const Ze=At.map((dt,ht)=>({index:ht,height:dt,overflow:dt>se})),Ht=Ze.filter(dt=>dt.overflow).reduce((dt,ht)=>dt+(ht.height-se),0),Ft=Ze.filter(dt=>!dt.overflow);if(Ft.length>0){const dt=Ge-Ht-Ft.length*se,ht=Math.max(50,se+dt/Ft.length);L.forEach((It,bt)=>{const Ws=At[bt]>se?At[bt]:ht;It.style.height=`${Ws}px`,It.style.minHeight=`${Ws}px`})}else{const dt=Ge/qt;L.forEach((ht,It)=>{const bt=Math.max(80,At[It]*dt);ht.style.height=`${bt}px`,ht.style.minHeight=`${bt}px`})}}else{const Ze=At.reduce((ht,It)=>ht+(It>se?It:0),0),Ht=At.filter(ht=>ht<=se).length,Ft=Ge-Ze,dt=Ht>0?Ft/Ht:se;L.forEach((ht,It)=>{const bt=At[It]>se?At[It]:dt;ht.style.height=`${bt}px`,ht.style.minHeight=`${bt}px`})}I.forEach(Ze=>{const Ht=Ze.querySelector("button");let Ft=Ht==null?void 0:Ht.textContent;if(!Ft){const bt=Ze.querySelector("span");Ft=bt==null?void 0:bt.textContent}if(!Ft||isNaN(parseInt(Ft)))return;const dt=Me(y).date(parseInt(Ft)),ht=He.filter(bt=>Me(bt.start).isSame(dt,"day"));ht.length>0?Ze.setAttribute("data-event-count",ht.length.toString()):Ze.removeAttribute("data-event-count");const It=dt.clone().toDate();if(R&&Me(It).isSame(R,"day")?Ze.classList.add("selected-date"):Ze.classList.remove("selected-date"),Zt){const bt=Ze,Ns=bt._mobileClickHandler;Ns&&Ze.removeEventListener("click",Ns);const Ws=Dr=>{if(Dr.target.closest(".rbc-event"))return;const Il=dt.clone().toDate();Pe(Il);const Pa=document.querySelector(".md\\:hidden.mt-3.bg-white");Pa&&Pa.scrollIntoView({behavior:"smooth",block:"nearest"})};bt._mobileClickHandler=Ws,Ze.addEventListener("click",Ws,!0),Ze.style.cursor="pointer",Ze.style.touchAction="manipulation"}})},200);return()=>{clearTimeout(V),Zt&&document.querySelectorAll(".rbc-month-view td.rbc-date-cell").forEach(L=>{const K=L,te=K._mobileClickHandler;te&&(L.removeEventListener("click",te),delete K._mobileClickHandler)})}},[He,y,Zt,R,le]),n.jsxDEV("div",{className:"schedule-container space-y-3 md:space-y-2",children:[Se.date&&n.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-3 md:p-4 shadow-sm",children:n.jsxDEV("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-2 md:gap-3",children:[n.jsxDEV("div",{className:"text-xs md:text-sm font-semibold text-gray-900 md:min-w-[80px]",children:Me(Se.date).format("MM DD")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2838,columnNumber:15},void 0),n.jsxDEV("select",{value:Se.projectId,onChange:u=>Xe({...Se,projectId:u.target.value}),className:"px-3 md:px-4 py-2 border border-gray-300 rounded-lg text-xs md:text-sm focus:outline-none focus:ring-2 focus:ring-gray-500",children:A.filter(u=>u.status!=="completed").map(u=>n.jsxDEV("option",{value:u.id,children:u.name},u.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2849,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2841,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:Se.title,onChange:u=>Xe({...Se,title:u.target.value}),onKeyPress:u=>{u.key==="Enter"&&Pt()},placeholder:"  ...",className:"flex-1 px-3 md:px-4 py-2 border border-gray-300 rounded-lg text-xs md:text-sm focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2854,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:Pt,className:"flex-1 md:flex-none px-4 md:px-5 py-2 bg-gray-900 text-white text-xs md:text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2868,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{Xe({date:null,projectId:"",title:""}),Pe(null)},className:"flex-1 md:flex-none px-4 md:px-5 py-2 bg-white border border-gray-300 text-gray-700 text-xs md:text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2874,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2867,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2837,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2836,columnNumber:11},void 0),n.jsxDEV("div",{className:"schedule-main flex flex-col md:block",children:[n.jsxDEV("div",{className:"flex gap-3",children:[le!=="all"&&!Zt&&n.jsxDEV("div",{className:"hidden md:block flex-shrink-0 print-hide",children:n.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-2 sticky top-4",children:[n.jsxDEV("button",{onClick:()=>pe(!0),className:"w-full mb-2 px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors flex items-center justify-center gap-1",children:[n.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsxDEV("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2901,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2900,columnNumber:21},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2896,columnNumber:19},void 0),Q&&n.jsxDEV("div",{className:"mb-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded text-center",children:[n.jsxDEV("span",{className:"font-medium",children:Q},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2908,columnNumber:23},void 0)," ",n.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2909,columnNumber:23},void 0),n.jsxDEV("span",{className:"text-blue-600",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2910,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2907,columnNumber:21},void 0),n.jsxDEV("div",{className:"flex flex-col gap-0.5",children:J.map(u=>n.jsxDEV("div",{draggable:!0,onClick:()=>{Qe(Q===u?null:u)},onDragStart:V=>{ye.current=!1,Qe(null),ae(u),de.current=u,V.dataTransfer.setData("text/plain",u),V.dataTransfer.effectAllowed="copy"},onDragEnd:()=>{ye.current||(ae(null),de.current=null)},className:`px-3 py-1 text-xs rounded cursor-pointer transition-colors text-center font-medium whitespace-nowrap ${Q===u?"bg-blue-500 text-white ring-2 ring-blue-300":C===u?"bg-blue-100 text-blue-800":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:u},u,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2915,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2913,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2894,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2893,columnNumber:15},void 0),n.jsxDEV("div",{className:`schedule-calendar bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm calendar-container flex-1 ${le!=="all"?"specific-project-view":""}`,style:{paddingBottom:0},children:n.jsxDEV(zf,{localizer:Yf,events:He,startAccessor:"start",endAccessor:"end",view:mt,onView:ut,date:y,onNavigate:w,onSelectEvent:at,onSelectSlot:Qt,onEventDrop:le!=="all"?re:void 0,onDragStart:le!=="all"?Ie:void 0,onDropFromOutside:le!=="all"?rt:void 0,dragFromOutsideItem:le!=="all"?Kt:void 0,draggableAccessor:u=>le!=="all"&&u.id!=="__inline_add__",resizable:!1,selectable:!0,longPressThreshold:1,eventPropGetter:Pn,dayPropGetter:wa,components:Pl,popup:!1,doShowMoreDrillDown:!1,onShowMore:()=>{},showAllEvents:!0,messages:{today:"",previous:"",next:"",month:"",week:"",day:"",agenda:"",date:"",time:"",event:"",noEventsInRange:"   ",showMore:u=>`+${u} `}},`calendar-${le}-${(R==null?void 0:R.getTime())||"no-selection"}`,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2965,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2961,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2890,columnNumber:11},void 0),R&&n.jsxDEV("div",{className:"schedule-events-list desktop:hidden mt-3 bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-gray-50",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("p",{className:"text-sm font-semibold text-gray-900",children:Zt?Me(R).format("MM DD (ddd)"):`${Me(R).startOf("week").format("MM DD")} - ${Me(R).endOf("week").format("MM DD")}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3016,columnNumber:19},void 0),wn[Me(R).format("YYYY-MM-DD")]&&n.jsxDEV("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-red-50 text-red-600",children:wn[Me(R).format("YYYY-MM-DD")]},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3024,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3015,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-center gap-1",children:[le!=="all"&&n.jsxDEV("button",{onClick:()=>h(!0),className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded transition-colors",children:"+"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3032,columnNumber:21},void 0),n.jsxDEV("button",{onClick:()=>{Pe(null),bs(null),h(!1),m("")},className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:n.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3049,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3048,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3039,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3029,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3014,columnNumber:15},void 0),n.jsxDEV("div",{children:Sa.length===0?n.jsxDEV("div",{className:"p-4",children:le!=="all"&&$s?n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("input",{type:"text",value:H,onChange:u=>m(u.target.value),onKeyDown:u=>{if(u.key==="Enter"&&H.trim()){const V=R||new Date,I={id:"",title:H.trim(),start:V,end:V,project:le,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};i(I).then(()=>{h(!1),m("")}).catch(L=>{console.error("  :",L),q.error("  ")})}else u.key==="Escape"&&(h(!1),m(""))},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3062,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>{if(H.trim()){const u=R||new Date,V={id:"",title:H.trim(),start:u,end:u,project:le,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};i(V).then(()=>{h(!1),m("")}).catch(I=>{console.error("  :",I),q.error("  ")})}},className:"px-3 py-2 text-sm font-medium text-white bg-gray-700 rounded-lg hover:bg-gray-800 active:bg-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3095,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>{h(!1),m("")},className:"p-2 text-gray-400 hover:text-gray-600",children:n.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3130,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3129,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3122,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3061,columnNumber:23},void 0):n.jsxDEV("p",{className:"text-sm text-gray-500 text-center",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3135,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3058,columnNumber:19},void 0):n.jsxDEV("div",{children:[(()=>{const u=Sa.reduce((I,L)=>{const K=Me(L.start).format("YYYY-MM-DD");return I[K]||(I[K]=[]),I[K].push(L),I},{});return Object.keys(u).sort().map(I=>n.jsxDEV("div",{className:"border-b border-gray-100 last:border-b-0",children:[!Zt&&n.jsxDEV("div",{className:"px-3 py-2 bg-gray-50 sticky top-0 z-10",children:n.jsxDEV("p",{className:"text-xs font-semibold text-gray-700",children:Me(I).format("MM DD (ddd)")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3159,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3158,columnNumber:29},void 0),n.jsxDEV("div",{className:"divide-y divide-gray-100",children:u[I].map(L=>{const K=L.assignedTo&&L.assignedTo.includes("HV LAB"),te=L.assignedTo&&L.assignedTo.includes("")&&D&&["",""].includes(D),se=L.assignedTo&&L.assignedTo.includes("")&&D&&["","",""].includes(D),ze=L.assignedTo&&(L.assignedTo.includes((N==null?void 0:N.name)||"")||D&&L.assignedTo.includes(D))||K||te||se,Bt=!L.color&&!ze,pt=!L.isASVisit&&!L.isExpectedPayment;return n.jsxDEV("div",{onClick:()=>{const Ge={...L,title:L.originalTitle||L.title};at(Ge)},className:`p-3 cursor-pointer ${ze?"bg-yellow-50":""}`,style:Bt?{backgroundColor:"#f3f0f5"}:void 0,children:n.jsxDEV("div",{className:"flex items-start gap-2",children:[n.jsxDEV("div",{className:"w-1 h-full rounded-full flex-shrink-0",style:{backgroundColor:ze?"#FEF3C7":L.color||"#e8e2ea",minHeight:"28px"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3205,columnNumber:27},void 0),n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[n.jsxDEV("p",{className:"text-sm font-semibold text-gray-900 truncate",children:L.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3216,columnNumber:31},void 0),L.assignedTo&&L.assignedTo.length>0&&n.jsxDEV("p",{className:"text-xs text-gray-500 flex-shrink-0",children:["","",""].every(qt=>L.assignedTo.includes(qt))?"":L.assignedTo.join(", ")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3221,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3215,columnNumber:29},void 0),L.projectName&&le==="all"&&n.jsxDEV("p",{className:"text-xs text-gray-600 mt-0.5",children:L.projectName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3233,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3214,columnNumber:27},void 0),pt?n.jsxDEV("button",{onClick:Ge=>{Ge.stopPropagation(),bs(L)},className:"p-0.5 text-gray-400 hover:text-red-500 flex-shrink-0 active:text-red-600",children:n.jsxDEV("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3248,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3247,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3240,columnNumber:29},void 0):n.jsxDEV("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3253,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3252,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3204,columnNumber:25},void 0)},L.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3187,columnNumber:25},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3165,columnNumber:27},void 0)]},I,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3155,columnNumber:25},void 0))})(),le!=="all"&&$s&&n.jsxDEV("div",{className:"p-3 border-t border-gray-100",children:n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("input",{type:"text",value:H,onChange:u=>m(u.target.value),onKeyDown:u=>{if(u.key==="Enter"&&H.trim()){const V=R||new Date,I={id:"",title:H.trim(),start:V,end:V,project:le,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};i(I).then(()=>{h(!1),m("")}).catch(L=>{console.error("  :",L),q.error("  ")})}else u.key==="Escape"&&(h(!1),m(""))},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3268,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>{if(H.trim()){const u=R||new Date,V={id:"",title:H.trim(),start:u,end:u,project:le,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};i(V).then(()=>{h(!1),m("")}).catch(I=>{console.error("  :",I),q.error("  ")})}},className:"px-3 py-2 text-sm font-medium text-white bg-gray-700 rounded-lg hover:bg-gray-800 active:bg-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3301,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>{h(!1),m("")},className:"p-2 text-gray-400 hover:text-gray-600",children:n.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3336,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3335,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3328,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3267,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3266,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3139,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3056,columnNumber:15},void 0),Zt&&le!=="all"&&n.jsxDEV("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:[n.jsxDEV("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3349,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex flex-wrap gap-1.5",children:J.map(u=>n.jsxDEV("button",{onClick:async()=>{const V=R||new Date;if(le!=="all"){const I={id:"",title:u,start:V,end:V,project:le,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};try{await i(I)}catch(L){console.error("  :",L),q.error("  ")}}},className:"px-2.5 py-1.5 text-xs rounded-lg bg-white border border-gray-200 text-gray-700 hover:bg-gray-100 active:bg-gray-200 transition-colors font-medium",children:u},u,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3352,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3350,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3348,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3012,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2889,columnNumber:9},void 0),T&&n.jsxDEV(Co,{event:z,slotInfo:fe,defaultProjectName:le!=="all"?le:void 0,onClose:()=>{ne(!1),G(null),Ae(null)},onSave:async u=>{console.log(" Schedule.tsx onSave called with newEvent:",u);try{if(z)if(z.id.startsWith("as-")){const V=z.id.replace("as-","");let I="";u.assignedTo&&Array.isArray(u.assignedTo)&&u.assignedTo.length>0?I=u.assignedTo.join(", "):z.assignedTo&&Array.isArray(z.assignedTo)?I=z.assignedTo.join(", "):typeof z.assignedTo=="string"&&(I=z.assignedTo),await d(V,{project:u.title||z.title,assignedTo:I,scheduledVisitDate:u.start,scheduledVisitTime:u.time||z.time}),await f(),ne(!1)}else if(z.id.startsWith("payment-")){const V=z.id.split("-"),I=V[1],L=V[2],K=p.find(te=>te.id===I);if(K){const te={...K.expectedPaymentDates};te[L]=u.start,await g(I,{expectedPaymentDates:te})}}else{console.log(" Updating schedule with projectId:",u.projectId,"projectName:",u.projectName);let V=u.title;const I=/ - (|) \d{1,2}( \d{1,2})?$/;if(V=V.replace(I,""),z.mergedEventIds&&z.mergedEventIds.length>0){console.log(" Updating merged schedules:",z.mergedEventIds);const L=(z.originalTitle||z.title).split(", "),K=V.split(", ");for(let te=0;te<z.mergedEventIds.length;te++){const se=z.mergedEventIds[te],qe=K[te]||L[te]||V;await o(se,{title:qe.trim(),start:u.start,end:u.end,type:"other",project:u.projectId||u.projectName,location:"",attendees:u.assignedTo||[],description:u.description,time:u.time})}}else await o(z.id,{title:V,start:u.start,end:u.end,type:"other",project:u.projectId||u.projectName,location:"",attendees:u.assignedTo||[],description:u.description,time:u.time})}else{console.log(" Adding schedule with projectId:",u.projectId,"projectName:",u.projectName);const V={id:Date.now().toString(),title:u.title,start:u.start,end:u.end,type:"other",project:u.projectId||u.projectName||"",location:"",attendees:u.assignedTo||[],description:u.description||"",time:u.time||"-"};await i(V)}ne(!1)}catch(V){console.error("Failed to save schedule:",V),q.error("  ")}},onDelete:async u=>{try{if(u.startsWith("payment-")){const V=u.split("-"),I=V[1],L=V[2],K=p.find(te=>te.id===I);if(K){const te={...K.expectedPaymentDates};delete te[L],await g(I,{expectedPaymentDates:te})}}else if(u.startsWith("as-")){const V=u.replace("as-","");await d(V,{scheduledVisitDate:null,scheduledVisitTime:null})}else{const V=ot.find(I=>I.id===u);if(V!=null&&V.mergedEventIds&&V.mergedEventIds.length>0){console.log("Deleting merged schedules:",V.mergedEventIds);for(const I of V.mergedEventIds)await l(I)}else await l(u)}ne(!1)}catch(V){console.error("Failed to delete schedule:",V),q.error("  ")}}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3390,columnNumber:11},void 0),v&&$&&n.jsxDEV("div",{className:"fixed pointer-events-none z-[9999]",style:{left:j.x-50,top:j.y-15,backgroundColor:v.color||"#F3F4F6",borderRadius:"6px",color:"#1f2937",padding:"4px 8px",fontWeight:500,fontSize:"16px",maxWidth:"250px"},children:v.originalTitle||v.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3578,columnNumber:11},void 0),_s&&n.jsxDEV("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]",onClick:()=>bs(null),children:n.jsxDEV("div",{className:"bg-white rounded-xl shadow-2xl w-[280px] overflow-hidden mx-4",onClick:u=>u.stopPropagation(),children:[n.jsxDEV("div",{className:"p-4 text-center",children:[n.jsxDEV("div",{className:"w-12 h-12 mx-auto mb-3 bg-red-100 rounded-full flex items-center justify-center",children:n.jsxDEV("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3609,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3608,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3607,columnNumber:17},void 0),n.jsxDEV("p",{className:"text-base font-semibold text-gray-900 mb-1",children:" ?"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3612,columnNumber:17},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500 truncate",children:_s.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3613,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3606,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex border-t border-gray-100",children:[n.jsxDEV("button",{onClick:()=>bs(null),className:"flex-1 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 active:bg-gray-100 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3616,columnNumber:17},void 0),n.jsxDEV("button",{onClick:async()=>{try{const u=_s.mergedEventIds||[_s.id];await Promise.all(u.map(V=>l(V)))}catch(u){console.error("  :",u),q.error(" ")}bs(null)},className:"flex-1 py-3 text-sm font-medium text-red-600 hover:bg-red-50 active:bg-red-100 border-l border-gray-100 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3622,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3615,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3602,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3598,columnNumber:11},void 0),P&&n.jsxDEV("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]",onClick:()=>{pe(!1),oe(null),ce("")},children:n.jsxDEV("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] overflow-hidden mx-4",onClick:u=>u.stopPropagation(),children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center",children:[n.jsxDEV("h2",{className:"text-lg font-bold text-gray-800",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3660,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{pe(!1),oe(null),ce("")},className:"text-gray-400 hover:text-gray-600 p-1 hover:bg-gray-100 rounded",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3661,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3659,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[n.jsxDEV("label",{className:"block text-xs text-gray-500 mb-2",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3675,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:Ne,onChange:u=>ce(u.target.value),onKeyDown:u=>u.key==="Enter"&&ke(),placeholder:" ",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-gray-300 focus:border-gray-400 bg-white"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3677,columnNumber:19},void 0),n.jsxDEV("button",{onClick:ke,disabled:!Ne.trim(),className:"px-4 py-2 bg-gray-800 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3685,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3676,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3674,columnNumber:15},void 0),n.jsxDEV("div",{className:"overflow-y-auto max-h-[50vh]",children:Z?n.jsxDEV("div",{className:"p-8 text-center text-gray-500",children:[n.jsxDEV("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-200 border-t-gray-600 rounded-full mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3699,columnNumber:21},void 0),n.jsxDEV("p",{children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3700,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3698,columnNumber:19},void 0):U.length===0?n.jsxDEV("div",{className:"p-8 text-center text-gray-400",children:[n.jsxDEV("p",{className:"mb-2",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3704,columnNumber:21},void 0),n.jsxDEV("p",{className:"text-xs",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3705,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3703,columnNumber:19},void 0):n.jsxDEV("div",{className:"divide-y divide-gray-50",children:U.map((u,V)=>n.jsxDEV("div",{draggable:(Y==null?void 0:Y.id)!==u.id,onDragStart:()=>$e(V),onDragOver:I=>tt(I,V),onDragEnd:Fe,onDragLeave:()=>W(null),className:`flex items-center gap-3 px-4 py-3 hover:bg-gray-50 group transition-all ${Ye===V?"opacity-50 bg-gray-100":""} ${it===V?"border-t-2 border-gray-400":""} ${(Y==null?void 0:Y.id)!==u.id?"cursor-grab active:cursor-grabbing":""}`,children:(Y==null?void 0:Y.id)===u.id?n.jsxDEV(n.Fragment,{children:[n.jsxDEV("input",{type:"text",value:he,onChange:I=>Le(I.target.value),onKeyDown:I=>{I.key==="Enter"&&Be(),I.key==="Escape"&&(oe(null),Le(""))},className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-300 focus:border-gray-400",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3727,columnNumber:29},void 0),n.jsxDEV("button",{onClick:Be,className:"px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg hover:bg-gray-700",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3741,columnNumber:29},void 0),n.jsxDEV("button",{onClick:()=>{oe(null),Le("")},className:"px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-lg hover:bg-gray-200",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3747,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3726,columnNumber:27},void 0):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"text-gray-300 text-xs select-none",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3759,columnNumber:29},void 0),n.jsxDEV("span",{className:"text-gray-300 text-xs w-5 text-right select-none",children:V+1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3760,columnNumber:29},void 0),n.jsxDEV("span",{className:"flex-1 text-sm text-gray-700 select-none",children:u.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3761,columnNumber:29},void 0),n.jsxDEV("button",{onClick:()=>{oe(u),Le(u.name)},className:"px-2 py-1 text-gray-400 hover:text-gray-700 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3762,columnNumber:29},void 0),n.jsxDEV("button",{onClick:()=>Je(u.id),className:"px-2 py-1 text-gray-400 hover:text-red-500 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3771,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3758,columnNumber:27},void 0)},u.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3710,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3708,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3696,columnNumber:15},void 0),U.length>0&&n.jsxDEV("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center text-xs text-gray-400",children:"     /"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3787,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3654,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3646,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2833,columnNumber:7},void 0)},Zf=({projectName:t,onClose:s,type:e="cash"})=>{const r=e==="cash",a=r?"":"",i=r?"      .":"      .",[o,l]=b.useState({receiptDate:et(new Date,"yyyy-MM-dd"),customerName:"",amount:"",purpose:" ",receivedBy:""}),c=()=>{window.print()},d=p=>{const g=Number(p.replace(/,/g,""));return isNaN(g)?"":g.toLocaleString()},f=p=>{if(p===0)return"";const g=["","","",""],N=["","","",""],A=["","","","","","","","","",""];let x="",_=0;for(;p>0;){const E=p%1e4;if(E>0){let D="",O=E,ie=0;for(;O>0;){const X=O%10;X>0&&(D=A[X]+N[ie]+D),O=Math.floor(O/10),ie++}x=D+g[_]+x}p=Math.floor(p/1e4),_++}return x+""};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[n.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:a},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:76,columnNumber:13},void 0),n.jsxDEV("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full",children:n.jsxDEV(Dt,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:81,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:77,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:75,columnNumber:11},void 0),n.jsxDEV("div",{className:"p-6 space-y-4 print:hidden",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:88,columnNumber:15},void 0),n.jsxDEV("input",{type:"date",value:o.receiptDate,onChange:p=>l({...o,receiptDate:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:89,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:87,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:98,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:o.customerName,onChange:p=>l({...o,customerName:p.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:99,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:97,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:109,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:d(o.amount),onChange:p=>{const g=p.target.value.replace(/,/g,"");/^\d*$/.test(g)&&l({...o,amount:g})},placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:110,columnNumber:15},void 0),o.amount&&n.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:f(Number(o.amount))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:123,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:108,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:130,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:o.purpose,onChange:p=>l({...o,purpose:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:131,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:129,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:140,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:o.receivedBy,onChange:p=>l({...o,receivedBy:p.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:141,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:139,columnNumber:13},void 0),n.jsxDEV("button",{onClick:c,disabled:!o.customerName||!o.amount||!o.receivedBy,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[n.jsxDEV(Bi,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:155,columnNumber:15},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:150,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:86,columnNumber:11},void 0),n.jsxDEV("div",{className:"hidden print:block p-12",children:n.jsxDEV("div",{className:"border-4 border-double border-gray-900 p-8",children:[n.jsxDEV("h1",{className:"text-center text-3xl font-bold mb-8",children:r?"    ":"    "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:163,columnNumber:15},void 0),n.jsxDEV("div",{className:"space-y-6 text-lg",children:[n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:169,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1 receipt-date",children:et(new Date(o.receiptDate),"yyyy MM dd",{locale:kt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:170,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:168,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:174,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:o.customerName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:175,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:173,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:179,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:180,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:178,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:184,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1 font-bold receipt-amount",children:["",Number(o.amount).toLocaleString(),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:185,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:183,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:"():"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:191,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:f(Number(o.amount))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:192,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:190,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:196,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:o.purpose},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:197,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:195,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:167,columnNumber:15},void 0),n.jsxDEV("div",{className:"mt-12 text-center",children:[n.jsxDEV("p",{className:"text-lg mb-8",children:i},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:202,columnNumber:17},void 0),n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("p",{className:"text-lg receipt-date",children:et(new Date(o.receiptDate),"yyyy MM dd",{locale:kt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:205,columnNumber:19},void 0),n.jsxDEV("p",{className:"text-xl font-medium mt-8",children:[": ",o.receivedBy," ",n.jsxDEV("span",{className:"ml-4",children:"()"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:207,columnNumber:48},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:206,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:204,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:162,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:161,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:72,columnNumber:7},void 0),n.jsxDEV("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
        }
      `},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:217,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:71,columnNumber:5},void 0)},eg="HVLabImageDB",tg=1,Ss="paymentRecordImages";let Qn=null;const Ea=()=>new Promise((t,s)=>{if(Qn){t(Qn);return}const e=indexedDB.open(eg,tg);e.onerror=()=>{console.error("IndexedDB  :",e.error),s(e.error)},e.onsuccess=()=>{Qn=e.result,t(Qn)},e.onupgradeneeded=r=>{const a=r.target.result;a.objectStoreNames.contains(Ss)||a.createObjectStore(Ss,{keyPath:"id"})}}),sg=async()=>{try{const t=await Ea();return new Promise((s,e)=>{const i=t.transaction(Ss,"readonly").objectStore(Ss).getAll();i.onsuccess=()=>{const o={};i.result.forEach(l=>{o[l.id]=l.images}),s(o)},i.onerror=()=>{console.error("  :",i.error),e(i.error)}})}catch(t){console.error("IndexedDB , localStorage :",t);const s=localStorage.getItem("paymentRecordImages");return s?JSON.parse(s):{}}},ng=async(t,s)=>{try{const e=await Ea();return new Promise((r,a)=>{const l=e.transaction(Ss,"readwrite").objectStore(Ss).put({id:t,images:s});l.onsuccess=()=>r(),l.onerror=()=>{console.error("  :",l.error),a(l.error)}})}catch(e){throw console.error("IndexedDB  :",e),e}},rg=async t=>{try{const s=await Ea();return new Promise((e,r)=>{const a=s.transaction(Ss,"readwrite"),i=a.objectStore(Ss);i.clear(),Object.entries(t).forEach(([o,l])=>{i.put({id:o,images:l})}),a.oncomplete=()=>e(),a.onerror=()=>{console.error("  :",a.error),r(a.error)}})}catch(s){throw console.error("IndexedDB   :",s),s}},ag=async()=>{try{const t=localStorage.getItem("paymentRecordImages");if(t){const s=JSON.parse(t);Object.keys(s).length>0&&(await rg(s),localStorage.removeItem("paymentRecordImages"),console.log("localStorage IndexedDB  "))}}catch(t){console.error(" :",t)}},ig=()=>{const{payments:t,loadPaymentsFromAPI:s,loadProjectsFromAPI:e,addPaymentToAPI:r,deletePaymentFromAPI:a,updatePaymentInAPI:i,updatePayment:o}=Us(),{user:l}=Is(),c=fr(),[d,f]=b.useState(""),[p,g]=b.useState(null),[N,A]=b.useState(null),[x,_]=b.useState(!1),[E,D]=b.useState(!1),[O,ie]=b.useState(!1),[X,U]=b.useState(!1),[ee,P]=b.useState(""),[pe,Ne]=b.useState("form"),[ce,Y]=b.useState(!1),[oe,he]=b.useState(!1),Le=b.useRef(null),[Z,xe]=b.useState("pending"),[Ye,gt]=b.useState("all"),[it,W]=b.useState(()=>localStorage.getItem("payments_showMyRequestsOnly")==="true"),[_e,J]=b.useState(!1),[ke,Be]=b.useState(null),[Je,$e]=b.useState(!1),[tt,Fe]=b.useState(""),[We,_t]=b.useState(!1),B=b.useRef(!1),ve=b.useRef(!1),De=b.useRef(null),[ge,Ue]=b.useState([]),[st,mt]=b.useState([]),[ut,y]=b.useState(null),[w,T]=b.useState([]),[ne,z]=b.useState([]),[G,fe]=b.useState(!1),[Ae,Oe]=b.useState({}),[le,Rt]=b.useState(!1),ot=()=>{const h=localStorage.getItem("lastSelectedProject"),H=c.filter(m=>m.status!=="completed");return h&&H.some(m=>m.name===h)?h:H.length>0?H[0].name:""},[R,Pe]=b.useState({project:"",date:et(new Date,"yyyy-MM-dd"),process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]});b.useEffect(()=>{(async()=>{try{const H=await ks.getAllContractors();Ue(H.map(m=>({id:m._id||m.id,rank:m.rank,companyName:m.companyName,name:m.name,process:m.process,contact:m.contact,accountNumber:m.accountNumber,bankName:m.bankName,notes:m.notes,createdAt:new Date(m.createdAt),updatedAt:new Date(m.updatedAt)})))}catch(H){console.error("Failed to load contractors:",H)}})()},[]),b.useEffect(()=>{gt("all"),e().catch(H=>{console.error("Failed to load projects:",H)}),s().catch(H=>{console.error("Failed to load payments:",H)});const h=()=>{Y(window.innerWidth<1024)};if(h(),window.addEventListener("resize",h),c.length>0&&!R.project&&!ve.current){const H=ot();H&&(Pe(m=>({...m,project:H})),localStorage.setItem("lastSelectedProject",H))}return()=>window.removeEventListener("resize",h)},[]),b.useEffect(()=>{const h=setInterval(()=>{if(De.current){console.log("[ ]     - ");return}console.log("[ ]    ..."),s().catch(m=>{console.error("[ ] :",m)})},3e4),H=()=>{if(document.visibilityState==="visible"){if(De.current){console.log("[ ]     - ");return}console.log("[ ]   -    ..."),s().catch(m=>{console.error("[ ] :",m)})}};return document.addEventListener("visibilitychange",H),()=>{clearInterval(h),document.removeEventListener("visibilitychange",H)}},[s]),b.useEffect(()=>{let h=js.getSocket(),H=0,m=null;const v=j=>{if(console.log(" [ ]    :",j),De.current&&String(j.paymentId)===De.current){console.log(" [ ]    -  ");return}console.log(" [ ] loadPaymentsFromAPI  (  )"),s().catch(F=>{console.error("[ ]  :",F)})},k=()=>(h=js.getSocket(),h?(console.log(" [Payments] Socket  , payment:refresh  "),h.on("payment:refresh",v),m&&(clearInterval(m),m=null),!0):!1);return k()||(console.log(" [Payments] Socket  ..."),m=setInterval(()=>{H++,(k()||H>=10)&&(m&&(clearInterval(m),m=null),H>=10&&!js.getSocket()&&console.warn(" [Payments] Socket   -   "))},500)),()=>{m&&clearInterval(m);const j=js.getSocket();j&&j.off("payment:refresh",v)}},[s]),b.useEffect(()=>{(async()=>{var v,k,j,F;if(B.current)return;const H=new URLSearchParams(window.location.search),m=H.get("complete")||H.get("c");if(m){if(!l){console.log("[ ]   -  ");return}B.current=!0,console.log("[ ]  :",m),window.history.replaceState({},"","/payments"),ve.current=!0,Ne("list"),xe("completed"),gt("all"),Pe(S=>({...S,project:""})),o(String(m),{status:"completed",completionDate:new Date}),q.success(" "),window.dispatchEvent(new CustomEvent("paymentCompleted"));try{await i(String(m),{status:"completed"}),await s();const S=js.getSocket();S&&S.emit("payment:refresh",{paymentId:m,status:"completed",updatedAt:new Date().toISOString()})}catch(S){console.error("[ ]  :",S),o(String(m),{status:"pending",completionDate:void 0}),xe("pending");let M="  ";((v=S.response)==null?void 0:v.status)===401?M=" .  ":((k=S.response)==null?void 0:k.status)===404?M="     (ID: "+m+")":(F=(j=S.response)==null?void 0:j.data)!=null&&F.error?M=S.response.data.error:S.message&&(M+=": "+S.message),q.error(M)}}})()},[s,i,o,l]),b.useEffect(()=>{if(R.process){const h=new Set(t.filter(k=>{var j;return k.status==="completed"&&((j=k.bankInfo)==null?void 0:j.accountHolder)}).map(k=>k.bankInfo.accountHolder.trim().toLowerCase())),H=(k,j)=>{const F=k.toLowerCase(),S=j.toLowerCase();if(F.includes(S)||S.includes(F))return!0;const M=F.split("/").map(Ee=>Ee.trim()),$=S.replace(/$/,"").trim();for(const Ee of M)if(Ee===$||$.includes(Ee)||Ee.includes($))return!0;return!1},v=ge.filter(k=>{if(!H(R.process,k.process))return!1;const F=k.accountNumber&&k.accountNumber.trim()!=="",S=k.name.trim().toLowerCase(),M=h.has(S);return F||M}).sort((k,j)=>{const F=k.accountNumber&&k.accountNumber.trim()!=="",S=j.accountNumber&&j.accountNumber.trim()!=="";return F&&!S?-1:!F&&S?1:0});mt(v)}else mt([])},[R.process,ge,t]),b.useEffect(()=>{if(R.process){const h=(v,k)=>{if(!k)return!1;const j=v.toLowerCase(),F=k.toLowerCase();if(j.includes(F)||F.includes(j))return!0;const S=j.split("/").map($=>$.trim()),M=F.replace(/$/,"").trim();for(const $ of S)if($===M||M.includes($)||$.includes(M))return!0;return!1},H=t.filter(v=>{var k,j,F;return v.status==="completed"&&v.process&&h(R.process,v.process)&&((k=v.bankInfo)==null?void 0:k.accountHolder)&&((j=v.bankInfo)==null?void 0:j.bankName)&&((F=v.bankInfo)==null?void 0:F.accountNumber)}),m=new Map;H.forEach(v=>{const k=`${v.bankInfo.accountHolder}_${v.bankInfo.bankName}_${v.bankInfo.accountNumber}`;m.has(k)||m.set(k,{accountHolder:v.bankInfo.accountHolder,bankName:v.bankInfo.bankName,accountNumber:v.bankInfo.accountNumber,itemName:v.itemName||"",amount:v.amount||0})}),T(Array.from(m.values()))}else T([])},[R.process,t]),b.useEffect(()=>{var H;const h=((H=R.accountHolder)==null?void 0:H.trim())||"";if(h.length>=1&&G){const m=[],v=new Set;ge.filter(k=>k.accountNumber&&k.accountNumber.trim()!=="").forEach(k=>{const j=k.name.trim(),F=j.toLowerCase(),S=h.toLowerCase();F.startsWith(S)&&!v.has(F)&&(v.add(F),m.push({name:j,bankName:k.bankName||"",accountNumber:k.accountNumber||"",source:"contractor"}))}),t.filter(k=>{var j;return k.status==="completed"&&((j=k.bankInfo)==null?void 0:j.accountHolder)}).forEach(k=>{const j=k.bankInfo.accountHolder.trim(),F=j.toLowerCase(),S=h.toLowerCase();F.startsWith(S)&&!v.has(F)&&(v.add(F),m.push({name:j,bankName:k.bankInfo.bankName||"",accountNumber:k.bankInfo.accountNumber||"",source:"payment"}))}),z(m)}else z([])},[R.accountHolder,G,ge,t]);const C=h=>{const H=h.split(`
`).map(S=>S.trim()).filter(S=>S),m={amounts:{},bankInfo:{},vendor:null,itemName:void 0,includeVat:!1},v=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=S=>{const M=["","","","","","","",""];for(const $ of M)if(S.endsWith($)&&S.length>$.length+1)return S.slice(0,-$.length);return S},j=S=>{if(!S||S.length<2||S.length>5||!/^[-]{2,5}$/.test(S)||["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].includes(S)||["","","","","","","","","","","","","","","","","","","","","","","","","",""].includes(S))return!1;if(S.length>=2){const Ee=S.charAt(0),je=S.substring(0,2);if(["","","","","","",""].includes(je)||v.includes(Ee))return!0}return S.length>=2&&S.length<=4},F=H.some(S=>S.includes(" ")||S.includes(""));if(H.forEach((S,M)=>{if(S.includes("")&&S.includes(":")){const $=S.match(/\s*:\s*(.+)/);$&&(m.itemName=$[1].trim())}if(S.includes("")&&S.includes(":")){const $=S.match(/\s*:\s*(.+)/);$&&(m.bankInfo.accountHolder=$[1].trim())}if(S.includes("")&&S.includes(":")){const $=S.match(/\s*:\s*(.+)/);$&&(m.bankInfo.bankName=$[1].trim())}if(S.includes("")&&S.includes(":")){const $=S.match(/\s*:\s*(.+)/);$&&(m.bankInfo.accountNumber=$[1].trim())}if(S.includes("")&&S.includes(":")){const $=S.match(/\s*:\s*([\d,]+)?/);$&&(m.amounts.total=parseInt($[1].replace(/,/g,"")))}}),!F){let S=-1;if(H.forEach(M=>{const $=M.match(/\[([^\]]+)\]/);$&&!m.itemName&&(m.itemName=$[1].trim())}),H.forEach((M,$)=>{if(M.includes("")||M.includes(" ")||M.includes("()")){m.includeVat=!0;const we=M.match(/(\d+)\s*\s*(\d+)\s*\s*?/),me=M.match(/(\d+)\s*\s*?/),He=M.match(/([\d,]+)\s*/);if(we){const Se=parseInt(we[1])*1e4+parseInt(we[2])*1e3;m.amounts.total=Se}else if(me){const Se=parseInt(me[1])*1e4;m.amounts.total=Se}else if(He){const Se=parseInt(He[1].replace(/,/g,""));Se>=1e3&&(m.amounts.total=Se)}return}const je=M.match(/=\s*([\d,]+)\s*?/);let Ve=null;if(je){const we=parseInt(je[1].replace(/,/g,""));we>=1e3&&(m.amounts.total=we)}else{const we=M.match(/(\d+)\s*\s*(\d+)\s*\s*?/);if(we){const me=parseInt(we[1])*1e4,He=parseInt(we[2])*1e3,Se=me+He;M.includes("")||M.includes("")?m.amounts.material=Se:M.includes("")||M.includes("")?m.amounts.labor=Se:m.amounts.total||(m.amounts.total=Se),M=M.replace(/(\d+)\s*\s*(\d+)\s*\s*?/g,""),Ve=we}else if(Ve=M.match(/(\d+)\s*\s*?/),Ve){const me=parseInt(Ve[1])*1e4;M.includes("")||M.includes("")?m.amounts.material=me:M.includes("")||M.includes("")?m.amounts.labor=me:m.amounts.total||(m.amounts.total=me),M=M.replace(/(\d+)\s*\s*?/g,"")}}M.includes("/")&&M.split("/").forEach(me=>{const He=me.trim();He.startsWith("[")||He.endsWith("]")||(/^[\d\-]+$/.test(He)&&He.replace(/\-/g,"").length>=10?m.bankInfo.accountNumber||(m.bankInfo.accountNumber=He):j(He)&&!m.bankInfo.accountHolder&&(m.bankInfo.accountHolder=He))});const re=[/\d{6}[\s\-]+\d{8}/,/\d{6}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{5,7}[\s\-]+\d{2}[\s\-]+\d{5,7}/,/\d{4}[\s\-]+\d{3}[\s\-]+\d{6}/,/\d{3}[\s\-]+\d{4}[\s\-]+\d{4}[\s\-]+\d{2}/,/\d{3}[\s\-]+\d{4}[\s\-]+\d{2}[\s\-]+\d{5,6}/,/\d{2,4}[\s\-]+\d{2,5}[\s\-]+\d{2,4}[\s\-]+\d{2,6}/,/\d{3}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{3}[\s\-]+\d{4}[\s\-]+\d{7}/,/\d{4}[\s\-]+\d{4}[\s\-]+\d{5}/,/\d{3,4}[\s\-]+\d{2,6}[\s\-]+\d{4,7}/,/\d{5,6}[\s\-]+\d{6,8}/,/\d{10,}/];let Ie="",Nt=-1;for(const we of re){const me=M.match(we);if(me&&!m.bankInfo.accountNumber){Ie=me[0],Nt=me.index||-1,m.bankInfo.accountNumber=me[0].trim().replace(/\s+/g,"-");const Se=M.substring(Nt+Ie.length).trim().split(/\s+/);for(const Xe of Se){if(Xe.startsWith("[")||Xe.endsWith("]"))continue;const Ce=k(Xe);if(j(Ce)){m.bankInfo.accountHolder=Ce;break}}if(!m.bankInfo.accountHolder&&$>0){const Ce=H[$-1].split(/\s+/);for(const Te of Ce){if(Te.startsWith("[")||Te.endsWith("]"))continue;const at=k(Te);if(j(at)){m.bankInfo.accountHolder=at;break}}}if(!m.bankInfo.accountHolder&&$+1<H.length){const Xe=H[$+1],Ce=Xe.split(/\s+/);for(const Te of Ce){if(Te.startsWith("[")||Te.endsWith("]"))continue;const at=k(Te);if(j(at)){m.bankInfo.accountHolder=at;break}}if(!m.bankInfo.accountHolder){const Te=Xe.match(/^([-]{2,6})/);if(Te){const at=k(Te[1].trim());j(at)&&(m.bankInfo.accountHolder=at)}}}break}}const rt=M.match(/[\d,]+/g);if(rt){const we=Ie?Ie.split(/[\s\-]+/).filter(me=>me):[];rt.forEach(me=>{const He=parseInt(me.replace(/,/g,"")),Se=me.replace(/,/g,""),Xe=we.some(Ce=>Ce===Se);!m.bankInfo.accountNumber&&Se.length>=10&&Se.length<=20?(m.bankInfo.accountNumber=Se,Ie=Se):He>=1e3&&!Ve&&!Xe&&(M.includes("")||M.includes("")?m.amounts.material=He:M.includes("")||M.includes("")?m.amounts.labor=He:m.amounts.total||(m.amounts.total=He))})}const Kt={:"KB",KB:"KB",:"",:"",:"",:"IBK",IBK:"IBK",:"NH",NH:"NH",:"",:"",:"",:"",K:"",:"KDB",KDB:"KDB",:"",:"",:"",:"",:"",:"",SC:"SC",SC:"SC",:"SC",SC:"SC",:"",:"",:"",:""},yt=Object.keys(Kt).sort((we,me)=>me.length-we.length);for(const we of yt)if(M.includes(we)){const me=Kt[we];m.bankInfo.bankName=me,S=$;const He=new RegExp(`${we}(?:|)?\\s+([-a-zA-Z0-9]{2,10})`),Se=M.match(He);if(Se){const Xe=k(Se[1]);Xe&&!/^\d+$/.test(Xe)&&Xe!==""&&(m.bankInfo.accountHolder=Xe)}break}if(!m.bankInfo.bankName){const we=M.match(/([-]+)(|)/);we&&(m.bankInfo.bankName=we[0])}const Yt=[/\(\)[-a-zA-Z0-9]+/,/\(\)[-a-zA-Z0-9]+/,/\(\)[-a-zA-Z0-9]+/,/\s*[-a-zA-Z0-9]+/,/\s*[-a-zA-Z0-9]+/];for(const we of Yt){const me=M.match(we);if(me&&!m.bankInfo.accountHolder){m.bankInfo.accountHolder=me[0].trim();break}}const Gt=M.match(/\(([-]{2,5})\)/);if(Gt&&!m.bankInfo.accountHolder){const we=Gt[1];j(we)&&!["","",""].includes(we)&&(m.bankInfo.accountHolder=we)}if(!m.bankInfo.accountHolder){const we=/[-]{2,6}/g,me=M.match(we);if(me){const He=M.match(/\d{10,}/)||M.match(/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/),Se=M.match(/||||/);me.forEach(Xe=>{const Ce=k(Xe),Te=h.split(`
`)[$];if(Te&&Te.includes(`[${Xe}]`)||!j(Ce)||["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].includes(Ce))return;const Qt=M.indexOf(Xe);if(Qt>0){const Pt=M[Qt-1];if(/[-]/.test(Pt))return}if(Qt+Xe.length<M.length){const Pt=M[Qt+Xe.length];if(/[-]/.test(Pt))return}if(!(Gt&&Ce===Gt[1])){if((He||Se)&&!m.bankInfo.accountHolder)m.bankInfo.accountHolder=Ce;else if(!m.bankInfo.accountHolder){const Pt=/||||/,Pn=/\d{6,}/;($>0&&(Pn.test(H[$-1])||Pt.test(H[$-1]))||$<H.length-1&&(Pn.test(H[$+1])||Pt.test(H[$+1]))||Pt.test(M))&&(m.bankInfo.accountHolder=Ce)}}})}}const lt={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};for(const[we,me]of Object.entries(lt))if(M.includes(we)){m.vendor=me;break}if($===0&&!m.itemName){const we=M.replace(/[\[\]{}()<>]/g,"").trim();we&&!we.includes(" ")&&(j(we)||(m.itemName=we.substring(0,50)))}}),S>=0&&S+1<H.length){const M=H[S+1],$=M.trim();if(/^[-]{2,5}$/.test($)&&j($))m.bankInfo.accountHolder=$;else{const Ee=M.split(/\s+/);for(const je of Ee){const Ve=k(je);if(j(Ve)){m.bankInfo.accountHolder=Ve;break}}}}}if(m.itemName&&m.itemName.includes("")&&(m.vendor=""),m.itemName){const S=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","KB","NH","IBK","SC","","",""],M=m.itemName.toLowerCase(),$=S.some(re=>M===re.toLowerCase()||M.startsWith(re.toLowerCase()+" ")||M.replace(/\s+/g,"").match(/^[\d\-\s]+$/)),Ee=/^[\d\-\s]/.test(m.itemName),je=/^\d{2,}[\s\-]?\d+/.test(m.itemName.replace(/[-]/g,"").trim()),Ve=m.bankInfo.accountHolder&&(m.itemName===m.bankInfo.accountHolder||m.itemName.includes(m.bankInfo.accountHolder));($||Ee||je||Ve)&&(m.itemName=void 0)}return m},ae=async()=>{var h,H,m,v,k,j,F,S,M,$,Ee;try{const je=R.quickText;if(!je.trim())return;let Ve=t;t.length===0&&(console.log("payments  ,  ..."),await s(),await new Promise(me=>setTimeout(me,100)),Ve=Us.getState().payments,console.log("payments  :",Ve.length,""));const re=C(je);console.log("  :",re);const Ie={project:R.project,date:R.date,quickText:R.quickText,quickImages:R.quickImages||[],process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[]};y(null),D(!1),ie(!1);let Nt=0;re.amounts.material&&(Nt+=re.amounts.material),re.amounts.labor&&(Nt+=re.amounts.labor),re.amounts.total&&!re.amounts.material&&!re.amounts.labor&&(Nt=re.amounts.total),Nt>0&&(Ie.amount=Nt),re.bankInfo.bankName&&(Ie.bankName=re.bankInfo.bankName),re.bankInfo.accountHolder&&(Ie.accountHolder=re.bankInfo.accountHolder),re.bankInfo.accountNumber&&(Ie.accountNumber=re.bankInfo.accountNumber);const rt=me=>me?me.replace(/[^0-9]/g,""):"",Kt=(me,He)=>{if(!me||!He)return!1;const Se=rt(me),Xe=rt(He);if(!Se||!Xe)return!1;const Ce=6;return Se.length<Ce||Xe.length<Ce?Se===Xe:Xe.includes(Se)||Se.includes(Xe)},yt=rt(re.bankInfo.accountNumber||""),Yt=re.bankInfo.accountHolder||"";let Gt=!1;console.log("===    ==="),console.log(" :",re.bankInfo.accountNumber),console.log(" :",yt),console.log(" :",Yt),console.log(" :",ge.length),console.log("  :",Ve.filter(me=>me.status==="completed").length);let lt=ge.find(me=>{const He=rt(me.accountNumber||"");return He&&He===yt});if(!lt&&yt&&(lt=ge.find(me=>{const He=rt(me.accountNumber||"");return Kt(yt,He)})),lt&&(Gt=!0),!lt&&Yt&&(lt=ge.find(me=>me.name===Yt),lt)){console.log("  :",lt.name);const me=((h=lt.accountNumber)==null?void 0:h.replace(/[-\s]/g,""))||"";yt&&!Kt(yt,me)?(console.log("    ( ) -  "),Gt=!1):Gt=!0}if(lt&&(lt.name&&(Ie.accountHolder=lt.name,console.log("  :",lt.name)),lt.bankName?Ie.bankName=lt.bankName:re.bankInfo.bankName&&(Ie.bankName=re.bankInfo.bankName),Gt&&(Ie.accountNumber=lt.accountNumber||re.bankInfo.accountNumber),y(lt.id||lt._id||null),lt.process&&(Ie.process=lt.process)),!lt){let me=!1;console.log("===     ==="),console.log("  payments :",Ve.length,""),console.log(" :",yt),console.log(" :",Yt);const He=Ve.filter(Te=>Te.status==="completed");console.log(" :",He.length);const Se=[...new Set(He.map(Te=>{var at;return(at=Te.bankInfo)==null?void 0:at.accountHolder}).filter(Boolean))];console.log("   ( 20):",Se.slice(0,20)),console.log("  ():",yt);const Xe=He.filter(Te=>{var at;return(at=Te.bankInfo)==null?void 0:at.accountNumber}).map(Te=>{var at,Qt,Pt;return{holder:(at=Te.bankInfo)==null?void 0:at.accountHolder,account:(Qt=Te.bankInfo)==null?void 0:Qt.accountNumber,clean:rt(((Pt=Te.bankInfo)==null?void 0:Pt.accountNumber)||"")}}).filter(Te=>Te.clean.includes(yt.substring(0,6))||yt.includes(Te.clean.substring(0,6)));console.log("  :",Xe);let Ce=Ve.find(Te=>{var Pt;const at=rt(((Pt=Te.bankInfo)==null?void 0:Pt.accountNumber)||"");return at&&at===yt&&Te.status==="completed"});if(Ce&&console.log("   :",(H=Ce.bankInfo)==null?void 0:H.accountHolder,Ce.process),!Ce&&yt&&(Ce=Ve.find(Te=>{var Qt;const at=rt(((Qt=Te.bankInfo)==null?void 0:Qt.accountNumber)||"");return Kt(yt,at)&&Te.status==="completed"}),Ce&&console.log("   :",(m=Ce.bankInfo)==null?void 0:m.accountHolder,Ce.process)),Ce&&(me=!0),!Ce&&Yt&&(Ce=Ve.find(Te=>{var at;return((at=Te.bankInfo)==null?void 0:at.accountHolder)===Yt&&Te.status==="completed"}),Ce)){console.log("    :",(v=Ce.bankInfo)==null?void 0:v.accountHolder,":",Ce.process);const Te=rt(((k=Ce.bankInfo)==null?void 0:k.accountNumber)||"");yt&&!Kt(yt,Te)?(console.log("    ( ) -  "),me=!1):me=!0}Ce?(console.log(" :",{accountHolder:(j=Ce.bankInfo)==null?void 0:j.accountHolder,accountNumber:(F=Ce.bankInfo)==null?void 0:F.accountNumber,bankName:(S=Ce.bankInfo)==null?void 0:S.bankName,process:Ce.process,status:Ce.status,paymentMatchedByAccountNumber:me}),(M=Ce.bankInfo)!=null&&M.accountHolder&&(Ie.accountHolder=Ce.bankInfo.accountHolder,console.log("  :",Ce.bankInfo.accountHolder)),($=Ce.bankInfo)!=null&&$.bankName?Ie.bankName=Ce.bankInfo.bankName:re.bankInfo.bankName&&(Ie.bankName=re.bankInfo.bankName),me&&(Ie.accountNumber=((Ee=Ce.bankInfo)==null?void 0:Ee.accountNumber)||re.bankInfo.accountNumber),Ce.process&&!Ie.process?(Ie.process=Ce.process,console.log("    :",Ce.process)):console.log("   - process:",Ce.process,"updatedFormData.process:",Ie.process)):console.log("  ")}if(re.vendor&&(Ie.process=re.vendor),!Ie.process){const me=je.toLowerCase();for(const He of Lr)if(me.includes(He.toLowerCase())){Ie.process=He;break}}re.itemName&&(Ie.itemName=re.itemName),Pe(Ie),re.includeVat&&(D(!0),ie(!1));const we=[];if(re.amounts.material||re.amounts.labor||re.amounts.total){const me=[];re.amounts.material&&me.push(`: ${re.amounts.material.toLocaleString()}`),re.amounts.labor&&me.push(`: ${re.amounts.labor.toLocaleString()}`),re.amounts.total&&!re.amounts.material&&!re.amounts.labor&&me.push(`: ${re.amounts.total.toLocaleString()}`),we.push(me.join(", "))}if(re.bankInfo.bankName||re.bankInfo.accountHolder){const me=[];re.bankInfo.bankName&&me.push(re.bankInfo.bankName),re.bankInfo.accountHolder&&me.push(re.bankInfo.accountHolder),re.bankInfo.accountNumber&&me.push(re.bankInfo.accountNumber),me.length>0&&we.push(`: ${me.join(" ")}`)}re.vendor&&we.push(`: ${re.vendor}`),re.includeVat&&we.push("  "),we.length>0?q.success(`  !
${we.join(`
`)}`,{duration:4e3,style:{whiteSpace:"pre-line"}}):q.info("  ...    .")}catch(je){console.error(" :",je),q.error("   .")}};b.useEffect(()=>{(async()=>{try{await ag();const H=await sg();Oe(H),Rt(!0)}catch(H){console.error("  :",H),Rt(!0)}})()},[]);const de=b.useRef({});b.useEffect(()=>{le&&(Object.entries(Ae).forEach(([h,H])=>{JSON.stringify(de.current[h])!==JSON.stringify(H)&&ng(h,H).catch(m=>{console.error("  :",m),q.error("  ")})}),de.current={...Ae})},[Ae,le]);const ye=b.useCallback(async h=>{var v;const H=(v=h.clipboardData)==null?void 0:v.items;if(!H)return;let m=!1;for(let k=0;k<H.length;k++)if(H[k].type.indexOf("image")!==-1){m=!0;break}if(m){if(!p){const k=document.activeElement;(k==null?void 0:k.tagName)==="INPUT"||(k==null?void 0:k.tagName)==="TEXTAREA"||(k==null?void 0:k.classList.contains("form-input"))||q.error("  ");return}for(let k=0;k<H.length;k++)if(H[k].type.indexOf("image")!==-1){h.preventDefault();const j=H[k].getAsFile();if(j){const F=new FileReader;F.onload=async S=>{var $;const M=($=S.target)==null?void 0:$.result;if(M)try{const Ee=t.find(re=>re.id===p),Ve=[...(Ee==null?void 0:Ee.images)||Ae[p]||[],M];await rs.updatePaymentImages(p,Ve),Oe(re=>({...re,[p]:Ve})),await s(),q.success(" ")}catch(Ee){console.error("  :",Ee),q.error("  ")}},F.readAsDataURL(j)}}}},[p,t,Ae,s]);b.useEffect(()=>(document.addEventListener("paste",ye),()=>document.removeEventListener("paste",ye)),[ye]);const Q=(l==null?void 0:l.name)===""?t.filter(h=>c.some(H=>H.name===h.project)):t,Qe=[...Q].sort((h,H)=>new Date(H.requestDate).getTime()-new Date(h.requestDate).getTime()),nt=Qe.filter(h=>h.status==="pending").length;console.log("[ ]",{" payments":t.length,"  ":Q.length," ":nt," ":t.filter(h=>h.status==="completed").length," statusFilter":Z," ":l==null?void 0:l.name," ":c.length,allRecords:Qe.length});const ct=Qe.filter(h=>{var j,F,S;const H=d===""||((j=h.purpose)==null?void 0:j.toLowerCase().includes(d.toLowerCase()))||((F=h.itemName)==null?void 0:F.toLowerCase().includes(d.toLowerCase()))||((S=h.process)==null?void 0:S.toLowerCase().includes(d.toLowerCase())),m=h.status===Z,v=Ye==="all"||!Ye||h.project===Ye,k=!it||Z!=="completed"||h.requestedBy===(l==null?void 0:l.name);return H&&m&&v&&k}).sort((h,H)=>{if(Z==="completed"){const m=!!h.completionDate,v=!!H.completionDate;return m&&!v?-1:!m&&v?1:m&&v?new Date(H.completionDate).getTime()-new Date(h.completionDate).getTime():new Date(H.requestDate).getTime()-new Date(h.requestDate).getTime()}return new Date(H.requestDate).getTime()-new Date(h.requestDate).getTime()}),jt=h=>{const H=h.id||h._id||null;if(ut===H){y(null);const j=document.querySelector('input[placeholder=" "]');j&&setTimeout(()=>{j.focus()},100);return}y(H);const m=En(h.name);let v=h.bankName||"",k=h.accountNumber||"";if(k&&!v){const j=k.trim().split(/\s+/);if(j.length>=2){const F=j[0];(F.includes("")||F.includes("")||F.includes("")||F.includes("")||F.includes(""))&&(v=F,k=j.slice(1).join(""))}}Pe(j=>({...j,accountHolder:m,bankName:v,accountNumber:k}))};ct.reduce((h,H)=>{const m=H.materialAmount||0,v=H.laborAmount||0,k=H.amount||0;let j=m,F=v,S=0;return m===0&&v===0&&k>0?H.includesVAT?(j=Math.round(k/1.1),S=k-j):(j=k,S=0):H.includesVAT?(m>0&&(j=Math.round(m/1.1)),v>0&&(F=Math.round(v/1.1)),S=k-(j+F)):S=0,h.material+=j,h.labor+=F,h.vat+=S,h.total+=k,h},{material:0,labor:0,vat:0,total:0});const Lt=async()=>{var H;if(We){console.log(" Already submitting, ignoring click");return}if(console.log(" handleSave called"),console.log(" Current user:",l),console.log(" Form data:",R),!R.project){q.error(" ");return}if(!R.itemName){q.error(" ");return}const h=Number(R.amount)||0;if(h===0){q.error(" ");return}_t(!0);try{const m=O?Math.round(h*.967):h,v=new Date;if(N){const k={project:R.project,requestDate:new Date(R.date),purpose:R.itemName,amount:m,category:"material",urgency:"normal",process:R.process,itemName:R.itemName,includesVAT:E,applyTaxDeduction:O,materialAmount:m,laborAmount:0,originalLaborAmount:0,accountHolder:R.accountHolder,bank:R.bankName,accountNumber:R.accountNumber,bankInfo:R.accountHolder||R.bankName||R.accountNumber?{accountHolder:R.accountHolder,bankName:R.bankName,accountNumber:R.accountNumber}:void 0,updatedAt:v};console.log(" Updating payment:",k),await i(N,k),q.success(" "),A(null)}else{const k=R.project||"",j={id:`payment_${Date.now()}`,project:k,requestDate:new Date(R.date),requestedBy:(l==null?void 0:l.name)||"  ",purpose:R.itemName,amount:m,status:"pending",category:"material",urgency:"normal",process:R.process,itemName:R.itemName,includesVAT:E,applyTaxDeduction:O,materialAmount:m,laborAmount:0,originalLaborAmount:0,accountHolder:R.accountHolder,bank:R.bankName,accountNumber:R.accountNumber,bankInfo:R.accountHolder||R.bankName||R.accountNumber?{accountHolder:R.accountHolder,bankName:R.bankName,accountNumber:R.accountNumber}:void 0,quickText:R.quickText||"",images:R.quickImages,attachments:[],createdAt:v,updatedAt:v};console.log(" Creating payment:",j),console.log(" Images in payment:",((H=R.quickImages)==null?void 0:H.length)||0,"");const F=await r(j);if(De.current=F,setTimeout(()=>{De.current=null},1e4),q.success(" "),R.accountHolder&&R.bankName&&R.accountNumber){const S=E||O?"01074088864":"01089423283";try{await ue.post("/payments/send-toss-payment-sms",{recipientPhone:S,accountHolder:R.accountHolder,bankName:R.bankName,accountNumber:R.accountNumber,amount:m,projectName:k,itemName:R.itemName,process:R.process,paymentId:F}),q.success("   ")}catch(M){console.error("SMS  :",M)}}}Pe(k=>({project:k.project,date:et(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),D(!1),ie(!1),y(null),window.innerWidth<768&&Ne("list")}catch(m){console.error(" Payment save error:",m),q.error("  : "+m.message)}finally{_t(!1)}},St=h=>{var H,m,v,k;try{console.log("[handleEdit] Starting edit for payment:",h.id);const j=h.originalMaterialAmount!==void 0?h.originalMaterialAmount:h.materialAmount||0,F=h.originalLaborAmount!==void 0?h.originalLaborAmount:h.laborAmount||0,S={project:h.project||"",date:h.requestDate?et(new Date(h.requestDate),"yyyy-MM-dd"):et(new Date,"yyyy-MM-dd"),process:h.process||"",itemName:h.itemName||h.purpose||"",materialCost:j>0?j.toString():"",laborCost:F>0?F.toString():"",amount:((H=h.amount)==null?void 0:H.toString())||"",accountHolder:((m=h.bankInfo)==null?void 0:m.accountHolder)||"",bankName:((v=h.bankInfo)==null?void 0:v.bankName)||"",accountNumber:((k=h.bankInfo)==null?void 0:k.accountNumber)||"",images:h.attachments||[],quickText:h.quickText||"",quickImages:h.images||[]};console.log("[handleEdit] Setting form data:",S),Pe(S),D(h.includesVAT||!1),ie(h.applyTaxDeduction||!1),g(h.id),A(h.id),ce&&Ne("form"),console.log("[handleEdit] Edit setup complete"),q.success("  ")}catch(j){console.error("[handleEdit] Error:",j),q.error("     ")}},Jt=async h=>{var H,m,v;try{const k=((H=h.bankInfo)==null?void 0:H.accountHolder)||h.accountHolder,j=((m=h.bankInfo)==null?void 0:m.bankName)||h.bank,F=((v=h.bankInfo)==null?void 0:v.accountNumber)||h.accountNumber;if(!k||!j||!F){q.error("  .    .");return}if(!window.confirm(`  ?

: 
: ${j}
: ${F}
: ${h.amount.toLocaleString()}`))return;const M=F.replace(/[-\s]/g,""),$=Eu[j]||j,Ee=Au[j]||"004",je="",Ve=`supertoss://send?amount=${h.amount}&bankCode=${Ee}&bank=${encodeURIComponent($)}&accountNo=${M}&receiverName=${encodeURIComponent(je)}&toName=${encodeURIComponent(je)}`;let re=!1;try{window.location.href=Ve,re=!0,q.success("  ...",{duration:3e3}),setTimeout(()=>{const Ie=/iPhone|iPad|iPod/i.test(navigator.userAgent),Nt=/Android/i.test(navigator.userAgent);(Ie||Nt)&&q(`      .

: 
: ${F}
: ${h.amount.toLocaleString()}

    .`,{icon:"",duration:8e3})},2e3)}catch(Ie){console.error("   :",Ie),q(`   .

: 
: ${j}
: ${F}
: ${h.amount.toLocaleString()}

    .`,{icon:"",duration:1e4})}}catch(k){console.error(" :",k),q.error(`   : ${k.message}`)}},cs=async h=>{const H=t.find(m=>m.id===h);if(H&&H.quickText){const m=localStorage.getItem("executionMemos"),v=m?JSON.parse(m):{};v[h]=H.quickText,localStorage.setItem("executionMemos",JSON.stringify(v))}o(h,{status:"completed",completionDate:new Date}),J(!1),xe("completed"),Pe(m=>({...m,project:""})),q.success(" "),window.dispatchEvent(new CustomEvent("paymentCompleted"));try{await i(h,{status:"completed"});const m=js.getSocket();m&&m.emit("payment:refresh",{paymentId:h,status:"completed"})}catch(m){console.error(" API :",m),o(h,{status:"pending",completionDate:void 0}),xe("pending"),q.error("   -  ")}},zt=async h=>{var v;if(!p){q.error("  ");return}const m=Array.from(((v=h.target)==null?void 0:v.files)||[]).filter(k=>k.type.startsWith("image/"));if(m.length!==0){try{const k=await Promise.all(m.map(M=>new Promise(($,Ee)=>{const je=new FileReader;je.onload=Ve=>{var Ie;const re=(Ie=Ve.target)==null?void 0:Ie.result;re?$(re):Ee(new Error("  "))},je.onerror=()=>Ee(new Error("FileReader ")),je.readAsDataURL(M)}))),j=t.find(M=>M.id===p),S=[...(j==null?void 0:j.images)||Ae[p]||[],...k];await rs.updatePaymentImages(p,S),Oe(M=>({...M,[p]:S})),await s(),q.success(`${k.length}  `)}catch(k){console.error("  :",k),q.error("  ")}h.target.value=""}},pn=async h=>{if(p)try{const H=t.find(k=>k.id===p),v=((H==null?void 0:H.images)||Ae[p]||[]).filter((k,j)=>j!==h);await rs.updatePaymentImages(p,v),Oe(k=>({...k,[p]:v})),await s()}catch(H){console.error("  :",H),q.error("  ")}},fn=h=>{P(h),U(!0)},_s=h=>{h.preventDefault(),_(!0)},bs=h=>{h.preventDefault(),_(!1)},$s=async h=>{if(h.preventDefault(),_(!1),!p){q.error("  ");return}const m=Array.from(h.dataTransfer.files).filter(v=>v.type.startsWith("image/"));if(m.length!==0)try{const v=await Promise.all(m.map(S=>new Promise((M,$)=>{const Ee=new FileReader;Ee.onload=je=>{var re;const Ve=(re=je.target)==null?void 0:re.result;Ve?M(Ve):$(new Error("  "))},Ee.onerror=()=>$(new Error("FileReader ")),Ee.readAsDataURL(S)}))),k=t.find(S=>S.id===p),F=[...(k==null?void 0:k.images)||Ae[p]||[],...v];await rs.updatePaymentImages(p,F),Oe(S=>({...S,[p]:F})),await s(),q.success(`${v.length}  `)}catch(v){console.error("  :",v),q.error("  ")}};return n.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[n.jsxDEV("div",{className:"lg:hidden mb-4",children:n.jsxDEV("select",{value:R.project,onChange:h=>{Pe({...R,project:h.target.value}),h.target.value&&localStorage.setItem("lastSelectedProject",h.target.value)},className:"w-full px-3 py-2.5 md:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(l==null?void 0:l.name)!==""&&n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2451,columnNumber:35},void 0),c.filter(h=>h.status!=="completed").map(h=>n.jsxDEV("option",{value:h.name,children:h.name},h.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2453,columnNumber:13},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2441,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2440,columnNumber:7},void 0),n.jsxDEV("div",{className:"lg:hidden border-b border-gray-200 mb-4",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:n.jsxDEV("nav",{className:"flex space-x-4",children:[n.jsxDEV("button",{onClick:()=>Ne("form"),className:`py-2 px-1 border-b-2 font-medium text-sm ${pe==="form"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2462,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>Ne("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${pe==="list"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2472,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>Ne("image"),className:`py-2 px-1 border-b-2 font-medium text-sm ${pe==="image"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2482,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2461,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2460,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2459,columnNumber:7},void 0),n.jsxDEV("div",{className:"payment-container grid grid-cols-1 md:grid-cols-6 ipad:grid-cols-6 ipad-lg:grid-cols-6 ipad-xl:grid-cols-12 ipad-2xl:grid-cols-12 gap-3 md:gap-4",children:[n.jsxDEV("div",{className:`payment-form md:col-span-2 ipad:col-span-2 ipad-lg:col-span-2 ipad-xl:col-span-2 ipad-2xl:col-span-2 bg-white rounded-lg border p-3 md:p-4 overflow-y-auto h-[calc(100vh-180px)] ${pe!=="form"?"hidden md:block":""}`,children:n.jsxDEV("div",{className:"space-y-4",children:[n.jsxDEV("div",{className:"hidden lg:block payment-project-row",children:n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("select",{value:R.project,onChange:h=>{Pe({...R,project:h.target.value}),h.target.value&&localStorage.setItem("lastSelectedProject",h.target.value)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(l==null?void 0:l.name)!==""&&n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2517,columnNumber:43},void 0),c.filter(h=>h.status!=="completed").map(h=>n.jsxDEV("option",{value:h.name,children:h.name},h.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2519,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2507,columnNumber:17},void 0),n.jsxDEV("select",{value:R.bankName,onChange:h=>Pe({...R,bankName:h.target.value}),className:"payment-bank-select hidden px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-8",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2527,columnNumber:19},void 0),n.jsxDEV("option",{value:"KB",children:"KB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2528,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2529,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2530,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2531,columnNumber:19},void 0),n.jsxDEV("option",{value:"NH",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2532,columnNumber:19},void 0),n.jsxDEV("option",{value:"IBK",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2533,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2534,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2535,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2536,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2537,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2538,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2539,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2522,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2506,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2505,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("textarea",{value:R.quickText,onChange:h=>Pe({...R,quickText:h.target.value}),onPaste:h=>{var m;const H=(m=h.clipboardData)==null?void 0:m.items;if(H){for(let v=0;v<H.length;v++)if(H[v].type.indexOf("image")!==-1){h.preventDefault();const k=H[v].getAsFile();if(k){const j=new FileReader;j.onload=F=>{var M;const S=(M=F.target)==null?void 0:M.result;Pe($=>({...$,quickImages:[...$.quickImages,S]}))},j.readAsDataURL(k)}break}}},onDragOver:h=>{h.preventDefault(),h.stopPropagation()},onDrop:h=>{h.preventDefault(),h.stopPropagation(),Array.from(h.dataTransfer.files).filter(v=>v.type.startsWith("image/")).forEach(v=>{const k=new FileReader;k.onload=j=>{var S;const F=(S=j.target)==null?void 0:S.result;Pe(M=>({...M,quickImages:[...M.quickImages,F]}))},k.readAsDataURL(v)})},rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:ce?"  ":"   (   Ctrl+V)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2546,columnNumber:15},void 0),R.quickImages.length>0&&n.jsxDEV("div",{className:"mt-2 mb-2 grid grid-cols-3 gap-2",children:R.quickImages.map((h,H)=>n.jsxDEV("div",{className:"relative group",children:[n.jsxDEV("img",{src:h,alt:` ${H+1}`,className:"w-full h-20 object-cover rounded-lg border"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2601,columnNumber:23},void 0),n.jsxDEV("button",{type:"button",onClick:()=>{Pe(m=>({...m,quickImages:m.quickImages.filter((v,k)=>k!==H)}))},className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2606,columnNumber:23},void 0)]},H,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2600,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2598,columnNumber:17},void 0),n.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[n.jsxDEV("label",{className:"cursor-pointer",children:[n.jsxDEV("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:h=>{Array.from(h.target.files||[]).forEach(m=>{const v=new FileReader;v.onload=k=>{var F;const j=(F=k.target)==null?void 0:F.result;Pe(S=>({...S,quickImages:[...S.quickImages,j]}))},v.readAsDataURL(m)}),h.target.value=""}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2625,columnNumber:19},void 0),n.jsxDEV("div",{className:"w-full h-10 flex items-center justify-center bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium border border-gray-300",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2646,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2624,columnNumber:17},void 0),n.jsxDEV("button",{type:"button",onClick:ae,className:"h-10 flex items-center justify-center bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors text-sm font-medium",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2650,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2623,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2545,columnNumber:13},void 0),n.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",R.date&&`(${et(new Date(R.date),"E",{locale:kt})})`]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2663,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:R.date,onChange:h=>Pe({...R,date:h.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer text-gray-900",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundColor:"white",backgroundImage:"none"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2666,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2662,columnNumber:15},void 0),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2682,columnNumber:17},void 0),n.jsxDEV("button",{ref:Le,type:"button",onClick:()=>he(!0),className:"w-full px-3 py-2 border rounded-lg text-left bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:R.process||n.jsxDEV("span",{className:"text-gray-400",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2689,columnNumber:40},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2683,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2681,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2661,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2696,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:R.itemName,onChange:h=>Pe({...R,itemName:h.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2697,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2695,columnNumber:13},void 0),n.jsxDEV("div",{className:"space-y-2 payment-amount-section",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2708,columnNumber:17},void 0),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("input",{type:"text",value:R.amount?Number(R.amount).toLocaleString():"",onChange:h=>{const H=h.target.value.replace(/[^0-9]/g,"");Pe({...R,amount:H})},className:"w-full px-3 py-2 pr-8 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2710,columnNumber:19},void 0),n.jsxDEV("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2721,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2709,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2707,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex items-center gap-4",children:[n.jsxDEV("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:h=>h.preventDefault(),onClick:()=>{E||ie(!1),D(!E)},children:[n.jsxDEV("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${E?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:E&&n.jsxDEV("span",{className:"text-white text-xs",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2739,columnNumber:36},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2738,columnNumber:19},void 0),n.jsxDEV("span",{className:"ml-2 text-sm text-gray-700",children:"  (10%)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2741,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2727,columnNumber:17},void 0),n.jsxDEV("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:h=>h.preventDefault(),onClick:()=>{O||D(!1),ie(!O)},children:[n.jsxDEV("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${O?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:O&&n.jsxDEV("span",{className:"text-white text-xs",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2757,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2756,columnNumber:19},void 0),n.jsxDEV("span",{className:"ml-2 text-sm text-gray-700",children:"3.3% "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2759,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2745,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2726,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2706,columnNumber:13},void 0),n.jsxDEV("div",{className:"payment-account-section border-t pt-3 space-y-2",children:[(st.length>0||w.length>0&&!ut)&&n.jsxDEV("div",{className:"payment-suggestions-row grid grid-cols-2 gap-2",children:[n.jsxDEV("div",{className:`payment-contractor-suggestions bg-amber-50 border border-amber-200 rounded-lg p-2 ${st.length===0?"hidden":""}`,children:[n.jsxDEV("label",{className:"block text-xs font-medium text-amber-900 mb-1",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2775,columnNumber:21},void 0),n.jsxDEV("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:st.map(h=>{const H=h.id||h._id,m=ut===H;return n.jsxDEV("button",{type:"button",onClick:()=>jt(h),className:`w-full text-left px-2 py-1.5 rounded border transition-colors ${m?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-400 hover:bg-gray-50"}`,children:[n.jsxDEV("div",{className:"font-medium text-xs text-gray-900",children:En(h.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2791,columnNumber:29},void 0),n.jsxDEV("div",{className:"text-[10px] text-gray-500 truncate",children:[h.bankName||""," ",h.accountNumber||""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2794,columnNumber:29},void 0)]},H,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2781,columnNumber:27},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2776,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2772,columnNumber:19},void 0),n.jsxDEV("div",{className:`payment-history-suggestions bg-blue-50 border border-blue-200 rounded-lg p-2 ${w.length===0||ut?"hidden":""}`,children:[n.jsxDEV("label",{className:"block text-xs font-medium text-blue-900 mb-1",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2807,columnNumber:21},void 0),n.jsxDEV("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:w.map((h,H)=>n.jsxDEV("button",{type:"button",onClick:()=>{Pe(m=>({...m,accountHolder:h.accountHolder,bankName:h.bankName,accountNumber:h.accountNumber})),T([])},className:"w-full text-left px-2 py-1.5 rounded border border-blue-200 bg-white hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[n.jsxDEV("div",{className:"font-medium text-xs text-gray-900",children:h.accountHolder},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2824,columnNumber:27},void 0),n.jsxDEV("div",{className:"text-[10px] text-gray-500 truncate",children:[h.bankName," ",h.accountNumber]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2827,columnNumber:27},void 0)]},H,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2810,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2808,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2804,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2770,columnNumber:17},void 0),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2839,columnNumber:17},void 0),n.jsxDEV("input",{type:"text",value:R.accountHolder,onChange:h=>Pe({...R,accountHolder:h.target.value}),onFocus:()=>fe(!0),onBlur:()=>setTimeout(()=>fe(!1),150),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2840,columnNumber:17},void 0),G&&ne.length>0&&n.jsxDEV("div",{className:"absolute z-20 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:ne.map((h,H)=>n.jsxDEV("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 border-b last:border-b-0 flex justify-between items-center",onMouseDown:m=>m.preventDefault(),onClick:()=>{let m=h.bankName||"",v=h.accountNumber||"";const k=["KB","","","","","","","","","NH","","","IBK","","","SC","","","","","","","","","","","","","KDB","","","","","","","","",""],j={:"KB",:"KB",:"",:"",:"",:"NH",:"NH",:"IBK",:"IBK",:"SC",:"",:"",:"",:"",:"KDB",:""};for(const F of k)if(v.includes(F)){m||(m=j[F]||F),v=v.replace(F,"").trim();break}for(const F of k)if(m.includes(F)){const S=j[F]||F,M=m.replace(F,"").trim();M&&/\d/.test(M)&&(v=M),m=S;break}v=v.replace(/[^\d\-]/g,"").trim(),Pe({...R,accountHolder:h.name,bankName:m||R.bankName,accountNumber:v||R.accountNumber}),fe(!1)},children:[n.jsxDEV("span",{className:"font-medium",children:h.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2940,columnNumber:25},void 0),n.jsxDEV("span",{className:"text-xs text-gray-500",children:h.source==="contractor"?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2941,columnNumber:25},void 0)]},`${h.name}-${H}`,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2853,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2851,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2838,columnNumber:15},void 0),n.jsxDEV("div",{className:"payment-bank-field",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2952,columnNumber:17},void 0),n.jsxDEV("select",{value:R.bankName,onChange:h=>Pe({...R,bankName:h.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2958,columnNumber:19},void 0),n.jsxDEV("option",{value:"KB",children:"KB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2959,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2960,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2961,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2962,columnNumber:19},void 0),n.jsxDEV("option",{value:"NH",children:"NH"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2963,columnNumber:19},void 0),n.jsxDEV("option",{value:"IBK",children:"IBK"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2964,columnNumber:19},void 0),n.jsxDEV("option",{value:"SC",children:"SC"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2965,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2966,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2967,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2968,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2969,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2970,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2971,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2972,columnNumber:19},void 0),n.jsxDEV("option",{value:"KDB",children:"KDB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2973,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2974,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2975,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2976,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2977,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2978,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2979,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2980,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2953,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2951,columnNumber:15},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2985,columnNumber:17},void 0),n.jsxDEV("input",{type:"text",value:R.accountNumber,onChange:h=>Pe({...R,accountNumber:h.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2986,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2984,columnNumber:15},void 0),n.jsxDEV("div",{className:"pt-2 border-t",children:n.jsxDEV("div",{className:"flex justify-between items-baseline",children:[n.jsxDEV("span",{className:"font-medium",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2997,columnNumber:19},void 0),n.jsxDEV("div",{className:"text-right",children:[(E||O)&&n.jsxDEV("span",{className:"text-xs text-gray-500 mr-2",children:["(",E&&" ",O&&"3.3% ",")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3e3,columnNumber:23},void 0),n.jsxDEV("span",{className:"font-semibold",children:[(()=>{const h=Number(R.amount)||0;let H=h;return O&&(H=Math.round(h*.967)),H.toLocaleString()})(),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3004,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2998,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2996,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2995,columnNumber:15},void 0),n.jsxDEV("div",{className:"mt-6 lg:my-[50px]",children:[N&&n.jsxDEV("button",{onClick:()=>{A(null),Pe(h=>({project:h.project,date:et(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),D(!1),ie(!1),y(null),q.info(" ")},className:"w-full py-2 mb-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 touch-manipulation",style:{minHeight:"48px"},children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3023,columnNumber:19},void 0),n.jsxDEV("button",{onClick:h=>{console.log(" Payment button clicked!",h),console.log(" Button element:",h.currentTarget),console.log(" Form data:",R),Lt()},disabled:We,className:`w-full py-3 rounded-lg touch-manipulation font-medium text-base ${We?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800 active:bg-gray-950"}`,style:{minHeight:"48px",WebkitTapHighlightColor:"transparent"},children:We?"...":N?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3052,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3021,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2767,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2503,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2500,columnNumber:9},void 0),n.jsxDEV("div",{className:`payment-list md:col-span-4 ipad:col-span-4 ipad-lg:col-span-4 ipad-xl:col-span-4 ipad-2xl:col-span-4 bg-white rounded-lg border overflow-hidden flex flex-col h-[calc(100vh-180px)] ${pe!=="list"?"hidden md:flex":""}`,children:[n.jsxDEV("div",{className:"bg-gray-50 px-4 pt-3 pb-0 flex-shrink-0",children:n.jsxDEV("div",{className:"flex items-center justify-between gap-4",children:n.jsxDEV("nav",{className:"flex gap-2 overflow-x-auto flex-1",children:[n.jsxDEV("button",{onClick:()=>xe("pending"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${Z==="pending"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["",n.jsxDEV("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${Z==="pending"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:Qe.filter(h=>h.status==="pending").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3091,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3082,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{xe("completed"),Pe(h=>({...h,project:""}))},className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${Z==="completed"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["",n.jsxDEV("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${Z==="completed"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:Qe.filter(h=>h.status==="completed").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3110,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3097,columnNumber:17},void 0),Z==="completed"&&n.jsxDEV("label",{className:"ml-3 flex items-center gap-1.5 cursor-pointer text-xs text-gray-600",children:[n.jsxDEV("input",{type:"checkbox",checked:it,onChange:h=>{W(h.target.checked),localStorage.setItem("payments_showMyRequestsOnly",String(h.target.checked))},className:"w-3.5 h-3.5 rounded border-gray-300 text-gray-600 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3119,columnNumber:21},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3118,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3081,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3080,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3079,columnNumber:11},void 0),n.jsxDEV("div",{className:"border-b border-gray-200"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3134,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex-1 overflow-auto p-4",children:ct.length>0?n.jsxDEV("div",{className:"space-y-4",children:ct.map(h=>{var F,S,M;const H=h.amount||0,m=((F=h.bankInfo)==null?void 0:F.accountHolder)||h.accountHolder||"",v=((S=h.bankInfo)==null?void 0:S.bankName)||h.bank||"",k=((M=h.bankInfo)==null?void 0:M.accountNumber)||h.accountNumber||"",j=m&&v&&k?`${m} | ${v} ${k}`:" ";return n.jsxDEV("div",{onClick:()=>g(h.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${p===h.id?"border-gray-900 bg-gray-50":"border-gray-200 bg-white hover:border-gray-400"}`,children:[n.jsxDEV("div",{className:"flex justify-between items-start mb-2.5",children:[n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("div",{className:"flex items-baseline gap-2",children:[h.process&&n.jsxDEV("span",{className:"text-xs text-gray-500 shrink-0",children:["[",h.process,"]"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3166,columnNumber:31},void 0),n.jsxDEV("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:h.purpose||h.itemName||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3168,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3164,columnNumber:27},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:h.project||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3172,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3163,columnNumber:25},void 0),n.jsxDEV("div",{className:"text-right ml-3 shrink-0",children:[n.jsxDEV("p",{className:"text-base font-bold text-gray-900",children:[H.toLocaleString(),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3175,columnNumber:27},void 0),n.jsxDEV("p",{className:"text-[10px] text-gray-400",children:[h.requestedBy||"-","  ",et(new Date(h.requestDate),"MM/dd",{locale:kt})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3178,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3174,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3162,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex items-center gap-2 mb-2.5 text-xs",children:[n.jsxDEV("span",{className:"text-gray-400",children:[" ",(h.materialAmount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3186,columnNumber:25},void 0),n.jsxDEV("span",{className:"text-gray-300",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3187,columnNumber:25},void 0),n.jsxDEV("span",{className:"text-gray-400",children:[" ",(h.laborAmount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3188,columnNumber:25},void 0),h.includesVAT&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"text-gray-300",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3191,columnNumber:29},void 0),n.jsxDEV("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-700 text-[10px] rounded",children:"VAT"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3192,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3190,columnNumber:27},void 0),h.applyTaxDeduction&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"text-gray-300",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3197,columnNumber:29},void 0),n.jsxDEV("span",{className:"px-1.5 py-0.5 bg-purple-50 text-purple-700 text-[10px] rounded",children:"3.3%"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3198,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3196,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3185,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex items-center justify-between mb-2.5",children:[n.jsxDEV("div",{className:"text-xs text-gray-500 truncate flex-1",children:j},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3205,columnNumber:25},void 0),n.jsxDEV("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[n.jsxDEV("button",{onClick:$=>{$.stopPropagation(),St(h)},className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"",children:n.jsxDEV(tm,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3217,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3209,columnNumber:27},void 0),n.jsxDEV("button",{onClick:async $=>{$.stopPropagation(),window.confirm("  ?")&&(await a(h.id),q.success(""))},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"",children:n.jsxDEV(Ys,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3230,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3219,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3208,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3204,columnNumber:23},void 0),Z==="pending"&&(l==null?void 0:l.role)&&["manager","admin"].includes(l.role)&&n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("button",{onClick:$=>{if($.stopPropagation(),h.status==="completed"){q.info("   ");return}Jt(h)},disabled:h.status==="completed",className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${h.status==="completed"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,children:h.status==="completed"?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3239,columnNumber:27},void 0),n.jsxDEV("button",{onClick:$=>{$.stopPropagation(),cs(h.id)},disabled:h.status==="completed",className:`flex-1 py-1.5 px-2 text-white rounded text-xs font-medium transition-colors ${h.status==="completed"?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:h.status==="completed"?"#9ca3af":"#5f81a5"},onMouseEnter:$=>{h.status!=="completed"&&($.currentTarget.style.backgroundColor="#4a6b8a")},onMouseLeave:$=>{h.status!=="completed"&&($.currentTarget.style.backgroundColor="#5f81a5")},children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3257,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3238,columnNumber:25},void 0)]},h.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3152,columnNumber:21},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3138,columnNumber:15},void 0):n.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3288,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3136,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3075,columnNumber:9},void 0),n.jsxDEV("div",{className:`payment-images md:col-span-6 ipad:col-span-6 ipad-lg:col-span-6 ipad-xl:col-span-6 ipad-2xl:col-span-6 bg-white rounded-lg border flex flex-col overflow-hidden h-[calc(100vh-180px)] ${pe!=="image"?"hidden lg:flex":""}`,onDragOver:_s,onDragLeave:bs,onDrop:$s,children:[n.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:zt,className:"hidden",id:"image-file-input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3304,columnNumber:11},void 0),ce&&p&&pe==="image"&&(()=>{const h=Qe.find(H=>H.id===p);return h?n.jsxDEV("div",{className:"border-b bg-gray-50 p-3",children:n.jsxDEV("div",{className:"flex justify-between items-start",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("p",{className:"font-medium text-gray-900 text-sm",children:h.purpose||h.itemName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3321,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:[h.process||"-","  ",et(new Date(h.requestDate),"yyyy.MM.dd",{locale:kt})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3322,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3320,columnNumber:21},void 0),n.jsxDEV("p",{className:"text-sm font-bold text-gray-900",children:["",(h.amount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3326,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3319,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3318,columnNumber:17},void 0):null})(),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 relative",onClick:h=>{var m;const H=h.target;if(!H.closest("img")&&!H.closest("button")&&p){const v=Qe.find(S=>S.id===p),k=(v==null?void 0:v.images)||[],j=Ae[p]||[];(k.length>0?k:j).length>0&&((m=document.getElementById("image-file-input"))==null||m.click())}},children:p?(()=>{const h=Qe.find(k=>k.id===p),H=(h==null?void 0:h.images)||[],m=Ae[p]||[],v=H.length>0?H:m;return n.jsxDEV("div",{className:"h-full flex flex-col",children:[n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3362,columnNumber:21},void 0),n.jsxDEV("textarea",{value:(h==null?void 0:h.quickText)||(h==null?void 0:h.notes)||"",readOnly:!0,placeholder:" ",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-gray-50 resize-none",rows:8},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3363,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3361,columnNumber:19},void 0),v.length>0&&n.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-3",children:v.map((k,j)=>n.jsxDEV("div",{className:"relative group",children:[n.jsxDEV("img",{src:k,alt:` ${j+1}`,className:"w-full aspect-square object-contain rounded-lg cursor-pointer hover:opacity-90 transition-opacity border bg-gray-100",onClick:F=>{F.stopPropagation(),fn(k)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3377,columnNumber:27},void 0),n.jsxDEV("button",{onClick:F=>{F.stopPropagation(),pn(j)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:n.jsxDEV(Dt,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3393,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3386,columnNumber:27},void 0),n.jsxDEV("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1.5 py-0.5 rounded",children:[j+1,"/",v.length]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3395,columnNumber:27},void 0)]},j,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3376,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3374,columnNumber:21},void 0),n.jsxDEV("label",{htmlFor:"image-file-input",className:`block cursor-pointer ${v.length>0?"":"flex-1"}`,onClick:k=>k.stopPropagation(),children:n.jsxDEV("div",{className:`w-full border-2 border-dashed rounded-lg p-4 text-center transition-colors flex flex-col items-center justify-center ${x?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"} ${v.length>0?"min-h-[80px]":"min-h-[200px]"}`,children:[n.jsxDEV(Sr,{className:`mx-auto text-gray-400 mb-1 ${v.length>0?"h-6 w-6":"h-10 w-10 mb-2"}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3414,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-sm font-medium text-gray-700",children:v.length>0?" ":" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3415,columnNumber:23},void 0),v.length===0&&n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"   Ctrl+V "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3419,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3409,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3404,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3359,columnNumber:17},void 0)})():n.jsxDEV("div",{className:"h-full flex items-center justify-center min-h-[200px]",children:n.jsxDEV("div",{className:"text-center text-gray-400",children:[n.jsxDEV(kn,{className:"h-12 w-12 mx-auto mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3428,columnNumber:19},void 0),n.jsxDEV("p",{className:"text-sm",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3429,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3427,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3426,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3336,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3296,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2497,columnNumber:7},void 0),oe&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"lg:hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b",children:[n.jsxDEV("h2",{className:"text-base font-bold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3444,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>he(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:n.jsxDEV(Dt,{className:"h-4 w-4 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3449,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3445,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3443,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-3 overflow-y-auto max-h-[calc(80vh-100px)]",children:[n.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mb-2",children:Lr.map(h=>n.jsxDEV("button",{onClick:()=>{Pe({...R,process:h}),he(!1)},className:`p-2 text-sm text-center border rounded-lg transition-all ${R.process===h?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:h},h,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3456,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3454,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{Pe({...R,process:""}),he(!1)},className:"w-full p-2 text-sm text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3473,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3453,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3442,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3441,columnNumber:11},void 0),n.jsxDEV("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>he(!1),children:n.jsxDEV("div",{onClick:h=>h.stopPropagation(),className:"absolute bg-white rounded-lg shadow-xl border border-gray-200",style:{top:Le.current?`${Le.current.getBoundingClientRect().bottom+window.scrollY+4}px`:"50%",left:Le.current?`${Le.current.getBoundingClientRect().left+window.scrollX}px`:"50%"},children:[n.jsxDEV("div",{className:"flex items-center justify-between p-2 border-b",children:[n.jsxDEV("h2",{className:"text-sm font-bold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3497,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>he(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:n.jsxDEV(Dt,{className:"h-3 w-3 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3502,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3498,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3496,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-2",children:[n.jsxDEV("div",{className:"grid grid-cols-4 gap-1.5 mb-2",children:Lr.map(h=>n.jsxDEV("button",{onClick:()=>{Pe({...R,process:h}),he(!1)},className:`p-1.5 text-xs text-center border rounded-lg transition-all whitespace-nowrap ${R.process===h?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:h},h,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3509,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3507,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{Pe({...R,process:""}),he(!1)},className:"w-full p-1.5 text-xs text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3526,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3506,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3488,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3487,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3439,columnNumber:9},void 0),X&&n.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>U(!1),children:n.jsxDEV("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[n.jsxDEV("button",{onClick:h=>{h.stopPropagation(),U(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:n.jsxDEV(Dt,{className:"h-8 w-8"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3555,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3548,columnNumber:13},void 0),n.jsxDEV("img",{src:ee,alt:" ",className:"max-w-full max-h-[90vh] object-contain",onClick:h=>h.stopPropagation()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3557,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3547,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3543,columnNumber:9},void 0),Je&&n.jsxDEV(Zf,{projectName:tt,onClose:()=>$e(!1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3569,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2438,columnNumber:5},void 0)},og=()=>{var R,Pe;const{user:t}=Is(),{loadProjectsFromAPI:s,projects:e}=Us(),r=fr(),[a,i]=b.useState([]),[o,l]=b.useState(!0),[c,d]=b.useState(null),[f,p]=b.useState([]),[g,N]=b.useState(!1),[A,x]=b.useState(""),[_,E]=b.useState(""),[D,O]=b.useState(null),[ie,X]=b.useState(null),[U,ee]=b.useState(""),[P,pe]=b.useState(null),[Ne,ce]=b.useState(""),[Y,oe]=b.useState(null),[he,Le]=b.useState(new Set),Z=b.useRef(null),[xe,Ye]=b.useState(window.innerWidth<768),[gt,it]=b.useState(!1),[W,_e]=b.useState(null),[J,ke]=b.useState(new Set),[Be,Je]=b.useState(()=>localStorage.getItem("finishCheck_showOnlyIncomplete")==="true"),[$e,tt]=b.useState(!1),[Fe,We]=b.useState(!1),[_t,B]=b.useState(new Set);b.useEffect(()=>{localStorage.setItem("finishCheck_showOnlyIncomplete",String(Be))},[Be]),b.useEffect(()=>{(async()=>{e.length===0&&await s(),l(!1)})();const ae=()=>{Ye(window.innerWidth<768)};return window.addEventListener("resize",ae),()=>window.removeEventListener("resize",ae)},[]),b.useEffect(()=>{o||ve()},[r,o]),b.useEffect(()=>{c!==null&&De()},[c]),b.useEffect(()=>{c!==null&&(t!=null&&t.id)&&localStorage.setItem(`finishCheck_selectedProject_${t.id}`,c.toString())},[c,t==null?void 0:t.id]),b.useEffect(()=>{if(!xe&&Y){const C=async ae=>{var ye;const de=(ye=ae.clipboardData)==null?void 0:ye.items;if(de){for(let Q=0;Q<de.length;Q++)if(de[Q].type.indexOf("image")!==-1){ae.preventDefault();const Qe=de[Q].getAsFile();Qe&&await fe(Y,Qe)}}};return document.addEventListener("paste",C),()=>document.removeEventListener("paste",C)}},[Y,xe]);const ve=async()=>{try{const C=r.map(de=>({id:de.id,title:de.name}));i(C);const ae=t!=null&&t.id?localStorage.getItem(`finishCheck_selectedProject_${t.id}`):null;ae&&C.some(de=>de.id===Number(ae))?d(Number(ae)):C.length>0&&d(C[0].id)}catch(C){console.error("Failed to load projects:",C),q.error("   ")}},De=async()=>{try{f.length===0&&N(!0);const C=c?`/finish-check/spaces?project_id=${c}`:"/finish-check/spaces",de=(await ue.get(C)).data.map(ye=>({...ye,items:ye.items.map(Q=>({...Q,images:Q.images||[]}))}));p(de)}catch(C){console.error("Failed to load spaces:",C),q.error("   ")}finally{N(!1)}},ge=async C=>{if(_t.has(C))return null;try{B(ye=>new Set(ye).add(C));const de=(await ue.get(`/finish-check/images/${C}`)).data.image_data;return p(ye=>ye.map(Q=>({...Q,items:Q.items.map(Qe=>({...Qe,images:Qe.images.map(nt=>nt.id===C?{...nt,image_data:de}:nt)}))}))),de}catch(ae){return console.error("   :",ae),null}finally{B(ae=>{const de=new Set(ae);return de.delete(C),de})}},Ue=async C=>{const ae=f.find(Q=>Q.items.some(Qe=>Qe.id===C)),de=ae==null?void 0:ae.items.find(Q=>Q.id===C);if(!de)return;const ye=de.images.filter(Q=>!Q.image_data);await Promise.all(ye.map(Q=>ge(Q.id)))},st=async()=>{if(!Fe){if(!A.trim()){q.error("  ");return}if(!c){q.error(" ");return}We(!0);try{const C=await ue.post("/finish-check/spaces",{name:A.trim(),project_id:c}),ae={...C.data,items:C.data.items||[]};p([...f,ae]),x(""),tt(!1),q.success(" ")}catch(C){console.error("Failed to add space:",C),q.error("  ")}finally{We(!1)}}},mt=async(C,ae)=>{if(!ae.trim()){q.error("  ");return}try{await ue.put(`/finish-check/spaces/${C}`,{name:ae.trim()}),p(f.map(de=>de.id===C?{...de,name:ae.trim()}:de)),X(null),ee(""),q.success("  ")}catch(de){console.error("Failed to update space:",de),q.error("  ")}},ut=C=>{_e(C),ke(new Set)},y=async()=>{if(W!==null){if(J.size===0){q.error("  ");return}try{await Promise.all(Array.from(J).map(C=>ue.delete(`/finish-check/items/${C}`))),p(f.map(C=>C.id===W?{...C,items:C.items.filter(ae=>!J.has(ae.id))}:C)),q.success(`${J.size}  `),_e(null),ke(new Set)}catch(C){console.error("Failed to delete items:",C),q.error("  ")}}},w=async()=>{if(W===null)return;const C=f.find(ae=>ae.id===W);if(C&&confirm(`"${C.name}"  ?

        .`))try{await ue.delete(`/finish-check/spaces/${W}`),p(f.filter(ae=>ae.id!==W)),q.success(" "),_e(null),ke(new Set)}catch(ae){console.error("Failed to delete space:",ae),q.error("  ")}},T=async C=>{if(!_.trim()){q.error("  ");return}const ae=-Date.now(),de={id:ae,space_id:C,content:_.trim(),is_checked:!1,is_priority:!1,images:[]};p(f.map(Q=>Q.id===C?{...Q,items:[...Q.items,de]}:Q));const ye=_.trim();E(""),O(null);try{const Q=await ue.post("/finish-check/items",{space_id:C,content:ye});p(Qe=>Qe.map(nt=>nt.id===C?{...nt,items:nt.items.map(ct=>ct.id===ae?{...Q.data,images:[]}:ct)}:nt))}catch(Q){console.error("Failed to add item:",Q),p(Qe=>Qe.map(nt=>nt.id===C?{...nt,items:nt.items.filter(ct=>ct.id!==ae)}:nt)),q.error("  ")}},ne=async C=>{try{const ae=await ue.put(`/finish-check/items/${C}/toggle`);p(f.map(de=>({...de,items:de.items.map(ye=>ye.id===C?{...ye,...ae.data}:ye)})))}catch(ae){console.error("Failed to toggle item:",ae),q.error("   ")}},z=async C=>{try{const ae=await ue.put(`/finish-check/items/${C}/toggle-priority`);p(f.map(de=>({...de,items:de.items.map(ye=>ye.id===C?{...ye,is_priority:ae.data.is_priority}:ye)})))}catch(ae){console.error("Failed to toggle priority:",ae),q.error("  ")}},G=C=>new Promise((ae,de)=>{const ye=new FileReader;ye.readAsDataURL(C),ye.onload=()=>ae(ye.result),ye.onerror=Q=>de(Q)}),fe=async(C,ae)=>{var Q,Qe;if(!["image/jpeg","image/png","image/webp"].includes(ae.type)){q.error("JPEG, PNG, WebP    ");return}const ye=5*1024*1024;if(ae.size>ye){q.error("  5MB  ");return}try{Le(jt=>new Set([...jt,C]));const nt=await G(ae),ct=await ue.post(`/finish-check/items/${C}/images`,{image_data:nt,filename:ae.name});p(f.map(jt=>({...jt,items:jt.items.map(Lt=>Lt.id===C?{...Lt,images:[...Lt.images,ct.data]}:Lt)}))),q.success(" ")}catch(nt){console.error("Failed to upload image:",nt),q.error(((Qe=(Q=nt.response)==null?void 0:Q.data)==null?void 0:Qe.error)||"  ")}finally{Le(nt=>{const ct=new Set(nt);return ct.delete(C),ct})}},Ae=async(C,ae)=>{const de=ae.target.files;if(!(!de||de.length===0)){for(let ye=0;ye<de.length;ye++)await fe(C,de[ye]);Z.current&&(Z.current.value="")}},Oe=async(C,ae)=>{if(confirm("  ?"))try{await ue.delete(`/finish-check/images/${ae}`),p(f.map(de=>({...de,items:de.items.map(ye=>ye.id===C?{...ye,images:ye.images.filter(Q=>Q.id!==ae)}:ye)}))),q.success(" ")}catch(de){console.error("Failed to delete image:",de),q.error("  ")}},le=async(C,ae)=>{C.preventDefault(),C.stopPropagation();const de=C.dataTransfer.files;if(!(!de||de.length===0))for(let ye=0;ye<de.length;ye++)de[ye].type.startsWith("image/")&&await fe(ae,de[ye])},Rt=C=>{C.preventDefault(),C.stopPropagation()};if(g)return n.jsxDEV("div",{className:"flex items-center justify-center h-[calc(100vh-120px)]",children:n.jsxDEV("div",{className:"text-gray-500",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:613,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:612,columnNumber:7},void 0);const ot=Y?f.flatMap(C=>C.items).find(C=>C.id===Y):null;return n.jsxDEV("div",{className:"h-[calc(100vh-120px)] flex flex-col md:flex-row gap-4 overflow-hidden",children:[n.jsxDEV("input",{ref:Z,type:"file",accept:"image/jpeg,image/png,image/webp",multiple:!0,className:"hidden",onChange:C=>{Y&&Ae(Y,C)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:625,columnNumber:7},void 0),n.jsxDEV("div",{className:"flex-1 bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:xe?n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("div",{className:"flex-1",children:n.jsxDEV("select",{value:c||"",onChange:C=>{const ae=C.target.value?Number(C.target.value):null;d(ae)},className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(t==null?void 0:t.name)!==""&&n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:655,columnNumber:43},void 0),a.map(C=>n.jsxDEV("option",{value:C.id,children:C.title},C.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:657,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:647,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:646,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>Je(!Be),className:`px-3 py-2.5 text-xs font-medium rounded-lg transition-colors whitespace-nowrap ${Be?"bg-gray-800 text-white hover:bg-gray-900":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:Be?" ":" ",children:Be?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:665,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>tt(!0),className:"p-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center",title:" ",children:n.jsxDEV(rn,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:683,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:678,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:644,columnNumber:13},void 0):n.jsxDEV("div",{className:"flex gap-3",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:691,columnNumber:17},void 0),n.jsxDEV("select",{value:c||"",onChange:C=>{const ae=C.target.value?Number(C.target.value):null;d(ae)},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(t==null?void 0:t.name)!==""&&n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:700,columnNumber:43},void 0),a.map(C=>n.jsxDEV("option",{value:C.id,children:C.title},C.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:702,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:692,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:690,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:711,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:A,onChange:C=>x(C.target.value),onKeyPress:C=>{C.key==="Enter"&&st()},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:713,columnNumber:19},void 0),n.jsxDEV("button",{onClick:st,disabled:Fe,className:"p-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center min-w-[44px] disabled:opacity-50",title:" ",children:n.jsxDEV(rn,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:731,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:725,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:712,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:710,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex items-end",children:n.jsxDEV("button",{onClick:()=>Je(!Be),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap ${Be?"bg-gray-800 text-white hover:bg-gray-900":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:Be?" ":" ",children:Be?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:738,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:737,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:688,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:641,columnNumber:9},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:f.length===0?n.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:757,columnNumber:13},void 0):n.jsxDEV("div",{className:"columns-1 portrait:md:columns-2 landscape:md:columns-3 desktop:columns-4 column-gap-4",children:f.map((C,ae)=>{const de=C.items.filter(Q=>!Q.is_completed).sort((Q,Qe)=>(Qe.is_priority||0)-(Q.is_priority||0)),ye=C.items.filter(Q=>Q.is_completed);return Be&&de.length===0?null:n.jsxDEV("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 mb-4 break-inside-avoid",children:[ie===C.id?n.jsxDEV("div",{className:"flex gap-2 mb-4",children:[n.jsxDEV("input",{type:"text",value:U,onChange:Q=>ee(Q.target.value),onKeyPress:Q=>{Q.key==="Enter"?mt(C.id,U):Q.key==="Escape"&&(X(null),ee(""))},className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:776,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>mt(C.id,U),className:"p-1 text-green-600 hover:text-green-700",children:n.jsxDEV(wi,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:795,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:791,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>{X(null),ee("")},className:"p-1 text-gray-600 hover:text-gray-700",children:n.jsxDEV(Dt,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:804,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:797,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:775,columnNumber:23},void 0):n.jsxDEV("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-gray-300",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("h3",{className:"text-base font-bold text-gray-900 flex items-center gap-2",children:[n.jsxDEV("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-gray-800 text-white text-xs font-bold rounded-full",children:ae+1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:811,columnNumber:29},void 0),C.name]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:810,columnNumber:27},void 0),n.jsxDEV("span",{className:"text-xs text-gray-500",children:[ye.length,"/",C.items.length," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:816,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:809,columnNumber:25},void 0),n.jsxDEV("div",{className:"flex items-center gap-1",children:[n.jsxDEV("button",{onClick:()=>{D===C.id?(O(null),E("")):O(C.id)},className:`p-1 transition-colors ${D===C.id?"text-gray-900 bg-gray-100 rounded":"text-gray-600 hover:text-gray-800"}`,title:" ",children:n.jsxDEV(rn,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:837,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:821,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>{X(C.id),ee(C.name)},className:"p-1 text-gray-600 hover:text-gray-800 transition-colors",title:"",children:n.jsxDEV(Pr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:847,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:839,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>ut(C.id),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"",children:n.jsxDEV(Ys,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:854,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:849,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:820,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:808,columnNumber:23},void 0),D===C.id&&n.jsxDEV("div",{className:"mb-4 p-3 bg-white border border-gray-300 rounded-lg",children:n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:_,onChange:Q=>E(Q.target.value),onKeyPress:Q=>{Q.key==="Enter"&&_.trim()&&T(C.id)},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:864,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>T(C.id),disabled:!_.trim(),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:877,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:863,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:862,columnNumber:23},void 0),de.length>0&&n.jsxDEV("div",{className:"mb-4",children:n.jsxDEV("div",{className:"space-y-2",children:de.map(Q=>n.jsxDEV("div",{className:"flex items-start gap-3 p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsxDEV("input",{type:"checkbox",checked:!1,onChange:()=>ne(Q.id),className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:897,columnNumber:31},void 0),n.jsxDEV("span",{className:`flex-1 text-sm text-gray-900 ${!xe&&Y===Q.id?"font-semibold":""}`,onClick:async()=>{xe||(oe(Q.id),Q.images&&Q.images.length>0&&await Ue(Q.id))},style:{cursor:xe?"default":"pointer"},children:[Q.content,Q.images&&Q.images.length>0&&n.jsxDEV("span",{className:"ml-2 text-xs text-gray-500",children:["(",Q.images.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:918,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:904,columnNumber:31},void 0),n.jsxDEV("div",{className:"flex items-center gap-1",children:[n.jsxDEV("button",{onClick:async()=>{oe(Q.id),xe&&it(!0),Q.images&&Q.images.length>0&&await Ue(Q.id)},className:`p-1 transition-colors ${Q.images&&Q.images.length>0?"text-blue-600 hover:text-blue-800":"text-gray-300 hover:text-gray-400"}`,title:"",children:n.jsxDEV(kn,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:942,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:924,columnNumber:33},void 0),n.jsxDEV("button",{onClick:()=>z(Q.id),className:`p-1 transition-colors ${Q.is_priority?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"}`,title:"",children:n.jsxDEV(Ma,{className:`w-4 h-4 ${Q.is_priority?"fill-current":""}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:953,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:944,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:923,columnNumber:31},void 0)]},Q.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:893,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:891,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:890,columnNumber:23},void 0),!Be&&ye.length>0&&n.jsxDEV("div",{children:n.jsxDEV("div",{className:"space-y-2",children:ye.map(Q=>n.jsxDEV("div",{className:"flex items-start gap-3 p-3 bg-white border border-gray-200 rounded-lg opacity-40",children:[n.jsxDEV("input",{type:"checkbox",checked:!0,onChange:()=>ne(Q.id),className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:971,columnNumber:31},void 0),n.jsxDEV("span",{className:`flex-1 text-sm text-gray-500 line-through ${!xe&&Y===Q.id?"font-semibold":""}`,onClick:async()=>{xe||(oe(Q.id),Q.images&&Q.images.length>0&&await Ue(Q.id))},style:{cursor:xe?"default":"pointer"},children:[Q.content,Q.images&&Q.images.length>0&&n.jsxDEV("span",{className:"ml-2 text-xs text-gray-500",children:["(",Q.images.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:992,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:978,columnNumber:31},void 0),n.jsxDEV("div",{className:"flex items-center gap-1",children:[n.jsxDEV("button",{onClick:async()=>{oe(Q.id),xe&&it(!0),Q.images&&Q.images.length>0&&await Ue(Q.id)},className:`p-1 transition-colors ${Q.images&&Q.images.length>0?"text-blue-600 hover:text-blue-800":"text-gray-300 hover:text-gray-400"}`,title:"",children:n.jsxDEV(kn,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1016,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:998,columnNumber:33},void 0),n.jsxDEV("button",{onClick:()=>z(Q.id),className:`p-1 transition-colors ${Q.is_priority?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"}`,title:"",children:n.jsxDEV(Ma,{className:`w-4 h-4 ${Q.is_priority?"fill-current":""}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1027,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1018,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:997,columnNumber:31},void 0)]},Q.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:967,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:965,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:964,columnNumber:23},void 0)]},C.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:772,columnNumber:19},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:761,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:755,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:639,columnNumber:7},void 0),!xe&&Y&&ot&&n.jsxDEV("div",{className:"w-80 bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[n.jsxDEV("h3",{className:"font-semibold text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1048,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>oe(null),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",title:"",children:n.jsxDEV(Dt,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1054,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1049,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1047,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:ot.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1057,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>{var C;return(C=Z.current)==null?void 0:C.click()},disabled:he.has(Y),className:"w-full px-3 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsxDEV(Sr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1063,columnNumber:15},void 0),he.has(Y)?" ...":" "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1058,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"    , Ctrl+V "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1066,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1046,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",onDrop:C=>le(C,Y),onDragOver:Rt,children:ot.images.length===0?n.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm",children:[n.jsxDEV(kn,{className:"w-12 h-12 mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1078,columnNumber:17},void 0),n.jsxDEV("p",{children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1079,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1077,columnNumber:15},void 0):n.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:ot.images.map(C=>n.jsxDEV("div",{className:"relative group",children:[C.image_data?n.jsxDEV("img",{src:C.image_data,alt:C.filename||"",className:"w-full h-32 object-cover rounded-lg border border-gray-200"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1086,columnNumber:23},void 0):n.jsxDEV("div",{className:"w-full h-32 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:n.jsxDEV("span",{className:"text-gray-400 text-sm",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1093,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1092,columnNumber:23},void 0),n.jsxDEV("button",{onClick:()=>Oe(Y,C.id),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"",children:n.jsxDEV(Ta,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1101,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1096,columnNumber:21},void 0),C.filename&&n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1 truncate",title:C.filename,children:C.filename},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1104,columnNumber:23},void 0)]},C.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1084,columnNumber:19},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1082,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1071,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1045,columnNumber:9},void 0),xe&&gt&&Y&&ot&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50",children:n.jsxDEV("div",{className:"bg-white rounded-t-2xl w-full max-h-[80vh] flex flex-col",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[n.jsxDEV("h3",{className:"font-semibold text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1122,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{it(!1),oe(null)},className:"p-1 text-gray-600 hover:text-gray-900",children:n.jsxDEV(Dt,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1130,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1123,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1121,columnNumber:15},void 0),n.jsxDEV("p",{className:"text-sm text-gray-600 mb-3",children:ot.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1133,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>{var C;return(C=Z.current)==null?void 0:C.click()},disabled:he.has(Y),className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:[n.jsxDEV(Sr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1139,columnNumber:17},void 0),he.has(Y)?" ...":" "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1134,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1120,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:ot.images.length===0?n.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[n.jsxDEV(kn,{className:"w-16 h-16 mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1147,columnNumber:19},void 0),n.jsxDEV("p",{className:"text-sm",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1148,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1146,columnNumber:17},void 0):n.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:ot.images.map(C=>n.jsxDEV("div",{className:"relative",children:[C.image_data?n.jsxDEV("img",{src:C.image_data,alt:C.filename||"",className:"w-full h-40 object-cover rounded-lg border border-gray-200"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1155,columnNumber:25},void 0):n.jsxDEV("div",{className:"w-full h-40 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:n.jsxDEV("span",{className:"text-gray-400 text-sm",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1162,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1161,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>Oe(Y,C.id),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600",children:n.jsxDEV(Ta,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1169,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1165,columnNumber:23},void 0),C.filename&&n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1 truncate",title:C.filename,children:C.filename},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1172,columnNumber:25},void 0)]},C.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1153,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1151,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1144,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1119,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1118,columnNumber:9},void 0),W!==null&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[80vh] flex flex-col",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("h3",{className:"text-lg font-bold text-gray-900",children:[(R=f.find(C=>C.id===W))==null?void 0:R.name," - "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1191,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{_e(null),ke(new Set)},className:"p-1 text-gray-600 hover:text-gray-900",children:n.jsxDEV(Dt,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1201,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1194,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1190,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1189,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:[n.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"  .    ."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1207,columnNumber:15},void 0),n.jsxDEV("div",{className:"space-y-2",children:(Pe=f.find(C=>C.id===W))==null?void 0:Pe.items.map(C=>n.jsxDEV("div",{className:"flex items-start gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>{const ae=new Set(J);ae.has(C.id)?ae.delete(C.id):ae.add(C.id),ke(ae)},children:[n.jsxDEV("input",{type:"checkbox",checked:J.has(C.id),onChange:()=>{},className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1227,columnNumber:23},void 0),n.jsxDEV("span",{className:`flex-1 text-sm ${C.is_completed?"text-gray-500 line-through":"text-gray-900"}`,children:C.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1233,columnNumber:23},void 0)]},C.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1214,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1210,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1206,columnNumber:13},void 0),n.jsxDEV("div",{className:"p-4 border-t border-gray-200 flex gap-2",children:[n.jsxDEV("button",{onClick:y,disabled:J.size===0,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:["   (",J.size,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1242,columnNumber:15},void 0),n.jsxDEV("button",{onClick:w,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1249,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>{_e(null),ke(new Set)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1255,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1241,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1188,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1187,columnNumber:9},void 0),$e&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end md:items-center justify-center z-50",children:n.jsxDEV("div",{className:"bg-white rounded-t-2xl md:rounded-lg w-full md:max-w-md",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("h3",{className:"text-lg font-bold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1275,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{tt(!1),x("")},className:"p-1 text-gray-600 hover:text-gray-900",children:n.jsxDEV(Dt,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1283,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1276,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1274,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1273,columnNumber:13},void 0),n.jsxDEV("div",{className:"p-4",children:[n.jsxDEV("div",{className:"mb-4",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1290,columnNumber:17},void 0),n.jsxDEV("input",{type:"text",value:A,onChange:C=>x(C.target.value),onKeyPress:C=>{C.key==="Enter"&&A.trim()&&st()},placeholder:"  ",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1291,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1289,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:()=>{tt(!1),x("")},className:"flex-1 px-4 py-2.5 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1307,columnNumber:17},void 0),n.jsxDEV("button",{onClick:st,disabled:!A.trim()||Fe,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:Fe?" ...":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1316,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1306,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1288,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1272,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1271,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:623,columnNumber:5},void 0)};function lg(){const[t,s]=b.useState([]),[e,r]=b.useState(!1),[a,i]=b.useState(null),[o,l]=b.useState(!1),[c,d]=b.useState(null),[f,p]=b.useState(""),[g,N]=b.useState({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""}),[A,x]=b.useState(!1);b.useEffect(()=>{_()},[]),b.useEffect(()=>{const P=()=>{E()};return window.addEventListener("headerAddButtonClick",P),()=>window.removeEventListener("headerAddButtonClick",P)},[]);const _=async()=>{var P,pe;try{t.length===0&&r(!0),i(null);const Ne=await ks.getAllContractors();s(Ne.map(ce=>({id:ce._id,rank:ce.rank,companyName:ce.companyName,name:ce.name,position:ce.position,process:ce.process,contact:ce.contact,accountNumber:ce.accountNumber,notes:ce.notes,createdAt:new Date(ce.createdAt),updatedAt:new Date(ce.updatedAt)})))}catch(Ne){console.error("Failed to load contractors:",Ne);const ce=Ne instanceof Error&&((pe=(P=Ne.response)==null?void 0:P.data)==null?void 0:pe.message);i(ce||"   .")}finally{r(!1)}},E=P=>{if(P){d(P);let pe="",Ne=P.accountNumber||"";if(P.accountNumber){const oe=["KB","","","","NH","IBK","KEB","SC","","","","","","","","","","","","","","","","","NH","","","","","KB","",""];for(const he of oe)if(P.accountNumber.startsWith(he)){pe=he,Ne=P.accountNumber.substring(he.length).trim();break}}let ce=P.name,Y=P.position||"";Y||(Y=qn(P.name),ce=En(P.name)),N({rank:P.rank||"",companyName:P.companyName||"",name:ce,position:Y,process:P.process,contact:P.contact||"",bankName:pe,accountNumber:Ne,notes:P.notes||""})}else d(null),N({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""});l(!0)},D=()=>{l(!1),d(null),N({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""})},O=async P=>{var Ne,ce;if(P.preventDefault(),A)return;x(!0);const pe=g.bankName&&g.accountNumber?`${g.bankName} ${g.accountNumber}`:g.accountNumber;try{const Y={rank:g.rank,companyName:g.companyName,name:g.name,position:g.position,process:g.process,contact:g.contact,accountNumber:pe,notes:g.notes};c?await ks.updateContractor(c.id,Y):await ks.createContractor(Y),await _(),D()}catch(Y){console.error("Failed to save contractor:",Y);const oe=Y instanceof Error&&((ce=(Ne=Y.response)==null?void 0:Ne.data)==null?void 0:ce.message);alert(oe||"  .")}finally{x(!1)}},ie=async P=>{var pe,Ne;if(window.confirm("   ?"))try{await ks.deleteContractor(P),await _()}catch(ce){console.error("Failed to delete contractor:",ce);const Y=ce instanceof Error&&((Ne=(pe=ce.response)==null?void 0:pe.data)==null?void 0:Ne.message);alert(Y||"  .")}},X=()=>"border-gray-200 text-gray-600 bg-gray-50",U=P=>P?P==="1"?1:P==="1()"?2:P==="2"?3:P==="2()"?4:P==="3"?5:P==="3()"?6:P===""?100:P===""?200:999:999,ee=t.filter(P=>P.name.toLowerCase().includes(f.toLowerCase())||P.process.toLowerCase().includes(f.toLowerCase())||P.accountNumber.toLowerCase().includes(f.toLowerCase())||P.contact&&P.contact.toLowerCase().includes(f.toLowerCase())||P.rank&&P.rank.toLowerCase().includes(f.toLowerCase())||P.companyName&&P.companyName.toLowerCase().includes(f.toLowerCase())).sort((P,pe)=>{const Ne=U(P.rank)-U(pe.rank);if(Ne!==0)return Ne;const ce=P.process.localeCompare(pe.process,"ko");return ce!==0?ce:P.name.localeCompare(pe.name,"ko")});return n.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[n.jsxDEV("div",{className:"flex items-center justify-end",children:n.jsxDEV("button",{onClick:()=>E(),className:"hidden md:inline-flex btn btn-primary px-3 md:px-4 py-2",children:"+  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:290,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:289,columnNumber:7},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(Li,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 md:w-5 md:h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:300,columnNumber:9},this),n.jsxDEV("input",{type:"text",placeholder:", ,  ...",value:f,onChange:P=>p(P.target.value),className:"w-full pl-9 md:pl-10 pr-4 py-2 text-sm md:text-base border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:301,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:299,columnNumber:7},this),n.jsxDEV("div",{className:"contractors-table hidden md:block bg-white rounded-lg border border-gray-200 overflow-hidden",children:n.jsxDEV("div",{className:"overflow-x-auto",children:n.jsxDEV("table",{className:"w-full",children:[n.jsxDEV("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxDEV("tr",{children:[n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:316,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:319,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:322,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:325,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:328,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:331,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:334,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:337,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:340,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:315,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:314,columnNumber:13},this),n.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:e?n.jsxDEV("tr",{children:n.jsxDEV("td",{colSpan:9,className:"px-6 py-12 text-center",children:n.jsxDEV("p",{className:"text-gray-500",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:349,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:348,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:347,columnNumber:17},this):a?n.jsxDEV("tr",{children:n.jsxDEV("td",{colSpan:9,className:"px-6 py-12 text-center",children:n.jsxDEV("div",{className:"space-y-4",children:[n.jsxDEV("p",{className:"text-red-500",children:a},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:356,columnNumber:23},this),n.jsxDEV("button",{onClick:_,className:"inline-block px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:357,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:355,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:354,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:353,columnNumber:17},this):ee.length===0?n.jsxDEV("tr",{children:n.jsxDEV("td",{colSpan:9,className:"px-6 py-12 text-center",children:n.jsxDEV("p",{className:"text-gray-500",children:f?"  .":"  ."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:369,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:368,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:367,columnNumber:17},this):ee.map(P=>n.jsxDEV("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("span",{className:`px-2 py-1 text-xs font-medium border rounded ${X(P.rank)}`,children:P.rank||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:378,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:377,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("span",{className:"text-xs font-medium text-gray-700",children:P.process},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:383,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:382,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:P.companyName||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:388,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:387,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"font-medium text-gray-900",children:En(P.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:391,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:390,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:P.position||qn(P.name)||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:394,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:393,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:P.contact||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:397,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:396,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:P.accountNumber},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:400,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:399,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4",children:n.jsxDEV("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:P.notes||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:403,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:402,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[n.jsxDEV("button",{onClick:()=>E(P),className:"text-gray-600 hover:text-gray-900 mr-3",children:n.jsxDEV(Pr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:412,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:408,columnNumber:23},this),n.jsxDEV("button",{onClick:()=>ie(P.id),className:"text-red-600 hover:text-red-900",children:n.jsxDEV(Ys,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:418,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:414,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:407,columnNumber:21},this)]},P.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:376,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:345,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:313,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:312,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:311,columnNumber:7},this),n.jsxDEV("div",{className:"md:hidden space-y-3",children:e?n.jsxDEV("div",{className:"text-center py-12 text-gray-500 text-sm",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:432,columnNumber:11},this):a?n.jsxDEV("div",{className:"text-center py-12 space-y-4",children:[n.jsxDEV("p",{className:"text-red-500 text-sm",children:a},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:435,columnNumber:13},this),n.jsxDEV("button",{onClick:_,className:"inline-block px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:436,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:434,columnNumber:11},this):ee.length===0?n.jsxDEV("div",{className:"text-center py-12 text-gray-500 text-sm",children:f?"  .":"  ."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:444,columnNumber:11},this):ee.map(P=>n.jsxDEV("div",{className:"card p-3 space-y-2",children:[n.jsxDEV("div",{className:"flex items-start justify-between mb-2",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[P.rank&&n.jsxDEV("span",{className:`px-1.5 py-0.5 text-[10px] font-medium border rounded ${X(P.rank)}`,children:P.rank},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:455,columnNumber:23},this),n.jsxDEV("span",{className:"px-1.5 py-0.5 text-[10px] font-medium text-gray-700 bg-gray-100 rounded",children:P.process},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:459,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:453,columnNumber:19},this),P.companyName&&n.jsxDEV("p",{className:"text-xs text-gray-600 mb-0.5",children:P.companyName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:464,columnNumber:21},this),n.jsxDEV("p",{className:"font-semibold text-gray-900 text-sm",children:En(P.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:466,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:452,columnNumber:17},this),n.jsxDEV("div",{className:"flex items-center gap-2 ml-2",children:[n.jsxDEV("button",{onClick:()=>E(P),className:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded",children:n.jsxDEV(Pr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:473,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:469,columnNumber:19},this),n.jsxDEV("button",{onClick:()=>ie(P.id),className:"p-1.5 text-red-600 hover:text-red-900 hover:bg-red-50 rounded",children:n.jsxDEV(Ys,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:479,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:475,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:468,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:451,columnNumber:15},this),n.jsxDEV("div",{className:"space-y-1 text-xs",children:[(P.position||qn(P.name))&&n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:488,columnNumber:21},this),n.jsxDEV("span",{className:"text-gray-900",children:P.position||qn(P.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:489,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:487,columnNumber:19},this),P.contact&&n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:494,columnNumber:21},this),n.jsxDEV("span",{className:"text-gray-900",children:P.contact},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:495,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:493,columnNumber:19},this),n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:499,columnNumber:19},this),n.jsxDEV("span",{className:"text-gray-900 break-all",children:P.accountNumber},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:500,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:498,columnNumber:17},this),P.notes&&n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:504,columnNumber:21},this),n.jsxDEV("span",{className:"text-gray-600",children:P.notes},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:505,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:503,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:485,columnNumber:15},this)]},P.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:449,columnNumber:13},this))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:430,columnNumber:7},this),o&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:n.jsxDEV("div",{className:"p-6",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[n.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:c?" ":"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:520,columnNumber:17},this),n.jsxDEV("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:n.jsxDEV(Dt,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:527,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:523,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:519,columnNumber:15},this),n.jsxDEV("form",{onSubmit:O,className:"space-y-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:533,columnNumber:19},this),n.jsxDEV("select",{value:g.rank,onChange:P=>N({...g,rank:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:541,columnNumber:21},this),n.jsxDEV("option",{value:"1",children:"1"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:542,columnNumber:21},this),n.jsxDEV("option",{value:"2",children:"2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:543,columnNumber:21},this),n.jsxDEV("option",{value:"3",children:"3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:544,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:536,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:532,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:549,columnNumber:19},this),n.jsxDEV("input",{type:"text",value:g.companyName,onChange:P=>N({...g,companyName:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:552,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:548,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",n.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:562,columnNumber:24},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:561,columnNumber:19},this),n.jsxDEV("input",{type:"text",required:!0,value:g.name,onChange:P=>N({...g,name:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:564,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:560,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:574,columnNumber:19},this),n.jsxDEV("input",{type:"text",value:g.position,onChange:P=>N({...g,position:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:577,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:573,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",n.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:587,columnNumber:24},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:586,columnNumber:19},this),n.jsxDEV("input",{type:"text",required:!0,value:g.process,onChange:P=>N({...g,process:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:589,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:585,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:599,columnNumber:19},this),n.jsxDEV("input",{type:"text",value:g.contact,onChange:P=>N({...g,contact:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:602,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:598,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:611,columnNumber:19},this),n.jsxDEV("select",{value:g.bankName,onChange:P=>N({...g,bankName:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:619,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"KB",children:"KB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:621,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:622,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:623,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:624,columnNumber:23},this),n.jsxDEV("option",{value:"NH",children:"NH"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:625,columnNumber:23},this),n.jsxDEV("option",{value:"IBK",children:"IBK"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:626,columnNumber:23},this),n.jsxDEV("option",{value:"KEB",children:"KEB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:627,columnNumber:23},this),n.jsxDEV("option",{value:"SC",children:"SC"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:628,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:629,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:620,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:632,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:633,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:634,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:635,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:636,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:637,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:631,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:640,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:641,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:642,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:643,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:644,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:645,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:639,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:648,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:649,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:650,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:647,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"NH",children:"NH"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:653,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:654,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:655,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:656,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:657,columnNumber:23},this),n.jsxDEV("option",{value:"KB",children:"KB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:658,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:659,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:660,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:652,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:614,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:610,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:666,columnNumber:19},this),n.jsxDEV("input",{type:"text",value:g.accountNumber,onChange:P=>N({...g,accountNumber:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:669,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:665,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:678,columnNumber:19},this),n.jsxDEV("textarea",{value:g.notes,onChange:P=>N({...g,notes:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",rows:3},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:681,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:677,columnNumber:17},this),n.jsxDEV("div",{className:"flex space-x-3 pt-4",children:[n.jsxDEV("button",{type:"button",onClick:D,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:690,columnNumber:19},this),n.jsxDEV("button",{type:"submit",disabled:A,className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50",children:A?" ...":c?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:697,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:689,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:531,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:518,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:517,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:516,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:287,columnNumber:5},this)}const mg=()=>{const[t,s]=b.useState([]),[e,r]=b.useState(null),[a,i]=b.useState(!1);b.useEffect(()=>{o()},[]);const o=async()=>{try{t.length===0&&i(!0);const p=await ue.get("/quote-inquiries");s(p.data)}catch(p){console.error("Failed to load inquiries:",p),q.error("  ")}finally{i(!1)}},l=async p=>{try{await ue.put(`/quote-inquiries/${p}/read`),s(g=>g.map(N=>N.id===p?{...N,isRead:!0}:N)),window.dispatchEvent(new CustomEvent("quoteInquiryRead"))}catch(g){console.error("Failed to mark as read:",g)}},c=p=>{r(p),p.isRead||l(p.id)},d=async(p,g)=>{if(g.stopPropagation(),!!confirm("  ?"))try{await ue.delete(`/quote-inquiries/${p}`),s(N=>N.filter(A=>A.id!==p)),(e==null?void 0:e.id)===p&&r(null),q.success(" ")}catch(N){console.error("Failed to delete inquiry:",N),q.error("  ")}},f=t.filter(p=>!p.isRead).length;return a?n.jsxDEV("div",{className:"flex items-center justify-center h-full",children:n.jsxDEV("div",{className:"text-gray-500",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:93,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:92,columnNumber:7},void 0):n.jsxDEV("div",{className:"h-full flex flex-col md:flex-row gap-4 p-4",children:[n.jsxDEV("div",{className:`w-full md:w-1/3 bg-white rounded-lg shadow overflow-hidden flex flex-col ${e?"hidden md:flex":"flex"}`,children:[n.jsxDEV("div",{className:"p-4 border-b bg-gray-50",children:n.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:[" ",f>0&&n.jsxDEV("span",{className:"ml-2 px-2 py-1 text-xs bg-red-500 text-white rounded-full",children:f},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:106,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:103,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:102,columnNumber:9},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:t.length===0?n.jsxDEV("div",{className:"p-4 text-center text-gray-500",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:115,columnNumber:13},void 0):n.jsxDEV("div",{className:"divide-y",children:t.map(p=>n.jsxDEV("div",{className:`relative group ${(e==null?void 0:e.id)===p.id?"bg-blue-50 border-l-4 border-blue-500":""} ${p.isRead?"":"bg-yellow-50"}`,children:n.jsxDEV("button",{onClick:()=>c(p),className:"w-full p-4 text-left hover:bg-gray-50 transition-colors",children:[n.jsxDEV("div",{className:"flex justify-between items-start mb-2",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("span",{className:"font-medium text-gray-900",children:p.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:133,columnNumber:25},void 0),!p.isRead&&n.jsxDEV("span",{className:"w-2 h-2 bg-red-500 rounded-full"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:135,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:132,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("span",{className:"text-xs text-gray-500",children:et(new Date(p.createdAt),"MM/dd HH:mm")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:139,columnNumber:25},void 0),n.jsxDEV("button",{onClick:g=>d(p.id,g),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"",children:n.jsxDEV(Ys,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:147,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:142,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:138,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:131,columnNumber:21},void 0),n.jsxDEV("div",{className:"text-sm text-gray-600 flex items-center gap-1 mb-1",children:[n.jsxDEV(Ra,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:153,columnNumber:23},void 0),p.phone]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:152,columnNumber:21},void 0),n.jsxDEV("div",{className:"text-sm text-gray-500 line-clamp-2",children:p.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:157,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:127,columnNumber:19},void 0)},p.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:121,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:119,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:113,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:101,columnNumber:7},void 0),n.jsxDEV("div",{className:`flex-1 bg-white rounded-lg shadow overflow-hidden ${e?"flex flex-col":"hidden md:flex md:flex-col"}`,children:e?n.jsxDEV("div",{className:"h-full flex flex-col",children:[n.jsxDEV("div",{className:"p-6 border-b bg-gray-50",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[n.jsxDEV("h3",{className:"text-xl font-semibold text-gray-900",children:e.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:174,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>r(null),className:"md:hidden px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 text-gray-700 rounded transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:178,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:173,columnNumber:15},void 0),n.jsxDEV("div",{className:"text-sm text-gray-500",children:et(new Date(e.createdAt),"yyyy MM dd HH:mm")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:172,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[n.jsxDEV(sm,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:194,columnNumber:19},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:193,columnNumber:17},void 0),n.jsxDEV("div",{className:"pl-6 space-y-2",children:[n.jsxDEV("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsxDEV(Ra,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:199,columnNumber:21},void 0),n.jsxDEV("span",{children:e.phone},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:200,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:198,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsxDEV(nm,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:203,columnNumber:21},void 0),n.jsxDEV("span",{children:e.email},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:204,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:202,columnNumber:19},void 0),e.address&&n.jsxDEV("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsxDEV(rm,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:208,columnNumber:23},void 0),n.jsxDEV("span",{children:e.address},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:209,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:207,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:197,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:192,columnNumber:15},void 0),(e.projectType||e.budget)&&n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[n.jsxDEV(am,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:219,columnNumber:21},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:218,columnNumber:19},void 0),n.jsxDEV("div",{className:"pl-6 space-y-2",children:[e.projectType&&n.jsxDEV("div",{className:"text-gray-700",children:[n.jsxDEV("span",{className:"text-gray-500",children:" : "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:225,columnNumber:25},void 0),e.projectType]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:224,columnNumber:23},void 0),e.budget&&n.jsxDEV("div",{className:"text-gray-700",children:[n.jsxDEV("span",{className:"text-gray-500",children:": "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:231,columnNumber:25},void 0),e.budget]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:230,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:222,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:217,columnNumber:17},void 0),n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("h4",{className:"font-medium text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:241,columnNumber:17},void 0),n.jsxDEV("div",{className:"pl-6 text-gray-700 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:e.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:242,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:240,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:190,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:171,columnNumber:11},void 0):n.jsxDEV("div",{className:"h-full flex items-center justify-center text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:249,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:169,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:99,columnNumber:5},void 0)},cg=()=>{const{login:t}=Is(),[s,e]=b.useState(!1),{register:r,handleSubmit:a,setValue:i,formState:{errors:o}}=ya(),l=async d=>{e(!0);try{await t(d.username,d.password)}finally{e(!1)}},c=d=>{i("username",d)};return n.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxDEV("div",{className:"max-w-md w-full",children:n.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-8",children:[n.jsxDEV("div",{className:"text-center mb-8",children:[n.jsxDEV("h2",{className:"text-3xl font-bold text-gray-900",children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:39,columnNumber:13},void 0),n.jsxDEV("p",{className:"mt-2 text-sm text-gray-600",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:40,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:38,columnNumber:11},void 0),n.jsxDEV("form",{onSubmit:a(l),className:"space-y-6",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:47,columnNumber:15},void 0),n.jsxDEV("input",{...r("username",{required:" "}),type:"text",className:"input",placeholder:" ",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:50,columnNumber:15},void 0),o.username&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:o.username.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:60,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:46,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:65,columnNumber:15},void 0),n.jsxDEV("input",{...r("password",{required:" "}),type:"password",className:"input",placeholder:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:68,columnNumber:15},void 0),o.password&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:o.password.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:77,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:64,columnNumber:13},void 0),n.jsxDEV("button",{type:"submit",disabled:s,className:"w-full btn btn-primary flex items-center justify-center",children:s?n.jsxDEV("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:87,columnNumber:17},void 0):n.jsxDEV(n.Fragment,{children:[n.jsxDEV(im,{className:"mr-2 h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:90,columnNumber:19},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:89,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:81,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:45,columnNumber:11},void 0),n.jsxDEV("div",{className:"mt-6 border-t pt-6",children:[n.jsxDEV("p",{className:"text-sm text-gray-600 text-center mb-4",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:98,columnNumber:13},void 0),n.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:["","","","","","",""].map(d=>n.jsxDEV("button",{onClick:()=>c(d),className:"px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",type:"button",children:d},d,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:101,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:99,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:97,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:37,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:36,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:35,columnNumber:5},void 0)},dg=b.lazy(()=>hs(()=>import("./Drawings-DJ5Mawab.js"),__vite__mapDeps([0,1,2,3,4,5]))),ug=b.lazy(()=>hs(()=>import("./SiteLog-BpMMrsDv.js"),__vite__mapDeps([6,1,4,2,3,5]))),pg=b.lazy(()=>hs(()=>import("./AfterService-CBa9hdYC.js"),__vite__mapDeps([7,1,2,4,3,5]))),fg=b.lazy(()=>hs(()=>import("./AdditionalWork-BQGLRBmc.js"),__vite__mapDeps([8,1,2,9,4,3,5]))),gg=b.lazy(()=>hs(()=>import("./ConstructionPayment-B24cVZBT.js"),__vite__mapDeps([10,1,9,4,2,3,5]))),hg=b.lazy(()=>hs(()=>import("./WorkRequest-pBBwC_sw.js"),__vite__mapDeps([11,1,2,4,3,5]))),bg=b.lazy(()=>hs(()=>import("./Specbook-C2aR_fu8.js"),__vite__mapDeps([12,1,2,3,4,5]))),Ng=b.lazy(()=>hs(()=>import("./EstimatePreview-D_YMCdK0.js"),__vite__mapDeps([13,1,2,3,4,5]))),yg=b.lazy(()=>hs(()=>import("./ExecutionHistory-jtEao5Qo.js"),__vite__mapDeps([14,1,4,2,3,5]))),xg=()=>n.jsxDEV("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:n.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:37,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:36,columnNumber:3},void 0),vg=new zl({defaultOptions:{queries:{staleTime:1e3*60*5,refetchOnWindowFocus:!1}}});function kg(){const[t,s]=b.useState(!1);return b.useEffect(()=>{const e=id({immediate:!0,onNeedRefresh(){console.log("   ."),s(!0),q.loading("   ...",{duration:2e3}),setTimeout(()=>{e(!0).then(()=>{q.dismiss(),q.success(" !",{duration:2e3,icon:""}),setTimeout(()=>{window.location.reload()},1e3)})},1500)},onOfflineReady(){console.log("    ")},onRegisteredSW(c,d){console.log(" Service Worker :",c),d&&setInterval(()=>{console.log("   ..."),d.update()},6e4)},onRegisterError(c){console.error(" Service Worker  :",c)}});tu();const r=async()=>{try{const d=await(await fetch("/version.json?t="+Date.now())).json(),f=localStorage.getItem("app_version");f&&f!==d.version?(console.log("   :",d.version),localStorage.setItem("app_version",d.version),"serviceWorker"in navigator&&(await navigator.serviceWorker.ready).update()):f||localStorage.setItem("app_version",d.version)}catch(c){console.error("  :",c)}};setTimeout(r,5e3);const a=setInterval(r,3e4),i=window.location.hostname,o=i==="hvlab.app"||i.includes("hv-lab-app")||i.includes("firebaseapp.com");let l=null;if(o)console.log("  : Socket.IO  (HTTP  )");else{const c=window.location.origin;l=Cn(c,{transports:["websocket","polling"]}),js.setSocket(l),l.on("connect",()=>{console.log(" Socket.IO ")}),l.on("urgent-payment",d=>{console.log("    :",d);const f=`${d.project}  ${d.amount.toLocaleString()}  `;eu(d.urgency,f)}),l.on("disconnect",()=>{console.log(" Socket.IO  ")})}return()=>{l&&l.disconnect(),clearInterval(a)}},[]),n.jsxDEV(Kl,{client:vg,children:n.jsxDEV(ql,{children:n.jsxDEV(dd,{children:[n.jsxDEV(b.Suspense,{fallback:n.jsxDEV(xg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:179,columnNumber:31},this),children:n.jsxDEV($l,{children:[n.jsxDEV(Et,{path:"/login",element:n.jsxDEV(cg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:181,columnNumber:45},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:181,columnNumber:15},this),n.jsxDEV(Et,{path:"/",element:n.jsxDEV(Jd,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:182,columnNumber:40},this),children:[n.jsxDEV(Et,{index:!0,element:n.jsxDEV(Ei,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:183,columnNumber:39},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:183,columnNumber:17},this),n.jsxDEV(Et,{path:"dashboard",element:n.jsxDEV(wu,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:184,columnNumber:50},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:184,columnNumber:17},this),n.jsxDEV(Et,{path:"projects",element:n.jsxDEV(Pu,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:185,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:185,columnNumber:17},this),n.jsxDEV(Et,{path:"schedule",element:n.jsxDEV(Gf,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:186,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:186,columnNumber:17},this),n.jsxDEV(Et,{path:"drawings",element:n.jsxDEV(dg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:187,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:187,columnNumber:17},this),n.jsxDEV(Et,{path:"site-log",element:n.jsxDEV(ug,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:188,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:188,columnNumber:17},this),n.jsxDEV(Et,{path:"after-service",element:n.jsxDEV(pg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:189,columnNumber:54},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:189,columnNumber:17},this),n.jsxDEV(Et,{path:"additional-work",element:n.jsxDEV(fg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:190,columnNumber:56},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:190,columnNumber:17},this),n.jsxDEV(Et,{path:"construction-payment",element:n.jsxDEV(gg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:191,columnNumber:61},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:191,columnNumber:17},this),n.jsxDEV(Et,{path:"contractors",element:n.jsxDEV(lg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:192,columnNumber:52},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:192,columnNumber:17},this),n.jsxDEV(Et,{path:"work-request",element:n.jsxDEV(hg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:193,columnNumber:53},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:193,columnNumber:17},this),n.jsxDEV(Et,{path:"finish-check",element:n.jsxDEV(og,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:194,columnNumber:53},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:194,columnNumber:17},this),n.jsxDEV(Et,{path:"specbook",element:n.jsxDEV(bg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:195,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:195,columnNumber:17},this),n.jsxDEV(Et,{path:"estimate-preview",element:n.jsxDEV(Ng,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:196,columnNumber:57},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:196,columnNumber:17},this),n.jsxDEV(Et,{path:"execution-history",element:n.jsxDEV(yg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:197,columnNumber:58},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:197,columnNumber:17},this),n.jsxDEV(Et,{path:"payments",element:n.jsxDEV(ig,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:198,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:198,columnNumber:17},this),n.jsxDEV(Et,{path:"quote-inquiry",element:n.jsxDEV(mg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:199,columnNumber:54},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:199,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:182,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:180,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:179,columnNumber:11},this),n.jsxDEV(uc,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#363636",border:"1px solid #e5e5e5"}}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:203,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:178,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:177,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:176,columnNumber:5},this)}"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){for(const s of t)s.update()});Ki(document.getElementById("root")).render(n.jsxDEV(b.StrictMode,{children:n.jsxDEV(kg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/main.tsx",lineNumber:18,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/main.tsx",lineNumber:17,columnNumber:3},void 0));export{Lr as P,ue as a,fr as b,Us as c,ya as d,cd as e,Yr as f,sg as g,n as j,kt as l,ag as m,rs as p,ng as s,Is as u,Kd as w,q as z};
