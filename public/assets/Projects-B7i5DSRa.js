import{j as e}from"./vendor-data-DG_4MGb7.js";import{r as d}from"./vendor-react-D-r2Cqeg.js";import{S as de,X as $,f as ce,g as xe,h as me,d as O,P as ge}from"./vendor-ui-DTwhhNuH.js";import{u as ue}from"./dataStore-ByVzUXWH.js";import{l as q,u as he,z as D}from"./index-HUdyR-Tx.js";import{u as ye}from"./useFilteredProjects-4XYld7On.js";import{u as pe}from"./index.esm-D9ojv-r8.js";import{p as T}from"./vendor-date-9Cl9d1sr.js";const be=({value:a,detailValue:w="",onChange:n,onDetailChange:y,placeholder:h="ì£¼ì†Œ ê²€ìƒ‰",error:u})=>{const[p,i]=d.useState(!1),[m,f]=d.useState(a),[N,b]=d.useState(w),v=d.useRef(null);d.useEffect(()=>{const r=k=>{v.current&&!v.current.contains(k.target)&&i(!1)};return p&&document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[p]),d.useEffect(()=>{f(a)},[a]),d.useEffect(()=>{b(w)},[w]);const S=()=>new Promise((r,k)=>{if(window.daum&&window.daum.Postcode){r(!0);return}const R=document.createElement("script");R.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",R.async=!0,R.onload=()=>r(!0),R.onerror=()=>k(new Error("Kakao Postcode ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨")),document.head.appendChild(R)}),A=r=>{const k=r.roadAddr||r.jibunAddr;f(k),n(k,N),i(!1)},M=r=>{const k=r.target.value;b(k),y&&y(k),m&&n(m,k)},C=async()=>{try{(!window.daum||!window.daum.Postcode)&&await S(),window.daum&&new window.daum.Postcode({oncomplete:function(r){const k={roadAddr:r.roadAddress,jibunAddr:r.jibunAddress||r.autoJibunAddress||"",zipNo:r.zonecode,bdNm:r.buildingName,siNm:r.sido,sggNm:r.sigungu,emdNm:r.bname,rn:r.roadname};A(k)}}).open()}catch(r){console.error("ì£¼ì†Œ ê²€ìƒ‰ ì˜¤ë¥˜:",r),alert("ì£¼ì†Œ ê²€ìƒ‰ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.")}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:m,onClick:()=>C(),onChange:r=>{f(r.target.value),n(r.target.value,N)},placeholder:h,className:`input pr-8 cursor-pointer ${u?"border-red-500":""}`,readOnly:!0}),e.jsx(de,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),e.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:"ì£¼ì†Œ ê²€ìƒ‰"})]}),u&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u})]}),e.jsx("div",{children:e.jsx("input",{type:"text",value:N,onChange:M,placeholder:"ìƒì„¸ì£¼ì†Œ (ë™/í˜¸ìˆ˜ ë“±)",className:"input",disabled:!m})}),m&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"ì „ì²´ ì£¼ì†Œ:"})," ",m,N&&`, ${N}`]})}),e.jsx("div",{id:"address-search-container",style:{display:"none",width:"100%",height:"400px"}})]})},Q=["ìƒì¤€","ì‹ ì• ","ì¬ì²œ","ë¯¼ê¸°","ì¬ì„±","ì¬í˜„","ì•ˆíŒ€"],fe=({project:a,onClose:w,onSave:n})=>{const{register:y,handleSubmit:h,setValue:u,reset:p,formState:{errors:i}}=pe({defaultValues:{name:"",client:"",location:"",detailLocation:"",startDate:"",endDate:""}}),[m,f]=d.useState([]),[N,b]=d.useState(""),[v,S]=d.useState(""),[A,M]=d.useState(""),[C,r]=d.useState(!1);d.useEffect(()=>{var t;if(a){const x=a.location?a.location.split(","):["",""],P=((t=x[0])==null?void 0:t.trim())||a.location||"",F=x.length>1?x.slice(1).join(",").trim():"";p({name:a.name,client:a.client||"",location:P,detailLocation:F,startDate:a.startDate?new Date(a.startDate).toISOString().split("T")[0]:"",endDate:a.endDate?new Date(a.endDate).toISOString().split("T")[0]:""}),S(P),M(F);const z=a.manager?a.manager.split(",").map(I=>I.trim()).filter(I=>I&&I!=="ë¯¸ì§€ì •"):[];f(z)}else p({name:"",client:"",location:"",detailLocation:"",startDate:"",endDate:""}),S(""),M(""),f([])},[a,p]);const k=t=>{f(x=>x.includes(t)?x.filter(P=>P!==t):[...x,t])},R=()=>{N.trim()&&!m.includes(N.trim())&&(f(t=>[...t,N.trim()]),b(""))},L=t=>{f(x=>x.filter(P=>P!==t))},g=async t=>{if(C)return;r(!0),console.log("ğŸ“‹ ProjectModal onSubmit - Raw form data:",t);const x=v&&A?`${v}, ${A}`:v||t.location,P={name:t.name,client:t.client,location:x,manager:m.join(", "),contractAmount:(a==null?void 0:a.contractAmount)??0,spent:(a==null?void 0:a.spent)??0,status:(a==null?void 0:a.status)??"planning",progress:(a==null?void 0:a.progress)??0,description:(a==null?void 0:a.description)??"",meetingNotes:(a==null?void 0:a.meetingNotes)??[],customerRequests:(a==null?void 0:a.customerRequests)??[],entrancePassword:(a==null?void 0:a.entrancePassword)??"",sitePassword:(a==null?void 0:a.sitePassword)??""};if(t.startDate&&t.startDate!=="")P.startDate=t.startDate,console.log("ğŸ“… Setting startDate from form:",t.startDate);else if(a!=null&&a.startDate){const F=typeof a.startDate=="string"&&a.startDate.includes("T")?a.startDate.split("T")[0]:a.startDate;P.startDate=F,console.log("ğŸ“… Keeping existing startDate:",P.startDate)}if(t.endDate&&t.endDate!=="")P.endDate=t.endDate,console.log("ğŸ“… Setting endDate from form:",t.endDate);else if(a!=null&&a.endDate){const F=typeof a.endDate=="string"&&a.endDate.includes("T")?a.endDate.split("T")[0]:a.endDate;P.endDate=F,console.log("ğŸ“… Keeping existing endDate:",P.endDate)}console.log("ğŸ“‹ ProjectModal onSubmit - Final formData:",P);try{await n(P)}catch(F){throw r(!1),F}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 md:p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:a?"í”„ë¡œì íŠ¸ ìˆ˜ì •":"ìƒˆ í”„ë¡œì íŠ¸"}),e.jsx("button",{onClick:w,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx($,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:h(g),className:"p-4 md:p-6 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"í”„ë¡œì íŠ¸ëª… *"}),e.jsx("input",{...y("name",{required:"í”„ë¡œì íŠ¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"}),type:"text",className:"input"}),i.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(i.name.message)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ê³ ê°ëª…"}),e.jsx("input",{...y("client"),type:"text",className:"input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìœ„ì¹˜ *"}),e.jsx(be,{value:v,detailValue:A,onChange:(t,x)=>{S(t),M(x||""),u("location",t),u("detailLocation",x||"")},onDetailChange:t=>{M(t),u("detailLocation",t)},placeholder:"í´ë¦­í•˜ì—¬ ì£¼ì†Œ ê²€ìƒ‰",required:!0,error:i.location?String(i.location.message):void 0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì‹œì‘ì¼"}),e.jsx("input",{...y("startDate"),type:"date",className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¢…ë£Œì¼"}),e.jsx("input",{...y("endDate"),type:"date",className:"input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ë‹´ë‹¹ì (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)"}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[Q.map(t=>e.jsx("button",{type:"button",onClick:()=>k(t),className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${m.includes(t)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:t},t)),m.filter(t=>!Q.includes(t)).map(t=>e.jsxs("button",{type:"button",onClick:()=>L(t),className:"px-2.5 py-1.5 rounded border transition-colors text-sm bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[t," Ã—"]},t))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:N,onChange:t=>b(t.target.value),onKeyPress:t=>{t.key==="Enter"&&(t.preventDefault(),R())},placeholder:"ë‹´ë‹¹ì ì´ë¦„ ì§ì ‘ ì…ë ¥",className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"}),e.jsx("button",{type:"button",onClick:R,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:"ì¶”ê°€"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 md:space-x-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:w,className:"btn btn-outline text-sm md:text-base",children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",disabled:C,className:"btn btn-primary text-sm md:text-base disabled:opacity-50",children:C?"ì €ì¥ ì¤‘...":a?"ìˆ˜ì •":"ìƒì„±"})]})]})]})})},Ne=({projectName:a,meetingNotes:w,onClose:n,onSave:y,onDelete:h})=>{const[u,p]=d.useState(""),[i,m]=d.useState(new Date().toISOString().split("T")[0]),[f,N]=d.useState(!1),[b,v]=d.useState(!1),S=()=>{N(!0),p(""),m(new Date().toISOString().split("T")[0])},A=async()=>{if(!b){if(!u.trim()){alert("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”");return}if(!i){alert("ë¯¸íŒ…ì¼ìë¥¼ ì„ íƒí•˜ì„¸ìš”");return}v(!0);try{await y(u.trim(),new Date(i)),p(""),m(new Date().toISOString().split("T")[0]),N(!1)}finally{v(!1)}}},M=()=>{p(""),m(new Date().toISOString().split("T")[0]),N(!1)},C=r=>{window.confirm("ì´ ë¯¸íŒ… ë‚´ìš©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&h(r)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:n,children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col shadow-xl",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"ë¯¸íŒ… ë‚´ìš©"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:a})]}),e.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx($,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!f&&e.jsx("button",{onClick:S,className:"w-full mb-4 px-4 py-2.5 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"+ ì¶”ê°€"}),f&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ë¯¸íŒ…ì¼ì *"}),e.jsx("input",{type:"date",value:i,onChange:r=>m(r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ë¯¸íŒ… ë‚´ìš© *"}),e.jsx("textarea",{value:u,onChange:r=>p(r.target.value),placeholder:"ë¯¸íŒ… ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900 resize-none",rows:4})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:A,disabled:b,className:"px-4 py-1.5 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:b?"ì €ì¥ ì¤‘...":"ì €ì¥"}),e.jsx("button",{onClick:M,disabled:b,className:"px-4 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:"ì·¨ì†Œ"})]})]}),e.jsx("div",{className:"space-y-3",children:w.length===0?e.jsx("div",{className:"text-center py-12 text-gray-400 text-sm",children:"ì‘ì„±ëœ ë¯¸íŒ… ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤"}):w.map(r=>e.jsx("div",{className:"p-4 bg-white border border-gray-200 rounded hover:border-gray-300 transition-colors group",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:T(new Date(r.date),"yyyy.MM.dd (eee)",{locale:q})}),e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:r.content})]}),e.jsx("button",{onClick:()=>C(r.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:"ì‚­ì œ"})]})},r.id))})]})]})})},ve=({projectName:a,customerRequests:w,onClose:n,onSave:y,onToggleComplete:h,onDelete:u})=>{const[p,i]=d.useState(""),[m,f]=d.useState(new Date().toISOString().split("T")[0]),[N,b]=d.useState(!1),[v,S]=d.useState(!1),A=()=>{b(!0),i(""),f(new Date().toISOString().split("T")[0])},M=async()=>{if(!v){if(!p.trim()){alert("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”");return}if(!m){alert("ìš”ì²­ì¼ìë¥¼ ì„ íƒí•˜ì„¸ìš”");return}S(!0);try{await y(p.trim(),new Date(m)),i(""),f(new Date().toISOString().split("T")[0]),b(!1)}finally{S(!1)}}},C=()=>{i(""),f(new Date().toISOString().split("T")[0]),b(!1)},r=g=>{window.confirm("ì´ ìš”ì²­ì‚¬í•­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&u(g)},k=g=>{h(g)},R=w.filter(g=>!g.completed),L=w.filter(g=>g.completed);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:n,children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col shadow-xl",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"ê³ ê° ìš”ì²­ì‚¬í•­"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:a})]}),e.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx($,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!N&&e.jsx("button",{onClick:A,className:"w-full mb-4 px-4 py-2.5 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"+ ì¶”ê°€"}),N&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìš”ì²­ì¼ì *"}),e.jsx("input",{type:"date",value:m,onChange:g=>f(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìš”ì²­ ë‚´ìš© *"}),e.jsx("textarea",{value:p,onChange:g=>i(g.target.value),placeholder:"ê³ ê° ìš”ì²­ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900 resize-none",rows:3})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:M,disabled:v,className:"px-4 py-1.5 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:v?"ì €ì¥ ì¤‘...":"ì €ì¥"}),e.jsx("button",{onClick:C,disabled:v,className:"px-4 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:"ì·¨ì†Œ"})]})]}),e.jsx("div",{className:"space-y-2",children:w.length===0?e.jsx("div",{className:"text-center py-12 text-gray-400 text-sm",children:"ë“±ë¡ëœ ìš”ì²­ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤"}):e.jsxs(e.Fragment,{children:[R.map(g=>e.jsx("div",{className:"p-3 bg-white border border-gray-300 rounded hover:border-gray-400 transition-colors group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:()=>k(g.id),className:"mt-0.5 flex-shrink-0",children:e.jsx(ce,{className:"h-4 w-4 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:g.content}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T(new Date(g.createdAt),"yyyy.MM.dd",{locale:q})})]}),e.jsx("button",{onClick:()=>r(g.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:"ì‚­ì œ"})]})},g.id)),L.map(g=>e.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded hover:border-gray-300 transition-colors group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:()=>k(g.id),className:"mt-0.5 flex-shrink-0",children:e.jsx(xe,{className:"h-4 w-4 text-gray-900"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-500 line-through whitespace-pre-wrap break-words",children:g.content}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:T(new Date(g.createdAt),"yyyy.MM.dd",{locale:q})})]}),e.jsx("button",{onClick:()=>r(g.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:"ì‚­ì œ"})]})},g.id))]})})]})]})})},we=({projectName:a,entrancePassword:w,sitePassword:n,onClose:y,onSave:h})=>{const[u,p]=d.useState(w||""),[i,m]=d.useState(n||""),[f,N]=d.useState(!1),[b,v]=d.useState(!1),S=()=>{N(!0)},A=async()=>{if(!b){v(!0);try{await h(u,i),N(!1)}finally{v(!1)}}},M=()=>{p(w||""),m(n||""),N(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:y,children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl",onClick:C=>C.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"ë¹„ë°€ë²ˆí˜¸"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:a})]}),e.jsx("button",{onClick:y,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:e.jsx($,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ê³µë™í˜„ê´€"}),f?e.jsx("input",{type:"text",value:u,onChange:C=>p(C.target.value),placeholder:"ê³µë™í˜„ê´€ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"}):e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded",children:u?e.jsx("span",{className:"text-sm font-mono text-gray-900",children:u}):e.jsx("span",{className:"text-sm text-gray-400",children:"ë¯¸ë“±ë¡"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"í˜„ì¥"}),f?e.jsx("input",{type:"text",value:i,onChange:C=>m(C.target.value),placeholder:"í˜„ì¥ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"}):e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded",children:i?e.jsx("span",{className:"text-sm font-mono text-gray-900",children:i}):e.jsx("span",{className:"text-sm text-gray-400",children:"ë¯¸ë“±ë¡"})})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 flex gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:A,disabled:b,className:"flex-1 px-4 py-2 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:b?"ì €ì¥ ì¤‘...":"ì €ì¥"}),e.jsx("button",{onClick:M,disabled:b,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:"ì·¨ì†Œ"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors",children:"ìˆ˜ì •"}),e.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors",children:"ë‹«ê¸°"})]})})]})})},je=({projectName:a,onClose:w})=>{var p;const[n,y]=d.useState({clientName:"",phoneNumber:"",address:"",startDate:"",endDate:"",area:"",designFee:"",bankAccount:"êµ­ë¯¼ì€í–‰ 487102-01-264798 ê¹€ìƒì¤€",companyAddress:"ì„œìš¸ì‹œ ì–‘ì²œêµ¬ ëª©ë™ì„œë¡œ277 ëŒ€ë¦¼ì•„í¬ë¡œë¹Œ 109í˜¸",representative:"ê¹€ ìƒ ì¤€"}),h=()=>{window.print()},u=i=>{const m=Number(i.replace(/,/g,""));return isNaN(m)?"":m.toLocaleString()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"ë””ìì¸ ì‘ì—… ì˜ë¢°ì„œ"}),e.jsx("button",{onClick:w,className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx($,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4 print:hidden",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì„±í•¨"}),e.jsx("input",{type:"text",value:n.clientName,onChange:i=>y({...n,clientName:i.target.value}),placeholder:"ê³ ê°ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì „í™”ë²ˆí˜¸"}),e.jsx("input",{type:"text",value:n.phoneNumber,onChange:i=>y({...n,phoneNumber:i.target.value}),placeholder:"010-0000-0000",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³µì‚¬ì¥ì†Œ"}),e.jsx("input",{type:"text",value:n.address,onChange:i=>y({...n,address:i.target.value}),placeholder:"ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³µì‚¬ì‹œì‘ì¼"}),e.jsx("input",{type:"date",value:n.startDate,onChange:i=>y({...n,startDate:i.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³µì‚¬ì¢…ë£Œì¼"}),e.jsx("input",{type:"date",value:n.endDate,onChange:i=>y({...n,endDate:i.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³µì‚¬ë©´ì "}),e.jsx("input",{type:"text",value:n.area,onChange:i=>y({...n,area:i.target.value}),placeholder:"ì˜ˆ: 21.9í‰(ê³µê¸‰72.37m2)",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ë””ìì¸ë¹„"}),e.jsx("input",{type:"text",value:u(n.designFee),onChange:i=>{const m=i.target.value.replace(/,/g,"");/^\d*$/.test(m)&&y({...n,designFee:m})},placeholder:"ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³„ì¢Œë²ˆí˜¸"}),e.jsx("input",{type:"text",value:n.bankAccount,onChange:i=>y({...n,bankAccount:i.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("button",{onClick:h,disabled:!n.clientName||!n.phoneNumber||!n.address,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(me,{className:"h-4 w-4"}),"ì¸ì‡„í•˜ê¸°"]})]}),e.jsx("div",{className:"hidden print:block p-16",children:e.jsxs("div",{className:"space-y-16",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ë””ìì¸ ì‘ì—… ì˜ë¢°ì„œ"}),e.jsxs("div",{className:"space-y-8 text-base leading-relaxed",children:[e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("span",{className:"w-48",children:"1. ì„±Â Â Â Â Â Â í•¨ :"}),e.jsx("span",{className:"flex-1",children:n.clientName})]}),e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("span",{className:"w-48",children:"2. ì „í™”ë²ˆí˜¸ :"}),e.jsx("span",{className:"flex-1",children:n.phoneNumber})]}),e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("span",{className:"w-48",children:"3. ê³µì‚¬ì¥ì†Œ :"}),e.jsx("span",{className:"flex-1",children:n.address})]}),e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("span",{className:"w-48",children:"3. ê³µì‚¬ê¸°ê°„ :"}),e.jsx("span",{className:"flex-1",children:n.startDate&&n.endDate?e.jsxs(e.Fragment,{children:[T(new Date(n.startDate),"yyyyë…„",{locale:q}),"Â Â Â ",T(new Date(n.startDate),"MMì›”",{locale:q}),"Â Â Â ",T(new Date(n.startDate),"ddì¼",{locale:q})," ~ ",T(new Date(n.endDate),"yyyyë…„",{locale:q}),"Â Â Â ",T(new Date(n.endDate),"MMì›”",{locale:q}),"Â Â Â ",T(new Date(n.endDate),"ddì¼",{locale:q})," (ë¯¸ì •)"]}):"ë¯¸ì •"})]}),e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("span",{className:"w-48",children:"5. ê³µì‚¬ë©´ì  :"}),e.jsx("span",{className:"flex-1",children:n.area})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("span",{className:"w-48",children:"6. ë””ìì¸ë¹„ :"}),e.jsxs("span",{className:"flex-1",children:[n.designFee?`${u(n.designFee)}ì›`:""," (ë¶€ê°€ì„¸ë³„ë„)"]})]}),n.bankAccount&&e.jsx("div",{className:"ml-48 mt-2 text-center",children:n.bankAccount})]})]}),e.jsxs("div",{className:"mt-20 space-y-3",children:[e.jsx("div",{className:"text-base font-bold",children:"*Â ë„Â ê¸‰Â ì"}),e.jsxs("div",{className:"ml-8 space-y-2 text-base",children:[e.jsxs("div",{children:["ì£¼Â ì†Œ : ",n.address]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{children:["ì„±Â ëª… : ",(p=n.clientName)==null?void 0:p.split("").join("    ")]}),e.jsx("span",{className:"ml-8",children:"(ì¸)"})]})]})]}),e.jsxs("div",{className:"mt-12 space-y-3",children:[e.jsx("div",{className:"text-base font-bold",children:"*Â ìˆ˜Â ê¸‰Â ì"}),e.jsxs("div",{className:"ml-8 space-y-2 text-base",children:[e.jsxs("div",{children:["ì£¼Â ì†Œ : ",n.companyAddress]}),e.jsx("div",{children:"ìƒÂ í˜¸ : HV LAB (ì—ì´ì¹˜ë¸Œì´ë©)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{children:["ëŒ€Â í‘œ : ",n.representative]}),e.jsx("div",{className:"ml-8 inline-flex items-center justify-center w-14 h-14 border-2 border-red-600",children:e.jsxs("span",{className:"text-red-600 text-xs font-bold leading-tight text-center",children:["ì—ì´ì¹˜",e.jsx("br",{}),"ë¸Œì´ë©"]})})]})]})]}),e.jsxs("div",{className:"border-t-[3px] border-gray-900 mt-32 pt-12 flex justify-between items-end",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-4xl font-bold",children:"H"}),e.jsx("span",{className:"inline-block w-12 h-1 bg-gray-900 mx-2"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs tracking-widest mb-1",children:"ARCHITECTURE & INTERIOR"}),e.jsx("div",{className:"text-3xl font-bold",children:"HV LAB"})]})]})]})})]})}),e.jsx("style",{children:`
        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:relative {
            position: relative !important;
            background: white !important;
          }
        }
      `})]})},Te=()=>{const{loadProjectsFromAPI:a,addProjectToAPI:w,updateProjectInAPI:n,deleteProjectFromAPI:y}=ue(),{user:h}=he(),u=ye(),[p,i]=d.useState("in-progress"),[m,f]=d.useState("grid"),[N,b]=d.useState(!1),[v,S]=d.useState(null),[A,M]=d.useState(!1),[C,r]=d.useState(!1),[k,R]=d.useState(!1),[L,g]=d.useState(!1),[t,x]=d.useState(null),P=(s,l)=>`lastViewed_${h==null?void 0:h.id}_${s}_${l}`,F=(s,l)=>{const c=P(s,l),o=localStorage.getItem(c);return o?parseInt(o,10):0},z=(s,l)=>{const c=P(s,l);localStorage.setItem(c,Date.now().toString())},I=(s,l)=>{const c=F(s.id,l);return l==="meeting"?(s.meetingNotes||[]).some(j=>(j.createdAt?new Date(j.createdAt).getTime():new Date(j.date).getTime())>c):(s.customerRequests||[]).some(j=>!j.completed)};d.useEffect(()=>{a().catch(s=>{console.error("Failed to load projects:",s),D.error("í”„ë¡œì íŠ¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")})},[a]),d.useEffect(()=>{const s=()=>{S(null),b(!0)};return window.addEventListener("headerAddButtonClick",s),()=>window.removeEventListener("headerAddButtonClick",s)},[]);const K=(s,l)=>{if(!s||!l)return 0;const c=new Date,o=new Date(s),j=new Date(l);if(c<o)return 0;if(c>j)return 100;const E=Math.ceil((j.getTime()-o.getTime())/(1e3*60*60*24)),ie=Math.ceil((c.getTime()-o.getTime())/(1e3*60*60*24)),oe=Math.round(ie/E*100);return Math.min(100,Math.max(0,oe))},B=s=>{S(s),b(!0)},H=async(s,l)=>{if(window.confirm(`"${l}" í”„ë¡œì íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ì‚­ì œëœ ë‚´ì—­ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`))try{await y(s),D.success("í”„ë¡œì íŠ¸ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")}catch(c){console.error("Failed to delete project:",c),D.error("í”„ë¡œì íŠ¸ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},Y=async s=>{try{if(v)await n(v.id,s),D.success("í”„ë¡œì íŠ¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤");else{const l={id:"",...s,team:s.team||[]};await w(l),D.success("í”„ë¡œì íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"),i(s.status||"planning")}b(!1),S(null)}catch(l){console.error("Failed to save project:",l),D.error("í”„ë¡œì íŠ¸ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},Z=async(s,l)=>{try{await n(s,{status:l}),D.success("ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(c){console.error("Failed to update project status:",c),D.error("ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},_=s=>{x(s),M(!0),z(s.id,"meeting")},J=s=>{x(s),r(!0),z(s.id,"request")},U=s=>{x(s),R(!0)},W=s=>{x(s),g(!0)},ee=async(s,l)=>{if(!t)return;const c=t.entrancePassword,o=t.sitePassword;x({...t,entrancePassword:s,sitePassword:l});try{await n(t.id,{entrancePassword:s,sitePassword:l}),D.success("ë¹„ë°€ë²ˆí˜¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(j){console.error("Failed to save passwords:",j),D.error("ë¹„ë°€ë²ˆí˜¸ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),x({...t,entrancePassword:c,sitePassword:o})}},se=async(s,l)=>{if(!t)return;const c={id:Date.now().toString(),content:s,date:l,createdAt:new Date},o=[...t.meetingNotes||[],c];x({...t,meetingNotes:o});try{await n(t.id,{meetingNotes:o}),D.success("ë¯¸íŒ… ë‚´ìš©ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(j){console.error("Failed to save meeting note:",j),D.error("ë¯¸íŒ… ë‚´ìš© ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),x({...t,meetingNotes:t.meetingNotes||[]})}},te=async(s,l)=>{if(!t)return;const c={id:Date.now().toString(),content:s,completed:!1,createdAt:l},o=[...t.customerRequests||[],c];x({...t,customerRequests:o});try{await n(t.id,{customerRequests:o}),D.success("ê³ ê° ìš”ì²­ì‚¬í•­ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(j){console.error("Failed to save customer request:",j),D.error("ê³ ê° ìš”ì²­ì‚¬í•­ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),x({...t,customerRequests:t.customerRequests||[]})}},ae=async s=>{if(!t)return;const l=t.customerRequests||[],c=l.map(o=>o.id===s?{...o,completed:!o.completed}:o);x({...t,customerRequests:c});try{await n(t.id,{customerRequests:c}),D.success("ìš”ì²­ì‚¬í•­ ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(o){console.error("Failed to toggle request:",o),D.error("ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),x({...t,customerRequests:l})}},ne=async s=>{if(!t)return;const l=t.meetingNotes||[],c=l.filter(o=>o.id!==s);x({...t,meetingNotes:c});try{await n(t.id,{meetingNotes:c}),D.success("ë¯¸íŒ… ë‚´ìš©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")}catch(o){console.error("Failed to delete meeting note:",o),D.error("ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),x({...t,meetingNotes:l})}},re=async s=>{if(!t)return;const l=t.customerRequests||[],c=l.filter(o=>o.id!==s);x({...t,customerRequests:c});try{await n(t.id,{customerRequests:c}),D.success("ê³ ê° ìš”ì²­ì‚¬í•­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")}catch(o){console.error("Failed to delete customer request:",o),D.error("ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"),x({...t,customerRequests:l})}},X=({project:s})=>{const c={planning:{label:"ê³µì‚¬ëŒ€ê¸°",color:"bg-white text-gray-700 border-gray-300"},"in-progress":{label:"ê³µì‚¬ì§„í–‰ì¤‘",color:"bg-white text-gray-900 border-gray-300"},completed:{label:"ê³µì‚¬ì™„ë£Œ",color:"bg-gray-900 text-white border-gray-900"},"on-hold":{label:"ë³´ë¥˜",color:"bg-white text-gray-600 border-gray-300"}}[s.status];return e.jsxs("select",{value:s.status,onChange:o=>Z(s.id,o.target.value),className:O("px-2 py-1 text-xs font-medium border rounded cursor-pointer","focus:outline-none focus:ring-2 focus:ring-gray-500",c.color),onClick:o=>o.stopPropagation(),children:[e.jsx("option",{value:"planning",children:"ê³µì‚¬ëŒ€ê¸°"}),e.jsx("option",{value:"in-progress",children:"ê³µì‚¬ì§„í–‰ì¤‘"}),e.jsx("option",{value:"completed",children:"ê³µì‚¬ì™„ë£Œ"}),e.jsx("option",{value:"on-hold",children:"ë³´ë¥˜"})]})},G=(()=>{let s=u;return p!=="all"&&(s=s.filter(l=>l.status===p)),s})(),V={planning:u.filter(s=>s.status==="planning").length,inProgress:u.filter(s=>s.status==="in-progress").length,completed:u.filter(s=>s.status==="completed").length,onHold:u.filter(s=>s.status==="on-hold").length},le=({project:s})=>{var c,o,j,E;const l=K(s.startDate,s.endDate);return e.jsxs("div",{className:"card p-3 md:p-4 hover:border-gray-400 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 md:mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-base md:text-lg text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:[s.client,"ë‹˜"]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="planning"&&e.jsx("button",{onClick:()=>W(s),className:"px-2 py-1 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 rounded transition-colors",children:"ë””ìì¸ ê³„ì•½ì„œ"}),e.jsx(X,{project:s})]}),e.jsx("button",{onClick:()=>B(s),className:"text-xs text-gray-600 hover:text-gray-900",children:"ìˆ˜ì •"})]})]}),e.jsxs("div",{className:"space-y-1.5 md:space-y-2 mb-3 md:mb-4 text-xs md:text-sm",children:[e.jsxs("div",{className:"text-gray-600",children:["ìœ„ì¹˜: ",s.location]}),e.jsxs("div",{className:"text-gray-600",children:["ê¸°ê°„: ",s.startDate&&s.endDate?`${T(s.startDate,"MM.dd (eee)",{locale:q})} - ${T(s.endDate,"MM.dd (eee)",{locale:q})}`:"ë¯¸ì •"]}),e.jsxs("div",{className:"text-gray-600",children:["ë‹´ë‹¹: ",s.manager]})]}),e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5 md:mb-2",children:[e.jsx("span",{className:"text-[10px] md:text-xs text-gray-600",children:"ì§„í–‰ë¥  (ìë™ ê³„ì‚°)"}),e.jsxs("span",{className:"text-xs md:text-sm font-medium text-gray-900",children:[l,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 h-1",children:e.jsx("div",{className:"bg-gray-900 h-1 transition-all",style:{width:`${l}%`}})})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:()=>_(s),className:"relative px-2 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["ë¯¸íŒ…ë‚´ìš©",(((c=s.meetingNotes)==null?void 0:c.length)||0)>0&&e.jsxs("span",{className:"ml-1 text-[10px] text-gray-500",children:["(",((o=s.meetingNotes)==null?void 0:o.length)||0,")"]}),I(s,"meeting")&&e.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full",children:"N"})]}),e.jsxs("button",{onClick:()=>J(s),className:"relative px-2 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["ê³ ê°ìš”ì²­",(((j=s.customerRequests)==null?void 0:j.length)||0)>0&&e.jsxs("span",{className:"ml-1 text-[10px] text-gray-500",children:["(",((E=s.customerRequests)==null?void 0:E.length)||0,")"]}),I(s,"request")&&e.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full",children:"N"})]}),e.jsx("button",{onClick:()=>U(s),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"ë¹„ë°€ë²ˆí˜¸"})]}),((h==null?void 0:h.role)==="admin"||(h==null?void 0:h.role)==="manager")&&e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>H(s.id,s.name),className:"text-xs text-rose-600 hover:text-rose-700",children:"ì‚­ì œ"})})]})]})};return e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("nav",{className:"flex space-x-4 md:space-x-8 overflow-x-auto",children:[{id:"planning",label:"ê³µì‚¬ëŒ€ê¸°",count:V.planning,color:"text-gray-700"},{id:"in-progress",label:"ê³µì‚¬ì§„í–‰ì¤‘",count:V.inProgress,color:"text-gray-700"},{id:"completed",label:"ê³µì‚¬ì™„ë£Œ",count:V.completed,color:"text-gray-700"},{id:"all",label:"ì „ì²´",count:u.length,color:"text-gray-600"}].map(s=>e.jsxs("button",{onClick:()=>i(s.id),className:O("py-3 md:py-4 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap",p===s.id?`border-gray-700 ${s.color}`:"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),children:[s.label,e.jsx("span",{className:O("ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold",p===s.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"),children:s.count})]},s.id))}),e.jsxs("div",{className:"flex items-center gap-6 mb-3 md:mb-4",children:[e.jsxs("div",{className:"hidden sm:flex border border-gray-300 overflow-hidden rounded",children:[e.jsx("button",{onClick:()=>f("grid"),className:O("px-3 md:px-4 py-2 text-xs md:text-sm",m==="grid"?"bg-gray-100":"hover:bg-gray-50"),children:"ê·¸ë¦¬ë“œ"}),e.jsx("button",{onClick:()=>f("list"),className:O("px-3 md:px-4 py-2 text-xs md:text-sm border-l border-gray-300",m==="list"?"bg-gray-100":"hover:bg-gray-50"),children:"ë¦¬ìŠ¤íŠ¸"})]}),e.jsxs("button",{onClick:()=>{S(null),b(!0)},className:"hidden lg:inline-flex btn btn-primary portrait:px-2 landscape:px-4 py-2 items-center gap-1",children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{className:"portrait:hidden landscape:inline",children:"ìƒˆ í”„ë¡œì íŠ¸"})]})]})]})}),m==="grid"||window.innerWidth<768?e.jsx("div",{className:"projects-grid grid grid-cols-1 md:grid-cols-2 ipad:grid-cols-2 ipad-lg:grid-cols-2 ipad-xl:grid-cols-3 ipad-2xl:grid-cols-3 2xl:grid-cols-4 gap-3 md:gap-6",children:G.map(s=>e.jsx(le,{project:s},s.id))}):e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"í”„ë¡œì íŠ¸"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ê³ ê°"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ê¸°ê°„"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ìƒíƒœ"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì§„í–‰ë¥ "}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ì•¡ì…˜"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(s=>{var c,o,j,E;const l=K(s.startDate,s.endDate);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.location})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("p",{className:"text-sm",children:[s.client,"ë‹˜"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.startDate&&s.endDate?e.jsxs(e.Fragment,{children:[T(s.startDate,"yyyy.MM.dd (eee)",{locale:q})," -",e.jsx("br",{}),T(s.endDate,"yyyy.MM.dd (eee)",{locale:q})]}):"ë¯¸ì •"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="planning"&&e.jsx("button",{onClick:()=>W(s),className:"px-2 py-1 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 rounded transition-colors",children:"ë””ìì¸ ê³„ì•½ì„œ"}),e.jsx(X,{project:s})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-24 bg-gray-200 h-1 mr-2",children:e.jsx("div",{className:"bg-gray-900 h-1",style:{width:`${l}%`}})}),e.jsxs("span",{className:"text-sm",children:[l,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>_(s),className:"relative px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["ë¯¸íŒ…ë‚´ìš©",(((c=s.meetingNotes)==null?void 0:c.length)||0)>0&&e.jsxs("span",{className:"ml-1 text-[10px] text-gray-500",children:["(",((o=s.meetingNotes)==null?void 0:o.length)||0,")"]}),I(s,"meeting")&&e.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full",children:"N"})]}),e.jsxs("button",{onClick:()=>J(s),className:"relative px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["ê³ ê°ìš”ì²­",(((j=s.customerRequests)==null?void 0:j.length)||0)>0&&e.jsxs("span",{className:"ml-1 text-[10px] text-gray-500",children:["(",((E=s.customerRequests)==null?void 0:E.length)||0,")"]}),I(s,"request")&&e.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full",children:"N"})]}),e.jsx("button",{onClick:()=>U(s),className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"ë¹„ë°€ë²ˆí˜¸"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(s),className:"text-xs text-gray-600 hover:text-gray-900",children:"ìˆ˜ì •"}),((h==null?void 0:h.role)==="admin"||(h==null?void 0:h.role)==="manager")&&e.jsx("button",{onClick:()=>H(s.id,s.name),className:"text-xs text-rose-600 hover:text-rose-700",children:"ì‚­ì œ"})]})]})})]},s.id)})})]})}),N&&e.jsx(fe,{project:v,onClose:()=>{b(!1),S(null)},onSave:Y}),A&&t&&e.jsx(Ne,{projectName:t.name,meetingNotes:t.meetingNotes||[],onClose:()=>{M(!1),x(null)},onSave:se,onDelete:ne}),C&&t&&e.jsx(ve,{projectName:t.name,customerRequests:t.customerRequests||[],onClose:()=>{r(!1),x(null)},onSave:te,onToggleComplete:ae,onDelete:re}),k&&t&&e.jsx(we,{projectName:t.name,entrancePassword:t.entrancePassword||"",sitePassword:t.sitePassword||"",onClose:()=>{R(!1),x(null)},onSave:ee}),L&&t&&e.jsx(je,{projectName:t.name,onClose:()=>{g(!1),x(null)}})]})};export{Te as default};
