import{j as e,l as ce,u as ds,s as $e,z as y,p as be,a as ps}from"./index-DghZEWAL.js";import{r as g}from"./vendor-react-B9Yt5e0k.js";import{u as fs,c as gs}from"./dataStore-DbVcp54V.js";import{u as bs}from"./useFilteredProjects-BYl_omkU.js";import{p as S}from"./vendor-date-9Cl9d1sr.js";import{X as le,h as Ns,j as ys,T as xs,U as ks,I as hs}from"./vendor-ui-CcgAtStV.js";import{r as Fe}from"./formatters-15aXprTM.js";import{s as Ds,m as vs,g as Vs}from"./imageStorage-DjLpiDnu.js";import{a as Le,b as Cs,B as As}from"./index-CSlX1tQB.js";import"./vendor-data-BwGxWJIh.js";const Hs=({projectName:v,onClose:j,type:Ne="cash"})=>{const re=Ne==="cash",Q=re?"í˜„ê¸ˆìˆ˜ë ¹ì¦":"ì´ì²´í™•ì¸ì¦",W=re?"ìœ„ì™€ ê°™ì´ í˜„ê¸ˆìœ¼ë¡œ ì§€ê¸‰ ë°›ì•˜ìŒì„ í™•ì¸ í•©ë‹ˆë‹¤.":"ìœ„ì™€ ê°™ì´ ê³„ì¢Œì´ì²´ë¡œ ì§€ê¸‰ ë°›ì•˜ìŒì„ í™•ì¸ í•©ë‹ˆë‹¤.",[f,B]=g.useState({receiptDate:S(new Date,"yyyy-MM-dd"),customerName:"",amount:"",purpose:"ì¸í…Œë¦¬ì–´ ê³µì‚¬ëŒ€ê¸ˆ",receivedBy:""}),G=()=>{window.print()},je=A=>{const w=Number(A.replace(/,/g,""));return isNaN(w)?"":w.toLocaleString()},x=A=>{if(A===0)return"ì˜";const w=["","ë§Œ","ì–µ","ì¡°"],oe=["","ì‹­","ë°±","ì²œ"],ye=["","ì¼","ì´","ì‚¼","ì‚¬","ì˜¤","ìœ¡","ì¹ ","íŒ”","êµ¬"];let O="",U=0;for(;A>0;){const R=A%1e4;if(R>0){let _="",I=R,ue=0;for(;I>0;){const ee=I%10;ee>0&&(_=ye[ee]+oe[ue]+_),I=Math.floor(I/10),ue++}O=_+w[U]+O}A=Math.floor(A/1e4),U++}return O+"ì›ì •"};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:e.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[e.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:Q},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:76,columnNumber:13},void 0),e.jsxDEV("button",{onClick:j,className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsxDEV(le,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:81,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:77,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:75,columnNumber:11},void 0),e.jsxDEV("div",{className:"p-6 space-y-4 print:hidden",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ìˆ˜ë ¹ì¼ìž"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:88,columnNumber:15},void 0),e.jsxDEV("input",{type:"date",value:f.receiptDate,onChange:A=>B({...f,receiptDate:A.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:89,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:87,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³ ê°ëª…"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:98,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:f.customerName,onChange:A=>B({...f,customerName:A.target.value}),placeholder:"ê³ ê°ëª…ì„ ìž…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:99,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:97,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê¸ˆì•¡"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:109,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:je(f.amount),onChange:A=>{const w=A.target.value.replace(/,/g,"");/^\d*$/.test(w)&&B({...f,amount:w})},placeholder:"ê¸ˆì•¡ì„ ìž…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:110,columnNumber:15},void 0),f.amount&&e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:x(Number(f.amount))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:123,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:108,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ë‚´ì—­"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:130,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:f.purpose,onChange:A=>B({...f,purpose:A.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:131,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:129,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ìˆ˜ë ¹ì¸"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:140,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:f.receivedBy,onChange:A=>B({...f,receivedBy:A.target.value}),placeholder:"ìˆ˜ë ¹ì¸ëª…ì„ ìž…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:141,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:139,columnNumber:13},void 0),e.jsxDEV("button",{onClick:G,disabled:!f.customerName||!f.amount||!f.receivedBy,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsxDEV(Ns,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:155,columnNumber:15},void 0),"ì¸ì‡„í•˜ê¸°"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:150,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:86,columnNumber:11},void 0),e.jsxDEV("div",{className:"hidden print:block p-12",children:e.jsxDEV("div",{className:"border-4 border-double border-gray-900 p-8",children:[e.jsxDEV("h1",{className:"text-center text-3xl font-bold mb-8",children:re?"í˜„ ê¸ˆ ìˆ˜ ë ¹ ì¦":"ì´ ì²´ í™• ì¸ ì¦"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:163,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-6 text-lg",children:[e.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsxDEV("span",{className:"font-medium w-32",children:"ìˆ˜ë ¹ì¼ìž:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:169,columnNumber:19},void 0),e.jsxDEV("span",{className:"flex-1 receipt-date",children:S(new Date(f.receiptDate),"yyyyë…„ MMì›” ddì¼",{locale:ce})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:170,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:168,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsxDEV("span",{className:"font-medium w-32",children:"ê³ ê°ëª…:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:174,columnNumber:19},void 0),e.jsxDEV("span",{className:"flex-1",children:f.customerName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:175,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:173,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsxDEV("span",{className:"font-medium w-32",children:"í”„ë¡œì íŠ¸:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:179,columnNumber:19},void 0),e.jsxDEV("span",{className:"flex-1",children:v},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:180,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:178,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsxDEV("span",{className:"font-medium w-32",children:"ê¸ˆì•¡:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:184,columnNumber:19},void 0),e.jsxDEV("span",{className:"flex-1 font-bold receipt-amount",children:["â‚©",Number(f.amount).toLocaleString(),"ì›"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:185,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:183,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsxDEV("span",{className:"font-medium w-32",children:"ê¸ˆì•¡(í•œê¸€):"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:191,columnNumber:19},void 0),e.jsxDEV("span",{className:"flex-1",children:x(Number(f.amount))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:192,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:190,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsxDEV("span",{className:"font-medium w-32",children:"ë‚´ì—­:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:196,columnNumber:19},void 0),e.jsxDEV("span",{className:"flex-1",children:f.purpose},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:197,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:195,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:167,columnNumber:15},void 0),e.jsxDEV("div",{className:"mt-12 text-center",children:[e.jsxDEV("p",{className:"text-lg mb-8",children:W},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:202,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"text-lg receipt-date",children:S(new Date(f.receiptDate),"yyyyë…„ MMì›” ddì¼",{locale:ce})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:205,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-xl font-medium mt-8",children:["ìˆ˜ë ¹ì¸: ",f.receivedBy," ",e.jsxDEV("span",{className:"ml-4",children:"(ì¸)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:207,columnNumber:48},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:206,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:204,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:162,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:161,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:72,columnNumber:7},void 0),e.jsxDEV("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
        }
      `},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:217,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:71,columnNumber:5},void 0)},Ws=()=>{const{payments:v,loadPaymentsFromAPI:j,addPaymentToAPI:Ne,deletePaymentFromAPI:re,updatePaymentInAPI:Q,updatePayment:W}=fs(),{user:f}=ds(),B=bs(),[G,je]=g.useState(""),[x,A]=g.useState(null),[w,oe]=g.useState(null),[ye,O]=g.useState(!1),[U,R]=g.useState(!1),[_,I]=g.useState(!1),[ue,ee]=g.useState(!1),[Te,qe]=g.useState(""),[z,se]=g.useState("form"),[xe,Ke]=g.useState(!1),[We,q]=g.useState(!1),me=g.useRef(null),[F,ne]=g.useState("pending"),[Ls,js]=g.useState("all"),[Ee,Oe]=g.useState(()=>localStorage.getItem("payments_showMyRequestsOnly")==="true"),[Es,ze]=g.useState(!1),[_s,Bs]=g.useState(null),[Ze,Je]=g.useState(!1),[Xe,Ps]=g.useState(""),[de,_e]=g.useState(!1),Be=g.useRef(!1),[Z,Ye]=g.useState([]),[ke,Pe]=g.useState([]),[pe,te]=g.useState(null),[he,De]=g.useState([]),[we,Ue]=g.useState([]),[ve,Ve]=g.useState(!1),[$,ie]=g.useState({}),[Ie,Me]=g.useState(!1),Qe=()=>{const s=localStorage.getItem("lastSelectedProject"),r=B.filter(n=>n.status!=="completed");return s&&r.some(n=>n.name===s)?s:r.length>0?r[0].name:""},[i,h]=g.useState({project:"",date:S(new Date,"yyyy-MM-dd"),process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]});g.useEffect(()=>{(async()=>{try{const r=await gs.getAllContractors();Ye(r.map(n=>({id:n._id||n.id,rank:n.rank,companyName:n.companyName,name:n.name,process:n.process,contact:n.contact,accountNumber:n.accountNumber,bankName:n.bankName,notes:n.notes,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)})))}catch(r){console.error("Failed to load contractors:",r)}})()},[]),g.useEffect(()=>{j().catch(r=>{console.error("Failed to load payments:",r)});const s=()=>{Ke(window.innerWidth<1024)};if(s(),window.addEventListener("resize",s),B.length>0&&!i.project){const r=Qe();r&&(h(n=>({...n,project:r})),localStorage.setItem("lastSelectedProject",r))}return()=>window.removeEventListener("resize",s)},[j,B]),g.useEffect(()=>{const s=setInterval(()=>{console.log("[ìžë™ ìƒˆë¡œê³ ì¹¨] ê²°ì œ ë‚´ì—­ ì—…ë°ì´íŠ¸ ì¤‘..."),j().catch(n=>{console.error("[ìžë™ ìƒˆë¡œê³ ì¹¨] ì‹¤íŒ¨:",n)})},3e4),r=()=>{document.visibilityState==="visible"&&(console.log("[í¬ì»¤ìŠ¤ ìƒˆë¡œê³ ì¹¨] íŽ˜ì´ì§€ í™œì„±í™” - ê²°ì œ ë‚´ì—­ ì—…ë°ì´íŠ¸ ì¤‘..."),j().catch(n=>{console.error("[í¬ì»¤ìŠ¤ ìƒˆë¡œê³ ì¹¨] ì‹¤íŒ¨:",n)}))};return document.addEventListener("visibilitychange",r),()=>{clearInterval(s),document.removeEventListener("visibilitychange",r)}},[j]),g.useEffect(()=>{const s=$e.getSocket();if(!s)return;const r=n=>{console.log("ðŸ”„ [ì‹¤ì‹œê°„ ë™ê¸°í™”] ê²°ì œ ìƒíƒœ ë³€ê²½ ê°ì§€:",n),j().catch(o=>{console.error("[ì‹¤ì‹œê°„ ë™ê¸°í™”] ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:",o)})};return s.on("payment:refresh",r),()=>{s.off("payment:refresh",r)}},[j]),g.useEffect(()=>{(async()=>{var o,a,m,l;if(Be.current)return;const r=new URLSearchParams(window.location.search),n=r.get("complete")||r.get("c");if(n){if(!f){console.log("[ìžë™ ì†¡ê¸ˆì™„ë£Œ] ë¡œê·¸ì¸ í•„ìš” - ëŒ€ê¸° ì¤‘");return}Be.current=!0,console.log("[ìžë™ ì†¡ê¸ˆì™„ë£Œ] ì²˜ë¦¬ ì‹œìž‘:",n),window.history.replaceState({},"","/payments"),se("list"),ne("completed"),W(String(n),{status:"completed"}),y.success("ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤");try{await Q(String(n),{status:"completed"}),j()}catch(t){console.error("[ìžë™ ì†¡ê¸ˆì™„ë£Œ] ì²˜ë¦¬ ì‹¤íŒ¨:",t),W(String(n),{status:"pending"}),ne("pending");let c="ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤";((o=t.response)==null?void 0:o.status)===401?c="ì¸ì¦ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”":((a=t.response)==null?void 0:a.status)===404?c="ê²°ì œ ìš”ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ID: "+n+")":(l=(m=t.response)==null?void 0:m.data)!=null&&l.error?c=t.response.data.error:t.message&&(c+=": "+t.message),y.error(c)}}})()},[j,Q,W,f]),g.useEffect(()=>{if(i.process){const s=new Set(v.filter(a=>{var m;return a.status==="completed"&&((m=a.bankInfo)==null?void 0:m.accountHolder)}).map(a=>a.bankInfo.accountHolder.trim().toLowerCase())),r=(a,m)=>{const l=a.toLowerCase(),t=m.toLowerCase();if(l.includes(t)||t.includes(l))return!0;const c=l.split("/").map(d=>d.trim()),u=t.replace(/ê³µì‚¬$/,"").trim();for(const d of c)if(d===u||u.includes(d)||d.includes(u))return!0;return!1},o=Z.filter(a=>{if(!r(i.process,a.process))return!1;const l=a.accountNumber&&a.accountNumber.trim()!=="",t=a.name.trim().toLowerCase(),c=s.has(t);return l||c}).sort((a,m)=>{const l=a.accountNumber&&a.accountNumber.trim()!=="",t=m.accountNumber&&m.accountNumber.trim()!=="";return l&&!t?-1:!l&&t?1:0});Pe(o)}else Pe([])},[i.process,Z,v]),g.useEffect(()=>{if(i.process){const s=(o,a)=>{if(!a)return!1;const m=o.toLowerCase(),l=a.toLowerCase();if(m.includes(l)||l.includes(m))return!0;const t=m.split("/").map(u=>u.trim()),c=l.replace(/ê³µì‚¬$/,"").trim();for(const u of t)if(u===c||c.includes(u)||u.includes(c))return!0;return!1},r=v.filter(o=>{var a,m,l;return o.status==="completed"&&o.process&&s(i.process,o.process)&&((a=o.bankInfo)==null?void 0:a.accountHolder)&&((m=o.bankInfo)==null?void 0:m.bankName)&&((l=o.bankInfo)==null?void 0:l.accountNumber)}),n=new Map;r.forEach(o=>{const a=`${o.bankInfo.accountHolder}_${o.bankInfo.bankName}_${o.bankInfo.accountNumber}`;n.has(a)||n.set(a,{accountHolder:o.bankInfo.accountHolder,bankName:o.bankInfo.bankName,accountNumber:o.bankInfo.accountNumber,itemName:o.itemName||"",amount:o.amount||0})}),De(Array.from(n.values()))}else De([])},[i.process,v]),g.useEffect(()=>{var r;const s=((r=i.accountHolder)==null?void 0:r.trim())||"";if(s.length>=1&&ve){const n=[],o=new Set;Z.filter(a=>a.accountNumber&&a.accountNumber.trim()!=="").forEach(a=>{const m=a.name.trim(),l=m.toLowerCase(),t=s.toLowerCase();l.startsWith(t)&&!o.has(l)&&(o.add(l),n.push({name:m,bankName:a.bankName||"",accountNumber:a.accountNumber||"",source:"contractor"}))}),v.filter(a=>{var m;return a.status==="completed"&&((m=a.bankInfo)==null?void 0:m.accountHolder)}).forEach(a=>{const m=a.bankInfo.accountHolder.trim(),l=m.toLowerCase(),t=s.toLowerCase();l.startsWith(t)&&!o.has(l)&&(o.add(l),n.push({name:m,bankName:a.bankInfo.bankName||"",accountNumber:a.bankInfo.accountNumber||"",source:"payment"}))}),Ue(n)}else Ue([])},[i.accountHolder,ve,Z,v]);const Ge=s=>{const r=s.split(`
`).map(t=>t.trim()).filter(t=>t),n={amounts:{},bankInfo:{},vendor:null,itemName:void 0,includeVat:!1},o=["ê¹€","ì´","ë°•","ìµœ","ì •","ê°•","ì¡°","ìœ¤","ìž¥","ìž„","í•œ","ì˜¤","ì„œ","ì‹ ","ê¶Œ","í™©","ì•ˆ","ì†¡","ë¥˜","ì „","í™","ê³ ","ë¬¸","ì–‘","ì†","ë°°","ë°±","í—ˆ","ìœ ","ë‚¨","ì‹¬","ë…¸","í•˜","ê³½","ì„±","ì°¨","ì£¼","ìš°","êµ¬","ë¯¼","ì§„","ë‚˜","ì—„","ì±„","ì›","ì²œ","ë°©","ê³µ","í˜„","í•¨","ë³€","ì—¼","ì—¬","ì¶”","ë„","ì„","ì„ ","ì„¤","ë§ˆ","ê¸¸","ì—°","ìœ„","í‘œ","ëª…","ê¸°","ë°˜","ë¼","ì™•","ê¸ˆ","ì˜¥","ìœ¡","ì¸","ë§¹","ì œ","íƒ","êµ­","ì–´","ê²½","ë´‰","ì‚¬"],a=t=>{const c=["ë¡œ","ì—ê²Œ","ì•žìœ¼ë¡œ","ë‹˜","ì”¨","ê»˜","í•œí…Œ","ë³´ê³ "];for(const u of c)if(t.endsWith(u)&&t.length>u.length+1)return t.slice(0,-u.length);return t},m=t=>{if(!t||t.length<2||t.length>5||!/^[ê°€-íž£]{2,5}$/.test(t)||["ì€í–‰","ë±…í¬","ê¸ˆê³ ","ì‹ í˜‘","ì¦ê¶Œ","íˆ¬ìž","ì €ì¶•","ìš°ì²´êµ­","êµ­ë¯¼","ì‹ í•œ","ìš°ë¦¬","í•˜ë‚˜","ë†í˜‘","ê¸°ì—…","ì œì¼","ì”¨í‹°","ì¹´ì¹´ì˜¤","ì¼€ì´","í† ìŠ¤","ë¶€ì‚°","ëŒ€êµ¬","ê²½ë‚¨","ê´‘ì£¼","ì „ë¶","ì œì£¼","ì‚°ì—…","ìˆ˜í˜‘","ìƒˆë§ˆì„","í•˜ë‚˜ì€í–‰","êµ­ë¯¼ì€í–‰","ì‹ í•œì€í–‰","ìš°ë¦¬ì€í–‰","ë†í˜‘ì€í–‰","ê¸°ì—…ì€í–‰","ì œì¼ì€í–‰","í† ìŠ¤ë±…í¬","ì¹´ì¹´ì˜¤ë±…í¬"].includes(t)||["ê°€ì„¤","ì² ê±°","ì„¤ë¹„","ë¯¸ìž¥","ì „ê¸°","ëª©ê³µ","ì¡°ê²½","ê°€êµ¬","ë§ˆë£¨","íƒ€ì¼","ìš•ì‹¤","í•„ë¦„","ë„ë°°","ë„ìž¥","ì°½í˜¸","ì—ì–´ì»¨","ê¸°íƒ€","ë°©ìˆ˜","ì²­ì†Œ","ìœ ë¦¬","ìƒ¤ì‹œ","ë°°ê´€","ì„ê³µ","ì£¼ë°©","ë°”ë‹¥","ê°„íŒ"].includes(t))return!1;if(t.length>=2){const d=t.charAt(0),C=t.substring(0,2);if(["ë‚¨ê¶","ì„ ìš°","ë…ê³ ","í™©ë³´","ì‚¬ê³µ","ì„œë¬¸","ì œê°ˆ"].includes(C)||o.includes(d))return!0}return t.length>=2&&t.length<=4},l=r.some(t=>t.includes("ë¬´í†µìž¥ ìž…ê¸ˆ")||t.includes("ë¬´í†µìž¥ìž…ê¸ˆ"));if(r.forEach((t,c)=>{if(t.includes("ìƒí’ˆëª…")&&t.includes(":")){const u=t.match(/ìƒí’ˆëª…\s*:\s*(.+)/);u&&(n.itemName=u[1].trim())}if(t.includes("ì˜ˆê¸ˆì£¼")&&t.includes(":")){const u=t.match(/ì˜ˆê¸ˆì£¼\s*:\s*(.+)/);u&&(n.bankInfo.accountHolder=u[1].trim())}if(t.includes("ìž…ê¸ˆì€í–‰")&&t.includes(":")){const u=t.match(/ìž…ê¸ˆì€í–‰\s*:\s*(.+)/);u&&(n.bankInfo.bankName=u[1].trim())}if(t.includes("ê³„ì¢Œë²ˆí˜¸")&&t.includes(":")){const u=t.match(/ê³„ì¢Œë²ˆí˜¸\s*:\s*(.+)/);u&&(n.bankInfo.accountNumber=u[1].trim())}if(t.includes("ìž…ê¸ˆê¸ˆì•¡")&&t.includes(":")){const u=t.match(/ìž…ê¸ˆê¸ˆì•¡\s*:\s*([\d,]+)ì›?/);u&&(n.amounts.total=parseInt(u[1].replace(/,/g,"")))}}),l||(r.forEach(t=>{const c=t.match(/\[([^\]]+)\]/);c&&!n.itemName&&(n.itemName=c[1].trim())}),r.forEach((t,c)=>{(t.includes("ë¶€ê°€ì„¸í¬í•¨")||t.includes("ë¶€ê°€ì„¸ í¬í•¨")||t.includes("(ë¶€ê°€ì„¸í¬í•¨)"))&&(n.includeVat=!0);const u=t.match(/=\s*([\d,]+)\s*ì›?/);let d=null;if(u){const N=parseInt(u[1].replace(/,/g,""));N>=1e3&&(n.amounts.total=N)}else if(d=t.match(/(\d+)\s*ë§Œ\s*ì›?/),d){const N=parseInt(d[1])*1e4;t.includes("ìžìž¬")||t.includes("ìž¬ë£Œ")?n.amounts.material=N:t.includes("ì¸ê±´")||t.includes("ë…¸ë¬´")?n.amounts.labor=N:n.amounts.total||(n.amounts.total=N),t=t.replace(/(\d+)\s*ë§Œ\s*ì›?/g,"")}t.includes("/")&&t.split("/").forEach(V=>{const H=V.trim();H.startsWith("[")||H.endsWith("]")||(/^[\d\-]+$/.test(H)&&H.replace(/\-/g,"").length>=10?n.bankInfo.accountNumber||(n.bankInfo.accountNumber=H):m(H)&&!n.bankInfo.accountHolder&&(n.bankInfo.accountHolder=H))});const C=[/\d{6}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{5,7}[\s\-]+\d{2}[\s\-]+\d{5,7}/,/\d{2,4}[\s\-]+\d{2,4}[\s\-]+\d{2,4}[\s\-]+\d{2,4}/,/\d{3}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{3}[\s\-]+\d{4}[\s\-]+\d{7}/,/\d{4}[\s\-]+\d{4}[\s\-]+\d{5}/,/\d{3,4}[\s\-]+\d{2,6}[\s\-]+\d{4,7}/,/\d{10,}/];let p="",k=-1;for(const N of C){const V=t.match(N);if(V&&!n.bankInfo.accountNumber){p=V[0],k=V.index||-1,n.bankInfo.accountNumber=V[0].trim().replace(/\s+/g,"-");const K=t.substring(k+p.length).trim().split(/\s+/);for(const E of K){if(E.startsWith("[")||E.endsWith("]"))continue;const M=a(E);if(m(M)){n.bankInfo.accountHolder=M;break}}if(!n.bankInfo.accountHolder&&c>0){const M=r[c-1].split(/\s+/);for(const P of M){if(P.startsWith("[")||P.endsWith("]"))continue;const T=a(P);if(m(T)){n.bankInfo.accountHolder=T;break}}}if(!n.bankInfo.accountHolder&&c+1<r.length){const E=r[c+1],M=E.split(/\s+/);for(const P of M){if(P.startsWith("[")||P.endsWith("]"))continue;const T=a(P);if(m(T)){n.bankInfo.accountHolder=T;break}}if(!n.bankInfo.accountHolder){const P=E.match(/^([ê°€-íž£]{2,6})/);if(P){const T=a(P[1].trim());m(T)&&(n.bankInfo.accountHolder=T)}}}break}}const L=t.match(/[\d,]+/g);L&&L.forEach(N=>{const V=parseInt(N.replace(/,/g,"")),H=N.replace(/,/g,""),K=p&&p.includes(H);!n.bankInfo.accountNumber&&H.length>=10&&H.length<=20?(n.bankInfo.accountNumber=H,p=H):V>=1e3&&!d&&!K&&(t.includes("ìžìž¬")||t.includes("ìž¬ë£Œ")?n.amounts.material=V:t.includes("ì¸ê±´")||t.includes("ë…¸ë¬´")?n.amounts.labor=V:n.amounts.total||(n.amounts.total=V))});const b={êµ­ë¯¼:"KBêµ­ë¯¼ì€í–‰",KB:"KBêµ­ë¯¼ì€í–‰",ì‹ í•œ:"ì‹ í•œì€í–‰",í•˜ë‚˜:"í•˜ë‚˜ì€í–‰",ìš°ë¦¬:"ìš°ë¦¬ì€í–‰",ê¸°ì—…:"IBKê¸°ì—…ì€í–‰",IBK:"IBKê¸°ì—…ì€í–‰",ë†í˜‘:"NHë†í˜‘ì€í–‰",NH:"NHë†í˜‘ì€í–‰",ì¹´ì¹´ì˜¤:"ì¹´ì¹´ì˜¤ë±…í¬",ì¹´ë±…:"ì¹´ì¹´ì˜¤ë±…í¬",í† ìŠ¤:"í† ìŠ¤ë±…í¬",ì¼€ì´:"ì¼€ì´ë±…í¬",Kë±…í¬:"ì¼€ì´ë±…í¬",ì‚°ì—…:"KDBì‚°ì—…ì€í–‰",KDB:"KDBì‚°ì—…ì€í–‰",ìˆ˜í˜‘:"ìˆ˜í˜‘ì€í–‰",ëŒ€êµ¬:"ëŒ€êµ¬ì€í–‰",ë¶€ì‚°:"ë¶€ì‚°ì€í–‰",ê²½ë‚¨:"ê²½ë‚¨ì€í–‰",ê´‘ì£¼:"ê´‘ì£¼ì€í–‰",ì „ë¶:"ì „ë¶ì€í–‰",SCì œì¼ì€í–‰:"SCì œì¼ì€í–‰",SCì œì¼:"SCì œì¼ì€í–‰",ì œì¼:"SCì œì¼ì€í–‰",SC:"SCì œì¼ì€í–‰",ì”¨í‹°:"í•œêµ­ì”¨í‹°ì€í–‰",ìš°ì²´êµ­:"ìš°ì²´êµ­",ìƒˆë§ˆì„:"ìƒˆë§ˆì„ê¸ˆê³ ",ì‹ í˜‘:"ì‹ í˜‘"},D=Object.keys(b).sort((N,V)=>V.length-N.length);for(const N of D)if(t.includes(N)){const V=b[N];n.bankInfo.bankName=V;const H=new RegExp(`${N}(?:ì€í–‰|ë±…í¬)?\\s+([ê°€-íž£]{2,5})`),K=t.match(H);if(K){const E=a(K[1]);m(E)&&(n.bankInfo.accountHolder=E)}break}if(!n.bankInfo.bankName){const N=t.match(/([ê°€-íž£]+)(ì€í–‰|ë±…í¬)/);N&&(n.bankInfo.bankName=N[0])}const J=[/\(ì£¼\)[ê°€-íž£a-zA-Z0-9]+/,/\(ìœ \)[ê°€-íž£a-zA-Z0-9]+/,/\(ì‚¬\)[ê°€-íž£a-zA-Z0-9]+/,/ì£¼ì‹íšŒì‚¬\s*[ê°€-íž£a-zA-Z0-9]+/,/ìœ í•œíšŒì‚¬\s*[ê°€-íž£a-zA-Z0-9]+/];for(const N of J){const V=t.match(N);if(V&&!n.bankInfo.accountHolder){n.bankInfo.accountHolder=V[0].trim();break}}const X=t.match(/\(([ê°€-íž£]{2,5})\)/);if(X&&!n.bankInfo.accountHolder){const N=X[1];m(N)&&!["ì£¼","ìœ ","ì‚¬"].includes(N)&&(n.bankInfo.accountHolder=N)}if(!n.bankInfo.accountHolder){const N=/[ê°€-íž£]{2,6}/g,V=t.match(N);if(V){const H=t.match(/\d{10,}/)||t.match(/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/),K=t.match(/ì€í–‰|ë±…í¬|ê¸ˆê³ |ì‹ í˜‘|ìš°ì²´êµ­/);V.forEach(E=>{const M=a(E),P=s.split(`
`)[c];if(P&&P.includes(`[${E}]`)||!m(M)||["ì² ê±°","íê¸°ë¬¼","ëª©ê³µ","íƒ€ì¼","ë„ë°°","ì „ê¸°","ì„¤ë¹„","ì²­ì†Œ","ë¯¸ìž¥","ë„ìž¥","ë°©ìˆ˜","ìƒ·ì‹œ","ìƒ¤ì‹œ","ìœ ë¦¬","í•„ë¦„","ì¡°ëª…","ê°€êµ¬","ì‹±í¬","ì£¼ë°©","ìš•ì‹¤","í™”ìž¥ì‹¤","ë§ˆë£¨","ìž¥íŒ","ë²½ì§€","íŽ˜ì¸íŠ¸","ë„ìƒ‰","ë°°ê´€","ëˆ„ìˆ˜","í•˜ìž","ë³´ìˆ˜","ì‹œê³µ","ê³µì‚¬","ëª°ë”©","ì‹œìŠ¤í…œ","ë§ˆì´ë„ˆìŠ¤","í”ŒëŸ¬ìŠ¤","ìžìž¬","ë¶€ìžìž¬","ì¡°ê³µ","ë§Œì›","ì²œì›","ë°±ì›","ìž…ê¸ˆ","ì†¡ê¸ˆ","ì´ì²´","ê³„ì¢Œ","ì°©ë¶ˆ","ì„ ë¶ˆ","í›„ë¶ˆ","ë°°ì†¡","íƒë°°","ìš´ì†¡"].includes(M))return;const ge=t.indexOf(E);if(ge>0){const Y=t[ge-1];if(/[ê°€-íž£]/.test(Y))return}if(ge+E.length<t.length){const Y=t[ge+E.length];if(/[ê°€-íž£]/.test(Y))return}if(!(X&&M===X[1])){if((H||K)&&!n.bankInfo.accountHolder)n.bankInfo.accountHolder=M;else if(!n.bankInfo.accountHolder){const Y=/ì€í–‰|ë±…í¬|ìš°ì²´êµ­|ê¸ˆê³ |ì‹ í˜‘/,Re=/\d{6,}/;(c>0&&(Re.test(r[c-1])||Y.test(r[c-1]))||c<r.length-1&&(Re.test(r[c+1])||Y.test(r[c+1]))||Y.test(t))&&(n.bankInfo.accountHolder=M)}}})}}const fe={ëª©ê³µ:"ëª©ê³µ",ëª©ìž¬:"ëª©ê³µ",ë‚˜ë¬´:"ëª©ê³µ",íƒ€ì¼:"íƒ€ì¼",íƒ€ì¼ê³µì‚¬:"íƒ€ì¼",ë„ë°°:"ë„ë°°",ë„ë°°ì§€:"ë„ë°°",ë²½ì§€:"ë„ë°°",ì „ê¸°:"ì „ê¸°",ì „ê¸°ìžìž¬:"ì „ê¸°",ì „ë“±:"ì „ê¸°",ì¡°ëª…:"ì „ê¸°",ìŠ¤ìœ„ì¹˜:"ì „ê¸°",ì½˜ì„¼íŠ¸:"ì „ê¸°",ì„¤ë¹„:"ì„¤ë¹„",ë°°ê´€:"ì„¤ë¹„",ìˆ˜ë„:"ì„¤ë¹„",í•˜ìˆ˜:"ì„¤ë¹„",ìƒ¤ì‹œ:"ìƒ¤ì‹œ",ì°½ë¬¸:"ìƒ¤ì‹œ",ì°½í˜¸:"ìƒ¤ì‹œ",ìœ ë¦¬:"ìœ ë¦¬",ê±°ìš¸:"ìœ ë¦¬",ë°©ìˆ˜:"ë°©ìˆ˜",ë°©ìˆ˜ê³µì‚¬:"ë°©ìˆ˜",ì² ê±°:"ì² ê±°",ì² ê±°ê³µì‚¬:"ì² ê±°",í•´ì²´:"ì² ê±°",ì²­ì†Œ:"ì²­ì†Œ",ì¤€ê³µì²­ì†Œ:"ì²­ì†Œ",ìž…ì£¼ì²­ì†Œ:"ì²­ì†Œ",ë¯¸ìž¥:"ë¯¸ìž¥",ëª°íƒˆ:"ë¯¸ìž¥",ì‹œë©˜íŠ¸:"ë¯¸ìž¥",ì„ê³µ:"ì„ê³µ",ëŒ€ë¦¬ì„:"ì„ê³µ",í™”ê°•ì„:"ì„ê³µ",ë„ìž¥:"ë„ìž¥",íŽ˜ì¸íŠ¸:"ë„ìž¥",ë„ìƒ‰:"ë„ìž¥",í•„ë¦„:"í•„ë¦„",ì‹œíŠ¸ì§€:"í•„ë¦„",ì¬íŒ…:"í•„ë¦„",ë°”ë‹¥:"ë°”ë‹¥",ë§ˆë£¨:"ë°”ë‹¥",ìž¥íŒ:"ë°”ë‹¥",ë°ì½”íƒ€ì¼:"ë°”ë‹¥",ê°€êµ¬:"ê°€êµ¬",ë¶™ë°•ì´ìž¥:"ê°€êµ¬",ìˆ˜ë‚©ìž¥:"ê°€êµ¬",ì£¼ë°©:"ì£¼ë°©",ì‹±í¬ëŒ€:"ì£¼ë°©",ì£¼ë°©ê°€êµ¬:"ì£¼ë°©",ìš•ì‹¤:"ìš•ì‹¤",í™”ìž¥ì‹¤:"ìš•ì‹¤",ë³€ê¸°:"ìš•ì‹¤",ì„¸ë©´ëŒ€:"ìš•ì‹¤",ì–‘ë³€ê¸°:"ìš•ì‹¤",ê°„íŒ:"ê°„íŒ",ì‚¬ì¸ë¬¼:"ê°„íŒ",í˜„ìˆ˜ë§‰:"ê°„íŒ",ë³´ì–‘:"ê°€ì„¤",ê°€ì„¤:"ê°€ì„¤"};for(const[N,V]of Object.entries(fe))if(t.includes(N)){n.vendor=V;break}if(c===0&&!n.itemName){const N=t.replace(/[\[\]{}()<>]/g,"").trim();N&&!N.includes("ë¬´í†µìž¥ ìž…ê¸ˆ")&&(m(N)||(n.itemName=N.substring(0,50)))}})),n.itemName&&n.itemName.includes("ë³´ì–‘")&&(n.vendor="ê°€ì„¤"),n.itemName){const t=["ì€í–‰","ë±…í¬","ê¸ˆê³ ","ì‹ í˜‘","ì¦ê¶Œ","íˆ¬ìž","ì €ì¶•","ìš°ì²´êµ­","êµ­ë¯¼","ì‹ í•œ","ìš°ë¦¬","í•˜ë‚˜","ë†í˜‘","ê¸°ì—…","ì œì¼","ì”¨í‹°","ì¹´ì¹´ì˜¤","ì¼€ì´","í† ìŠ¤","ë¶€ì‚°","ëŒ€êµ¬","ê²½ë‚¨","ê´‘ì£¼","ì „ë¶","ì œì£¼","ì‚°ì—…","ìˆ˜í˜‘","ìƒˆë§ˆì„","í•˜ë‚˜ì€í–‰","êµ­ë¯¼ì€í–‰","ì‹ í•œì€í–‰","ìš°ë¦¬ì€í–‰","ë†í˜‘ì€í–‰","ê¸°ì—…ì€í–‰","KBêµ­ë¯¼ì€í–‰","NHë†í˜‘ì€í–‰","IBKê¸°ì—…ì€í–‰","SCì œì¼ì€í–‰","ì¹´ì¹´ì˜¤ë±…í¬","í† ìŠ¤ë±…í¬","ì¼€ì´ë±…í¬"],c=n.itemName.toLowerCase(),u=t.some(k=>c===k.toLowerCase()||c.startsWith(k.toLowerCase()+" ")||c.replace(/\s+/g,"").match(/^[\d\-\s]+$/)),d=/^[\d\-\s]/.test(n.itemName),C=/^\d{2,}[\s\-]?\d+/.test(n.itemName.replace(/[ê°€-íž£]/g,"").trim()),p=n.bankInfo.accountHolder&&(n.itemName===n.bankInfo.accountHolder||n.itemName.includes(n.bankInfo.accountHolder));(u||d||C||p)&&(n.itemName=void 0)}return n},es=()=>{var s;try{const r=i.quickText;if(!r.trim())return;const n=Ge(r);console.log("ìžë™ì±„ìš°ê¸° ë¶„ì„ ê²°ê³¼:",n);const o={project:i.project,date:i.date,quickText:i.quickText,quickImages:i.quickImages||[],process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[]};te(null),R(!1),I(!1);let a=0;n.amounts.material&&(a+=n.amounts.material),n.amounts.labor&&(a+=n.amounts.labor),n.amounts.total&&!n.amounts.material&&!n.amounts.labor&&(a=n.amounts.total),a>0&&(o.amount=a),n.bankInfo.bankName&&(o.bankName=n.bankInfo.bankName),n.bankInfo.accountHolder&&(o.accountHolder=n.bankInfo.accountHolder),n.bankInfo.accountNumber&&(o.accountNumber=n.bankInfo.accountNumber);const m=p=>p?p.replace(/[^0-9]/g,""):"",l=(p,k)=>{if(!p||!k)return!1;const L=m(p),b=m(k);if(!L||!b)return!1;const D=6;return L.length<D||b.length<D?L===b:b.includes(L)||L.includes(b)},t=m(n.bankInfo.accountNumber||""),c=n.bankInfo.accountHolder||"";let u=!1,d=Z.find(p=>{const k=m(p.accountNumber||"");return k&&k===t});if(!d&&t&&(d=Z.find(p=>{const k=m(p.accountNumber||"");return l(t,k)})),d&&(u=!0),!d&&c&&(d=Z.find(p=>p.name===c),d)){console.log("ì˜ˆê¸ˆì£¼ë¡œ í˜‘ë ¥ì—…ì²´ ì°¾ìŒ:",d.name);const p=((s=d.accountNumber)==null?void 0:s.replace(/[-\s]/g,""))||"";t&&!l(t,p)?(console.log("ì˜ˆê¸ˆì£¼ëŠ” ê°™ì§€ë§Œ ê³„ì¢Œë²ˆí˜¸ê°€ ë‹¤ë¦„ (ë™ëª…ì´ì¸ ê°€ëŠ¥ì„±) - ê³„ì¢Œë²ˆí˜¸ ìœ ì§€"),u=!1):u=!0}if(d&&(u&&d.name?(o.accountHolder=d.name,console.log("í˜‘ë ¥ì—…ì²´ ê³„ì¢Œë²ˆí˜¸ ë§¤ì¹­ìœ¼ë¡œ ì˜ˆê¸ˆì£¼ ì—…ë°ì´íŠ¸:",c,"â†’",d.name)):o.accountHolder=d.name||n.bankInfo.accountHolder,o.bankName=d.bankName||n.bankInfo.bankName,u&&(o.accountNumber=d.accountNumber||n.bankInfo.accountNumber),te(d.id||d._id||null),d.process&&(o.process=d.process)),!d){let p=!1;console.log("=== ì†¡ê¸ˆì™„ë£Œ ë‚´ì—­ ê²€ìƒ‰ ì‹œìž‘ ==="),console.log("ìž…ë ¥ ê³„ì¢Œë²ˆí˜¸:",t),console.log("ìž…ë ¥ ì˜ˆê¸ˆì£¼:",c);const k=v.filter(D=>D.account_holder&&D.account_holder.includes("ê¹€"));console.log("ê¹€ì”¨ ê²°ì œ ë‚´ì—­:",k.length,"ê±´"),k.forEach(D=>console.log("  -",D.account_holder,"|",D.account_number,"|",D.vendor_name,"|",D.status));const L=[...new Set(v.map(D=>D.account_holder).filter(Boolean))];console.log("ì „ì²´ ì˜ˆê¸ˆì£¼ ëª©ë¡ (ì²˜ìŒ 20ê°œ):",L.slice(0,20)),console.log("ìž…ë ¥ ê³„ì¢Œë²ˆí˜¸ (ìˆ«ìžë§Œ):",t);let b=v.find(D=>{var fe;const J=m(D.account_number||""),X=J&&J===t&&D.status==="completed";return(fe=D.account_holder)!=null&&fe.includes("ê¹€ìŠ¹ì¼")&&console.log("ê¹€ìŠ¹ì¼ ê³„ì¢Œ ë¹„êµ:",J,"===",t,"ê²°ê³¼:",X),X});if(b&&console.log("ê³„ì¢Œë²ˆí˜¸ ì™„ì „ ì¼ì¹˜ë¡œ ì°¾ìŒ:",b.account_holder,b.vendor_name),!b&&t&&(b=v.find(D=>{const J=m(D.account_number||"");return l(t,J)&&D.status==="completed"}),b&&console.log("ê³„ì¢Œë²ˆí˜¸ ë¶€ë¶„ ì¼ì¹˜ë¡œ ì°¾ìŒ:",b.account_holder,b.vendor_name)),b&&(p=!0),!b&&c&&(b=v.find(D=>D.account_holder===c&&D.status==="completed"),b)){console.log("ì˜ˆê¸ˆì£¼ë¡œ ì´ì „ ê²°ì œ ë‚´ì—­ ì°¾ìŒ:",b.account_holder,"ê³µì •:",b.vendor_name);const D=m(b.account_number||"");t&&!l(t,D)?(console.log("ì˜ˆê¸ˆì£¼ëŠ” ê°™ì§€ë§Œ ê³„ì¢Œë²ˆí˜¸ê°€ ë‹¤ë¦„ (ë™ëª…ì´ì¸ ê°€ëŠ¥ì„±) - ê³„ì¢Œë²ˆí˜¸ ìœ ì§€"),p=!1):p=!0}b?(console.log("ë§¤ì¹­ëœ ì†¡ê¸ˆë‚´ì—­:",{account_holder:b.account_holder,account_number:b.account_number,vendor_name:b.vendor_name,status:b.status}),p&&b.account_holder?(o.accountHolder=b.account_holder,console.log("ê³„ì¢Œë²ˆí˜¸ ë§¤ì¹­ìœ¼ë¡œ ì˜ˆê¸ˆì£¼ ì—…ë°ì´íŠ¸:",c,"â†’",b.account_holder)):o.accountHolder=b.account_holder||n.bankInfo.accountHolder,o.bankName=b.bank_name||n.bankInfo.bankName,p&&(o.accountNumber=b.account_number||n.bankInfo.accountNumber),b.vendor_name&&!o.process?(o.process=b.vendor_name,console.log("ì´ì „ ê²°ì œ ë‚´ì—­ì—ì„œ ê³µì • ì„¤ì •:",b.vendor_name)):console.log("ê³µì • ì„¤ì • ì•ˆë¨ - vendor_name:",b.vendor_name,"updatedFormData.process:",o.process)):console.log("ë§¤ì¹­ëœ ì†¡ê¸ˆë‚´ì—­ ì—†ìŒ")}if(n.vendor&&(o.process=n.vendor),!o.process){const p=r.toLowerCase();for(const k of Le)if(p.includes(k.toLowerCase())){o.process=k;break}}n.itemName&&(o.itemName=n.itemName),h(o),n.includeVat&&(R(!0),I(!1));const C=[];if(n.amounts.material||n.amounts.labor||n.amounts.total){const p=[];n.amounts.material&&p.push(`ìžìž¬ë¹„: ${n.amounts.material.toLocaleString()}ì›`),n.amounts.labor&&p.push(`ì¸ê±´ë¹„: ${n.amounts.labor.toLocaleString()}ì›`),n.amounts.total&&!n.amounts.material&&!n.amounts.labor&&p.push(`ê¸ˆì•¡: ${n.amounts.total.toLocaleString()}ì›`),C.push(p.join(", "))}if(n.bankInfo.bankName||n.bankInfo.accountHolder){const p=[];n.bankInfo.bankName&&p.push(n.bankInfo.bankName),n.bankInfo.accountHolder&&p.push(n.bankInfo.accountHolder),n.bankInfo.accountNumber&&p.push(n.bankInfo.accountNumber),p.length>0&&C.push(`ê³„ì¢Œ: ${p.join(" ")}`)}n.vendor&&C.push(`ê³µì •: ${n.vendor}`),n.includeVat&&C.push("ë¶€ê°€ì„¸ í¬í•¨ ì„¤ì •ë¨"),C.length>0?y.success(`ìžë™ ì¸ì‹ ì™„ë£Œ!
${C.join(`
`)}`,{duration:4e3,style:{whiteSpace:"pre-line"}}):y.info("í…ìŠ¤íŠ¸ë¥¼ ë¶„ì„ ì¤‘... ë” ëª…í™•í•œ ì •ë³´ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.")}catch(r){console.error("ìžë™ì±„ìš°ê¸° ì—ëŸ¬:",r),y.error("ìžë™ì±„ìš°ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}};g.useEffect(()=>{(async()=>{try{await vs();const r=await Vs();ie(r),Me(!0)}catch(r){console.error("ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:",r),Me(!0)}})()},[]);const Se=g.useRef({});g.useEffect(()=>{Ie&&(Object.entries($).forEach(([s,r])=>{JSON.stringify(Se.current[s])!==JSON.stringify(r)&&Ds(s,r).catch(n=>{console.error("ì´ë¯¸ì§€ ì €ìž¥ ì‹¤íŒ¨:",n),y.error("ì´ë¯¸ì§€ ì €ìž¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")})}),Se.current={...$})},[$,Ie]);const Ce=g.useCallback(async s=>{var o;const r=(o=s.clipboardData)==null?void 0:o.items;if(!r)return;let n=!1;for(let a=0;a<r.length;a++)if(r[a].type.indexOf("image")!==-1){n=!0;break}if(n){if(!x){const a=document.activeElement;(a==null?void 0:a.tagName)==="INPUT"||(a==null?void 0:a.tagName)==="TEXTAREA"||(a==null?void 0:a.classList.contains("form-input"))||y.error("ë¨¼ì € ê²°ì œìš”ì²­ì„ ì„ íƒí•´ì£¼ì„¸ìš”");return}for(let a=0;a<r.length;a++)if(r[a].type.indexOf("image")!==-1){s.preventDefault();const m=r[a].getAsFile();if(m){const l=new FileReader;l.onload=async t=>{var u;const c=(u=t.target)==null?void 0:u.result;if(c)try{const d=v.find(k=>k.id===x),p=[...(d==null?void 0:d.images)||$[x]||[],c];await be.updatePaymentImages(x,p),ie(k=>({...k,[x]:p})),await j(),y.success("ì´ë¯¸ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(d){console.error("ì´ë¯¸ì§€ ì €ìž¥ ì‹¤íŒ¨:",d),y.error("ì´ë¯¸ì§€ ì €ìž¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},l.readAsDataURL(m)}}}},[x,v,$,j]);g.useEffect(()=>(document.addEventListener("paste",Ce),()=>document.removeEventListener("paste",Ce)),[Ce]);const Ae=(f==null?void 0:f.name)==="ì•ˆíŒ€"?v.filter(s=>B.some(r=>r.name===s.project)):v,ae=[...Ae].sort((s,r)=>new Date(r.requestDate).getTime()-new Date(s.requestDate).getTime());console.log("[ê²°ì œìš”ì²­ ë””ë²„ê¹…]",{"ì „ì²´ payments":v.length,"í”„ë¡œì íŠ¸ í•„í„°ë§ í›„":Ae.length,"ì™„ë£Œëœ ê²°ì œ(ì „ì²´)":v.filter(s=>s.status==="completed").length,"ì™„ë£Œëœ ê²°ì œ(í•„í„°ë§ í›„)":Ae.filter(s=>s.status==="completed").length,"í˜„ìž¬ ì‚¬ìš©ìž":f==null?void 0:f.name,"í”„ë¡œì íŠ¸ ìˆ˜":B.length});const He=ae.filter(s=>{var m,l,t;const r=G===""||((m=s.purpose)==null?void 0:m.toLowerCase().includes(G.toLowerCase()))||((l=s.itemName)==null?void 0:l.toLowerCase().includes(G.toLowerCase()))||((t=s.process)==null?void 0:t.toLowerCase().includes(G.toLowerCase())),n=s.status===F,o=F==="pending"||!i.project||s.project===i.project,a=!Ee||F!=="completed"||s.requestedBy===(f==null?void 0:f.name);return r&&n&&o&&a}),ss=s=>{const r=s.id||s._id||null;if(pe===r){te(null);const m=document.querySelector('input[placeholder="ì˜ˆê¸ˆì£¼ëª…ì„ ìž…ë ¥í•˜ì„¸ìš”"]');m&&setTimeout(()=>{m.focus()},100);return}te(r);const n=Fe(s.name);let o=s.bankName||"",a=s.accountNumber||"";if(a&&!o){const m=a.trim().split(/\s+/);if(m.length>=2){const l=m[0];(l.includes("ì€í–‰")||l.includes("ë±…í¬")||l.includes("ê¸ˆê³ ")||l.includes("ì‹ í˜‘")||l.includes("ìš°ì²´êµ­"))&&(o=l,a=m.slice(1).join(""))}}h(m=>({...m,accountHolder:n,bankName:o,accountNumber:a}))};He.reduce((s,r)=>{const n=r.materialAmount||0,o=r.laborAmount||0,a=r.amount||0;let m=n,l=o,t=0;return n===0&&o===0&&a>0?r.includesVAT?(m=Math.round(a/1.1),t=a-m):(m=a,t=0):r.includesVAT?(n>0&&(m=Math.round(n/1.1)),o>0&&(l=Math.round(o/1.1)),t=a-(m+l)):t=0,s.material+=m,s.labor+=l,s.vat+=t,s.total+=a,s},{material:0,labor:0,vat:0,total:0});const ns=async()=>{var r;if(de){console.log("ðŸ’° Already submitting, ignoring click");return}if(console.log("ðŸ’° handleSave called"),console.log("ðŸ’° Current user:",f),console.log("ðŸ’° Form data:",i),!i.project){y.error("í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”");return}if(!i.itemName){y.error("í•­ëª©ëª…ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”");return}const s=Number(i.amount)||0;if(s===0){y.error("ê¸ˆì•¡ì„ ìž…ë ¥í•´ì£¼ì„¸ìš”");return}_e(!0);try{const n=_?Math.round(s*.967):s,o=new Date;if(w){const a={project:i.project,requestDate:new Date(i.date),purpose:i.itemName,amount:n,category:"material",urgency:"normal",process:i.process,itemName:i.itemName,includesVAT:U,applyTaxDeduction:_,materialAmount:n,laborAmount:0,originalLaborAmount:0,accountHolder:i.accountHolder,bank:i.bankName,accountNumber:i.accountNumber,bankInfo:i.accountHolder||i.bankName||i.accountNumber?{accountHolder:i.accountHolder,bankName:i.bankName,accountNumber:i.accountNumber}:void 0,updatedAt:o};console.log("ðŸ’° Updating payment:",a),await Q(w,a),y.success("ê²°ì œìš”ì²­ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤"),oe(null)}else{const a=i.project||"ê¸°íƒ€",m={id:`payment_${Date.now()}`,project:a,requestDate:new Date(i.date),requestedBy:(f==null?void 0:f.name)||"ì•Œ ìˆ˜ ì—†ìŒ",purpose:i.itemName,amount:n,status:"pending",category:"material",urgency:"normal",process:i.process,itemName:i.itemName,includesVAT:U,applyTaxDeduction:_,materialAmount:n,laborAmount:0,originalLaborAmount:0,accountHolder:i.accountHolder,bank:i.bankName,accountNumber:i.accountNumber,bankInfo:i.accountHolder||i.bankName||i.accountNumber?{accountHolder:i.accountHolder,bankName:i.bankName,accountNumber:i.accountNumber}:void 0,quickText:i.quickText||"",images:i.quickImages,attachments:[],createdAt:o,updatedAt:o};console.log("ðŸ’° Creating payment:",m),console.log("ðŸ’° Images in payment:",((r=i.quickImages)==null?void 0:r.length)||0,"ê°œ");const l=await Ne(m);if(y.success("ê²°ì œìš”ì²­ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"),!U&&!_&&i.accountHolder&&i.bankName&&i.accountNumber)try{await ps.post("/payments/send-toss-payment-sms",{recipientPhone:"01089423283",accountHolder:i.accountHolder,bankName:i.bankName,accountNumber:i.accountNumber,amount:n,projectName:a,itemName:i.itemName,process:i.process,paymentId:l}),y.success("ê²°ì œ ìš”ì²­ ë¬¸ìžê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(t){console.error("SMS ë°œì†¡ ì‹¤íŒ¨:",t)}}h(a=>({project:a.project,date:S(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),R(!1),I(!1),te(null),window.innerWidth<768&&se("list")}catch(n){console.error("ðŸ’° Payment save error:",n),y.error("ê²°ì œìš”ì²­ ì €ìž¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+n.message)}finally{_e(!1)}},ts=s=>{var r,n,o,a;try{console.log("[handleEdit] Starting edit for payment:",s.id);const m=s.originalMaterialAmount!==void 0?s.originalMaterialAmount:s.materialAmount||0,l=s.originalLaborAmount!==void 0?s.originalLaborAmount:s.laborAmount||0,t={project:s.project||"",date:s.requestDate?S(new Date(s.requestDate),"yyyy-MM-dd"):S(new Date,"yyyy-MM-dd"),process:s.process||"",itemName:s.itemName||s.purpose||"",materialCost:m>0?m.toString():"",laborCost:l>0?l.toString():"",amount:((r=s.amount)==null?void 0:r.toString())||"",accountHolder:((n=s.bankInfo)==null?void 0:n.accountHolder)||"",bankName:((o=s.bankInfo)==null?void 0:o.bankName)||"",accountNumber:((a=s.bankInfo)==null?void 0:a.accountNumber)||"",images:s.attachments||[],quickText:s.quickText||"",quickImages:s.images||[]};console.log("[handleEdit] Setting form data:",t),h(t),R(s.includesVAT||!1),I(s.applyTaxDeduction||!1),A(s.id),oe(s.id),xe&&se("form"),console.log("[handleEdit] Edit setup complete"),y.success("ìˆ˜ì •í•  ë‚´ì—­ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤")}catch(m){console.error("[handleEdit] Error:",m),y.error("ìˆ˜ì • ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ")}},as=async s=>{var r,n,o;try{const a=((r=s.bankInfo)==null?void 0:r.accountHolder)||s.accountHolder,m=((n=s.bankInfo)==null?void 0:n.bankName)||s.bank,l=((o=s.bankInfo)==null?void 0:o.accountNumber)||s.accountNumber;if(!a||!m||!l){y.error("ê³„ì¢Œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ê²°ì œ ìš”ì²­ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");return}if(!window.confirm(`í† ìŠ¤ ì•±ìœ¼ë¡œ ì´ì²´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ë°›ëŠ”ë¶„: ì—ì´ì¹˜ë¸Œì´ëž©
ì€í–‰: ${m}
ê³„ì¢Œ: ${l}
ê¸ˆì•¡: ${s.amount.toLocaleString()}ì›`))return;const c=l.replace(/[-\s]/g,""),u=Cs[m]||m,d=As[m]||"004",C="ì—ì´ì¹˜ë¸Œì´ëž©",p=`supertoss://send?amount=${s.amount}&bankCode=${d}&bank=${encodeURIComponent(u)}&accountNo=${c}&receiverName=${encodeURIComponent(C)}&toName=${encodeURIComponent(C)}`;let k=!1;try{window.location.href=p,k=!0,y.success("í† ìŠ¤ ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤...",{duration:3e3}),setTimeout(()=>{const L=/iPhone|iPad|iPod/i.test(navigator.userAgent),b=/Android/i.test(navigator.userAgent);(L||b)&&y(`í† ìŠ¤ ì•±ì´ ì„¤ì¹˜ë˜ì–´ ìžˆì§€ ì•Šê±°ë‚˜ ì‹¤í–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.

ë°›ëŠ”ë¶„: ì—ì´ì¹˜ë¸Œì´ëž©
ê³„ì¢Œ: ${l}
ê¸ˆì•¡: ${s.amount.toLocaleString()}ì›

í† ìŠ¤ ì•±ì„ ì§ì ‘ ì—´ì–´ ì´ì²´í•´ì£¼ì„¸ìš”.`,{icon:"ðŸ’³",duration:8e3})},2e3)}catch(L){console.error("í† ìŠ¤ ì•± ì‹¤í–‰ ì‹¤íŒ¨:",L),y(`í† ìŠ¤ ì•± ì‹¤í–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.

ë°›ëŠ”ë¶„: ì—ì´ì¹˜ë¸Œì´ëž©
ì€í–‰: ${m}
ê³„ì¢Œ: ${l}
ê¸ˆì•¡: ${s.amount.toLocaleString()}ì›

í† ìŠ¤ ì•±ì„ ì§ì ‘ ì—´ì–´ ì´ì²´í•´ì£¼ì„¸ìš”.`,{icon:"ðŸ’³",duration:1e4})}}catch(a){console.error("ì¦‰ì‹œì†¡ê¸ˆ ì˜¤ë¥˜:",a),y.error(`ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${a.message}`)}},rs=async s=>{const r=v.find(n=>n.id===s);if(r&&r.quickText){const n=localStorage.getItem("executionMemos"),o=n?JSON.parse(n):{};o[s]=r.quickText,localStorage.setItem("executionMemos",JSON.stringify(o))}W(s,{status:"completed"}),ze(!1),ne("completed"),y.success("ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤"),window.dispatchEvent(new CustomEvent("paymentCompleted")),Q(s,{status:"completed"}).then(()=>{$e.getSocket().emit("payment:refresh")}).catch(n=>{console.error("ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:",n),W(s,{status:"pending"}),ne("pending"),y.error("ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨ - ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”")})},os=async s=>{var o;if(!x){y.error("ë¨¼ì € ê²°ì œìš”ì²­ì„ ì„ íƒí•´ì£¼ì„¸ìš”");return}const n=Array.from(((o=s.target)==null?void 0:o.files)||[]).filter(a=>a.type.startsWith("image/"));if(n.length!==0){try{const a=await Promise.all(n.map(c=>new Promise((u,d)=>{const C=new FileReader;C.onload=p=>{var L;const k=(L=p.target)==null?void 0:L.result;k?u(k):d(new Error("ì´ë¯¸ì§€ ì½ê¸° ì‹¤íŒ¨"))},C.onerror=()=>d(new Error("FileReader ì˜¤ë¥˜")),C.readAsDataURL(c)}))),m=v.find(c=>c.id===x),t=[...(m==null?void 0:m.images)||$[x]||[],...a];await be.updatePaymentImages(x,t),ie(c=>({...c,[x]:t})),await j(),y.success(`${a.length}ê°œì˜ ì´ë¯¸ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤`)}catch(a){console.error("ì´ë¯¸ì§€ ì €ìž¥ ì‹¤íŒ¨:",a),y.error("ì´ë¯¸ì§€ ì €ìž¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}s.target.value=""}},ms=async s=>{if(x)try{const r=v.find(a=>a.id===x),o=((r==null?void 0:r.images)||$[x]||[]).filter((a,m)=>m!==s);await be.updatePaymentImages(x,o),ie(a=>({...a,[x]:o})),await j()}catch(r){console.error("ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨:",r),y.error("ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},is=s=>{qe(s),ee(!0)},ls=s=>{s.preventDefault(),O(!0)},cs=s=>{s.preventDefault(),O(!1)},us=async s=>{if(s.preventDefault(),O(!1),!x){y.error("ë¨¼ì € ê²°ì œìš”ì²­ì„ ì„ íƒí•´ì£¼ì„¸ìš”");return}const n=Array.from(s.dataTransfer.files).filter(o=>o.type.startsWith("image/"));if(n.length!==0)try{const o=await Promise.all(n.map(t=>new Promise((c,u)=>{const d=new FileReader;d.onload=C=>{var k;const p=(k=C.target)==null?void 0:k.result;p?c(p):u(new Error("ì´ë¯¸ì§€ ì½ê¸° ì‹¤íŒ¨"))},d.onerror=()=>u(new Error("FileReader ì˜¤ë¥˜")),d.readAsDataURL(t)}))),a=v.find(t=>t.id===x),l=[...(a==null?void 0:a.images)||$[x]||[],...o];await be.updatePaymentImages(x,l),ie(t=>({...t,[x]:l})),await j(),y.success(`${o.length}ê°œì˜ ì´ë¯¸ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤`)}catch(o){console.error("ì´ë¯¸ì§€ ì €ìž¥ ì‹¤íŒ¨:",o),y.error("ì´ë¯¸ì§€ ì €ìž¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}};return e.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[e.jsxDEV("div",{className:"lg:hidden mb-4",children:e.jsxDEV("select",{value:i.project,onChange:s=>{h({...i,project:s.target.value}),s.target.value&&localStorage.setItem("lastSelectedProject",s.target.value)},className:"w-full px-3 py-2.5 md:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(f==null?void 0:f.name)!=="ì•ˆíŒ€"&&e.jsxDEV("option",{value:"",children:"í”„ë¡œì íŠ¸ ì„ íƒ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2226,columnNumber:35},void 0),B.filter(s=>s.status!=="completed").map(s=>e.jsxDEV("option",{value:s.name,children:s.name},s.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2228,columnNumber:13},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2216,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2215,columnNumber:7},void 0),e.jsxDEV("div",{className:"lg:hidden border-b border-gray-200 mb-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("nav",{className:"flex space-x-4",children:[e.jsxDEV("button",{onClick:()=>se("form"),className:`py-2 px-1 border-b-2 font-medium text-sm ${z==="form"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"ìž…ë ¥"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2237,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>se("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${z==="list"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"ë‚´ì—­"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2247,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>se("image"),className:`py-2 px-1 border-b-2 font-medium text-sm ${z==="image"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"ì´ë¯¸ì§€"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2257,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2236,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2235,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2234,columnNumber:7},void 0),e.jsxDEV("div",{className:"payment-container grid grid-cols-1 md:grid-cols-6 ipad:grid-cols-6 ipad-lg:grid-cols-6 ipad-xl:grid-cols-12 ipad-2xl:grid-cols-12 gap-3 md:gap-4",children:[e.jsxDEV("div",{className:`payment-form md:col-span-2 ipad:col-span-2 ipad-lg:col-span-2 ipad-xl:col-span-2 ipad-2xl:col-span-2 bg-white rounded-lg border p-3 md:p-4 overflow-y-auto h-[calc(100vh-180px)] ${z!=="form"?"hidden md:block":""}`,children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"hidden lg:block payment-project-row",children:e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("select",{value:i.project,onChange:s=>{h({...i,project:s.target.value}),s.target.value&&localStorage.setItem("lastSelectedProject",s.target.value)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(f==null?void 0:f.name)!=="ì•ˆíŒ€"&&e.jsxDEV("option",{value:"",children:"í”„ë¡œì íŠ¸ ì„ íƒ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2292,columnNumber:43},void 0),B.filter(s=>s.status!=="completed").map(s=>e.jsxDEV("option",{value:s.name,children:s.name},s.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2294,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2282,columnNumber:17},void 0),e.jsxDEV("select",{value:i.bankName,onChange:s=>h({...i,bankName:s.target.value}),className:"payment-bank-select hidden px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-8",children:[e.jsxDEV("option",{value:"",children:"ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2302,columnNumber:19},void 0),e.jsxDEV("option",{value:"KBêµ­ë¯¼ì€í–‰",children:"KBêµ­ë¯¼"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2303,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì‹ í•œì€í–‰",children:"ì‹ í•œ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2304,columnNumber:19},void 0),e.jsxDEV("option",{value:"ìš°ë¦¬ì€í–‰",children:"ìš°ë¦¬"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2305,columnNumber:19},void 0),e.jsxDEV("option",{value:"í•˜ë‚˜ì€í–‰",children:"í•˜ë‚˜"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2306,columnNumber:19},void 0),e.jsxDEV("option",{value:"NHë†í˜‘ì€í–‰",children:"ë†í˜‘"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2307,columnNumber:19},void 0),e.jsxDEV("option",{value:"IBKê¸°ì—…ì€í–‰",children:"ê¸°ì—…"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2308,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì¹´ì¹´ì˜¤ë±…í¬",children:"ì¹´ì¹´ì˜¤"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2309,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì¼€ì´ë±…í¬",children:"ì¼€ì´"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2310,columnNumber:19},void 0),e.jsxDEV("option",{value:"í† ìŠ¤ë±…í¬",children:"í† ìŠ¤"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2311,columnNumber:19},void 0),e.jsxDEV("option",{value:"ìƒˆë§ˆì„ê¸ˆê³ ",children:"ìƒˆë§ˆì„"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2312,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì‹ í˜‘",children:"ì‹ í˜‘"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2313,columnNumber:19},void 0),e.jsxDEV("option",{value:"ìš°ì²´êµ­",children:"ìš°ì²´êµ­"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2314,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2297,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2281,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2280,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("textarea",{value:i.quickText,onChange:s=>h({...i,quickText:s.target.value}),onPaste:s=>{var n;const r=(n=s.clipboardData)==null?void 0:n.items;if(r){for(let o=0;o<r.length;o++)if(r[o].type.indexOf("image")!==-1){s.preventDefault();const a=r[o].getAsFile();if(a){const m=new FileReader;m.onload=l=>{var c;const t=(c=l.target)==null?void 0:c.result;h(u=>({...u,quickImages:[...u.quickImages,t]}))},m.readAsDataURL(a)}break}}},onDragOver:s=>{s.preventDefault(),s.stopPropagation()},onDrop:s=>{s.preventDefault(),s.stopPropagation(),Array.from(s.dataTransfer.files).filter(o=>o.type.startsWith("image/")).forEach(o=>{const a=new FileReader;a.onload=m=>{var t;const l=(t=m.target)==null?void 0:t.result;h(c=>({...c,quickImages:[...c.quickImages,l]}))},a.readAsDataURL(o)})},rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:xe?"ì²­êµ¬ ë‚´ì—­ ë¶™ì—¬ë„£ê¸°":"ì²­êµ¬ ë‚´ì—­ ë¶™ì—¬ë„£ê¸° (ì´ë¯¸ì§€ ë“œëž˜ê·¸ ë˜ëŠ” Ctrl+V)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2321,columnNumber:15},void 0),i.quickImages.length>0&&e.jsxDEV("div",{className:"mt-2 mb-2 grid grid-cols-3 gap-2",children:i.quickImages.map((s,r)=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:s,alt:`ì²­êµ¬ë‚´ì—­ ${r+1}`,className:"w-full h-20 object-cover rounded-lg border"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2376,columnNumber:23},void 0),e.jsxDEV("button",{type:"button",onClick:()=>{h(n=>({...n,quickImages:n.quickImages.filter((o,a)=>a!==r)}))},className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"Ã—"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2381,columnNumber:23},void 0)]},r,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2375,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2373,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxDEV("label",{className:"cursor-pointer",children:[e.jsxDEV("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:s=>{Array.from(s.target.files||[]).forEach(n=>{const o=new FileReader;o.onload=a=>{var l;const m=(l=a.target)==null?void 0:l.result;h(t=>({...t,quickImages:[...t.quickImages,m]}))},o.readAsDataURL(n)}),s.target.value=""}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2400,columnNumber:19},void 0),e.jsxDEV("div",{className:"w-full h-10 flex items-center justify-center bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium border border-gray-300",children:"ì´ë¯¸ì§€ ì²¨ë¶€"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2421,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2399,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",onClick:es,className:"h-10 flex items-center justify-center bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors text-sm font-medium",children:"ìžë™ ì±„ìš°ê¸°"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2425,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2398,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2320,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ë‚ ì§œ ",i.date&&`(${S(new Date(i.date),"E",{locale:ce})})`]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2438,columnNumber:17},void 0),e.jsxDEV("input",{type:"date",value:i.date,onChange:s=>h({...i,date:s.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer text-gray-900",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundColor:"white",backgroundImage:"none"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2441,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2437,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³µì •"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2457,columnNumber:17},void 0),e.jsxDEV("button",{ref:me,type:"button",onClick:()=>q(!0),className:"w-full px-3 py-2 border rounded-lg text-left bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:i.process||e.jsxDEV("span",{className:"text-gray-400",children:"ì„ íƒí•˜ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2464,columnNumber:40},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2458,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2456,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2436,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"í•­ëª©ëª…"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2471,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",value:i.itemName,onChange:s=>h({...i,itemName:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2472,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2470,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-2 payment-amount-section",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³µì‚¬ë¹„"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2483,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:"text",value:i.amount?Number(i.amount).toLocaleString():"",onChange:s=>{const r=s.target.value.replace(/[^0-9]/g,"");h({...i,amount:r})},className:"w-full px-3 py-2 pr-8 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"ê¸ˆì•¡ì„ ìž…ë ¥í•˜ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2485,columnNumber:19},void 0),e.jsxDEV("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"ì›"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2496,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2484,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2482,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:s=>s.preventDefault(),onClick:()=>{U||I(!1),R(!U)},children:[e.jsxDEV("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${U?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:U&&e.jsxDEV("span",{className:"text-white text-xs",children:"âœ“"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2514,columnNumber:36},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2513,columnNumber:19},void 0),e.jsxDEV("span",{className:"ml-2 text-sm text-gray-700",children:"ë¶€ê°€ì„¸ í¬í•¨ (10%)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2516,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2502,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:s=>s.preventDefault(),onClick:()=>{_||R(!1),I(!_)},children:[e.jsxDEV("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${_?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:_&&e.jsxDEV("span",{className:"text-white text-xs",children:"âœ“"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2532,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2531,columnNumber:19},void 0),e.jsxDEV("span",{className:"ml-2 text-sm text-gray-700",children:"3.3% ì„¸ê¸ˆê³µì œ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2534,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2520,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2501,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2481,columnNumber:13},void 0),e.jsxDEV("div",{className:"payment-account-section border-t pt-3 space-y-2",children:[(ke.length>0||he.length>0&&!pe)&&e.jsxDEV("div",{className:"payment-suggestions-row grid grid-cols-2 gap-2",children:[e.jsxDEV("div",{className:`payment-contractor-suggestions bg-amber-50 border border-amber-200 rounded-lg p-2 ${ke.length===0?"hidden":""}`,children:[e.jsxDEV("label",{className:"block text-xs font-medium text-amber-900 mb-1",children:"ì¶”ì²œ í˜‘ë ¥ì—…ì²´"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2550,columnNumber:21},void 0),e.jsxDEV("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:ke.map(s=>{const r=s.id||s._id,n=pe===r;return e.jsxDEV("button",{type:"button",onClick:()=>ss(s),className:`w-full text-left px-2 py-1.5 rounded border transition-colors ${n?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-400 hover:bg-gray-50"}`,children:[e.jsxDEV("div",{className:"font-medium text-xs text-gray-900",children:Fe(s.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2566,columnNumber:29},void 0),e.jsxDEV("div",{className:"text-[10px] text-gray-500 truncate",children:[s.bankName||""," ",s.accountNumber||""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2569,columnNumber:29},void 0)]},r,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2556,columnNumber:27},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2551,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2547,columnNumber:19},void 0),e.jsxDEV("div",{className:`payment-history-suggestions bg-blue-50 border border-blue-200 rounded-lg p-2 ${he.length===0||pe?"hidden":""}`,children:[e.jsxDEV("label",{className:"block text-xs font-medium text-blue-900 mb-1",children:"ì´ì „ ì†¡ê¸ˆ ë‚´ì—­"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2582,columnNumber:21},void 0),e.jsxDEV("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:he.map((s,r)=>e.jsxDEV("button",{type:"button",onClick:()=>{h(n=>({...n,accountHolder:s.accountHolder,bankName:s.bankName,accountNumber:s.accountNumber})),De([])},className:"w-full text-left px-2 py-1.5 rounded border border-blue-200 bg-white hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[e.jsxDEV("div",{className:"font-medium text-xs text-gray-900",children:s.accountHolder},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2599,columnNumber:27},void 0),e.jsxDEV("div",{className:"text-[10px] text-gray-500 truncate",children:[s.bankName," ",s.accountNumber]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2602,columnNumber:27},void 0)]},r,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2585,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2583,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2579,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2545,columnNumber:17},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì˜ˆê¸ˆì£¼"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2614,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:i.accountHolder,onChange:s=>h({...i,accountHolder:s.target.value}),onFocus:()=>Ve(!0),onBlur:()=>setTimeout(()=>Ve(!1),150),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"ì˜ˆê¸ˆì£¼ëª…ì„ ìž…ë ¥í•˜ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2615,columnNumber:17},void 0),ve&&we.length>0&&e.jsxDEV("div",{className:"absolute z-20 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:we.map((s,r)=>e.jsxDEV("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 border-b last:border-b-0 flex justify-between items-center",onMouseDown:n=>n.preventDefault(),onClick:()=>{h({...i,accountHolder:s.name,bankName:s.bankName||i.bankName,accountNumber:s.accountNumber||i.accountNumber}),Ve(!1)},children:[e.jsxDEV("span",{className:"font-medium",children:s.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2643,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500",children:s.source==="contractor"?"í˜‘ë ¥ì—…ì²´":"ì†¡ê¸ˆë‚´ì—­"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2644,columnNumber:25},void 0)]},`${s.name}-${r}`,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2628,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2626,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2613,columnNumber:15},void 0),e.jsxDEV("div",{className:"payment-bank-field",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2655,columnNumber:17},void 0),e.jsxDEV("select",{value:i.bankName,onChange:s=>h({...i,bankName:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsxDEV("option",{value:"",children:"ì€í–‰ ì„ íƒ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2661,columnNumber:19},void 0),e.jsxDEV("option",{value:"KBêµ­ë¯¼ì€í–‰",children:"KBêµ­ë¯¼ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2662,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì‹ í•œì€í–‰",children:"ì‹ í•œì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2663,columnNumber:19},void 0),e.jsxDEV("option",{value:"ìš°ë¦¬ì€í–‰",children:"ìš°ë¦¬ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2664,columnNumber:19},void 0),e.jsxDEV("option",{value:"í•˜ë‚˜ì€í–‰",children:"í•˜ë‚˜ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2665,columnNumber:19},void 0),e.jsxDEV("option",{value:"NHë†í˜‘ì€í–‰",children:"NHë†í˜‘ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2666,columnNumber:19},void 0),e.jsxDEV("option",{value:"IBKê¸°ì—…ì€í–‰",children:"IBKê¸°ì—…ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2667,columnNumber:19},void 0),e.jsxDEV("option",{value:"SCì œì¼ì€í–‰",children:"SCì œì¼ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2668,columnNumber:19},void 0),e.jsxDEV("option",{value:"í•œêµ­ì”¨í‹°ì€í–‰",children:"í•œêµ­ì”¨í‹°ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2669,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì¹´ì¹´ì˜¤ë±…í¬",children:"ì¹´ì¹´ì˜¤ë±…í¬"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2670,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì¼€ì´ë±…í¬",children:"ì¼€ì´ë±…í¬"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2671,columnNumber:19},void 0),e.jsxDEV("option",{value:"í† ìŠ¤ë±…í¬",children:"í† ìŠ¤ë±…í¬"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2672,columnNumber:19},void 0),e.jsxDEV("option",{value:"ìƒˆë§ˆì„ê¸ˆê³ ",children:"ìƒˆë§ˆì„ê¸ˆê³ "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2673,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì‹ í˜‘",children:"ì‹ í˜‘"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2674,columnNumber:19},void 0),e.jsxDEV("option",{value:"ìš°ì²´êµ­",children:"ìš°ì²´êµ­"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2675,columnNumber:19},void 0),e.jsxDEV("option",{value:"KDBì‚°ì—…ì€í–‰",children:"KDBì‚°ì—…ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2676,columnNumber:19},void 0),e.jsxDEV("option",{value:"ìˆ˜í˜‘ì€í–‰",children:"ìˆ˜í˜‘ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2677,columnNumber:19},void 0),e.jsxDEV("option",{value:"ëŒ€êµ¬ì€í–‰",children:"ëŒ€êµ¬ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2678,columnNumber:19},void 0),e.jsxDEV("option",{value:"ë¶€ì‚°ì€í–‰",children:"ë¶€ì‚°ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2679,columnNumber:19},void 0),e.jsxDEV("option",{value:"ê²½ë‚¨ì€í–‰",children:"ê²½ë‚¨ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2680,columnNumber:19},void 0),e.jsxDEV("option",{value:"ê´‘ì£¼ì€í–‰",children:"ê´‘ì£¼ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2681,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì „ë¶ì€í–‰",children:"ì „ë¶ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2682,columnNumber:19},void 0),e.jsxDEV("option",{value:"ì œì£¼ì€í–‰",children:"ì œì£¼ì€í–‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2683,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2656,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2654,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³„ì¢Œë²ˆí˜¸"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2688,columnNumber:17},void 0),e.jsxDEV("input",{type:"text",value:i.accountNumber,onChange:s=>h({...i,accountNumber:s.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"ê³„ì¢Œë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2689,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2687,columnNumber:15},void 0),e.jsxDEV("div",{className:"pt-2 border-t",children:e.jsxDEV("div",{className:"flex justify-between items-baseline",children:[e.jsxDEV("span",{className:"font-medium",children:"ì´ì•¡"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2700,columnNumber:19},void 0),e.jsxDEV("div",{className:"text-right",children:[(U||_)&&e.jsxDEV("span",{className:"text-xs text-gray-500 mr-2",children:["(",U&&"ë¶€ê°€ì„¸ í¬í•¨",_&&"3.3% ì„¸ê¸ˆê³µì œ",")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2703,columnNumber:23},void 0),e.jsxDEV("span",{className:"font-semibold",children:[(()=>{const s=Number(i.amount)||0;let r=s;return _&&(r=Math.round(s*.967)),r.toLocaleString()})(),"ì›"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2707,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2701,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2699,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2698,columnNumber:15},void 0),e.jsxDEV("div",{className:"mt-6 lg:my-[50px]",children:[w&&e.jsxDEV("button",{onClick:()=>{oe(null),h(s=>({project:s.project,date:S(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),R(!1),I(!1),te(null),y.info("ìˆ˜ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤")},className:"w-full py-2 mb-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 touch-manipulation",style:{minHeight:"48px"},children:"ì·¨ì†Œ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2726,columnNumber:19},void 0),e.jsxDEV("button",{onClick:s=>{console.log("ðŸ’° Payment button clicked!",s),console.log("ðŸ’° Button element:",s.currentTarget),console.log("ðŸ’° Form data:",i),ns()},disabled:de,className:`w-full py-3 rounded-lg touch-manipulation font-medium text-base ${de?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800 active:bg-gray-950"}`,style:{minHeight:"48px",WebkitTapHighlightColor:"transparent"},children:de?"ì²˜ë¦¬ì¤‘...":w?"ìˆ˜ì •ì™„ë£Œ":"ê²°ì œìš”ì²­"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2755,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2724,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2542,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2278,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2275,columnNumber:9},void 0),e.jsxDEV("div",{className:`payment-list md:col-span-4 ipad:col-span-4 ipad-lg:col-span-4 ipad-xl:col-span-4 ipad-2xl:col-span-4 bg-white rounded-lg border overflow-hidden flex flex-col h-[calc(100vh-180px)] ${z!=="list"?"hidden md:flex":""}`,children:[e.jsxDEV("div",{className:"bg-gray-50 px-4 pt-3 pb-0 flex-shrink-0",children:e.jsxDEV("div",{className:"flex items-center justify-between gap-4",children:e.jsxDEV("nav",{className:"flex gap-2 overflow-x-auto flex-1",children:[e.jsxDEV("button",{onClick:()=>ne("pending"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${F==="pending"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["ëŒ€ê¸°ì¤‘",e.jsxDEV("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${F==="pending"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:ae.filter(s=>s.status==="pending").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2794,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2785,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>ne("completed"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${F==="completed"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["ì†¡ê¸ˆì™„ë£Œ",e.jsxDEV("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${F==="completed"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:ae.filter(s=>s.status==="completed").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2809,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2800,columnNumber:17},void 0),F==="completed"&&e.jsxDEV("label",{className:"ml-3 flex items-center gap-1.5 cursor-pointer text-xs text-gray-600",children:[e.jsxDEV("input",{type:"checkbox",checked:Ee,onChange:s=>{Oe(s.target.checked),localStorage.setItem("payments_showMyRequestsOnly",String(s.target.checked))},className:"w-3.5 h-3.5 rounded border-gray-300 text-gray-600 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2818,columnNumber:21},void 0),"ë‚´ ìš”ì²­ë§Œ"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2817,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2784,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2783,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2782,columnNumber:11},void 0),e.jsxDEV("div",{className:"border-b border-gray-200"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2833,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex-1 overflow-auto p-4",children:He.length>0?e.jsxDEV("div",{className:"space-y-4",children:He.map(s=>{var l,t,c;const r=s.amount||0,n=((l=s.bankInfo)==null?void 0:l.accountHolder)||s.accountHolder||"",o=((t=s.bankInfo)==null?void 0:t.bankName)||s.bank||"",a=((c=s.bankInfo)==null?void 0:c.accountNumber)||s.accountNumber||"",m=n&&o&&a?`${n} | ${o} ${a}`:"ê³„ì¢Œì •ë³´ ì—†ìŒ";return e.jsxDEV("div",{onClick:()=>A(s.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${x===s.id?"border-gray-900 bg-gray-50":"border-gray-200 bg-white hover:border-gray-400"}`,children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-2.5",children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("div",{className:"flex items-baseline gap-2",children:[s.process&&e.jsxDEV("span",{className:"text-xs text-gray-500 shrink-0",children:["[",s.process,"]"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2865,columnNumber:31},void 0),e.jsxDEV("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:s.purpose||s.itemName||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2867,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2863,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:s.project||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2871,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2862,columnNumber:25},void 0),e.jsxDEV("div",{className:"text-right ml-3 shrink-0",children:[e.jsxDEV("p",{className:"text-base font-bold text-gray-900",children:[r.toLocaleString(),"ì›"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2874,columnNumber:27},void 0),e.jsxDEV("p",{className:"text-[10px] text-gray-400",children:[s.requestedBy||"-"," Â· ",S(new Date(s.requestDate),"MM/dd",{locale:ce})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2877,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2873,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2861,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 mb-2.5 text-xs",children:[e.jsxDEV("span",{className:"text-gray-400",children:["ìžìž¬ë¹„ ",(s.materialAmount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2885,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-gray-300",children:"Â·"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2886,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-gray-400",children:["ì¸ê±´ë¹„ ",(s.laborAmount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2887,columnNumber:25},void 0),s.includesVAT&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-gray-300",children:"Â·"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2890,columnNumber:29},void 0),e.jsxDEV("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-700 text-[10px] rounded",children:"VAT"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2891,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2889,columnNumber:27},void 0),s.applyTaxDeduction&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-gray-300",children:"Â·"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2896,columnNumber:29},void 0),e.jsxDEV("span",{className:"px-1.5 py-0.5 bg-purple-50 text-purple-700 text-[10px] rounded",children:"3.3%"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2897,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2895,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2884,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mb-2.5",children:[e.jsxDEV("div",{className:"text-xs text-gray-500 truncate flex-1",children:m},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2904,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[e.jsxDEV("button",{onClick:u=>{u.stopPropagation(),ts(s)},className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"ìˆ˜ì •",children:e.jsxDEV(ys,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2916,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2908,columnNumber:27},void 0),e.jsxDEV("button",{onClick:async u=>{u.stopPropagation(),window.confirm("ì´ ê²°ì œìš”ì²­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(await re(s.id),y.success("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"))},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"ì‚­ì œ",children:e.jsxDEV(xs,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2929,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2918,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2907,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2903,columnNumber:23},void 0),F==="pending"&&(f==null?void 0:f.role)&&["manager","admin"].includes(f.role)&&e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:u=>{if(u.stopPropagation(),s.status==="completed"){y.info("ì´ë¯¸ ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ëœ ê±´ìž…ë‹ˆë‹¤");return}as(s)},disabled:s.status==="completed",className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${s.status==="completed"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,children:s.status==="completed"?"ì†¡ê¸ˆì™„ë£Œë¨":"ì¦‰ì‹œì†¡ê¸ˆ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2938,columnNumber:27},void 0),e.jsxDEV("button",{onClick:u=>{u.stopPropagation(),rs(s.id)},disabled:s.status==="completed",className:`flex-1 py-1.5 px-2 text-white rounded text-xs font-medium transition-colors ${s.status==="completed"?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:s.status==="completed"?"#9ca3af":"#5f81a5"},onMouseEnter:u=>{s.status!=="completed"&&(u.currentTarget.style.backgroundColor="#4a6b8a")},onMouseLeave:u=>{s.status!=="completed"&&(u.currentTarget.style.backgroundColor="#5f81a5")},children:"ì†¡ê¸ˆì™„ë£Œ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2956,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2937,columnNumber:25},void 0)]},s.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2851,columnNumber:21},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2837,columnNumber:15},void 0):e.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-500",children:"ê²°ì œìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2987,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2835,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2778,columnNumber:9},void 0),e.jsxDEV("div",{className:`payment-images md:col-span-6 ipad:col-span-6 ipad-lg:col-span-6 ipad-xl:col-span-6 ipad-2xl:col-span-6 bg-white rounded-lg border flex flex-col overflow-hidden h-[calc(100vh-180px)] ${z!=="image"?"hidden lg:flex":""}`,onDragOver:ls,onDragLeave:cs,onDrop:us,children:[e.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:os,className:"hidden",id:"image-file-input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3003,columnNumber:11},void 0),xe&&x&&z==="image"&&(()=>{const s=ae.find(r=>r.id===x);return s?e.jsxDEV("div",{className:"border-b bg-gray-50 p-3",children:e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"font-medium text-gray-900 text-sm",children:s.purpose||s.itemName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3020,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:[s.process||"-"," â€¢ ",S(new Date(s.requestDate),"yyyy.MM.dd",{locale:ce})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3021,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3019,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm font-bold text-gray-900",children:["â‚©",(s.amount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3025,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3018,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3017,columnNumber:17},void 0):null})(),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 relative",onClick:s=>{var n;const r=s.target;if(!r.closest("img")&&!r.closest("button")&&x){const o=ae.find(t=>t.id===x),a=(o==null?void 0:o.images)||[],m=$[x]||[];(a.length>0?a:m).length>0&&((n=document.getElementById("image-file-input"))==null||n.click())}},children:x?(()=>{const s=ae.find(a=>a.id===x),r=(s==null?void 0:s.images)||[],n=$[x]||[],o=r.length>0?r:n;return e.jsxDEV("div",{className:"h-full flex flex-col",children:[e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"ë©”ëª¨"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3061,columnNumber:21},void 0),e.jsxDEV("textarea",{value:(s==null?void 0:s.quickText)||(s==null?void 0:s.notes)||"",readOnly:!0,placeholder:"ë©”ëª¨ ì—†ìŒ",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-gray-50 resize-none",rows:8},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3062,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3060,columnNumber:19},void 0),o.length>0&&e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-3",children:o.map((a,m)=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:a,alt:`ì¦ë¹™ ${m+1}`,className:"w-full aspect-square object-contain rounded-lg cursor-pointer hover:opacity-90 transition-opacity border bg-gray-100",onClick:l=>{l.stopPropagation(),is(a)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3076,columnNumber:27},void 0),e.jsxDEV("button",{onClick:l=>{l.stopPropagation(),ms(m)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:e.jsxDEV(le,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3092,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3085,columnNumber:27},void 0),e.jsxDEV("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1.5 py-0.5 rounded",children:[m+1,"/",o.length]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3094,columnNumber:27},void 0)]},m,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3075,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3073,columnNumber:21},void 0),e.jsxDEV("label",{htmlFor:"image-file-input",className:`block cursor-pointer ${o.length>0?"":"flex-1"}`,onClick:a=>a.stopPropagation(),children:e.jsxDEV("div",{className:`w-full border-2 border-dashed rounded-lg p-4 text-center transition-colors flex flex-col items-center justify-center ${ye?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"} ${o.length>0?"min-h-[80px]":"min-h-[200px]"}`,children:[e.jsxDEV(ks,{className:`mx-auto text-gray-400 mb-1 ${o.length>0?"h-6 w-6":"h-10 w-10 mb-2"}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3113,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm font-medium text-gray-700",children:o.length>0?"ì´ë¯¸ì§€ ì²¨ë¶€":"í´ë¦­í•˜ì—¬ ì„ íƒ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3114,columnNumber:23},void 0),o.length===0&&e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ë“œëž˜ê·¸í•˜ê±°ë‚˜ Ctrl+Vë¡œ ë¶™ì—¬ë„£ê¸°"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3118,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3108,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3103,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3058,columnNumber:17},void 0)})():e.jsxDEV("div",{className:"h-full flex items-center justify-center min-h-[200px]",children:e.jsxDEV("div",{className:"text-center text-gray-400",children:[e.jsxDEV(hs,{className:"h-12 w-12 mx-auto mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3127,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm",children:"ê²°ì œìš”ì²­ì„ ì„ íƒí•˜ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3128,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3126,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3125,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3035,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2995,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2272,columnNumber:7},void 0),We&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"lg:hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b",children:[e.jsxDEV("h2",{className:"text-base font-bold text-gray-900",children:"ê³µì • ì„ íƒ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3143,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>q(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsxDEV(le,{className:"h-4 w-4 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3148,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3144,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3142,columnNumber:15},void 0),e.jsxDEV("div",{className:"p-3 overflow-y-auto max-h-[calc(80vh-100px)]",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mb-2",children:Le.map(s=>e.jsxDEV("button",{onClick:()=>{h({...i,process:s}),q(!1)},className:`p-2 text-sm text-center border rounded-lg transition-all ${i.process===s?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:s},s,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3155,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3153,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>{h({...i,process:""}),q(!1)},className:"w-full p-2 text-sm text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:"ì„ íƒ ì•ˆí•¨"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3172,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3152,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3141,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3140,columnNumber:11},void 0),e.jsxDEV("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>q(!1),children:e.jsxDEV("div",{onClick:s=>s.stopPropagation(),className:"absolute bg-white rounded-lg shadow-xl border border-gray-200",style:{top:me.current?`${me.current.getBoundingClientRect().bottom+window.scrollY+4}px`:"50%",left:me.current?`${me.current.getBoundingClientRect().left+window.scrollX}px`:"50%"},children:[e.jsxDEV("div",{className:"flex items-center justify-between p-2 border-b",children:[e.jsxDEV("h2",{className:"text-sm font-bold text-gray-900",children:"ê³µì • ì„ íƒ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3196,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>q(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsxDEV(le,{className:"h-3 w-3 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3201,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3197,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3195,columnNumber:15},void 0),e.jsxDEV("div",{className:"p-2",children:[e.jsxDEV("div",{className:"grid grid-cols-4 gap-1.5 mb-2",children:Le.map(s=>e.jsxDEV("button",{onClick:()=>{h({...i,process:s}),q(!1)},className:`p-1.5 text-xs text-center border rounded-lg transition-all whitespace-nowrap ${i.process===s?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:s},s,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3208,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3206,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>{h({...i,process:""}),q(!1)},className:"w-full p-1.5 text-xs text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:"ì„ íƒ ì•ˆí•¨"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3225,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3205,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3187,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3186,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3138,columnNumber:9},void 0),ue&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>ee(!1),children:e.jsxDEV("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[e.jsxDEV("button",{onClick:s=>{s.stopPropagation(),ee(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:e.jsxDEV(le,{className:"h-8 w-8"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3254,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3247,columnNumber:13},void 0),e.jsxDEV("img",{src:Te,alt:"ì›ë³¸ ì´ë¯¸ì§€",className:"max-w-full max-h-[90vh] object-contain",onClick:s=>s.stopPropagation()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3256,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3246,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3242,columnNumber:9},void 0),Ze&&e.jsxDEV(Hs,{projectName:Xe,onClose:()=>Je(!1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3268,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2213,columnNumber:5},void 0)};export{Ws as default};
