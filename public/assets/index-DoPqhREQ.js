const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Drawings-jPcM24yT.js","assets/vendor-react-DN7YJcfR.js","assets/vendor-ui-D8A9iq7X.js","assets/vendor-data-DrLf5NIQ.js","assets/vendor-date-DbWJ9m7c.js","assets/vendor-calendar-DjAQlTCo.js","assets/SiteLog-CBUrLzSv.js","assets/AfterService-07dCWH-S.js","assets/AdditionalWork-Ct3MChRw.js","assets/additionalWorkService-nJrqjMMP.js","assets/ConstructionPayment-eJVMc0sP.js","assets/WorkRequest-CzK0Eq5w.js","assets/Specbook-C9QS49Z-.js","assets/EstimatePreview-DhZp4JDD.js","assets/ExecutionHistory-BEG47oVT.js"])))=>i.map(i=>d[i]);
var Ul=Object.defineProperty;var Sl=(t,s,e)=>s in t?Ul(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var ja=(t,s,e)=>Sl(t,typeof s!="symbol"?s+"":s,e);import{r as b,b as Pl,u as xi,d as Ml,N as vi,e as yr,O as Il,R as Oe,f as _n,B as Tl,h as Rl,i as vt}from"./vendor-react-DN7YJcfR.js";import{a as Fl,c as Kr,Q as Ol,b as ql}from"./vendor-data-DrLf5NIQ.js";import{B as xr,X as ht,C as ki,T as Fs,a as $l,b as Di,W as Wl,c as zl,d as Gt,P as Gs,R as Yl,e as Kl,S as Vi,f as Ql,g as Xl,h as Ci,i as Jl,U as jr,I as hn,j as Lr,k as La,l as Ba,m as Ha,n as Gl,M as Zl,o as em,p as tm,L as sm}from"./vendor-ui-D8A9iq7X.js";import{k as vr,l as mn,m as cn,n as nm,o as rm,p as Ze,q as am,r as Ua,s as im,t as Le}from"./vendor-date-DbWJ9m7c.js";import{c as om,p as _i,l as sr,s as Zt,i as lm,h as mm,q as Qr,a as Xr,m as Jr,b as cm,d as nr,o as Xn,e as dm,f as Jn,r as Gr,g as Zr,j as ea,k as ta,n as sa,t as Ai,u as Ei,v as wi,w as ji,x as Li,y as Bi,z as Hi,A as Ui,B as Si,C as Pi,D as Mi,E as Ii,F as um,G as pm,H as fm,I as gm,J as hm,K as bm,L as Nm}from"./vendor-calendar-DjAQlTCo.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=e(a);fetch(a.href,i)}})();var Ti={exports:{}},Br={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=b,s=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),j=Symbol.iterator,x="@@iterator";function A(f){if(f===null||typeof f!="object")return null;var y=j&&f[j]||f[x];return typeof y=="function"?y:null}var L=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function k(f){{for(var y=arguments.length,P=new Array(y>1?y-1:0),W=1;W<y;W++)P[W-1]=arguments[W];F("error",f,P)}}function F(f,y,P){{var W=L.ReactDebugCurrentFrame,ce=W.getStackAddendum();ce!==""&&(y+="%s",P=P.concat([ce]));var fe=P.map(function(Ne){return String(Ne)});fe.unshift("Warning: "+y),Function.prototype.apply.call(console[f],console,fe)}}var me=!1,Q=!1,T=!1,ie=!1,_=!1,le;le=Symbol.for("react.module.reference");function ve(f){return!!(typeof f=="string"||typeof f=="function"||f===r||f===i||_||f===a||f===h||f===d||ie||f===N||me||Q||T||typeof f=="object"&&f!==null&&(f.$$typeof===u||f.$$typeof===p||f.$$typeof===o||f.$$typeof===l||f.$$typeof===m||f.$$typeof===le||f.getModuleId!==void 0))}function oe(f,y,P){var W=f.displayName;if(W)return W;var ce=y.displayName||y.name||"";return ce!==""?P+"("+ce+")":P}function R(f){return f.displayName||"Context"}function ne(f){if(f==null)return null;if(typeof f.tag=="number"&&k("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case r:return"Fragment";case e:return"Portal";case i:return"Profiler";case a:return"StrictMode";case h:return"Suspense";case d:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case l:var y=f;return R(y)+".Consumer";case o:var P=f;return R(P._context)+".Provider";case m:return oe(f,f.render,"ForwardRef");case p:var W=f.displayName||null;return W!==null?W:ne(f.type)||"Memo";case u:{var ce=f,fe=ce._payload,Ne=ce._init;try{return ne(Ne(fe))}catch{return null}}}return null}var be=Object.assign,je=0,Se,Ee,et,ze,tt,z,we;function se(){}se.__reactDisabledLog=!0;function Ve(){{if(je===0){Se=console.log,Ee=console.info,et=console.warn,ze=console.error,tt=console.group,z=console.groupCollapsed,we=console.groupEnd;var f={configurable:!0,enumerable:!0,value:se,writable:!0};Object.defineProperties(console,{info:f,log:f,warn:f,error:f,group:f,groupCollapsed:f,groupEnd:f})}je++}}function Me(){{if(je--,je===0){var f={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:be({},f,{value:Se}),info:be({},f,{value:Ee}),warn:be({},f,{value:et}),error:be({},f,{value:ze}),group:be({},f,{value:tt}),groupCollapsed:be({},f,{value:z}),groupEnd:be({},f,{value:we})})}je<0&&k("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ye=L.ReactCurrentDispatcher,Te;function st(f,y,P){{if(Te===void 0)try{throw Error()}catch(ce){var W=ce.stack.trim().match(/\n( *(at )?)/);Te=W&&W[1]||""}return`
`+Te+f}}var Be=!1,qe;{var Dt=typeof WeakMap=="function"?WeakMap:Map;qe=new Dt}function H(f,y){if(!f||Be)return"";{var P=qe.get(f);if(P!==void 0)return P}var W;Be=!0;var ce=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var fe;fe=Ye.current,Ye.current=null,Ve();try{if(y){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(De){W=De}Reflect.construct(f,[],Ne)}else{try{Ne.call()}catch(De){W=De}f.call(Ne.prototype)}}else{try{throw Error()}catch(De){W=De}f()}}catch(De){if(De&&W&&typeof De.stack=="string"){for(var ee=De.stack.split(`
`),He=W.stack.split(`
`),Re=ee.length-1,ye=He.length-1;Re>=1&&ye>=0&&ee[Re]!==He[ye];)ye--;for(;Re>=1&&ye>=0;Re--,ye--)if(ee[Re]!==He[ye]){if(Re!==1||ye!==1)do if(Re--,ye--,ye<0||ee[Re]!==He[ye]){var Pe=`
`+ee[Re].replace(" at new "," at ");return f.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",f.displayName)),typeof f=="function"&&qe.set(f,Pe),Pe}while(Re>=1&&ye>=0);break}}}finally{Be=!1,Ye.current=fe,Me(),Error.prepareStackTrace=ce}var ut=f?f.displayName||f.name:"",Rt=ut?st(ut):"";return typeof f=="function"&&qe.set(f,Rt),Rt}function ke(f,y,P){return H(f,!1)}function Ce(f){var y=f.prototype;return!!(y&&y.isReactComponent)}function ge(f,y,P){if(f==null)return"";if(typeof f=="function")return H(f,Ce(f));if(typeof f=="string")return st(f);switch(f){case h:return st("Suspense");case d:return st("SuspenseList")}if(typeof f=="object")switch(f.$$typeof){case m:return ke(f.render);case p:return ge(f.type,y,P);case u:{var W=f,ce=W._payload,fe=W._init;try{return ge(fe(ce),y,P)}catch{}}}return""}var Ie=Object.prototype.hasOwnProperty,Xe={},nt=L.ReactDebugCurrentFrame;function $e(f){if(f){var y=f._owner,P=ge(f.type,f._source,y?y.type:null);nt.setExtraStackFrame(P)}else nt.setExtraStackFrame(null)}function v(f,y,P,W,ce){{var fe=Function.call.bind(Ie);for(var Ne in f)if(fe(f,Ne)){var ee=void 0;try{if(typeof f[Ne]!="function"){var He=Error((W||"React class")+": "+P+" type `"+Ne+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof f[Ne]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw He.name="Invariant Violation",He}ee=f[Ne](y,Ne,W,P,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Re){ee=Re}ee&&!(ee instanceof Error)&&($e(ce),k("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",W||"React class",P,Ne,typeof ee),$e(null)),ee instanceof Error&&!(ee.message in Xe)&&(Xe[ee.message]=!0,$e(ce),k("Failed %s type: %s",P,ee.message),$e(null))}}}var B=Array.isArray;function I(f){return B(f)}function J(f){{var y=typeof Symbol=="function"&&Symbol.toStringTag,P=y&&f[Symbol.toStringTag]||f.constructor.name||"Object";return P}}function G(f){try{return Z(f),!1}catch{return!0}}function Z(f){return""+f}function pe(f){if(G(f))return k("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",J(f)),Z(f)}var _e=L.ReactCurrentOwner,re={key:!0,ref:!0,__self:!0,__source:!0},q,D,Y;Y={};function ue(f){if(Ie.call(f,"ref")){var y=Object.getOwnPropertyDescriptor(f,"ref").get;if(y&&y.isReactWarning)return!1}return f.ref!==void 0}function he(f){if(Ie.call(f,"key")){var y=Object.getOwnPropertyDescriptor(f,"key").get;if(y&&y.isReactWarning)return!1}return f.key!==void 0}function X(f,y){if(typeof f.ref=="string"&&_e.current&&y&&_e.current.stateNode!==y){var P=ne(_e.current.type);Y[P]||(k('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ne(_e.current.type),f.ref),Y[P]=!0)}}function Je(f,y){{var P=function(){q||(q=!0,k("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",y))};P.isReactWarning=!0,Object.defineProperty(f,"key",{get:P,configurable:!0})}}function Fe(f,y){{var P=function(){D||(D=!0,k("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",y))};P.isReactWarning=!0,Object.defineProperty(f,"ref",{get:P,configurable:!0})}}var at=function(f,y,P,W,ce,fe,Ne){var ee={$$typeof:s,type:f,key:y,ref:P,props:Ne,_owner:fe};return ee._store={},Object.defineProperty(ee._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(ee,"_self",{configurable:!1,enumerable:!1,writable:!1,value:W}),Object.defineProperty(ee,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ce}),Object.freeze&&(Object.freeze(ee.props),Object.freeze(ee)),ee};function Lt(f,y,P,W,ce){{var fe,Ne={},ee=null,He=null;P!==void 0&&(pe(P),ee=""+P),he(y)&&(pe(y.key),ee=""+y.key),ue(y)&&(He=y.ref,X(y,ce));for(fe in y)Ie.call(y,fe)&&!re.hasOwnProperty(fe)&&(Ne[fe]=y[fe]);if(f&&f.defaultProps){var Re=f.defaultProps;for(fe in Re)Ne[fe]===void 0&&(Ne[fe]=Re[fe])}if(ee||He){var ye=typeof f=="function"?f.displayName||f.name||"Unknown":f;ee&&Je(Ne,ye),He&&Fe(Ne,ye)}return at(f,ee,He,ce,W,_e.current,Ne)}}var It=L.ReactCurrentOwner,us=L.ReactDebugCurrentFrame;function jt(f){if(f){var y=f._owner,P=ge(f.type,f._source,y?y.type:null);us.setExtraStackFrame(P)}else us.setExtraStackFrame(null)}var $t;$t=!1;function Vt(f){return typeof f=="object"&&f!==null&&f.$$typeof===s}function Wt(){{if(It.current){var f=ne(It.current.type);if(f)return`

Check the render method of \``+f+"`."}return""}}function ps(f){{if(f!==void 0){var y=f.fileName.replace(/^.*[\\\/]/,""),P=f.lineNumber;return`

Check your code at `+y+":"+P+"."}return""}}var Tt={};function jn(f){{var y=Wt();if(!y){var P=typeof f=="string"?f:f.displayName||f.name;P&&(y=`

Check the top-level render call using <`+P+">.")}return y}}function on(f,y){{if(!f._store||f._store.validated||f.key!=null)return;f._store.validated=!0;var P=jn(y);if(Tt[P])return;Tt[P]=!0;var W="";f&&f._owner&&f._owner!==It.current&&(W=" It was passed a child from "+ne(f._owner.type)+"."),jt(f),k('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',P,W),jt(null)}}function g(f,y){{if(typeof f!="object")return;if(I(f))for(var P=0;P<f.length;P++){var W=f[P];Vt(W)&&on(W,y)}else if(Vt(f))f._store&&(f._store.validated=!0);else if(f){var ce=A(f);if(typeof ce=="function"&&ce!==f.entries)for(var fe=ce.call(f),Ne;!(Ne=fe.next()).done;)Vt(Ne.value)&&on(Ne.value,y)}}}function M(f){{var y=f.type;if(y==null||typeof y=="string")return;var P;if(typeof y=="function")P=y.propTypes;else if(typeof y=="object"&&(y.$$typeof===m||y.$$typeof===p))P=y.propTypes;else return;if(P){var W=ne(y);v(P,f.props,"prop",W,f)}else if(y.PropTypes!==void 0&&!$t){$t=!0;var ce=ne(y);k("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ce||"Unknown")}typeof y.getDefaultProps=="function"&&!y.getDefaultProps.isReactClassApproved&&k("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function C(f){{for(var y=Object.keys(f.props),P=0;P<y.length;P++){var W=y[P];if(W!=="children"&&W!=="key"){jt(f),k("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",W),jt(null);break}}f.ref!==null&&(jt(f),k("Invalid attribute `ref` supplied to `React.Fragment`."),jt(null))}}var w={};function E(f,y,P,W,ce,fe){{var Ne=ve(f);if(!Ne){var ee="";(f===void 0||typeof f=="object"&&f!==null&&Object.keys(f).length===0)&&(ee+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var He=ps(ce);He?ee+=He:ee+=Wt();var Re;f===null?Re="null":I(f)?Re="array":f!==void 0&&f.$$typeof===s?(Re="<"+(ne(f.type)||"Unknown")+" />",ee=" Did you accidentally export a JSX literal instead of a component?"):Re=typeof f,k("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Re,ee)}var ye=Lt(f,y,P,ce,fe);if(ye==null)return ye;if(Ne){var Pe=y.children;if(Pe!==void 0)if(W)if(I(Pe)){for(var ut=0;ut<Pe.length;ut++)g(Pe[ut],f);Object.freeze&&Object.freeze(Pe)}else k("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else g(Pe,f)}if(Ie.call(y,"key")){var Rt=ne(f),De=Object.keys(y).filter(function(zt){return zt!=="key"}),Ge=De.length>0?"{key: someKey, "+De.join(": ..., ")+": ...}":"{key: someKey}";if(!w[Rt+Ge]){var lt=De.length>0?"{"+De.join(": ..., ")+": ...}":"{}";k(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ge,Rt,lt,Rt),w[Rt+Ge]=!0}}return f===r?C(ye):M(ye),ye}}var $=E;Br.Fragment=r,Br.jsxDEV=$})();Ti.exports=Br;var n=Ti.exports,Ri,Sa=Pl;{var Pa=Sa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ri=function(t,s){Pa.usingClientEntryPoint=!0;try{return Sa.createRoot(t,s)}finally{Pa.usingClientEntryPoint=!1}}}const ym="modulepreload",xm=function(t){return"/"+t},Ma={},ds=function(s,e,r){let a=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(e.map(m=>{if(m=xm(m),m in Ma)return;Ma[m]=!0;const h=m.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":ym,h||(p.as="script"),p.crossOrigin="",p.href=m,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((u,N)=>{p.addEventListener("load",u),p.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return s().catch(i)})};let vm={data:""},km=t=>{if(typeof window=="object"){let s=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return s.nonce=window.__nonce__,s.parentNode||(t||document.head).appendChild(s),s.firstChild}return t||vm},Dm=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Vm=/\/\*[^]*?\*\/|  +/g,Ia=/\n+/g,Cs=(t,s)=>{let e="",r="",a="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?e=i+" "+o+";":r+=i[1]=="f"?Cs(o,i):i+"{"+Cs(o,i[1]=="k"?"":s)+"}":typeof o=="object"?r+=Cs(o,s?s.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,l):l?l+" "+m:m)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Cs.p?Cs.p(i,o):i+":"+o+";")}return e+(s&&a?s+"{"+a+"}":a)+r},gs={},Fi=t=>{if(typeof t=="object"){let s="";for(let e in t)s+=e+Fi(t[e]);return s}return t},Cm=(t,s,e,r,a)=>{let i=Fi(t),o=gs[i]||(gs[i]=(m=>{let h=0,d=11;for(;h<m.length;)d=101*d+m.charCodeAt(h++)>>>0;return"go"+d})(i));if(!gs[o]){let m=i!==t?t:(h=>{let d,p,u=[{}];for(;d=Dm.exec(h.replace(Vm,""));)d[4]?u.shift():d[3]?(p=d[3].replace(Ia," ").trim(),u.unshift(u[0][p]=u[0][p]||{})):u[0][d[1]]=d[2].replace(Ia," ").trim();return u[0]})(t);gs[o]=Cs(a?{["@keyframes "+o]:m}:m,e?"":"."+o)}let l=e&&gs.g?gs.g:null;return e&&(gs.g=gs[o]),((m,h,d,p)=>{p?h.data=h.data.replace(p,m):h.data.indexOf(m)===-1&&(h.data=d?m+h.data:h.data+m)})(gs[o],s,r,l),o},_m=(t,s,e)=>t.reduce((r,a,i)=>{let o=s[i];if(o&&o.call){let l=o(e),m=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=m?"."+m:l&&typeof l=="object"?l.props?"":Cs(l,""):l===!1?"":l}return r+a+(o??"")},"");function rr(t){let s=this||{},e=t.call?t(s.p):t;return Cm(e.unshift?e.raw?_m(e,[].slice.call(arguments,1),s.p):e.reduce((r,a)=>Object.assign(r,a&&a.call?a(s.p):a),{}):e,km(s.target),s.g,s.o,s.k)}let Oi,Hr,Ur;rr.bind({g:1});let ys=rr.bind({k:1});function Am(t,s,e,r){Cs.p=s,Oi=t,Hr=e,Ur=r}function ws(t,s){let e=this||{};return function(){let r=arguments;function a(i,o){let l=Object.assign({},i),m=l.className||a.className;e.p=Object.assign({theme:Hr&&Hr()},l),e.o=/ *go\d+/.test(m),l.className=rr.apply(e,r)+(m?" "+m:"");let h=t;return t[0]&&(h=l.as||t,delete l.as),Ur&&h[0]&&Ur(l),Oi(h,l)}return a}}var Em=t=>typeof t=="function",Gn=(t,s)=>Em(t)?t(s):t,wm=(()=>{let t=0;return()=>(++t).toString()})(),qi=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),jm=20,na="default",$i=(t,s)=>{let{toastLimit:e}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,e)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===s.toast.id?{...o,...s.toast}:o)};case 2:let{toast:r}=s;return $i(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:a}=s;return{...t,toasts:t.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let i=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},$n=[],Wi={toasts:[],pausedAt:void 0,settings:{toastLimit:jm}},ls={},zi=(t,s=na)=>{ls[s]=$i(ls[s]||Wi,t),$n.forEach(([e,r])=>{e===s&&r(ls[s])})},Yi=t=>Object.keys(ls).forEach(s=>zi(t,s)),Lm=t=>Object.keys(ls).find(s=>ls[s].toasts.some(e=>e.id===t)),ar=(t=na)=>s=>{zi(s,t)},Bm={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Hm=(t={},s=na)=>{let[e,r]=b.useState(ls[s]||Wi),a=b.useRef(ls[s]);b.useEffect(()=>(a.current!==ls[s]&&r(ls[s]),$n.push([s,r]),()=>{let o=$n.findIndex(([l])=>l===s);o>-1&&$n.splice(o,1)}),[s]);let i=e.toasts.map(o=>{var l,m,h;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((l=t[o.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((m=t[o.type])==null?void 0:m.duration)||(t==null?void 0:t.duration)||Bm[o.type],style:{...t.style,...(h=t[o.type])==null?void 0:h.style,...o.style}}});return{...e,toasts:i}},Um=(t,s="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...e,id:(e==null?void 0:e.id)||wm()}),An=t=>(s,e)=>{let r=Um(s,t,e);return ar(r.toasterId||Lm(r.id))({type:2,toast:r}),r.id},kt=(t,s)=>An("blank")(t,s);kt.error=An("error");kt.success=An("success");kt.loading=An("loading");kt.custom=An("custom");kt.dismiss=(t,s)=>{let e={type:3,toastId:t};s?ar(s)(e):Yi(e)};kt.dismissAll=t=>kt.dismiss(void 0,t);kt.remove=(t,s)=>{let e={type:4,toastId:t};s?ar(s)(e):Yi(e)};kt.removeAll=t=>kt.remove(void 0,t);kt.promise=(t,s,e)=>{let r=kt.loading(s.loading,{...e,...e==null?void 0:e.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let i=s.success?Gn(s.success,a):void 0;return i?kt.success(i,{id:r,...e,...e==null?void 0:e.success}):kt.dismiss(r),a}).catch(a=>{let i=s.error?Gn(s.error,a):void 0;i?kt.error(i,{id:r,...e,...e==null?void 0:e.error}):kt.dismiss(r)}),t};var Sm=1e3,Pm=(t,s="default")=>{let{toasts:e,pausedAt:r}=Hm(t,s),a=b.useRef(new Map).current,i=b.useCallback((p,u=Sm)=>{if(a.has(p))return;let N=setTimeout(()=>{a.delete(p),o({type:4,toastId:p})},u);a.set(p,N)},[]);b.useEffect(()=>{if(r)return;let p=Date.now(),u=e.map(N=>{if(N.duration===1/0)return;let j=(N.duration||0)+N.pauseDuration-(p-N.createdAt);if(j<0){N.visible&&kt.dismiss(N.id);return}return setTimeout(()=>kt.dismiss(N.id,s),j)});return()=>{u.forEach(N=>N&&clearTimeout(N))}},[e,r,s]);let o=b.useCallback(ar(s),[s]),l=b.useCallback(()=>{o({type:5,time:Date.now()})},[o]),m=b.useCallback((p,u)=>{o({type:1,toast:{id:p,height:u}})},[o]),h=b.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),d=b.useCallback((p,u)=>{let{reverseOrder:N=!1,gutter:j=8,defaultPosition:x}=u||{},A=e.filter(F=>(F.position||x)===(p.position||x)&&F.height),L=A.findIndex(F=>F.id===p.id),k=A.filter((F,me)=>me<L&&F.visible).length;return A.filter(F=>F.visible).slice(...N?[k+1]:[0,k]).reduce((F,me)=>F+(me.height||0)+j,0)},[e]);return b.useEffect(()=>{e.forEach(p=>{if(p.dismissed)i(p.id,p.removeDelay);else{let u=a.get(p.id);u&&(clearTimeout(u),a.delete(p.id))}})},[e,i]),{toasts:e,handlers:{updateHeight:m,startPause:l,endPause:h,calculateOffset:d}}},Mm=ys`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Im=ys`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Tm=ys`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Rm=ws("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Mm} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Im} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Tm} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Fm=ys`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Om=ws("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Fm} 1s linear infinite;
`,qm=ys`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$m=ys`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Wm=ws("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qm} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$m} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zm=ws("div")`
  position: absolute;
`,Ym=ws("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Km=ys`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qm=ws("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Km} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Xm=({toast:t})=>{let{icon:s,type:e,iconTheme:r}=t;return s!==void 0?typeof s=="string"?b.createElement(Qm,null,s):s:e==="blank"?null:b.createElement(Ym,null,b.createElement(Om,{...r}),e!=="loading"&&b.createElement(zm,null,e==="error"?b.createElement(Rm,{...r}):b.createElement(Wm,{...r})))},Jm=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Gm=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Zm="0%{opacity:0;} 100%{opacity:1;}",ec="0%{opacity:1;} 100%{opacity:0;}",tc=ws("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,sc=ws("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,nc=(t,s)=>{let e=t.includes("top")?1:-1,[r,a]=qi()?[Zm,ec]:[Jm(e),Gm(e)];return{animation:s?`${ys(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ys(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},rc=b.memo(({toast:t,position:s,style:e,children:r})=>{let a=t.height?nc(t.position||s||"top-center",t.visible):{opacity:0},i=b.createElement(Xm,{toast:t}),o=b.createElement(sc,{...t.ariaProps},Gn(t.message,t));return b.createElement(tc,{className:t.className,style:{...a,...e,...t.style}},typeof r=="function"?r({icon:i,message:o}):b.createElement(b.Fragment,null,i,o))});Am(b.createElement);var ac=({id:t,className:s,style:e,onHeightUpdate:r,children:a})=>{let i=b.useCallback(o=>{if(o){let l=()=>{let m=o.getBoundingClientRect().height;r(t,m)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return b.createElement("div",{ref:i,className:s,style:e},a)},ic=(t,s)=>{let e=t.includes("top"),r=e?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:qi()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(e?1:-1)}px)`,...r,...a}},oc=rr`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ln=16,lc=({reverseOrder:t,position:s="top-center",toastOptions:e,gutter:r,children:a,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:m,handlers:h}=Pm(e,i);return b.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Ln,left:Ln,right:Ln,bottom:Ln,pointerEvents:"none",...o},className:l,onMouseEnter:h.startPause,onMouseLeave:h.endPause},m.map(d=>{let p=d.position||s,u=h.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:s}),N=ic(p,u);return b.createElement(ac,{id:d.id,key:d.id,onHeightUpdate:h.updateHeight,className:d.visible?oc:"",style:N},d.type==="custom"?Gn(d.message,d):a?a(d):b.createElement(rc,{toast:d,position:p}))}))},O=kt;const cs=Object.create(null);cs.open="0";cs.close="1";cs.ping="2";cs.pong="3";cs.message="4";cs.upgrade="5";cs.noop="6";const Wn=Object.create(null);Object.keys(cs).forEach(t=>{Wn[cs[t]]=t});const Sr={type:"error",data:"parser error"},Ki=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Qi=typeof ArrayBuffer=="function",Xi=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ra=({type:t,data:s},e,r)=>Ki&&s instanceof Blob?e?r(s):Ta(s,r):Qi&&(s instanceof ArrayBuffer||Xi(s))?e?r(s):Ta(new Blob([s]),r):r(cs[t]+(s||"")),Ta=(t,s)=>{const e=new FileReader;return e.onload=function(){const r=e.result.split(",")[1];s("b"+(r||""))},e.readAsDataURL(t)};function Ra(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let kr;function mc(t,s){if(Ki&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ra).then(s);if(Qi&&(t.data instanceof ArrayBuffer||Xi(t.data)))return s(Ra(t.data));ra(t,!1,e=>{kr||(kr=new TextEncoder),s(kr.encode(e))})}const Fa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Fa.length;t++)bn[Fa.charCodeAt(t)]=t;const cc=t=>{let s=t.length*.75,e=t.length,r,a=0,i,o,l,m;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const h=new ArrayBuffer(s),d=new Uint8Array(h);for(r=0;r<e;r+=4)i=bn[t.charCodeAt(r)],o=bn[t.charCodeAt(r+1)],l=bn[t.charCodeAt(r+2)],m=bn[t.charCodeAt(r+3)],d[a++]=i<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|m&63;return h},dc=typeof ArrayBuffer=="function",aa=(t,s)=>{if(typeof t!="string")return{type:"message",data:Ji(t,s)};const e=t.charAt(0);return e==="b"?{type:"message",data:uc(t.substring(1),s)}:Wn[e]?t.length>1?{type:Wn[e],data:t.substring(1)}:{type:Wn[e]}:Sr},uc=(t,s)=>{if(dc){const e=cc(t);return Ji(e,s)}else return{base64:!0,data:t}},Ji=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Gi="",pc=(t,s)=>{const e=t.length,r=new Array(e);let a=0;t.forEach((i,o)=>{ra(i,!1,l=>{r[o]=l,++a===e&&s(r.join(Gi))})})},fc=(t,s)=>{const e=t.split(Gi),r=[];for(let a=0;a<e.length;a++){const i=aa(e[a],s);if(r.push(i),i.type==="error")break}return r};function gc(){return new TransformStream({transform(t,s){mc(t,e=>{const r=e.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(a[0]|=128),s.enqueue(a),s.enqueue(e)})}})}let Dr;function Bn(t){return t.reduce((s,e)=>s+e.length,0)}function Hn(t,s){if(t[0].length===s)return t.shift();const e=new Uint8Array(s);let r=0;for(let a=0;a<s;a++)e[a]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),e}function hc(t,s){Dr||(Dr=new TextDecoder);const e=[];let r=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(e.push(o);;){if(r===0){if(Bn(e)<1)break;const m=Hn(e,1);i=(m[0]&128)===128,a=m[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(Bn(e)<2)break;const m=Hn(e,2);a=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),r=3}else if(r===2){if(Bn(e)<8)break;const m=Hn(e,8),h=new DataView(m.buffer,m.byteOffset,m.length),d=h.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Sr);break}a=d*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Bn(e)<a)break;const m=Hn(e,a);l.enqueue(aa(i?m:Dr.decode(m),s)),r=0}if(a===0||a>t){l.enqueue(Sr);break}}}})}const Zi=4;function bt(t){if(t)return bc(t)}function bc(t){for(var s in bt.prototype)t[s]=bt.prototype[s];return t}bt.prototype.on=bt.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};bt.prototype.once=function(t,s){function e(){this.off(t,e),s.apply(this,arguments)}return e.fn=s,this.on(t,e),this};bt.prototype.off=bt.prototype.removeListener=bt.prototype.removeAllListeners=bt.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+t];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,a=0;a<e.length;a++)if(r=e[a],r===s||r.fn===s){e.splice(a,1);break}return e.length===0&&delete this._callbacks["$"+t],this};bt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),e=this._callbacks["$"+t],r=1;r<arguments.length;r++)s[r-1]=arguments[r];if(e){e=e.slice(0);for(var r=0,a=e.length;r<a;++r)e[r].apply(this,s)}return this};bt.prototype.emitReserved=bt.prototype.emit;bt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};bt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const ir=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,e)=>e(s,0),Xt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Nc="arraybuffer";function eo(t,...s){return s.reduce((e,r)=>(t.hasOwnProperty(r)&&(e[r]=t[r]),e),{})}const yc=Xt.setTimeout,xc=Xt.clearTimeout;function or(t,s){s.useNativeTimers?(t.setTimeoutFn=yc.bind(Xt),t.clearTimeoutFn=xc.bind(Xt)):(t.setTimeoutFn=Xt.setTimeout.bind(Xt),t.clearTimeoutFn=Xt.clearTimeout.bind(Xt))}const vc=1.33;function kc(t){return typeof t=="string"?Dc(t):Math.ceil((t.byteLength||t.size)*vc)}function Dc(t){let s=0,e=0;for(let r=0,a=t.length;r<a;r++)s=t.charCodeAt(r),s<128?e+=1:s<2048?e+=2:s<55296||s>=57344?e+=3:(r++,e+=4);return e}function to(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Vc(t){let s="";for(let e in t)t.hasOwnProperty(e)&&(s.length&&(s+="&"),s+=encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return s}function Cc(t){let s={},e=t.split("&");for(let r=0,a=e.length;r<a;r++){let i=e[r].split("=");s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s}class _c extends Error{constructor(s,e,r){super(s),this.description=e,this.context=r,this.type="TransportError"}}class ia extends bt{constructor(s){super(),this.writable=!1,or(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,e,r){return super.emitReserved("error",new _c(s,e,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const e=aa(s,this.socket.binaryType);this.onPacket(e)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,e={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const e=Vc(s);return e.length?"?"+e:""}}class Ac extends ia{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const e=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||e()})),this.writable||(r++,this.once("drain",function(){--r||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const e=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};fc(s,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,pc(s,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=to()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(s,e)}}let so=!1;try{so=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ec=so;function wc(){}class jc extends Ac{constructor(s){if(super(s),typeof location<"u"){const e=location.protocol==="https:";let r=location.port;r||(r=e?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||r!==s.port}}doWrite(s,e){const r=this.request({method:"POST",data:s});r.on("success",e),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(e,r)=>{this.onError("xhr poll error",e,r)}),this.pollXhr=s}}class ms extends bt{constructor(s,e,r){super(),this.createRequest=s,or(this,r),this._opts=r,this._method=r.method||"GET",this._uri=e,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var s;const e=eo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(e);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=ms.requestsCount++,ms.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=wc,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ms.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ms.requestsCount=0;ms.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Oa);else if(typeof addEventListener=="function"){const t="onpagehide"in Xt?"pagehide":"unload";addEventListener(t,Oa,!1)}}function Oa(){for(let t in ms.requests)ms.requests.hasOwnProperty(t)&&ms.requests[t].abort()}const Lc=function(){const t=no({xdomain:!1});return t&&t.responseType!==null}();class Bc extends jc{constructor(s){super(s);const e=s&&s.forceBase64;this.supportsBinary=Lc&&!e}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new ms(no,this.uri(),s)}}function no(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||Ec))return new XMLHttpRequest}catch{}if(!s)try{return new Xt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ro=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Hc extends ia{get name(){return"websocket"}doOpen(){const s=this.uri(),e=this.opts.protocols,r=ro?{}:eo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,e,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let e=0;e<s.length;e++){const r=s[e],a=e===s.length-1;ra(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&ir(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=to()),this.supportsBinary||(e.b64=1),this.createUri(s,e)}}const Vr=Xt.WebSocket||Xt.MozWebSocket;class Uc extends Hc{createSocket(s,e,r){return ro?new Vr(s,e,r):e?new Vr(s,e):new Vr(s)}doWrite(s,e){this.ws.send(e)}}class Sc extends ia{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const e=hc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=s.readable.pipeThrough(e).getReader(),a=gc();a.readable.pipeTo(s.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:l,value:m})=>{l||(this.onPacket(m),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let e=0;e<s.length;e++){const r=s[e],a=e===s.length-1;this._writer.write(r).then(()=>{a&&ir(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const Pc={websocket:Uc,webtransport:Sc,polling:Bc},Mc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ic=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Pr(t){if(t.length>8e3)throw"URI too long";const s=t,e=t.indexOf("["),r=t.indexOf("]");e!=-1&&r!=-1&&(t=t.substring(0,e)+t.substring(e,r).replace(/:/g,";")+t.substring(r,t.length));let a=Mc.exec(t||""),i={},o=14;for(;o--;)i[Ic[o]]=a[o]||"";return e!=-1&&r!=-1&&(i.source=s,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Tc(i,i.path),i.queryKey=Rc(i,i.query),i}function Tc(t,s){const e=/\/{2,9}/g,r=s.replace(e,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&r.splice(0,1),s.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Rc(t,s){const e={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(e[a]=i)}),e}const Mr=typeof addEventListener=="function"&&typeof removeEventListener=="function",zn=[];Mr&&addEventListener("offline",()=>{zn.forEach(t=>t())},!1);class As extends bt{constructor(s,e){if(super(),this.binaryType=Nc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(e=s,s=null),s){const r=Pr(s);e.hostname=r.host,e.secure=r.protocol==="https"||r.protocol==="wss",e.port=r.port,r.query&&(e.query=r.query)}else e.host&&(e.hostname=Pr(e.host).host);or(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},e.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Cc(this.opts.query)),Mr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},zn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const e=Object.assign({},this.opts.query);e.EIO=Zi,e.transport=s,this.id&&(e.sid=this.id);const r=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&As.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const e=this.createTransport(s);e.open(),this.setTransport(e)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",As.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const e=new Error("server error");e.code=s.data,this._onError(e);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(e+=kc(a)),r>0&&e>this._maxPayload)return this.writeBuffer.slice(0,r);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,ir(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,e,r){return this._sendPacket("message",s,e,r),this}send(s,e,r){return this._sendPacket("message",s,e,r),this}_sendPacket(s,e,r,a){if(typeof e=="function"&&(a=e,e=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:s,data:e,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),s()},r=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():s()}):this.upgrading?r():s()),this}_onError(s){if(As.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Mr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=zn.indexOf(this._offlineEventListener);r!==-1&&zn.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,e),this.writeBuffer=[],this._prevBufferLen=0}}}As.protocol=Zi;class Fc extends As{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let e=this.createTransport(s),r=!1;As.priorWebsocketSuccess=!1;const a=()=>{r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",p=>{if(!r)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;As.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const u=new Error("probe error");u.transport=e.name,this.emitReserved("upgradeError",u)}}))};function i(){r||(r=!0,d(),e.close(),e=null)}const o=p=>{const u=new Error("probe error: "+p);u.transport=e.name,i(),this.emitReserved("upgradeError",u)};function l(){o("transport closed")}function m(){o("socket closed")}function h(p){e&&p.name!==e.name&&i()}const d=()=>{e.removeListener("open",a),e.removeListener("error",o),e.removeListener("close",l),this.off("close",m),this.off("upgrading",h)};e.once("open",a),e.once("error",o),e.once("close",l),this.once("close",m),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{r||e.open()},200):e.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const e=[];for(let r=0;r<s.length;r++)~this.transports.indexOf(s[r])&&e.push(s[r]);return e}}let Oc=class extends Fc{constructor(s,e={}){const r=typeof s=="object"?s:e;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>Pc[a]).filter(a=>!!a)),super(s,r)}};function qc(t,s="",e){let r=t;e=e||typeof location<"u"&&location,t==null&&(t=e.protocol+"//"+e.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=e.protocol+t:t=e.host+t),/^(https?|wss?):\/\//.test(t)||(typeof e<"u"?t=e.protocol+"//"+t:t="https://"+t),r=Pr(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+s,r.href=r.protocol+"://"+i+(e&&e.port===r.port?"":":"+r.port),r}const $c=typeof ArrayBuffer=="function",Wc=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,ao=Object.prototype.toString,zc=typeof Blob=="function"||typeof Blob<"u"&&ao.call(Blob)==="[object BlobConstructor]",Yc=typeof File=="function"||typeof File<"u"&&ao.call(File)==="[object FileConstructor]";function oa(t){return $c&&(t instanceof ArrayBuffer||Wc(t))||zc&&t instanceof Blob||Yc&&t instanceof File}function Yn(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let e=0,r=t.length;e<r;e++)if(Yn(t[e]))return!0;return!1}if(oa(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Yn(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&Yn(t[e]))return!0;return!1}function Kc(t){const s=[],e=t.data,r=t;return r.data=Ir(e,s),r.attachments=s.length,{packet:r,buffers:s}}function Ir(t,s){if(!t)return t;if(oa(t)){const e={_placeholder:!0,num:s.length};return s.push(t),e}else if(Array.isArray(t)){const e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=Ir(t[r],s);return e}else if(typeof t=="object"&&!(t instanceof Date)){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Ir(t[r],s));return e}return t}function Qc(t,s){return t.data=Tr(t.data,s),delete t.attachments,t}function Tr(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Tr(t[e],s);else if(typeof t=="object")for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=Tr(t[e],s));return t}const Xc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Jc=5;var We;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(We||(We={}));class Gc{constructor(s){this.replacer=s}encode(s){return(s.type===We.EVENT||s.type===We.ACK)&&Yn(s)?this.encodeAsBinary({type:s.type===We.EVENT?We.BINARY_EVENT:We.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let e=""+s.type;return(s.type===We.BINARY_EVENT||s.type===We.BINARY_ACK)&&(e+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(e+=s.nsp+","),s.id!=null&&(e+=s.id),s.data!=null&&(e+=JSON.stringify(s.data,this.replacer)),e}encodeAsBinary(s){const e=Kc(s),r=this.encodeAsString(e.packet),a=e.buffers;return a.unshift(r),a}}function qa(t){return Object.prototype.toString.call(t)==="[object Object]"}class la extends bt{constructor(s){super(),this.reviver=s}add(s){let e;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(s);const r=e.type===We.BINARY_EVENT;r||e.type===We.BINARY_ACK?(e.type=r?We.EVENT:We.ACK,this.reconstructor=new Zc(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(oa(s)||s.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(s),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let e=0;const r={type:Number(s.charAt(0))};if(We[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===We.BINARY_EVENT||r.type===We.BINARY_ACK){const i=e+1;for(;s.charAt(++e)!=="-"&&e!=s.length;);const o=s.substring(i,e);if(o!=Number(o)||s.charAt(e)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(s.charAt(e+1)==="/"){const i=e+1;for(;++e&&!(s.charAt(e)===","||e===s.length););r.nsp=s.substring(i,e)}else r.nsp="/";const a=s.charAt(e+1);if(a!==""&&Number(a)==a){const i=e+1;for(;++e;){const o=s.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===s.length)break}r.id=Number(s.substring(i,e+1))}if(s.charAt(++e)){const i=this.tryParse(s.substr(e));if(la.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,e){switch(s){case We.CONNECT:return qa(e);case We.DISCONNECT:return e===void 0;case We.CONNECT_ERROR:return typeof e=="string"||qa(e);case We.EVENT:case We.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Xc.indexOf(e[0])===-1);case We.ACK:case We.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Zc{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const e=Qc(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ed=Object.freeze(Object.defineProperty({__proto__:null,Decoder:la,Encoder:Gc,get PacketType(){return We},protocol:Jc},Symbol.toStringTag,{value:"Module"}));function Jt(t,s,e){return t.on(s,e),function(){t.off(s,e)}}const td=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class io extends bt{constructor(s,e,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Jt(s,"open",this.onopen.bind(this)),Jt(s,"packet",this.onpacket.bind(this)),Jt(s,"error",this.onerror.bind(this)),Jt(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...e){var r,a,i;if(td.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(e.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const o={type:We.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const d=this.ids++,p=e.pop();this._registerAckCallback(d,p),o.id=d}const l=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,m=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(m?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(s,e){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[s]=e;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===s&&this.sendBuffer.splice(l,1);e.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),e.apply(this,l)};o.withError=!0,this.acks[s]=o}emitWithAck(s,...e){return new Promise((r,a)=>{const i=(o,l)=>o?a(o):r(l);i.withError=!0,e.push(i),this.emit(s,...e)})}_addToQueue(s){let e;typeof s[s.length-1]=="function"&&(e=s.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((a,...i)=>r!==this._queue[0]?void 0:(a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(a)):(this._queue.shift(),e&&e(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const e=this._queue[0];e.pending&&!s||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:We.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(r=>String(r.id)===s)){const r=this.acks[s];delete this.acks[s],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case We.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case We.EVENT:case We.BINARY_EVENT:this.onevent(s);break;case We.ACK:case We.BINARY_ACK:this.onack(s);break;case We.DISCONNECT:this.ondisconnect();break;case We.CONNECT_ERROR:this.destroy();const r=new Error(s.data.message);r.data=s.data.data,this.emitReserved("connect_error",r);break}}onevent(s){const e=s.data||[];s.id!=null&&e.push(this.ack(s.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const r of e)r.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const e=this;let r=!1;return function(...a){r||(r=!0,e.packet({type:We.ACK,id:s,data:a}))}}onack(s){const e=this.acks[s.id];typeof e=="function"&&(delete this.acks[s.id],e.withError&&s.data.unshift(null),e.apply(this,s.data))}onconnect(s,e){this.id=s,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:We.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const e=this._anyListeners;for(let r=0;r<e.length;r++)if(s===e[r])return e.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const e=this._anyOutgoingListeners;for(let r=0;r<e.length;r++)if(s===e[r])return e.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const r of e)r.apply(this,s.data)}}}function en(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}en.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),e=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+e:t-e}return Math.min(t,this.max)|0};en.prototype.reset=function(){this.attempts=0};en.prototype.setMin=function(t){this.ms=t};en.prototype.setMax=function(t){this.max=t};en.prototype.setJitter=function(t){this.jitter=t};class Rr extends bt{constructor(s,e){var r;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(e=s,s=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,or(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((r=e.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new en({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=s;const a=e.parser||ed;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var e;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(e=this.backoff)===null||e===void 0||e.setMin(s),this)}randomizationFactor(s){var e;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(e=this.backoff)===null||e===void 0||e.setJitter(s),this)}reconnectionDelayMax(s){var e;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(e=this.backoff)===null||e===void 0||e.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new Oc(this.uri,this.opts);const e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=Jt(e,"open",function(){r.onopen(),s&&s()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),s?s(l):this.maybeReconnectOnOpen()},o=Jt(e,"error",i);if(this._timeout!==!1){const l=this._timeout,m=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),e.close()},l);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(a),this.subs.push(o),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Jt(s,"ping",this.onping.bind(this)),Jt(s,"data",this.ondata.bind(this)),Jt(s,"error",this.onerror.bind(this)),Jt(s,"close",this.onclose.bind(this)),Jt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(e){this.onclose("parse error",e)}}ondecoded(s){ir(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,e){let r=this.nsps[s];return r?this._autoConnect&&!r.active&&r.connect():(r=new io(this,s,e),this.nsps[s]=r),r}_destroy(s){const e=Object.keys(this.nsps);for(const r of e)if(this.nsps[r].active)return;this._close()}_packet(s){const e=this.encoder.encode(s);for(let r=0;r<e.length;r++)this.engine.write(e[r],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,e){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(a=>{a?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",a)):s.onreconnect()}))},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const dn={};function yn(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const e=qc(t,s.path||"/socket.io"),r=e.source,a=e.id,i=e.path,o=dn[a]&&i in dn[a].nsps,l=s.forceNew||s["force new connection"]||s.multiplex===!1||o;let m;return l?m=new Rr(r,s):(dn[a]||(dn[a]=new Rr(r,s)),m=dn[a]),e.query&&!s.query&&(s.query=e.queryKey),m.socket(e.path,s)}Object.assign(yn,{Manager:Rr,Socket:io,io:yn,connect:yn});function sd(t={}){const{immediate:s=!1,onNeedRefresh:e,onOfflineReady:r,onRegistered:a,onRegisteredSW:i,onRegisterError:o}=t;let l,m,h;const d=async(u=!0)=>{await m,await(h==null?void 0:h())};async function p(){if("serviceWorker"in navigator){if(l=await ds(async()=>{const{Workbox:u}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:u}},[]).then(({Workbox:u})=>new u("/sw.js",{scope:"/",type:"classic"})).catch(u=>{o==null||o(u)}),!l)return;h=async()=>{await(l==null?void 0:l.messageSkipWaiting())};{let u=!1;const N=()=>{u=!0,l==null||l.addEventListener("controlling",j=>{j.isUpdate&&window.location.reload()}),e==null||e()};l.addEventListener("installed",j=>{typeof j.isUpdate>"u"?typeof j.isExternal<"u"?j.isExternal?N():!u&&(r==null||r()):j.isExternal?window.location.reload():!u&&(r==null||r()):j.isUpdate||r==null||r()}),l.addEventListener("waiting",N),l.addEventListener("externalwaiting",N)}l.register({immediate:s}).then(u=>{i?i("/sw.js",u):a==null||a(u)}).catch(u=>{o==null||o(u)})}}return m=p(),d}const nd="/api",de=Fl.create({baseURL:nd,headers:{"Content-Type":"application/json"}});de.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));de.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(t)});const rd=10*60*1e3,ad=Kr((t,s)=>({libraryItems:[],libraryLoaded:!1,libraryLoading:!1,libraryLoadedAt:null,categories:[],categoriesLoaded:!1,projectItemsCache:new Map,preloadLibrary:async()=>{const e=s();if(!e.libraryLoading){if(e.libraryLoaded&&e.libraryLoadedAt&&Date.now()-e.libraryLoadedAt<rd){console.log("[SpecbookStore]   , ");return}t({libraryLoading:!0});try{console.log("[SpecbookStore]    ...");const r=await de.get("/specbook/library/meta");t({libraryItems:r.data,libraryLoaded:!0,libraryLoading:!1,libraryLoadedAt:Date.now()}),console.log("[SpecbookStore]   :",r.data.length," ")}catch(r){console.error("[SpecbookStore]   :",r),t({libraryLoading:!1})}}},preloadCategories:async()=>{if(!s().categoriesLoaded)try{const r=await de.get("/specbook/categories");t({categories:r.data,categoriesLoaded:!0}),console.log("[SpecbookStore]   :",r.data.length,"")}catch(r){console.error("[SpecbookStore]   :",r)}},preloadAll:async()=>{const{preloadLibrary:e,preloadCategories:r}=s();await Promise.all([e(),r()])},getLibraryItems:(e,r)=>{const{libraryItems:a}=s();let i=a;return e&&e!==""&&(i=i.filter(o=>o.category===e)),r&&r.length>0&&(i=i.filter(o=>{if(!o.grade)return!1;const l=o.grade.split(",").map(m=>m.trim());return r.some(m=>l.includes(m))})),i=[...i].sort((o,l)=>{var d,p;const m=parseInt(((d=o.price)==null?void 0:d.replace(/[^0-9]/g,""))||"0",10);return parseInt(((p=l.price)==null?void 0:p.replace(/[^0-9]/g,""))||"0",10)-m}),i},getProjectItems:e=>{const{projectItemsCache:r}=s();return r.get(e)||null},loadProjectItems:async e=>{const a=s().projectItemsCache.get(e);if(a)return a;try{const o=(await de.get(`/specbook/project/${e}/meta`)).data;return t(l=>{const m=new Map(l.projectItemsCache);return m.set(e,o),{projectItemsCache:m}}),o}catch(i){return console.error("[SpecbookStore]    :",i),[]}},invalidateLibrary:()=>{t({libraryItems:[],libraryLoaded:!1,libraryLoadedAt:null})},invalidateProject:e=>{t(r=>{const a=new Map(r.projectItemsCache);return a.delete(e),{projectItemsCache:a}})},invalidateAll:()=>{t({libraryItems:[],libraryLoaded:!1,libraryLoadedAt:null,categories:[],categoriesLoaded:!1,projectItemsCache:new Map})},addItemToCache:e=>{e.is_library?t(r=>({libraryItems:[e,...r.libraryItems]})):e.project_id&&t(r=>{const a=new Map(r.projectItemsCache),i=a.get(e.project_id)||[];return a.set(e.project_id,[e,...i]),{projectItemsCache:a}})},updateItemInCache:e=>{e.is_library?t(r=>({libraryItems:r.libraryItems.map(a=>a.id===e.id?e:a)})):e.project_id&&t(r=>{const a=new Map(r.projectItemsCache),i=a.get(e.project_id);return i&&a.set(e.project_id,i.map(o=>o.id===e.id?e:o)),{projectItemsCache:a}})},removeItemFromCache:(e,r,a)=>{r?t(i=>({libraryItems:i.libraryItems.filter(o=>o.id!==e)})):a&&t(i=>{const o=new Map(i.projectItemsCache),l=o.get(a);return l&&o.set(a,l.filter(m=>m.id!==e)),{projectItemsCache:o}})}})),oo=b.createContext(void 0);function id({children:t}){const[s,e]=b.useState(null),[r,a]=b.useState(!0),i=xi(),o=ad(p=>p.preloadAll);b.useEffect(()=>{l()},[]);const l=async()=>{try{const p=localStorage.getItem("token");if(!p){a(!1);return}de.defaults.headers.common.Authorization=`Bearer ${p}`;const u=await de.get("/auth/me");u.data.success&&(e(u.data.user),o())}catch{localStorage.removeItem("token"),delete de.defaults.headers.common.Authorization}finally{a(!1)}},m=async(p,u)=>{var N,j;try{const x=await de.post("/auth/login",{username:p,password:u}),{token:A,user:L}=x.data;localStorage.setItem("token",A),de.defaults.headers.common.Authorization=`Bearer ${A}`,e(L),o(),O.success(`${L.name}, !`);const k=sessionStorage.getItem("redirectAfterLogin");k?(sessionStorage.removeItem("redirectAfterLogin"),i(k)):i("/")}catch(x){const A=x;throw O.error(((j=(N=A.response)==null?void 0:N.data)==null?void 0:j.message)||" "),x}},h=()=>{localStorage.removeItem("token"),delete de.defaults.headers.common.Authorization,e(null),i("/login"),O.success("")},d=p=>{e(p)};return n.jsxDEV(oo.Provider,{value:{user:s,loading:r,login:m,logout:h,updateUser:d},children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/contexts/AuthContext.tsx",lineNumber:105,columnNumber:5},this)}function js(){const t=b.useContext(oo);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const od={};function ld(t,s){let e;try{e=t()}catch{return}return{getItem:a=>{var i;const o=m=>m===null?null:JSON.parse(m,void 0),l=(i=e.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>e.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>e.removeItem(a)}}const Vn=t=>s=>{try{const e=t(s);return e instanceof Promise?e:{then(r){return Vn(r)(e)},catch(r){return this}}}catch(e){return{then(r){return this},catch(r){return Vn(r)(e)}}}},md=(t,s)=>(e,r,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:A=>A,version:0,merge:(A,L)=>({...L,...A}),...s},o=!1;const l=new Set,m=new Set;let h;try{h=i.getStorage()}catch{}if(!h)return t((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...A)},r,a);const d=Vn(i.serialize),p=()=>{const A=i.partialize({...r()});let L;const k=d({state:A,version:i.version}).then(F=>h.setItem(i.name,F)).catch(F=>{L=F});if(L)throw L;return k},u=a.setState;a.setState=(A,L)=>{u(A,L),p()};const N=t((...A)=>{e(...A),p()},r,a);let j;const x=()=>{var A;if(!h)return;o=!1,l.forEach(k=>k(r()));const L=((A=i.onRehydrateStorage)==null?void 0:A.call(i,r()))||void 0;return Vn(h.getItem.bind(h))(i.name).then(k=>{if(k)return i.deserialize(k)}).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==i.version){if(i.migrate)return i.migrate(k.state,k.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return k.state}).then(k=>{var F;return j=i.merge(k,(F=r())!=null?F:N),e(j,!0),p()}).then(()=>{L==null||L(j,void 0),o=!0,m.forEach(k=>k(j))}).catch(k=>{L==null||L(void 0,k)})};return a.persist={setOptions:A=>{i={...i,...A},A.getStorage&&(h=A.getStorage())},clearStorage:()=>{h==null||h.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:A=>(l.add(A),()=>{l.delete(A)}),onFinishHydration:A=>(m.add(A),()=>{m.delete(A)})},x(),j||N},cd=(t,s)=>(e,r,a)=>{let i={storage:ld(()=>localStorage),partialize:x=>x,version:0,merge:(x,A)=>({...A,...x}),...s},o=!1;const l=new Set,m=new Set;let h=i.storage;if(!h)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),e(...x)},r,a);const d=()=>{const x=i.partialize({...r()});return h.setItem(i.name,{state:x,version:i.version})},p=a.setState;a.setState=(x,A)=>{p(x,A),d()};const u=t((...x)=>{e(...x),d()},r,a);a.getInitialState=()=>u;let N;const j=()=>{var x,A;if(!h)return;o=!1,l.forEach(k=>{var F;return k((F=r())!=null?F:u)});const L=((A=i.onRehydrateStorage)==null?void 0:A.call(i,(x=r())!=null?x:u))||void 0;return Vn(h.getItem.bind(h))(i.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==i.version){if(i.migrate)return[!0,i.migrate(k.state,k.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var F;const[me,Q]=k;if(N=i.merge(Q,(F=r())!=null?F:u),e(N,!0),me)return d()}).then(()=>{L==null||L(N,void 0),N=r(),o=!0,m.forEach(k=>k(N))}).catch(k=>{L==null||L(void 0,k)})};return a.persist={setOptions:x=>{i={...i,...x},x.storage&&(h=x.storage)},clearStorage:()=>{h==null||h.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:x=>(l.add(x),()=>{l.delete(x)}),onFinishHydration:x=>(m.add(x),()=>{m.delete(x)})},i.skipHydration||j(),N||u},dd=(t,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((od?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),md(t,s)):cd(t,s),lo=dd,mo=Kr()(lo((t,s)=>({notifications:[],unreadCount:0,addNotification:e=>{const r={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),read:!1,createdAt:new Date};t(a=>({notifications:[r,...a.notifications].slice(0,50),unreadCount:a.unreadCount+1}))},markAsRead:e=>{t(r=>({notifications:r.notifications.map(a=>a.id===e?{...a,read:!0}:a),unreadCount:Math.max(0,r.unreadCount-1)}))},markAllAsRead:()=>{t(e=>({notifications:e.notifications.map(r=>({...r,read:!0})),unreadCount:0}))},deleteNotification:e=>{t(r=>{const a=r.notifications.find(o=>o.id===e),i=a&&!a.read;return{notifications:r.notifications.filter(o=>o.id!==e),unreadCount:i?Math.max(0,r.unreadCount-1):r.unreadCount}})},clearAll:()=>{t({notifications:[],unreadCount:0})},getUnreadCount:()=>s().unreadCount}),{name:"notification-storage",partialize:t=>({notifications:t.notifications,unreadCount:t.unreadCount})}));var ud={lessThanXSeconds:{one:"1 ",other:"{{count}} "},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1 ",other:"{{count}} "},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:" 1",other:" {{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:" 1",other:" {{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:" 1",other:" {{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:" 1",other:" {{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1 ",other:"{{count}} "},almostXYears:{one:" 1",other:" {{count}}"}},pd=function(s,e,r){var a,i=ud[s];return typeof i=="string"?a=i:e===1?a=i.one:a=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?a+" ":a+" ":a},fd={full:"y M d EEEE",long:"y M d",medium:"y.MM.dd",short:"y.MM.dd"},gd={full:"a H mm ss zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},hd={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},bd={date:vr({formats:fd,defaultWidth:"full"}),time:vr({formats:gd,defaultWidth:"full"}),dateTime:vr({formats:hd,defaultWidth:"full"})},Nd={lastWeek:"'' eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"'' eeee p",other:"P"},yd=function(s,e,r,a){return Nd[s]},xd={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["",""]},vd={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},kd={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},Dd={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},Vd={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},Cd={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},_d=function(s,e){var r=Number(s),a=String(e==null?void 0:e.unit);switch(a){case"minute":case"second":return String(r);case"date":return r+"";default:return r+""}},Ad={ordinalNumber:_d,era:mn({values:xd,defaultWidth:"wide"}),quarter:mn({values:vd,defaultWidth:"wide",argumentCallback:function(s){return s-1}}),month:mn({values:kd,defaultWidth:"wide"}),day:mn({values:Dd,defaultWidth:"wide"}),dayPeriod:mn({values:Vd,defaultWidth:"wide",formattingValues:Cd,defaultFormattingWidth:"wide"})},Ed=/^(\d+)(|)?/i,wd=/\d+/i,jd={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(|)/i},Ld={any:[/^(bc|)/i,/^(ad|)/i]},Bd={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]?/i},Hd={any:[/1/i,/2/i,/3/i,/4/i]},Ud={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])/i,wide:/^(1[012]|[123456789])/i},Sd={any:[/^1?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},Pd={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},Md={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},Id={any:/^(am|pm|||||||)/i},Td={any:{am:/^(am|)/i,pm:/^(pm|)/i,midnight:/^/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},Rd={ordinalNumber:nm({matchPattern:Ed,parsePattern:wd,valueCallback:function(s){return parseInt(s,10)}}),era:cn({matchPatterns:jd,defaultMatchWidth:"wide",parsePatterns:Ld,defaultParseWidth:"any"}),quarter:cn({matchPatterns:Bd,defaultMatchWidth:"wide",parsePatterns:Hd,defaultParseWidth:"any",valueCallback:function(s){return s+1}}),month:cn({matchPatterns:Ud,defaultMatchWidth:"wide",parsePatterns:Sd,defaultParseWidth:"any"}),day:cn({matchPatterns:Pd,defaultMatchWidth:"wide",parsePatterns:Md,defaultParseWidth:"any"}),dayPeriod:cn({matchPatterns:Id,defaultMatchWidth:"any",parsePatterns:Td,defaultParseWidth:"any"})},gt={code:"ko",formatDistance:pd,formatLong:bd,formatRelative:yd,localize:Ad,match:Rd,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Fd=({isOpen:t,onClose:s})=>{const e=xi(),{notifications:r,unreadCount:a,markAsRead:i,markAllAsRead:o,deleteNotification:l,clearAll:m}=mo();if(!t)return null;const h=u=>{switch(u){case"payment":return n.jsxDEV(zl,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:21,columnNumber:16},void 0);case"as_request":return n.jsxDEV(Wl,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:23,columnNumber:16},void 0);case"schedule":return n.jsxDEV(Di,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:25,columnNumber:16},void 0);case"work_request":return n.jsxDEV($l,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:27,columnNumber:16},void 0);default:return n.jsxDEV(xr,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:29,columnNumber:16},void 0)}},d=u=>{switch(u){case"payment":return"text-green-600 bg-green-50";case"as_request":return"text-yellow-600 bg-yellow-50";case"schedule":return"text-blue-600 bg-blue-50";case"work_request":return"text-purple-600 bg-purple-50";default:return"text-gray-600 bg-gray-50"}},p=u=>{i(u.id),u.link&&(e(u.link),s())};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-25 z-40",onClick:s},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:59,columnNumber:7},void 0),n.jsxDEV("div",{className:"fixed right-0 top-16 h-[calc(100vh-4rem)] w-full sm:w-96 bg-white shadow-2xl z-50 flex flex-col",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV(xr,{className:"h-5 w-5 text-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:69,columnNumber:13},void 0),n.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:70,columnNumber:13},void 0),a>0&&n.jsxDEV("span",{className:"px-2 py-0.5 bg-gray-900 text-white text-xs font-bold rounded-full",children:a},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:72,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:68,columnNumber:11},void 0),n.jsxDEV("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV(ht,{className:"h-5 w-5 text-gray-600"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:81,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:77,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:67,columnNumber:9},void 0),r.length>0&&n.jsxDEV("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 border-b border-gray-200",children:[a>0&&n.jsxDEV("button",{onClick:o,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-gray-900",children:[n.jsxDEV(ki,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:93,columnNumber:17},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:89,columnNumber:15},void 0),n.jsxDEV("button",{onClick:m,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-red-600 ml-auto",children:[n.jsxDEV(Fs,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:101,columnNumber:15},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:97,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:87,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:r.length===0?n.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[n.jsxDEV(xr,{className:"h-12 w-12 text-gray-300 mb-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:111,columnNumber:15},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:112,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:110,columnNumber:13},void 0):n.jsxDEV("div",{className:"divide-y divide-gray-100",children:r.map(u=>n.jsxDEV("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${u.read?"":"bg-blue-50"}`,onClick:()=>p(u),children:n.jsxDEV("div",{className:"flex gap-3",children:[n.jsxDEV("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${d(u.type)}`,children:h(u.type)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:126,columnNumber:21},void 0),n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[n.jsxDEV("p",{className:`text-sm font-semibold ${u.read?"text-gray-700":"text-gray-900"}`,children:u.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:133,columnNumber:25},void 0),!u.read&&n.jsxDEV("span",{className:"flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-1"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:137,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:132,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:u.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:140,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:rm(new Date(u.createdAt),{addSuffix:!0,locale:gt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:143,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:131,columnNumber:21},void 0),n.jsxDEV("button",{onClick:N=>{N.stopPropagation(),l(u.id)},className:"flex-shrink-0 p-1 hover:bg-gray-200 rounded transition-colors",children:n.jsxDEV(ht,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:159,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:152,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:124,columnNumber:19},void 0)},u.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:117,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:115,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:108,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:65,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/NotificationPanel.tsx",lineNumber:57,columnNumber:5},void 0)},Od={getAllWorkRequests:async()=>(await de.get("/workrequests")).data,getWorkRequestById:async t=>(await de.get(`/workrequests/${t}`)).data,createWorkRequest:async t=>{console.log("[workRequestService.createWorkRequest] Input data:",t);const s={project:t.project,requestType:t.requestType,description:t.description,requestDate:t.requestDate instanceof Date?t.requestDate.toISOString():t.requestDate,dueDate:t.dueDate instanceof Date?t.dueDate.toISOString():t.dueDate,requestedBy:t.requestedBy,assignedTo:t.assignedTo,priority:t.priority||"medium",status:t.status||"pending",notes:t.notes||""};return console.log("[workRequestService.createWorkRequest] Sending to backend:",s),(await de.post("/workrequests",s)).data},updateWorkRequest:async(t,s)=>{console.log("[workRequestService.updateWorkRequest] Input data:",s);const e={};return s.project!==void 0&&(e.project=s.project),s.requestType!==void 0&&(e.requestType=s.requestType),s.description!==void 0&&(e.description=s.description),s.requestDate!==void 0&&(e.requestDate=s.requestDate instanceof Date?s.requestDate.toISOString():s.requestDate),s.dueDate!==void 0&&(e.dueDate=s.dueDate instanceof Date?s.dueDate.toISOString():s.dueDate),s.requestedBy!==void 0&&(e.requestedBy=s.requestedBy),s.assignedTo!==void 0&&(e.assignedTo=s.assignedTo),s.priority!==void 0&&(e.priority=s.priority),s.status!==void 0&&(e.status=s.status),s.notes!==void 0&&(e.notes=s.notes),s.completedDate!==void 0&&(e.completedDate=s.completedDate instanceof Date?s.completedDate.toISOString():s.completedDate),console.log("[workRequestService.updateWorkRequest] Sending to backend:",e),(await de.put(`/workrequests/${t}`,e)).data},deleteWorkRequest:async t=>{await de.delete(`/workrequests/${t}`)}},es={getAllPayments:async()=>(await de.get("/payments")).data,getPaymentById:async t=>(await de.get(`/payments/${t}`)).data,createPayment:async t=>{var r,a,i;const s={project_id:t.projectId,request_type:t.category,vendor_name:t.process||"",description:t.purpose||"",amount:t.amount,account_holder:((r=t.bankInfo)==null?void 0:r.accountHolder)||"",bank_name:((a=t.bankInfo)==null?void 0:a.bankName)||"",account_number:((i=t.bankInfo)==null?void 0:i.accountNumber)||"",notes:t.notes||"",itemName:t.itemName||"",materialAmount:t.materialAmount||0,laborAmount:t.laborAmount||0,originalMaterialAmount:t.originalMaterialAmount||0,originalLaborAmount:t.originalLaborAmount||0,applyTaxDeduction:t.applyTaxDeduction||!1,includesVAT:t.includesVAT||!1,quickText:t.quickText||"",images:t.images||[]};return console.log("[paymentService.createPayment] Sending to backend:",s),(await de.post("/payments",s)).data},updatePayment:async(t,s)=>{const e={};return s.projectId!==void 0&&(e.project=s.projectId),s.purpose!==void 0&&(e.description=s.purpose),s.amount!==void 0&&(e.amount=s.amount),s.process!==void 0&&(e.vendor_name=s.process),s.category!==void 0&&(e.request_type=s.category),s.itemName!==void 0&&(e.itemName=s.itemName),s.materialAmount!==void 0&&(e.materialAmount=s.materialAmount),s.laborAmount!==void 0&&(e.laborAmount=s.laborAmount),s.originalMaterialAmount!==void 0&&(e.originalMaterialAmount=s.originalMaterialAmount),s.originalLaborAmount!==void 0&&(e.originalLaborAmount=s.originalLaborAmount),s.applyTaxDeduction!==void 0&&(e.applyTaxDeduction=s.applyTaxDeduction),s.includesVAT!==void 0&&(e.includesVAT=s.includesVAT),s.notes!==void 0&&(e.notes=s.notes),s.requestDate!==void 0&&(e.requestDate=s.requestDate),s.bankInfo!==void 0&&(s.bankInfo.accountHolder&&(e.account_holder=s.bankInfo.accountHolder),s.bankInfo.bankName&&(e.bank_name=s.bankInfo.bankName),s.bankInfo.accountNumber&&(e.account_number=s.bankInfo.accountNumber)),(await de.put(`/payments/${t}`,e)).data},updatePaymentStatus:async(t,s)=>(await de.put(`/payments/${t}/status`,{status:s})).data,updatePaymentAmounts:async(t,s,e)=>(await de.patch(`/payments/${t}/amounts`,{materialAmount:s,laborAmount:e})).data,updatePaymentImages:async(t,s)=>(await de.put(`/payments/${t}/images`,{images:s})).data,deletePayment:async t=>{await de.delete(`/payments/${t}`)}},Nn={getAllASRequests:async()=>(await de.get("/as-requests")).data,getASRequestById:async t=>(await de.get(`/as-requests/${t}`)).data,createASRequest:async t=>(await de.post("/as-requests",t)).data,updateASRequest:async(t,s)=>(await de.put(`/as-requests/${t}`,s)).data,deleteASRequest:async t=>{await de.delete(`/as-requests/${t}`)}},Js={getAllProjects:async()=>(await de.get("/projects")).data,getProjectById:async t=>(await de.get(`/projects/${t}`)).data,createProject:async t=>{const s={name:t.name,client:typeof t.client=="string"?t.client:t.client.name,location:typeof t.location=="string"?t.location:t.location.address,status:t.status||"planning",manager:t.manager,description:t.description||""};if(t.startDate){const r=typeof t.startDate=="string"?new Date(t.startDate):t.startDate;s.startDate=r.toISOString().split("T")[0]}if(t.endDate){const r=typeof t.endDate=="string"?new Date(t.endDate):t.endDate;s.endDate=r.toISOString().split("T")[0]}return console.log("[projectService.createProject] Sending to backend:",s),(await de.post("/projects",s)).data},updateProject:async(t,s)=>{var r;const e={};if(s.name!==void 0&&(e.name=s.name),s.client!==void 0&&(e.client=typeof s.client=="string"?s.client:s.client.name),s.location!==void 0&&(e.location=typeof s.location=="string"?s.location:s.location.address),s.startDate!==void 0)if(typeof s.startDate=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(s.startDate))e.startDate=s.startDate;else{const a=typeof s.startDate=="string"?new Date(s.startDate):s.startDate;e.startDate=a.toISOString().split("T")[0]}if(s.endDate!==void 0)if(typeof s.endDate=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(s.endDate))e.endDate=s.endDate;else{const a=typeof s.endDate=="string"?new Date(s.endDate):s.endDate;e.endDate=a.toISOString().split("T")[0]}s.status!==void 0&&(e.status=s.status),s.manager!==void 0&&(e.manager=s.manager),s.description!==void 0&&(e.description=s.description),s.meetingNotes!==void 0&&(e.meetingNotes=s.meetingNotes),s.customerRequests!==void 0&&(e.customerRequests=s.customerRequests),s.entrancePassword!==void 0&&(e.entrancePassword=s.entrancePassword),s.sitePassword!==void 0&&(e.sitePassword=s.sitePassword),console.log("[projectService.updateProject] Sending to backend:",e);try{return(await de.put(`/projects/${t}`,e)).data}catch(a){const i=a;throw console.error("[projectService.updateProject] Error:",a),console.error("[projectService.updateProject] Error response:",(r=i.response)==null?void 0:r.data),a}},deleteProject:async t=>{await de.delete(`/projects/${t}`)}},qd=window.location.origin;class $d{constructor(){ja(this,"socket",null)}connect(s){return this.socket=yn(qd,{auth:{token:s},transports:["websocket"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),this.socket.on("connect",()=>{console.log(" Socket connected")}),this.socket.on("disconnect",()=>{console.log(" Socket disconnected")}),this.socket.on("connect_error",e=>{console.error("Socket connection error:",e)}),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}joinProject(s){var e;(e=this.socket)==null||e.emit("join:project",s)}leaveProject(s){var e;(e=this.socket)==null||e.emit("leave:project",s)}emitScheduleUpdate(s){var e;(e=this.socket)==null||e.emit("schedule:update",s)}onScheduleUpdated(s){var e;(e=this.socket)==null||e.on("schedule:updated",s)}emitPaymentRequest(s){var e;(e=this.socket)==null||e.emit("payment:request",s)}onNewPayment(s){var e;(e=this.socket)==null||e.on("payment:new",s)}emitPaymentStatusUpdate(s){var e;(e=this.socket)==null||e.emit("payment:statusUpdate",s)}onPaymentStatusChanged(s){var e;(e=this.socket)==null||e.on("payment:statusChanged",s)}onPaymentUpdate(s){var e;(e=this.socket)==null||e.on("payment:update",s)}sendMessage(s){var e;(e=this.socket)==null||e.emit("message:send",s)}onMessageReceive(s){var e;(e=this.socket)==null||e.on("message:receive",s)}sendNotification(s){var e;(e=this.socket)==null||e.emit("notification:send",s)}onNotificationReceive(s){var e;(e=this.socket)==null||e.on("notification:receive",s)}onActiveUsers(s){var e;(e=this.socket)==null||e.on("users:active",s)}on(s,e){var r;(r=this.socket)==null||r.on(s,e)}emit(s,e){var r;(r=this.socket)==null||r.emit(s,e)}off(s,e){var r;(r=this.socket)==null||r.off(s,e)}getSocket(){return this.socket}}const Kn=new $d,Wd=()=>{var z,we;const{user:t,logout:s,loading:e}=js(),[r,a]=b.useState(!1),[i,o]=b.useState(!1),[l,m]=b.useState(!1),h=Ml(),{unreadCount:d}=mo(),[p,u]=b.useState(0),[N,j]=b.useState(0),[x,A]=b.useState(0),[L,k]=b.useState(0),[F,me]=b.useState(!1),[Q,T]=b.useState(0),[ie,_]=b.useState(!1),le=b.useRef(0),ve=b.useRef(null),oe=80,R=b.useCallback(se=>{if(window.scrollY>0)return!1;let Ve=se;for(;Ve&&Ve!==document.body;){const Ye=window.getComputedStyle(Ve).overflowY;if((Ye==="auto"||Ye==="scroll")&&Ve.scrollTop>0)return!1;Ve=Ve.parentElement}return!0},[]),ne=b.useCallback(se=>{if(window.innerWidth>=768)return;const Ve=se.target;R(Ve)&&(le.current=se.touches[0].clientY,me(!0))},[R]),be=b.useCallback(se=>{if(!F||ie)return;const Ve=se.target;if(!R(Ve)){me(!1),T(0);return}const Ye=se.touches[0].clientY-le.current;if(Ye>0){const Te=Math.min(Ye*.5,120);T(Te)}else me(!1),T(0)},[F,ie,R]),je=b.useCallback(()=>{F&&(Q>=oe&&!ie?(_(!0),T(50),setTimeout(()=>{window.location.reload()},300)):T(0),me(!1))},[F,Q,ie]);if(b.useEffect(()=>{m(!1)},[h.pathname]),b.useEffect(()=>{const se=Ve=>{m(Ve.detail.isOpen)};return window.addEventListener("mobileFormStateChange",se),()=>window.removeEventListener("mobileFormStateChange",se)},[]),b.useEffect(()=>{const se=()=>{k(Ve=>Math.max(0,Ve-1))};return window.addEventListener("quoteInquiryRead",se),()=>window.removeEventListener("quoteInquiryRead",se)},[]),b.useEffect(()=>{const se=()=>{j(Ve=>Math.max(0,Ve-1))};return window.addEventListener("paymentCompleted",se),()=>window.removeEventListener("paymentCompleted",se)},[]),b.useEffect(()=>{const se=Kn.getSocket();if(!se||!t)return;const Ve=async()=>{try{const[Me,Ye]=await Promise.all([es.getAllPayments(),Js.getAllProjects()]);let Te=Me;if(t.name===""){const st=Ye.map(Be=>Be.name);Te=Me.filter(Be=>st.includes(Be.project))}j(Te.filter(st=>st.status==="pending").length)}catch(Me){console.error("Failed to refresh payment count:",Me)}};return se.on("payment:refresh",Ve),()=>{se.off("payment:refresh",Ve)}},[t]),b.useEffect(()=>{if(!t)return;const se=async()=>{try{const[Me,Ye,Te,st]=await Promise.all([Od.getAllWorkRequests(),es.getAllPayments(),Nn.getAllASRequests(),Js.getAllProjects()]);u(Me.filter(qe=>qe.assignedTo===t.name&&qe.status==="pending").length);let Be=Ye;if(t.name===""){const qe=st.map(Dt=>Dt.name);Be=Ye.filter(Dt=>qe.includes(Dt.project))}if(j(Be.filter(qe=>qe.status==="pending").length),A(Te.filter(qe=>qe.status==="in-progress").length),t.role==="admin"||t.role==="manager")try{const Dt=(await de.get("/quote-inquiries")).data.filter(H=>!H.isRead).length;k(Dt)}catch(qe){console.error("Failed to load quote inquiry count:",qe)}}catch(Me){console.error("Failed to load badge counts:",Me)}};se();const Ve=setInterval(se,3e4);return()=>clearInterval(Ve)},[t]),e)return n.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxDEV("div",{className:"text-center",children:[n.jsxDEV("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:247,columnNumber:11},void 0),n.jsxDEV("p",{className:"mt-4 text-gray-600",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:248,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:246,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:245,columnNumber:7},void 0);if(!t){const se=window.location.pathname+window.location.search;return se&&se!=="/login"&&se!=="/"&&sessionStorage.setItem("redirectAfterLogin",se),n.jsxDEV(vi,{to:"/login",replace:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:261,columnNumber:12},void 0)}const Se=[{name:"",href:"/dashboard"},{name:"",href:"/projects"},{name:"",href:"/schedule"},{name:"",href:"/drawings"},{name:"",href:"/site-log"},{name:"",href:"/additional-work"},{name:"",href:"/construction-payment",roles:["admin","manager"]},{name:"",href:"/work-request",...p>0&&{badge:p}},{name:"",href:"/specbook"},{name:"",href:"/finish-check"},{name:"",href:"/execution-history"},{name:"",href:"/payments",...N>0&&{badge:N}},{name:"AS ",href:"/after-service",...x>0&&{badge:x}},{name:"",href:"/estimate-preview",roles:["admin","manager"]},{name:"",href:"/quote-inquiry",roles:["admin","manager"],...L>0&&{badge:L}},{name:"",href:"/contractors"}],Ee=Se.filter(se=>!se.roles||se.roles.includes((t==null?void 0:t.role)||"")),et=((z=Se.find(se=>se.href===h.pathname))==null?void 0:z.name)||"",tt=(()=>{const se=h.pathname;return["/projects","/schedule","/after-service","/additional-work","/construction-payment","/contractors","/work-request","/execution-history"].includes(se)?()=>{const Me=new CustomEvent("headerAddButtonClick");window.dispatchEvent(Me)}:null})();return n.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[n.jsxDEV("div",{className:Gt("fixed inset-0 z-40 lg:hidden",r?"block":"hidden"),children:[n.jsxDEV("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50",onClick:()=>a(!1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:329,columnNumber:9},void 0),n.jsxDEV("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[n.jsxDEV("div",{className:"flex h-16 items-center justify-between px-6 border-b border-gray-200",children:[n.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:335,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>a(!1),className:"text-sm text-gray-600 hover:text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:336,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:334,columnNumber:11},void 0),n.jsxDEV("nav",{className:"flex-1 space-y-1 px-4 py-4",children:Ee.map(se=>n.jsxDEV(yr,{to:se.href,className:({isActive:Ve})=>Gt("block px-4 py-3 text-sm font-medium border-l-2 transition-colors relative",Ve?"border-gray-900 bg-gray-50 text-gray-900":"border-transparent text-gray-600 hover:border-gray-400 hover:bg-gray-50"),onClick:()=>{a(!1)},children:n.jsxDEV("span",{className:"flex items-center justify-between",children:[n.jsxDEV("span",{children:se.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:362,columnNumber:19},void 0),se.badge&&se.badge>0&&n.jsxDEV("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:se.badge>99?"99+":se.badge},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:364,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:361,columnNumber:17},void 0)},se.name,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:345,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:343,columnNumber:11},void 0),n.jsxDEV("div",{className:"border-t border-gray-200 px-4 py-4",children:n.jsxDEV("button",{onClick:s,className:"w-full px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 text-left",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:373,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:372,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:333,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:323,columnNumber:7},void 0),n.jsxDEV("div",{className:"desktop-sidebar hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:n.jsxDEV("div",{className:"flex flex-col bg-white border-r border-gray-200",children:[n.jsxDEV("div",{className:"flex h-16 items-center px-6 border-b border-gray-200",children:n.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:387,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:386,columnNumber:11},void 0),n.jsxDEV("nav",{className:"flex-1 space-y-1 px-4 py-4",children:Ee.map(se=>n.jsxDEV(yr,{to:se.href,className:({isActive:Ve})=>Gt("block px-4 py-3 text-sm font-medium border-l-2 transition-colors relative",Ve?"border-gray-900 bg-gray-50 text-gray-900":"border-transparent text-gray-600 hover:border-gray-400 hover:bg-gray-50"),children:n.jsxDEV("span",{className:"flex items-center justify-between",children:[n.jsxDEV("span",{children:se.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:404,columnNumber:19},void 0),se.badge&&se.badge>0&&n.jsxDEV("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:se.badge>99?"99+":se.badge},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:406,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:403,columnNumber:17},void 0)},se.name,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:391,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:389,columnNumber:11},void 0),n.jsxDEV("div",{className:"border-t border-gray-200 px-4 py-4",children:n.jsxDEV("button",{onClick:s,className:"w-full px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 text-left",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:415,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:414,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:385,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:384,columnNumber:7},void 0),n.jsxDEV("div",{className:"main-content lg:pl-64",children:[n.jsxDEV("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200 print-hide",children:n.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 lg:px-8",children:[n.jsxDEV("div",{className:"flex items-center space-x-3",children:[n.jsxDEV("button",{onClick:()=>a(!0),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 -ml-2","aria-label":" ",children:n.jsxDEV("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:438,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:437,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:432,columnNumber:15},void 0),et&&n.jsxDEV("h1",{className:"text-lg font-bold text-gray-900",children:et},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:442,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:431,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex items-center space-x-2 sm:space-x-6 ml-auto",children:[tt&&n.jsxDEV("button",{onClick:tt,className:"lg:hidden p-2 text-gray-900 hover:text-gray-700","aria-label":l?"":"",children:l?n.jsxDEV(ht,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:455,columnNumber:37},void 0):n.jsxDEV(Gs,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:455,columnNumber:65},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:450,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>o(!i),className:"hidden sm:block relative p-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"",children:[n.jsxDEV("svg",{className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:465,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:464,columnNumber:17},void 0),d>0&&n.jsxDEV("span",{className:"absolute top-1 right-1 flex items-center justify-center h-4 w-4 bg-red-600 text-white text-[10px] font-bold rounded-full",children:d>9?"9+":d},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:468,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:459,columnNumber:15},void 0),n.jsxDEV("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-3",children:[n.jsxDEV("div",{className:"text-right",children:[n.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:475,columnNumber:19},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.role},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:476,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:474,columnNumber:17},void 0),n.jsxDEV("div",{className:"h-8 w-8 sm:h-9 sm:w-9 bg-gray-900 text-white flex items-center justify-center text-xs font-bold rounded-full",children:(we=t==null?void 0:t.name)==null?void 0:we.substring(0,1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:478,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:473,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:447,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:429,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:428,columnNumber:9},void 0),n.jsxDEV("div",{className:"portrait-top-nav hidden",children:n.jsxDEV("div",{className:"flex items-center gap-1 px-2 py-2 bg-white border-b border-gray-200 overflow-x-auto",children:Ee.map(se=>n.jsxDEV(yr,{to:se.href,className:({isActive:Ve})=>Gt("px-3 py-1.5 text-sm font-medium rounded-full whitespace-nowrap transition-colors relative",Ve?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"),children:n.jsxDEV("span",{className:"flex items-center gap-1",children:[n.jsxDEV("span",{children:se.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:503,columnNumber:19},void 0),se.badge&&se.badge>0&&n.jsxDEV("span",{className:"inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-[10px] font-bold leading-none text-white bg-red-600 rounded-full",children:se.badge>99?"99+":se.badge},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:505,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:502,columnNumber:17},void 0)},se.name,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:490,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:488,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:487,columnNumber:9},void 0),n.jsxDEV("main",{ref:ve,className:"py-[10px] md:py-6 lg:py-8",onTouchStart:ne,onTouchMove:be,onTouchEnd:je,children:[Q>0&&n.jsxDEV("div",{className:"md:hidden fixed left-0 right-0 flex items-center justify-center z-50 pointer-events-none",style:{top:56,height:Q,transition:F?"none":"height 0.2s ease-out"},children:n.jsxDEV("div",{className:Gt("flex items-center justify-center w-10 h-10 bg-white rounded-full shadow-lg border",ie&&"animate-spin"),style:{transform:`rotate(${ie?0:Q*2}deg)`,opacity:Math.min(Q/oe,1)},children:n.jsxDEV(Yl,{className:Gt("w-5 h-5",Q>=oe?"text-blue-600":"text-gray-400")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:543,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:533,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:525,columnNumber:13},void 0),n.jsxDEV("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8",style:{transform:Q>0?`translateY(${Q}px)`:"none",transition:F?"none":"transform 0.2s ease-out"},children:n.jsxDEV(Il,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:560,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:553,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:516,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:426,columnNumber:7},void 0),n.jsxDEV(Fd,{isOpen:i,onClose:()=>o(!1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:566,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/Layout.tsx",lineNumber:321,columnNumber:5},void 0)},zd=t=>{try{const s=window.AudioContext||window.webkitAudioContext,e=new s,r=t==="emergency"?5:3;let a=0;const i=()=>{if(a>=r)return;const o=e.createOscillator(),l=e.createGain();o.connect(l),l.connect(e.destination),o.frequency.value=t==="emergency"?1e3:800,o.type="sine",l.gain.setValueAtTime(.3,e.currentTime),l.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),o.start(e.currentTime),o.stop(e.currentTime+.5),a++,a<r&&setTimeout(i,700)};i()}catch(s){console.error("  :",s)}},Yd=t=>{if("vibrate"in navigator){const s=t==="emergency"?[200,200,200,200,200,200,200,200,200,200]:[200,200,200,200,200,200];navigator.vibrate(s)}},Kd=(t,s)=>{zd(t),Yd(t),"Notification"in window&&Notification.permission==="granted"&&new Notification("  ",{body:s,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:"urgent-payment",requireInteraction:!0})},Qd=async()=>"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":Notification.permission==="granted",Un={getAllSchedules:async()=>(await de.get("/schedules")).data,getScheduleById:async t=>(await de.get(`/schedules/${t}`)).data,createSchedule:async t=>(await de.post("/schedules",{project:t.project,title:t.title,type:t.type||"other",phase:t.phase||"",startDate:t.startDate,endDate:t.endDate,allDay:t.allDay!==void 0?t.allDay:!0,assignedTo:t.assignedTo||[],description:t.description,location:t.location,priority:t.priority||"medium",progress:t.progress||0,isCompleted:t.isCompleted||!1,asRequestId:t.asRequestId,time:t.time})).data,updateSchedule:async(t,s)=>(await de.put(`/schedules/${t}`,s)).data,deleteSchedule:async t=>{await de.delete(`/schedules/${t}`)}},Ns={getAllContractors:async()=>(await de.get("/contractors")).data,getContractorById:async t=>(await de.get(`/contractors/${t}`)).data,createContractor:async t=>(await de.post("/contractors",t)).data,updateContractor:async(t,s)=>(await de.put(`/contractors/${t}`,s)).data,deleteContractor:async t=>{await de.delete(`/contractors/${t}`)}},Sn={getAllConstructionPayments:async()=>(await de.get("/construction-payments")).data,getConstructionPaymentById:async t=>(await de.get(`/construction-payments/${t}`)).data,createConstructionPayment:async t=>(await de.post("/construction-payments",t)).data,updateConstructionPayment:async(t,s)=>(await de.put(`/construction-payments/${t}`,s)).data,deleteConstructionPayment:async t=>{await de.delete(`/construction-payments/${t}`)}},Pn={getAllRecords:async()=>(await de.get("/execution-records")).data,getRecordById:async t=>(await de.get(`/execution-records/${t}`)).data,createRecord:async t=>(console.log("[executionRecordService.createRecord] Creating:",t),(await de.post("/execution-records",t)).data),updateRecord:async(t,s)=>(await de.put(`/execution-records/${t}`,s)).data,deleteRecord:async t=>{await de.delete(`/execution-records/${t}`)}},Os=Kr()(lo((t,s)=>({projects:[],schedules:[],payments:[],contractors:[],constructionPayments:[],asRequests:[],executionRecords:[],setProjects:e=>t({projects:e}),addProject:e=>t(r=>{const a={id:e.id,project:e.name,client:e.client,totalAmount:e.contractAmount,vatType:"percentage",vatPercentage:100,vatAmount:0,payments:[]};return{projects:[e,...r.projects],constructionPayments:[a,...r.constructionPayments]}}),updateProject:(e,r)=>t(a=>({projects:a.projects.map(i=>i.id===e?{...i,...r}:i)})),deleteProject:e=>t(r=>({projects:r.projects.filter(a=>a.id!==e),constructionPayments:r.constructionPayments.filter(a=>a.id!==e)})),setSchedules:e=>t({schedules:e}),addSchedule:e=>t(r=>({schedules:[e,...r.schedules]})),updateSchedule:(e,r)=>t(a=>({schedules:a.schedules.map(i=>i.id===e?{...i,...r}:i)})),deleteSchedule:e=>t(r=>({schedules:r.schedules.filter(a=>a.id!==e)})),setPayments:e=>t({payments:e}),addPayment:e=>t(r=>({payments:[e,...r.payments]})),updatePayment:(e,r)=>t(a=>({payments:a.payments.map(i=>i.id===e?{...i,...r}:i)})),deletePayment:e=>t(r=>({payments:r.payments.filter(a=>a.id!==e)})),setContractors:e=>t({contractors:e}),addContractor:e=>t(r=>({contractors:[e,...r.contractors]})),updateContractor:(e,r)=>t(a=>({contractors:a.contractors.map(i=>i.id===e?{...i,...r}:i)})),deleteContractor:e=>t(r=>({contractors:r.contractors.filter(a=>a.id!==e)})),setConstructionPayments:e=>t({constructionPayments:e}),addConstructionPayment:e=>t(r=>({constructionPayments:[e,...r.constructionPayments]})),updateConstructionPayment:(e,r)=>t(a=>({constructionPayments:a.constructionPayments.map(i=>i.id===e?{...i,...r}:i)})),deleteConstructionPayment:e=>t(r=>({constructionPayments:r.constructionPayments.filter(a=>a.id!==e)})),setASRequests:e=>t({asRequests:e}),addASRequest:e=>t(r=>({asRequests:[e,...r.asRequests]})),updateASRequest:(e,r)=>t(a=>({asRequests:a.asRequests.map(i=>i.id===e?{...i,...r}:i)})),deleteASRequest:e=>t(r=>({asRequests:r.asRequests.filter(a=>a.id!==e)})),setExecutionRecords:e=>t({executionRecords:e}),addExecutionRecord:e=>{console.log("[dataStore]  :",e.id,e.itemName),t(r=>{const a=[e,...r.executionRecords];return console.log("[dataStore]   :",a.length),{executionRecords:a}})},updateExecutionRecord:(e,r)=>t(a=>({executionRecords:a.executionRecords.map(i=>i.id===e?{...i,...r}:i)})),deleteExecutionRecord:e=>t(r=>({executionRecords:r.executionRecords.filter(a=>a.id!==e)})),loadPaymentsFromAPI:async()=>{try{const e=await es.getAllPayments();console.log("[loadPaymentsFromAPI] Raw API response sample:",e[0]);const r=e.map(a=>({id:String(a.id),project:a.project_name,purpose:a.description,process:a.vendor_name,itemName:a.item_name||"",amount:a.amount,materialAmount:a.material_amount||0,laborAmount:a.labor_amount||0,originalMaterialAmount:a.original_material_amount||0,originalLaborAmount:a.original_labor_amount||0,applyTaxDeduction:a.apply_tax_deduction===1,includesVAT:a.includes_vat===1,quickText:a.quick_text||"",images:(()=>{if(!a.images)return[];if(Array.isArray(a.images))return a.images;try{const i=JSON.parse(a.images);return Array.isArray(i)?i:[]}catch(i){return console.error("  :",i),[]}})(),category:a.request_type,status:a.status,urgency:"normal",requestedBy:a.requester_name,requestDate:new Date(a.created_at),approvalDate:a.approved_at?new Date(a.approved_at):void 0,bankInfo:{accountHolder:a.account_holder||"",bankName:a.bank_name||"",accountNumber:a.account_number||""},attachments:[],notes:a.notes||"",completionDate:a.paid_at?new Date(a.paid_at):void 0}));t({payments:r})}catch(e){throw console.error("Failed to load payments from API:",e),e}},addPaymentToAPI:async e=>{try{const a=s().projects.find(d=>d.name===e.project),o={projectId:a?a.id:e.project,purpose:e.purpose,process:e.process,itemName:e.itemName,amount:e.amount,category:e.category,urgency:e.urgency,requestedBy:e.requestedBy,bankInfo:e.bankInfo,notes:e.notes,attachments:[],materialAmount:e.materialAmount||0,laborAmount:e.laborAmount||0,originalMaterialAmount:e.originalMaterialAmount||0,originalLaborAmount:e.originalLaborAmount||0,applyTaxDeduction:e.applyTaxDeduction||!1,includesVAT:e.includesVAT||!1,quickText:e.quickText||"",images:e.images||[]};console.log("[addPaymentToAPI] Sending payment data:",o);const l=await es.createPayment(o),m=String(l.id),h={...e,id:m};return t(d=>({payments:[h,...d.payments]})),m}catch(r){throw console.error("Failed to add payment to API:",r),r}},updatePaymentInAPI:async(e,r)=>{try{if(r.status&&Object.keys(r).length===1)await es.updatePaymentStatus(e,r.status);else{let a=r.project;if(r.project){const o=s().projects.find(l=>l.name===r.project);a=o?o.id:r.project}await es.updatePayment(e,{projectId:a,purpose:r.purpose,process:r.process,itemName:r.itemName,amount:r.amount,materialAmount:r.materialAmount,laborAmount:r.laborAmount,originalMaterialAmount:r.originalMaterialAmount,originalLaborAmount:r.originalLaborAmount,category:r.category,urgency:r.urgency,bankInfo:r.bankInfo,notes:r.notes,requestDate:r.requestDate,includesVAT:r.includesVAT,applyTaxDeduction:r.applyTaxDeduction})}t(a=>({payments:a.payments.map(i=>i.id===e?{...i,...r}:i)}))}catch(a){throw console.error("Failed to update payment in API:",a),a}},deletePaymentFromAPI:async e=>{try{await es.deletePayment(e),t(r=>({payments:r.payments.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete payment from API:",r),r}},loadSchedulesFromAPI:async()=>{try{const e=await Un.getAllSchedules();console.log(" LOAD SCHEDULES - Raw API response sample:",e[0]);const r=e.map(a=>{var o;console.log(" Processing schedule:",{id:a._id,title:a.title,assigneeNames:a.assigneeNames,assignedTo:a.assignedTo,assignedToType:typeof a.assignedTo,assignedToLength:Array.isArray(a.assignedTo)?a.assignedTo.length:"not array"});const i=Array.isArray(a.assigneeNames)?a.assigneeNames:a.assigneeNames?typeof a.assigneeNames=="string"?a.assigneeNames.split(",").map(l=>l.trim()):[a.assigneeNames]:((o=a.assignedTo)==null?void 0:o.map(l=>typeof l=="object"?l.name:l))||[];return console.log(" Final attendees:",i),{id:a._id,title:a.title,start:new Date(a.startDate),end:new Date(a.endDate),type:a.type,project:typeof a.project=="object"?a.project.name:a.project,location:a.location,attendees:i,description:a.description,time:a.time}});t({schedules:r})}catch(e){throw console.error("Failed to load schedules from API:",e),e}},addScheduleToAPI:async e=>{var r;try{console.log(" addScheduleToAPI - Input schedule:",{project:e.project,attendees:e.attendees,title:e.title});const a=await Un.createSchedule({project:e.project||"",title:e.title,type:e.type,startDate:e.start,endDate:e.end,allDay:!e.time||e.time==="-",location:e.location,assignedTo:e.attendees||[],description:e.description,asRequestId:e.asRequestId,time:e.time});console.log(" addScheduleToAPI - API Response:",{id:a._id,assigneeNames:a.assigneeNames,assignedTo:a.assignedTo,project:a.project});const i=e.attendees||[];let o=a.assigneeNames||((r=a.assignedTo)==null?void 0:r.map(m=>typeof m=="object"?m.name:m))||[];i.length>0&&o.length>i.length&&(console.log(" Server added extra attendees, filtering to match request:",{requested:i,serverReturned:o}),o=i);const l={id:a._id,title:a.title,start:new Date(a.startDate),end:new Date(a.endDate),type:a.type,project:typeof a.project=="object"?a.project.name:a.project,location:a.location,attendees:o,description:a.description,time:a.time};console.log(" addScheduleToAPI - Final schedule attendees:",l.attendees),t(m=>({schedules:[l,...m.schedules]}))}catch(a){throw console.error("Failed to add schedule to API:",a),a}},updateScheduleInAPI:async(e,r)=>{var a,i,o;try{console.log(" updateScheduleInAPI called with:",{id:e,updatedSchedule:r});const l={};r.project!==void 0&&(l.project=r.project),r.title!==void 0&&(l.title=r.title),r.type!==void 0&&(l.type=r.type),r.start!==void 0&&(l.startDate=r.start),r.end!==void 0&&(l.endDate=r.end),r.location!==void 0&&(l.location=r.location),r.description!==void 0&&(l.description=r.description),r.attendees!==void 0&&(l.assignedTo=r.attendees),r.time!==void 0&&(l.time=r.time),console.log(" Sending update data:",l);const m=await Un.updateSchedule(e,l);console.log(" updateScheduleInAPI response:",m);const h={id:m._id,title:m.title,start:new Date(m.startDate),end:new Date(m.endDate),type:m.type,project:typeof m.project=="object"?m.project.name:m.project,location:m.location,attendees:m.assigneeNames||((a=m.assignedTo)==null?void 0:a.map(d=>typeof d=="object"?d.name:d))||[],description:m.description,time:m.time};t(d=>({schedules:d.schedules.map(p=>p.id===e?h:p)}))}catch(l){throw console.error("Failed to update schedule in API:",l),console.error("Error details:",{message:l instanceof Error?l.message:"Unknown error",response:l&&typeof l=="object"&&"response"in l?(i=l.response)==null?void 0:i.data:void 0,status:l&&typeof l=="object"&&"response"in l?(o=l.response)==null?void 0:o.status:void 0}),l}},deleteScheduleFromAPI:async e=>{try{await Un.deleteSchedule(e),t(r=>({schedules:r.schedules.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete schedule from API:",r),r}},loadProjectsFromAPI:async()=>{try{const r=(await Js.getAllProjects()).map(a=>{var i,o;return{id:a._id||a.id,name:a.name,client:typeof a.client=="object"?a.client.name:a.client||"",location:typeof a.location=="object"?a.location.address:a.location||a.address||"",status:a.status==="inProgress"?"in-progress":a.status==="onHold"?"on-hold":a.status,progress:a.progress||0,startDate:a.startDate||a.start_date?new Date(a.startDate||a.start_date):void 0,endDate:a.endDate||a.end_date?new Date(a.endDate||a.end_date):void 0,contractAmount:a.budget||a.contractAmount||0,spent:a.actualCost||a.spent||0,manager:a.manager||"",team:[],description:a.description||"",meetingNotes:((i=a.meetingNotes)==null?void 0:i.map(l=>({id:l.id,content:l.content,date:new Date(l.date)})))||[],customerRequests:((o=a.customerRequests)==null?void 0:o.map(l=>({id:l.id,content:l.content,completed:l.completed,createdAt:new Date(l.createdAt)})))||[],entrancePassword:a.entrancePassword||"",sitePassword:a.sitePassword||""}});t({projects:r})}catch(e){throw console.error("Failed to load projects from API:",e),e}},addProjectToAPI:async e=>{var r,a;try{const i=await Js.createProject({name:e.name,client:e.client,location:e.location,startDate:e.startDate,endDate:e.endDate,status:e.status,contractAmount:e.contractAmount,spent:e.spent,manager:e.manager,team:e.team,progress:e.progress,description:e.description}),o={id:i._id||i.id,name:i.name,client:typeof i.client=="object"?i.client.name:i.client||"",location:typeof i.location=="object"?i.location.address:i.location||i.address||"",status:i.status==="inProgress"?"in-progress":i.status==="onHold"?"on-hold":i.status,progress:i.progress||0,startDate:i.startDate||i.start_date?new Date(i.startDate||i.start_date):void 0,endDate:i.endDate||i.end_date?new Date(i.endDate||i.end_date):void 0,contractAmount:i.budget||i.contractAmount||0,spent:i.actualCost||i.spent||0,manager:i.manager||"",team:[],description:i.description||"",meetingNotes:((r=i.meetingNotes)==null?void 0:r.map(l=>({id:l.id,content:l.content,date:new Date(l.date)})))||[],customerRequests:((a=i.customerRequests)==null?void 0:a.map(l=>({id:l.id,content:l.content,completed:l.completed,createdAt:new Date(l.createdAt)})))||[],entrancePassword:i.entrancePassword||"",sitePassword:i.sitePassword||""};t(l=>({projects:[o,...l.projects]}))}catch(i){throw console.error("Failed to add project to API:",i),i}},updateProjectInAPI:async(e,r)=>{var a,i;try{const o=await Js.updateProject(e,r),l={id:o._id||o.id,name:o.name,client:typeof o.client=="object"?o.client.name:o.client||"",location:typeof o.location=="object"?o.location.address:o.location||o.address||"",status:o.status==="inProgress"?"in-progress":o.status==="onHold"?"on-hold":o.status,progress:o.progress||0,startDate:o.startDate||o.start_date?new Date(o.startDate||o.start_date):void 0,endDate:o.endDate||o.end_date?new Date(o.endDate||o.end_date):void 0,contractAmount:o.budget||o.contractAmount||0,spent:o.actualCost||o.spent||0,manager:o.manager||"",team:[],description:o.description||"",meetingNotes:((a=o.meetingNotes)==null?void 0:a.map(m=>({id:m.id,content:m.content,date:new Date(m.date)})))||[],customerRequests:((i=o.customerRequests)==null?void 0:i.map(m=>({id:m.id,content:m.content,completed:m.completed,createdAt:new Date(m.createdAt)})))||[],entrancePassword:o.entrancePassword||"",sitePassword:o.sitePassword||""};t(m=>({projects:m.projects.map(h=>h.id===e?l:h)}))}catch(o){throw console.error("Failed to update project in API:",o),o}},deleteProjectFromAPI:async e=>{try{await Js.deleteProject(e),t(r=>({projects:r.projects.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete project from API:",r),r}},loadContractorsFromAPI:async()=>{try{const r=(await Ns.getAllContractors()).map(a=>({id:a._id,rank:a.rank,companyName:a.companyName,name:a.name,process:a.process,contact:a.contact,accountNumber:a.accountNumber,notes:a.notes,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}));t({contractors:r})}catch(e){throw console.error("Failed to load contractors from API:",e),e}},addContractorToAPI:async e=>{try{const r=await Ns.createContractor({rank:e.rank,companyName:e.companyName,name:e.name,process:e.process,contact:e.contact,accountNumber:e.accountNumber,notes:e.notes}),a={id:r._id,rank:r.rank,companyName:r.companyName,name:r.name,process:r.process,contact:r.contact,accountNumber:r.accountNumber,notes:r.notes,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt)};t(i=>({contractors:[a,...i.contractors]}))}catch(r){throw console.error("Failed to add contractor to API:",r),r}},updateContractorInAPI:async(e,r)=>{try{const a=await Ns.updateContractor(e,{rank:r.rank,companyName:r.companyName,name:r.name,process:r.process,contact:r.contact,accountNumber:r.accountNumber,notes:r.notes}),i={id:a._id,rank:a.rank,companyName:a.companyName,name:a.name,process:a.process,contact:a.contact,accountNumber:a.accountNumber,notes:a.notes,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)};t(o=>({contractors:o.contractors.map(l=>l.id===e?i:l)}))}catch(a){throw console.error("Failed to update contractor in API:",a),a}},deleteContractorFromAPI:async e=>{try{await Ns.deleteContractor(e),t(r=>({contractors:r.contractors.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete contractor from API:",r),r}},loadConstructionPaymentsFromAPI:async()=>{try{const r=(await Sn.getAllConstructionPayments()).map(a=>{var o;let i;return a.expectedPaymentDates&&(i={contract:a.expectedPaymentDates.contract?new Date(a.expectedPaymentDates.contract):void 0,start:a.expectedPaymentDates.start?new Date(a.expectedPaymentDates.start):void 0,middle:a.expectedPaymentDates.middle?new Date(a.expectedPaymentDates.middle):void 0,final:a.expectedPaymentDates.final?new Date(a.expectedPaymentDates.final):void 0}),{id:a._id,project:a.project,client:a.client,totalAmount:a.totalAmount,vatType:a.vatType,vatPercentage:a.vatPercentage,vatAmount:a.vatAmount,expectedPaymentDates:i,payments:((o=a.payments)==null?void 0:o.map(l=>{var d;const m=l.date?new Date(l.date):new Date,h=isNaN(m.getTime())?new Date:m;return{type:l.type||((d=l.types)==null?void 0:d[0])||"",amount:l.amount,date:h,method:l.method,notes:l.notes}}))||[]}});t({constructionPayments:r})}catch(e){throw console.error("Failed to load construction payments from API:",e),e}},addConstructionPaymentToAPI:async e=>{var r;try{const a=await Sn.createConstructionPayment(e),i={id:a._id,project:a.project,client:a.client,totalAmount:a.totalAmount,vatType:a.vatType,vatPercentage:a.vatPercentage,vatAmount:a.vatAmount,payments:((r=a.payments)==null?void 0:r.map(o=>{var h;const l=o.date?new Date(o.date):new Date,m=isNaN(l.getTime())?new Date:l;return{type:o.type||((h=o.types)==null?void 0:h[0])||"",amount:o.amount,date:m,method:o.method,notes:o.notes}}))||[]};t(o=>({constructionPayments:[i,...o.constructionPayments]}))}catch(a){throw console.error("Failed to add construction payment to API:",a),a}},updateConstructionPaymentInAPI:async(e,r)=>{var a;try{const i=await Sn.updateConstructionPayment(e,r);let o;i.expectedPaymentDates&&(o={contract:i.expectedPaymentDates.contract?new Date(i.expectedPaymentDates.contract):void 0,start:i.expectedPaymentDates.start?new Date(i.expectedPaymentDates.start):void 0,middle:i.expectedPaymentDates.middle?new Date(i.expectedPaymentDates.middle):void 0,final:i.expectedPaymentDates.final?new Date(i.expectedPaymentDates.final):void 0});const l={id:i._id,project:i.project,client:i.client,totalAmount:i.totalAmount,vatType:i.vatType,vatPercentage:i.vatPercentage,vatAmount:i.vatAmount,expectedPaymentDates:o,payments:((a=i.payments)==null?void 0:a.map(m=>{var h;return{type:m.type||((h=m.types)==null?void 0:h[0])||"",amount:m.amount,date:new Date(m.date),method:m.method,notes:m.notes}}))||[]};t(m=>({constructionPayments:m.constructionPayments.map(h=>h.id===e?l:h)}))}catch(i){throw console.error("Failed to update construction payment in API:",i),i}},deleteConstructionPaymentFromAPI:async e=>{try{await Sn.deleteConstructionPayment(e),t(r=>({constructionPayments:r.constructionPayments.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete construction payment from API:",r),r}},loadASRequestsFromAPI:async()=>{try{const r=(await Nn.getAllASRequests()).map(a=>({id:a._id,project:a.project,client:a.client,requestDate:new Date(a.requestDate),siteAddress:a.siteAddress,entrancePassword:a.entrancePassword,description:a.description,scheduledVisitDate:a.scheduledVisitDate?new Date(a.scheduledVisitDate):void 0,scheduledVisitTime:a.scheduledVisitTime,assignedTo:a.assignedTo?Array.isArray(a.assignedTo)?a.assignedTo:[a.assignedTo]:[],completionDate:a.completionDate?new Date(a.completionDate):void 0,notes:a.notes,status:a.status||"pending"}));t({asRequests:r})}catch(e){throw console.error("Failed to load AS requests from API:",e),e}},addASRequestToAPI:async e=>{try{const r=await Nn.createASRequest(e),a={id:r._id,project:r.project,client:r.client,requestDate:new Date(r.requestDate),siteAddress:r.siteAddress,entrancePassword:r.entrancePassword,description:r.description,scheduledVisitDate:r.scheduledVisitDate?new Date(r.scheduledVisitDate):void 0,scheduledVisitTime:r.scheduledVisitTime,assignedTo:Array.isArray(r.assignedTo)?r.assignedTo:[],completionDate:r.completionDate?new Date(r.completionDate):void 0,notes:r.notes};return t(i=>({asRequests:[a,...i.asRequests]})),a}catch(r){throw console.error("Failed to add AS request to API:",r),r}},updateASRequestInAPI:async(e,r)=>{try{const a=await Nn.updateASRequest(e,r),i={id:a._id,project:a.project,client:a.client,requestDate:new Date(a.requestDate),siteAddress:a.siteAddress,entrancePassword:a.entrancePassword,description:a.description,scheduledVisitDate:a.scheduledVisitDate?new Date(a.scheduledVisitDate):void 0,scheduledVisitTime:a.scheduledVisitTime,assignedTo:Array.isArray(a.assignedTo)?a.assignedTo:[],completionDate:a.completionDate?new Date(a.completionDate):void 0,notes:a.notes,status:a.status||"pending"};t(o=>({asRequests:o.asRequests.map(l=>l.id===e?i:l)}))}catch(a){throw console.error("Failed to update AS request in API:",a),a}},deleteASRequestFromAPI:async e=>{try{await Nn.deleteASRequest(e),t(r=>({asRequests:r.asRequests.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete AS request from API:",r),r}},loadExecutionRecordsFromAPI:async()=>{try{const e=await Pn.getAllRecords();console.log("[loadExecutionRecordsFromAPI] Loaded",e.length,"records");const r=e.map(a=>({id:String(a.id),project:a.project_name,author:a.author||void 0,date:new Date(a.date),process:a.process||void 0,itemName:a.item_name,materialCost:a.material_cost||0,laborCost:a.labor_cost||0,vatAmount:a.vat_amount||0,totalAmount:a.total_amount||0,notes:a.notes||void 0,images:a.images||[],paymentId:a.payment_id?String(a.payment_id):void 0,includesTaxDeduction:a.includes_tax_deduction===1,includesVat:a.includes_vat===1,createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)}));t({executionRecords:r})}catch(e){throw console.error("Failed to load execution records from API:",e),e}},addExecutionRecordToAPI:async e=>{try{console.log("[addExecutionRecordToAPI] Adding:",e.itemName,"includesTaxDeduction:",e.includesTaxDeduction,"includesVat:",e.includesVat);const r=await Pn.createRecord({project_name:e.project,author:e.author,date:e.date.toISOString().split("T")[0],process:e.process,item_name:e.itemName,material_cost:e.materialCost,labor_cost:e.laborCost,vat_amount:e.vatAmount,total_amount:e.totalAmount,notes:e.notes,payment_id:e.paymentId,includes_tax_deduction:e.includesTaxDeduction,includes_vat:e.includesVat}),a={id:String(r.id),project:r.project_name,author:r.author||void 0,date:new Date(r.date),process:r.process||void 0,itemName:r.item_name,materialCost:r.material_cost||0,laborCost:r.labor_cost||0,vatAmount:r.vat_amount||0,totalAmount:r.total_amount||0,notes:r.notes||void 0,paymentId:r.payment_id?String(r.payment_id):void 0,includesTaxDeduction:r.includes_tax_deduction===1,includesVat:r.includes_vat===1,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at)};return console.log("[addExecutionRecordToAPI] newRecord includesVat:",a.includesVat,"from API:",r.includes_vat),t(i=>({executionRecords:[a,...i.executionRecords]})),console.log("[addExecutionRecordToAPI] Added with ID:",a.id),a}catch(r){throw console.error("Failed to add execution record to API:",r),r}},updateExecutionRecordInAPI:async(e,r)=>{console.log("[updateExecutionRecordInAPI] Called with id:",e,"record:",r);try{let a;if(r.date){const i=r.date instanceof Date?r.date:new Date(r.date);console.log("[updateExecutionRecordInAPI] Date conversion:",{original:r.date,converted:i,isValid:!isNaN(i.getTime())}),isNaN(i.getTime())||(a=i.toISOString().split("T")[0])}console.log("[updateExecutionRecordInAPI] Calling API with dateStr:",a,"includesTaxDeduction:",r.includesTaxDeduction,"includesVat:",r.includesVat),await Pn.updateRecord(e,{project_name:r.project,author:r.author,date:a,process:r.process,item_name:r.itemName,material_cost:r.materialCost,labor_cost:r.laborCost,vat_amount:r.vatAmount,total_amount:r.totalAmount,notes:r.notes,payment_id:r.paymentId,images:r.images,includes_tax_deduction:r.includesTaxDeduction,includes_vat:r.includesVat}),t(i=>({executionRecords:i.executionRecords.map(o=>o.id===e?{...o,...r,updatedAt:new Date}:o)}))}catch(a){throw console.error("Failed to update execution record in API:",a),a}},deleteExecutionRecordFromAPI:async e=>{try{await Pn.deleteRecord(e),t(r=>({executionRecords:r.executionRecords.filter(a=>a.id!==e)}))}catch(r){throw console.error("Failed to delete execution record from API:",r),r}}}),{name:"interior-management-storage",partialize:t=>({...t,payments:t.payments.map(s=>{const{images:e,...r}=s;return r}),executionRecords:t.executionRecords.map(s=>{const{images:e,...r}=s;return r})}),storage:{getItem:t=>{var m,h,d,p,u,N,j;const s=localStorage.getItem(t);if(!s)return null;const{state:e}=JSON.parse(s),r=((m=e.projects)==null?void 0:m.map(x=>({...x,startDate:x.startDate?new Date(x.startDate):void 0,endDate:x.endDate?new Date(x.endDate):void 0,contractAmount:x.contractAmount!==void 0?x.contractAmount:x.budget||0})))||[],a=((h=e.constructionPayments)==null?void 0:h.map(x=>{var A;return{...x,vatType:x.vatType||"percentage",vatPercentage:x.vatPercentage??100,vatAmount:x.vatAmount??0,payments:((A=x.payments)==null?void 0:A.map(L=>({...L,date:new Date(L.date)})))||[]}}))||[],i=new Set(a.map(x=>x.id)),o=r.filter(x=>!i.has(x.id)).map(x=>({id:x.id,project:x.name,client:x.client,totalAmount:x.contractAmount||0,vatType:"percentage",vatPercentage:100,vatAmount:0,payments:[]})),l=[...a,...o];return{state:{...e,projects:r,schedules:((d=e.schedules)==null?void 0:d.map(x=>({...x,start:new Date(x.start),end:new Date(x.end)})))||[],payments:((p=e.payments)==null?void 0:p.map(x=>({...x,requestDate:new Date(x.requestDate),approvalDate:x.approvalDate?new Date(x.approvalDate):void 0})))||[],contractors:((u=e.contractors)==null?void 0:u.map(x=>({...x,createdAt:new Date(x.createdAt),updatedAt:new Date(x.updatedAt)})))||[],constructionPayments:l,asRequests:((N=e.asRequests)==null?void 0:N.map(x=>({...x,requestDate:new Date(x.requestDate),scheduledVisitDate:x.scheduledVisitDate?new Date(x.scheduledVisitDate):void 0,completionDate:x.completionDate?new Date(x.completionDate):void 0})))||[],executionRecords:((j=e.executionRecords)==null?void 0:j.map(x=>({...x,date:new Date(x.date),createdAt:new Date(x.createdAt),updatedAt:new Date(x.updatedAt)})))||[]}}},setItem:(t,s)=>{try{const e=JSON.stringify(s);localStorage.setItem(t,e)}catch(e){console.error("[dataStore] localStorage  :",e),e instanceof DOMException&&e.name==="QuotaExceededError"&&console.warn("[dataStore] localStorage   -    ")}},removeItem:t=>localStorage.removeItem(t)}}));var En=t=>t.type==="checkbox",Rs=t=>t instanceof Date,Mt=t=>t==null;const co=t=>typeof t=="object";var Nt=t=>!Mt(t)&&!Array.isArray(t)&&co(t)&&!Rs(t),Xd=t=>Nt(t)&&t.target?En(t.target)?t.target.checked:t.target.value:t,Jd=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Gd=(t,s)=>t.has(Jd(s)),Zd=t=>{const s=t.constructor&&t.constructor.prototype;return Nt(s)&&s.hasOwnProperty("isPrototypeOf")},ma=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function wt(t){let s;const e=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(ma&&(t instanceof Blob||r))&&(e||Nt(t)))if(s=e?[]:Object.create(Object.getPrototypeOf(t)),!e&&!Zd(t))s=t;else for(const a in t)t.hasOwnProperty(a)&&(s[a]=wt(t[a]));else return t;return s}var lr=t=>/^\w*$/.test(t),ft=t=>t===void 0,ca=t=>Array.isArray(t)?t.filter(Boolean):[],da=t=>ca(t.replace(/["|']|\]/g,"").split(/\.|\[/)),xe=(t,s,e)=>{if(!s||!Nt(t))return e;const r=(lr(s)?[s]:da(s)).reduce((a,i)=>Mt(a)?a:a[i],t);return ft(r)||r===t?ft(t[s])?e:t[s]:r},os=t=>typeof t=="boolean",ot=(t,s,e)=>{let r=-1;const a=lr(s)?[s]:da(s),i=a.length,o=i-1;for(;++r<i;){const l=a[r];let m=e;if(r!==o){const h=t[l];m=Nt(h)||Array.isArray(h)?h:isNaN(+a[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=m,t=t[l]}};const $a={BLUR:"blur",FOCUS_OUT:"focusout"},ts={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},hs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},eu=Oe.createContext(null);eu.displayName="HookFormContext";var tu=(t,s,e,r=!0)=>{const a={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const o=i;return s._proxyFormState[o]!==ts.all&&(s._proxyFormState[o]=!r||ts.all),t[o]}});return a};const su=typeof window<"u"?Oe.useLayoutEffect:Oe.useEffect;var Yt=t=>typeof t=="string",nu=(t,s,e,r,a)=>Yt(t)?(r&&s.watch.add(t),xe(e,t,a)):Array.isArray(t)?t.map(i=>(r&&s.watch.add(i),xe(e,i))):(r&&(s.watchAll=!0),e),Fr=t=>Mt(t)||!co(t);function _s(t,s,e=new WeakSet){if(Fr(t)||Fr(s))return t===s;if(Rs(t)&&Rs(s))return t.getTime()===s.getTime();const r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;if(e.has(t)||e.has(s))return!0;e.add(t),e.add(s);for(const i of r){const o=t[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=s[i];if(Rs(o)&&Rs(l)||Nt(o)&&Nt(l)||Array.isArray(o)&&Array.isArray(l)?!_s(o,l,e):o!==l)return!1}}return!0}var ru=(t,s,e,r,a)=>s?{...e[t],types:{...e[t]&&e[t].types?e[t].types:{},[r]:a||!0}}:{},xn=t=>Array.isArray(t)?t:[t],Wa=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}};function uo(t,s){const e={};for(const r in t)if(t.hasOwnProperty(r)){const a=t[r],i=s[r];if(a&&Nt(a)&&i){const o=uo(a,i);Nt(o)&&(e[r]=o)}else t[r]&&(e[r]=i)}return e}var Ot=t=>Nt(t)&&!Object.keys(t).length,ua=t=>t.type==="file",ss=t=>typeof t=="function",Zn=t=>{if(!ma)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},po=t=>t.type==="select-multiple",pa=t=>t.type==="radio",au=t=>pa(t)||En(t),Cr=t=>Zn(t)&&t.isConnected;function iu(t,s){const e=s.slice(0,-1).length;let r=0;for(;r<e;)t=ft(t)?r++:t[s[r++]];return t}function ou(t){for(const s in t)if(t.hasOwnProperty(s)&&!ft(t[s]))return!1;return!0}function pt(t,s){const e=Array.isArray(s)?s:lr(s)?[s]:da(s),r=e.length===1?t:iu(t,e),a=e.length-1,i=e[a];return r&&delete r[i],a!==0&&(Nt(r)&&Ot(r)||Array.isArray(r)&&ou(r))&&pt(t,e.slice(0,-1)),t}var lu=t=>{for(const s in t)if(ss(t[s]))return!0;return!1};function fo(t){return Array.isArray(t)||Nt(t)&&!lu(t)}function Or(t,s={}){for(const e in t)fo(t[e])?(s[e]=Array.isArray(t[e])?[]:{},Or(t[e],s[e])):Mt(t[e])||(s[e]=!0);return s}function Xs(t,s,e){e||(e=Or(s));for(const r in t)fo(t[r])?ft(s)||Fr(e[r])?e[r]=Or(t[r],Array.isArray(t[r])?[]:{}):Xs(t[r],Mt(s)?{}:s[r],e[r]):e[r]=!_s(t[r],s[r]);return e}const za={value:!1,isValid:!1},Ya={value:!0,isValid:!0};var go=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ft(t[0].attributes.value)?ft(t[0].value)||t[0].value===""?Ya:{value:t[0].value,isValid:!0}:Ya:za}return za},ho=(t,{valueAsNumber:s,valueAsDate:e,setValueAs:r})=>ft(t)?t:s?t===""?NaN:t&&+t:e&&Yt(t)?new Date(t):r?r(t):t;const Ka={isValid:!1,value:null};var bo=t=>Array.isArray(t)?t.reduce((s,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:s,Ka):Ka;function Qa(t){const s=t.ref;return ua(s)?s.files:pa(s)?bo(t.refs).value:po(s)?[...s.selectedOptions].map(({value:e})=>e):En(s)?go(t.refs).value:ho(ft(s.value)?t.ref.value:s.value,t)}var mu=(t,s,e,r)=>{const a={};for(const i of t){const o=xe(s,i);o&&ot(a,i,o._f)}return{criteriaMode:e,names:[...t],fields:a,shouldUseNativeValidation:r}},er=t=>t instanceof RegExp,un=t=>ft(t)?t:er(t)?t.source:Nt(t)?er(t.value)?t.value.source:t.value:t,Xa=t=>({isOnSubmit:!t||t===ts.onSubmit,isOnBlur:t===ts.onBlur,isOnChange:t===ts.onChange,isOnAll:t===ts.all,isOnTouch:t===ts.onTouched});const Ja="AsyncFunction";var cu=t=>!!t&&!!t.validate&&!!(ss(t.validate)&&t.validate.constructor.name===Ja||Nt(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===Ja)),du=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Ga=(t,s,e)=>!e&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const vn=(t,s,e,r)=>{for(const a of e||Object.keys(t)){const i=xe(t,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&s(o.refs[0],a)&&!r)return!0;if(o.ref&&s(o.ref,o.name)&&!r)return!0;if(vn(l,s))break}else if(Nt(l)&&vn(l,s))break}}};function Za(t,s,e){const r=xe(t,e);if(r||lr(e))return{error:r,name:e};const a=e.split(".");for(;a.length;){const i=a.join("."),o=xe(s,i),l=xe(t,i);if(o&&!Array.isArray(o)&&e!==i)return{name:e};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:e}}var uu=(t,s,e,r)=>{e(t);const{name:a,...i}=t;return Ot(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(o=>s[o]===(!r||ts.all))},pu=(t,s,e)=>!t||!s||t===s||xn(t).some(r=>r&&(e?r===s:r.startsWith(s)||s.startsWith(r))),fu=(t,s,e,r,a)=>a.isOnAll?!1:!e&&a.isOnTouch?!(s||t):(e?r.isOnBlur:a.isOnBlur)?!t:(e?r.isOnChange:a.isOnChange)?t:!0,gu=(t,s)=>!ca(xe(t,s)).length&&pt(t,s),hu=(t,s,e)=>{const r=xn(xe(t,e));return ot(r,"root",s[e]),ot(t,e,r),t};function ei(t,s,e="validate"){if(Yt(t)||Array.isArray(t)&&t.every(Yt)||os(t)&&!t)return{type:e,message:Yt(t)?t:"",ref:s}}var Ys=t=>Nt(t)&&!er(t)?t:{value:t,message:""},ti=async(t,s,e,r,a,i)=>{const{ref:o,refs:l,required:m,maxLength:h,minLength:d,min:p,max:u,pattern:N,validate:j,name:x,valueAsNumber:A,mount:L}=t._f,k=xe(e,x);if(!L||s.has(x))return{};const F=l?l[0]:o,me=R=>{a&&F.reportValidity&&(F.setCustomValidity(os(R)?"":R||""),F.reportValidity())},Q={},T=pa(o),ie=En(o),_=T||ie,le=(A||ua(o))&&ft(o.value)&&ft(k)||Zn(o)&&o.value===""||k===""||Array.isArray(k)&&!k.length,ve=ru.bind(null,x,r,Q),oe=(R,ne,be,je=hs.maxLength,Se=hs.minLength)=>{const Ee=R?ne:be;Q[x]={type:R?je:Se,message:Ee,ref:o,...ve(R?je:Se,Ee)}};if(i?!Array.isArray(k)||!k.length:m&&(!_&&(le||Mt(k))||os(k)&&!k||ie&&!go(l).isValid||T&&!bo(l).isValid)){const{value:R,message:ne}=Yt(m)?{value:!!m,message:m}:Ys(m);if(R&&(Q[x]={type:hs.required,message:ne,ref:F,...ve(hs.required,ne)},!r))return me(ne),Q}if(!le&&(!Mt(p)||!Mt(u))){let R,ne;const be=Ys(u),je=Ys(p);if(!Mt(k)&&!isNaN(k)){const Se=o.valueAsNumber||k&&+k;Mt(be.value)||(R=Se>be.value),Mt(je.value)||(ne=Se<je.value)}else{const Se=o.valueAsDate||new Date(k),Ee=tt=>new Date(new Date().toDateString()+" "+tt),et=o.type=="time",ze=o.type=="week";Yt(be.value)&&k&&(R=et?Ee(k)>Ee(be.value):ze?k>be.value:Se>new Date(be.value)),Yt(je.value)&&k&&(ne=et?Ee(k)<Ee(je.value):ze?k<je.value:Se<new Date(je.value))}if((R||ne)&&(oe(!!R,be.message,je.message,hs.max,hs.min),!r))return me(Q[x].message),Q}if((h||d)&&!le&&(Yt(k)||i&&Array.isArray(k))){const R=Ys(h),ne=Ys(d),be=!Mt(R.value)&&k.length>+R.value,je=!Mt(ne.value)&&k.length<+ne.value;if((be||je)&&(oe(be,R.message,ne.message),!r))return me(Q[x].message),Q}if(N&&!le&&Yt(k)){const{value:R,message:ne}=Ys(N);if(er(R)&&!k.match(R)&&(Q[x]={type:hs.pattern,message:ne,ref:o,...ve(hs.pattern,ne)},!r))return me(ne),Q}if(j){if(ss(j)){const R=await j(k,e),ne=ei(R,F);if(ne&&(Q[x]={...ne,...ve(hs.validate,ne.message)},!r))return me(ne.message),Q}else if(Nt(j)){let R={};for(const ne in j){if(!Ot(R)&&!r)break;const be=ei(await j[ne](k,e),F,ne);be&&(R={...be,...ve(ne,be.message)},me(be.message),r&&(Q[x]=R))}if(!Ot(R)&&(Q[x]={ref:F,...R},!r))return Q}}return me(!0),Q};const bu={mode:ts.onSubmit,reValidateMode:ts.onChange,shouldFocusError:!0};function Nu(t={}){let s={...bu,...t},e={submitCount:0,isDirty:!1,isReady:!1,isLoading:ss(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},a=Nt(s.defaultValues)||Nt(s.values)?wt(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:wt(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},m,h=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...d};const u={array:Wa(),state:Wa()},N=s.criteriaMode===ts.all,j=v=>B=>{clearTimeout(h),h=setTimeout(v,B)},x=async v=>{if(!s.disabled&&(d.isValid||p.isValid||v)){const B=s.resolver?Ot((await ie()).errors):await le(r,!0);B!==e.isValid&&u.state.next({isValid:B})}},A=(v,B)=>{!s.disabled&&(d.isValidating||d.validatingFields||p.isValidating||p.validatingFields)&&((v||Array.from(l.mount)).forEach(I=>{I&&(B?ot(e.validatingFields,I,B):pt(e.validatingFields,I))}),u.state.next({validatingFields:e.validatingFields,isValidating:!Ot(e.validatingFields)}))},L=(v,B=[],I,J,G=!0,Z=!0)=>{if(J&&I&&!s.disabled){if(o.action=!0,Z&&Array.isArray(xe(r,v))){const pe=I(xe(r,v),J.argA,J.argB);G&&ot(r,v,pe)}if(Z&&Array.isArray(xe(e.errors,v))){const pe=I(xe(e.errors,v),J.argA,J.argB);G&&ot(e.errors,v,pe),gu(e.errors,v)}if((d.touchedFields||p.touchedFields)&&Z&&Array.isArray(xe(e.touchedFields,v))){const pe=I(xe(e.touchedFields,v),J.argA,J.argB);G&&ot(e.touchedFields,v,pe)}(d.dirtyFields||p.dirtyFields)&&(e.dirtyFields=Xs(a,i)),u.state.next({name:v,isDirty:oe(v,B),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else ot(i,v,B)},k=(v,B)=>{ot(e.errors,v,B),u.state.next({errors:e.errors})},F=v=>{e.errors=v,u.state.next({errors:e.errors,isValid:!1})},me=(v,B,I,J)=>{const G=xe(r,v);if(G){const Z=xe(i,v,ft(I)?xe(a,v):I);ft(Z)||J&&J.defaultChecked||B?ot(i,v,B?Z:Qa(G._f)):be(v,Z),o.mount&&x()}},Q=(v,B,I,J,G)=>{let Z=!1,pe=!1;const _e={name:v};if(!s.disabled){if(!I||J){(d.isDirty||p.isDirty)&&(pe=e.isDirty,e.isDirty=_e.isDirty=oe(),Z=pe!==_e.isDirty);const re=_s(xe(a,v),B);pe=!!xe(e.dirtyFields,v),re?pt(e.dirtyFields,v):ot(e.dirtyFields,v,!0),_e.dirtyFields=e.dirtyFields,Z=Z||(d.dirtyFields||p.dirtyFields)&&pe!==!re}if(I){const re=xe(e.touchedFields,v);re||(ot(e.touchedFields,v,I),_e.touchedFields=e.touchedFields,Z=Z||(d.touchedFields||p.touchedFields)&&re!==I)}Z&&G&&u.state.next(_e)}return Z?_e:{}},T=(v,B,I,J)=>{const G=xe(e.errors,v),Z=(d.isValid||p.isValid)&&os(B)&&e.isValid!==B;if(s.delayError&&I?(m=j(()=>k(v,I)),m(s.delayError)):(clearTimeout(h),m=null,I?ot(e.errors,v,I):pt(e.errors,v)),(I?!_s(G,I):G)||!Ot(J)||Z){const pe={...J,...Z&&os(B)?{isValid:B}:{},errors:e.errors,name:v};e={...e,...pe},u.state.next(pe)}},ie=async v=>{A(v,!0);const B=await s.resolver(i,s.context,mu(v||l.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return A(v),B},_=async v=>{const{errors:B}=await ie(v);if(v)for(const I of v){const J=xe(B,I);J?ot(e.errors,I,J):pt(e.errors,I)}else e.errors=B;return B},le=async(v,B,I={valid:!0})=>{for(const J in v){const G=v[J];if(G){const{_f:Z,...pe}=G;if(Z){const _e=l.array.has(Z.name),re=G._f&&cu(G._f);re&&d.validatingFields&&A([Z.name],!0);const q=await ti(G,l.disabled,i,N,s.shouldUseNativeValidation&&!B,_e);if(re&&d.validatingFields&&A([Z.name]),q[Z.name]&&(I.valid=!1,B))break;!B&&(xe(q,Z.name)?_e?hu(e.errors,q,Z.name):ot(e.errors,Z.name,q[Z.name]):pt(e.errors,Z.name))}!Ot(pe)&&await le(pe,B,I)}}return I.valid},ve=()=>{for(const v of l.unMount){const B=xe(r,v);B&&(B._f.refs?B._f.refs.every(I=>!Cr(I)):!Cr(B._f.ref))&&Te(v)}l.unMount=new Set},oe=(v,B)=>!s.disabled&&(v&&B&&ot(i,v,B),!_s(tt(),a)),R=(v,B,I)=>nu(v,l,{...o.mount?i:ft(B)?a:Yt(v)?{[v]:B}:B},I,B),ne=v=>ca(xe(o.mount?i:a,v,s.shouldUnregister?xe(a,v,[]):[])),be=(v,B,I={})=>{const J=xe(r,v);let G=B;if(J){const Z=J._f;Z&&(!Z.disabled&&ot(i,v,ho(B,Z)),G=Zn(Z.ref)&&Mt(B)?"":B,po(Z.ref)?[...Z.ref.options].forEach(pe=>pe.selected=G.includes(pe.value)):Z.refs?En(Z.ref)?Z.refs.forEach(pe=>{(!pe.defaultChecked||!pe.disabled)&&(Array.isArray(G)?pe.checked=!!G.find(_e=>_e===pe.value):pe.checked=G===pe.value||!!G)}):Z.refs.forEach(pe=>pe.checked=pe.value===G):ua(Z.ref)?Z.ref.value="":(Z.ref.value=G,Z.ref.type||u.state.next({name:v,values:wt(i)})))}(I.shouldDirty||I.shouldTouch)&&Q(v,G,I.shouldTouch,I.shouldDirty,!0),I.shouldValidate&&ze(v)},je=(v,B,I)=>{for(const J in B){if(!B.hasOwnProperty(J))return;const G=B[J],Z=v+"."+J,pe=xe(r,Z);(l.array.has(v)||Nt(G)||pe&&!pe._f)&&!Rs(G)?je(Z,G,I):be(Z,G,I)}},Se=(v,B,I={})=>{const J=xe(r,v),G=l.array.has(v),Z=wt(B);ot(i,v,Z),G?(u.array.next({name:v,values:wt(i)}),(d.isDirty||d.dirtyFields||p.isDirty||p.dirtyFields)&&I.shouldDirty&&u.state.next({name:v,dirtyFields:Xs(a,i),isDirty:oe(v,Z)})):J&&!J._f&&!Mt(Z)?je(v,Z,I):be(v,Z,I),Ga(v,l)&&u.state.next({...e,name:v}),u.state.next({name:o.mount?v:void 0,values:wt(i)})},Ee=async v=>{o.mount=!0;const B=v.target;let I=B.name,J=!0;const G=xe(r,I),Z=re=>{J=Number.isNaN(re)||Rs(re)&&isNaN(re.getTime())||_s(re,xe(i,I,re))},pe=Xa(s.mode),_e=Xa(s.reValidateMode);if(G){let re,q;const D=B.type?Qa(G._f):Xd(v),Y=v.type===$a.BLUR||v.type===$a.FOCUS_OUT,ue=!du(G._f)&&!s.resolver&&!xe(e.errors,I)&&!G._f.deps||fu(Y,xe(e.touchedFields,I),e.isSubmitted,_e,pe),he=Ga(I,l,Y);ot(i,I,D),Y?(!B||!B.readOnly)&&(G._f.onBlur&&G._f.onBlur(v),m&&m(0)):G._f.onChange&&G._f.onChange(v);const X=Q(I,D,Y),Je=!Ot(X)||he;if(!Y&&u.state.next({name:I,type:v.type,values:wt(i)}),ue)return(d.isValid||p.isValid)&&(s.mode==="onBlur"?Y&&x():Y||x()),Je&&u.state.next({name:I,...he?{}:X});if(!Y&&he&&u.state.next({...e}),s.resolver){const{errors:Fe}=await ie([I]);if(Z(D),J){const at=Za(e.errors,r,I),Lt=Za(Fe,r,at.name||I);re=Lt.error,I=Lt.name,q=Ot(Fe)}}else A([I],!0),re=(await ti(G,l.disabled,i,N,s.shouldUseNativeValidation))[I],A([I]),Z(D),J&&(re?q=!1:(d.isValid||p.isValid)&&(q=await le(r,!0)));J&&(G._f.deps&&(!Array.isArray(G._f.deps)||G._f.deps.length>0)&&ze(G._f.deps),T(I,q,re,X))}},et=(v,B)=>{if(xe(e.errors,B)&&v.focus)return v.focus(),1},ze=async(v,B={})=>{let I,J;const G=xn(v);if(s.resolver){const Z=await _(ft(v)?v:G);I=Ot(Z),J=v?!G.some(pe=>xe(Z,pe)):I}else v?(J=(await Promise.all(G.map(async Z=>{const pe=xe(r,Z);return await le(pe&&pe._f?{[Z]:pe}:pe)}))).every(Boolean),!(!J&&!e.isValid)&&x()):J=I=await le(r);return u.state.next({...!Yt(v)||(d.isValid||p.isValid)&&I!==e.isValid?{}:{name:v},...s.resolver||!v?{isValid:I}:{},errors:e.errors}),B.shouldFocus&&!J&&vn(r,et,v?G:l.mount),J},tt=(v,B)=>{let I={...o.mount?i:a};return B&&(I=uo(B.dirtyFields?e.dirtyFields:e.touchedFields,I)),ft(v)?I:Yt(v)?xe(I,v):v.map(J=>xe(I,J))},z=(v,B)=>({invalid:!!xe((B||e).errors,v),isDirty:!!xe((B||e).dirtyFields,v),error:xe((B||e).errors,v),isValidating:!!xe(e.validatingFields,v),isTouched:!!xe((B||e).touchedFields,v)}),we=v=>{v&&xn(v).forEach(B=>pt(e.errors,B)),u.state.next({errors:v?e.errors:{}})},se=(v,B,I)=>{const J=(xe(r,v,{_f:{}})._f||{}).ref,G=xe(e.errors,v)||{},{ref:Z,message:pe,type:_e,...re}=G;ot(e.errors,v,{...re,...B,ref:J}),u.state.next({name:v,errors:e.errors,isValid:!1}),I&&I.shouldFocus&&J&&J.focus&&J.focus()},Ve=(v,B)=>ss(v)?u.state.subscribe({next:I=>"values"in I&&v(R(void 0,B),I)}):R(v,B,!0),Me=v=>u.state.subscribe({next:B=>{pu(v.name,B.name,v.exact)&&uu(B,v.formState||d,Xe,v.reRenderRoot)&&v.callback({values:{...i},...e,...B,defaultValues:a})}}).unsubscribe,Ye=v=>(o.mount=!0,p={...p,...v.formState},Me({...v,formState:p})),Te=(v,B={})=>{for(const I of v?xn(v):l.mount)l.mount.delete(I),l.array.delete(I),B.keepValue||(pt(r,I),pt(i,I)),!B.keepError&&pt(e.errors,I),!B.keepDirty&&pt(e.dirtyFields,I),!B.keepTouched&&pt(e.touchedFields,I),!B.keepIsValidating&&pt(e.validatingFields,I),!s.shouldUnregister&&!B.keepDefaultValue&&pt(a,I);u.state.next({values:wt(i)}),u.state.next({...e,...B.keepDirty?{isDirty:oe()}:{}}),!B.keepIsValid&&x()},st=({disabled:v,name:B})=>{(os(v)&&o.mount||v||l.disabled.has(B))&&(v?l.disabled.add(B):l.disabled.delete(B))},Be=(v,B={})=>{let I=xe(r,v);const J=os(B.disabled)||os(s.disabled);return ot(r,v,{...I||{},_f:{...I&&I._f?I._f:{ref:{name:v}},name:v,mount:!0,...B}}),l.mount.add(v),I?st({disabled:os(B.disabled)?B.disabled:s.disabled,name:v}):me(v,!0,B.value),{...J?{disabled:B.disabled||s.disabled}:{},...s.progressive?{required:!!B.required,min:un(B.min),max:un(B.max),minLength:un(B.minLength),maxLength:un(B.maxLength),pattern:un(B.pattern)}:{},name:v,onChange:Ee,onBlur:Ee,ref:G=>{if(G){Be(v,B),I=xe(r,v);const Z=ft(G.value)&&G.querySelectorAll&&G.querySelectorAll("input,select,textarea")[0]||G,pe=au(Z),_e=I._f.refs||[];if(pe?_e.find(re=>re===Z):Z===I._f.ref)return;ot(r,v,{_f:{...I._f,...pe?{refs:[..._e.filter(Cr),Z,...Array.isArray(xe(a,v))?[{}]:[]],ref:{type:Z.type,name:v}}:{ref:Z}}}),me(v,!1,void 0,Z)}else I=xe(r,v,{}),I._f&&(I._f.mount=!1),(s.shouldUnregister||B.shouldUnregister)&&!(Gd(l.array,v)&&o.action)&&l.unMount.add(v)}}},qe=()=>s.shouldFocusError&&vn(r,et,l.mount),Dt=v=>{os(v)&&(u.state.next({disabled:v}),vn(r,(B,I)=>{const J=xe(r,I);J&&(B.disabled=J._f.disabled||v,Array.isArray(J._f.refs)&&J._f.refs.forEach(G=>{G.disabled=J._f.disabled||v}))},0,!1))},H=(v,B)=>async I=>{let J;I&&(I.preventDefault&&I.preventDefault(),I.persist&&I.persist());let G=wt(i);if(u.state.next({isSubmitting:!0}),s.resolver){const{errors:Z,values:pe}=await ie();e.errors=Z,G=wt(pe)}else await le(r);if(l.disabled.size)for(const Z of l.disabled)pt(G,Z);if(pt(e.errors,"root"),Ot(e.errors)){u.state.next({errors:{}});try{await v(G,I)}catch(Z){J=Z}}else B&&await B({...e.errors},I),qe(),setTimeout(qe);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ot(e.errors)&&!J,submitCount:e.submitCount+1,errors:e.errors}),J)throw J},ke=(v,B={})=>{xe(r,v)&&(ft(B.defaultValue)?Se(v,wt(xe(a,v))):(Se(v,B.defaultValue),ot(a,v,wt(B.defaultValue))),B.keepTouched||pt(e.touchedFields,v),B.keepDirty||(pt(e.dirtyFields,v),e.isDirty=B.defaultValue?oe(v,wt(xe(a,v))):oe()),B.keepError||(pt(e.errors,v),d.isValid&&x()),u.state.next({...e}))},Ce=(v,B={})=>{const I=v?wt(v):a,J=wt(I),G=Ot(v),Z=G?a:J;if(B.keepDefaultValues||(a=I),!B.keepValues){if(B.keepDirtyValues){const pe=new Set([...l.mount,...Object.keys(Xs(a,i))]);for(const _e of Array.from(pe))xe(e.dirtyFields,_e)?ot(Z,_e,xe(i,_e)):Se(_e,xe(Z,_e))}else{if(ma&&ft(v))for(const pe of l.mount){const _e=xe(r,pe);if(_e&&_e._f){const re=Array.isArray(_e._f.refs)?_e._f.refs[0]:_e._f.ref;if(Zn(re)){const q=re.closest("form");if(q){q.reset();break}}}}if(B.keepFieldsRef)for(const pe of l.mount)Se(pe,xe(Z,pe));else r={}}i=s.shouldUnregister?B.keepDefaultValues?wt(a):{}:wt(Z),u.array.next({values:{...Z}}),u.state.next({values:{...Z}})}l={mount:B.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!s.shouldUnregister,u.state.next({submitCount:B.keepSubmitCount?e.submitCount:0,isDirty:G?!1:B.keepDirty?e.isDirty:!!(B.keepDefaultValues&&!_s(v,a)),isSubmitted:B.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:G?{}:B.keepDirtyValues?B.keepDefaultValues&&i?Xs(a,i):e.dirtyFields:B.keepDefaultValues&&v?Xs(a,v):B.keepDirty?e.dirtyFields:{},touchedFields:B.keepTouched?e.touchedFields:{},errors:B.keepErrors?e.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ge=(v,B)=>Ce(ss(v)?v(i):v,B),Ie=(v,B={})=>{const I=xe(r,v),J=I&&I._f;if(J){const G=J.refs?J.refs[0]:J.ref;G.focus&&(G.focus(),B.shouldSelect&&ss(G.select)&&G.select())}},Xe=v=>{e={...e,...v}},$e={control:{register:Be,unregister:Te,getFieldState:z,handleSubmit:H,setError:se,_subscribe:Me,_runSchema:ie,_focusError:qe,_getWatch:R,_getDirty:oe,_setValid:x,_setFieldArray:L,_setDisabledField:st,_setErrors:F,_getFieldArray:ne,_reset:Ce,_resetDefaultValues:()=>ss(s.defaultValues)&&s.defaultValues().then(v=>{ge(v,s.resetOptions),u.state.next({isLoading:!1})}),_removeUnmounted:ve,_disableForm:Dt,_subjects:u,_proxyFormState:d,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(v){o=v},get _defaultValues(){return a},get _names(){return l},set _names(v){l=v},get _formState(){return e},get _options(){return s},set _options(v){s={...s,...v}}},subscribe:Ye,trigger:ze,register:Be,handleSubmit:H,watch:Ve,setValue:Se,getValues:tt,reset:ge,resetField:ke,clearErrors:we,unregister:Te,setError:se,setFocus:Ie,getFieldState:z};return{...$e,formControl:$e}}function fa(t={}){const s=Oe.useRef(void 0),e=Oe.useRef(void 0),[r,a]=Oe.useState({isDirty:!1,isValidating:!1,isLoading:ss(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ss(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!ss(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=Nu(t);s.current={...l,formState:r}}const i=s.current.control;return i._options=t,su(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),Oe.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Oe.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Oe.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Oe.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Oe.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),Oe.useEffect(()=>{t.values&&!_s(t.values,e.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),e.current=t.values,a(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),Oe.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=tu(r,i),s.current}const si=["","","","","","",""],No=({event:t,slotInfo:s,defaultProjectName:e,onClose:r,onSave:a,onDelete:i})=>{const[o,l]=b.useState(!1),{register:m,handleSubmit:h,setValue:d,watch:p,formState:{errors:u},reset:N}=fa({defaultValues:{projectId:"",title:"",date:"",description:""}}),{projects:j}=Os(),[x,A]=b.useState([]),[L,k]=b.useState(""),[F,me]=b.useState(!1),[Q,T]=b.useState(""),[ie,_]=b.useState(9),[le,ve]=b.useState(0),[oe,R]=b.useState(""),ne=p("projectId");b.useEffect(()=>{if(ne){const z=j.find(we=>we.id===ne||we.id===parseInt(ne)||we.id.toString()===ne.toString());console.log(" Selected project:",z==null?void 0:z.name),console.log(" Project team:",z==null?void 0:z.team),console.log(" Current selectedMembers:",x)}},[ne,j,x]),b.useEffect(()=>{console.log(" Modal mount - initializing states"),A([]),R(""),k("")},[]),b.useEffect(()=>{if(console.log(" ScheduleModal useEffect triggered:",{hasEvent:!!t,eventId:t==null?void 0:t.id,hasSlotInfo:!!s,hasMergedEvents:!!(t!=null&&t.mergedEventIds)}),t&&t.id){console.log(" ScheduleModal processing event:",{title:t.title,projectId:t.projectId,projectName:t.projectName,start:t.start,assignedTo:t.assignedTo,time:t.time});const z=t.originalTitle||t.title,we=/ - (|) \d{1,2}$/,se=z.replace(we,"");if(d("title",se,{shouldValidate:!1,shouldDirty:!1}),d("date",Ze(t.start,"yyyy-MM-dd"),{shouldValidate:!1,shouldDirty:!1}),d("description",t.description||"",{shouldValidate:!1,shouldDirty:!1}),t.projectId&&t.projectId!==""&&t.projectId!=="undefined")console.log(" Setting projectId from event:",t.projectId),d("projectId",t.projectId,{shouldValidate:!1,shouldDirty:!1}),R("");else if(t.projectName){const Me=j.find(Ye=>Ye.name===t.projectName);console.log(" Finding project by name:",t.projectName,"found:",Me),Me?(console.log(" Setting projectId from found project:",Me.id),d("projectId",Me.id,{shouldValidate:!1,shouldDirty:!1}),R("")):(console.log(" Project not found, leaving empty"),d("projectId","",{shouldValidate:!1,shouldDirty:!1}),R(""))}else console.log(" No project info, leaving empty"),d("projectId","",{shouldValidate:!1,shouldDirty:!1}),R("");const Ve=t.assignedTo||t.attendees||[];if(console.log(" Setting selectedMembers to:",Ve),A(Array.isArray(Ve)?Ve:[]),t.time&&t.time!=="-"){console.log(" Setting time from event:",{eventTime:t.time,parsedHours:t.time.split(":")[0],parsedMinutes:t.time.split(":")[1]}),me(!0);const[Me,Ye]=t.time.split(":"),Te=parseInt(Me,10),st=parseInt(Ye,10);Te>=12?(T(""),_(Te===12?12:Te-12)):(T(""),_(Te===0?12:Te)),ve(st),console.log(" Time state set:",{hasTime:!0,period:Te>=12?"":"",hour:Te>=12?Te===12?12:Te-12:Te===0?12:Te,minute:st})}else console.log(" No time in event, setting hasTime to false"),me(!1),T(""),_(9),ve(0)}else if(s&&!t&&(console.log(" New schedule from slot:",s),N({projectId:"",title:"",date:Ze(s.start,"yyyy-MM-dd"),description:""}),console.log(" New schedule - resetting selectedMembers to empty array"),A([]),R(""),e)){const z=j.find(we=>we.name===e);z&&d("projectId",z.id,{shouldValidate:!1,shouldDirty:!1})}},[t==null?void 0:t.id]);const be=z=>{console.log(" toggleMember called with:",z),console.log(" Current selectedMembers before toggle:",x),A(we=>{console.log(" Previous members in setState:",we);const se=we.includes(z)?we.filter(Ve=>Ve!==z):[...we,z];return console.log(" Updated members after toggle:",se),se})},je=()=>{const z="HV LAB";x.includes(z)?A(we=>we.filter(se=>se!==z)):A(we=>[...we.filter(se=>se!==""),z])},Se=()=>{const z="";x.includes(z)?A(we=>we.filter(se=>se!==z)):A(we=>[...we,z])},Ee=()=>{const z="";x.includes(z)?A(we=>we.filter(se=>se!==z)):A(we=>[...we,z])},et=()=>{L.trim()&&!x.includes(L.trim())&&(A(z=>[...z,L.trim()]),k(""))},ze=z=>{A(we=>we.filter(se=>se!==z))},tt=async z=>{console.log(" Form onSubmit called with data:",z),console.log(" selectedMembers:",x),console.log(" hasTime state:",F),console.log(" timePeriod:",Q,"timeHour:",ie,"timeMinute:",le),console.log(" Available projects:",j.map(Be=>({id:Be.id,name:Be.name,idType:typeof Be.id}))),console.log(" Merged event IDs:",t==null?void 0:t.mergedEventIds);const we=/ - (|) \d{1,2}$/,se=z.title.replace(we,"").trim();let Ve="",Me="";if(z.projectId){const Be=j.find(qe=>qe.id===z.projectId||qe.id===parseInt(z.projectId)||qe.id.toString()===z.projectId.toString());console.log(" Looking for project with id:",z.projectId,"type:",typeof z.projectId),console.log(" Found project:",Be),Ve=(Be==null?void 0:Be.name)||"",Me=z.projectId}else Ve="",Me="";console.log(" Final projectId:",Me,"projectName:",Ve,"cleanedTitle:",se);const Ye=new Date(z.date);let Te="-";if(F){let Be=ie;Q===""&&ie!==12?Be=ie+12:Q===""&&ie===12&&(Be=0),Te=`${Be.toString().padStart(2,"0")}:${le.toString().padStart(2,"0")}`,console.log(" Time calculated:",Te)}else console.log(" No time set (hasTime is false)");const st={...t,title:se,start:Ye,end:Ye,projectId:Me,projectName:Ve,assignedTo:x,description:z.description||"",time:Te,mergedEventIds:t==null?void 0:t.mergedEventIds};if(!o){l(!0),console.log(" Calling onSave with newEvent:",st);try{await a(st),console.log(" onSave completed successfully")}catch(Be){throw console.error(" onSave failed:",Be),Be}finally{l(!1)}}};return console.log(" Rendering ScheduleModal with selectedMembers:",x),n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 md:p-4",children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 md:p-6 border-b",children:[n.jsxDEV("h2",{className:"text-lg md:text-xl font-semibold",children:t?" ":"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:382,columnNumber:11},void 0),n.jsxDEV("button",{onClick:r,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV(ht,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:389,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:385,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:381,columnNumber:9},void 0),n.jsxDEV("form",{onSubmit:h(tt),className:"p-4 md:p-6 space-y-3 md:space-y-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:397,columnNumber:13},void 0),n.jsxDEV("select",{...m("projectId"),className:"input w-full",children:[n.jsxDEV("option",{value:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:404,columnNumber:15},void 0),j.filter(z=>t!=null&&t.isASVisit?!0:z.status!=="completed").map(z=>n.jsxDEV("option",{value:z.id,children:z.name},z.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:414,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:400,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:396,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:423,columnNumber:13},void 0),n.jsxDEV("input",{...m("title",{required:" "}),type:"text",className:"input w-full"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:426,columnNumber:13},void 0),u.title&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(u.title.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:432,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:422,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:438,columnNumber:13},void 0),n.jsxDEV("input",{...m("date",{required:" "}),type:"date",className:"input w-full"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:441,columnNumber:13},void 0),u.date&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(u.date.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:447,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:437,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:453,columnNumber:13},void 0),n.jsxDEV("div",{className:"mb-2",children:n.jsxDEV("button",{type:"button",onClick:()=>me(!F),className:`px-3 py-1.5 text-xs rounded border transition-colors ${F?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:F?" ":"  (-)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:459,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:458,columnNumber:13},void 0),F&&n.jsxDEV("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsxDEV("div",{className:"flex gap-1",children:[n.jsxDEV("button",{type:"button",onClick:()=>T(""),className:`px-3 py-1.5 text-xs rounded border transition-colors ${Q===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:477,columnNumber:19},void 0),n.jsxDEV("button",{type:"button",onClick:()=>T(""),className:`px-3 py-1.5 text-xs rounded border transition-colors ${Q===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:488,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:476,columnNumber:17},void 0),n.jsxDEV("select",{value:ie,onChange:z=>_(parseInt(z.target.value)),className:"flex-1 min-w-[80px] max-w-[120px] px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(z=>n.jsxDEV("option",{value:z,children:[z,""]},z,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:508,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:502,columnNumber:17},void 0),n.jsxDEV("select",{value:le,onChange:z=>ve(parseInt(z.target.value)),className:"flex-1 min-w-[80px] max-w-[120px] px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(z=>n.jsxDEV("option",{value:z,children:[z,""]},z,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:521,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:515,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:474,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:452,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (  )"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:532,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[n.jsxDEV("button",{type:"button",onClick:je,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${x.includes("HV LAB")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:539,columnNumber:15},void 0),n.jsxDEV("button",{type:"button",onClick:Se,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${x.includes("")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:552,columnNumber:15},void 0),n.jsxDEV("button",{type:"button",onClick:Ee,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${x.includes("")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:565,columnNumber:15},void 0),si.map(z=>n.jsxDEV("button",{type:"button",onClick:()=>be(z),className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${x.includes(z)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:z},z,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:579,columnNumber:17},void 0)),x.filter(z=>!si.includes(z)&&z!=="HV LAB"&&z!==""&&z!=="").map(z=>n.jsxDEV("button",{type:"button",onClick:()=>ze(z),className:"px-2.5 py-1.5 rounded border transition-colors text-sm bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[z," "]},z,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:597,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:537,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:L,onChange:z=>k(z.target.value),onKeyPress:z=>{z.key==="Enter"&&(z.preventDefault(),et())},className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:611,columnNumber:15},void 0),n.jsxDEV("button",{type:"button",onClick:et,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:623,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:610,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:531,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:635,columnNumber:13},void 0),n.jsxDEV("textarea",{...m("description"),rows:2,className:"input w-full text-sm md:text-base"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:638,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:634,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2 sm:gap-0 pt-4 border-t",children:[n.jsxDEV("div",{children:t&&n.jsxDEV("button",{type:"button",onClick:()=>{window.confirm("  ?")&&i(t.id)},className:"btn btn-outline text-red-600 hover:bg-red-50 flex items-center w-full sm:w-auto justify-center text-sm md:text-base",children:[n.jsxDEV(Fs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:658,columnNumber:19},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:649,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:647,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex gap-2 sm:space-x-3",children:[n.jsxDEV("button",{type:"button",onClick:r,className:"btn btn-outline flex-1 sm:flex-none text-sm md:text-base",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:664,columnNumber:15},void 0),n.jsxDEV("button",{type:"submit",disabled:o,className:"btn btn-primary flex-1 sm:flex-none text-sm md:text-base disabled:opacity-50",children:o?" ...":t?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:671,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:663,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:646,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:394,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:379,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ScheduleModal.tsx",lineNumber:378,columnNumber:5},void 0)},qr=t=>{if(!t||t==="-")return"";const[s,e]=t.split(":"),r=parseInt(s,10),a=parseInt(e,10),i=r>=12?"":"",o=r%12||12;return a>0?`${i} ${o} ${a}`:`${i} ${o}`},tr=["","","","","","","","","","","","","","","","","","","","","","","","","","",""],kn=t=>{if(!t)return t;const s=t.replace(/$/g,"").trim(),e=s.split(" ");if(e.length>=2){const r=e[e.length-1];for(const a of tr)if(r===a)return e.slice(0,-1).join(" ").trim()}for(const r of tr)if(s.endsWith(r))return s.substring(0,s.length-r.length).trim()||s;return s},Mn=t=>{const s=t.replace(/$/g,"").trim(),e=s.split(" ");if(e.length>=2){const r=e[e.length-1];for(const a of tr)if(r===a)return a}for(const r of tr)if(s.endsWith(r))return r;return""},yu=["","","","","","",""],xu=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","/","","","","","","","",""],_r=["","","/","","","","","","","","","","","","",""],vu={KB:"004",:"004",:"088",:"020",:"081",IBK:"003",:"003",NH:"011",:"011",SC:"023",:"023",:"027",:"027",:"045",:"048",:"071",KDB:"002",:"002",:"007",:"031",:"032",:"039",:"034",:"037",:"035",:"090",:"089",K:"089",:"092"},ku={KB:"KB",:"KB",IBK:"",:"",NH:"",:"",SC:"SC",:"SC",:"",:"",KDB:"",:"",:"K"},ni=yu,Du=()=>{const{schedules:t,loadSchedulesFromAPI:s,addScheduleToAPI:e,deleteScheduleFromAPI:r}=Os(),{user:a}=js(),[i,o]=b.useState(!1),l=a!=null&&a.name?a.name.slice(-2):null,m=(a==null?void 0:a.name)===""?[""]:l?[l,...ni.filter(d=>d!==l)]:ni,h=d=>{const p=t.filter(x=>x.attendees?!!(x.attendees.includes(d)||x.attendees.includes("HV LAB")&&d!==""||x.attendees.includes("")&&["",""].includes(d)||x.attendees.includes("")&&["","",""].includes(d)):!1),u=x=>{const A=new Set;return x.filter(L=>{const F=`${Ze(new Date(L.start),"yyyy-MM-dd")}|${L.project}|${L.title}`;return A.has(F)?!1:(A.add(F),!0)})},N=u(p.filter(x=>Ua(new Date(x.start)))),j=u(p.filter(x=>im(new Date(x.start))&&!Ua(new Date(x.start))).sort((x,A)=>new Date(x.start).getTime()-new Date(A.start).getTime())).slice(0,3);return{todaySchedules:N,upcomingSchedules:j,member:d}};return n.jsxDEV("div",{className:"space-y-3 md:space-y-5 lg:space-y-4",children:[n.jsxDEV("div",{children:n.jsxDEV("div",{className:"dashboard-grid grid grid-cols-1 sm:grid-cols-2 ipad:grid-cols-2 ipad-lg:grid-cols-2 ipad-xl:grid-cols-3 ipad-2xl:grid-cols-3 2xl:grid-cols-4 gap-3 md:gap-4 lg:gap-4",children:m.map(d=>{const{todaySchedules:p,upcomingSchedules:u}=h(d),N=p.length+u.length,j=d===l;return n.jsxDEV("div",{className:`card p-3 sm:p-4 md:p-5 lg:p-4 ${j?"ring-1 ring-gray-300":""}`,children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("h3",{className:"font-bold text-lg md:text-lg text-gray-900",children:d},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:113,columnNumber:21},void 0),j&&n.jsxDEV("span",{className:"text-xs px-2 py-0.5 bg-gray-200 text-gray-600 rounded font-medium",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:115,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:112,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex items-center gap-2",children:[j&&n.jsxDEV("button",{onClick:()=>o(!0),className:"p-1.5 hover:bg-gray-100 rounded-full transition-colors",title:" ",children:n.jsxDEV(Gs,{className:"h-4 w-4 text-gray-700"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:125,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:120,columnNumber:23},void 0),n.jsxDEV("span",{className:`text-xs px-2.5 py-1 ${j&&p.length>0?"bg-amber-100 text-gray-900":"bg-gray-100 text-gray-900"} rounded-full font-semibold whitespace-nowrap`,children:[p.length," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:128,columnNumber:21},void 0),n.jsxDEV("span",{className:"text-xs px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full font-semibold whitespace-nowrap",children:[u.length," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:131,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:118,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:111,columnNumber:17},void 0),p.length>0&&n.jsxDEV("div",{className:"mb-4",children:[n.jsxDEV("div",{className:"flex items-center gap-1.5 mb-2",children:[n.jsxDEV(Di,{className:"h-4 w-4 text-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:141,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs font-semibold text-gray-900 uppercase",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:142,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:140,columnNumber:21},void 0),n.jsxDEV("div",{className:"space-y-2",children:(()=>{const x=p.reduce((A,L)=>{const k=L.project||"-";return A[k]||(A[k]=[]),A[k].push(L),A},{});return Object.entries(x).map(([A,L])=>{const k=d===l;return n.jsxDEV("div",{className:`border-l-3 ${k?"border-gray-400":"border-gray-900"} ${k?"bg-amber-50":"bg-gray-50"} rounded-r overflow-hidden`,children:[n.jsxDEV("div",{className:`px-3 py-1 ${k?"bg-amber-100":"bg-gray-100"} border-b ${k?"border-amber-200":"border-gray-200"}`,children:n.jsxDEV("span",{className:"text-xs font-semibold text-gray-900",children:A},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:164,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:163,columnNumber:31},void 0),n.jsxDEV("div",{className:"px-3 py-1.5 space-y-0.5",children:L.map(F=>{const me=F.time&&F.time!=="-"?` - ${qr(F.time)}`:"";return n.jsxDEV("p",{className:"font-medium text-gray-900 text-sm leading-snug",children:[" ",F.title,me]},F.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:170,columnNumber:37},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:166,columnNumber:31},void 0)]},A,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:159,columnNumber:29},void 0)})})()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:144,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:139,columnNumber:19},void 0),u.length>0&&n.jsxDEV("div",{children:[n.jsxDEV("div",{className:"flex items-center gap-1.5 mb-2",children:[n.jsxDEV(Kl,{className:"h-4 w-4 text-gray-600"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:188,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:189,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:187,columnNumber:21},void 0),n.jsxDEV("div",{className:"space-y-2",children:(()=>{const x=u.reduce((A,L)=>{const k=Ze(new Date(L.start),"MM.dd",{locale:gt}),F=L.project||"-",me=`${k}|${F}`;return A[me]||(A[me]={date:k,project:F,schedules:[]}),A[me].schedules.push(L),A},{});return Object.values(x).map(({date:A,project:L,schedules:k})=>{const me=k.length>0&&am(new Date(k[0].start))?`${A} ()`:A;return n.jsxDEV("div",{className:"border-l-3 border-gray-400 bg-gray-50 rounded-r overflow-hidden",children:[n.jsxDEV("div",{className:"px-3 py-1 bg-gray-100 border-b border-gray-200 flex items-center justify-between",children:[n.jsxDEV("span",{className:"text-xs font-semibold text-gray-700",children:L},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:211,columnNumber:33},void 0),n.jsxDEV("span",{className:"text-xs text-gray-500 font-medium",children:me},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:212,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:210,columnNumber:31},void 0),n.jsxDEV("div",{className:"px-3 py-1.5 space-y-0.5",children:k.map(Q=>{const T=Q.time&&Q.time!=="-"?` - ${qr(Q.time)}`:"";return n.jsxDEV("p",{className:"font-medium text-gray-900 text-sm leading-snug",children:[" ",Q.title,T]},Q.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:218,columnNumber:37},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:214,columnNumber:31},void 0)]},`${A}-${L}`,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:209,columnNumber:29},void 0)})})()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:191,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:186,columnNumber:19},void 0),N===0&&n.jsxDEV("div",{className:"text-center py-8 text-gray-400 text-sm",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:234,columnNumber:19},void 0)]},d,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:109,columnNumber:15},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:101,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:100,columnNumber:7},void 0),i&&n.jsxDEV(No,{event:null,slotInfo:{start:new Date,end:new Date},onClose:()=>o(!1),onSave:async d=>{try{console.log("Dashboard: Adding schedule...",d),await e({id:Date.now().toString(),title:d.title||"",start:d.start||new Date,end:d.end||new Date,type:"other",project:d.projectId||d.projectName||"",location:"",attendees:d.assignedTo||[],description:d.description||"",time:d.time}),console.log("Dashboard: Schedule added successfully"),await s(),console.log("Dashboard: Schedules fetched, closing modal"),o(!1)}catch(p){console.error("Failed to add schedule:",p),alert("  : "+(p instanceof Error?p.message:"   "))}},onDelete:async d=>{try{await r(d),await s(),o(!1)}catch(p){console.error("Failed to delete schedule:",p),alert("  : "+(p instanceof Error?p.message:"   "))}}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:246,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Dashboard.tsx",lineNumber:98,columnNumber:5},void 0)},mr=()=>{const{user:t}=js(),{projects:s}=Os();return b.useMemo(()=>t?t.name===""?s.filter(r=>{const i=(r.manager?r.manager.split(",").map(l=>l.trim()):[]).includes(""),o=r.team&&Array.isArray(r.team)&&r.team.includes("");return i||o}):s:[],[t,s])},Vu=({value:t,detailValue:s="",onChange:e,onDetailChange:r,placeholder:a=" ",error:i})=>{const[o,l]=b.useState(!1),[m,h]=b.useState(t),[d,p]=b.useState(s),u=b.useRef(null);b.useEffect(()=>{const L=k=>{u.current&&!u.current.contains(k.target)&&l(!1)};return o&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[o]),b.useEffect(()=>{h(t)},[t]),b.useEffect(()=>{p(s)},[s]);const N=()=>new Promise((L,k)=>{if(window.daum&&window.daum.Postcode){L(!0);return}const F=document.createElement("script");F.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",F.async=!0,F.onload=()=>L(!0),F.onerror=()=>k(new Error("Kakao Postcode   ")),document.head.appendChild(F)}),j=L=>{const k=L.roadAddr||L.jibunAddr;h(k),e(k,d),l(!1)},x=L=>{const k=L.target.value;p(k),r&&r(k),m&&e(m,k)},A=async()=>{try{(!window.daum||!window.daum.Postcode)&&await N(),window.daum&&new window.daum.Postcode({oncomplete:function(L){const k={roadAddr:L.roadAddress,jibunAddr:L.jibunAddress||L.autoJibunAddress||"",zipNo:L.zonecode,bdNm:L.buildingName,siNm:L.sido,sggNm:L.sigungu,emdNm:L.bname,rn:L.roadname};j(k)}}).open()}catch(L){console.error("  :",L),alert("     .  .")}};return n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("div",{className:"relative flex-1",children:[n.jsxDEV("input",{type:"text",value:m,onClick:()=>A(),onChange:L=>{h(L.target.value),e(L.target.value,d)},placeholder:a,className:`input pr-8 cursor-pointer ${i?"border-red-500":""}`,readOnly:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:172,columnNumber:13},void 0),n.jsxDEV(Vi,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:184,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:171,columnNumber:11},void 0),n.jsxDEV("button",{type:"button",onClick:A,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:188,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:170,columnNumber:9},void 0),i&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:i},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:197,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:169,columnNumber:7},void 0),n.jsxDEV("div",{children:n.jsxDEV("input",{type:"text",value:d,onChange:x,placeholder:" (/ )",className:"input",disabled:!m},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:203,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:202,columnNumber:7},void 0),m&&n.jsxDEV("div",{className:"p-3 bg-gray-50 rounded-lg",children:n.jsxDEV("p",{className:"text-sm text-gray-600",children:[n.jsxDEV("span",{className:"font-medium",children:" :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:217,columnNumber:13},void 0)," ",m,d&&`, ${d}`]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:216,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:215,columnNumber:9},void 0),n.jsxDEV("div",{id:"address-search-container",style:{display:"none",width:"100%",height:"400px"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:225,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AddressSearch.tsx",lineNumber:167,columnNumber:5},void 0)},ri=["","","","","","",""],Cu=({project:t,onClose:s,onSave:e})=>{const{register:r,handleSubmit:a,setValue:i,reset:o,formState:{errors:l}}=fa({defaultValues:{name:"",client:"",location:"",detailLocation:"",startDate:"",endDate:""}}),[m,h]=b.useState([]),[d,p]=b.useState(""),[u,N]=b.useState(""),[j,x]=b.useState(""),[A,L]=b.useState(!1);b.useEffect(()=>{var T;if(t){const ie=t.location?t.location.split(","):["",""],_=((T=ie[0])==null?void 0:T.trim())||t.location||"",le=ie.length>1?ie.slice(1).join(",").trim():"";o({name:t.name,client:t.client||"",location:_,detailLocation:le,startDate:t.startDate?new Date(t.startDate).toISOString().split("T")[0]:"",endDate:t.endDate?new Date(t.endDate).toISOString().split("T")[0]:""}),N(_),x(le);const ve=t.manager?t.manager.split(",").map(oe=>oe.trim()).filter(oe=>oe&&oe!==""):[];h(ve)}else o({name:"",client:"",location:"",detailLocation:"",startDate:"",endDate:""}),N(""),x(""),h([])},[t,o]);const k=T=>{h(ie=>ie.includes(T)?ie.filter(_=>_!==T):[...ie,T])},F=()=>{d.trim()&&!m.includes(d.trim())&&(h(T=>[...T,d.trim()]),p(""))},me=T=>{h(ie=>ie.filter(_=>_!==T))},Q=async T=>{if(A)return;L(!0),console.log(" ProjectModal onSubmit - Raw form data:",T);const ie=u&&j?`${u}, ${j}`:u||T.location,_={name:T.name,client:T.client,location:ie,manager:m.join(", "),contractAmount:(t==null?void 0:t.contractAmount)??0,spent:(t==null?void 0:t.spent)??0,status:(t==null?void 0:t.status)??"planning",progress:(t==null?void 0:t.progress)??0,description:(t==null?void 0:t.description)??"",meetingNotes:(t==null?void 0:t.meetingNotes)??[],customerRequests:(t==null?void 0:t.customerRequests)??[],entrancePassword:(t==null?void 0:t.entrancePassword)??"",sitePassword:(t==null?void 0:t.sitePassword)??""};if(T.startDate&&T.startDate!=="")_.startDate=T.startDate,console.log(" Setting startDate from form:",T.startDate);else if(t!=null&&t.startDate){const le=typeof t.startDate=="string"&&t.startDate.includes("T")?t.startDate.split("T")[0]:t.startDate;_.startDate=le,console.log(" Keeping existing startDate:",_.startDate)}if(T.endDate&&T.endDate!=="")_.endDate=T.endDate,console.log(" Setting endDate from form:",T.endDate);else if(t!=null&&t.endDate){const le=typeof t.endDate=="string"&&t.endDate.includes("T")?t.endDate.split("T")[0]:t.endDate;_.endDate=le,console.log(" Keeping existing endDate:",_.endDate)}console.log(" ProjectModal onSubmit - Final formData:",_);try{await e(_)}catch(le){throw L(!1),le}};return n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 md:p-4",children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 md:p-6 border-b sticky top-0 bg-white z-10",children:[n.jsxDEV("h2",{className:"text-lg md:text-xl font-semibold",children:t?" ":" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:186,columnNumber:11},void 0),n.jsxDEV("button",{onClick:s,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV(ht,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:193,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:189,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:185,columnNumber:9},void 0),n.jsxDEV("form",{onSubmit:a(Q),className:"p-4 md:p-6 space-y-4 md:space-y-6",children:[n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:202,columnNumber:15},void 0),n.jsxDEV("input",{...r("name",{required:" "}),type:"text",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:205,columnNumber:15},void 0),l.name&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(l.name.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:211,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:201,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:216,columnNumber:15},void 0),n.jsxDEV("input",{...r("client"),type:"text",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:219,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:215,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:200,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:229,columnNumber:13},void 0),n.jsxDEV(Vu,{value:u,detailValue:j,onChange:(T,ie)=>{N(T),x(ie||""),i("location",T),i("detailLocation",ie||"")},onDetailChange:T=>{x(T),i("detailLocation",T)},placeholder:"  ",required:!0,error:l.location?String(l.location.message):void 0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:232,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:228,columnNumber:11},void 0),n.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:255,columnNumber:15},void 0),n.jsxDEV("input",{...r("startDate"),type:"date",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:258,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:254,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:266,columnNumber:15},void 0),n.jsxDEV("input",{...r("endDate"),type:"date",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:269,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:265,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:253,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (  )"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:279,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[ri.map(T=>n.jsxDEV("button",{type:"button",onClick:()=>k(T),className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${m.includes(T)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:T},T,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:287,columnNumber:17},void 0)),m.filter(T=>!ri.includes(T)).map(T=>n.jsxDEV("button",{type:"button",onClick:()=>me(T),className:"px-2.5 py-1.5 rounded border transition-colors text-sm bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[T," "]},T,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:305,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:284,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:d,onChange:T=>p(T.target.value),onKeyPress:T=>{T.key==="Enter"&&(T.preventDefault(),F())},placeholder:"   ",className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:319,columnNumber:15},void 0),n.jsxDEV("button",{type:"button",onClick:F,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:332,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:318,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:278,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex justify-end space-x-2 md:space-x-3 pt-4 border-t",children:[n.jsxDEV("button",{type:"button",onClick:s,className:"btn btn-outline text-sm md:text-base",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:345,columnNumber:13},void 0),n.jsxDEV("button",{type:"submit",disabled:A,className:"btn btn-primary text-sm md:text-base disabled:opacity-50",children:A?" ...":t?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:352,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:344,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:198,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:183,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ProjectModal.tsx",lineNumber:182,columnNumber:5},void 0)},_u=({projectName:t,meetingNotes:s,onClose:e,onSave:r,onDelete:a})=>{const[i,o]=b.useState(""),[l,m]=b.useState(new Date().toISOString().split("T")[0]),[h,d]=b.useState(!1),[p,u]=b.useState(!1),N=()=>{d(!0),o(""),m(new Date().toISOString().split("T")[0])},j=async()=>{if(!p){if(!i.trim()){alert(" ");return}if(!l){alert(" ");return}u(!0);try{await r(i.trim(),new Date(l)),o(""),m(new Date().toISOString().split("T")[0]),d(!1)}finally{u(!1)}}},x=()=>{o(""),m(new Date().toISOString().split("T")[0]),d(!1)},A=L=>{window.confirm("   ?")&&a(L)};return n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col shadow-xl",onClick:L=>L.stopPropagation(),children:[n.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[n.jsxDEV("div",{children:[n.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:83,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500 mt-0.5",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:84,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:82,columnNumber:11},void 0),n.jsxDEV("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsxDEV(ht,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:90,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:81,columnNumber:9},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6",children:[!h&&n.jsxDEV("button",{onClick:N,className:"w-full mb-4 px-4 py-2.5 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"+ "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:98,columnNumber:13},void 0),h&&n.jsxDEV("div",{className:"mb-4 p-4 bg-gray-50 rounded border border-gray-200",children:[n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:110,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:l,onChange:L=>m(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:113,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:109,columnNumber:15},void 0),n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:121,columnNumber:17},void 0),n.jsxDEV("textarea",{value:i,onChange:L=>o(L.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900 resize-none",rows:4},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:124,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:120,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:j,disabled:p,className:"px-4 py-1.5 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:p?" ...":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:133,columnNumber:17},void 0),n.jsxDEV("button",{onClick:x,disabled:p,className:"px-4 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:140,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:132,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:108,columnNumber:13},void 0),n.jsxDEV("div",{className:"space-y-3",children:s.length===0?n.jsxDEV("div",{className:"text-center py-12 text-gray-400 text-sm",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:154,columnNumber:15},void 0):s.map(L=>n.jsxDEV("div",{className:"p-4 bg-white border border-gray-200 rounded hover:border-gray-300 transition-colors group",children:n.jsxDEV("div",{className:"flex items-start justify-between gap-3",children:[n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("p",{className:"text-sm text-gray-600 mb-2",children:Ze(new Date(L.date),"yyyy.MM.dd (eee)",{locale:gt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:165,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:L.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:168,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:164,columnNumber:21},void 0),n.jsxDEV("button",{onClick:()=>A(L.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:172,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:163,columnNumber:19},void 0)},L.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:159,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:152,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:95,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:76,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/MeetingNotesModal.tsx",lineNumber:72,columnNumber:5},void 0)},Au=({projectName:t,customerRequests:s,onClose:e,onSave:r,onToggleComplete:a,onDelete:i})=>{const[o,l]=b.useState(""),[m,h]=b.useState(new Date().toISOString().split("T")[0]),[d,p]=b.useState(!1),[u,N]=b.useState(!1),j=()=>{p(!0),l(""),h(new Date().toISOString().split("T")[0])},x=async()=>{if(!u){if(!o.trim()){alert(" ");return}if(!m){alert(" ");return}N(!0);try{await r(o.trim(),new Date(m)),l(""),h(new Date().toISOString().split("T")[0]),p(!1)}finally{N(!1)}}},A=()=>{l(""),h(new Date().toISOString().split("T")[0]),p(!1)},L=Q=>{window.confirm("  ?")&&i(Q)},k=Q=>{a(Q)},F=s.filter(Q=>!Q.completed),me=s.filter(Q=>Q.completed);return n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col shadow-xl",onClick:Q=>Q.stopPropagation(),children:[n.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[n.jsxDEV("div",{children:[n.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:93,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500 mt-0.5",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:94,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:92,columnNumber:11},void 0),n.jsxDEV("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsxDEV(ht,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:100,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:96,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:91,columnNumber:9},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6",children:[!d&&n.jsxDEV("button",{onClick:j,className:"w-full mb-4 px-4 py-2.5 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"+ "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:108,columnNumber:13},void 0),d&&n.jsxDEV("div",{className:"mb-4 p-4 bg-gray-50 rounded border border-gray-200",children:[n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:120,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:m,onChange:Q=>h(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:123,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:119,columnNumber:15},void 0),n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:131,columnNumber:17},void 0),n.jsxDEV("textarea",{value:o,onChange:Q=>l(Q.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900 resize-none",rows:3},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:134,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:130,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:x,disabled:u,className:"px-4 py-1.5 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:u?" ...":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:143,columnNumber:17},void 0),n.jsxDEV("button",{onClick:A,disabled:u,className:"px-4 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:150,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:142,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:118,columnNumber:13},void 0),n.jsxDEV("div",{className:"space-y-2",children:s.length===0?n.jsxDEV("div",{className:"text-center py-12 text-gray-400 text-sm",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:164,columnNumber:15},void 0):n.jsxDEV(n.Fragment,{children:[F.map(Q=>n.jsxDEV("div",{className:"p-3 bg-white border border-gray-300 rounded hover:border-gray-400 transition-colors group",children:n.jsxDEV("div",{className:"flex items-start gap-3",children:[n.jsxDEV("button",{onClick:()=>k(Q.id),className:"mt-0.5 flex-shrink-0",children:n.jsxDEV(Ql,{className:"h-4 w-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:180,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:176,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:Q.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:183,columnNumber:25},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:Ze(new Date(Q.createdAt),"yyyy.MM.dd",{locale:gt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:186,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:182,columnNumber:23},void 0),n.jsxDEV("button",{onClick:()=>L(Q.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:190,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:175,columnNumber:21},void 0)},Q.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:171,columnNumber:19},void 0)),me.map(Q=>n.jsxDEV("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded hover:border-gray-300 transition-colors group",children:n.jsxDEV("div",{className:"flex items-start gap-3",children:[n.jsxDEV("button",{onClick:()=>k(Q.id),className:"mt-0.5 flex-shrink-0",children:n.jsxDEV(Xl,{className:"h-4 w-4 text-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:211,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:207,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("p",{className:"text-sm text-gray-500 line-through whitespace-pre-wrap break-words",children:Q.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:214,columnNumber:25},void 0),n.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:Ze(new Date(Q.createdAt),"yyyy.MM.dd",{locale:gt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:217,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:213,columnNumber:23},void 0),n.jsxDEV("button",{onClick:()=>L(Q.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:221,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:206,columnNumber:21},void 0)},Q.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:202,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:168,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:162,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:105,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:86,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CustomerRequestsModal.tsx",lineNumber:82,columnNumber:5},void 0)},Eu=({projectName:t,entrancePassword:s,sitePassword:e,onClose:r,onSave:a})=>{const[i,o]=b.useState(s||""),[l,m]=b.useState(e||""),[h,d]=b.useState(!1),[p,u]=b.useState(!1),N=()=>{d(!0)},j=async()=>{if(!p){u(!0);try{await a(i,l),d(!1)}finally{u(!1)}}},x=()=>{o(s||""),m(e||""),d(!1)};return n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:r,children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl",onClick:A=>A.stopPropagation(),children:[n.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[n.jsxDEV("div",{children:[n.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:57,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500 mt-0.5",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:58,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:56,columnNumber:11},void 0),n.jsxDEV("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:n.jsxDEV(ht,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:64,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:60,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:55,columnNumber:9},void 0),n.jsxDEV("div",{className:"p-6 space-y-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:72,columnNumber:13},void 0),h?n.jsxDEV("input",{type:"text",value:i,onChange:A=>o(A.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:76,columnNumber:15},void 0):n.jsxDEV("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded",children:i?n.jsxDEV("span",{className:"text-sm font-mono text-gray-900",children:i},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:86,columnNumber:19},void 0):n.jsxDEV("span",{className:"text-sm text-gray-400",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:88,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:84,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:71,columnNumber:11},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:96,columnNumber:13},void 0),h?n.jsxDEV("input",{type:"text",value:l,onChange:A=>m(A.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:100,columnNumber:15},void 0):n.jsxDEV("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded",children:l?n.jsxDEV("span",{className:"text-sm font-mono text-gray-900",children:l},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:110,columnNumber:19},void 0):n.jsxDEV("span",{className:"text-sm text-gray-400",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:112,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:108,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:95,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:69,columnNumber:9},void 0),n.jsxDEV("div",{className:"border-t border-gray-200 px-6 py-4 flex gap-2",children:h?n.jsxDEV(n.Fragment,{children:[n.jsxDEV("button",{onClick:j,disabled:p,className:"flex-1 px-4 py-2 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors disabled:opacity-50",children:p?" ...":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:123,columnNumber:15},void 0),n.jsxDEV("button",{onClick:x,disabled:p,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors disabled:opacity-50",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:130,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:122,columnNumber:13},void 0):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("button",{onClick:N,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:140,columnNumber:15},void 0),n.jsxDEV("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:146,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:139,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:120,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:50,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/SitePasswordModal.tsx",lineNumber:46,columnNumber:5},void 0)},wu=({projectName:t,onClose:s})=>{var o;const[e,r]=b.useState({clientName:"",phoneNumber:"",address:"",startDate:"",endDate:"",area:"",designFee:"",bankAccount:" 487102-01-264798 ",companyAddress:"  277  109",representative:"  "}),a=()=>{window.print()},i=l=>{const m=Number(l.replace(/,/g,""));return isNaN(m)?"":m.toLocaleString()};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[n.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:40,columnNumber:13},void 0),n.jsxDEV("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full",children:n.jsxDEV(ht,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:45,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:41,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:39,columnNumber:11},void 0),n.jsxDEV("div",{className:"p-6 space-y-4 print:hidden",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:52,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.clientName,onChange:l=>r({...e,clientName:l.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:53,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:51,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:63,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.phoneNumber,onChange:l=>r({...e,phoneNumber:l.target.value}),placeholder:"010-0000-0000",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:64,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:62,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:74,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.address,onChange:l=>r({...e,address:l.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:75,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:73,columnNumber:13},void 0),n.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:86,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:e.startDate,onChange:l=>r({...e,startDate:l.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:87,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:85,columnNumber:15},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:95,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:e.endDate,onChange:l=>r({...e,endDate:l.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:96,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:94,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:84,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:106,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.area,onChange:l=>r({...e,area:l.target.value}),placeholder:": 21.9(72.37m2)",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:107,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:105,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:117,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:i(e.designFee),onChange:l=>{const m=l.target.value.replace(/,/g,"");/^\d*$/.test(m)&&r({...e,designFee:m})},placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:118,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:116,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:133,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:e.bankAccount,onChange:l=>r({...e,bankAccount:l.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:134,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:132,columnNumber:13},void 0),n.jsxDEV("button",{onClick:a,disabled:!e.clientName||!e.phoneNumber||!e.address,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[n.jsxDEV(Ci,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:147,columnNumber:15},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:142,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:50,columnNumber:11},void 0),n.jsxDEV("div",{className:"hidden print:block p-16",children:n.jsxDEV("div",{className:"space-y-16",children:[n.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:156,columnNumber:15},void 0),n.jsxDEV("div",{className:"space-y-8 text-base leading-relaxed",children:[n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"1.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:161,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.clientName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:162,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:160,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"2.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:166,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.phoneNumber},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:167,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:165,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"3.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:171,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.address},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:172,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:170,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"3.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:176,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.startDate&&e.endDate?n.jsxDEV(n.Fragment,{children:[Ze(new Date(e.startDate),"yyyy",{locale:gt}),"",Ze(new Date(e.startDate),"MM",{locale:gt}),"",Ze(new Date(e.startDate),"dd",{locale:gt})," ~ ",Ze(new Date(e.endDate),"yyyy",{locale:gt}),"",Ze(new Date(e.endDate),"MM",{locale:gt}),"",Ze(new Date(e.endDate),"dd",{locale:gt})," ()"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:179,columnNumber:23},void 0):""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:177,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:175,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"5.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:187,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:e.area},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:188,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:186,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex flex-col",children:[n.jsxDEV("div",{className:"flex items-baseline",children:[n.jsxDEV("span",{className:"w-48",children:"6.  :"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:193,columnNumber:21},void 0),n.jsxDEV("span",{className:"flex-1",children:[e.designFee?`${i(e.designFee)}`:""," ()"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:194,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:192,columnNumber:19},void 0),e.bankAccount&&n.jsxDEV("div",{className:"ml-48 mt-2 text-center",children:e.bankAccount},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:199,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:191,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:159,columnNumber:15},void 0),n.jsxDEV("div",{className:"mt-20 space-y-3",children:[n.jsxDEV("div",{className:"text-base font-bold",children:"*"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:206,columnNumber:17},void 0),n.jsxDEV("div",{className:"ml-8 space-y-2 text-base",children:[n.jsxDEV("div",{children:[" : ",e.address]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:208,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("span",{children:[" : ",(o=e.clientName)==null?void 0:o.split("").join("    ")]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:210,columnNumber:21},void 0),n.jsxDEV("span",{className:"ml-8",children:"()"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:211,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:209,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:207,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:205,columnNumber:15},void 0),n.jsxDEV("div",{className:"mt-12 space-y-3",children:[n.jsxDEV("div",{className:"text-base font-bold",children:"*"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:218,columnNumber:17},void 0),n.jsxDEV("div",{className:"ml-8 space-y-2 text-base",children:[n.jsxDEV("div",{children:[" : ",e.companyAddress]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:220,columnNumber:19},void 0),n.jsxDEV("div",{children:" : HV LAB ()"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:221,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("span",{children:[" : ",e.representative]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:223,columnNumber:21},void 0),n.jsxDEV("div",{className:"ml-8 inline-flex items-center justify-center w-14 h-14 border-2 border-red-600",children:n.jsxDEV("span",{className:"text-red-600 text-xs font-bold leading-tight text-center",children:["",n.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:226,columnNumber:28},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:225,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:224,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:222,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:219,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:217,columnNumber:15},void 0),n.jsxDEV("div",{className:"border-t-[3px] border-gray-900 mt-32 pt-12 flex justify-between items-end",children:[n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("span",{className:"text-4xl font-bold",children:"H"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:236,columnNumber:19},void 0),n.jsxDEV("span",{className:"inline-block w-12 h-1 bg-gray-900 mx-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:237,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:235,columnNumber:17},void 0),n.jsxDEV("div",{className:"text-right",children:[n.jsxDEV("div",{className:"text-xs tracking-widest mb-1",children:"ARCHITECTURE & INTERIOR"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:240,columnNumber:19},void 0),n.jsxDEV("div",{className:"text-3xl font-bold",children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:241,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:239,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:234,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:154,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:37,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:36,columnNumber:7},void 0),n.jsxDEV("style",{children:`
        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:relative {
            position: relative !important;
            background: white !important;
          }
        }
      `},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:250,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/DesignContractModal.tsx",lineNumber:35,columnNumber:5},void 0)},ju=()=>{const{loadProjectsFromAPI:t,addProjectToAPI:s,updateProjectInAPI:e,deleteProjectFromAPI:r}=Os(),{user:a}=js(),i=mr(),[o,l]=b.useState("in-progress"),[m,h]=b.useState("grid"),[d,p]=b.useState(!1),[u,N]=b.useState(null),[j,x]=b.useState(!1),[A,L]=b.useState(!1),[k,F]=b.useState(!1),[me,Q]=b.useState(!1),[T,ie]=b.useState(null),_=(H,ke)=>`lastViewed_${a==null?void 0:a.id}_${H}_${ke}`,le=(H,ke)=>{const Ce=_(H,ke),ge=localStorage.getItem(Ce);return ge?parseInt(ge,10):0},ve=(H,ke)=>{const Ce=_(H,ke);localStorage.setItem(Ce,Date.now().toString())},oe=(H,ke)=>{const Ce=le(H.id,ke);return ke==="meeting"?(H.meetingNotes||[]).some(Ie=>(Ie.createdAt?new Date(Ie.createdAt).getTime():new Date(Ie.date).getTime())>Ce):(H.customerRequests||[]).some(Ie=>!Ie.completed)};b.useEffect(()=>{t().catch(H=>{console.error("Failed to load projects:",H),O.error("   ")})},[t]),b.useEffect(()=>{const H=()=>{N(null),p(!0)};return window.addEventListener("headerAddButtonClick",H),()=>window.removeEventListener("headerAddButtonClick",H)},[]);const R=(H,ke)=>{if(!H||!ke)return 0;const Ce=new Date,ge=new Date(H),Ie=new Date(ke);if(Ce<ge)return 0;if(Ce>Ie)return 100;const Xe=Math.ceil((Ie.getTime()-ge.getTime())/(1e3*60*60*24)),nt=Math.ceil((Ce.getTime()-ge.getTime())/(1e3*60*60*24)),$e=Math.round(nt/Xe*100);return Math.min(100,Math.max(0,$e))},ne=H=>{N(H),p(!0)},be=async(H,ke)=>{if(window.confirm(`"${ke}"  ?

    .`))try{await r(H),O.success(" ")}catch(Ce){console.error("Failed to delete project:",Ce),O.error("  ")}},je=async H=>{try{if(u)await e(u.id,H),O.success(" ");else{const ke={id:"",...H,team:H.team||[]};await s(ke),O.success(" "),l(H.status||"planning")}p(!1),N(null)}catch(ke){console.error("Failed to save project:",ke),O.error("  ")}},Se=async(H,ke)=>{try{await e(H,{status:ke}),O.success(" ")}catch(Ce){console.error("Failed to update project status:",Ce),O.error("  ")}},Ee=H=>{ie(H),x(!0),ve(H.id,"meeting")},et=H=>{ie(H),L(!0),ve(H.id,"request")},ze=H=>{ie(H),F(!0)},tt=H=>{ie(H),Q(!0)},z=async(H,ke)=>{if(!T)return;const Ce=T.entrancePassword,ge=T.sitePassword;ie({...T,entrancePassword:H,sitePassword:ke});try{await e(T.id,{entrancePassword:H,sitePassword:ke}),O.success(" ")}catch(Ie){console.error("Failed to save passwords:",Ie),O.error("  "),ie({...T,entrancePassword:Ce,sitePassword:ge})}},we=async(H,ke)=>{if(!T)return;const Ce={id:Date.now().toString(),content:H,date:ke,createdAt:new Date},ge=[...T.meetingNotes||[],Ce];ie({...T,meetingNotes:ge});try{await e(T.id,{meetingNotes:ge}),O.success("  ")}catch(Ie){console.error("Failed to save meeting note:",Ie),O.error("   "),ie({...T,meetingNotes:T.meetingNotes||[]})}},se=async(H,ke)=>{if(!T)return;const Ce={id:Date.now().toString(),content:H,completed:!1,createdAt:ke},ge=[...T.customerRequests||[],Ce];ie({...T,customerRequests:ge});try{await e(T.id,{customerRequests:ge}),O.success("  ")}catch(Ie){console.error("Failed to save customer request:",Ie),O.error("   "),ie({...T,customerRequests:T.customerRequests||[]})}},Ve=async H=>{if(!T)return;const ke=T.customerRequests||[],Ce=ke.map(ge=>ge.id===H?{...ge,completed:!ge.completed}:ge);ie({...T,customerRequests:Ce});try{await e(T.id,{customerRequests:Ce}),O.success("  ")}catch(ge){console.error("Failed to toggle request:",ge),O.error("  "),ie({...T,customerRequests:ke})}},Me=async H=>{if(!T)return;const ke=T.meetingNotes||[],Ce=ke.filter(ge=>ge.id!==H);ie({...T,meetingNotes:Ce});try{await e(T.id,{meetingNotes:Ce}),O.success("  ")}catch(ge){console.error("Failed to delete meeting note:",ge),O.error(" "),ie({...T,meetingNotes:ke})}},Ye=async H=>{if(!T)return;const ke=T.customerRequests||[],Ce=ke.filter(ge=>ge.id!==H);ie({...T,customerRequests:Ce});try{await e(T.id,{customerRequests:Ce}),O.success("  ")}catch(ge){console.error("Failed to delete customer request:",ge),O.error(" "),ie({...T,customerRequests:ke})}},Te=({project:H})=>{const Ce={planning:{label:"",color:"bg-white text-gray-700 border-gray-300"},"in-progress":{label:"",color:"bg-white text-gray-900 border-gray-300"},completed:{label:"",color:"bg-gray-900 text-white border-gray-900"},"on-hold":{label:"",color:"bg-white text-gray-600 border-gray-300"}}[H.status];return n.jsxDEV("select",{value:H.status,onChange:ge=>Se(H.id,ge.target.value),className:Gt("px-2 py-1 text-xs font-medium border rounded cursor-pointer","focus:outline-none focus:ring-2 focus:ring-gray-500",Ce.color),onClick:ge=>ge.stopPropagation(),children:[n.jsxDEV("option",{value:"planning",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:395,columnNumber:9},void 0),n.jsxDEV("option",{value:"in-progress",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:396,columnNumber:9},void 0),n.jsxDEV("option",{value:"completed",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:397,columnNumber:9},void 0),n.jsxDEV("option",{value:"on-hold",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:398,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:385,columnNumber:7},void 0)},Be=(()=>{let H=i;return o!=="all"&&(H=H.filter(ke=>ke.status===o)),a!=null&&a.name&&(H=[...H].sort((ke,Ce)=>{var Xe,nt;const ge=ke.manager===a.name||((Xe=ke.team)==null?void 0:Xe.includes(a.name)),Ie=Ce.manager===a.name||((nt=Ce.team)==null?void 0:nt.includes(a.name));return ge&&!Ie?-1:!ge&&Ie?1:0})),H})(),qe={planning:i.filter(H=>H.status==="planning").length,inProgress:i.filter(H=>H.status==="in-progress").length,completed:i.filter(H=>H.status==="completed").length,onHold:i.filter(H=>H.status==="on-hold").length},Dt=({project:H})=>{var Ce,ge,Ie;const ke=R(H.startDate,H.endDate);return n.jsxDEV("div",{className:"card p-3 md:p-4 hover:border-gray-400 transition-colors",children:[n.jsxDEV("div",{className:"flex items-start justify-between mb-3 md:mb-4",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("h3",{className:"font-bold text-base md:text-lg text-gray-900",children:H.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:444,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:[H.client,""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:445,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:443,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex flex-col items-end gap-2",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[H.status==="planning"&&n.jsxDEV("button",{onClick:()=>tt(H),className:"px-2 py-1 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 rounded transition-colors",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:450,columnNumber:17},void 0),n.jsxDEV(Te,{project:H},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:457,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:448,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>ne(H),className:"text-xs text-gray-600 hover:text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:459,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:447,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:442,columnNumber:9},void 0),n.jsxDEV("div",{className:"space-y-1.5 md:space-y-2 mb-3 md:mb-4 text-xs md:text-sm",children:[n.jsxDEV("div",{className:"text-gray-600",children:[": ",H.location]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:469,columnNumber:11},void 0),n.jsxDEV("div",{className:"text-gray-600",children:[": ",H.startDate&&H.endDate?`${Ze(H.startDate,"MM.dd (eee)",{locale:gt})} - ${Ze(H.endDate,"MM.dd (eee)",{locale:gt})}`:""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:472,columnNumber:11},void 0),n.jsxDEV("div",{className:"text-gray-600",children:[": ",H.manager]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:477,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:468,columnNumber:9},void 0),n.jsxDEV("div",{className:"mb-3 md:mb-4",children:[n.jsxDEV("div",{className:"flex items-center justify-end mb-2",children:n.jsxDEV("button",{onClick:()=>ze(H),className:"px-2.5 py-1 text-[10px] md:text-xs font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:485,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:484,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex items-center justify-between mb-1.5 md:mb-2",children:[n.jsxDEV("span",{className:"text-[10px] md:text-xs text-gray-600",children:" ( )"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:493,columnNumber:13},void 0),n.jsxDEV("span",{className:"text-xs md:text-sm font-medium text-gray-900",children:[ke,"%"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:494,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:492,columnNumber:11},void 0),n.jsxDEV("div",{className:"w-full bg-gray-200 h-1",children:n.jsxDEV("div",{className:"bg-gray-900 h-1 transition-all",style:{width:`${ke}%`}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:497,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:496,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:482,columnNumber:9},void 0),n.jsxDEV("div",{className:"pt-3 border-t border-gray-200 space-y-2",children:[n.jsxDEV("div",{onClick:()=>Ee(H),className:"relative p-2.5 bg-gray-50 hover:bg-gray-100 rounded-lg cursor-pointer transition-colors border border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[n.jsxDEV("span",{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:["",(((Ce=H.meetingNotes)==null?void 0:Ce.length)||0)>0&&n.jsxDEV("span",{className:"text-gray-500",children:["(",(ge=H.meetingNotes)==null?void 0:ge.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:515,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:512,columnNumber:15},void 0),oe(H,"meeting")&&n.jsxDEV("span",{className:"px-1.5 py-0.5 text-[9px] font-bold text-white bg-red-500 rounded-full",children:"NEW"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:519,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:511,columnNumber:13},void 0),H.meetingNotes&&H.meetingNotes.length>0?n.jsxDEV("p",{className:"text-xs text-gray-600 line-clamp-1",children:((Ie=H.meetingNotes[H.meetingNotes.length-1])==null?void 0:Ie.content)||" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:523,columnNumber:15},void 0):n.jsxDEV("p",{className:"text-xs text-gray-400 italic",children:"+   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:527,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:507,columnNumber:11},void 0),(()=>{var $e;const Xe=(($e=H.customerRequests)==null?void 0:$e.filter(v=>!v.completed))||[],nt=Xe[Xe.length-1];return n.jsxDEV("div",{onClick:()=>et(H),className:"relative p-2.5 bg-gray-50 hover:bg-gray-100 rounded-lg cursor-pointer transition-colors border border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-1",children:[n.jsxDEV("span",{className:"text-xs font-semibold text-gray-700 flex items-center gap-1",children:["",Xe.length>0&&n.jsxDEV("span",{className:"text-gray-500",children:["(",Xe.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:544,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:541,columnNumber:19},void 0),oe(H,"request")&&n.jsxDEV("span",{className:"px-1.5 py-0.5 text-[9px] font-bold text-white bg-red-500 rounded-full",children:"NEW"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:548,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:540,columnNumber:17},void 0),nt?n.jsxDEV("p",{className:"text-xs text-gray-600 line-clamp-1",children:nt.content||" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:552,columnNumber:19},void 0):n.jsxDEV("p",{className:"text-xs text-gray-400 italic",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:556,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:536,columnNumber:15},void 0)})(),((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="manager")&&n.jsxDEV("div",{className:"flex justify-end pt-1",children:n.jsxDEV("button",{onClick:()=>be(H.id,H.name),className:"text-xs text-rose-500 hover:text-rose-600",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:564,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:563,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:505,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:441,columnNumber:7},void 0)};return n.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[n.jsxDEV("div",{className:"border-b border-gray-200",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("nav",{className:"flex space-x-4 md:space-x-8 overflow-x-auto",children:[{id:"planning",label:"",count:qe.planning,color:"text-gray-700"},{id:"in-progress",label:"",count:qe.inProgress,color:"text-gray-700"},{id:"completed",label:"",count:qe.completed,color:"text-gray-700"},{id:"all",label:"",count:i.length,color:"text-gray-600"}].map(H=>n.jsxDEV("button",{onClick:()=>l(H.id),className:Gt("py-3 md:py-4 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap",o===H.id?`border-gray-700 ${H.color}`:"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),children:[H.label,n.jsxDEV("span",{className:Gt("ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold",o===H.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"),children:H.count},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:601,columnNumber:17},void 0)]},H.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:590,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:583,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex items-center gap-6 mb-3 md:mb-4",children:[n.jsxDEV("div",{className:"hidden sm:flex border border-gray-300 overflow-hidden rounded",children:[n.jsxDEV("button",{onClick:()=>h("grid"),className:Gt("px-3 md:px-4 py-2 text-xs md:text-sm",m==="grid"?"bg-gray-100":"hover:bg-gray-50"),children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:615,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>h("list"),className:Gt("px-3 md:px-4 py-2 text-xs md:text-sm border-l border-gray-300",m==="list"?"bg-gray-100":"hover:bg-gray-50"),children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:624,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:614,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>{N(null),p(!0)},className:"hidden lg:inline-flex btn btn-primary portrait:px-2 landscape:px-4 py-2 items-center gap-1",children:[n.jsxDEV(Gs,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:642,columnNumber:15},void 0),n.jsxDEV("span",{className:"portrait:hidden landscape:inline",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:643,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:635,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:612,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:581,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:580,columnNumber:7},void 0),m==="grid"||window.innerWidth<768?n.jsxDEV("div",{className:"projects-grid grid grid-cols-1 md:grid-cols-2 ipad:grid-cols-2 ipad-lg:grid-cols-2 ipad-xl:grid-cols-3 ipad-2xl:grid-cols-3 2xl:grid-cols-4 gap-3 md:gap-6",children:Be.map(H=>n.jsxDEV(Dt,{project:H},H.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:652,columnNumber:13},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:650,columnNumber:9},void 0):n.jsxDEV("div",{className:"bg-white border border-gray-200 overflow-hidden",children:n.jsxDEV("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsxDEV("thead",{className:"bg-gray-50",children:n.jsxDEV("tr",{children:[n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:660,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:663,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:666,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:669,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:672,columnNumber:17},void 0),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:675,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:659,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:658,columnNumber:13},void 0),n.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:Be.map(H=>{var Ce,ge,Ie,Xe;const ke=R(H.startDate,H.endDate);return n.jsxDEV("tr",{className:"hover:bg-gray-50",children:[n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{children:[n.jsxDEV("p",{className:"font-medium",children:H.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:687,columnNumber:25},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500",children:H.location},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:688,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:686,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:685,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("p",{className:"text-sm",children:[H.client,""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:692,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:691,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:H.startDate&&H.endDate?n.jsxDEV(n.Fragment,{children:[Ze(H.startDate,"yyyy.MM.dd (eee)",{locale:gt})," -",n.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:698,columnNumber:27},void 0),Ze(H.endDate,"yyyy.MM.dd (eee)",{locale:gt})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:696,columnNumber:25},void 0):""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:694,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"flex items-center gap-2",children:[H.status==="planning"&&n.jsxDEV("button",{onClick:()=>tt(H),className:"px-2 py-1 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 rounded transition-colors",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:706,columnNumber:27},void 0),n.jsxDEV(Te,{project:H},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:713,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:704,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:703,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("button",{onClick:()=>ze(H),className:"px-2.5 py-1 text-xs font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:718,columnNumber:25},void 0),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("div",{className:"w-24 bg-gray-200 h-1 mr-2",children:n.jsxDEV("div",{className:"bg-gray-900 h-1",style:{width:`${ke}%`}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:726,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:725,columnNumber:27},void 0),n.jsxDEV("span",{className:"text-sm",children:[ke,"%"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:731,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:724,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:717,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:716,columnNumber:21},void 0),n.jsxDEV("td",{className:"px-6 py-4",children:n.jsxDEV("div",{className:"flex flex-col gap-1.5 min-w-[280px]",children:[n.jsxDEV("div",{onClick:()=>Ee(H),className:"flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 rounded cursor-pointer transition-colors",children:[n.jsxDEV("span",{className:"text-xs font-medium text-gray-700 whitespace-nowrap flex items-center gap-1",children:["",(((Ce=H.meetingNotes)==null?void 0:Ce.length)||0)>0&&n.jsxDEV("span",{className:"text-gray-500",children:["(",(ge=H.meetingNotes)==null?void 0:ge.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:745,columnNumber:31},void 0),oe(H,"meeting")&&n.jsxDEV("span",{className:"px-1 py-0.5 text-[9px] font-bold text-white bg-red-500 rounded",children:"N"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:748,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:742,columnNumber:27},void 0),n.jsxDEV("span",{className:"text-xs text-gray-600 truncate flex-1",children:(Ie=H.meetingNotes)!=null&&Ie.length?((Xe=H.meetingNotes[H.meetingNotes.length-1])==null?void 0:Xe.content)||"-":" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:751,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:738,columnNumber:25},void 0),(()=>{var v;const nt=((v=H.customerRequests)==null?void 0:v.filter(B=>!B.completed))||[],$e=nt[nt.length-1];return n.jsxDEV("div",{onClick:()=>et(H),className:"flex items-center gap-2 p-2 bg-gray-50 hover:bg-gray-100 rounded cursor-pointer transition-colors",children:[n.jsxDEV("span",{className:"text-xs font-medium text-gray-700 whitespace-nowrap flex items-center gap-1",children:["",nt.length>0&&n.jsxDEV("span",{className:"text-gray-500",children:["(",nt.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:767,columnNumber:35},void 0),oe(H,"request")&&n.jsxDEV("span",{className:"px-1 py-0.5 text-[9px] font-bold text-white bg-red-500 rounded",children:"N"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:770,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:764,columnNumber:31},void 0),n.jsxDEV("span",{className:"text-xs text-gray-600 truncate flex-1",children:$e?$e.content||"-":"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:773,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:760,columnNumber:29},void 0)})(),n.jsxDEV("div",{className:"flex space-x-2 pt-1",children:[n.jsxDEV("button",{onClick:()=>ne(H),className:"text-xs text-gray-600 hover:text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:781,columnNumber:27},void 0),((a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="manager")&&n.jsxDEV("button",{onClick:()=>be(H.id,H.name),className:"text-xs text-rose-600 hover:text-rose-700",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:788,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:780,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:736,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:735,columnNumber:21},void 0)]},H.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:684,columnNumber:19},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:680,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:657,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:656,columnNumber:9},void 0),d&&n.jsxDEV(Cu,{project:u,onClose:()=>{p(!1),N(null)},onSave:je},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:807,columnNumber:9},void 0),j&&T&&n.jsxDEV(_u,{projectName:T.name,meetingNotes:T.meetingNotes||[],onClose:()=>{x(!1),ie(null)},onSave:we,onDelete:Me},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:818,columnNumber:9},void 0),A&&T&&n.jsxDEV(Au,{projectName:T.name,customerRequests:T.customerRequests||[],onClose:()=>{L(!1),ie(null)},onSave:se,onToggleComplete:Ve,onDelete:Ye},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:831,columnNumber:9},void 0),k&&T&&n.jsxDEV(Eu,{projectName:T.name,entrancePassword:T.entrancePassword||"",sitePassword:T.sitePassword||"",onClose:()=>{F(!1),ie(null)},onSave:z},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:845,columnNumber:9},void 0),me&&T&&n.jsxDEV(wu,{projectName:T.name,onClose:()=>{Q(!1),ie(null)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:858,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Projects.tsx",lineNumber:578,columnNumber:5},void 0)};var ga={},yo={exports:{}};(function(t){function s(e){return e&&e.__esModule?e:{default:e}}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(yo);var Ut=yo.exports,ha={},xo={exports:{}},vo={exports:{}},ko={exports:{}},Do={exports:{}};(function(t){function s(e){"@babel/helpers - typeof";return t.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Do);var tn=Do.exports,Vo={exports:{}};(function(t){var s=tn.default;function e(r,a){if(s(r)!="object"||!r)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var o=i.call(r,a||"default");if(s(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Vo);var Lu=Vo.exports;(function(t){var s=tn.default,e=Lu;function r(a){var i=e(a,"string");return s(i)=="symbol"?i:i+""}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(ko);var Co=ko.exports;(function(t){var s=Co;function e(r,a,i){return(a=s(a))in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,r}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(vo);var _o=vo.exports;(function(t){var s=_o;function e(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);i&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(a,m).enumerable})),o.push.apply(o,l)}return o}function r(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?e(Object(o),!0).forEach(function(l){s(a,l,o[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(o,l))})}return a}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(xo);var Ls=xo.exports,Ao={exports:{}},Eo={exports:{}};(function(t){function s(e,r){if(e==null)return{};var a={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.indexOf(i)!==-1)continue;a[i]=e[i]}return a}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Eo);var Bu=Eo.exports;(function(t){var s=Bu;function e(r,a){if(r==null)return{};var i,o,l=s(r,a);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(r);for(o=0;o<m.length;o++)i=m[o],a.indexOf(i)===-1&&{}.propertyIsEnumerable.call(r,i)&&(l[i]=r[i])}return l}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Ao);var ba=Ao.exports,wo={exports:{}};(function(t){function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(wo);var qs=wo.exports,jo={exports:{}};(function(t){var s=Co;function e(a,i){for(var o=0;o<i.length;o++){var l=i[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,s(l.key),l)}}function r(a,i,o){return i&&e(a.prototype,i),o&&e(a,o),Object.defineProperty(a,"prototype",{writable:!1}),a}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(jo);var $s=jo.exports,Lo={exports:{}},Bo={exports:{}};(function(t){function s(e){return t.exports=s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Bo);var Hu=Bo.exports,Ho={exports:{}};(function(t){function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t.exports=s=function(){return!!e},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Ho);var Uu=Ho.exports,Uo={exports:{}},So={exports:{}};(function(t){function s(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(So);var Su=So.exports;(function(t){var s=tn.default,e=Su;function r(a,i){if(i&&(s(i)=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e(a)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(Uo);var Pu=Uo.exports;(function(t){var s=Hu,e=Uu,r=Pu;function a(i,o,l){return o=s(o),r(i,e()?Reflect.construct(o,l||[],s(i).constructor):o.apply(i,l))}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports})(Lo);var sn=Lo.exports,Po={exports:{}},Mo={exports:{}};(function(t){function s(e,r){return t.exports=s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},t.exports.__esModule=!0,t.exports.default=t.exports,s(e,r)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(Mo);var Mu=Mo.exports;(function(t){var s=Mu;function e(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),a&&s(r,a)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Po);var nn=Po.exports;const wn=_n(om);var ns={},Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.views=Zs.navigate=void 0;Zs.navigate={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"};Zs.views={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"};var Iu=Ut.default;Object.defineProperty(ns,"__esModule",{value:!0});ns.views=ns.dateRangeFormat=ns.dateFormat=ns.accessor=ns.DayLayoutAlgorithmPropType=void 0;var qt=Iu(_i),ai=Zs,ii=Object.keys(ai.views).map(function(t){return ai.views[t]});ns.accessor=qt.default.oneOfType([qt.default.string,qt.default.func]);ns.dateFormat=qt.default.any;ns.dateRangeFormat=qt.default.func;ns.views=qt.default.oneOfType([qt.default.arrayOf(qt.default.oneOf(ii)),qt.default.objectOf(function(t,s){var e=ii.indexOf(s)!==-1&&typeof t[s]=="boolean";if(e)return null;for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];return qt.default.elementType.apply(qt.default,[t,s].concat(a))})]);ns.DayLayoutAlgorithmPropType=qt.default.oneOfType([qt.default.oneOf(["overlap","no-overlap"]),qt.default.func]);var cr={},rn={},Tu=Ut.default;Object.defineProperty(rn,"__esModule",{value:!0});rn.accessor=Io;rn.wrapAccessor=void 0;var Ru=Tu(tn);function Io(t,s){var e=null;return typeof s=="function"?e=s(t):typeof s=="string"&&(0,Ru.default)(t)==="object"&&t!=null&&s in t&&(e=t[s]),e}rn.wrapAccessor=function(s){return function(e){return Io(e,s)}};var Ws={},Fu=Ut.default;Object.defineProperty(Ws,"__esModule",{value:!0});Ws.DnDContext=void 0;var Ou=Fu(b);Ws.DnDContext=Ou.default.createContext();var zs=Ut.default;Object.defineProperty(cr,"__esModule",{value:!0});cr.default=void 0;var qu=zs(Ls),$u=zs(qs),Wu=zs($s),zu=zs(sn),Yu=zs(nn),Ks=zs(b),oi=zs(wn),li=rn,Ku=Ws,To=function(t){function s(){var e;(0,$u.default)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=(0,zu.default)(this,s,[].concat(a)),e.handleResizeUp=function(o){o.button===0&&e.context.draggable.onBeginAction(e.props.event,"resize","UP")},e.handleResizeDown=function(o){o.button===0&&e.context.draggable.onBeginAction(e.props.event,"resize","DOWN")},e.handleResizeLeft=function(o){o.button===0&&e.context.draggable.onBeginAction(e.props.event,"resize","LEFT")},e.handleResizeRight=function(o){o.button===0&&e.context.draggable.onBeginAction(e.props.event,"resize","RIGHT")},e.handleStartDragging=function(o){var l;if(o.button===0){var m=(l=o.target.getAttribute("class"))===null||l===void 0?void 0:l.includes("rbc-addons-dnd-resize");if(!m){var h=(0,qu.default)({},e.props.event);h.sourceResource=e.props.resource,e.context.draggable.onBeginAction(e.props.event,"move")}}},e}return(0,Yu.default)(s,t),(0,Wu.default)(s,[{key:"renderAnchor",value:function(r){var a=r==="Up"||r==="Down"?"ns":"ew";return Ks.default.createElement("div",{className:"rbc-addons-dnd-resize-".concat(a,"-anchor"),onMouseDown:this["handleResize".concat(r)]},Ks.default.createElement("div",{className:"rbc-addons-dnd-resize-".concat(a,"-icon")}))}},{key:"render",value:function(){var r=this.props,a=r.event,i=r.type,o=r.continuesPrior,l=r.continuesAfter,m=r.resizable,h=this.props.children;if(a.__isPreview)return Ks.default.cloneElement(h,{className:(0,oi.default)(h.props.className,"rbc-addons-dnd-drag-preview")});var d=this.context.draggable,p=d.draggableAccessor,u=d.resizableAccessor,N=p?!!(0,li.accessor)(a,p):!0;if(!N)return h;var j=m&&(u?!!(0,li.accessor)(a,u):!0);if(j||N){var x={onMouseDown:this.handleStartDragging,onTouchStart:this.handleStartDragging};if(j){var A=null,L=null;i==="date"?(A=!o&&this.renderAnchor("Left"),L=!l&&this.renderAnchor("Right")):(A=!o&&this.renderAnchor("Up"),L=!l&&this.renderAnchor("Down")),x.children=Ks.default.createElement("div",{className:"rbc-addons-dnd-resizable"},A,h.props.children,L)}d.dragAndDropAction.interacting&&d.dragAndDropAction.event===a&&(x.className=(0,oi.default)(h.props.className,"rbc-addons-dnd-dragged-event")),h=Ks.default.cloneElement(h,x)}return h}}])}(Ks.default.Component);To.contextType=Ku.DnDContext;cr.default=To;var dr={},Ro={exports:{}};(function(t){var s=tn.default;function e(r,a){if(typeof WeakMap=="function")var i=new WeakMap,o=new WeakMap;return(t.exports=e=function(m,h){if(!h&&m&&m.__esModule)return m;var d,p,u={__proto__:null,default:m};if(m===null||s(m)!="object"&&typeof m!="function")return u;if(d=h?o:i){if(d.has(m))return d.get(m);d.set(m,u)}for(var N in m)N!=="default"&&{}.hasOwnProperty.call(m,N)&&((p=(d=Object.defineProperty)&&Object.getOwnPropertyDescriptor(m,N))&&(p.get||p.set)?d(u,N,p):u[N]=m[N]);return u},t.exports.__esModule=!0,t.exports.default=t.exports)(r,a)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Ro);var Fo=Ro.exports;function Na(t,s,e,r){if(e===void 0&&(e=!1),r===void 0&&(r=!0),t){var a=document.createEvent("HTMLEvents");a.initEvent(s,e,r),t.dispatchEvent(a)}}function Qu(t){var s=Zt(t,"transitionDuration")||"",e=s.indexOf("ms")===-1?1e3:1;return parseFloat(s)*e}function Xu(t,s,e){e===void 0&&(e=5);var r=!1,a=setTimeout(function(){r||Na(t,"transitionend",!0)},s+e),i=sr(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(a),i()}}function ya(t,s,e,r){e==null&&(e=Qu(t)||0);var a=Xu(t,e,r),i=sr(t,"transitionend",s);return function(){a(),i()}}var mi={transition:"","transition-duration":"","transition-delay":"","transition-timing-function":""};function ci(t){var s=t.node,e=t.properties,r=t.duration,a=r===void 0?200:r,i=t.easing,o=t.callback,l=[],m={},h="";Object.keys(e).forEach(function(u){var N=e[u];lm(u)?h+=u+"("+N+") ":(m[u]=N,l.push(mm(u)))}),h&&(m.transform=h,l.push("transform"));function d(u){u.target===u.currentTarget&&(Zt(s,mi),o&&o.call(this,u))}a>0&&(m.transition=l.join(", "),m["transition-duration"]=a/1e3+"s",m["transition-delay"]="0s",m["transition-timing-function"]=i||"linear");var p=ya(s,d,a);return s.clientLeft,Zt(s,m),{cancel:function(){p(),Zt(s,mi)}}}function Oo(t,s,e,r,a){if(!("nodeType"in t))return ci(t);if(!s)throw new Error("must include properties to animate");return typeof r=="function"&&(a=r,r=""),ci({node:t,properties:s,duration:e,easing:r,callback:a})}function qo(t,s,e){if(t){if(typeof e>"u")return t.getAttribute(s);!e&&e!==""?t.removeAttribute(s):t.setAttribute(s,String(e))}}function $o(t){return t?Array.from(t.children):[]}function Wo(t){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}return null}var Ju=Function.prototype.bind.call(Function.prototype.call,[].slice);function zo(t){return t?Ju(t.childNodes):[]}function Yo(t,s){return function(r){var a=r.currentTarget,i=r.target,o=Qr(a,t);o.some(function(l){return Xr(l,i)})&&s.call(this,r)}}function Ko(t,s){return t&&s&&s.parentNode?(s.nextSibling?s.parentNode.insertBefore(t,s.nextSibling):s.parentNode.appendChild(t),t):null}var Gu=/^(?:input|select|textarea|button)$/i;function Qo(t){return t?Gu.test(t.nodeName):!1}function Xo(t){return t?!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length):!1}function Jo(t,s,e){s===void 0&&(s=null),e===void 0&&(e=null);for(var r=[];t;t=t.nextElementSibling)if(t!==s){if(e&&Jr(t,e))break;r.push(t)}return r}function Go(t,s){return Jo(t,t,s)}function Zu(t,s){var e=null,r=[];for(e=t?t[s]:null;e&&e.nodeType!==9;)r.push(e),e=e[s]||null;return r}function Zo(t){return Zu(t,"parentElement")}function el(t,s){return t&&s?(s.firstElementChild?s.insertBefore(t,s.firstElementChild):s.appendChild(t),t):null}function tl(t){return t&&t.parentNode?(t.parentNode.removeChild(t),t):null}function xa(t,s){var e=Zt(t,"position"),r=e==="absolute",a=t.ownerDocument;if(e==="fixed")return a||document;for(;(t=t.parentNode)&&!cm(t);){var i=r&&Zt(t,"position")==="static",o=(Zt(t,"overflow")||"")+(Zt(t,"overflow-y")||"")+Zt(t,"overflow-x");if(!i&&/(auto|scroll)/.test(o)&&(s||nr(t)<t.scrollHeight))return t}return a||document}function sl(t,s){var e=Xn(t),r={top:0,left:0};if(t){var a=s||xa(t),i=dm(a),o=Jn(a),l=nr(a,!0);i||(r=Xn(a)),e={top:e.top-r.top,left:e.left-r.left,height:e.height,width:e.width};var m=e.height,h=e.top+(i?0:o),d=h+m;o=o>h?h:d>o+l?d-l:o;var p=Gr(function(){return Jn(a,o)});return function(){return Zr(p)}}}function nl(t){return Jo(t&&t.parentElement?t.parentElement.firstElementChild:null,t)}var ep=/&nbsp;/gi,tp=/\xA0/g,sp=/\s+([^\s])/gm;function rl(t,s,e){s===void 0&&(s=!0),e===void 0&&(e=!0);var r="";return t&&(r=(t.textContent||"").replace(ep," ").replace(tp," "),s&&(r=r.trim()),e&&(r=r.replace(sp," $1"))),r}function al(t,s){t.classList?t.classList.toggle(s):ea(t,s)?ta(t,s):sa(t,s)}const np={addEventListener:Ii,removeEventListener:Mi,triggerEvent:Na,animate:Oo,filter:Yo,listen:sr,style:Zt,getComputedStyle:Pi,attribute:qo,activeElement:Si,ownerDocument:Ui,ownerWindow:Hi,requestAnimationFrame:Gr,cancelAnimationFrame:Zr,matches:Jr,height:nr,width:Bi,offset:Xn,offsetParent:Li,position:ji,contains:Xr,scrollbarSize:wi,scrollLeft:Ei,scrollParent:xa,scrollTo:sl,scrollTop:Jn,querySelectorAll:Qr,closest:Ai,addClass:sa,removeClass:ta,hasClass:ea,toggleClass:al,transitionEnd:ya,childNodes:zo,childElements:$o,nextUntil:Go,parents:Zo,siblings:nl,clear:Wo,insertAfter:Ko,isInput:Qo,isVisible:Xo,prepend:el,remove:tl,text:rl},rp=Object.freeze(Object.defineProperty({__proto__:null,activeElement:Si,addClass:sa,addEventListener:Ii,animate:Oo,attribute:qo,cancelAnimationFrame:Zr,childElements:$o,childNodes:zo,clear:Wo,closest:Ai,contains:Xr,default:np,filter:Yo,getComputedStyle:Pi,hasClass:ea,height:nr,insertAfter:Ko,isInput:Qo,isVisible:Xo,listen:sr,matches:Jr,nextUntil:Go,offset:Xn,offsetParent:Li,ownerDocument:Ui,ownerWindow:Hi,parents:Zo,position:ji,prepend:el,querySelectorAll:Qr,remove:tl,removeClass:ta,removeEventListener:Mi,requestAnimationFrame:Gr,scrollLeft:Ei,scrollParent:xa,scrollTo:sl,scrollTop:Jn,scrollbarSize:wi,siblings:nl,style:Zt,text:rl,toggleClass:al,transitionEnd:ya,triggerEvent:Na,width:Bi},Symbol.toStringTag,{value:"Module"})),ap=_n(rp);var $r={exports:{}};(function(t,s){s.__esModule=!0,s.default=r;var e=Function.prototype.bind.call(Function.prototype.call,[].slice);function r(a,i){return e(a.querySelectorAll(i))}t.exports=s.default})($r,$r.exports);var ip=$r.exports,rs={};const op=_n(um),lp=_n(pm),mp=_n(fm);var an=Ut.default;Object.defineProperty(rs,"__esModule",{value:!0});rs.default=void 0;rs.getBoundsForNode=Cn;rs.getEventNodeFromPoint=ol;rs.getShowMoreNodeFromPoint=ll;rs.isEvent=gp;rs.isShowMore=hp;rs.objectsCollide=zr;var cp=an(tn),dp=an(qs),up=an($s),Wr=an(op),il=an(lp),pp=an(mp);function Ht(t,s){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return(0,pp.default)(e,t,s,{passive:!1})}function fp(t,s,e){return!t||(0,Wr.default)(t,document.elementFromPoint(s,e))}function ol(t,s){var e=s.clientX,r=s.clientY,a=document.elementFromPoint(e,r);return(0,il.default)(a,".rbc-event",t)}function ll(t,s){var e=s.clientX,r=s.clientY,a=document.elementFromPoint(e,r);return(0,il.default)(a,".rbc-show-more",t)}function gp(t,s){return!!ol(t,s)}function hp(t,s){return!!ll(t,s)}function pn(t){var s=t;return t.touches&&t.touches.length&&(s=t.touches[0]),{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY}}var di=5,bp=250,Np=function(){function t(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.global,a=r===void 0?!1:r,i=e.longPressThreshold,o=i===void 0?250:i,l=e.validContainers,m=l===void 0?[]:l;(0,dp.default)(this,t),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=s,this.globalMouse=!s||a,this.longPressThreshold=o,this.validContainers=m,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ht("touchmove",function(){},window),this._removeKeyDownListener=Ht("keydown",this._keyListener),this._removeKeyUpListener=Ht("keyup",this._keyListener),this._removeDropFromOutsideListener=Ht("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ht("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return(0,up.default)(t,[{key:"on",value:function(e,r){var a=this._listeners[e]||(this._listeners[e]=[]);return a.push(r),{remove:function(){var o=a.indexOf(r);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var o,l=this._listeners[e]||[];return l.forEach(function(m){o===void 0&&(o=m.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var r=this._selectRect;return!r||!this.selecting?!1:zr(r,Cn(e))}},{key:"filter",value:function(e){var r=this._selectRect;return!r||!this.selecting?[]:e.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(e,r){var a=this,i=null,o=null,l=null,m=function(u){i=setTimeout(function(){d(),e(u)},a.longPressThreshold),o=Ht("touchmove",function(){return d()}),l=Ht("touchend",function(){return d()})},h=Ht("touchstart",m),d=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return r&&m(r),function(){d(),h()}}},{key:"_addInitialEventListener",value:function(){var e=this,r=Ht("mousedown",function(i){e._removeInitialEventListener(),e._handleInitialEvent(i),e._removeInitialEventListener=Ht("mousedown",e._handleInitialEvent)}),a=Ht("touchstart",function(i){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,i)});this._removeInitialEventListener=function(){r(),a()}}},{key:"_dropFromOutsideListener",value:function(e){var r=pn(e),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:o,clientY:l}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var r=pn(e),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:o,clientY:l}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(this._initialEvent=e,!this.isDetached){var r=pn(e),a=r.clientX,i=r.clientY,o=r.pageX,l=r.pageY,m=this.container(),h,d;if(!(e.which===3||e.button===2||!fp(m,a,i))){if(!this.globalMouse&&m&&!(0,Wr.default)(m,e.target)){var p=yp(0),u=p.top,N=p.left,j=p.bottom,x=p.right;if(d=Cn(m),h=zr({top:d.top-u,left:d.left-N,bottom:d.bottom+j,right:d.right+x},{top:l,left:o}),!h)return}var A=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:o,y:l,clientX:a,clientY:i});if(A!==!1)switch(e.type){case"mousedown":this._removeEndListener=Ht("mouseup",this._handleTerminatingEvent),this._onEscListener=Ht("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ht("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=Ht("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ht("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(e){var r=e.target,a=this.validContainers;return!a||!a.length||!r?!0:a.some(function(i){return!!r.closest(i)})}},{key:"_handleTerminatingEvent",value:function(e){var r=this.selecting,a=this._selectRect;if(!r&&e.type.includes("key")&&(e=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!e){var i=!this.container||(0,Wr.default)(this.container(),e.target),o=this._isWithinValidContainer(e);return e.key==="Escape"||!o?this.emit("reset"):!r&&i?this._handleClickEvent(e):r?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var r=pn(e),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY,m=new Date().getTime();return this._lastClickData&&m-this._lastClickData.timestamp<bp?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:m},this.emit("click",{x:a,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(e){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,a=r.x,i=r.y,o=pn(e),l=o.pageX,m=o.pageY,h=Math.abs(a-l),d=Math.abs(i-m),p=Math.min(l,a),u=Math.min(m,i),N=this.selecting,j=this.isClick(l,m);j&&!N&&!(h||d)||(!N&&!j&&this.emit("selectStart",this._initialEventData),j||(this.selecting=!0,this._selectRect={top:u,left:p,x:l,y:m,right:p+h,bottom:u+d},this.emit("selecting",this._selectRect)),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,r){var a=this._initialEventData,i=a.x,o=a.y,l=a.isTouch;return!l&&Math.abs(e-i)<=di&&Math.abs(r-o)<=di}}])}();function yp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,cp.default)(t)!=="object"&&(t={top:t,left:t,right:t,bottom:t}),t}function zr(t,s){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=Cn(t),a=r.top,i=r.left,o=r.right,l=o===void 0?i:o,m=r.bottom,h=m===void 0?a:m,d=Cn(s),p=d.top,u=d.left,N=d.right,j=N===void 0?u:N,x=d.bottom,A=x===void 0?p:x;return!(h-e<p||a+e>A||l-e<u||i+e>j)}function Cn(t){if(!t.getBoundingClientRect)return t;var s=t.getBoundingClientRect(),e=s.left+ui("left"),r=s.top+ui("top");return{top:r,left:e,right:(t.offsetWidth||0)+e,bottom:(t.offsetHeight||0)+r}}function ui(t){if(t==="left")return window.pageXOffset||document.body.scrollLeft||0;if(t==="top")return window.pageYOffset||document.body.scrollTop||0}rs.default=Np;var ur={},pr=Ut.default;Object.defineProperty(ur,"__esModule",{value:!0});ur.default=void 0;var xp=pr(_o),pi=pr(Ls),vp=pr(wn),fn=pr(b);function In(t){return typeof t=="string"?t:t+"%"}function kp(t){var s=t.style,e=t.className,r=t.event,a=t.accessors,i=t.rtl,o=t.selected,l=t.label,m=t.continuesPrior,h=t.continuesAfter,d=t.getters,p=t.onClick,u=t.onDoubleClick,N=t.isBackgroundEvent,j=t.onKeyPress,x=t.components,A=x.event,L=x.eventWrapper,k=a.title(r),F=a.tooltip(r),me=a.end(r),Q=a.start(r),T=d.eventProp(r,Q,me,o),ie=[fn.default.createElement("div",{key:"1",className:"rbc-event-label"},l),fn.default.createElement("div",{key:"2",className:"rbc-event-content"},A?fn.default.createElement(A,{event:r,title:k}):k)],_=s.height,le=s.top,ve=s.width,oe=s.xOffset,R=(0,pi.default)((0,pi.default)({},T.style),{},(0,xp.default)({top:In(le),height:In(_),width:In(ve)},i?"right":"left",In(oe)));return fn.default.createElement(L,Object.assign({type:"time"},t),fn.default.createElement("div",{role:"button",tabIndex:0,onClick:p,onDoubleClick:u,style:R,onKeyDown:j,title:F?(typeof l=="string"?l+": ":"")+F:void 0,className:(0,vp.default)(N?"rbc-background-event":"rbc-event",e,T.className,{"rbc-selected":o,"rbc-event-continues-earlier":m,"rbc-event-continues-later":h})},ie))}ur.default=kp;var xs={},ml=Ut.default;Object.defineProperty(xs,"__esModule",{value:!0});xs.dragAccessors=void 0;xs.eventTimes=jp;xs.mergeComponents=Ep;xs.pointInColumn=wp;var Dp=ml(Ls),Vp=ml(ba),fi=rn,Cp=b,_p=["children"];xs.dragAccessors={start:(0,fi.wrapAccessor)(function(t){return t.start}),end:(0,fi.wrapAccessor)(function(t){return t.end})};function Ap(){for(var t=arguments.length,s=new Array(t),e=0;e<t;e++)s[e]=arguments[e];var r=function(i){var o=i.children,l=(0,Vp.default)(i,_p);return s.filter(Boolean).reduceRight(function(m,h){return(0,Cp.createElement)(h,l,m)},o)};return r}function Ep(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,e=Object.keys(s),r=(0,Dp.default)({},t);return e.forEach(function(a){r[a]=t[a]?Ap(t[a],s[a]):s[a]}),r}function wp(t,s){var e=t.left,r=t.right,a=t.top,i=s.x,o=s.y;return i<r+10&&i>e&&o>a}function jp(t,s,e){var r=s.start(t),a=s.end(t),i=e.eq(r,a,"minutes")&&e.diff(r,a,"minutes")===0;i&&(a=e.add(a,1,"day"));var o=e.diff(r,a,"milliseconds");return{start:r,end:a,duration:o}}var Lp=Fo.default,Bs=Ut.default;Object.defineProperty(dr,"__esModule",{value:!0});dr.default=void 0;var ks=Bs(Ls),Bp=Bs(qs),Hp=Bs($s),Up=Bs(sn),Sp=Bs(nn),Ar=ap,Pp=Bs(ip),Ts=Bs(b),Mp=Ws,Ds=Lp(rs),Ip=Bs(ur),bs=xs,cl=function(t){function s(){var e;(0,Bp.default)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=(0,Up.default)(this,s,[].concat(a)),e.handleMove=function(o,l){if(!(0,bs.pointInColumn)(l,o))return e.reset();var m=e.context.draggable.dragAndDropAction.event,h=e.props,d=h.accessors,p=h.slotMetrics,u=p.closestSlotFromPoint({y:o.y-e.eventOffsetTop,x:o.x},l),N=(0,bs.eventTimes)(m,d,e.props.localizer),j=N.duration,x=e.props.localizer.add(u,j,"milliseconds");e.update(m,p.getRange(u,x,!1,!0))},e.handleDropFromOutside=function(o,l){var m=e.props,h=m.slotMetrics,d=m.resource,p=h.closestSlotFromPoint({y:o.y,x:o.x},l),u=e._calculateDnDEnd(p);e.context.draggable.onDropFromOutside({start:p,end:u,allDay:!1,resource:d}),e.reset()},e.handleDragOverFromOutside=function(o,l){var m=e.props.slotMetrics,h=m.closestSlotFromPoint({y:o.y,x:o.x},l),d=e._calculateDnDEnd(h),p=e.context.draggable.dragFromOutsideItem();e.update(p,m.getRange(h,d,!1,!0))},e._calculateDnDEnd=function(o){var l=e.props,m=l.accessors,h=l.slotMetrics,d=l.localizer,p=e.context.draggable.dragFromOutsideItem(),u=(0,bs.eventTimes)(p,m,d),N=u.duration,j=h.nextSlot(o),x=!isNaN(N);if(x){var A=d.add(o,N,"milliseconds");j=new Date(Math.max(A,j))}return j},e.updateParentScroll=function(o,l){setTimeout(function(){var m=(0,Pp.default)(l,".rbc-addons-dnd-drag-preview")[0];m&&(m.offsetTop<o.scrollTop?(0,Ar.scrollTop)(o,Math.max(m.offsetTop,0)):m.offsetTop+m.offsetHeight>o.scrollTop+o.clientHeight&&(0,Ar.scrollTop)(o,Math.min(m.offsetTop-o.offsetHeight+m.offsetHeight,o.scrollHeight)))})},e._selectable=function(){var o=e.ref.current,l=o.children[0],m=!1,h=e._selector=new Ds.default(function(){return o.closest(".rbc-time-view")}),d=(0,Ar.scrollParent)(o);h.on("beforeSelect",function(p){var u=e.context.draggable.dragAndDropAction;if(!u.action)return!1;if(u.action==="resize")return(0,bs.pointInColumn)((0,Ds.getBoundsForNode)(l),p);var N=(0,Ds.getEventNodeFromPoint)(l,p);if(!N)return!1;e.eventOffsetTop=p.y-(0,Ds.getBoundsForNode)(N).top}),h.on("selecting",function(p){var u=(0,Ds.getBoundsForNode)(l),N=e.context.draggable.dragAndDropAction;N.action==="move"&&(e.updateParentScroll(d,l),e.handleMove(p,u)),N.action==="resize"&&(e.updateParentScroll(d,l),e.handleResize(p,u))}),h.on("dropFromOutside",function(p){if(e.context.draggable.onDropFromOutside){var u=(0,Ds.getBoundsForNode)(l);(0,bs.pointInColumn)(u,p)&&e.handleDropFromOutside(p,u)}}),h.on("dragOverFromOutside",function(p){var u=e.context.draggable.dragFromOutsideItem?e.context.draggable.dragFromOutsideItem():null;if(u){var N=(0,Ds.getBoundsForNode)(l);if(!(0,bs.pointInColumn)(N,p))return e.reset();e.handleDragOverFromOutside(p,N)}}),h.on("selectStart",function(){m=!0,e.context.draggable.onStart()}),h.on("select",function(p){var u=(0,Ds.getBoundsForNode)(l);m=!1;var N=e.context.draggable.dragAndDropAction;if(N.action==="resize")e.handleInteractionEnd();else{if(!e.state.event||!(0,bs.pointInColumn)(u,p))return;e.handleInteractionEnd()}}),h.on("click",function(){m&&e.reset(),e.context.draggable.onEnd(null)}),h.on("reset",function(){e.reset(),e.context.draggable.onEnd(null)})},e.handleInteractionEnd=function(){var o=e.props.resource,l=e.state.event;e.reset(),e.context.draggable.onEnd({start:l.start,end:l.end,resourceId:o})},e._teardownSelectable=function(){e._selector&&(e._selector.teardown(),e._selector=null)},e.state={},e.ref=Ts.default.createRef(),e}return(0,Sp.default)(s,t),(0,Hp.default)(s,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.event&&this.setState({event:null,top:null,height:null})}},{key:"update",value:function(r,a){var i=a.startDate,o=a.endDate,l=a.top,m=a.height,h=this.state.event;h&&i===h.start&&o===h.end||this.setState({top:l,height:m,event:(0,ks.default)((0,ks.default)({},r),{},{start:i,end:o})})}},{key:"handleResize",value:function(r,a){var i=this.props,o=i.accessors,l=i.slotMetrics,m=i.localizer,h=this.context.draggable.dragAndDropAction,d=h.event,p=h.direction,u=l.closestSlotFromPoint(r,a),N=(0,bs.eventTimes)(d,o,m),j=N.start,x=N.end,A;if(p==="UP"){var L=m.min(u,l.closestSlotFromDate(x,-1));A=l.getRange(L,x),A=(0,ks.default)((0,ks.default)({},A),{},{endDate:x})}else if(p==="DOWN"){var k=m.max(u,l.closestSlotFromDate(j));A=l.getRange(j,k),A=(0,ks.default)((0,ks.default)({},A),{},{startDate:j})}this.update(d,A)}},{key:"renderContent",value:function(){var r=this.props,a=r.children,i=r.accessors,o=r.components,l=r.getters,m=r.slotMetrics,h=r.localizer,d=this.state,p=d.event,u=d.top,N=d.height;if(!p)return a;var j=a.props.children,x=p.start,A=p.end,L,k="eventTimeRangeFormat",F=m.startsBeforeDay(x),me=m.startsAfterDay(A);return F?k="eventTimeRangeEndFormat":me&&(k="eventTimeRangeStartFormat"),F&&me?L=h.messages.allDay:L=h.format({start:x,end:A},k),Ts.default.cloneElement(a,{children:Ts.default.createElement(Ts.default.Fragment,null,j,p&&Ts.default.createElement(Ip.default,{event:p,label:L,className:"rbc-addons-dnd-drag-preview",style:{top:u,height:N,width:100},getters:l,components:o,accessors:(0,ks.default)((0,ks.default)({},i),bs.dragAccessors),continuesPrior:F,continuesAfter:me}))})}},{key:"render",value:function(){return Ts.default.createElement("div",{ref:this.ref},this.renderContent())}}])}(Ts.default.Component);cl.contextType=Mp.DnDContext;dr.default=cl;var fr={},dl={exports:{}},ul={exports:{}},pl={exports:{}};(function(t){function s(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,i=Array(r);a<r;a++)i[a]=e[a];return i}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(pl);var fl=pl.exports;(function(t){var s=fl;function e(r){if(Array.isArray(r))return s(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(ul);var Tp=ul.exports,gl={exports:{}};(function(t){function s(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(gl);var Rp=gl.exports,hl={exports:{}};(function(t){var s=fl;function e(r,a){if(r){if(typeof r=="string")return s(r,a);var i={}.toString.call(r).slice(8,-1);return i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set"?Array.from(r):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(r,a):void 0}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(hl);var Fp=hl.exports,bl={exports:{}};(function(t){function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(bl);var Op=bl.exports;(function(t){var s=Tp,e=Rp,r=Fp,a=Op;function i(o){return s(o)||e(o)||r(o)||a()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports})(dl);var Nl=dl.exports,gr={},hr={},br={},Hs=Ut.default;Object.defineProperty(br,"__esModule",{value:!0});br.default=void 0;var gi=Hs(Ls),qp=Hs(ba),$p=Hs(qs),Wp=Hs($s),zp=Hs(sn),Yp=Hs(nn),gn=Hs(b),Kp=Hs(wn),Qp=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Xp=function(t){function s(){return(0,$p.default)(this,s),(0,zp.default)(this,s,arguments)}return(0,Yp.default)(s,t),(0,Wp.default)(s,[{key:"render",value:function(){var r=this.props,a=r.style,i=r.className,o=r.event,l=r.selected,m=r.isAllDay,h=r.onSelect,d=r.onDoubleClick,p=r.onKeyPress,u=r.localizer,N=r.continuesPrior,j=r.continuesAfter,x=r.accessors,A=r.getters,L=r.children,k=r.components,F=k.event,me=k.eventWrapper,Q=r.slotStart,T=r.slotEnd,ie=(0,qp.default)(r,Qp);delete ie.resizable;var _=x.title(o),le=x.tooltip(o),ve=x.end(o),oe=x.start(o),R=x.allDay(o),ne=m||R||u.diff(oe,u.ceil(ve,"day"),"day")>1,be=A.eventProp(o,oe,ve,l),je=gn.default.createElement("div",{className:"rbc-event-content",title:le||void 0},F?gn.default.createElement(F,{event:o,continuesPrior:N,continuesAfter:j,title:_,isAllDay:R,localizer:u,slotStart:Q,slotEnd:T}):_);return gn.default.createElement(me,Object.assign({},this.props,{type:"date"}),gn.default.createElement("div",Object.assign({},ie,{style:(0,gi.default)((0,gi.default)({},be.style),a),className:(0,Kp.default)("rbc-event",i,be.className,{"rbc-selected":l,"rbc-event-allday":ne,"rbc-event-continues-prior":N,"rbc-event-continues-after":j}),onClick:function(Ee){return h&&h(o,Ee)},onDoubleClick:function(Ee){return d&&d(o,Ee)},onKeyDown:function(Ee){return p&&p(o,Ee)}}),typeof L=="function"?L(je):je))}}])}(gn.default.Component);br.default=Xp;var Us={},Jp=Ut.default;Object.defineProperty(Us,"__esModule",{value:!0});Us.dateCellSelection=tf;Us.getSlotAtX=yl;Us.isSelected=Zp;Us.pointInBox=ef;Us.slotWidth=va;var Gp=Jp(gm);function Zp(t,s){return!t||s==null?!1:(0,Gp.default)(t,s)}function va(t,s){var e=t.right-t.left,r=e/s;return r}function yl(t,s,e,r){var a=va(t,r);return e?r-1-Math.floor((s-t.left)/a):Math.floor((s-t.left)/a)}function ef(t,s){var e=s.x,r=s.y;return r>=t.top&&r<=t.bottom&&e>=t.left&&e<=t.right}function tf(t,s,e,r,a){var i=-1,o=-1,l=r-1,m=va(s,r),h=yl(s,e.x,a,r),d=s.top<e.y&&s.bottom>e.y,p=s.top<t.y&&s.bottom>t.y,u=t.y>s.bottom,N=s.top>t.y,j=e.top<s.top&&e.bottom>s.bottom;return j&&(i=0,o=l),d&&(N?(i=0,o=h):u&&(i=h,o=l)),p&&(i=o=a?l-Math.floor((t.x-s.left)/m):Math.floor((t.x-s.left)/m),d?h<i?i=h:o=h:t.y<e.y?o=l:i=0),{startIdx:i,endIdx:o}}var ka=Ut.default;Object.defineProperty(hr,"__esModule",{value:!0});hr.default=void 0;var is=ka(_i),hi=ka(b),sf=ka(br),nf=Us;hr.default={propTypes:{slotMetrics:is.default.object.isRequired,selected:is.default.object,isAllDay:is.default.bool,accessors:is.default.object.isRequired,localizer:is.default.object.isRequired,components:is.default.object.isRequired,getters:is.default.object.isRequired,onSelect:is.default.func,onDoubleClick:is.default.func,onKeyPress:is.default.func},defaultProps:{segments:[],selected:{}},renderEvent:function(s,e){var r=s.selected;s.isAllDay;var a=s.accessors,i=s.getters,o=s.onSelect,l=s.onDoubleClick,m=s.onKeyPress,h=s.localizer,d=s.slotMetrics,p=s.components,u=s.resizable,N=d.continuesPrior(e),j=d.continuesAfter(e);return hi.default.createElement(sf.default,{event:e,getters:i,localizer:h,accessors:a,components:p,onSelect:o,onDoubleClick:l,onKeyPress:m,continuesPrior:N,continuesAfter:j,slotStart:d.first,slotEnd:d.last,selected:(0,nf.isSelected)(e,r),resizable:u})},renderSpan:function(s,e,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(e)/s*100+"%";return hi.default.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}};var Ss=Ut.default;Object.defineProperty(gr,"__esModule",{value:!0});gr.default=void 0;var rf=Ss(Ls),af=Ss(qs),of=Ss($s),lf=Ss(sn),mf=Ss(nn),cf=Ss(wn),bi=Ss(b),Qn=Ss(hr),xl=function(t){function s(){return(0,af.default)(this,s),(0,lf.default)(this,s,arguments)}return(0,mf.default)(s,t),(0,of.default)(s,[{key:"render",value:function(){var r=this,a=this.props,i=a.segments,o=a.slotMetrics.slots,l=a.className,m=1;return bi.default.createElement("div",{className:(0,cf.default)(l,"rbc-row")},i.reduce(function(h,d,p){var u=d.event,N=d.left,j=d.right,x=d.span,A="_lvl_"+p,L=N-m,k=Qn.default.renderEvent(r.props,u);return L&&h.push(Qn.default.renderSpan(o,L,"".concat(A,"_gap"))),h.push(Qn.default.renderSpan(o,x,A,k)),m=j+1,h},[]))}}])}(bi.default.Component);xl.defaultProps=(0,rf.default)({},Qn.default.defaultProps);gr.default=xl;var vs={},vl=Ut.default;Object.defineProperty(vs,"__esModule",{value:!0});vs.endOfRange=kl;vs.eventLevels=pf;vs.eventSegments=uf;vs.inRange=ff;vs.segsOverlap=Dl;vs.sortEvents=Yr;vs.sortWeekEvents=gf;var Er=vl(Nl),df=vl(hm);function kl(t){var s=t.dateRange,e=t.unit,r=e===void 0?"day":e,a=t.localizer;return{first:s[0],last:a.add(s[s.length-1],1,r)}}function uf(t,s,e,r){var a=kl({dateRange:s,localizer:r}),i=a.first,o=a.last,l=r.diff(i,o,"day"),m=r.max(r.startOf(e.start(t),"day"),i),h=r.min(r.ceil(e.end(t),"day"),o),d=(0,df.default)(s,function(u){return r.isSameDate(u,m)}),p=r.diff(m,h,"day");return p=Math.min(p,l),p=Math.max(p-r.segmentOffset,1),{event:t,span:p,left:d+1,right:Math.max(d+p,1)}}function pf(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,e,r,a,i=[],o=[];for(e=0;e<t.length;e++){for(a=t[e],r=0;r<i.length&&Dl(a,i[r]);r++);r>=s?o.push(a):(i[r]||(i[r]=[])).push(a)}for(e=0;e<i.length;e++)i[e].sort(function(l,m){return l.left-m.left});return{levels:i,extra:o}}function ff(t,s,e,r,a){var i={start:r.start(t),end:r.end(t)},o={start:s,end:e};return a.inEventRange({event:i,range:o})}function Dl(t,s){return s.some(function(e){return e.left<=t.right&&e.right>=t.left})}function gf(t,s,e){var r=(0,Er.default)(t),a=[],i=[];r.forEach(function(m){var h=s.start(m),d=s.end(m);e.daySpan(h,d)>1?a.push(m):i.push(m)});var o=a.sort(function(m,h){return Yr(m,h,s,e)}),l=i.sort(function(m,h){return Yr(m,h,s,e)});return[].concat((0,Er.default)(o),(0,Er.default)(l))}function Yr(t,s,e,r){var a={start:e.start(t),end:e.end(t),allDay:e.allDay(t)},i={start:e.start(s),end:e.end(s),allDay:e.allDay(s)};return r.sortEvents({evtA:a,evtB:i})}var hf=Fo.default,Ps=Ut.default;Object.defineProperty(fr,"__esModule",{value:!0});fr.default=void 0;var Tn=Ps(Ls),bf=Ps(Nl),Nf=Ps(qs),yf=Ps($s),xf=Ps(sn),vf=Ps(nn),Rn=Ps(b),kf=Ps(gr),Qs=hf(rs),Df=vs,Vs=Us,Fn=xs,Vf=Ws,Vl=function(t){function s(){var e;(0,Nf.default)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=(0,xf.default)(this,s,[].concat(a)),e.handleMove=function(o,l,m){if(!(0,Vs.pointInBox)(l,o))return e.reset();var h=e.context.draggable.dragAndDropAction.event||m,d=e.props,p=d.accessors,u=d.slotMetrics,N=d.rtl,j=d.localizer,x=(0,Vs.getSlotAtX)(l,o.x,N,u.slots),A=u.getDateForSlot(x),L=(0,Fn.eventTimes)(h,p,j),k=L.start,F=L.duration;k=j.merge(A,k);var me=j.add(k,F,"milliseconds");e.update(h,k,me)},e.handleDropFromOutside=function(o,l){if(e.context.draggable.onDropFromOutside){var m=e.props,h=m.slotMetrics,d=m.rtl,p=m.localizer,u=(0,Vs.getSlotAtX)(l,o.x,d,h.slots),N=h.getDateForSlot(u);e.context.draggable.onDropFromOutside({start:N,end:p.add(N,1,"day"),allDay:!1})}},e.handleDragOverFromOutside=function(o,l){var m=e.context.draggable.dragFromOutsideItem?e.context.draggable.dragFromOutsideItem():null;m&&e.handleMove(o,l,m)},e._selectable=function(){var o=e.ref.current.closest(".rbc-month-row, .rbc-allday-cell"),l=o.closest(".rbc-month-view, .rbc-time-view"),m=o.classList.contains("rbc-month-row"),h=e._selector=new Qs.default(function(){return l},{validContainers:(0,bf.default)(m?[]:[".rbc-day-slot",".rbc-allday-cell"])});h.on("beforeSelect",function(d){var p=e.props.isAllDay,u=e.context.draggable.dragAndDropAction.action,N=(0,Qs.getBoundsForNode)(o),j=(0,Vs.pointInBox)(N,d);return u==="move"||u==="resize"&&(!p||j)}),h.on("selecting",function(d){var p=(0,Qs.getBoundsForNode)(o),u=e.context.draggable.dragAndDropAction;u.action==="move"&&e.handleMove(d,p),u.action==="resize"&&e.handleResize(d,p)}),h.on("selectStart",function(){return e.context.draggable.onStart()}),h.on("select",function(d){var p=(0,Qs.getBoundsForNode)(o);e.state.segment&&((0,Vs.pointInBox)(p,d)?e.handleInteractionEnd():e.reset())}),h.on("dropFromOutside",function(d){if(e.context.draggable.onDropFromOutside){var p=(0,Qs.getBoundsForNode)(o);(0,Vs.pointInBox)(p,d)&&e.handleDropFromOutside(d,p)}}),h.on("dragOverFromOutside",function(d){if(e.context.draggable.dragFromOutsideItem){var p=(0,Qs.getBoundsForNode)(o);e.handleDragOverFromOutside(d,p)}}),h.on("click",function(){return e.context.draggable.onEnd(null)}),h.on("reset",function(){e.reset(),e.context.draggable.onEnd(null)})},e.handleInteractionEnd=function(){var o=e.props,l=o.resourceId,m=o.isAllDay,h=e.state.segment.event;e.reset(),e.context.draggable.onEnd({start:h.start,end:h.end,resourceId:l,isAllDay:m})},e._teardownSelectable=function(){e._selector&&(e._selector.teardown(),e._selector=null)},e.state={},e.ref=Rn.default.createRef(),e}return(0,vf.default)(s,t),(0,yf.default)(s,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.segment&&this.setState({segment:null})}},{key:"update",value:function(r,a,i){var o=(0,Df.eventSegments)((0,Tn.default)((0,Tn.default)({},r),{},{end:i,start:a,__isPreview:!0}),this.props.slotMetrics.range,Fn.dragAccessors,this.props.localizer),l=this.state.segment;l&&o.span===l.span&&o.left===l.left&&o.right===l.right||this.setState({segment:o})}},{key:"handleResize",value:function(r,a){var i=this.context.draggable.dragAndDropAction,o=i.event,l=i.direction,m=this.props,h=m.accessors,d=m.slotMetrics,p=m.rtl,u=m.localizer,N=(0,Fn.eventTimes)(o,h,u),j=N.start,x=N.end,A=(0,Vs.getSlotAtX)(a,r.x,p,d.slots),L=d.getDateForSlot(A),k=(0,Vs.pointInBox)(a,r);if(l==="RIGHT"){if(k){if(d.last<j)return this.reset();u.eq(u.startOf(x,"day"),x)?x=u.add(L,1,"day"):x=L}else if(u.inRange(j,d.first,d.last)||a.bottom<r.y&&+d.first>+j)x=u.add(d.last,1,"milliseconds");else{this.setState({segment:null});return}var F=h.end(o);x=u.merge(x,F),u.lt(x,j)&&(x=F)}else if(l==="LEFT"){if(k){if(d.first>x)return this.reset();j=L}else if(u.inRange(x,d.first,d.last)||a.top>r.y&&u.lt(d.last,x))j=u.add(d.first,-1,"milliseconds");else{this.reset();return}var me=h.start(o);j=u.merge(j,me),u.gt(j,x)&&(j=me)}this.update(o,j,x)}},{key:"render",value:function(){var r=this.props,a=r.children,i=r.accessors,o=this.state.segment;return Rn.default.createElement("div",{ref:this.ref,className:"rbc-addons-dnd-row-body"},a,o&&Rn.default.createElement(kf.default,Object.assign({},this.props,{selected:null,className:"rbc-addons-dnd-drag-row",segments:[o],accessors:(0,Tn.default)((0,Tn.default)({},i),Fn.dragAccessors)})))}}])}(Rn.default.Component);Vl.contextType=Vf.DnDContext;fr.default=Vl;var as=Ut.default;Object.defineProperty(ha,"__esModule",{value:!0});ha.default=Mf;var On=as(Ls),Cf=as(ba),_f=as(qs),Af=as($s),Ef=as(sn),wf=as(nn),wr=as(b),jf=as(wn),Lf=as(cr),Bf=as(dr),Hf=as(fr),Uf=xs,Sf=Ws,Pf=["selectable","elementProps","components"];function Mf(t){var s=function(e){function r(){var a;(0,_f.default)(this,r);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=(0,Ef.default)(this,r,[].concat(o)),a.defaultOnDragOver=function(m){m.preventDefault()},a.handleBeginAction=function(m,h,d){a.setState({event:m,action:h,direction:d});var p=a.props.onDragStart;p&&p({event:m,action:h,direction:d})},a.handleInteractionStart=function(){a.state.interacting===!1&&a.setState({interacting:!0})},a.handleInteractionEnd=function(m){var h=a.state,d=h.action,p=h.event;if(d&&(a.setState({action:null,event:null,interacting:!1,direction:null}),m!=null)){m.event=p;var u=a.props,N=u.onEventDrop,j=u.onEventResize;d==="move"&&N&&N(m),d==="resize"&&j&&j(m)}},a.state={interacting:!1},a}return(0,wf.default)(r,e),(0,Af.default)(r,[{key:"getDnDContextValue",value:function(){return{draggable:{onStart:this.handleInteractionStart,onEnd:this.handleInteractionEnd,onBeginAction:this.handleBeginAction,onDropFromOutside:this.props.onDropFromOutside,dragFromOutsideItem:this.props.dragFromOutsideItem,draggableAccessor:this.props.draggableAccessor,resizableAccessor:this.props.resizableAccessor,dragAndDropAction:this.state}}}},{key:"render",value:function(){var i=this.props,o=i.selectable,l=i.elementProps,m=i.components,h=(0,Cf.default)(i,Pf),d=this.state.interacting;delete h.onEventDrop,delete h.onEventResize,h.selectable=o?"ignoreEvents":!1,this.components=(0,Uf.mergeComponents)(m,{eventWrapper:Lf.default,eventContainerWrapper:Bf.default,weekWrapper:Hf.default});var p=this.props.onDropFromOutside?(0,On.default)((0,On.default)({},l),{},{onDragOver:this.props.onDragOver||this.defaultOnDragOver}):l;h.className=(0,jf.default)(h.className,"rbc-addons-dnd",!!d&&"rbc-addons-dnd-is-dragging");var u=this.getDnDContextValue();return wr.default.createElement(Sf.DnDContext.Provider,{value:u},wr.default.createElement(t,Object.assign({},h,{elementProps:p,components:this.components})))}}])}(wr.default.Component);return s.defaultProps=(0,On.default)((0,On.default)({},t.defaultProps),{},{draggableAccessor:null,resizableAccessor:null,resizable:!0}),s}var If=Ut.default;Object.defineProperty(ga,"__esModule",{value:!0});var Cl=ga.default=void 0,Tf=If(ha);Cl=ga.default=Tf.default;const Rf=Cl(bm),Ff=xu;Le.updateLocale("ko",{months:["1","2","3","4","5","6","7","8","9","10","11","12"],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],weekdays:["","","","","","",""],weekdaysShort:["","","","","","",""],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm"},meridiem:t=>t<12?"":"",week:{dow:0,doy:1}});Le.locale("ko");const Of=Nm(Le),Ni=["#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6"],qf=Oe.memo(({onSave:t,onCancel:s})=>{const[e,r]=b.useState(""),a=()=>{const m=window.innerWidth,h=window.innerHeight;return m>=768&&m<1024||m>=1024&&h>m},[i,o]=b.useState(a);b.useEffect(()=>{const m=()=>o(a());return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const l=i?"16px":"18px";return n.jsxDEV("div",{className:"w-full",onClick:m=>m.stopPropagation(),style:{padding:i?"2px 3px":"6px 0",minHeight:i?"28px":"32px"},children:n.jsxDEV("input",{type:"text",value:e,onChange:m=>r(m.target.value),onBlur:()=>{e.trim()?t(e.trim()):s()},onKeyDown:m=>{m.stopPropagation(),m.key==="Enter"?e.trim()?t(e.trim()):s():m.key==="Escape"&&s()},onClick:m=>m.stopPropagation(),placeholder:"",className:"w-full bg-transparent border-none outline-none focus:outline-none focus:ring-0",autoFocus:!0,style:{fontSize:l,fontWeight:500,color:"#374151",padding:0,margin:0,lineHeight:"1.3",caretColor:"#374151"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:130,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:125,columnNumber:5},void 0)}),yi=t=>t,Dn={"2025-01-01":"","2025-01-28":" ","2025-01-29":"","2025-01-30":" ","2025-03-01":"","2025-03-03":"","2025-05-05":"","2025-05-06":"","2025-06-06":"","2025-08-15":"","2025-10-03":"","2025-10-05":" ","2025-10-06":"","2025-10-07":" ","2025-10-08":"","2025-10-09":"","2025-12-25":""},$f=Oe.memo(({date:t,label:s,filteredEvents:e,selectedDate:r,user:a,isMobileView:i})=>{const o=Le(t).format("YYYY-MM-DD"),l=Dn[o],m=!!Dn[o],h=r&&Le(t).isSame(r,"day"),d=e.filter(T=>Le(T.start).isSame(t,"day")),p=d.length,u=d.filter(T=>T.assignedTo&&T.assignedTo.includes((a==null?void 0:a.name)||"")).length,N=p-u,j=s.replace(/^0/,""),x=t.getDay()===0,A=t.getDay()===6;let L="#000000";m||x?L="#dc2626":A&&(L="#3b82f6");const k=Le(t).isSame(Le(),"day");let F="#d1d5db";m||x?F="#fecaca":A&&(F="#bfdbfe");const me=j.length===2,Q=i?{backgroundColor:"transparent",color:L,borderRadius:"50%",width:"30px",height:"30px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:k?"700":"400",border:h?"1px solid #1f2937":"1px solid transparent",boxSizing:"border-box",gap:"1px"}:{color:L,fontWeight:k?"700":"400",paddingLeft:me?"0px":"4px",...k&&{backgroundColor:F,borderRadius:"50%",width:"21px",height:"21px",display:"inline-flex",alignItems:"center",justifyContent:"center",paddingLeft:"0px"}};return n.jsxDEV("div",{className:i?"flex flex-col items-center":"flex items-center gap-2",style:{overflow:"visible",position:"relative",zIndex:10},children:i?n.jsxDEV("span",{style:Q,children:[n.jsxDEV("span",{style:{fontSize:"13px",lineHeight:"1"},children:j},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:304,columnNumber:11},void 0),p>0&&n.jsxDEV("div",{className:"flex gap-0.5",style:{minHeight:"4px",marginTop:"1px"},children:[Array.from({length:u}).map((T,ie)=>n.jsxDEV("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#66BB6A",flexShrink:0}},`user-${ie}`,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:310,columnNumber:17},void 0)),Array.from({length:N}).map((T,ie)=>n.jsxDEV("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#757575",flexShrink:0}},`other-${ie}`,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:323,columnNumber:17},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:307,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:303,columnNumber:9},void 0):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{style:Q,children:j},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:340,columnNumber:11},void 0),l&&n.jsxDEV("span",{className:"text-xs font-medium",style:{color:"#ef4444"},children:l},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:342,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:339,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:297,columnNumber:5},void 0)}),Wf=Oe.memo(({event:t,user:s,filterProject:e,isEditing:r,editTitle:a,onEditTitleChange:i,onEditSave:o,onEditDelete:l,onEditCancel:m,onHoverDelete:h,onDeleteAction:d})=>{const p=e&&e!=="all",u=t.assignedTo||[],[N,j]=b.useState(!1),x=Oe.useRef(null),A=()=>{const R=window.innerWidth,ne=window.innerHeight;return R>=768&&R<1024||R>=1024&&ne>R},[L,k]=b.useState(A),[F,me]=b.useState(!1);Oe.useRef(null),Oe.useRef(!1);const Q=s!=null&&s.name?s.name.slice(-2):null,T=Q&&["",""].includes(Q),ie=Q&&["","",""].includes(Q),_=(s==null?void 0:s.name)&&(u.includes(s.name)||u.includes("HV LAB")||u.includes("")&&ie||u.includes("")&&T);b.useEffect(()=>{const R=()=>{k(A())};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]);const le=R=>{i&&i(R)},ve=()=>{a!=null&&a.trim()&&o&&o(),m&&m()},oe=R=>{R.stopPropagation(),(R.key==="Enter"||R.key==="Escape")&&R.currentTarget.blur()};return L?n.jsxDEV("div",{className:"w-full relative block",onMouseEnter:()=>{me(!0),j(!0)},onMouseLeave:()=>{me(!1),j(!1)},style:{padding:p?"2px 3px":"1px 3px",minHeight:p?"28px":"30px",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[N&&p&&h&&!t.isASVisit&&!t.isExpectedPayment&&n.jsxDEV("div",{className:"absolute top-0 right-0 z-20",style:{padding:"4px"},children:n.jsxDEV("button",{ref:x,onMouseDown:R=>{R.stopPropagation(),R.preventDefault(),d&&d(),h()},className:"p-1 text-gray-500 hover:text-red-500",style:{fontSize:"14px",lineHeight:1},title:" (Ctrl+Z )",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:463,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:462,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex items-center justify-between w-full",style:{fontSize:p?"13px":"10px",opacity:.8,marginBottom:"1px",lineHeight:"1.2"},children:[!p&&!t.isASVisit&&t.projectName?n.jsxDEV("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"60%",flexShrink:0},children:["[",yi(t.projectName),"]"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:484,columnNumber:13},void 0):n.jsxDEV("span",{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:494,columnNumber:13},void 0),!p&&u.length>0&&n.jsxDEV("span",{style:{flexShrink:0,fontSize:"10px",marginLeft:"auto"},children:u.map((R,ne)=>{const be=R==="HV LAB"||R===""&&T||R===""&&ie||R===(s==null?void 0:s.name);return n.jsxDEV(Oe.Fragment,{children:[n.jsxDEV("span",{style:{fontWeight:be?"bold":"normal"},children:R},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:505,columnNumber:21},void 0),ne<u.length-1&&""]},R,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:504,columnNumber:19},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:497,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:482,columnNumber:9},void 0),r?n.jsxDEV("input",{type:"text",value:a||"",onChange:R=>le(R.target.value),onBlur:ve,onKeyDown:oe,onClick:R=>R.stopPropagation(),autoFocus:!0,className:"w-full bg-transparent border-none outline-none",style:{fontWeight:500,fontSize:p?"16px":"11px",lineHeight:"1.3",color:"inherit",padding:0,margin:0}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:518,columnNumber:11},void 0):n.jsxDEV("div",{style:{fontWeight:500,fontSize:p?"16px":"11px",lineHeight:"1.3",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",wordBreak:"keep-all",textOverflow:"ellipsis",textDecoration:_?"underline":"none",textDecorationColor:_?"#e57373":"transparent",textDecorationThickness:"2px",textUnderlineOffset:"2px"},title:t.title,children:t.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:537,columnNumber:11},void 0),F&&n.jsxDEV("div",{className:"absolute z-50 bg-gray-900 text-white text-xs rounded p-2 shadow-lg",style:{bottom:"100%",left:"0",marginBottom:"4px",minWidth:"200px",maxWidth:"300px"},children:[n.jsxDEV("div",{className:"font-semibold mb-1",children:t.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:571,columnNumber:13},void 0),t.projectName&&n.jsxDEV("div",{className:"opacity-90",children:[": ",t.projectName]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:573,columnNumber:15},void 0),u.length>0&&n.jsxDEV("div",{className:"opacity-90 mt-1",children:[": ",u.join(", ")]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:576,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:561,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:448,columnNumber:7},void 0):n.jsxDEV("div",{className:"flex items-center justify-between w-full gap-1.5 overflow-hidden relative",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),style:{minHeight:p?"32px":"18px",padding:p?"6px 0":"0"},children:[n.jsxDEV("div",{className:"flex items-center gap-1.5 overflow-hidden flex-1",children:[!p&&!t.isASVisit&&t.projectName&&n.jsxDEV("span",{className:"text-xs opacity-70 flex-shrink-0",children:["[",yi(t.projectName),"]"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:598,columnNumber:11},void 0),r?n.jsxDEV("input",{type:"text",value:a||"",onChange:R=>le(R.target.value),onBlur:ve,onKeyDown:oe,onClick:R=>R.stopPropagation(),autoFocus:!0,className:"font-medium bg-transparent border-none outline-none flex-1",style:{fontSize:p?"18px":"12px",color:"inherit",padding:0,margin:0,minWidth:0}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:603,columnNumber:11},void 0):n.jsxDEV("span",{className:"font-medium truncate",style:{fontSize:p?"18px":"12px",textDecoration:_?"underline":"none",textDecorationColor:_?"#e57373":"transparent",textDecorationThickness:"2px",textUnderlineOffset:"2px"},children:t.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:621,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:595,columnNumber:7},void 0),!p&&u.length>0&&n.jsxDEV("span",{className:"opacity-80 flex-shrink-0 ml-auto",style:{fontSize:"11px"},children:u.map((R,ne)=>{const be=R==="HV LAB"||R===""&&T||R===""&&ie||R===(s==null?void 0:s.name);return n.jsxDEV(Oe.Fragment,{children:[n.jsxDEV("span",{className:be?"font-bold":"",children:R},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:648,columnNumber:17},void 0),ne<u.length-1&&""]},R,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:647,columnNumber:15},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:637,columnNumber:9},void 0),N&&p&&h&&!t.isASVisit&&!t.isExpectedPayment&&n.jsxDEV("div",{className:"absolute top-1/2 -translate-y-1/2 right-0 z-20",style:{padding:"2px"},children:n.jsxDEV("button",{ref:x,onMouseDown:R=>{R.stopPropagation(),R.preventDefault(),d&&d(),h()},className:"p-1 text-gray-500 hover:text-red-500",style:{fontSize:"14px",lineHeight:1},title:" (Ctrl+Z )",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:660,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:659,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:586,columnNumber:5},void 0)}),zf=()=>{const{schedules:t,setSchedules:s,addSchedule:e,deleteSchedule:r,loadSchedulesFromAPI:a,addScheduleToAPI:i,updateScheduleInAPI:o,deleteScheduleFromAPI:l,asRequests:m,updateASRequestInAPI:h,loadASRequestsFromAPI:d,constructionPayments:p,updateConstructionPaymentInAPI:u}=Os(),{user:N}=js(),j=mr(),[x,A]=b.useState(!1);b.useEffect(()=>{const c=()=>{const V=window.innerHeight>window.innerWidth&&window.innerWidth>=1024;A(V)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const L=c=>!c||c==="-"?"":x?c:qr(c),k=N!=null&&N.name?N.name.slice(-2):null;console.log(" Current user:",N==null?void 0:N.name,"Short name:",k),b.useEffect(()=>{a().catch(c=>{console.error("Failed to load schedules:",c),O.error("  ")})},[a]);const[F,me]=b.useState([]);b.useEffect(()=>{const c=async V=>{if((V.ctrlKey||V.metaKey)&&V.key==="z"){const S=V.target;if(S.tagName==="INPUT"||S.tagName==="TEXTAREA"||S.isContentEditable)return;if(F.length>0){V.preventDefault();const U=F[F.length-1];try{const K=U.type==="as_visit"||U.type==="expected_payment"?"other":U.type;await i({id:"",title:U.originalTitle||U.title,start:U.start,end:U.end,type:K,project:U.originalProjectName||U.projectName,attendees:U.assignedTo||[],time:U.time,description:U.description}),me(te=>te.slice(0,-1)),a(),O.success(" ")}catch(K){console.error("  :",K),O.error("  ")}}}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[F,i,a]);const[Q,T]=b.useState([]),[ie,_]=b.useState(!1),[le,ve]=b.useState(""),[oe,R]=b.useState(null),[ne,be]=b.useState(""),[je,Se]=b.useState(!1),[Ee,et]=b.useState(null),[ze,tt]=b.useState(null),z=b.useCallback(async()=>{Se(!0);try{const c=await fetch("/api/processes");if(c.ok){const V=await c.json();T(V)}else console.error("   "),O.error("    ")}catch(c){console.error("   :",c),O.error("  ")}finally{Se(!1)}},[]);b.useEffect(()=>{z()},[z]);const we=b.useMemo(()=>Q.length>0?Q.map(c=>c.name):Ff,[Q]),se=async()=>{if(le.trim())try{const c=await fetch("/api/processes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:le.trim()})});if(c.ok)ve(""),z(),O.success(" ");else{const V=await c.json();O.error(V.error||"  ")}}catch(c){console.error("  :",c),O.error("  ")}},Ve=async()=>{if(!(!oe||!ne.trim()))try{const c=await fetch(`/api/processes/${oe.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ne.trim()})});if(c.ok)R(null),be(""),z(),O.success(" ");else{const V=await c.json();O.error(V.error||"  ")}}catch(c){console.error("  :",c),O.error("  ")}},Me=async c=>{if(confirm("   ?"))try{const V=await fetch(`/api/processes/${c}`,{method:"DELETE"});if(V.ok)z(),O.success(" ");else{const S=await V.json();O.error(S.error||"  ")}}catch(V){console.error("  :",V),O.error("  ")}},Ye=c=>{et(c)},Te=(c,V)=>{c.preventDefault(),Ee!==null&&Ee!==V&&tt(V)},st=async()=>{if(Ee!==null&&ze!==null&&Ee!==ze){const c=[...Q],[V]=c.splice(Ee,1);c.splice(ze,0,V),T(c);try{(await fetch("/api/processes/reorder/bulk",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:c.map(U=>({id:U.id}))})})).ok||(z(),O.error("  "))}catch(S){console.error("  :",S),z(),O.error("  ")}}et(null),tt(null)},Be=c=>{const V=j.findIndex(S=>S.name===c);return V>=0?Ni[V%Ni.length]:"#e8e2ea"},qe=j.map(c=>c.name),Dt=t.filter(c=>!c.asRequestId).filter(c=>(N==null?void 0:N.name)===""?c.project===""||qe.includes(c.project):!0).map(c=>{const V=j.find(ae=>ae.name===c.project);let S=c.project===""?"[]":c.project;if(V&&c.project!==""){const ae=V.name.length>2?V.name.substring(0,2):V.name,Ae=(V.location||"").match(/([A-Za-z]?\d+)/),At=Ae?Ae[1]:"";S=At?`${ae}_${At}`:ae}const U=c.time,K=U&&U!=="-"?` - ${L(U)}`:"",te=c.attendees||[];return{id:c.id,title:c.title+K,originalTitle:c.title,start:c.start,end:c.end,projectId:(V==null?void 0:V.id)||"",projectName:S||"",originalProjectName:c.project||"",type:c.type||"other",phase:"",assignedTo:te,priority:"medium",allDay:!U||U==="-",color:Be(c.project||""),isASVisit:!1,time:U,description:c.description}}),H=m.filter(c=>c.scheduledVisitDate).filter(c=>(N==null?void 0:N.name)===""?qe.includes(c.project):!0).map(c=>{const V=c.scheduledVisitTime,S=V&&V!=="-"?` - ${L(V)}`:"",U=j.find(ae=>ae.name===c.project);let K=c.project;if(U){const ae=U.name.length>2?U.name.substring(0,2):U.name,Ae=(U.location||"").match(/([A-Za-z]?\d+)/),At=Ae?Ae[1]:"";K=At?`${ae}_${At}`:ae}const te=`[AS] ${K}`;return{id:`as-${c.id}`,title:te+S,originalTitle:te,start:c.scheduledVisitDate,end:c.scheduledVisitDate,projectId:(U==null?void 0:U.id)||"",projectName:K,originalProjectName:c.project,type:"as_visit",phase:"",assignedTo:c.assignedTo?Array.isArray(c.assignedTo)?c.assignedTo:c.assignedTo.split(",").map(ae=>ae.trim()):[],priority:"high",allDay:!V||V==="-",color:"#FEF3C7",isASVisit:!0,time:V,description:c.description}}),ke=(N==null?void 0:N.role)==="manager"?p.flatMap(c=>{var te,ae,Ue,Ae,At,it,Ke,xt;const V=j.find(Ft=>Ft.name===c.project);if(!V){const Ft=[],Qe=c.totalAmount+(c.vatType==="percentage"?c.totalAmount*(c.vatPercentage/100):c.vatAmount),Et=new Set(c.payments.flatMap(Pt=>{var rt;return((rt=Pt.type)==null?void 0:rt.split(", ").map(mt=>mt.trim()))||[]}));return!Et.has("")&&((te=c.expectedPaymentDates)!=null&&te.contract)&&Ft.push({id:`payment-${c.id}-contract`,title:"[] ",originalTitle:"[] ",start:new Date(c.expectedPaymentDates.contract),end:new Date(c.expectedPaymentDates.contract),projectId:"",projectName:c.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(Qe*.1).toLocaleString()}`}),!Et.has("")&&((ae=c.expectedPaymentDates)!=null&&ae.start)&&Ft.push({id:`payment-${c.id}-start`,title:"[] ",originalTitle:"[] ",start:new Date(c.expectedPaymentDates.start),end:new Date(c.expectedPaymentDates.start),projectId:"",projectName:c.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(Qe*.4).toLocaleString()}`}),!Et.has("")&&((Ue=c.expectedPaymentDates)!=null&&Ue.middle)&&Ft.push({id:`payment-${c.id}-middle`,title:"[] ",originalTitle:"[] ",start:new Date(c.expectedPaymentDates.middle),end:new Date(c.expectedPaymentDates.middle),projectId:"",projectName:c.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(Qe*.4).toLocaleString()}`}),!Et.has("")&&((Ae=c.expectedPaymentDates)!=null&&Ae.final)&&Ft.push({id:`payment-${c.id}-final`,title:"[] ",originalTitle:"[] ",start:new Date(c.expectedPaymentDates.final),end:new Date(c.expectedPaymentDates.final),projectId:"",projectName:c.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(Qe*.1).toLocaleString()}`}),Ft}if(!V.startDate||!V.endDate)return[];const S=c.totalAmount+(c.vatType==="percentage"?c.totalAmount*(c.vatPercentage/100):c.vatAmount),U=new Set(c.payments.flatMap(Ft=>{var Qe;return((Qe=Ft.type)==null?void 0:Qe.split(", ").map(Et=>Et.trim()))||[]})),K=[];return!U.has("")&&((At=c.expectedPaymentDates)!=null&&At.contract)&&K.push({id:`payment-${c.id}-contract`,title:"[] ",originalTitle:"[] ",start:new Date(c.expectedPaymentDates.contract),end:new Date(c.expectedPaymentDates.contract),projectId:V.id||"",projectName:c.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(S*.1).toLocaleString()}`}),!U.has("")&&((it=c.expectedPaymentDates)!=null&&it.start)&&K.push({id:`payment-${c.id}-start`,title:"[] ",originalTitle:"[] ",start:new Date(c.expectedPaymentDates.start),end:new Date(c.expectedPaymentDates.start),projectId:V.id||"",projectName:c.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(S*.4).toLocaleString()}`}),!U.has("")&&((Ke=c.expectedPaymentDates)!=null&&Ke.middle)&&K.push({id:`payment-${c.id}-middle`,title:"[] ",originalTitle:"[] ",start:new Date(c.expectedPaymentDates.middle),end:new Date(c.expectedPaymentDates.middle),projectId:V.id||"",projectName:c.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(S*.4).toLocaleString()}`}),!U.has("")&&((xt=c.expectedPaymentDates)!=null&&xt.final)&&K.push({id:`payment-${c.id}-final`,title:"[] ",originalTitle:"[] ",start:new Date(c.expectedPaymentDates.final),end:new Date(c.expectedPaymentDates.final),projectId:V.id||"",projectName:c.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(S*.1).toLocaleString()}`}),K}):[],Ce=[...Dt,...H,...ke],ge=b.useCallback(c=>{if(!(N!=null&&N.name))return!1;const V=c.assignedTo||[],S=N.name.slice(-2),U=["",""].includes(S),K=["","",""].includes(S);return V.includes(N.name)||V.includes("HV LAB")||V.includes("")&&K||V.includes("")&&U},[N==null?void 0:N.name]),Ie=(c,V)=>{if(!V)return[...c].sort((K,te)=>{const ae=ge(K),Ue=ge(te);return ae&&!Ue?-1:!ae&&Ue?1:K.start.getTime()-te.start.getTime()});const S=new Map;c.forEach(K=>{const te=K.time&&K.time!=="-"&&K.time.trim()!=="";if(K.isASVisit||K.isExpectedPayment||te){const ae=`single_${K.id}`;S.set(ae,[K])}else{const ae=K.start.toISOString().split("T")[0],Ue=[...K.assignedTo].sort().join(","),Ae=`${ae}_${K.projectName}_${Ue}`;S.has(Ae)||S.set(Ae,[]),S.get(Ae).push(K)}});const U=[];return S.forEach(K=>{if(K.length===1)U.push(K[0]);else{const te=K[0],ae=K.map(Ke=>Ke.originalTitle||Ke.title),Ue=[...new Set(ae)],Ae=K.map(Ke=>{const xt=Ke.originalTitle||Ke.title;return xt.startsWith(te.projectName+" - ")?xt.substring(te.projectName.length+3):xt}),At=[...new Set(Ae)],it={...te,id:K[0].id,title:At.join(", "),originalTitle:Ue.join(", "),description:K.map(Ke=>Ke.description||Ke.originalTitle||Ke.title).join(`
`),assignedTo:[...new Set(K.flatMap(Ke=>Ke.assignedTo))],mergedEventIds:K.map(Ke=>Ke.id)};U.push(it)}}),U.sort((K,te)=>{const ae=ge(K),Ue=ge(te);return ae&&!Ue?-1:!ae&&Ue?1:K.start.getTime()-te.start.getTime()})},[Xe,nt]=b.useState("month"),[$e,v]=b.useState(new Date),[B,I]=b.useState(!1),[J,G]=b.useState(null),[Z,pe]=b.useState(null),_e=`schedule_filterProject_${(N==null?void 0:N.id)||"guest"}`,[re,q]=b.useState(()=>{const c=localStorage.getItem(_e);return c||((N==null?void 0:N.name)===""&&j.length>0?j[0].name:"all")});b.useEffect(()=>{localStorage.setItem(_e,re)},[re,_e]),b.useCallback(()=>{document.body.classList.add("printing-schedule");const c=re==="all"?" ":re,V=Le($e).format("YYYY MM"),S=document.title;document.title=`${c} - ${V} `,setTimeout(()=>{window.print(),document.body.classList.remove("printing-schedule"),document.title=S},100)},[re,$e]);const D=Ie(Ce,re==="all"),[Y,ue]=b.useState(window.innerWidth<768?new Date:null),[he,X]=b.useState(null),Je=Oe.useRef(null),Fe=Oe.useRef(!1),[at,Lt]=b.useState(null),It=Oe.useRef(!1),us=Oe.useRef(!1);b.useEffect(()=>{const c=U=>{U.key==="Control"&&(us.current=!0)},V=U=>{U.key==="Control"&&(us.current=!1)},S=()=>{us.current=!1};return window.addEventListener("keydown",c),window.addEventListener("keyup",V),window.addEventListener("blur",S),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",V),window.removeEventListener("blur",S)}},[]),b.useEffect(()=>{if(!he)return;let c=null;const V=te=>{te.preventDefault(),te.dataTransfer&&(te.dataTransfer.dropEffect="copy")},S=te=>{te.preventDefault(),te.dataTransfer&&(te.dataTransfer.dropEffect="copy");const Ue=te.target.closest(".rbc-day-bg");c&&c!==Ue&&(c.style.backgroundColor=""),Ue&&(Ue.style.backgroundColor="rgba(59, 130, 246, 0.15)",c=Ue)},U=()=>{c&&(c.style.backgroundColor="",c=null)},K=te=>{te.preventDefault(),c&&(c.style.backgroundColor="",c=null)};return document.addEventListener("dragenter",V),document.addEventListener("dragover",S),document.addEventListener("dragend",U),document.addEventListener("drop",K),()=>{document.removeEventListener("dragenter",V),document.removeEventListener("dragover",S),document.removeEventListener("dragend",U),document.removeEventListener("drop",K),c&&(c.style.backgroundColor="")}},[he]);const[jt,$t]=b.useState(null),[Vt,Wt]=b.useState(null),[ps,Tt]=b.useState(""),[jn,on]=b.useState(!1),[g,M]=b.useState(null),[C,w]=b.useState(!1),[E,$]=b.useState(""),[f,y]=b.useState(null),[P,W]=b.useState({x:0,y:0}),[ce,fe]=b.useState({x:0,y:0}),[Ne,ee]=b.useState(!1),He=8;b.useEffect(()=>{if(!f)return;const c=S=>{W({x:S.clientX,y:S.clientY});const U=Math.abs(S.clientX-ce.x),K=Math.abs(S.clientY-ce.y);(U>He||K>He)&&ee(!0)},V=()=>{y(null),ee(!1)};return window.addEventListener("mousemove",c),window.addEventListener("mouseup",V),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",V)}},[f,ce]);const Re=Oe.useRef(!1),ye=b.useCallback(async({event:c,start:V,end:S})=>{if(c.isASVisit||c.isExpectedPayment){O.error("    ");return}const U=V instanceof Date?V:new Date(V),K=S instanceof Date?S:new Date(S);if(us.current)try{const ae=c.mergedEventIds||[c.id],Ue=t.filter(Ae=>ae.includes(Ae.id));for(const Ae of Ue)await i({id:Date.now().toString()+Math.random().toString(36).substr(2,9),title:Ae.title,start:U,end:K,project:Ae.project,attendees:Ae.attendees||[],time:Ae.time,priority:Ae.priority||"medium"});O.success(" "),a()}catch(ae){console.error("  :",ae),O.error("  ")}else{const ae=c.mergedEventIds||[c.id],Ue=[...t];s(t.map(Ae=>ae.includes(Ae.id)?{...Ae,start:U,end:K}:Ae));try{for(const Ae of ae)await o(Ae,{start:U,end:K})}catch(Ae){s(Ue),console.error("  :",Ae),O.error("  ")}}},[t,s,o,i,a]),Pe=b.useCallback(({event:c,action:V})=>{var U;if(c.isASVisit||c.isExpectedPayment||c.id==="__inline_add__")return;const S=document.querySelectorAll(".rbc-event");for(const K of S)if((U=K.textContent)!=null&&U.includes(c.originalTitle||c.title)){const te=K.getBoundingClientRect();fe({x:te.left,y:te.top}),W({x:te.left,y:te.top});break}ee(!1),y(c)},[]),ut=b.useCallback(async(c,V,S=!1)=>{if(console.log("[handleProcessDrop] Called:",{processName:c,dropDate:V,filterProject:re,isTapMode:S}),re==="all"){O.error("  ");return}const U="temp_"+Date.now().toString()+Math.random().toString(36).substr(2,9),K={id:U,title:c,start:V,end:V,project:re,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};e(K);try{await i(K),r(U)}catch(te){console.error("  :",te),O.error("  "),r(U)}},[re,i,e,r,N]),Rt=b.useCallback(({start:c})=>{const V=he||Je.current;V&&re!=="all"&&(Fe.current=!0,It.current=!0,requestAnimationFrame(()=>{It.current=!1}),$t(null),Wt(null),Tt(""),ut(V,c),requestAnimationFrame(()=>{X(null),Je.current=null,Fe.current=!1}))},[he,re,ut]),De=b.useCallback(()=>{const c=he||Je.current;return c?{title:c}:null},[he]),Ge=b.useCallback(async c=>{if(!c.trim()||!jt||re==="all"){$t(null);return}const V="temp_"+Date.now().toString()+Math.random().toString(36).substr(2,9),S={id:V,title:c.trim(),start:jt,end:jt,type:"construction",project:re,location:"",attendees:N!=null&&N.name?[N.name]:[],description:""};e(S),$t(null);try{await i(S),r(V)}catch(U){console.error("  :",U),O.error("  "),r(V)}},[jt,re,i,e,r,N]),lt=b.useCallback(()=>{$t(null)},[]),zt=b.useCallback(async()=>{var c;if(!Vt||!ps.trim()){Wt(null),Tt("");return}try{const V=((c=Vt.mergedEventIds)==null?void 0:c[0])||Vt.id;await o(V,{title:ps.trim()}),a()}catch(V){console.error("  :",V),O.error("  ")}Wt(null),Tt("")},[Vt,ps,o,a]),dt=b.useCallback(async c=>{me(S=>[...S,c]);const V=c.mergedEventIds||[c.id];V.forEach(S=>r(S));try{await Promise.all(V.map(S=>l(S))),O.success(" (Ctrl+Z )",{duration:2e3}),setTimeout(()=>{a()},1e3)}catch(S){console.error("  :",S),O.error("  "),me(U=>U.slice(0,-1)),a()}Wt(null),Tt("")},[r,l,a]),St=re==="all"?D:D.filter(c=>(c.originalProjectName||c.projectName)===re),Ct=Oe.useMemo(()=>{const c=re!=="all",V=new Map;St.forEach(U=>{const K=Le(U.start).format("YYYY-MM-DD");V.has(K)||V.set(K,[]),V.get(K).push(U)});const S=[];return V.forEach(U=>{if(c)[...U].sort((te,ae)=>{const Ue=parseInt(te.id)||0,Ae=parseInt(ae.id)||0;return Ue-Ae}).forEach((te,ae)=>{const Ue=Le(te.start).startOf("day").add(ae,"milliseconds").toDate();S.push({...te,start:Ue,allDay:!1})});else{const K=[],te=[];U.forEach(ae=>{ge(ae)?K.push(ae):te.push(ae)}),K.forEach((ae,Ue)=>{const Ae=Le(ae.start).startOf("day").add(Ue,"milliseconds").toDate();S.push({...ae,start:Ae,allDay:!1})}),te.forEach((ae,Ue)=>{const Ae=Le(ae.start).startOf("day").add(1e3+Ue,"milliseconds").toDate();S.push({...ae,start:Ae,allDay:!1})})}}),S.sort((U,K)=>U.start.getTime()-K.start.getTime())},[St,ge,re]),yt=Oe.useMemo(()=>{if(jt&&re!=="all"){const c=Le(jt).format("YYYY-MM-DD"),V=Ct.filter(te=>Le(te.start).format("YYYY-MM-DD")===c),S=V.length>0?Math.max(...V.map(te=>te.start.getTime())):Le(jt).startOf("day").valueOf(),U=new Date(S+1),K={id:"__inline_add__",title:"",start:U,end:U,projectId:"",projectName:re,type:"other",phase:"",assignedTo:[],priority:"medium",allDay:!1};return[...Ct,K]}return Ct},[Ct,jt,re]);b.useEffect(()=>{(N==null?void 0:N.name)===""&&j.length>0&&(re==="all"||!j.find(c=>c.name===re))&&q(j[0].name)},[j,N]),b.useEffect(()=>{const c=()=>{document.querySelectorAll(".rbc-show-more, .rbc-button-link").forEach(ae=>{ae.style.display="none",ae.style.visibility="hidden",ae.style.pointerEvents="none"}),document.querySelectorAll('.rbc-overlay, .rbc-overlay-header, .rbc-popup, [class*="rbc-overlay"]').forEach(ae=>{ae.style.display="none",ae.style.visibility="hidden",ae.style.opacity="0",ae.style.pointerEvents="none",ae.style.position="absolute",ae.style.left="-9999px",ae.style.top="-9999px",ae.style.zIndex="-1"})};c();const V=new MutationObserver(c),S=document.querySelector(".rbc-calendar");S&&V.observe(S,{childList:!0,subtree:!0});const U=new MutationObserver(c);return U.observe(document.body,{childList:!0,subtree:!0}),()=>{V.disconnect(),U.disconnect()}},[Xe,$e]);const[_t,Kt]=b.useState({date:null,projectId:"",title:""}),Ms=Oe.useRef(!1),ln=Oe.useRef(null),Va=c=>{if(Re.current){Re.current=!1;return}if(c.id==="__inline_add__")return;Ms.current=!0,ln.current&&clearTimeout(ln.current);const V=re!=="all",S=window.innerWidth<768;if(V&&!S&&!c.isASVisit&&!c.isExpectedPayment)$t(null),Wt(c),Tt(c.originalTitle||c.title);else{const U={...c,title:c.originalTitle||c.title};pe(null),G(U),I(!0)}ln.current=setTimeout(()=>{Ms.current=!1,ln.current=null},300)},_l=c=>{const V=window.innerWidth,S=V<768,U=V>=768&&V<1024,K=re==="all";if(It.current)return;if(S){if(c.start){ue(c.start);const ae=document.querySelector(".md\\:hidden.mt-3.bg-white");ae&&ae.scrollIntoView({behavior:"smooth",block:"nearest"})}return}const te=c.action==="click"||c.action==="select";if(!(U&&!te)){if(K){Ms.current=!1,Wt(null),Tt(""),$t(null),pe(c),G(null),I(!0);return}if(!Ms.current){if(at){ut(at,c.start,!0);return}Wt(null),Tt(""),$t(c.start)}}},Ca=async()=>{if(!_t.projectId||!_t.title.trim()){alert("  ");return}const c=j.find(V=>V.id===_t.projectId);if(!(!c||!_t.date))try{await i({id:Date.now().toString(),title:_t.title,start:_t.date,end:_t.date,type:"other",project:c.name,location:"",attendees:[],description:""}),Kt({date:null,projectId:"",title:""}),ue(null)}catch(V){console.error("Failed to add schedule:",V),O.error("  ")}},Al=c=>{if(c.id==="__inline_add__")return{style:{backgroundColor:"#ffffff",borderRadius:"6px",color:"#1f2937",border:"1px solid #d1d5db",display:"block",fontSize:"0.8125rem",padding:"0",fontWeight:"400",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",overflow:"visible"}};let V=c.color||"#E0E7FF",S="#1f2937";if(c.isASVisit)V="#E8F5E9",S="#1f2937";else{const U=c.assignedTo&&c.assignedTo.includes("HV LAB"),K=c.assignedTo&&c.assignedTo.includes("")&&k&&["",""].includes(k),te=c.assignedTo&&c.assignedTo.includes("")&&k&&["","",""].includes(k);c.assignedTo&&c.assignedTo.includes((N==null?void 0:N.name)||"")||U||K||te?(V="#FEF3C7",S="#1f2937"):c.color||(V="#e8e2ea")}return{style:{backgroundColor:V,"--event-bg-color":V,borderRadius:"6px",color:S,border:"none",display:"block",fontSize:"0.8125rem",padding:"4px 8px",fontWeight:"500",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",overflow:"hidden"}}},El=Oe.useCallback(c=>{const V=Le(c).format("YYYY-MM-DD"),S=!!Dn[V],U=Y&&Le(c).isSame(Y,"day"),K=window.innerWidth<768;let te="";U&&(te+="selected-date "),S&&(te+="holiday-date ");const ae=K?{backgroundColor:"transparent",background:"transparent"}:{};return{className:te.trim(),style:ae}},[Y]),[Qt,wl]=b.useState(window.innerWidth<768);b.useEffect(()=>{const c=()=>{wl(window.innerWidth<768)};return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),b.useEffect(()=>{const c=()=>{const V=Y||new Date;pe({start:V,end:V}),G(null),I(!0)};return window.addEventListener("headerAddButtonClick",c),()=>window.removeEventListener("headerAddButtonClick",c)},[Y]);const _a=Oe.useCallback(({date:c,label:V})=>n.jsxDEV($f,{date:c,label:V,filteredEvents:yt,selectedDate:Y,user:N,isMobileView:Qt},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2315,columnNumber:7},void 0),[yt,Y,N,Qt]),Aa=Oe.useCallback(({event:c})=>{if(c.id==="__inline_add__")return n.jsxDEV(qf,{onSave:Ge,onCancel:lt},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2331,columnNumber:9},void 0);const V=(Vt==null?void 0:Vt.id)===c.id||(Vt==null?void 0:Vt.mergedEventIds)&&Vt.mergedEventIds.includes(c.id);return n.jsxDEV(Wf,{event:c,user:N,filterProject:re,isEditing:V,editTitle:V?ps:void 0,onEditTitleChange:V?Tt:void 0,onEditSave:V?zt:void 0,onEditDelete:V?()=>dt(c):void 0,onEditCancel:V?()=>{Wt(null),Tt("")}:void 0,onHoverDelete:()=>dt(c),onDeleteAction:()=>{Re.current=!0}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2342,columnNumber:7},void 0)},[N,re,Vt,ps,zt,dt,Ge,lt]),jl=({onNavigate:c})=>{const[V,S]=Oe.useState(!1),[U,K]=Oe.useState(Le($e).year()),[te,ae]=Oe.useState(Le($e).month()),Ue=window.innerWidth<768,Ae=()=>{K(Le($e).year()),ae(Le($e).month()),S(!0)},At=()=>{v(Le().year(U).month(te).toDate()),S(!1)};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:`calendar-toolbar flex flex-col bg-white border-b border-gray-200 ${Ue?"px-2 py-1":"px-3 md:px-5 py-2"}`,children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("div",{className:"flex items-center space-x-1",children:[n.jsxDEV("button",{onClick:()=>c("PREV"),className:"px-2 py-1.5 text-2xl md:text-3xl text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-bold print-hide",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2384,columnNumber:15},void 0),n.jsxDEV("div",{className:"text-base md:text-lg font-bold text-gray-900 hover:bg-gray-50 px-2 md:px-3 py-1 rounded-lg transition-colors cursor-pointer print-title",onClick:Ae,children:[n.jsxDEV("span",{children:Le($e).format("YYYY MM")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2394,columnNumber:17},void 0),n.jsxDEV("span",{className:"print-project-name hidden",children:[" - ",re==="all"?" ":re]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2396,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2390,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>c("NEXT"),className:"px-2 py-1.5 text-2xl md:text-3xl text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-bold print-hide",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2398,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2383,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex items-center space-x-2",children:n.jsxDEV("select",{className:"px-3 md:px-4 py-1.5 md:py-2 bg-white text-gray-700 rounded-lg text-xs md:text-sm font-medium focus:outline-none focus:ring-2 focus:ring-gray-300 border border-gray-300 print-hide",value:re,onChange:it=>{q(it.target.value),Lt(null)},style:{appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1.25rem",paddingRight:"2.5rem"},children:[(N==null?void 0:N.name)!==""&&n.jsxDEV("option",{value:"all",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2425,columnNumber:41},void 0),j.filter(it=>it.status!=="completed").map(it=>n.jsxDEV("option",{value:it.name,children:it.name},it.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2429,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2408,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2406,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2382,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2380,columnNumber:9},void 0),V&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-sm shadow-xl",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxDEV("h3",{className:"text-lg font-bold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2444,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>S(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2450,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2449,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2445,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2443,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("button",{onClick:()=>K(U-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2463,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2462,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2458,columnNumber:19},void 0),n.jsxDEV("span",{className:"text-xl font-bold text-gray-900",children:[U,""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2466,columnNumber:19},void 0),n.jsxDEV("button",{onClick:()=>K(U+1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2474,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2473,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2469,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2457,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2456,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-4",children:n.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(it=>{const Ke=te===it-1,xt=Le().year()===U&&Le().month()===it-1;return n.jsxDEV("button",{onClick:()=>ae(it-1),className:`py-3 px-4 rounded-lg text-sm font-medium transition-colors ${Ke?"bg-gray-900 text-white":xt?"bg-gray-100 text-gray-900 border-2 border-gray-900":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[it,""]},it,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2487,columnNumber:23},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2482,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2481,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-4 border-t border-gray-200 flex gap-2",children:[n.jsxDEV("button",{onClick:()=>{v(new Date),S(!1)},className:"flex-1 py-2 px-4 bg-gray-100 text-gray-900 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2507,columnNumber:17},void 0),n.jsxDEV("button",{onClick:At,className:"flex-1 py-2 px-4 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2516,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2506,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2441,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2440,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2379,columnNumber:7},void 0)},Ll=()=>null,Bl=b.useMemo(()=>({toolbar:jl,event:Aa,month:{dateHeader:_a,showMore:Ll}}),[_a,Aa]),Ea=Oe.useMemo(()=>{if(!Y)return[];let c;if(Qt)c=yt.filter(S=>Le(S.start).isSame(Y,"day"));else{const S=Le(Y).startOf("week"),U=Le(Y).endOf("week");c=yt.filter(K=>{const te=Le(K.start);return te.isSameOrAfter(S,"day")&&te.isSameOrBefore(U,"day")})}const V=[...c].sort((S,U)=>{const K=S.assignedTo&&S.assignedTo.includes("HV LAB"),te=S.assignedTo&&S.assignedTo.includes("")&&k&&["",""].includes(k),ae=S.assignedTo&&S.assignedTo.includes("")&&k&&["","",""].includes(k),Ue=S.assignedTo&&k&&S.assignedTo.includes(k)||S.assignedTo&&(N==null?void 0:N.name)&&S.assignedTo.includes(N.name)||K||te||ae,Ae=U.assignedTo&&U.assignedTo.includes("HV LAB"),At=U.assignedTo&&U.assignedTo.includes("")&&k&&["",""].includes(k),it=U.assignedTo&&U.assignedTo.includes("")&&k&&["","",""].includes(k),Ke=U.assignedTo&&k&&U.assignedTo.includes(k)||U.assignedTo&&(N==null?void 0:N.name)&&U.assignedTo.includes(N.name)||Ae||At||it;return Ue&&!Ke?-1:!Ue&&Ke?1:new Date(S.start).getTime()-new Date(U.start).getTime()});return console.log("Sorted events:",V.map(S=>({title:S.title,assignedTo:S.assignedTo,user:N==null?void 0:N.name,userShort:k}))),V},[Y,yt,N,k,Qt]);return b.useEffect(()=>{const V=setTimeout(()=>{const S=Qt?document.querySelectorAll(".rbc-month-view td.rbc-date-cell"):document.querySelectorAll(".rbc-date-cell"),U=document.querySelectorAll(".rbc-month-row"),K=[];U.forEach((Qe,Et)=>{const Pt=Qe.querySelectorAll(".rbc-date-cell");let rt=0;Pt.forEach(mt=>{const Bt=mt.querySelector("button");let ct=Bt==null?void 0:Bt.textContent;if(!ct){const fs=mt.querySelector("span");ct=fs==null?void 0:fs.textContent}if(ct&&!isNaN(parseInt(ct))){const fs=Le($e).date(parseInt(ct)),Is=yt.filter(Nr=>Le(Nr.start).isSame(fs,"day"));rt=Math.max(rt,Is.length)}}),K.push(rt)});const te=re&&re!=="all",ae=100,Ue=te?60:18,Ae=25,At=Math.floor((ae-Ae)/Ue),it=K.length,Ke=ae*it,xt=K.map(Qe=>Qe<=At?ae:Ae+Qe*Ue+10),Ft=xt.reduce((Qe,Et)=>Qe+Et,0);if(Ft>Ke){const Qe=xt.map((rt,mt)=>({index:mt,height:rt,overflow:rt>ae})),Et=Qe.filter(rt=>rt.overflow).reduce((rt,mt)=>rt+(mt.height-ae),0),Pt=Qe.filter(rt=>!rt.overflow);if(Pt.length>0){const rt=Ke-Et-Pt.length*ae,mt=Math.max(50,ae+rt/Pt.length);U.forEach((Bt,ct)=>{const Is=xt[ct]>ae?xt[ct]:mt;Bt.style.height=`${Is}px`,Bt.style.minHeight=`${Is}px`})}else{const rt=Ke/Ft;U.forEach((mt,Bt)=>{const ct=Math.max(80,xt[Bt]*rt);mt.style.height=`${ct}px`,mt.style.minHeight=`${ct}px`})}}else{const Qe=xt.reduce((mt,Bt)=>mt+(Bt>ae?Bt:0),0),Et=xt.filter(mt=>mt<=ae).length,Pt=Ke-Qe,rt=Et>0?Pt/Et:ae;U.forEach((mt,Bt)=>{const ct=xt[Bt]>ae?xt[Bt]:rt;mt.style.height=`${ct}px`,mt.style.minHeight=`${ct}px`})}S.forEach(Qe=>{const Et=Qe.querySelector("button");let Pt=Et==null?void 0:Et.textContent;if(!Pt){const ct=Qe.querySelector("span");Pt=ct==null?void 0:ct.textContent}if(!Pt||isNaN(parseInt(Pt)))return;const rt=Le($e).date(parseInt(Pt)),mt=yt.filter(ct=>Le(ct.start).isSame(rt,"day"));mt.length>0?Qe.setAttribute("data-event-count",mt.length.toString()):Qe.removeAttribute("data-event-count");const Bt=rt.clone().toDate();if(Y&&Le(Bt).isSame(Y,"day")?Qe.classList.add("selected-date"):Qe.classList.remove("selected-date"),Qt){const ct=Qe,fs=ct._mobileClickHandler;fs&&Qe.removeEventListener("click",fs);const Is=Nr=>{if(Nr.target.closest(".rbc-event"))return;const Hl=rt.clone().toDate();ue(Hl);const wa=document.querySelector(".md\\:hidden.mt-3.bg-white");wa&&wa.scrollIntoView({behavior:"smooth",block:"nearest"})};ct._mobileClickHandler=Is,Qe.addEventListener("click",Is,!0),Qe.style.cursor="pointer",Qe.style.touchAction="manipulation"}})},200);return()=>{clearTimeout(V),Qt&&document.querySelectorAll(".rbc-month-view td.rbc-date-cell").forEach(U=>{const K=U,te=K._mobileClickHandler;te&&(U.removeEventListener("click",te),delete K._mobileClickHandler)})}},[yt,$e,Qt,Y,re]),n.jsxDEV("div",{className:"schedule-container space-y-3 md:space-y-2",children:[_t.date&&n.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-3 md:p-4 shadow-sm",children:n.jsxDEV("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-2 md:gap-3",children:[n.jsxDEV("div",{className:"text-xs md:text-sm font-semibold text-gray-900 md:min-w-[80px]",children:Le(_t.date).format("MM DD")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2805,columnNumber:15},void 0),n.jsxDEV("select",{value:_t.projectId,onChange:c=>Kt({..._t,projectId:c.target.value}),className:"px-3 md:px-4 py-2 border border-gray-300 rounded-lg text-xs md:text-sm focus:outline-none focus:ring-2 focus:ring-gray-500",children:j.filter(c=>c.status!=="completed").map(c=>n.jsxDEV("option",{value:c.id,children:c.name},c.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2816,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2808,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:_t.title,onChange:c=>Kt({..._t,title:c.target.value}),onKeyPress:c=>{c.key==="Enter"&&Ca()},placeholder:"  ...",className:"flex-1 px-3 md:px-4 py-2 border border-gray-300 rounded-lg text-xs md:text-sm focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2821,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:Ca,className:"flex-1 md:flex-none px-4 md:px-5 py-2 bg-gray-900 text-white text-xs md:text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2835,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{Kt({date:null,projectId:"",title:""}),ue(null)},className:"flex-1 md:flex-none px-4 md:px-5 py-2 bg-white border border-gray-300 text-gray-700 text-xs md:text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2841,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2834,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2804,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2803,columnNumber:11},void 0),n.jsxDEV("div",{className:"schedule-main flex flex-col md:block",children:[n.jsxDEV("div",{className:"flex gap-3",children:[re!=="all"&&!Qt&&n.jsxDEV("div",{className:"hidden md:block flex-shrink-0 print-hide",children:n.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-2 sticky top-4",children:[n.jsxDEV("button",{onClick:()=>_(!0),className:"w-full mb-2 px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors flex items-center justify-center gap-1",children:[n.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsxDEV("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2868,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2867,columnNumber:21},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2863,columnNumber:19},void 0),at&&n.jsxDEV("div",{className:"mb-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded text-center",children:[n.jsxDEV("span",{className:"font-medium",children:at},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2875,columnNumber:23},void 0)," ",n.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2876,columnNumber:23},void 0),n.jsxDEV("span",{className:"text-blue-600",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2877,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2874,columnNumber:21},void 0),n.jsxDEV("div",{className:"flex flex-col gap-0.5",children:we.map(c=>n.jsxDEV("div",{draggable:!0,onClick:()=>{Lt(at===c?null:c)},onDragStart:V=>{Fe.current=!1,Lt(null),X(c),Je.current=c,V.dataTransfer.setData("text/plain",c),V.dataTransfer.effectAllowed="copy"},onDragEnd:()=>{Fe.current||(X(null),Je.current=null)},className:`px-3 py-1 text-xs rounded cursor-pointer transition-colors text-center font-medium whitespace-nowrap ${at===c?"bg-blue-500 text-white ring-2 ring-blue-300":he===c?"bg-blue-100 text-blue-800":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:c},c,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2882,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2880,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2861,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2860,columnNumber:15},void 0),n.jsxDEV("div",{className:`schedule-calendar bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm calendar-container flex-1 ${re!=="all"?"specific-project-view":""}`,style:{paddingBottom:0},children:n.jsxDEV(Rf,{localizer:Of,events:yt,startAccessor:"start",endAccessor:"end",view:Xe,onView:nt,date:$e,onNavigate:v,onSelectEvent:Va,onSelectSlot:_l,onEventDrop:re!=="all"?ye:void 0,onDragStart:re!=="all"?Pe:void 0,onDropFromOutside:re!=="all"?Rt:void 0,dragFromOutsideItem:re!=="all"?De:void 0,draggableAccessor:c=>re!=="all"&&c.id!=="__inline_add__",resizable:!1,selectable:!0,longPressThreshold:1,eventPropGetter:Al,dayPropGetter:El,components:Bl,popup:!1,doShowMoreDrillDown:!1,onShowMore:()=>{},showAllEvents:!0,messages:{today:"",previous:"",next:"",month:"",week:"",day:"",agenda:"",date:"",time:"",event:"",noEventsInRange:"   ",showMore:c=>`+${c} `}},`calendar-${re}-${(Y==null?void 0:Y.getTime())||"no-selection"}`,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2932,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2928,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2857,columnNumber:11},void 0),Y&&n.jsxDEV("div",{className:"schedule-events-list desktop:hidden mt-3 bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-gray-50",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("p",{className:"text-sm font-semibold text-gray-900",children:Qt?Le(Y).format("MM DD (ddd)"):`${Le(Y).startOf("week").format("MM DD")} - ${Le(Y).endOf("week").format("MM DD")}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2983,columnNumber:19},void 0),Dn[Le(Y).format("YYYY-MM-DD")]&&n.jsxDEV("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-red-50 text-red-600",children:Dn[Le(Y).format("YYYY-MM-DD")]},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2991,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2982,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-center gap-1",children:[re!=="all"&&n.jsxDEV("button",{onClick:()=>w(!0),className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded transition-colors",children:"+"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2999,columnNumber:21},void 0),n.jsxDEV("button",{onClick:()=>{ue(null),M(null),w(!1),$("")},className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:n.jsxDEV("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3016,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3015,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3006,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2996,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2981,columnNumber:15},void 0),n.jsxDEV("div",{children:Ea.length===0?n.jsxDEV("div",{className:"p-4",children:re!=="all"&&C?n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("input",{type:"text",value:E,onChange:c=>$(c.target.value),onKeyDown:c=>{if(c.key==="Enter"&&E.trim()){const V=Y||new Date,S={id:"",title:E.trim(),start:V,end:V,project:re,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};i(S).then(()=>{a(),w(!1),$("")}).catch(U=>{console.error("  :",U),O.error("  ")})}else c.key==="Escape"&&(w(!1),$(""))},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3029,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>{if(E.trim()){const c=Y||new Date,V={id:"",title:E.trim(),start:c,end:c,project:re,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};i(V).then(()=>{a(),w(!1),$("")}).catch(S=>{console.error("  :",S),O.error("  ")})}},className:"px-3 py-2 text-sm font-medium text-white bg-gray-700 rounded-lg hover:bg-gray-800 active:bg-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3062,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>{w(!1),$("")},className:"p-2 text-gray-400 hover:text-gray-600",children:n.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3097,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3096,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3089,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3028,columnNumber:23},void 0):n.jsxDEV("p",{className:"text-sm text-gray-500 text-center",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3102,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3025,columnNumber:19},void 0):n.jsxDEV("div",{children:[(()=>{const c=Ea.reduce((S,U)=>{const K=Le(U.start).format("YYYY-MM-DD");return S[K]||(S[K]=[]),S[K].push(U),S},{});return Object.keys(c).sort().map(S=>n.jsxDEV("div",{className:"border-b border-gray-100 last:border-b-0",children:[!Qt&&n.jsxDEV("div",{className:"px-3 py-2 bg-gray-50 sticky top-0 z-10",children:n.jsxDEV("p",{className:"text-xs font-semibold text-gray-700",children:Le(S).format("MM DD (ddd)")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3126,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3125,columnNumber:29},void 0),n.jsxDEV("div",{className:"divide-y divide-gray-100",children:c[S].map(U=>{const K=U.assignedTo&&U.assignedTo.includes("HV LAB"),te=U.assignedTo&&U.assignedTo.includes("")&&k&&["",""].includes(k),ae=U.assignedTo&&U.assignedTo.includes("")&&k&&["","",""].includes(k),Ae=U.assignedTo&&(U.assignedTo.includes((N==null?void 0:N.name)||"")||k&&U.assignedTo.includes(k))||K||te||ae,At=!U.color&&!Ae,it=!U.isASVisit&&!U.isExpectedPayment;return n.jsxDEV("div",{onClick:()=>{const Ke={...U,title:U.originalTitle||U.title};Va(Ke)},className:`p-3 cursor-pointer ${Ae?"bg-yellow-50":""}`,style:At?{backgroundColor:"#f3f0f5"}:void 0,children:n.jsxDEV("div",{className:"flex items-start gap-2",children:[n.jsxDEV("div",{className:"w-1 h-full rounded-full flex-shrink-0",style:{backgroundColor:Ae?"#FEF3C7":U.color||"#e8e2ea",minHeight:"28px"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3172,columnNumber:27},void 0),n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[n.jsxDEV("p",{className:"text-sm font-semibold text-gray-900 truncate",children:U.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3183,columnNumber:31},void 0),U.assignedTo&&U.assignedTo.length>0&&n.jsxDEV("p",{className:"text-xs text-gray-500 flex-shrink-0",children:["","",""].every(Ft=>U.assignedTo.includes(Ft))?"":U.assignedTo.join(", ")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3188,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3182,columnNumber:29},void 0),U.projectName&&re==="all"&&n.jsxDEV("p",{className:"text-xs text-gray-600 mt-0.5",children:U.projectName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3200,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3181,columnNumber:27},void 0),it?n.jsxDEV("button",{onClick:Ke=>{Ke.stopPropagation(),M(U)},className:"p-0.5 text-gray-400 hover:text-red-500 flex-shrink-0 active:text-red-600",children:n.jsxDEV("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3215,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3214,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3207,columnNumber:29},void 0):n.jsxDEV("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3220,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3219,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3171,columnNumber:25},void 0)},U.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3154,columnNumber:25},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3132,columnNumber:27},void 0)]},S,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3122,columnNumber:25},void 0))})(),re!=="all"&&C&&n.jsxDEV("div",{className:"p-3 border-t border-gray-100",children:n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("input",{type:"text",value:E,onChange:c=>$(c.target.value),onKeyDown:c=>{if(c.key==="Enter"&&E.trim()){const V=Y||new Date,S={id:"",title:E.trim(),start:V,end:V,project:re,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};i(S).then(()=>{a(),w(!1),$("")}).catch(U=>{console.error("  :",U),O.error("  ")})}else c.key==="Escape"&&(w(!1),$(""))},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3235,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>{if(E.trim()){const c=Y||new Date,V={id:"",title:E.trim(),start:c,end:c,project:re,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};i(V).then(()=>{a(),w(!1),$("")}).catch(S=>{console.error("  :",S),O.error("  ")})}},className:"px-3 py-2 text-sm font-medium text-white bg-gray-700 rounded-lg hover:bg-gray-800 active:bg-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3268,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>{w(!1),$("")},className:"p-2 text-gray-400 hover:text-gray-600",children:n.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3303,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3302,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3295,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3234,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3233,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3106,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3023,columnNumber:15},void 0),Qt&&re!=="all"&&n.jsxDEV("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:[n.jsxDEV("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3316,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex flex-wrap gap-1.5",children:we.map(c=>n.jsxDEV("button",{onClick:async()=>{const V=Y||new Date;if(re!=="all"){const S={id:"",title:c,start:V,end:V,project:re,attendees:N!=null&&N.name?[N.name]:[],type:"construction"};try{await i(S),a()}catch(U){console.error("  :",U),O.error("  ")}}},className:"px-2.5 py-1.5 text-xs rounded-lg bg-white border border-gray-200 text-gray-700 hover:bg-gray-100 active:bg-gray-200 transition-colors font-medium",children:c},c,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3319,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3317,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3315,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2979,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2856,columnNumber:9},void 0),B&&n.jsxDEV(No,{event:J,slotInfo:Z,defaultProjectName:re!=="all"?re:void 0,onClose:()=>{I(!1),G(null),pe(null)},onSave:async c=>{console.log(" Schedule.tsx onSave called with newEvent:",c);try{if(J)if(J.id.startsWith("as-")){const V=J.id.replace("as-","");let S="";c.assignedTo&&Array.isArray(c.assignedTo)&&c.assignedTo.length>0?S=c.assignedTo.join(", "):J.assignedTo&&Array.isArray(J.assignedTo)?S=J.assignedTo.join(", "):typeof J.assignedTo=="string"&&(S=J.assignedTo),await h(V,{project:c.title||J.title,assignedTo:S,scheduledVisitDate:c.start,scheduledVisitTime:c.time||J.time}),await d(),I(!1)}else if(J.id.startsWith("payment-")){const V=J.id.split("-"),S=V[1],U=V[2],K=p.find(te=>te.id===S);if(K){const te={...K.expectedPaymentDates};te[U]=c.start,await u(S,{expectedPaymentDates:te})}}else{console.log(" Updating schedule with projectId:",c.projectId,"projectName:",c.projectName);let V=c.title;const S=/ - (|) \d{1,2}( \d{1,2})?$/;if(V=V.replace(S,""),J.mergedEventIds&&J.mergedEventIds.length>0){console.log(" Updating merged schedules:",J.mergedEventIds);const U=(J.originalTitle||J.title).split(", "),K=V.split(", ");for(let te=0;te<J.mergedEventIds.length;te++){const ae=J.mergedEventIds[te],Ue=K[te]||U[te]||V;await o(ae,{title:Ue.trim(),start:c.start,end:c.end,type:"other",project:c.projectId||c.projectName,location:"",attendees:c.assignedTo||[],description:c.description,time:c.time})}}else await o(J.id,{title:V,start:c.start,end:c.end,type:"other",project:c.projectId||c.projectName,location:"",attendees:c.assignedTo||[],description:c.description,time:c.time});await a()}else{console.log(" Adding schedule with projectId:",c.projectId,"projectName:",c.projectName);const V={id:Date.now().toString(),title:c.title,start:c.start,end:c.end,type:"other",project:c.projectId||c.projectName||"",location:"",attendees:c.assignedTo||[],description:c.description||"",time:c.time||"-"};await i(V)}I(!1)}catch(V){console.error("Failed to save schedule:",V),O.error("  ")}},onDelete:async c=>{try{if(c.startsWith("payment-")){const V=c.split("-"),S=V[1],U=V[2],K=p.find(te=>te.id===S);if(K){const te={...K.expectedPaymentDates};delete te[U],await u(S,{expectedPaymentDates:te})}}else if(c.startsWith("as-")){const V=c.replace("as-","");await h(V,{scheduledVisitDate:null,scheduledVisitTime:null})}else{const V=D.find(S=>S.id===c);if(V!=null&&V.mergedEventIds&&V.mergedEventIds.length>0){console.log("Deleting merged schedules:",V.mergedEventIds);for(const S of V.mergedEventIds)await l(S)}else await l(c)}I(!1)}catch(V){console.error("Failed to delete schedule:",V),O.error("  ")}}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3358,columnNumber:11},void 0),f&&Ne&&n.jsxDEV("div",{className:"fixed pointer-events-none z-[9999]",style:{left:P.x-50,top:P.y-15,backgroundColor:f.color||"#F3F4F6",borderRadius:"6px",color:"#1f2937",padding:"4px 8px",fontWeight:500,fontSize:"16px",maxWidth:"250px"},children:f.originalTitle||f.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3548,columnNumber:11},void 0),g&&n.jsxDEV("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]",onClick:()=>M(null),children:n.jsxDEV("div",{className:"bg-white rounded-xl shadow-2xl w-[280px] overflow-hidden mx-4",onClick:c=>c.stopPropagation(),children:[n.jsxDEV("div",{className:"p-4 text-center",children:[n.jsxDEV("div",{className:"w-12 h-12 mx-auto mb-3 bg-red-100 rounded-full flex items-center justify-center",children:n.jsxDEV("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3579,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3578,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3577,columnNumber:17},void 0),n.jsxDEV("p",{className:"text-base font-semibold text-gray-900 mb-1",children:" ?"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3582,columnNumber:17},void 0),n.jsxDEV("p",{className:"text-sm text-gray-500 truncate",children:g.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3583,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3576,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex border-t border-gray-100",children:[n.jsxDEV("button",{onClick:()=>M(null),className:"flex-1 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 active:bg-gray-100 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3586,columnNumber:17},void 0),n.jsxDEV("button",{onClick:async()=>{try{const c=g.mergedEventIds||[g.id];await Promise.all(c.map(V=>l(V))),a()}catch(c){console.error("  :",c),O.error(" ")}M(null)},className:"flex-1 py-3 text-sm font-medium text-red-600 hover:bg-red-50 active:bg-red-100 border-l border-gray-100 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3592,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3585,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3572,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3568,columnNumber:11},void 0),ie&&n.jsxDEV("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[9999]",onClick:()=>{_(!1),R(null),ve("")},children:n.jsxDEV("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] overflow-hidden mx-4",onClick:c=>c.stopPropagation(),children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center",children:[n.jsxDEV("h2",{className:"text-lg font-bold text-gray-800",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3631,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{_(!1),R(null),ve("")},className:"text-gray-400 hover:text-gray-600 p-1 hover:bg-gray-100 rounded",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3632,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3630,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[n.jsxDEV("label",{className:"block text-xs text-gray-500 mb-2",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3646,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:le,onChange:c=>ve(c.target.value),onKeyDown:c=>c.key==="Enter"&&se(),placeholder:" ",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-gray-300 focus:border-gray-400 bg-white"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3648,columnNumber:19},void 0),n.jsxDEV("button",{onClick:se,disabled:!le.trim(),className:"px-4 py-2 bg-gray-800 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3656,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3647,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3645,columnNumber:15},void 0),n.jsxDEV("div",{className:"overflow-y-auto max-h-[50vh]",children:je?n.jsxDEV("div",{className:"p-8 text-center text-gray-500",children:[n.jsxDEV("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-200 border-t-gray-600 rounded-full mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3670,columnNumber:21},void 0),n.jsxDEV("p",{children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3671,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3669,columnNumber:19},void 0):Q.length===0?n.jsxDEV("div",{className:"p-8 text-center text-gray-400",children:[n.jsxDEV("p",{className:"mb-2",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3675,columnNumber:21},void 0),n.jsxDEV("p",{className:"text-xs",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3676,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3674,columnNumber:19},void 0):n.jsxDEV("div",{className:"divide-y divide-gray-50",children:Q.map((c,V)=>n.jsxDEV("div",{draggable:(oe==null?void 0:oe.id)!==c.id,onDragStart:()=>Ye(V),onDragOver:S=>Te(S,V),onDragEnd:st,onDragLeave:()=>tt(null),className:`flex items-center gap-3 px-4 py-3 hover:bg-gray-50 group transition-all ${Ee===V?"opacity-50 bg-gray-100":""} ${ze===V?"border-t-2 border-gray-400":""} ${(oe==null?void 0:oe.id)!==c.id?"cursor-grab active:cursor-grabbing":""}`,children:(oe==null?void 0:oe.id)===c.id?n.jsxDEV(n.Fragment,{children:[n.jsxDEV("input",{type:"text",value:ne,onChange:S=>be(S.target.value),onKeyDown:S=>{S.key==="Enter"&&Ve(),S.key==="Escape"&&(R(null),be(""))},className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-gray-300 focus:border-gray-400",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3698,columnNumber:29},void 0),n.jsxDEV("button",{onClick:Ve,className:"px-3 py-1.5 bg-gray-800 text-white text-xs rounded-lg hover:bg-gray-700",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3712,columnNumber:29},void 0),n.jsxDEV("button",{onClick:()=>{R(null),be("")},className:"px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-lg hover:bg-gray-200",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3718,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3697,columnNumber:27},void 0):n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"text-gray-300 text-xs select-none",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3730,columnNumber:29},void 0),n.jsxDEV("span",{className:"text-gray-300 text-xs w-5 text-right select-none",children:V+1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3731,columnNumber:29},void 0),n.jsxDEV("span",{className:"flex-1 text-sm text-gray-700 select-none",children:c.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3732,columnNumber:29},void 0),n.jsxDEV("button",{onClick:()=>{R(c),be(c.name)},className:"px-2 py-1 text-gray-400 hover:text-gray-700 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3733,columnNumber:29},void 0),n.jsxDEV("button",{onClick:()=>Me(c.id),className:"px-2 py-1 text-gray-400 hover:text-red-500 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3742,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3729,columnNumber:27},void 0)},c.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3681,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3679,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3667,columnNumber:15},void 0),Q.length>0&&n.jsxDEV("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center text-xs text-gray-400",children:"     /"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3758,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3625,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:3617,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Schedule.tsx",lineNumber:2800,columnNumber:7},void 0)},Yf=({projectName:t,onClose:s,type:e="cash"})=>{const r=e==="cash",a=r?"":"",i=r?"      .":"      .",[o,l]=b.useState({receiptDate:Ze(new Date,"yyyy-MM-dd"),customerName:"",amount:"",purpose:" ",receivedBy:""}),m=()=>{window.print()},h=p=>{const u=Number(p.replace(/,/g,""));return isNaN(u)?"":u.toLocaleString()},d=p=>{if(p===0)return"";const u=["","","",""],N=["","","",""],j=["","","","","","","","","",""];let x="",A=0;for(;p>0;){const L=p%1e4;if(L>0){let k="",F=L,me=0;for(;F>0;){const Q=F%10;Q>0&&(k=j[Q]+N[me]+k),F=Math.floor(F/10),me++}x=k+u[A]+x}p=Math.floor(p/1e4),A++}return x+""};return n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[n.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:a},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:76,columnNumber:13},void 0),n.jsxDEV("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full",children:n.jsxDEV(ht,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:81,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:77,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:75,columnNumber:11},void 0),n.jsxDEV("div",{className:"p-6 space-y-4 print:hidden",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:88,columnNumber:15},void 0),n.jsxDEV("input",{type:"date",value:o.receiptDate,onChange:p=>l({...o,receiptDate:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:89,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:87,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:98,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:o.customerName,onChange:p=>l({...o,customerName:p.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:99,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:97,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:109,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:h(o.amount),onChange:p=>{const u=p.target.value.replace(/,/g,"");/^\d*$/.test(u)&&l({...o,amount:u})},placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:110,columnNumber:15},void 0),o.amount&&n.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:d(Number(o.amount))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:123,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:108,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:130,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:o.purpose,onChange:p=>l({...o,purpose:p.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:131,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:129,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:140,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:o.receivedBy,onChange:p=>l({...o,receivedBy:p.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:141,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:139,columnNumber:13},void 0),n.jsxDEV("button",{onClick:m,disabled:!o.customerName||!o.amount||!o.receivedBy,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[n.jsxDEV(Ci,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:155,columnNumber:15},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:150,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:86,columnNumber:11},void 0),n.jsxDEV("div",{className:"hidden print:block p-12",children:n.jsxDEV("div",{className:"border-4 border-double border-gray-900 p-8",children:[n.jsxDEV("h1",{className:"text-center text-3xl font-bold mb-8",children:r?"    ":"    "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:163,columnNumber:15},void 0),n.jsxDEV("div",{className:"space-y-6 text-lg",children:[n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:169,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1 receipt-date",children:Ze(new Date(o.receiptDate),"yyyy MM dd",{locale:gt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:170,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:168,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:174,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:o.customerName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:175,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:173,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:179,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:180,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:178,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:184,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1 font-bold receipt-amount",children:["",Number(o.amount).toLocaleString(),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:185,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:183,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:"():"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:191,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:d(Number(o.amount))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:192,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:190,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[n.jsxDEV("span",{className:"font-medium w-32",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:196,columnNumber:19},void 0),n.jsxDEV("span",{className:"flex-1",children:o.purpose},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:197,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:195,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:167,columnNumber:15},void 0),n.jsxDEV("div",{className:"mt-12 text-center",children:[n.jsxDEV("p",{className:"text-lg mb-8",children:i},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:202,columnNumber:17},void 0),n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("p",{className:"text-lg receipt-date",children:Ze(new Date(o.receiptDate),"yyyy MM dd",{locale:gt})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:205,columnNumber:19},void 0),n.jsxDEV("p",{className:"text-xl font-medium mt-8",children:[": ",o.receivedBy," ",n.jsxDEV("span",{className:"ml-4",children:"()"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:207,columnNumber:48},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:206,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:204,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:162,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:161,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:72,columnNumber:7},void 0),n.jsxDEV("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
        }
      `},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:217,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:71,columnNumber:5},void 0)},Kf="HVLabImageDB",Qf=1,Es="paymentRecordImages";let qn=null;const Da=()=>new Promise((t,s)=>{if(qn){t(qn);return}const e=indexedDB.open(Kf,Qf);e.onerror=()=>{console.error("IndexedDB  :",e.error),s(e.error)},e.onsuccess=()=>{qn=e.result,t(qn)},e.onupgradeneeded=r=>{const a=r.target.result;a.objectStoreNames.contains(Es)||a.createObjectStore(Es,{keyPath:"id"})}}),Xf=async()=>{try{const t=await Da();return new Promise((s,e)=>{const i=t.transaction(Es,"readonly").objectStore(Es).getAll();i.onsuccess=()=>{const o={};i.result.forEach(l=>{o[l.id]=l.images}),s(o)},i.onerror=()=>{console.error("  :",i.error),e(i.error)}})}catch(t){console.error("IndexedDB , localStorage :",t);const s=localStorage.getItem("paymentRecordImages");return s?JSON.parse(s):{}}},Jf=async(t,s)=>{try{const e=await Da();return new Promise((r,a)=>{const l=e.transaction(Es,"readwrite").objectStore(Es).put({id:t,images:s});l.onsuccess=()=>r(),l.onerror=()=>{console.error("  :",l.error),a(l.error)}})}catch(e){throw console.error("IndexedDB  :",e),e}},Gf=async t=>{try{const s=await Da();return new Promise((e,r)=>{const a=s.transaction(Es,"readwrite"),i=a.objectStore(Es);i.clear(),Object.entries(t).forEach(([o,l])=>{i.put({id:o,images:l})}),a.oncomplete=()=>e(),a.onerror=()=>{console.error("  :",a.error),r(a.error)}})}catch(s){throw console.error("IndexedDB   :",s),s}},Zf=async()=>{try{const t=localStorage.getItem("paymentRecordImages");if(t){const s=JSON.parse(t);Object.keys(s).length>0&&(await Gf(s),localStorage.removeItem("paymentRecordImages"),console.log("localStorage IndexedDB  "))}}catch(t){console.error(" :",t)}},eg=()=>{const{payments:t,loadPaymentsFromAPI:s,addPaymentToAPI:e,deletePaymentFromAPI:r,updatePaymentInAPI:a,updatePayment:i}=Os(),{user:o}=js(),l=mr(),[m,h]=b.useState(""),[d,p]=b.useState(null),[u,N]=b.useState(null),[j,x]=b.useState(!1),[A,L]=b.useState(!1),[k,F]=b.useState(!1),[me,Q]=b.useState(!1),[T,ie]=b.useState(""),[_,le]=b.useState("form"),[ve,oe]=b.useState(!1),[R,ne]=b.useState(!1),be=b.useRef(null),[je,Se]=b.useState("pending"),[Ee,et]=b.useState("all"),[ze,tt]=b.useState(()=>localStorage.getItem("payments_showMyRequestsOnly")==="true"),[z,we]=b.useState(!1),[se,Ve]=b.useState(null),[Me,Ye]=b.useState(!1),[Te,st]=b.useState(""),[Be,qe]=b.useState(!1),Dt=b.useRef(!1),[H,ke]=b.useState([]),[Ce,ge]=b.useState([]),[Ie,Xe]=b.useState(null),[nt,$e]=b.useState([]),[v,B]=b.useState([]),[I,J]=b.useState(!1),[G,Z]=b.useState({}),[pe,_e]=b.useState(!1),re=()=>{const g=localStorage.getItem("lastSelectedProject"),M=l.filter(C=>C.status!=="completed");return g&&M.some(C=>C.name===g)?g:M.length>0?M[0].name:""},[q,D]=b.useState({project:"",date:Ze(new Date,"yyyy-MM-dd"),process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]});b.useEffect(()=>{(async()=>{try{const M=await Ns.getAllContractors();ke(M.map(C=>({id:C._id||C.id,rank:C.rank,companyName:C.companyName,name:C.name,process:C.process,contact:C.contact,accountNumber:C.accountNumber,bankName:C.bankName,notes:C.notes,createdAt:new Date(C.createdAt),updatedAt:new Date(C.updatedAt)})))}catch(M){console.error("Failed to load contractors:",M)}})()},[]),b.useEffect(()=>{s().catch(M=>{console.error("Failed to load payments:",M)});const g=()=>{oe(window.innerWidth<1024)};if(g(),window.addEventListener("resize",g),l.length>0&&!q.project){const M=re();M&&(D(C=>({...C,project:M})),localStorage.setItem("lastSelectedProject",M))}return()=>window.removeEventListener("resize",g)},[s,l]),b.useEffect(()=>{const g=setInterval(()=>{console.log("[ ]    ..."),s().catch(C=>{console.error("[ ] :",C)})},3e4),M=()=>{document.visibilityState==="visible"&&(console.log("[ ]   -    ..."),s().catch(C=>{console.error("[ ] :",C)}))};return document.addEventListener("visibilitychange",M),()=>{clearInterval(g),document.removeEventListener("visibilitychange",M)}},[s]),b.useEffect(()=>{const g=Kn.getSocket();if(!g)return;const M=C=>{console.log(" [ ]    :",C),s().catch(w=>{console.error("[ ]  :",w)})};return g.on("payment:refresh",M),()=>{g.off("payment:refresh",M)}},[s]),b.useEffect(()=>{(async()=>{var w,E,$,f;if(Dt.current)return;const M=new URLSearchParams(window.location.search),C=M.get("complete")||M.get("c");if(C){if(!o){console.log("[ ]   -  ");return}Dt.current=!0,console.log("[ ]  :",C),window.history.replaceState({},"","/payments"),le("list"),Se("completed"),et("all"),i(String(C),{status:"completed",completionDate:new Date}),O.success(" "),window.dispatchEvent(new CustomEvent("paymentCompleted"));try{await a(String(C),{status:"completed"}),await s();const y=Kn.getSocket();y&&y.emit("payment:refresh")}catch(y){console.error("[ ]  :",y),i(String(C),{status:"pending",completionDate:void 0}),Se("pending");let P="  ";((w=y.response)==null?void 0:w.status)===401?P=" .  ":((E=y.response)==null?void 0:E.status)===404?P="     (ID: "+C+")":(f=($=y.response)==null?void 0:$.data)!=null&&f.error?P=y.response.data.error:y.message&&(P+=": "+y.message),O.error(P)}}})()},[s,a,i,o]),b.useEffect(()=>{if(q.process){const g=new Set(t.filter(E=>{var $;return E.status==="completed"&&(($=E.bankInfo)==null?void 0:$.accountHolder)}).map(E=>E.bankInfo.accountHolder.trim().toLowerCase())),M=(E,$)=>{const f=E.toLowerCase(),y=$.toLowerCase();if(f.includes(y)||y.includes(f))return!0;const P=f.split("/").map(ce=>ce.trim()),W=y.replace(/$/,"").trim();for(const ce of P)if(ce===W||W.includes(ce)||ce.includes(W))return!0;return!1},w=H.filter(E=>{if(!M(q.process,E.process))return!1;const f=E.accountNumber&&E.accountNumber.trim()!=="",y=E.name.trim().toLowerCase(),P=g.has(y);return f||P}).sort((E,$)=>{const f=E.accountNumber&&E.accountNumber.trim()!=="",y=$.accountNumber&&$.accountNumber.trim()!=="";return f&&!y?-1:!f&&y?1:0});ge(w)}else ge([])},[q.process,H,t]),b.useEffect(()=>{if(q.process){const g=(w,E)=>{if(!E)return!1;const $=w.toLowerCase(),f=E.toLowerCase();if($.includes(f)||f.includes($))return!0;const y=$.split("/").map(W=>W.trim()),P=f.replace(/$/,"").trim();for(const W of y)if(W===P||P.includes(W)||W.includes(P))return!0;return!1},M=t.filter(w=>{var E,$,f;return w.status==="completed"&&w.process&&g(q.process,w.process)&&((E=w.bankInfo)==null?void 0:E.accountHolder)&&(($=w.bankInfo)==null?void 0:$.bankName)&&((f=w.bankInfo)==null?void 0:f.accountNumber)}),C=new Map;M.forEach(w=>{const E=`${w.bankInfo.accountHolder}_${w.bankInfo.bankName}_${w.bankInfo.accountNumber}`;C.has(E)||C.set(E,{accountHolder:w.bankInfo.accountHolder,bankName:w.bankInfo.bankName,accountNumber:w.bankInfo.accountNumber,itemName:w.itemName||"",amount:w.amount||0})}),$e(Array.from(C.values()))}else $e([])},[q.process,t]),b.useEffect(()=>{var M;const g=((M=q.accountHolder)==null?void 0:M.trim())||"";if(g.length>=1&&I){const C=[],w=new Set;H.filter(E=>E.accountNumber&&E.accountNumber.trim()!=="").forEach(E=>{const $=E.name.trim(),f=$.toLowerCase(),y=g.toLowerCase();f.startsWith(y)&&!w.has(f)&&(w.add(f),C.push({name:$,bankName:E.bankName||"",accountNumber:E.accountNumber||"",source:"contractor"}))}),t.filter(E=>{var $;return E.status==="completed"&&(($=E.bankInfo)==null?void 0:$.accountHolder)}).forEach(E=>{const $=E.bankInfo.accountHolder.trim(),f=$.toLowerCase(),y=g.toLowerCase();f.startsWith(y)&&!w.has(f)&&(w.add(f),C.push({name:$,bankName:E.bankInfo.bankName||"",accountNumber:E.bankInfo.accountNumber||"",source:"payment"}))}),B(C)}else B([])},[q.accountHolder,I,H,t]);const Y=g=>{const M=g.split(`
`).map(y=>y.trim()).filter(y=>y),C={amounts:{},bankInfo:{},vendor:null,itemName:void 0,includeVat:!1},w=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],E=y=>{const P=["","","","","","","",""];for(const W of P)if(y.endsWith(W)&&y.length>W.length+1)return y.slice(0,-W.length);return y},$=y=>{if(!y||y.length<2||y.length>5||!/^[-]{2,5}$/.test(y)||["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].includes(y)||["","","","","","","","","","","","","","","","","","","","","","","","","",""].includes(y))return!1;if(y.length>=2){const ce=y.charAt(0),fe=y.substring(0,2);if(["","","","","","",""].includes(fe)||w.includes(ce))return!0}return y.length>=2&&y.length<=4},f=M.some(y=>y.includes(" ")||y.includes(""));if(M.forEach((y,P)=>{if(y.includes("")&&y.includes(":")){const W=y.match(/\s*:\s*(.+)/);W&&(C.itemName=W[1].trim())}if(y.includes("")&&y.includes(":")){const W=y.match(/\s*:\s*(.+)/);W&&(C.bankInfo.accountHolder=W[1].trim())}if(y.includes("")&&y.includes(":")){const W=y.match(/\s*:\s*(.+)/);W&&(C.bankInfo.bankName=W[1].trim())}if(y.includes("")&&y.includes(":")){const W=y.match(/\s*:\s*(.+)/);W&&(C.bankInfo.accountNumber=W[1].trim())}if(y.includes("")&&y.includes(":")){const W=y.match(/\s*:\s*([\d,]+)?/);W&&(C.amounts.total=parseInt(W[1].replace(/,/g,"")))}}),f||(M.forEach(y=>{const P=y.match(/\[([^\]]+)\]/);P&&!C.itemName&&(C.itemName=P[1].trim())}),M.forEach((y,P)=>{(y.includes("")||y.includes(" ")||y.includes("()"))&&(C.includeVat=!0);const W=y.match(/=\s*([\d,]+)\s*?/);let ce=null;if(W){const De=parseInt(W[1].replace(/,/g,""));De>=1e3&&(C.amounts.total=De)}else if(ce=y.match(/(\d+)\s*\s*?/),ce){const De=parseInt(ce[1])*1e4;y.includes("")||y.includes("")?C.amounts.material=De:y.includes("")||y.includes("")?C.amounts.labor=De:C.amounts.total||(C.amounts.total=De),y=y.replace(/(\d+)\s*\s*?/g,"")}y.includes("/")&&y.split("/").forEach(Ge=>{const lt=Ge.trim();lt.startsWith("[")||lt.endsWith("]")||(/^[\d\-]+$/.test(lt)&&lt.replace(/\-/g,"").length>=10?C.bankInfo.accountNumber||(C.bankInfo.accountNumber=lt):$(lt)&&!C.bankInfo.accountHolder&&(C.bankInfo.accountHolder=lt))});const fe=[/\d{6}[\s\-]+\d{8}/,/\d{6}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{5,7}[\s\-]+\d{2}[\s\-]+\d{5,7}/,/\d{2,4}[\s\-]+\d{2,4}[\s\-]+\d{2,4}[\s\-]+\d{2,4}/,/\d{3}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{3}[\s\-]+\d{4}[\s\-]+\d{7}/,/\d{4}[\s\-]+\d{4}[\s\-]+\d{5}/,/\d{3,4}[\s\-]+\d{2,6}[\s\-]+\d{4,7}/,/\d{5,6}[\s\-]+\d{6,8}/,/\d{10,}/];let Ne="",ee=-1;for(const De of fe){const Ge=y.match(De);if(Ge&&!C.bankInfo.accountNumber){Ne=Ge[0],ee=Ge.index||-1,C.bankInfo.accountNumber=Ge[0].trim().replace(/\s+/g,"-");const zt=y.substring(ee+Ne.length).trim().split(/\s+/);for(const dt of zt){if(dt.startsWith("[")||dt.endsWith("]"))continue;const St=E(dt);if($(St)){C.bankInfo.accountHolder=St;break}}if(!C.bankInfo.accountHolder&&P>0){const St=M[P-1].split(/\s+/);for(const Ct of St){if(Ct.startsWith("[")||Ct.endsWith("]"))continue;const yt=E(Ct);if($(yt)){C.bankInfo.accountHolder=yt;break}}}if(!C.bankInfo.accountHolder&&P+1<M.length){const dt=M[P+1],St=dt.split(/\s+/);for(const Ct of St){if(Ct.startsWith("[")||Ct.endsWith("]"))continue;const yt=E(Ct);if($(yt)){C.bankInfo.accountHolder=yt;break}}if(!C.bankInfo.accountHolder){const Ct=dt.match(/^([-]{2,6})/);if(Ct){const yt=E(Ct[1].trim());$(yt)&&(C.bankInfo.accountHolder=yt)}}}break}}const He=y.match(/[\d,]+/g);He&&He.forEach(De=>{const Ge=parseInt(De.replace(/,/g,"")),lt=De.replace(/,/g,""),zt=Ne&&Ne.includes(lt);!C.bankInfo.accountNumber&&lt.length>=10&&lt.length<=20?(C.bankInfo.accountNumber=lt,Ne=lt):Ge>=1e3&&!ce&&!zt&&(y.includes("")||y.includes("")?C.amounts.material=Ge:y.includes("")||y.includes("")?C.amounts.labor=Ge:C.amounts.total||(C.amounts.total=Ge))});const Re={:"KB",KB:"KB",:"",:"",:"",:"IBK",IBK:"IBK",:"NH",NH:"NH",:"",:"",:"",:"",K:"",:"KDB",KDB:"KDB",:"",:"",:"",:"",:"",:"",SC:"SC",SC:"SC",:"SC",SC:"SC",:"",:"",:"",:""},ye=Object.keys(Re).sort((De,Ge)=>Ge.length-De.length);for(const De of ye)if(y.includes(De)){const Ge=Re[De];C.bankInfo.bankName=Ge;const lt=new RegExp(`${De}(?:|)?\\s+([-a-zA-Z0-9]{2,10})`),zt=y.match(lt);if(zt){const dt=E(zt[1]);dt&&!/^\d+$/.test(dt)&&dt!==""&&(C.bankInfo.accountHolder=dt)}break}if(!C.bankInfo.bankName){const De=y.match(/([-]+)(|)/);De&&(C.bankInfo.bankName=De[0])}const Pe=[/\(\)[-a-zA-Z0-9]+/,/\(\)[-a-zA-Z0-9]+/,/\(\)[-a-zA-Z0-9]+/,/\s*[-a-zA-Z0-9]+/,/\s*[-a-zA-Z0-9]+/];for(const De of Pe){const Ge=y.match(De);if(Ge&&!C.bankInfo.accountHolder){C.bankInfo.accountHolder=Ge[0].trim();break}}const ut=y.match(/\(([-]{2,5})\)/);if(ut&&!C.bankInfo.accountHolder){const De=ut[1];$(De)&&!["","",""].includes(De)&&(C.bankInfo.accountHolder=De)}if(!C.bankInfo.accountHolder){const De=/[-]{2,6}/g,Ge=y.match(De);if(Ge){const lt=y.match(/\d{10,}/)||y.match(/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/),zt=y.match(/||||/);Ge.forEach(dt=>{const St=E(dt),Ct=g.split(`
`)[P];if(Ct&&Ct.includes(`[${dt}]`)||!$(St)||["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].includes(St))return;const _t=y.indexOf(dt);if(_t>0){const Kt=y[_t-1];if(/[-]/.test(Kt))return}if(_t+dt.length<y.length){const Kt=y[_t+dt.length];if(/[-]/.test(Kt))return}if(!(ut&&St===ut[1])){if((lt||zt)&&!C.bankInfo.accountHolder)C.bankInfo.accountHolder=St;else if(!C.bankInfo.accountHolder){const Kt=/||||/,Ms=/\d{6,}/;(P>0&&(Ms.test(M[P-1])||Kt.test(M[P-1]))||P<M.length-1&&(Ms.test(M[P+1])||Kt.test(M[P+1]))||Kt.test(y))&&(C.bankInfo.accountHolder=St)}}})}}const Rt={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};for(const[De,Ge]of Object.entries(Rt))if(y.includes(De)){C.vendor=Ge;break}if(P===0&&!C.itemName){const De=y.replace(/[\[\]{}()<>]/g,"").trim();De&&!De.includes(" ")&&($(De)||(C.itemName=De.substring(0,50)))}})),C.itemName&&C.itemName.includes("")&&(C.vendor=""),C.itemName){const y=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","KB","NH","IBK","SC","","",""],P=C.itemName.toLowerCase(),W=y.some(ee=>P===ee.toLowerCase()||P.startsWith(ee.toLowerCase()+" ")||P.replace(/\s+/g,"").match(/^[\d\-\s]+$/)),ce=/^[\d\-\s]/.test(C.itemName),fe=/^\d{2,}[\s\-]?\d+/.test(C.itemName.replace(/[-]/g,"").trim()),Ne=C.bankInfo.accountHolder&&(C.itemName===C.bankInfo.accountHolder||C.itemName.includes(C.bankInfo.accountHolder));(W||ce||fe||Ne)&&(C.itemName=void 0)}return C},ue=async()=>{var g;try{const M=q.quickText;if(!M.trim())return;let C=t;t.length===0&&(console.log("payments  ,  ..."),await s(),await new Promise(ee=>setTimeout(ee,100)),C=Os.getState().payments,console.log("payments  :",C.length,""));const w=Y(M);console.log("  :",w);const E={project:q.project,date:q.date,quickText:q.quickText,quickImages:q.quickImages||[],process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[]};Xe(null),L(!1),F(!1);let $=0;w.amounts.material&&($+=w.amounts.material),w.amounts.labor&&($+=w.amounts.labor),w.amounts.total&&!w.amounts.material&&!w.amounts.labor&&($=w.amounts.total),$>0&&(E.amount=$),w.bankInfo.bankName&&(E.bankName=w.bankInfo.bankName),w.bankInfo.accountHolder&&(E.accountHolder=w.bankInfo.accountHolder),w.bankInfo.accountNumber&&(E.accountNumber=w.bankInfo.accountNumber);const f=ee=>ee?ee.replace(/[^0-9]/g,""):"",y=(ee,He)=>{if(!ee||!He)return!1;const Re=f(ee),ye=f(He);if(!Re||!ye)return!1;const Pe=6;return Re.length<Pe||ye.length<Pe?Re===ye:ye.includes(Re)||Re.includes(ye)},P=f(w.bankInfo.accountNumber||""),W=w.bankInfo.accountHolder||"";let ce=!1,fe=H.find(ee=>{const He=f(ee.accountNumber||"");return He&&He===P});if(!fe&&P&&(fe=H.find(ee=>{const He=f(ee.accountNumber||"");return y(P,He)})),fe&&(ce=!0),!fe&&W&&(fe=H.find(ee=>ee.name===W),fe)){console.log("  :",fe.name);const ee=((g=fe.accountNumber)==null?void 0:g.replace(/[-\s]/g,""))||"";P&&!y(P,ee)?(console.log("    ( ) -  "),ce=!1):ce=!0}if(fe&&(ce&&fe.name?(E.accountHolder=fe.name,console.log("    :",W,"",fe.name)):E.accountHolder=fe.name||w.bankInfo.accountHolder,E.bankName=fe.bankName||w.bankInfo.bankName,ce&&(E.accountNumber=fe.accountNumber||w.bankInfo.accountNumber),Xe(fe.id||fe._id||null),fe.process&&(E.process=fe.process)),!fe){let ee=!1;console.log("===     ==="),console.log("  payments :",C.length,""),console.log(" :",P),console.log(" :",W);const He=C.filter(Pe=>Pe.account_holder&&Pe.account_holder.includes(""));console.log("  :",He.length,""),He.forEach(Pe=>console.log("  -",Pe.account_holder,"|",Pe.account_number,"|",Pe.vendor_name,"|",Pe.status));const Re=[...new Set(C.map(Pe=>Pe.account_holder).filter(Boolean))];console.log("   ( 20):",Re.slice(0,20)),console.log("  ():",P);let ye=C.find(Pe=>{var De;const ut=f(Pe.account_number||""),Rt=ut&&ut===P&&Pe.status==="completed";return(De=Pe.account_holder)!=null&&De.includes("")&&console.log("  :",ut,"===",P,":",Rt),Rt});if(ye&&console.log("   :",ye.account_holder,ye.vendor_name),!ye&&P&&(ye=C.find(Pe=>{const ut=f(Pe.account_number||"");return y(P,ut)&&Pe.status==="completed"}),ye&&console.log("   :",ye.account_holder,ye.vendor_name)),ye&&(ee=!0),!ye&&W&&(ye=C.find(Pe=>Pe.account_holder===W&&Pe.status==="completed"),ye)){console.log("    :",ye.account_holder,":",ye.vendor_name);const Pe=f(ye.account_number||"");P&&!y(P,Pe)?(console.log("    ( ) -  "),ee=!1):ee=!0}ye?(console.log(" :",{account_holder:ye.account_holder,account_number:ye.account_number,vendor_name:ye.vendor_name,status:ye.status}),ee&&ye.account_holder?(E.accountHolder=ye.account_holder,console.log("   :",W,"",ye.account_holder)):E.accountHolder=ye.account_holder||w.bankInfo.accountHolder,E.bankName=ye.bank_name||w.bankInfo.bankName,ee&&(E.accountNumber=ye.account_number||w.bankInfo.accountNumber),ye.vendor_name&&!E.process?(E.process=ye.vendor_name,console.log("    :",ye.vendor_name)):console.log("   - vendor_name:",ye.vendor_name,"updatedFormData.process:",E.process)):console.log("  ")}if(w.vendor&&(E.process=w.vendor),!E.process){const ee=M.toLowerCase();for(const He of _r)if(ee.includes(He.toLowerCase())){E.process=He;break}}w.itemName&&(E.itemName=w.itemName),D(E),w.includeVat&&(L(!0),F(!1));const Ne=[];if(w.amounts.material||w.amounts.labor||w.amounts.total){const ee=[];w.amounts.material&&ee.push(`: ${w.amounts.material.toLocaleString()}`),w.amounts.labor&&ee.push(`: ${w.amounts.labor.toLocaleString()}`),w.amounts.total&&!w.amounts.material&&!w.amounts.labor&&ee.push(`: ${w.amounts.total.toLocaleString()}`),Ne.push(ee.join(", "))}if(w.bankInfo.bankName||w.bankInfo.accountHolder){const ee=[];w.bankInfo.bankName&&ee.push(w.bankInfo.bankName),w.bankInfo.accountHolder&&ee.push(w.bankInfo.accountHolder),w.bankInfo.accountNumber&&ee.push(w.bankInfo.accountNumber),ee.length>0&&Ne.push(`: ${ee.join(" ")}`)}w.vendor&&Ne.push(`: ${w.vendor}`),w.includeVat&&Ne.push("  "),Ne.length>0?O.success(`  !
${Ne.join(`
`)}`,{duration:4e3,style:{whiteSpace:"pre-line"}}):O.info("  ...    .")}catch(M){console.error(" :",M),O.error("   .")}};b.useEffect(()=>{(async()=>{try{await Zf();const M=await Xf();Z(M),_e(!0)}catch(M){console.error("  :",M),_e(!0)}})()},[]);const he=b.useRef({});b.useEffect(()=>{pe&&(Object.entries(G).forEach(([g,M])=>{JSON.stringify(he.current[g])!==JSON.stringify(M)&&Jf(g,M).catch(C=>{console.error("  :",C),O.error("  ")})}),he.current={...G})},[G,pe]);const X=b.useCallback(async g=>{var w;const M=(w=g.clipboardData)==null?void 0:w.items;if(!M)return;let C=!1;for(let E=0;E<M.length;E++)if(M[E].type.indexOf("image")!==-1){C=!0;break}if(C){if(!d){const E=document.activeElement;(E==null?void 0:E.tagName)==="INPUT"||(E==null?void 0:E.tagName)==="TEXTAREA"||(E==null?void 0:E.classList.contains("form-input"))||O.error("  ");return}for(let E=0;E<M.length;E++)if(M[E].type.indexOf("image")!==-1){g.preventDefault();const $=M[E].getAsFile();if($){const f=new FileReader;f.onload=async y=>{var W;const P=(W=y.target)==null?void 0:W.result;if(P)try{const ce=t.find(ee=>ee.id===d),Ne=[...(ce==null?void 0:ce.images)||G[d]||[],P];await es.updatePaymentImages(d,Ne),Z(ee=>({...ee,[d]:Ne})),await s(),O.success(" ")}catch(ce){console.error("  :",ce),O.error("  ")}},f.readAsDataURL($)}}}},[d,t,G,s]);b.useEffect(()=>(document.addEventListener("paste",X),()=>document.removeEventListener("paste",X)),[X]);const Je=(o==null?void 0:o.name)===""?t.filter(g=>l.some(M=>M.name===g.project)):t,Fe=[...Je].sort((g,M)=>new Date(M.requestDate).getTime()-new Date(g.requestDate).getTime());console.log("[ ]",{" payments":t.length,"  ":Je.length," ()":t.filter(g=>g.status==="completed").length," ( )":Je.filter(g=>g.status==="completed").length," ":o==null?void 0:o.name," ":l.length});const at=Fe.filter(g=>{var $,f,y;const M=m===""||(($=g.purpose)==null?void 0:$.toLowerCase().includes(m.toLowerCase()))||((f=g.itemName)==null?void 0:f.toLowerCase().includes(m.toLowerCase()))||((y=g.process)==null?void 0:y.toLowerCase().includes(m.toLowerCase())),C=g.status===je,w=je==="pending"||!q.project||g.project===q.project,E=!ze||je!=="completed"||g.requestedBy===(o==null?void 0:o.name);return M&&C&&w&&E}).sort((g,M)=>{if(je==="completed"){const C=!!g.completionDate,w=!!M.completionDate;return C&&!w?-1:!C&&w?1:C&&w?new Date(M.completionDate).getTime()-new Date(g.completionDate).getTime():new Date(M.requestDate).getTime()-new Date(g.requestDate).getTime()}return new Date(M.requestDate).getTime()-new Date(g.requestDate).getTime()}),Lt=g=>{const M=g.id||g._id||null;if(Ie===M){Xe(null);const $=document.querySelector('input[placeholder=" "]');$&&setTimeout(()=>{$.focus()},100);return}Xe(M);const C=kn(g.name);let w=g.bankName||"",E=g.accountNumber||"";if(E&&!w){const $=E.trim().split(/\s+/);if($.length>=2){const f=$[0];(f.includes("")||f.includes("")||f.includes("")||f.includes("")||f.includes(""))&&(w=f,E=$.slice(1).join(""))}}D($=>({...$,accountHolder:C,bankName:w,accountNumber:E}))};at.reduce((g,M)=>{const C=M.materialAmount||0,w=M.laborAmount||0,E=M.amount||0;let $=C,f=w,y=0;return C===0&&w===0&&E>0?M.includesVAT?($=Math.round(E/1.1),y=E-$):($=E,y=0):M.includesVAT?(C>0&&($=Math.round(C/1.1)),w>0&&(f=Math.round(w/1.1)),y=E-($+f)):y=0,g.material+=$,g.labor+=f,g.vat+=y,g.total+=E,g},{material:0,labor:0,vat:0,total:0});const It=async()=>{var M;if(Be){console.log(" Already submitting, ignoring click");return}if(console.log(" handleSave called"),console.log(" Current user:",o),console.log(" Form data:",q),!q.project){O.error(" ");return}if(!q.itemName){O.error(" ");return}const g=Number(q.amount)||0;if(g===0){O.error(" ");return}qe(!0);try{const C=k?Math.round(g*.967):g,w=new Date;if(u){const E={project:q.project,requestDate:new Date(q.date),purpose:q.itemName,amount:C,category:"material",urgency:"normal",process:q.process,itemName:q.itemName,includesVAT:A,applyTaxDeduction:k,materialAmount:C,laborAmount:0,originalLaborAmount:0,accountHolder:q.accountHolder,bank:q.bankName,accountNumber:q.accountNumber,bankInfo:q.accountHolder||q.bankName||q.accountNumber?{accountHolder:q.accountHolder,bankName:q.bankName,accountNumber:q.accountNumber}:void 0,updatedAt:w};console.log(" Updating payment:",E),await a(u,E),O.success(" "),N(null)}else{const E=q.project||"",$={id:`payment_${Date.now()}`,project:E,requestDate:new Date(q.date),requestedBy:(o==null?void 0:o.name)||"  ",purpose:q.itemName,amount:C,status:"pending",category:"material",urgency:"normal",process:q.process,itemName:q.itemName,includesVAT:A,applyTaxDeduction:k,materialAmount:C,laborAmount:0,originalLaborAmount:0,accountHolder:q.accountHolder,bank:q.bankName,accountNumber:q.accountNumber,bankInfo:q.accountHolder||q.bankName||q.accountNumber?{accountHolder:q.accountHolder,bankName:q.bankName,accountNumber:q.accountNumber}:void 0,quickText:q.quickText||"",images:q.quickImages,attachments:[],createdAt:w,updatedAt:w};console.log(" Creating payment:",$),console.log(" Images in payment:",((M=q.quickImages)==null?void 0:M.length)||0,"");const f=await e($);if(O.success(" "),!A&&!k&&q.accountHolder&&q.bankName&&q.accountNumber)try{await de.post("/payments/send-toss-payment-sms",{recipientPhone:"01089423283",accountHolder:q.accountHolder,bankName:q.bankName,accountNumber:q.accountNumber,amount:C,projectName:E,itemName:q.itemName,process:q.process,paymentId:f}),O.success("   ")}catch(y){console.error("SMS  :",y)}}D(E=>({project:E.project,date:Ze(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),L(!1),F(!1),Xe(null),window.innerWidth<768&&le("list")}catch(C){console.error(" Payment save error:",C),O.error("  : "+C.message)}finally{qe(!1)}},us=g=>{var M,C,w,E;try{console.log("[handleEdit] Starting edit for payment:",g.id);const $=g.originalMaterialAmount!==void 0?g.originalMaterialAmount:g.materialAmount||0,f=g.originalLaborAmount!==void 0?g.originalLaborAmount:g.laborAmount||0,y={project:g.project||"",date:g.requestDate?Ze(new Date(g.requestDate),"yyyy-MM-dd"):Ze(new Date,"yyyy-MM-dd"),process:g.process||"",itemName:g.itemName||g.purpose||"",materialCost:$>0?$.toString():"",laborCost:f>0?f.toString():"",amount:((M=g.amount)==null?void 0:M.toString())||"",accountHolder:((C=g.bankInfo)==null?void 0:C.accountHolder)||"",bankName:((w=g.bankInfo)==null?void 0:w.bankName)||"",accountNumber:((E=g.bankInfo)==null?void 0:E.accountNumber)||"",images:g.attachments||[],quickText:g.quickText||"",quickImages:g.images||[]};console.log("[handleEdit] Setting form data:",y),D(y),L(g.includesVAT||!1),F(g.applyTaxDeduction||!1),p(g.id),N(g.id),ve&&le("form"),console.log("[handleEdit] Edit setup complete"),O.success("  ")}catch($){console.error("[handleEdit] Error:",$),O.error("     ")}},jt=async g=>{var M,C,w;try{const E=((M=g.bankInfo)==null?void 0:M.accountHolder)||g.accountHolder,$=((C=g.bankInfo)==null?void 0:C.bankName)||g.bank,f=((w=g.bankInfo)==null?void 0:w.accountNumber)||g.accountNumber;if(!E||!$||!f){O.error("  .    .");return}if(!window.confirm(`  ?

: 
: ${$}
: ${f}
: ${g.amount.toLocaleString()}`))return;const P=f.replace(/[-\s]/g,""),W=ku[$]||$,ce=vu[$]||"004",fe="",Ne=`supertoss://send?amount=${g.amount}&bankCode=${ce}&bank=${encodeURIComponent(W)}&accountNo=${P}&receiverName=${encodeURIComponent(fe)}&toName=${encodeURIComponent(fe)}`;let ee=!1;try{window.location.href=Ne,ee=!0,O.success("  ...",{duration:3e3}),setTimeout(()=>{const He=/iPhone|iPad|iPod/i.test(navigator.userAgent),Re=/Android/i.test(navigator.userAgent);(He||Re)&&O(`      .

: 
: ${f}
: ${g.amount.toLocaleString()}

    .`,{icon:"",duration:8e3})},2e3)}catch(He){console.error("   :",He),O(`   .

: 
: ${$}
: ${f}
: ${g.amount.toLocaleString()}

    .`,{icon:"",duration:1e4})}}catch(E){console.error(" :",E),O.error(`   : ${E.message}`)}},$t=async g=>{const M=t.find(C=>C.id===g);if(M&&M.quickText){const C=localStorage.getItem("executionMemos"),w=C?JSON.parse(C):{};w[g]=M.quickText,localStorage.setItem("executionMemos",JSON.stringify(w))}i(g,{status:"completed",completionDate:new Date}),we(!1),Se("completed"),D(C=>({...C,project:""})),O.success(" "),window.dispatchEvent(new CustomEvent("paymentCompleted"));try{await a(g,{status:"completed"}),console.log("[] API  :",g),await s(),console.log("[]   ");const C=Kn.getSocket();C&&C.emit("payment:refresh")}catch(C){console.error("  :",C),i(g,{status:"pending",completionDate:void 0}),Se("pending"),O.error("   -  ")}},Vt=async g=>{var w;if(!d){O.error("  ");return}const C=Array.from(((w=g.target)==null?void 0:w.files)||[]).filter(E=>E.type.startsWith("image/"));if(C.length!==0){try{const E=await Promise.all(C.map(P=>new Promise((W,ce)=>{const fe=new FileReader;fe.onload=Ne=>{var He;const ee=(He=Ne.target)==null?void 0:He.result;ee?W(ee):ce(new Error("  "))},fe.onerror=()=>ce(new Error("FileReader ")),fe.readAsDataURL(P)}))),$=t.find(P=>P.id===d),y=[...($==null?void 0:$.images)||G[d]||[],...E];await es.updatePaymentImages(d,y),Z(P=>({...P,[d]:y})),await s(),O.success(`${E.length}  `)}catch(E){console.error("  :",E),O.error("  ")}g.target.value=""}},Wt=async g=>{if(d)try{const M=t.find(E=>E.id===d),w=((M==null?void 0:M.images)||G[d]||[]).filter((E,$)=>$!==g);await es.updatePaymentImages(d,w),Z(E=>({...E,[d]:w})),await s()}catch(M){console.error("  :",M),O.error("  ")}},ps=g=>{ie(g),Q(!0)},Tt=g=>{g.preventDefault(),x(!0)},jn=g=>{g.preventDefault(),x(!1)},on=async g=>{if(g.preventDefault(),x(!1),!d){O.error("  ");return}const C=Array.from(g.dataTransfer.files).filter(w=>w.type.startsWith("image/"));if(C.length!==0)try{const w=await Promise.all(C.map(y=>new Promise((P,W)=>{const ce=new FileReader;ce.onload=fe=>{var ee;const Ne=(ee=fe.target)==null?void 0:ee.result;Ne?P(Ne):W(new Error("  "))},ce.onerror=()=>W(new Error("FileReader ")),ce.readAsDataURL(y)}))),E=t.find(y=>y.id===d),f=[...(E==null?void 0:E.images)||G[d]||[],...w];await es.updatePaymentImages(d,f),Z(y=>({...y,[d]:f})),await s(),O.success(`${w.length}  `)}catch(w){console.error("  :",w),O.error("  ")}};return n.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[n.jsxDEV("div",{className:"lg:hidden mb-4",children:n.jsxDEV("select",{value:q.project,onChange:g=>{D({...q,project:g.target.value}),g.target.value&&localStorage.setItem("lastSelectedProject",g.target.value)},className:"w-full px-3 py-2.5 md:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(o==null?void 0:o.name)!==""&&n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2279,columnNumber:35},void 0),l.filter(g=>g.status!=="completed").map(g=>n.jsxDEV("option",{value:g.name,children:g.name},g.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2281,columnNumber:13},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2269,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2268,columnNumber:7},void 0),n.jsxDEV("div",{className:"lg:hidden border-b border-gray-200 mb-4",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:n.jsxDEV("nav",{className:"flex space-x-4",children:[n.jsxDEV("button",{onClick:()=>le("form"),className:`py-2 px-1 border-b-2 font-medium text-sm ${_==="form"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2290,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>le("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${_==="list"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2300,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>le("image"),className:`py-2 px-1 border-b-2 font-medium text-sm ${_==="image"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2310,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2289,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2288,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2287,columnNumber:7},void 0),n.jsxDEV("div",{className:"payment-container grid grid-cols-1 md:grid-cols-6 ipad:grid-cols-6 ipad-lg:grid-cols-6 ipad-xl:grid-cols-12 ipad-2xl:grid-cols-12 gap-3 md:gap-4",children:[n.jsxDEV("div",{className:`payment-form md:col-span-2 ipad:col-span-2 ipad-lg:col-span-2 ipad-xl:col-span-2 ipad-2xl:col-span-2 bg-white rounded-lg border p-3 md:p-4 overflow-y-auto h-[calc(100vh-180px)] ${_!=="form"?"hidden md:block":""}`,children:n.jsxDEV("div",{className:"space-y-4",children:[n.jsxDEV("div",{className:"hidden lg:block payment-project-row",children:n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("select",{value:q.project,onChange:g=>{D({...q,project:g.target.value}),g.target.value&&localStorage.setItem("lastSelectedProject",g.target.value)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(o==null?void 0:o.name)!==""&&n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2345,columnNumber:43},void 0),l.filter(g=>g.status!=="completed").map(g=>n.jsxDEV("option",{value:g.name,children:g.name},g.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2347,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2335,columnNumber:17},void 0),n.jsxDEV("select",{value:q.bankName,onChange:g=>D({...q,bankName:g.target.value}),className:"payment-bank-select hidden px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-8",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2355,columnNumber:19},void 0),n.jsxDEV("option",{value:"KB",children:"KB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2356,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2357,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2358,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2359,columnNumber:19},void 0),n.jsxDEV("option",{value:"NH",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2360,columnNumber:19},void 0),n.jsxDEV("option",{value:"IBK",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2361,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2362,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2363,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2364,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2365,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2366,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2367,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2350,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2334,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2333,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("textarea",{value:q.quickText,onChange:g=>D({...q,quickText:g.target.value}),onPaste:g=>{var C;const M=(C=g.clipboardData)==null?void 0:C.items;if(M){for(let w=0;w<M.length;w++)if(M[w].type.indexOf("image")!==-1){g.preventDefault();const E=M[w].getAsFile();if(E){const $=new FileReader;$.onload=f=>{var P;const y=(P=f.target)==null?void 0:P.result;D(W=>({...W,quickImages:[...W.quickImages,y]}))},$.readAsDataURL(E)}break}}},onDragOver:g=>{g.preventDefault(),g.stopPropagation()},onDrop:g=>{g.preventDefault(),g.stopPropagation(),Array.from(g.dataTransfer.files).filter(w=>w.type.startsWith("image/")).forEach(w=>{const E=new FileReader;E.onload=$=>{var y;const f=(y=$.target)==null?void 0:y.result;D(P=>({...P,quickImages:[...P.quickImages,f]}))},E.readAsDataURL(w)})},rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:ve?"  ":"   (   Ctrl+V)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2374,columnNumber:15},void 0),q.quickImages.length>0&&n.jsxDEV("div",{className:"mt-2 mb-2 grid grid-cols-3 gap-2",children:q.quickImages.map((g,M)=>n.jsxDEV("div",{className:"relative group",children:[n.jsxDEV("img",{src:g,alt:` ${M+1}`,className:"w-full h-20 object-cover rounded-lg border"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2429,columnNumber:23},void 0),n.jsxDEV("button",{type:"button",onClick:()=>{D(C=>({...C,quickImages:C.quickImages.filter((w,E)=>E!==M)}))},className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2434,columnNumber:23},void 0)]},M,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2428,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2426,columnNumber:17},void 0),n.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[n.jsxDEV("label",{className:"cursor-pointer",children:[n.jsxDEV("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:g=>{Array.from(g.target.files||[]).forEach(C=>{const w=new FileReader;w.onload=E=>{var f;const $=(f=E.target)==null?void 0:f.result;D(y=>({...y,quickImages:[...y.quickImages,$]}))},w.readAsDataURL(C)}),g.target.value=""}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2453,columnNumber:19},void 0),n.jsxDEV("div",{className:"w-full h-10 flex items-center justify-center bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium border border-gray-300",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2474,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2452,columnNumber:17},void 0),n.jsxDEV("button",{type:"button",onClick:ue,className:"h-10 flex items-center justify-center bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors text-sm font-medium",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2478,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2451,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2373,columnNumber:13},void 0),n.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",q.date&&`(${Ze(new Date(q.date),"E",{locale:gt})})`]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2491,columnNumber:17},void 0),n.jsxDEV("input",{type:"date",value:q.date,onChange:g=>D({...q,date:g.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer text-gray-900",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundColor:"white",backgroundImage:"none"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2494,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2490,columnNumber:15},void 0),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2510,columnNumber:17},void 0),n.jsxDEV("button",{ref:be,type:"button",onClick:()=>ne(!0),className:"w-full px-3 py-2 border rounded-lg text-left bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:q.process||n.jsxDEV("span",{className:"text-gray-400",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2517,columnNumber:40},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2511,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2509,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2489,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2524,columnNumber:15},void 0),n.jsxDEV("input",{type:"text",value:q.itemName,onChange:g=>D({...q,itemName:g.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2525,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2523,columnNumber:13},void 0),n.jsxDEV("div",{className:"space-y-2 payment-amount-section",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2536,columnNumber:17},void 0),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("input",{type:"text",value:q.amount?Number(q.amount).toLocaleString():"",onChange:g=>{const M=g.target.value.replace(/[^0-9]/g,"");D({...q,amount:M})},className:"w-full px-3 py-2 pr-8 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2538,columnNumber:19},void 0),n.jsxDEV("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2549,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2537,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2535,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex items-center gap-4",children:[n.jsxDEV("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:g=>g.preventDefault(),onClick:()=>{A||F(!1),L(!A)},children:[n.jsxDEV("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${A?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:A&&n.jsxDEV("span",{className:"text-white text-xs",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2567,columnNumber:36},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2566,columnNumber:19},void 0),n.jsxDEV("span",{className:"ml-2 text-sm text-gray-700",children:"  (10%)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2569,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2555,columnNumber:17},void 0),n.jsxDEV("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:g=>g.preventDefault(),onClick:()=>{k||L(!1),F(!k)},children:[n.jsxDEV("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${k?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:k&&n.jsxDEV("span",{className:"text-white text-xs",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2585,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2584,columnNumber:19},void 0),n.jsxDEV("span",{className:"ml-2 text-sm text-gray-700",children:"3.3% "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2587,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2573,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2554,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2534,columnNumber:13},void 0),n.jsxDEV("div",{className:"payment-account-section border-t pt-3 space-y-2",children:[(Ce.length>0||nt.length>0&&!Ie)&&n.jsxDEV("div",{className:"payment-suggestions-row grid grid-cols-2 gap-2",children:[n.jsxDEV("div",{className:`payment-contractor-suggestions bg-amber-50 border border-amber-200 rounded-lg p-2 ${Ce.length===0?"hidden":""}`,children:[n.jsxDEV("label",{className:"block text-xs font-medium text-amber-900 mb-1",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2603,columnNumber:21},void 0),n.jsxDEV("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:Ce.map(g=>{const M=g.id||g._id,C=Ie===M;return n.jsxDEV("button",{type:"button",onClick:()=>Lt(g),className:`w-full text-left px-2 py-1.5 rounded border transition-colors ${C?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-400 hover:bg-gray-50"}`,children:[n.jsxDEV("div",{className:"font-medium text-xs text-gray-900",children:kn(g.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2619,columnNumber:29},void 0),n.jsxDEV("div",{className:"text-[10px] text-gray-500 truncate",children:[g.bankName||""," ",g.accountNumber||""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2622,columnNumber:29},void 0)]},M,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2609,columnNumber:27},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2604,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2600,columnNumber:19},void 0),n.jsxDEV("div",{className:`payment-history-suggestions bg-blue-50 border border-blue-200 rounded-lg p-2 ${nt.length===0||Ie?"hidden":""}`,children:[n.jsxDEV("label",{className:"block text-xs font-medium text-blue-900 mb-1",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2635,columnNumber:21},void 0),n.jsxDEV("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:nt.map((g,M)=>n.jsxDEV("button",{type:"button",onClick:()=>{D(C=>({...C,accountHolder:g.accountHolder,bankName:g.bankName,accountNumber:g.accountNumber})),$e([])},className:"w-full text-left px-2 py-1.5 rounded border border-blue-200 bg-white hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[n.jsxDEV("div",{className:"font-medium text-xs text-gray-900",children:g.accountHolder},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2652,columnNumber:27},void 0),n.jsxDEV("div",{className:"text-[10px] text-gray-500 truncate",children:[g.bankName," ",g.accountNumber]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2655,columnNumber:27},void 0)]},M,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2638,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2636,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2632,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2598,columnNumber:17},void 0),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2667,columnNumber:17},void 0),n.jsxDEV("input",{type:"text",value:q.accountHolder,onChange:g=>D({...q,accountHolder:g.target.value}),onFocus:()=>J(!0),onBlur:()=>setTimeout(()=>J(!1),150),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2668,columnNumber:17},void 0),I&&v.length>0&&n.jsxDEV("div",{className:"absolute z-20 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:v.map((g,M)=>n.jsxDEV("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 border-b last:border-b-0 flex justify-between items-center",onMouseDown:C=>C.preventDefault(),onClick:()=>{D({...q,accountHolder:g.name,bankName:g.bankName||q.bankName,accountNumber:g.accountNumber||q.accountNumber}),J(!1)},children:[n.jsxDEV("span",{className:"font-medium",children:g.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2696,columnNumber:25},void 0),n.jsxDEV("span",{className:"text-xs text-gray-500",children:g.source==="contractor"?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2697,columnNumber:25},void 0)]},`${g.name}-${M}`,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2681,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2679,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2666,columnNumber:15},void 0),n.jsxDEV("div",{className:"payment-bank-field",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2708,columnNumber:17},void 0),n.jsxDEV("select",{value:q.bankName,onChange:g=>D({...q,bankName:g.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2714,columnNumber:19},void 0),n.jsxDEV("option",{value:"KB",children:"KB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2715,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2716,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2717,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2718,columnNumber:19},void 0),n.jsxDEV("option",{value:"NH",children:"NH"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2719,columnNumber:19},void 0),n.jsxDEV("option",{value:"IBK",children:"IBK"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2720,columnNumber:19},void 0),n.jsxDEV("option",{value:"SC",children:"SC"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2721,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2722,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2723,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2724,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2725,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2726,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2727,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2728,columnNumber:19},void 0),n.jsxDEV("option",{value:"KDB",children:"KDB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2729,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2730,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2731,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2732,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2733,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2734,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2735,columnNumber:19},void 0),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2736,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2709,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2707,columnNumber:15},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2741,columnNumber:17},void 0),n.jsxDEV("input",{type:"text",value:q.accountNumber,onChange:g=>D({...q,accountNumber:g.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2742,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2740,columnNumber:15},void 0),n.jsxDEV("div",{className:"pt-2 border-t",children:n.jsxDEV("div",{className:"flex justify-between items-baseline",children:[n.jsxDEV("span",{className:"font-medium",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2753,columnNumber:19},void 0),n.jsxDEV("div",{className:"text-right",children:[(A||k)&&n.jsxDEV("span",{className:"text-xs text-gray-500 mr-2",children:["(",A&&" ",k&&"3.3% ",")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2756,columnNumber:23},void 0),n.jsxDEV("span",{className:"font-semibold",children:[(()=>{const g=Number(q.amount)||0;let M=g;return k&&(M=Math.round(g*.967)),M.toLocaleString()})(),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2760,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2754,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2752,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2751,columnNumber:15},void 0),n.jsxDEV("div",{className:"mt-6 lg:my-[50px]",children:[u&&n.jsxDEV("button",{onClick:()=>{N(null),D(g=>({project:g.project,date:Ze(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),L(!1),F(!1),Xe(null),O.info(" ")},className:"w-full py-2 mb-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 touch-manipulation",style:{minHeight:"48px"},children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2779,columnNumber:19},void 0),n.jsxDEV("button",{onClick:g=>{console.log(" Payment button clicked!",g),console.log(" Button element:",g.currentTarget),console.log(" Form data:",q),It()},disabled:Be,className:`w-full py-3 rounded-lg touch-manipulation font-medium text-base ${Be?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800 active:bg-gray-950"}`,style:{minHeight:"48px",WebkitTapHighlightColor:"transparent"},children:Be?"...":u?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2808,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2777,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2595,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2331,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2328,columnNumber:9},void 0),n.jsxDEV("div",{className:`payment-list md:col-span-4 ipad:col-span-4 ipad-lg:col-span-4 ipad-xl:col-span-4 ipad-2xl:col-span-4 bg-white rounded-lg border overflow-hidden flex flex-col h-[calc(100vh-180px)] ${_!=="list"?"hidden md:flex":""}`,children:[n.jsxDEV("div",{className:"bg-gray-50 px-4 pt-3 pb-0 flex-shrink-0",children:n.jsxDEV("div",{className:"flex items-center justify-between gap-4",children:n.jsxDEV("nav",{className:"flex gap-2 overflow-x-auto flex-1",children:[n.jsxDEV("button",{onClick:()=>Se("pending"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${je==="pending"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["",n.jsxDEV("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${je==="pending"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:Fe.filter(g=>g.status==="pending").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2847,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2838,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{Se("completed"),D(g=>({...g,project:""}))},className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${je==="completed"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["",n.jsxDEV("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${je==="completed"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:Fe.filter(g=>g.status==="completed").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2866,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2853,columnNumber:17},void 0),je==="completed"&&n.jsxDEV("label",{className:"ml-3 flex items-center gap-1.5 cursor-pointer text-xs text-gray-600",children:[n.jsxDEV("input",{type:"checkbox",checked:ze,onChange:g=>{tt(g.target.checked),localStorage.setItem("payments_showMyRequestsOnly",String(g.target.checked))},className:"w-3.5 h-3.5 rounded border-gray-300 text-gray-600 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2875,columnNumber:21},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2874,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2837,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2836,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2835,columnNumber:11},void 0),n.jsxDEV("div",{className:"border-b border-gray-200"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2890,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex-1 overflow-auto p-4",children:at.length>0?n.jsxDEV("div",{className:"space-y-4",children:at.map(g=>{var f,y,P;const M=g.amount||0,C=((f=g.bankInfo)==null?void 0:f.accountHolder)||g.accountHolder||"",w=((y=g.bankInfo)==null?void 0:y.bankName)||g.bank||"",E=((P=g.bankInfo)==null?void 0:P.accountNumber)||g.accountNumber||"",$=C&&w&&E?`${C} | ${w} ${E}`:" ";return n.jsxDEV("div",{onClick:()=>p(g.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${d===g.id?"border-gray-900 bg-gray-50":"border-gray-200 bg-white hover:border-gray-400"}`,children:[n.jsxDEV("div",{className:"flex justify-between items-start mb-2.5",children:[n.jsxDEV("div",{className:"flex-1 min-w-0",children:[n.jsxDEV("div",{className:"flex items-baseline gap-2",children:[g.process&&n.jsxDEV("span",{className:"text-xs text-gray-500 shrink-0",children:["[",g.process,"]"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2922,columnNumber:31},void 0),n.jsxDEV("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:g.purpose||g.itemName||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2924,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2920,columnNumber:27},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:g.project||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2928,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2919,columnNumber:25},void 0),n.jsxDEV("div",{className:"text-right ml-3 shrink-0",children:[n.jsxDEV("p",{className:"text-base font-bold text-gray-900",children:[M.toLocaleString(),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2931,columnNumber:27},void 0),n.jsxDEV("p",{className:"text-[10px] text-gray-400",children:[g.requestedBy||"-","  ",Ze(new Date(g.requestDate),"MM/dd",{locale:gt})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2934,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2930,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2918,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex items-center gap-2 mb-2.5 text-xs",children:[n.jsxDEV("span",{className:"text-gray-400",children:[" ",(g.materialAmount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2942,columnNumber:25},void 0),n.jsxDEV("span",{className:"text-gray-300",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2943,columnNumber:25},void 0),n.jsxDEV("span",{className:"text-gray-400",children:[" ",(g.laborAmount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2944,columnNumber:25},void 0),g.includesVAT&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"text-gray-300",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2947,columnNumber:29},void 0),n.jsxDEV("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-700 text-[10px] rounded",children:"VAT"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2948,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2946,columnNumber:27},void 0),g.applyTaxDeduction&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("span",{className:"text-gray-300",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2953,columnNumber:29},void 0),n.jsxDEV("span",{className:"px-1.5 py-0.5 bg-purple-50 text-purple-700 text-[10px] rounded",children:"3.3%"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2954,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2952,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2941,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex items-center justify-between mb-2.5",children:[n.jsxDEV("div",{className:"text-xs text-gray-500 truncate flex-1",children:$},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2961,columnNumber:25},void 0),n.jsxDEV("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[n.jsxDEV("button",{onClick:W=>{W.stopPropagation(),us(g)},className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"",children:n.jsxDEV(Jl,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2973,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2965,columnNumber:27},void 0),n.jsxDEV("button",{onClick:async W=>{W.stopPropagation(),window.confirm("  ?")&&(await r(g.id),O.success(""))},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"",children:n.jsxDEV(Fs,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2986,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2975,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2964,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2960,columnNumber:23},void 0),je==="pending"&&(o==null?void 0:o.role)&&["manager","admin"].includes(o.role)&&n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("button",{onClick:W=>{if(W.stopPropagation(),g.status==="completed"){O.info("   ");return}jt(g)},disabled:g.status==="completed",className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${g.status==="completed"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,children:g.status==="completed"?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2995,columnNumber:27},void 0),n.jsxDEV("button",{onClick:W=>{W.stopPropagation(),$t(g.id)},disabled:g.status==="completed",className:`flex-1 py-1.5 px-2 text-white rounded text-xs font-medium transition-colors ${g.status==="completed"?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:g.status==="completed"?"#9ca3af":"#5f81a5"},onMouseEnter:W=>{g.status!=="completed"&&(W.currentTarget.style.backgroundColor="#4a6b8a")},onMouseLeave:W=>{g.status!=="completed"&&(W.currentTarget.style.backgroundColor="#5f81a5")},children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3013,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2994,columnNumber:25},void 0)]},g.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2908,columnNumber:21},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2894,columnNumber:15},void 0):n.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3044,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2892,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2831,columnNumber:9},void 0),n.jsxDEV("div",{className:`payment-images md:col-span-6 ipad:col-span-6 ipad-lg:col-span-6 ipad-xl:col-span-6 ipad-2xl:col-span-6 bg-white rounded-lg border flex flex-col overflow-hidden h-[calc(100vh-180px)] ${_!=="image"?"hidden lg:flex":""}`,onDragOver:Tt,onDragLeave:jn,onDrop:on,children:[n.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:Vt,className:"hidden",id:"image-file-input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3060,columnNumber:11},void 0),ve&&d&&_==="image"&&(()=>{const g=Fe.find(M=>M.id===d);return g?n.jsxDEV("div",{className:"border-b bg-gray-50 p-3",children:n.jsxDEV("div",{className:"flex justify-between items-start",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("p",{className:"font-medium text-gray-900 text-sm",children:g.purpose||g.itemName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3077,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:[g.process||"-","  ",Ze(new Date(g.requestDate),"yyyy.MM.dd",{locale:gt})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3078,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3076,columnNumber:21},void 0),n.jsxDEV("p",{className:"text-sm font-bold text-gray-900",children:["",(g.amount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3082,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3075,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3074,columnNumber:17},void 0):null})(),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 relative",onClick:g=>{var C;const M=g.target;if(!M.closest("img")&&!M.closest("button")&&d){const w=Fe.find(y=>y.id===d),E=(w==null?void 0:w.images)||[],$=G[d]||[];(E.length>0?E:$).length>0&&((C=document.getElementById("image-file-input"))==null||C.click())}},children:d?(()=>{const g=Fe.find(E=>E.id===d),M=(g==null?void 0:g.images)||[],C=G[d]||[],w=M.length>0?M:C;return n.jsxDEV("div",{className:"h-full flex flex-col",children:[n.jsxDEV("div",{className:"mb-3",children:[n.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3118,columnNumber:21},void 0),n.jsxDEV("textarea",{value:(g==null?void 0:g.quickText)||(g==null?void 0:g.notes)||"",readOnly:!0,placeholder:" ",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-gray-50 resize-none",rows:8},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3119,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3117,columnNumber:19},void 0),w.length>0&&n.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-3",children:w.map((E,$)=>n.jsxDEV("div",{className:"relative group",children:[n.jsxDEV("img",{src:E,alt:` ${$+1}`,className:"w-full aspect-square object-contain rounded-lg cursor-pointer hover:opacity-90 transition-opacity border bg-gray-100",onClick:f=>{f.stopPropagation(),ps(E)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3133,columnNumber:27},void 0),n.jsxDEV("button",{onClick:f=>{f.stopPropagation(),Wt($)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:n.jsxDEV(ht,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3149,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3142,columnNumber:27},void 0),n.jsxDEV("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1.5 py-0.5 rounded",children:[$+1,"/",w.length]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3151,columnNumber:27},void 0)]},$,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3132,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3130,columnNumber:21},void 0),n.jsxDEV("label",{htmlFor:"image-file-input",className:`block cursor-pointer ${w.length>0?"":"flex-1"}`,onClick:E=>E.stopPropagation(),children:n.jsxDEV("div",{className:`w-full border-2 border-dashed rounded-lg p-4 text-center transition-colors flex flex-col items-center justify-center ${j?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"} ${w.length>0?"min-h-[80px]":"min-h-[200px]"}`,children:[n.jsxDEV(jr,{className:`mx-auto text-gray-400 mb-1 ${w.length>0?"h-6 w-6":"h-10 w-10 mb-2"}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3170,columnNumber:23},void 0),n.jsxDEV("p",{className:"text-sm font-medium text-gray-700",children:w.length>0?" ":" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3171,columnNumber:23},void 0),w.length===0&&n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"   Ctrl+V "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3175,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3165,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3160,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3115,columnNumber:17},void 0)})():n.jsxDEV("div",{className:"h-full flex items-center justify-center min-h-[200px]",children:n.jsxDEV("div",{className:"text-center text-gray-400",children:[n.jsxDEV(hn,{className:"h-12 w-12 mx-auto mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3184,columnNumber:19},void 0),n.jsxDEV("p",{className:"text-sm",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3185,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3183,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3182,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3092,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3052,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2325,columnNumber:7},void 0),R&&n.jsxDEV(n.Fragment,{children:[n.jsxDEV("div",{className:"lg:hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[n.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b",children:[n.jsxDEV("h2",{className:"text-base font-bold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3200,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>ne(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:n.jsxDEV(ht,{className:"h-4 w-4 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3205,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3201,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3199,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-3 overflow-y-auto max-h-[calc(80vh-100px)]",children:[n.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mb-2",children:_r.map(g=>n.jsxDEV("button",{onClick:()=>{D({...q,process:g}),ne(!1)},className:`p-2 text-sm text-center border rounded-lg transition-all ${q.process===g?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:g},g,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3212,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3210,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{D({...q,process:""}),ne(!1)},className:"w-full p-2 text-sm text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3229,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3209,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3198,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3197,columnNumber:11},void 0),n.jsxDEV("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>ne(!1),children:n.jsxDEV("div",{onClick:g=>g.stopPropagation(),className:"absolute bg-white rounded-lg shadow-xl border border-gray-200",style:{top:be.current?`${be.current.getBoundingClientRect().bottom+window.scrollY+4}px`:"50%",left:be.current?`${be.current.getBoundingClientRect().left+window.scrollX}px`:"50%"},children:[n.jsxDEV("div",{className:"flex items-center justify-between p-2 border-b",children:[n.jsxDEV("h2",{className:"text-sm font-bold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3253,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>ne(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:n.jsxDEV(ht,{className:"h-3 w-3 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3258,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3254,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3252,columnNumber:15},void 0),n.jsxDEV("div",{className:"p-2",children:[n.jsxDEV("div",{className:"grid grid-cols-4 gap-1.5 mb-2",children:_r.map(g=>n.jsxDEV("button",{onClick:()=>{D({...q,process:g}),ne(!1)},className:`p-1.5 text-xs text-center border rounded-lg transition-all whitespace-nowrap ${q.process===g?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:g},g,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3265,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3263,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{D({...q,process:""}),ne(!1)},className:"w-full p-1.5 text-xs text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3282,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3262,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3244,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3243,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3195,columnNumber:9},void 0),me&&n.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>Q(!1),children:n.jsxDEV("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[n.jsxDEV("button",{onClick:g=>{g.stopPropagation(),Q(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:n.jsxDEV(ht,{className:"h-8 w-8"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3311,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3304,columnNumber:13},void 0),n.jsxDEV("img",{src:T,alt:" ",className:"max-w-full max-h-[90vh] object-contain",onClick:g=>g.stopPropagation()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3313,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3303,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3299,columnNumber:9},void 0),Me&&n.jsxDEV(Yf,{projectName:Te,onClose:()=>Ye(!1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3325,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2266,columnNumber:5},void 0)},tg=()=>{var re,q;const{user:t}=js(),s=mr(),[e,r]=b.useState([]),[a,i]=b.useState(null),[o,l]=b.useState([]),[m,h]=b.useState(!1),[d,p]=b.useState(""),[u,N]=b.useState(""),[j,x]=b.useState(null),[A,L]=b.useState(null),[k,F]=b.useState(""),[me,Q]=b.useState(null),[T,ie]=b.useState(""),[_,le]=b.useState(null),[ve,oe]=b.useState(new Set),R=b.useRef(null),[ne,be]=b.useState(window.innerWidth<768),[je,Se]=b.useState(!1),[Ee,et]=b.useState(null),[ze,tt]=b.useState(new Set),[z,we]=b.useState(()=>localStorage.getItem("finishCheck_showOnlyIncomplete")==="true"),[se,Ve]=b.useState(!1),[Me,Ye]=b.useState(!1),[Te,st]=b.useState(new Set);b.useEffect(()=>{localStorage.setItem("finishCheck_showOnlyIncomplete",String(z))},[z]),b.useEffect(()=>{const D=()=>{be(window.innerWidth<768)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),b.useEffect(()=>{Be()},[s]),b.useEffect(()=>{a!==null&&qe()},[a]),b.useEffect(()=>{a!==null&&(t!=null&&t.id)&&localStorage.setItem(`finishCheck_selectedProject_${t.id}`,a.toString())},[a,t==null?void 0:t.id]),b.useEffect(()=>{if(!ne&&_){const D=async Y=>{var he;const ue=(he=Y.clipboardData)==null?void 0:he.items;if(ue){for(let X=0;X<ue.length;X++)if(ue[X].type.indexOf("image")!==-1){Y.preventDefault();const Je=ue[X].getAsFile();Je&&await I(_,Je)}}};return document.addEventListener("paste",D),()=>document.removeEventListener("paste",D)}},[_,ne]);const Be=async()=>{try{const D=s.map(ue=>({id:ue.id,title:ue.name}));r(D);const Y=t!=null&&t.id?localStorage.getItem(`finishCheck_selectedProject_${t.id}`):null;Y&&D.some(ue=>ue.id===Number(Y))?i(Number(Y)):D.length>0&&i(D[0].id)}catch(D){console.error("Failed to load projects:",D),O.error("   ")}},qe=async()=>{try{o.length===0&&h(!0);const D=a?`/finish-check/spaces?project_id=${a}`:"/finish-check/spaces",ue=(await de.get(D)).data.map(he=>({...he,items:he.items.map(X=>({...X,images:X.images||[]}))}));l(ue)}catch(D){console.error("Failed to load spaces:",D),O.error("   ")}finally{h(!1)}},Dt=async D=>{if(Te.has(D))return null;try{st(he=>new Set(he).add(D));const ue=(await de.get(`/finish-check/images/${D}`)).data.image_data;return l(he=>he.map(X=>({...X,items:X.items.map(Je=>({...Je,images:Je.images.map(Fe=>Fe.id===D?{...Fe,image_data:ue}:Fe)}))}))),ue}catch(Y){return console.error("   :",Y),null}finally{st(Y=>{const ue=new Set(Y);return ue.delete(D),ue})}},H=async D=>{const Y=o.find(X=>X.items.some(Je=>Je.id===D)),ue=Y==null?void 0:Y.items.find(X=>X.id===D);if(!ue)return;const he=ue.images.filter(X=>!X.image_data);await Promise.all(he.map(X=>Dt(X.id)))},ke=async()=>{if(!Me){if(!d.trim()){O.error("  ");return}if(!a){O.error(" ");return}Ye(!0);try{const D=await de.post("/finish-check/spaces",{name:d.trim(),project_id:a}),Y={...D.data,items:D.data.items||[]};l([...o,Y]),p(""),Ve(!1),O.success(" ")}catch(D){console.error("Failed to add space:",D),O.error("  ")}finally{Ye(!1)}}},Ce=async(D,Y)=>{if(!Y.trim()){O.error("  ");return}try{await de.put(`/finish-check/spaces/${D}`,{name:Y.trim()}),l(o.map(ue=>ue.id===D?{...ue,name:Y.trim()}:ue)),L(null),F(""),O.success("  ")}catch(ue){console.error("Failed to update space:",ue),O.error("  ")}},ge=D=>{et(D),tt(new Set)},Ie=async()=>{if(Ee!==null){if(ze.size===0){O.error("  ");return}try{await Promise.all(Array.from(ze).map(D=>de.delete(`/finish-check/items/${D}`))),l(o.map(D=>D.id===Ee?{...D,items:D.items.filter(Y=>!ze.has(Y.id))}:D)),O.success(`${ze.size}  `),et(null),tt(new Set)}catch(D){console.error("Failed to delete items:",D),O.error("  ")}}},Xe=async()=>{if(Ee===null)return;const D=o.find(Y=>Y.id===Ee);if(D&&confirm(`"${D.name}"  ?

        .`))try{await de.delete(`/finish-check/spaces/${Ee}`),l(o.filter(Y=>Y.id!==Ee)),O.success(" "),et(null),tt(new Set)}catch(Y){console.error("Failed to delete space:",Y),O.error("  ")}},nt=async D=>{if(!u.trim()){O.error("  ");return}const Y=-Date.now(),ue={id:Y,space_id:D,content:u.trim(),is_checked:!1,is_priority:!1,images:[]};l(o.map(X=>X.id===D?{...X,items:[...X.items,ue]}:X));const he=u.trim();N(""),x(null);try{const X=await de.post("/finish-check/items",{space_id:D,content:he});l(Je=>Je.map(Fe=>Fe.id===D?{...Fe,items:Fe.items.map(at=>at.id===Y?{...X.data,images:[]}:at)}:Fe))}catch(X){console.error("Failed to add item:",X),l(Je=>Je.map(Fe=>Fe.id===D?{...Fe,items:Fe.items.filter(at=>at.id!==Y)}:Fe)),O.error("  ")}},$e=async D=>{try{const Y=await de.put(`/finish-check/items/${D}/toggle`);l(o.map(ue=>({...ue,items:ue.items.map(he=>he.id===D?{...he,...Y.data}:he)})))}catch(Y){console.error("Failed to toggle item:",Y),O.error("   ")}},v=async D=>{try{const Y=await de.put(`/finish-check/items/${D}/toggle-priority`);l(o.map(ue=>({...ue,items:ue.items.map(he=>he.id===D?{...he,is_priority:Y.data.is_priority}:he)})))}catch(Y){console.error("Failed to toggle priority:",Y),O.error("  ")}},B=D=>new Promise((Y,ue)=>{const he=new FileReader;he.readAsDataURL(D),he.onload=()=>Y(he.result),he.onerror=X=>ue(X)}),I=async(D,Y)=>{var X,Je;if(!["image/jpeg","image/png","image/webp"].includes(Y.type)){O.error("JPEG, PNG, WebP    ");return}const he=5*1024*1024;if(Y.size>he){O.error("  5MB  ");return}try{oe(Lt=>new Set([...Lt,D]));const Fe=await B(Y),at=await de.post(`/finish-check/items/${D}/images`,{image_data:Fe,filename:Y.name});l(o.map(Lt=>({...Lt,items:Lt.items.map(It=>It.id===D?{...It,images:[...It.images,at.data]}:It)}))),O.success(" ")}catch(Fe){console.error("Failed to upload image:",Fe),O.error(((Je=(X=Fe.response)==null?void 0:X.data)==null?void 0:Je.error)||"  ")}finally{oe(Fe=>{const at=new Set(Fe);return at.delete(D),at})}},J=async(D,Y)=>{const ue=Y.target.files;if(!(!ue||ue.length===0)){for(let he=0;he<ue.length;he++)await I(D,ue[he]);R.current&&(R.current.value="")}},G=async(D,Y)=>{if(confirm("  ?"))try{await de.delete(`/finish-check/images/${Y}`),l(o.map(ue=>({...ue,items:ue.items.map(he=>he.id===D?{...he,images:he.images.filter(X=>X.id!==Y)}:he)}))),O.success(" ")}catch(ue){console.error("Failed to delete image:",ue),O.error("  ")}},Z=async(D,Y)=>{D.preventDefault(),D.stopPropagation();const ue=D.dataTransfer.files;if(!(!ue||ue.length===0))for(let he=0;he<ue.length;he++)ue[he].type.startsWith("image/")&&await I(Y,ue[he])},pe=D=>{D.preventDefault(),D.stopPropagation()};if(m)return n.jsxDEV("div",{className:"flex items-center justify-center h-[calc(100vh-120px)]",children:n.jsxDEV("div",{className:"text-gray-500",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:601,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:600,columnNumber:7},void 0);const _e=_?o.flatMap(D=>D.items).find(D=>D.id===_):null;return n.jsxDEV("div",{className:"h-[calc(100vh-120px)] flex flex-col md:flex-row gap-4 overflow-hidden",children:[n.jsxDEV("input",{ref:R,type:"file",accept:"image/jpeg,image/png,image/webp",multiple:!0,className:"hidden",onChange:D=>{_&&J(_,D)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:613,columnNumber:7},void 0),n.jsxDEV("div",{className:"flex-1 bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:ne?n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("div",{className:"flex-1",children:n.jsxDEV("select",{value:a||"",onChange:D=>{const Y=D.target.value?Number(D.target.value):null;i(Y)},className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(t==null?void 0:t.name)!==""&&n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:643,columnNumber:43},void 0),e.map(D=>n.jsxDEV("option",{value:D.id,children:D.title},D.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:645,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:635,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:634,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>we(!z),className:`px-3 py-2.5 text-xs font-medium rounded-lg transition-colors whitespace-nowrap ${z?"bg-gray-800 text-white hover:bg-gray-900":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:z?" ":" ",children:z?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:653,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>Ve(!0),className:"p-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center",title:" ",children:n.jsxDEV(Gs,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:671,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:666,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:632,columnNumber:13},void 0):n.jsxDEV("div",{className:"flex gap-3",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:679,columnNumber:17},void 0),n.jsxDEV("select",{value:a||"",onChange:D=>{const Y=D.target.value?Number(D.target.value):null;i(Y)},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(t==null?void 0:t.name)!==""&&n.jsxDEV("option",{value:"",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:688,columnNumber:43},void 0),e.map(D=>n.jsxDEV("option",{value:D.id,children:D.title},D.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:690,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:680,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:678,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:699,columnNumber:17},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:d,onChange:D=>p(D.target.value),onKeyPress:D=>{D.key==="Enter"&&ke()},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:701,columnNumber:19},void 0),n.jsxDEV("button",{onClick:ke,disabled:Me,className:"p-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center min-w-[44px] disabled:opacity-50",title:" ",children:n.jsxDEV(Gs,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:719,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:713,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:700,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:698,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex items-end",children:n.jsxDEV("button",{onClick:()=>we(!z),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap ${z?"bg-gray-800 text-white hover:bg-gray-900":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:z?" ":" ",children:z?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:726,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:725,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:676,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:629,columnNumber:9},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:o.length===0?n.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:745,columnNumber:13},void 0):n.jsxDEV("div",{className:"columns-1 portrait:md:columns-2 landscape:md:columns-3 desktop:columns-4 column-gap-4",children:o.map((D,Y)=>{const ue=D.items.filter(X=>!X.is_completed).sort((X,Je)=>(Je.is_priority||0)-(X.is_priority||0)),he=D.items.filter(X=>X.is_completed);return z&&ue.length===0?null:n.jsxDEV("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 mb-4 break-inside-avoid",children:[A===D.id?n.jsxDEV("div",{className:"flex gap-2 mb-4",children:[n.jsxDEV("input",{type:"text",value:k,onChange:X=>F(X.target.value),onKeyPress:X=>{X.key==="Enter"?Ce(D.id,k):X.key==="Escape"&&(L(null),F(""))},className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:764,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>Ce(D.id,k),className:"p-1 text-green-600 hover:text-green-700",children:n.jsxDEV(ki,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:783,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:779,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>{L(null),F("")},className:"p-1 text-gray-600 hover:text-gray-700",children:n.jsxDEV(ht,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:792,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:785,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:763,columnNumber:23},void 0):n.jsxDEV("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-gray-300",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("h3",{className:"text-base font-bold text-gray-900 flex items-center gap-2",children:[n.jsxDEV("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-gray-800 text-white text-xs font-bold rounded-full",children:Y+1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:799,columnNumber:29},void 0),D.name]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:798,columnNumber:27},void 0),n.jsxDEV("span",{className:"text-xs text-gray-500",children:[he.length,"/",D.items.length," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:804,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:797,columnNumber:25},void 0),n.jsxDEV("div",{className:"flex items-center gap-1",children:[n.jsxDEV("button",{onClick:()=>{j===D.id?(x(null),N("")):x(D.id)},className:`p-1 transition-colors ${j===D.id?"text-gray-900 bg-gray-100 rounded":"text-gray-600 hover:text-gray-800"}`,title:" ",children:n.jsxDEV(Gs,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:825,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:809,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>{L(D.id),F(D.name)},className:"p-1 text-gray-600 hover:text-gray-800 transition-colors",title:"",children:n.jsxDEV(Lr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:835,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:827,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>ge(D.id),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"",children:n.jsxDEV(Fs,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:842,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:837,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:808,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:796,columnNumber:23},void 0),j===D.id&&n.jsxDEV("div",{className:"mb-4 p-3 bg-white border border-gray-300 rounded-lg",children:n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("input",{type:"text",value:u,onChange:X=>N(X.target.value),onKeyPress:X=>{X.key==="Enter"&&u.trim()&&nt(D.id)},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:852,columnNumber:27},void 0),n.jsxDEV("button",{onClick:()=>nt(D.id),disabled:!u.trim(),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:865,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:851,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:850,columnNumber:23},void 0),ue.length>0&&n.jsxDEV("div",{className:"mb-4",children:n.jsxDEV("div",{className:"space-y-2",children:ue.map(X=>n.jsxDEV("div",{className:"flex items-start gap-3 p-3 bg-white border border-gray-200 rounded-lg",children:[n.jsxDEV("input",{type:"checkbox",checked:!1,onChange:()=>$e(X.id),className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:885,columnNumber:31},void 0),n.jsxDEV("span",{className:`flex-1 text-sm text-gray-900 ${!ne&&_===X.id?"font-semibold":""}`,onClick:async()=>{ne||(le(X.id),X.images&&X.images.length>0&&await H(X.id))},style:{cursor:ne?"default":"pointer"},children:[X.content,X.images&&X.images.length>0&&n.jsxDEV("span",{className:"ml-2 text-xs text-gray-500",children:["(",X.images.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:906,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:892,columnNumber:31},void 0),n.jsxDEV("div",{className:"flex items-center gap-1",children:[n.jsxDEV("button",{onClick:async()=>{le(X.id),ne&&Se(!0),X.images&&X.images.length>0&&await H(X.id)},className:`p-1 transition-colors ${X.images&&X.images.length>0?"text-blue-600 hover:text-blue-800":"text-gray-300 hover:text-gray-400"}`,title:"",children:n.jsxDEV(hn,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:930,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:912,columnNumber:33},void 0),n.jsxDEV("button",{onClick:()=>v(X.id),className:`p-1 transition-colors ${X.is_priority?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"}`,title:"",children:n.jsxDEV(La,{className:`w-4 h-4 ${X.is_priority?"fill-current":""}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:941,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:932,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:911,columnNumber:31},void 0)]},X.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:881,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:879,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:878,columnNumber:23},void 0),!z&&he.length>0&&n.jsxDEV("div",{children:n.jsxDEV("div",{className:"space-y-2",children:he.map(X=>n.jsxDEV("div",{className:"flex items-start gap-3 p-3 bg-white border border-gray-200 rounded-lg opacity-40",children:[n.jsxDEV("input",{type:"checkbox",checked:!0,onChange:()=>$e(X.id),className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:959,columnNumber:31},void 0),n.jsxDEV("span",{className:`flex-1 text-sm text-gray-500 line-through ${!ne&&_===X.id?"font-semibold":""}`,onClick:async()=>{ne||(le(X.id),X.images&&X.images.length>0&&await H(X.id))},style:{cursor:ne?"default":"pointer"},children:[X.content,X.images&&X.images.length>0&&n.jsxDEV("span",{className:"ml-2 text-xs text-gray-500",children:["(",X.images.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:980,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:966,columnNumber:31},void 0),n.jsxDEV("div",{className:"flex items-center gap-1",children:[n.jsxDEV("button",{onClick:async()=>{le(X.id),ne&&Se(!0),X.images&&X.images.length>0&&await H(X.id)},className:`p-1 transition-colors ${X.images&&X.images.length>0?"text-blue-600 hover:text-blue-800":"text-gray-300 hover:text-gray-400"}`,title:"",children:n.jsxDEV(hn,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1004,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:986,columnNumber:33},void 0),n.jsxDEV("button",{onClick:()=>v(X.id),className:`p-1 transition-colors ${X.is_priority?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"}`,title:"",children:n.jsxDEV(La,{className:`w-4 h-4 ${X.is_priority?"fill-current":""}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1015,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1006,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:985,columnNumber:31},void 0)]},X.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:955,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:953,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:952,columnNumber:23},void 0)]},D.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:760,columnNumber:19},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:749,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:743,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:627,columnNumber:7},void 0),!ne&&_&&_e&&n.jsxDEV("div",{className:"w-80 bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[n.jsxDEV("h3",{className:"font-semibold text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1036,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>le(null),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",title:"",children:n.jsxDEV(ht,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1042,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1037,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1035,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:_e.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1045,columnNumber:13},void 0),n.jsxDEV("button",{onClick:()=>{var D;return(D=R.current)==null?void 0:D.click()},disabled:ve.has(_),className:"w-full px-3 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsxDEV(jr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1051,columnNumber:15},void 0),ve.has(_)?" ...":" "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1046,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"    , Ctrl+V "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1054,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1034,columnNumber:11},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",onDrop:D=>Z(D,_),onDragOver:pe,children:_e.images.length===0?n.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm",children:[n.jsxDEV(hn,{className:"w-12 h-12 mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1066,columnNumber:17},void 0),n.jsxDEV("p",{children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1067,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1065,columnNumber:15},void 0):n.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:_e.images.map(D=>n.jsxDEV("div",{className:"relative group",children:[D.image_data?n.jsxDEV("img",{src:D.image_data,alt:D.filename||"",className:"w-full h-32 object-cover rounded-lg border border-gray-200"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1074,columnNumber:23},void 0):n.jsxDEV("div",{className:"w-full h-32 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:n.jsxDEV("span",{className:"text-gray-400 text-sm",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1081,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1080,columnNumber:23},void 0),n.jsxDEV("button",{onClick:()=>G(_,D.id),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"",children:n.jsxDEV(Ba,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1089,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1084,columnNumber:21},void 0),D.filename&&n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1 truncate",title:D.filename,children:D.filename},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1092,columnNumber:23},void 0)]},D.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1072,columnNumber:19},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1070,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1059,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1033,columnNumber:9},void 0),ne&&je&&_&&_e&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50",children:n.jsxDEV("div",{className:"bg-white rounded-t-2xl w-full max-h-[80vh] flex flex-col",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[n.jsxDEV("h3",{className:"font-semibold text-gray-900",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1110,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{Se(!1),le(null)},className:"p-1 text-gray-600 hover:text-gray-900",children:n.jsxDEV(ht,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1118,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1111,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1109,columnNumber:15},void 0),n.jsxDEV("p",{className:"text-sm text-gray-600 mb-3",children:_e.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1121,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>{var D;return(D=R.current)==null?void 0:D.click()},disabled:ve.has(_),className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:[n.jsxDEV(jr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1127,columnNumber:17},void 0),ve.has(_)?" ...":" "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1122,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1108,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:_e.images.length===0?n.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[n.jsxDEV(hn,{className:"w-16 h-16 mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1135,columnNumber:19},void 0),n.jsxDEV("p",{className:"text-sm",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1136,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1134,columnNumber:17},void 0):n.jsxDEV("div",{className:"grid grid-cols-2 gap-3",children:_e.images.map(D=>n.jsxDEV("div",{className:"relative",children:[D.image_data?n.jsxDEV("img",{src:D.image_data,alt:D.filename||"",className:"w-full h-40 object-cover rounded-lg border border-gray-200"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1143,columnNumber:25},void 0):n.jsxDEV("div",{className:"w-full h-40 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:n.jsxDEV("span",{className:"text-gray-400 text-sm",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1150,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1149,columnNumber:25},void 0),n.jsxDEV("button",{onClick:()=>G(_,D.id),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600",children:n.jsxDEV(Ba,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1157,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1153,columnNumber:23},void 0),D.filename&&n.jsxDEV("p",{className:"text-xs text-gray-500 mt-1 truncate",title:D.filename,children:D.filename},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1160,columnNumber:25},void 0)]},D.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1141,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1139,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1132,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1107,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1106,columnNumber:9},void 0),Ee!==null&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[80vh] flex flex-col",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("h3",{className:"text-lg font-bold text-gray-900",children:[(re=o.find(D=>D.id===Ee))==null?void 0:re.name," - "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1179,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{et(null),tt(new Set)},className:"p-1 text-gray-600 hover:text-gray-900",children:n.jsxDEV(ht,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1189,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1182,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1178,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1177,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4",children:[n.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"  .    ."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1195,columnNumber:15},void 0),n.jsxDEV("div",{className:"space-y-2",children:(q=o.find(D=>D.id===Ee))==null?void 0:q.items.map(D=>n.jsxDEV("div",{className:"flex items-start gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>{const Y=new Set(ze);Y.has(D.id)?Y.delete(D.id):Y.add(D.id),tt(Y)},children:[n.jsxDEV("input",{type:"checkbox",checked:ze.has(D.id),onChange:()=>{},className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1215,columnNumber:23},void 0),n.jsxDEV("span",{className:`flex-1 text-sm ${D.is_completed?"text-gray-500 line-through":"text-gray-900"}`,children:D.content},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1221,columnNumber:23},void 0)]},D.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1202,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1198,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1194,columnNumber:13},void 0),n.jsxDEV("div",{className:"p-4 border-t border-gray-200 flex gap-2",children:[n.jsxDEV("button",{onClick:Ie,disabled:ze.size===0,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:["   (",ze.size,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1230,columnNumber:15},void 0),n.jsxDEV("button",{onClick:Xe,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1237,columnNumber:15},void 0),n.jsxDEV("button",{onClick:()=>{et(null),tt(new Set)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1243,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1229,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1176,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1175,columnNumber:9},void 0),se&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end md:items-center justify-center z-50",children:n.jsxDEV("div",{className:"bg-white rounded-t-2xl md:rounded-lg w-full md:max-w-md",children:[n.jsxDEV("div",{className:"p-4 border-b border-gray-200",children:n.jsxDEV("div",{className:"flex items-center justify-between",children:[n.jsxDEV("h3",{className:"text-lg font-bold text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1263,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>{Ve(!1),p("")},className:"p-1 text-gray-600 hover:text-gray-900",children:n.jsxDEV(ht,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1271,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1264,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1262,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1261,columnNumber:13},void 0),n.jsxDEV("div",{className:"p-4",children:[n.jsxDEV("div",{className:"mb-4",children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1278,columnNumber:17},void 0),n.jsxDEV("input",{type:"text",value:d,onChange:D=>p(D.target.value),onKeyPress:D=>{D.key==="Enter"&&d.trim()&&ke()},placeholder:"  ",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1279,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1277,columnNumber:15},void 0),n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:()=>{Ve(!1),p("")},className:"flex-1 px-4 py-2.5 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1295,columnNumber:17},void 0),n.jsxDEV("button",{onClick:ke,disabled:!d.trim()||Me,className:"flex-1 px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:Me?" ...":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1304,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1294,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1276,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1260,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:1259,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/FinishCheck.tsx",lineNumber:611,columnNumber:5},void 0)};function sg(){const[t,s]=b.useState([]),[e,r]=b.useState(!1),[a,i]=b.useState(null),[o,l]=b.useState(!1),[m,h]=b.useState(null),[d,p]=b.useState(""),[u,N]=b.useState({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""}),[j,x]=b.useState(!1);b.useEffect(()=>{A()},[]),b.useEffect(()=>{const _=()=>{L()};return window.addEventListener("headerAddButtonClick",_),()=>window.removeEventListener("headerAddButtonClick",_)},[]);const A=async()=>{var _,le;try{t.length===0&&r(!0),i(null);const ve=await Ns.getAllContractors();s(ve.map(oe=>({id:oe._id,rank:oe.rank,companyName:oe.companyName,name:oe.name,position:oe.position,process:oe.process,contact:oe.contact,accountNumber:oe.accountNumber,notes:oe.notes,createdAt:new Date(oe.createdAt),updatedAt:new Date(oe.updatedAt)})))}catch(ve){console.error("Failed to load contractors:",ve);const oe=ve instanceof Error&&((le=(_=ve.response)==null?void 0:_.data)==null?void 0:le.message);i(oe||"   .")}finally{r(!1)}},L=_=>{if(_){h(_);let le="",ve=_.accountNumber||"";if(_.accountNumber){const ne=["KB","","","","NH","IBK","KEB","SC","","","","","","","","","","","","","","","","","NH","","","","","KB","",""];for(const be of ne)if(_.accountNumber.startsWith(be)){le=be,ve=_.accountNumber.substring(be.length).trim();break}}let oe=_.name,R=_.position||"";R||(R=Mn(_.name),oe=kn(_.name)),N({rank:_.rank||"",companyName:_.companyName||"",name:oe,position:R,process:_.process,contact:_.contact||"",bankName:le,accountNumber:ve,notes:_.notes||""})}else h(null),N({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""});l(!0)},k=()=>{l(!1),h(null),N({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""})},F=async _=>{var ve,oe;if(_.preventDefault(),j)return;x(!0);const le=u.bankName&&u.accountNumber?`${u.bankName} ${u.accountNumber}`:u.accountNumber;try{const R={rank:u.rank,companyName:u.companyName,name:u.name,position:u.position,process:u.process,contact:u.contact,accountNumber:le,notes:u.notes};m?await Ns.updateContractor(m.id,R):await Ns.createContractor(R),await A(),k()}catch(R){console.error("Failed to save contractor:",R);const ne=R instanceof Error&&((oe=(ve=R.response)==null?void 0:ve.data)==null?void 0:oe.message);alert(ne||"  .")}finally{x(!1)}},me=async _=>{var le,ve;if(window.confirm("   ?"))try{await Ns.deleteContractor(_),await A()}catch(oe){console.error("Failed to delete contractor:",oe);const R=oe instanceof Error&&((ve=(le=oe.response)==null?void 0:le.data)==null?void 0:ve.message);alert(R||"  .")}},Q=()=>"border-gray-200 text-gray-600 bg-gray-50",T=_=>_?_==="1"?1:_==="1()"?2:_==="2"?3:_==="2()"?4:_==="3"?5:_==="3()"?6:_===""?100:_===""?200:999:999,ie=t.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())||_.process.toLowerCase().includes(d.toLowerCase())||_.accountNumber.toLowerCase().includes(d.toLowerCase())||_.contact&&_.contact.toLowerCase().includes(d.toLowerCase())||_.rank&&_.rank.toLowerCase().includes(d.toLowerCase())||_.companyName&&_.companyName.toLowerCase().includes(d.toLowerCase())).sort((_,le)=>{const ve=T(_.rank)-T(le.rank);if(ve!==0)return ve;const oe=_.process.localeCompare(le.process,"ko");return oe!==0?oe:_.name.localeCompare(le.name,"ko")});return n.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[n.jsxDEV("div",{className:"flex items-center justify-end",children:n.jsxDEV("button",{onClick:()=>L(),className:"hidden md:inline-flex btn btn-primary px-3 md:px-4 py-2",children:"+  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:290,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:289,columnNumber:7},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(Vi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 md:w-5 md:h-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:300,columnNumber:9},this),n.jsxDEV("input",{type:"text",placeholder:", ,  ...",value:d,onChange:_=>p(_.target.value),className:"w-full pl-9 md:pl-10 pr-4 py-2 text-sm md:text-base border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:301,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:299,columnNumber:7},this),n.jsxDEV("div",{className:"contractors-table hidden md:block bg-white rounded-lg border border-gray-200 overflow-hidden",children:n.jsxDEV("div",{className:"overflow-x-auto",children:n.jsxDEV("table",{className:"w-full",children:[n.jsxDEV("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxDEV("tr",{children:[n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:316,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:319,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:322,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:325,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:328,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:331,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:334,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:337,columnNumber:17},this),n.jsxDEV("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:340,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:315,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:314,columnNumber:13},this),n.jsxDEV("tbody",{className:"bg-white divide-y divide-gray-200",children:e?n.jsxDEV("tr",{children:n.jsxDEV("td",{colSpan:9,className:"px-6 py-12 text-center",children:n.jsxDEV("p",{className:"text-gray-500",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:349,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:348,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:347,columnNumber:17},this):a?n.jsxDEV("tr",{children:n.jsxDEV("td",{colSpan:9,className:"px-6 py-12 text-center",children:n.jsxDEV("div",{className:"space-y-4",children:[n.jsxDEV("p",{className:"text-red-500",children:a},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:356,columnNumber:23},this),n.jsxDEV("button",{onClick:A,className:"inline-block px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:357,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:355,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:354,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:353,columnNumber:17},this):ie.length===0?n.jsxDEV("tr",{children:n.jsxDEV("td",{colSpan:9,className:"px-6 py-12 text-center",children:n.jsxDEV("p",{className:"text-gray-500",children:d?"  .":"  ."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:369,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:368,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:367,columnNumber:17},this):ie.map(_=>n.jsxDEV("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("span",{className:`px-2 py-1 text-xs font-medium border rounded ${Q(_.rank)}`,children:_.rank||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:378,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:377,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("span",{className:"text-xs font-medium text-gray-700",children:_.process},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:383,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:382,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:_.companyName||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:388,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:387,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"font-medium text-gray-900",children:kn(_.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:391,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:390,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:_.position||Mn(_.name)||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:394,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:393,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:_.contact||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:397,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:396,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxDEV("div",{className:"text-sm text-gray-900",children:_.accountNumber},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:400,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:399,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4",children:n.jsxDEV("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:_.notes||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:403,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:402,columnNumber:21},this),n.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[n.jsxDEV("button",{onClick:()=>L(_),className:"text-gray-600 hover:text-gray-900 mr-3",children:n.jsxDEV(Lr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:412,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:408,columnNumber:23},this),n.jsxDEV("button",{onClick:()=>me(_.id),className:"text-red-600 hover:text-red-900",children:n.jsxDEV(Fs,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:418,columnNumber:25},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:414,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:407,columnNumber:21},this)]},_.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:376,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:345,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:313,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:312,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:311,columnNumber:7},this),n.jsxDEV("div",{className:"md:hidden space-y-3",children:e?n.jsxDEV("div",{className:"text-center py-12 text-gray-500 text-sm",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:432,columnNumber:11},this):a?n.jsxDEV("div",{className:"text-center py-12 space-y-4",children:[n.jsxDEV("p",{className:"text-red-500 text-sm",children:a},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:435,columnNumber:13},this),n.jsxDEV("button",{onClick:A,className:"inline-block px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:436,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:434,columnNumber:11},this):ie.length===0?n.jsxDEV("div",{className:"text-center py-12 text-gray-500 text-sm",children:d?"  .":"  ."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:444,columnNumber:11},this):ie.map(_=>n.jsxDEV("div",{className:"card p-3 space-y-2",children:[n.jsxDEV("div",{className:"flex items-start justify-between mb-2",children:[n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[_.rank&&n.jsxDEV("span",{className:`px-1.5 py-0.5 text-[10px] font-medium border rounded ${Q(_.rank)}`,children:_.rank},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:455,columnNumber:23},this),n.jsxDEV("span",{className:"px-1.5 py-0.5 text-[10px] font-medium text-gray-700 bg-gray-100 rounded",children:_.process},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:459,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:453,columnNumber:19},this),_.companyName&&n.jsxDEV("p",{className:"text-xs text-gray-600 mb-0.5",children:_.companyName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:464,columnNumber:21},this),n.jsxDEV("p",{className:"font-semibold text-gray-900 text-sm",children:kn(_.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:466,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:452,columnNumber:17},this),n.jsxDEV("div",{className:"flex items-center gap-2 ml-2",children:[n.jsxDEV("button",{onClick:()=>L(_),className:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded",children:n.jsxDEV(Lr,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:473,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:469,columnNumber:19},this),n.jsxDEV("button",{onClick:()=>me(_.id),className:"p-1.5 text-red-600 hover:text-red-900 hover:bg-red-50 rounded",children:n.jsxDEV(Fs,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:479,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:475,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:468,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:451,columnNumber:15},this),n.jsxDEV("div",{className:"space-y-1 text-xs",children:[(_.position||Mn(_.name))&&n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:488,columnNumber:21},this),n.jsxDEV("span",{className:"text-gray-900",children:_.position||Mn(_.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:489,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:487,columnNumber:19},this),_.contact&&n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:494,columnNumber:21},this),n.jsxDEV("span",{className:"text-gray-900",children:_.contact},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:495,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:493,columnNumber:19},this),n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:499,columnNumber:19},this),n.jsxDEV("span",{className:"text-gray-900 break-all",children:_.accountNumber},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:500,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:498,columnNumber:17},this),_.notes&&n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:504,columnNumber:21},this),n.jsxDEV("span",{className:"text-gray-600",children:_.notes},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:505,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:503,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:485,columnNumber:15},this)]},_.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:449,columnNumber:13},this))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:430,columnNumber:7},this),o&&n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxDEV("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:n.jsxDEV("div",{className:"p-6",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[n.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:m?" ":"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:520,columnNumber:17},this),n.jsxDEV("button",{onClick:k,className:"text-gray-400 hover:text-gray-600",children:n.jsxDEV(ht,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:527,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:523,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:519,columnNumber:15},this),n.jsxDEV("form",{onSubmit:F,className:"space-y-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:533,columnNumber:19},this),n.jsxDEV("select",{value:u.rank,onChange:_=>N({...u,rank:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:541,columnNumber:21},this),n.jsxDEV("option",{value:"1",children:"1"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:542,columnNumber:21},this),n.jsxDEV("option",{value:"2",children:"2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:543,columnNumber:21},this),n.jsxDEV("option",{value:"3",children:"3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:544,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:536,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:532,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:549,columnNumber:19},this),n.jsxDEV("input",{type:"text",value:u.companyName,onChange:_=>N({...u,companyName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:552,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:548,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",n.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:562,columnNumber:24},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:561,columnNumber:19},this),n.jsxDEV("input",{type:"text",required:!0,value:u.name,onChange:_=>N({...u,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:564,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:560,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:574,columnNumber:19},this),n.jsxDEV("input",{type:"text",value:u.position,onChange:_=>N({...u,position:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:577,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:573,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",n.jsxDEV("span",{className:"text-red-500",children:"*"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:587,columnNumber:24},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:586,columnNumber:19},this),n.jsxDEV("input",{type:"text",required:!0,value:u.process,onChange:_=>N({...u,process:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:589,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:585,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:599,columnNumber:19},this),n.jsxDEV("input",{type:"text",value:u.contact,onChange:_=>N({...u,contact:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:602,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:598,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:611,columnNumber:19},this),n.jsxDEV("select",{value:u.bankName,onChange:_=>N({...u,bankName:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:619,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"KB",children:"KB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:621,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:622,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:623,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:624,columnNumber:23},this),n.jsxDEV("option",{value:"NH",children:"NH"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:625,columnNumber:23},this),n.jsxDEV("option",{value:"IBK",children:"IBK"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:626,columnNumber:23},this),n.jsxDEV("option",{value:"KEB",children:"KEB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:627,columnNumber:23},this),n.jsxDEV("option",{value:"SC",children:"SC"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:628,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:629,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:620,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:632,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:633,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:634,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:635,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:636,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:637,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:631,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:640,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:641,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:642,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:643,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:644,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:645,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:639,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:648,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:649,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:650,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:647,columnNumber:21},this),n.jsxDEV("optgroup",{label:"",children:[n.jsxDEV("option",{value:"NH",children:"NH"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:653,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:654,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:655,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:656,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:657,columnNumber:23},this),n.jsxDEV("option",{value:"KB",children:"KB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:658,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:659,columnNumber:23},this),n.jsxDEV("option",{value:"",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:660,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:652,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:614,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:610,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:666,columnNumber:19},this),n.jsxDEV("input",{type:"text",value:u.accountNumber,onChange:_=>N({...u,accountNumber:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:669,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:665,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:678,columnNumber:19},this),n.jsxDEV("textarea",{value:u.notes,onChange:_=>N({...u,notes:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",rows:3},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:681,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:677,columnNumber:17},this),n.jsxDEV("div",{className:"flex space-x-3 pt-4",children:[n.jsxDEV("button",{type:"button",onClick:k,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:690,columnNumber:19},this),n.jsxDEV("button",{type:"submit",disabled:j,className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50",children:j?" ...":m?"":""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:697,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:689,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:531,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:518,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:517,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:516,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Contractors.tsx",lineNumber:287,columnNumber:5},this)}const ng=()=>{const[t,s]=b.useState([]),[e,r]=b.useState(null),[a,i]=b.useState(!1);b.useEffect(()=>{o()},[]);const o=async()=>{try{t.length===0&&i(!0);const p=await de.get("/quote-inquiries");s(p.data)}catch(p){console.error("Failed to load inquiries:",p),O.error("  ")}finally{i(!1)}},l=async p=>{try{await de.put(`/quote-inquiries/${p}/read`),s(u=>u.map(N=>N.id===p?{...N,isRead:!0}:N)),window.dispatchEvent(new CustomEvent("quoteInquiryRead"))}catch(u){console.error("Failed to mark as read:",u)}},m=p=>{r(p),p.isRead||l(p.id)},h=async(p,u)=>{if(u.stopPropagation(),!!confirm("  ?"))try{await de.delete(`/quote-inquiries/${p}`),s(N=>N.filter(j=>j.id!==p)),(e==null?void 0:e.id)===p&&r(null),O.success(" ")}catch(N){console.error("Failed to delete inquiry:",N),O.error("  ")}},d=t.filter(p=>!p.isRead).length;return a?n.jsxDEV("div",{className:"flex items-center justify-center h-full",children:n.jsxDEV("div",{className:"text-gray-500",children:" ..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:93,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:92,columnNumber:7},void 0):n.jsxDEV("div",{className:"h-full flex flex-col md:flex-row gap-4 p-4",children:[n.jsxDEV("div",{className:`w-full md:w-1/3 bg-white rounded-lg shadow overflow-hidden flex flex-col ${e?"hidden md:flex":"flex"}`,children:[n.jsxDEV("div",{className:"p-4 border-b bg-gray-50",children:n.jsxDEV("h2",{className:"text-lg font-semibold text-gray-900",children:[" ",d>0&&n.jsxDEV("span",{className:"ml-2 px-2 py-1 text-xs bg-red-500 text-white rounded-full",children:d},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:106,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:103,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:102,columnNumber:9},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:t.length===0?n.jsxDEV("div",{className:"p-4 text-center text-gray-500",children:"  "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:115,columnNumber:13},void 0):n.jsxDEV("div",{className:"divide-y",children:t.map(p=>n.jsxDEV("div",{className:`relative group ${(e==null?void 0:e.id)===p.id?"bg-blue-50 border-l-4 border-blue-500":""} ${p.isRead?"":"bg-yellow-50"}`,children:n.jsxDEV("button",{onClick:()=>m(p),className:"w-full p-4 text-left hover:bg-gray-50 transition-colors",children:[n.jsxDEV("div",{className:"flex justify-between items-start mb-2",children:[n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("span",{className:"font-medium text-gray-900",children:p.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:133,columnNumber:25},void 0),!p.isRead&&n.jsxDEV("span",{className:"w-2 h-2 bg-red-500 rounded-full"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:135,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:132,columnNumber:23},void 0),n.jsxDEV("div",{className:"flex items-center gap-2",children:[n.jsxDEV("span",{className:"text-xs text-gray-500",children:Ze(new Date(p.createdAt),"MM/dd HH:mm")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:139,columnNumber:25},void 0),n.jsxDEV("button",{onClick:u=>h(p.id,u),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"",children:n.jsxDEV(Fs,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:147,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:142,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:138,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:131,columnNumber:21},void 0),n.jsxDEV("div",{className:"text-sm text-gray-600 flex items-center gap-1 mb-1",children:[n.jsxDEV(Ha,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:153,columnNumber:23},void 0),p.phone]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:152,columnNumber:21},void 0),n.jsxDEV("div",{className:"text-sm text-gray-500 line-clamp-2",children:p.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:157,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:127,columnNumber:19},void 0)},p.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:121,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:119,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:113,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:101,columnNumber:7},void 0),n.jsxDEV("div",{className:`flex-1 bg-white rounded-lg shadow overflow-hidden ${e?"flex flex-col":"hidden md:flex md:flex-col"}`,children:e?n.jsxDEV("div",{className:"h-full flex flex-col",children:[n.jsxDEV("div",{className:"p-6 border-b bg-gray-50",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[n.jsxDEV("h3",{className:"text-xl font-semibold text-gray-900",children:e.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:174,columnNumber:17},void 0),n.jsxDEV("button",{onClick:()=>r(null),className:"md:hidden px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 text-gray-700 rounded transition-colors",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:178,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:173,columnNumber:15},void 0),n.jsxDEV("div",{className:"text-sm text-gray-500",children:Ze(new Date(e.createdAt),"yyyy MM dd HH:mm")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:172,columnNumber:13},void 0),n.jsxDEV("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[n.jsxDEV(Gl,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:194,columnNumber:19},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:193,columnNumber:17},void 0),n.jsxDEV("div",{className:"pl-6 space-y-2",children:[n.jsxDEV("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsxDEV(Ha,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:199,columnNumber:21},void 0),n.jsxDEV("span",{children:e.phone},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:200,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:198,columnNumber:19},void 0),n.jsxDEV("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsxDEV(Zl,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:203,columnNumber:21},void 0),n.jsxDEV("span",{children:e.email},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:204,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:202,columnNumber:19},void 0),e.address&&n.jsxDEV("div",{className:"flex items-center gap-2 text-gray-700",children:[n.jsxDEV(em,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:208,columnNumber:23},void 0),n.jsxDEV("span",{children:e.address},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:209,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:207,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:197,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:192,columnNumber:15},void 0),(e.projectType||e.budget)&&n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[n.jsxDEV(tm,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:219,columnNumber:21},void 0)," "]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:218,columnNumber:19},void 0),n.jsxDEV("div",{className:"pl-6 space-y-2",children:[e.projectType&&n.jsxDEV("div",{className:"text-gray-700",children:[n.jsxDEV("span",{className:"text-gray-500",children:" : "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:225,columnNumber:25},void 0),e.projectType]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:224,columnNumber:23},void 0),e.budget&&n.jsxDEV("div",{className:"text-gray-700",children:[n.jsxDEV("span",{className:"text-gray-500",children:": "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:231,columnNumber:25},void 0),e.budget]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:230,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:222,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:217,columnNumber:17},void 0),n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("h4",{className:"font-medium text-gray-900",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:241,columnNumber:17},void 0),n.jsxDEV("div",{className:"pl-6 text-gray-700 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:e.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:242,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:240,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:190,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:171,columnNumber:11},void 0):n.jsxDEV("div",{className:"h-full flex items-center justify-center text-gray-500",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:249,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:169,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/QuoteInquiry.tsx",lineNumber:99,columnNumber:5},void 0)},rg=()=>{const{login:t}=js(),[s,e]=b.useState(!1),{register:r,handleSubmit:a,setValue:i,formState:{errors:o}}=fa(),l=async h=>{e(!0);try{await t(h.username,h.password)}finally{e(!1)}},m=h=>{i("username",h)};return n.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxDEV("div",{className:"max-w-md w-full",children:n.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-8",children:[n.jsxDEV("div",{className:"text-center mb-8",children:[n.jsxDEV("h2",{className:"text-3xl font-bold text-gray-900",children:"HV LAB"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:39,columnNumber:13},void 0),n.jsxDEV("p",{className:"mt-2 text-sm text-gray-600",children:"   "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:40,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:38,columnNumber:11},void 0),n.jsxDEV("form",{onSubmit:a(l),className:"space-y-6",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:47,columnNumber:15},void 0),n.jsxDEV("input",{...r("username",{required:" "}),type:"text",className:"input",placeholder:" ",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:50,columnNumber:15},void 0),o.username&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:o.username.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:60,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:46,columnNumber:13},void 0),n.jsxDEV("div",{children:[n.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:65,columnNumber:15},void 0),n.jsxDEV("input",{...r("password",{required:" "}),type:"password",className:"input",placeholder:""},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:68,columnNumber:15},void 0),o.password&&n.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:o.password.message},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:77,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:64,columnNumber:13},void 0),n.jsxDEV("button",{type:"submit",disabled:s,className:"w-full btn btn-primary flex items-center justify-center",children:s?n.jsxDEV("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:87,columnNumber:17},void 0):n.jsxDEV(n.Fragment,{children:[n.jsxDEV(sm,{className:"mr-2 h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:90,columnNumber:19},void 0),""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:89,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:81,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:45,columnNumber:11},void 0),n.jsxDEV("div",{className:"mt-6 border-t pt-6",children:[n.jsxDEV("p",{className:"text-sm text-gray-600 text-center mb-4",children:" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:98,columnNumber:13},void 0),n.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:["","","","","","",""].map(h=>n.jsxDEV("button",{onClick:()=>m(h),className:"px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",type:"button",children:h},h,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:101,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:99,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:97,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:37,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:36,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Login.tsx",lineNumber:35,columnNumber:5},void 0)},ag=b.lazy(()=>ds(()=>import("./Drawings-jPcM24yT.js"),__vite__mapDeps([0,1,2,3,4,5]))),ig=b.lazy(()=>ds(()=>import("./SiteLog-CBUrLzSv.js"),__vite__mapDeps([6,1,4,2,3,5]))),og=b.lazy(()=>ds(()=>import("./AfterService-07dCWH-S.js"),__vite__mapDeps([7,1,2,4,3,5]))),lg=b.lazy(()=>ds(()=>import("./AdditionalWork-Ct3MChRw.js"),__vite__mapDeps([8,1,2,9,4,3,5]))),mg=b.lazy(()=>ds(()=>import("./ConstructionPayment-eJVMc0sP.js"),__vite__mapDeps([10,1,9,4,2,3,5]))),cg=b.lazy(()=>ds(()=>import("./WorkRequest-CzK0Eq5w.js"),__vite__mapDeps([11,1,2,4,3,5]))),dg=b.lazy(()=>ds(()=>import("./Specbook-C9QS49Z-.js"),__vite__mapDeps([12,1,2,3,4,5]))),ug=b.lazy(()=>ds(()=>import("./EstimatePreview-DhZp4JDD.js"),__vite__mapDeps([13,1,2,3,4,5]))),pg=b.lazy(()=>ds(()=>import("./ExecutionHistory-BEG47oVT.js"),__vite__mapDeps([14,1,4,2,3,5]))),fg=()=>n.jsxDEV("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:n.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:36,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:35,columnNumber:3},void 0),gg=new Ol({defaultOptions:{queries:{staleTime:1e3*60*5,refetchOnWindowFocus:!1}}});function hg(){const[t,s]=b.useState(!1);return b.useEffect(()=>{const e=sd({immediate:!0,onNeedRefresh(){console.log("   ."),s(!0),O.loading("   ...",{duration:2e3}),setTimeout(()=>{e(!0).then(()=>{O.dismiss(),O.success(" !",{duration:2e3,icon:""}),setTimeout(()=>{window.location.reload()},1e3)})},1500)},onOfflineReady(){console.log("    ")},onRegisteredSW(l,m){console.log(" Service Worker :",l),m&&setInterval(()=>{console.log("   ..."),m.update()},6e4)},onRegisterError(l){console.error(" Service Worker  :",l)}});Qd();const r=async()=>{try{const m=await(await fetch("/version.json?t="+Date.now())).json(),h=localStorage.getItem("app_version");h&&h!==m.version?(console.log("   :",m.version),localStorage.setItem("app_version",m.version),"serviceWorker"in navigator&&(await navigator.serviceWorker.ready).update()):h||localStorage.setItem("app_version",m.version)}catch(l){console.error("  :",l)}};setTimeout(r,5e3);const a=setInterval(r,3e4),o=yn("/",{transports:["websocket","polling"]});return o.on("connect",()=>{console.log(" Socket.IO ")}),o.on("urgent-payment",l=>{console.log("    :",l);const m=`${l.project}  ${l.amount.toLocaleString()}  `;Kd(l.urgency,m)}),o.on("disconnect",()=>{console.log(" Socket.IO  ")}),()=>{o.disconnect(),clearInterval(a)}},[]),n.jsxDEV(ql,{client:gg,children:n.jsxDEV(Tl,{children:n.jsxDEV(id,{children:[n.jsxDEV(b.Suspense,{fallback:n.jsxDEV(fg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:162,columnNumber:31},this),children:n.jsxDEV(Rl,{children:[n.jsxDEV(vt,{path:"/login",element:n.jsxDEV(rg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:164,columnNumber:45},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:164,columnNumber:15},this),n.jsxDEV(vt,{path:"/",element:n.jsxDEV(Wd,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:165,columnNumber:40},this),children:[n.jsxDEV(vt,{index:!0,element:n.jsxDEV(vi,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:166,columnNumber:39},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:166,columnNumber:17},this),n.jsxDEV(vt,{path:"dashboard",element:n.jsxDEV(Du,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:167,columnNumber:50},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:167,columnNumber:17},this),n.jsxDEV(vt,{path:"projects",element:n.jsxDEV(ju,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:168,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:168,columnNumber:17},this),n.jsxDEV(vt,{path:"schedule",element:n.jsxDEV(zf,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:169,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:169,columnNumber:17},this),n.jsxDEV(vt,{path:"drawings",element:n.jsxDEV(ag,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:170,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:170,columnNumber:17},this),n.jsxDEV(vt,{path:"site-log",element:n.jsxDEV(ig,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:171,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:171,columnNumber:17},this),n.jsxDEV(vt,{path:"after-service",element:n.jsxDEV(og,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:172,columnNumber:54},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:172,columnNumber:17},this),n.jsxDEV(vt,{path:"additional-work",element:n.jsxDEV(lg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:173,columnNumber:56},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:173,columnNumber:17},this),n.jsxDEV(vt,{path:"construction-payment",element:n.jsxDEV(mg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:174,columnNumber:61},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:174,columnNumber:17},this),n.jsxDEV(vt,{path:"contractors",element:n.jsxDEV(sg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:175,columnNumber:52},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:175,columnNumber:17},this),n.jsxDEV(vt,{path:"work-request",element:n.jsxDEV(cg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:176,columnNumber:53},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:176,columnNumber:17},this),n.jsxDEV(vt,{path:"finish-check",element:n.jsxDEV(tg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:177,columnNumber:53},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:177,columnNumber:17},this),n.jsxDEV(vt,{path:"specbook",element:n.jsxDEV(dg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:178,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:178,columnNumber:17},this),n.jsxDEV(vt,{path:"estimate-preview",element:n.jsxDEV(ug,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:179,columnNumber:57},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:179,columnNumber:17},this),n.jsxDEV(vt,{path:"execution-history",element:n.jsxDEV(pg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:180,columnNumber:58},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:180,columnNumber:17},this),n.jsxDEV(vt,{path:"payments",element:n.jsxDEV(eg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:181,columnNumber:49},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:181,columnNumber:17},this),n.jsxDEV(vt,{path:"quote-inquiry",element:n.jsxDEV(ng,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:182,columnNumber:54},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:182,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:165,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:163,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:162,columnNumber:11},this),n.jsxDEV(lc,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#363636",border:"1px solid #e5e5e5"}}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:186,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:161,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:160,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/App.tsx",lineNumber:159,columnNumber:5},this)}"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(t){for(const s of t)s.update()});Ri(document.getElementById("root")).render(n.jsxDEV(b.StrictMode,{children:n.jsxDEV(hg,{},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/main.tsx",lineNumber:18,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/main.tsx",lineNumber:17,columnNumber:3},void 0));export{_r as P,de as a,mr as b,Os as c,fa as d,ad as e,qr as f,Xf as g,n as j,gt as l,Zf as m,es as p,Jf as s,js as u,Od as w,O as z};
