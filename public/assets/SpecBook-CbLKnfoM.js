import{j as i}from"./vendor-data-DG_4MGb7.js";import{g as wo,r as d,R as be,b as Ct}from"./vendor-react-D-r2Cqeg.js";import{u as Co,b as So,a as q,z as F}from"./index-Dgd7wCS1.js";import{u as Do}from"./useFilteredProjects-BNZe-7y5.js";import{X as Lt,C as jo,t as No,U as Ro,u as Eo,j as Er,T as Ut,P as Qr}from"./vendor-ui-DTwhhNuH.js";import"./vendor-date-9Cl9d1sr.js";import"./dataStore-D-kob-RA.js";var hr=function(t,r){return hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},hr(t,r)};function Io(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");hr(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var te=function(){return te=Object.assign||function(r){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},te.apply(this,arguments)};var en=!1,ot,fr,pr,Ot,_t,Dn,Ft,gr,mr,vr,jn,xr,br,Nn,Rn;function xe(){if(!en){en=!0;var t=navigator.userAgent,r=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),e=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(xr=/\b(iPhone|iP[ao]d)/.exec(t),br=/\b(iP[ao]d)/.exec(t),vr=/Android/i.exec(t),Nn=/FBAN\/\w+;/i.exec(t),Rn=/Mobile/i.exec(t),jn=!!/Win64/.exec(t),r){ot=r[1]?parseFloat(r[1]):r[5]?parseFloat(r[5]):NaN,ot&&document&&document.documentMode&&(ot=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(t);Dn=n?parseFloat(n[1])+4:ot,fr=r[2]?parseFloat(r[2]):NaN,pr=r[3]?parseFloat(r[3]):NaN,Ot=r[4]?parseFloat(r[4]):NaN,Ot?(r=/(?:Chrome\/(\d+\.\d+))/.exec(t),_t=r&&r[1]?parseFloat(r[1]):NaN):_t=NaN}else ot=fr=pr=_t=Ot=NaN;if(e){if(e[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Ft=o?parseFloat(o[1].replace("_",".")):!0}else Ft=!1;gr=!!e[2],mr=!!e[3]}else Ft=gr=mr=!1}}var yr={ie:function(){return xe()||ot},ieCompatibilityMode:function(){return xe()||Dn>ot},ie64:function(){return yr.ie()&&jn},firefox:function(){return xe()||fr},opera:function(){return xe()||pr},webkit:function(){return xe()||Ot},safari:function(){return yr.webkit()},chrome:function(){return xe()||_t},windows:function(){return xe()||gr},osx:function(){return xe()||Ft},linux:function(){return xe()||mr},iphone:function(){return xe()||xr},mobile:function(){return xe()||xr||br||vr||Rn},nativeApp:function(){return xe()||Nn},android:function(){return xe()||vr},ipad:function(){return xe()||br}},ko=yr,Mo=!!(typeof window<"u"&&window.document&&window.document.createElement),Po={canUseDOM:Mo},Ao=Po,En=Ao,In;En.canUseDOM&&(In=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function To(t,r){if(!En.canUseDOM||r&&!("addEventListener"in document))return!1;var e="on"+t,n=e in document;if(!n){var o=document.createElement("div");o.setAttribute(e,"return;"),n=typeof o[e]=="function"}return!n&&In&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var zo=To,Lo=ko,Oo=zo,tn=10,rn=40,nn=800;function kn(t){var r=0,e=0,n=0,o=0;return"detail"in t&&(e=t.detail),"wheelDelta"in t&&(e=-t.wheelDelta/120),"wheelDeltaY"in t&&(e=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(r=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(r=e,e=0),n=r*tn,o=e*tn,"deltaY"in t&&(o=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||o)&&t.deltaMode&&(t.deltaMode==1?(n*=rn,o*=rn):(n*=nn,o*=nn)),n&&!r&&(r=n<1?-1:1),o&&!e&&(e=o<1?-1:1),{spinX:r,spinY:e,pixelX:n,pixelY:o}}kn.getEventType=function(){return Lo.firefox()?"DOMMouseScroll":Oo("wheel")?"wheel":"mousewheel"};var _o=kn,Fo=_o;const Wo=wo(Fo);function $o(t,r,e,n,o,a){a===void 0&&(a=0);var c=ht(t,r,a),l=c.width,h=c.height,f=Math.min(l,e),p=Math.min(h,n);return f>p*o?{width:p*o,height:p}:{width:f,height:f/o}}function Bo(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function wt(t,r,e,n,o){o===void 0&&(o=0);var a=ht(r.width,r.height,o),c=a.width,l=a.height;return{x:on(t.x,c,e.width,n),y:on(t.y,l,e.height,n)}}function on(t,r,e,n){var o=r*n/2-e/2;return Ht(t,-o,o)}function sn(t,r){return Math.sqrt(Math.pow(t.y-r.y,2)+Math.pow(t.x-r.x,2))}function an(t,r){return Math.atan2(r.y-t.y,r.x-t.x)*180/Math.PI}function Xo(t,r,e,n,o,a,c){a===void 0&&(a=0),c===void 0&&(c=!0);var l=c?Yo:Uo,h=ht(r.width,r.height,a),f=ht(r.naturalWidth,r.naturalHeight,a),p={x:l(100,((h.width-e.width/o)/2-t.x/o)/h.width*100),y:l(100,((h.height-e.height/o)/2-t.y/o)/h.height*100),width:l(100,e.width/h.width*100/o),height:l(100,e.height/h.height*100/o)},g=Math.round(l(f.width,p.width*f.width/100)),x=Math.round(l(f.height,p.height*f.height/100)),m=f.width>=f.height*n,C=m?{width:Math.round(x*n),height:x}:{width:g,height:Math.round(g/n)},b=te(te({},C),{x:Math.round(l(f.width-C.width,p.x*f.width/100)),y:Math.round(l(f.height-C.height,p.y*f.height/100))});return{croppedAreaPercentages:p,croppedAreaPixels:b}}function Yo(t,r){return Math.min(t,Math.max(0,r))}function Uo(t,r){return r}function Ho(t,r,e,n,o,a){var c=ht(r.width,r.height,e),l=Ht(n.width/c.width*(100/t.width),o,a),h={x:l*c.width/2-n.width/2-c.width*l*(t.x/100),y:l*c.height/2-n.height/2-c.height*l*(t.y/100)};return{crop:h,zoom:l}}function Zo(t,r,e){var n=Bo(r);return e.height>e.width?e.height/(t.height*n):e.width/(t.width*n)}function Go(t,r,e,n,o,a){e===void 0&&(e=0);var c=ht(r.naturalWidth,r.naturalHeight,e),l=Ht(Zo(t,r,n),o,a),h=n.height>n.width?n.height/t.height:n.width/t.width,f={x:((c.width-t.width)/2-t.x)*h,y:((c.height-t.height)/2-t.y)*h};return{crop:f,zoom:l}}function cn(t,r){return{x:(r.x+t.x)/2,y:(r.y+t.y)/2}}function qo(t){return t*Math.PI/180}function ht(t,r,e){var n=qo(e);return{width:Math.abs(Math.cos(n)*t)+Math.abs(Math.sin(n)*r),height:Math.abs(Math.sin(n)*t)+Math.abs(Math.cos(n)*r)}}function Ht(t,r,e){return Math.min(Math.max(t,r),e)}function At(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.filter(function(e){return typeof e=="string"&&e.length>0}).join(" ").trim()}var Vo=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Ko=1,Jo=3,Qo=1,es=function(t){Io(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.cropperRef=d.createRef(),e.imageRef=d.createRef(),e.videoRef=d.createRef(),e.containerPosition={x:0,y:0},e.containerRef=null,e.styleRef=null,e.containerRect=null,e.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},e.dragStartPosition={x:0,y:0},e.dragStartCrop={x:0,y:0},e.gestureZoomStart=0,e.gestureRotationStart=0,e.isTouching=!1,e.lastPinchDistance=0,e.lastPinchRotation=0,e.rafDragTimeout=null,e.rafPinchTimeout=null,e.wheelTimer=null,e.currentDoc=typeof document<"u"?document:null,e.currentWindow=typeof window<"u"?window:null,e.resizeObserver=null,e.previousCropSize=null,e.isInitialized=!1,e.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},e.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!e.containerRef)){var n=!0;e.resizeObserver=new window.ResizeObserver(function(o){if(n){n=!1;return}e.computeSizes()}),e.resizeObserver.observe(e.containerRef)}},e.preventZoomSafari=function(n){return n.preventDefault()},e.cleanEvents=function(){e.currentDoc&&(e.currentDoc.removeEventListener("mousemove",e.onMouseMove),e.currentDoc.removeEventListener("mouseup",e.onDragStopped),e.currentDoc.removeEventListener("touchmove",e.onTouchMove),e.currentDoc.removeEventListener("touchend",e.onDragStopped),e.currentDoc.removeEventListener("gesturechange",e.onGestureChange),e.currentDoc.removeEventListener("gestureend",e.onGestureEnd),e.currentDoc.removeEventListener("scroll",e.onScroll))},e.clearScrollEvent=function(){e.containerRef&&e.containerRef.removeEventListener("wheel",e.onWheel),e.wheelTimer&&clearTimeout(e.wheelTimer)},e.onMediaLoad=function(){var n=e.computeSizes();n&&(e.previousCropSize=n,e.emitCropData(),e.setInitialCrop(n),e.isInitialized=!0),e.props.onMediaLoaded&&e.props.onMediaLoaded(e.mediaSize)},e.setInitialCrop=function(n){if(e.props.initialCroppedAreaPercentages){var o=Ho(e.props.initialCroppedAreaPercentages,e.mediaSize,e.props.rotation,n,e.props.minZoom,e.props.maxZoom),a=o.crop,c=o.zoom;e.props.onCropChange(a),e.props.onZoomChange&&e.props.onZoomChange(c)}else if(e.props.initialCroppedAreaPixels){var l=Go(e.props.initialCroppedAreaPixels,e.mediaSize,e.props.rotation,n,e.props.minZoom,e.props.maxZoom),a=l.crop,c=l.zoom;e.props.onCropChange(a),e.props.onZoomChange&&e.props.onZoomChange(c)}},e.computeSizes=function(){var n,o,a,c,l,h,f=e.imageRef.current||e.videoRef.current;if(f&&e.containerRef){e.containerRect=e.containerRef.getBoundingClientRect(),e.saveContainerPosition();var p=e.containerRect.width/e.containerRect.height,g=((n=e.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((o=e.videoRef.current)===null||o===void 0?void 0:o.videoWidth)||0,x=((a=e.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((c=e.videoRef.current)===null||c===void 0?void 0:c.videoHeight)||0,m=f.offsetWidth<g||f.offsetHeight<x,C=g/x,b=void 0;if(m)switch(e.state.mediaObjectFit){default:case"contain":b=p>C?{width:e.containerRect.height*C,height:e.containerRect.height}:{width:e.containerRect.width,height:e.containerRect.width/C};break;case"horizontal-cover":b={width:e.containerRect.width,height:e.containerRect.width/C};break;case"vertical-cover":b={width:e.containerRect.height*C,height:e.containerRect.height};break}else b={width:f.offsetWidth,height:f.offsetHeight};e.mediaSize=te(te({},b),{naturalWidth:g,naturalHeight:x}),e.props.setMediaSize&&e.props.setMediaSize(e.mediaSize);var w=e.props.cropSize?e.props.cropSize:$o(e.mediaSize.width,e.mediaSize.height,e.containerRect.width,e.containerRect.height,e.props.aspect,e.props.rotation);return(((l=e.state.cropSize)===null||l===void 0?void 0:l.height)!==w.height||((h=e.state.cropSize)===null||h===void 0?void 0:h.width)!==w.width)&&e.props.onCropSizeChange&&e.props.onCropSizeChange(w),e.setState({cropSize:w},e.recomputeCropPosition),e.props.setCropSize&&e.props.setCropSize(w),w}},e.saveContainerPosition=function(){if(e.containerRef){var n=e.containerRef.getBoundingClientRect();e.containerPosition={x:n.left,y:n.top}}},e.onMouseDown=function(n){e.currentDoc&&(n.preventDefault(),e.currentDoc.addEventListener("mousemove",e.onMouseMove),e.currentDoc.addEventListener("mouseup",e.onDragStopped),e.saveContainerPosition(),e.onDragStart(r.getMousePoint(n)))},e.onMouseMove=function(n){return e.onDrag(r.getMousePoint(n))},e.onScroll=function(n){e.currentDoc&&(n.preventDefault(),e.saveContainerPosition())},e.onTouchStart=function(n){e.currentDoc&&(e.isTouching=!0,!(e.props.onTouchRequest&&!e.props.onTouchRequest(n))&&(e.currentDoc.addEventListener("touchmove",e.onTouchMove,{passive:!1}),e.currentDoc.addEventListener("touchend",e.onDragStopped),e.saveContainerPosition(),n.touches.length===2?e.onPinchStart(n):n.touches.length===1&&e.onDragStart(r.getTouchPoint(n.touches[0]))))},e.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?e.onPinchMove(n):n.touches.length===1&&e.onDrag(r.getTouchPoint(n.touches[0]))},e.onGestureStart=function(n){e.currentDoc&&(n.preventDefault(),e.currentDoc.addEventListener("gesturechange",e.onGestureChange),e.currentDoc.addEventListener("gestureend",e.onGestureEnd),e.gestureZoomStart=e.props.zoom,e.gestureRotationStart=e.props.rotation)},e.onGestureChange=function(n){if(n.preventDefault(),!e.isTouching){var o=r.getMousePoint(n),a=e.gestureZoomStart-1+n.scale;if(e.setNewZoom(a,o,{shouldUpdatePosition:!0}),e.props.onRotationChange){var c=e.gestureRotationStart+n.rotation;e.props.onRotationChange(c)}}},e.onGestureEnd=function(n){e.cleanEvents()},e.onDragStart=function(n){var o,a,c=n.x,l=n.y;e.dragStartPosition={x:c,y:l},e.dragStartCrop=te({},e.props.crop),(a=(o=e.props).onInteractionStart)===null||a===void 0||a.call(o)},e.onDrag=function(n){var o=n.x,a=n.y;e.currentWindow&&(e.rafDragTimeout&&e.currentWindow.cancelAnimationFrame(e.rafDragTimeout),e.rafDragTimeout=e.currentWindow.requestAnimationFrame(function(){if(e.state.cropSize&&!(o===void 0||a===void 0)){var c=o-e.dragStartPosition.x,l=a-e.dragStartPosition.y,h={x:e.dragStartCrop.x+c,y:e.dragStartCrop.y+l},f=e.props.restrictPosition?wt(h,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):h;e.props.onCropChange(f)}}))},e.onDragStopped=function(){var n,o;e.isTouching=!1,e.cleanEvents(),e.emitCropData(),(o=(n=e.props).onInteractionEnd)===null||o===void 0||o.call(n)},e.onWheel=function(n){if(e.currentWindow&&!(e.props.onWheelRequest&&!e.props.onWheelRequest(n))){n.preventDefault();var o=r.getMousePoint(n),a=Wo(n).pixelY,c=e.props.zoom-a*e.props.zoomSpeed/200;e.setNewZoom(c,o,{shouldUpdatePosition:!0}),e.state.hasWheelJustStarted||e.setState({hasWheelJustStarted:!0},function(){var l,h;return(h=(l=e.props).onInteractionStart)===null||h===void 0?void 0:h.call(l)}),e.wheelTimer&&clearTimeout(e.wheelTimer),e.wheelTimer=e.currentWindow.setTimeout(function(){return e.setState({hasWheelJustStarted:!1},function(){var l,h;return(h=(l=e.props).onInteractionEnd)===null||h===void 0?void 0:h.call(l)})},250)}},e.getPointOnContainer=function(n,o){var a=n.x,c=n.y;if(!e.containerRect)throw new Error("The Cropper is not mounted");return{x:e.containerRect.width/2-(a-o.x),y:e.containerRect.height/2-(c-o.y)}},e.getPointOnMedia=function(n){var o=n.x,a=n.y,c=e.props,l=c.crop,h=c.zoom;return{x:(o+l.x)/h,y:(a+l.y)/h}},e.setNewZoom=function(n,o,a){var c=a===void 0?{}:a,l=c.shouldUpdatePosition,h=l===void 0?!0:l;if(!(!e.state.cropSize||!e.props.onZoomChange)){var f=Ht(n,e.props.minZoom,e.props.maxZoom);if(h){var p=e.getPointOnContainer(o,e.containerPosition),g=e.getPointOnMedia(p),x={x:g.x*f-p.x,y:g.y*f-p.y},m=e.props.restrictPosition?wt(x,e.mediaSize,e.state.cropSize,f,e.props.rotation):x;e.props.onCropChange(m)}e.props.onZoomChange(f)}},e.getCropData=function(){if(!e.state.cropSize)return null;var n=e.props.restrictPosition?wt(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;return Xo(n,e.mediaSize,e.state.cropSize,e.getAspect(),e.props.zoom,e.props.rotation,e.props.restrictPosition)},e.emitCropData=function(){var n=e.getCropData();if(n){var o=n.croppedAreaPercentages,a=n.croppedAreaPixels;e.props.onCropComplete&&e.props.onCropComplete(o,a),e.props.onCropAreaChange&&e.props.onCropAreaChange(o,a)}},e.emitCropAreaChange=function(){var n=e.getCropData();if(n){var o=n.croppedAreaPercentages,a=n.croppedAreaPixels;e.props.onCropAreaChange&&e.props.onCropAreaChange(o,a)}},e.recomputeCropPosition=function(){var n,o;if(e.state.cropSize){var a=e.props.crop;if(e.isInitialized&&(!((n=e.previousCropSize)===null||n===void 0)&&n.width)&&(!((o=e.previousCropSize)===null||o===void 0)&&o.height)){var c=Math.abs(e.previousCropSize.width-e.state.cropSize.width)>1e-6||Math.abs(e.previousCropSize.height-e.state.cropSize.height)>1e-6;if(c){var l=e.state.cropSize.width/e.previousCropSize.width,h=e.state.cropSize.height/e.previousCropSize.height;a={x:e.props.crop.x*l,y:e.props.crop.y*h}}}var f=e.props.restrictPosition?wt(a,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):a;e.previousCropSize=e.state.cropSize,e.props.onCropChange(f),e.emitCropData()}},e.onKeyDown=function(n){var o,a,c=e.props,l=c.crop,h=c.onCropChange,f=c.keyboardStep,p=c.zoom,g=c.rotation,x=f;if(e.state.cropSize){n.shiftKey&&(x*=.2);var m=te({},l);switch(n.key){case"ArrowUp":m.y-=x,n.preventDefault();break;case"ArrowDown":m.y+=x,n.preventDefault();break;case"ArrowLeft":m.x-=x,n.preventDefault();break;case"ArrowRight":m.x+=x,n.preventDefault();break;default:return}e.props.restrictPosition&&(m=wt(m,e.mediaSize,e.state.cropSize,p,g)),n.repeat||(a=(o=e.props).onInteractionStart)===null||a===void 0||a.call(o),h(m)}},e.onKeyUp=function(n){var o,a;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}e.emitCropData(),(a=(o=e.props).onInteractionEnd)===null||a===void 0||a.call(o)},e}return r.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=Vo,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},r.prototype.componentWillUnmount=function(){var e,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},r.prototype.componentDidUpdate=function(e){var n,o,a,c,l,h,f,p,g;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():((n=e.cropSize)===null||n===void 0?void 0:n.height)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.height)||((a=e.cropSize)===null||a===void 0?void 0:a.width)!==((c=this.props.cropSize)===null||c===void 0?void 0:c.width)?this.computeSizes():(((l=e.crop)===null||l===void 0?void 0:l.x)!==((h=this.props.crop)===null||h===void 0?void 0:h.x)||((f=e.crop)===null||f===void 0?void 0:f.y)!==((p=this.props.crop)===null||p===void 0?void 0:p.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&((g=this.videoRef.current)===null||g===void 0||g.load());var x=this.getObjectFit();x!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:x},this.computeSizes)},r.prototype.getAspect=function(){var e=this.props,n=e.cropSize,o=e.aspect;return n?n.width/n.height:o},r.prototype.getObjectFit=function(){var e,n,o,a;if(this.props.objectFit==="cover"){var c=this.imageRef.current||this.videoRef.current;if(c&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,h=((e=this.imageRef.current)===null||e===void 0?void 0:e.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,f=((o=this.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,p=h/f;return p<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},r.prototype.onPinchStart=function(e){var n=r.getTouchPoint(e.touches[0]),o=r.getTouchPoint(e.touches[1]);this.lastPinchDistance=sn(n,o),this.lastPinchRotation=an(n,o),this.onDragStart(cn(n,o))},r.prototype.onPinchMove=function(e){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var o=r.getTouchPoint(e.touches[0]),a=r.getTouchPoint(e.touches[1]),c=cn(o,a);this.onDrag(c),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=sn(o,a),h=n.props.zoom*(l/n.lastPinchDistance);n.setNewZoom(h,c,{shouldUpdatePosition:!1}),n.lastPinchDistance=l;var f=an(o,a),p=n.props.rotation+(f-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(p),n.lastPinchRotation=f})}},r.prototype.render=function(){var e=this,n,o=this.props,a=o.image,c=o.video,l=o.mediaProps,h=o.cropperProps,f=o.transform,p=o.crop,g=p.x,x=p.y,m=o.rotation,C=o.zoom,b=o.cropShape,w=o.showGrid,S=o.roundCropAreaPixels,N=o.style,R=N.containerStyle,P=N.cropAreaStyle,A=N.mediaStyle,T=o.classes,E=T.containerClassName,k=T.cropAreaClassName,I=T.mediaClassName,$=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return d.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(K){return e.containerRef=K},"data-testid":"container",style:R,className:At("reactEasyCrop_Container",E)},a?d.createElement("img",te({alt:"",className:At("reactEasyCrop_Image",$==="contain"&&"reactEasyCrop_Contain",$==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",$==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",I)},l,{src:a,ref:this.imageRef,style:te(te({},A),{transform:f||"translate(".concat(g,"px, ").concat(x,"px) rotate(").concat(m,"deg) scale(").concat(C,")")}),onLoad:this.onMediaLoad})):c&&d.createElement("video",te({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:At("reactEasyCrop_Video",$==="contain"&&"reactEasyCrop_Contain",$==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",$==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",I)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:te(te({},A),{transform:f||"translate(".concat(g,"px, ").concat(x,"px) rotate(").concat(m,"deg) scale(").concat(C,")")}),controls:!1}),(Array.isArray(c)?c:[{src:c}]).map(function(z){return d.createElement("source",te({key:z.src},z))})),this.state.cropSize&&d.createElement("div",te({ref:this.cropperRef,style:te(te({},P),{width:S?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:S?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:At("reactEasyCrop_CropArea",b==="round"&&"reactEasyCrop_CropAreaRound",w&&"reactEasyCrop_CropAreaGrid",k)},h)))},r.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Jo,minZoom:Ko,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:Qo},r.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},r.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},r}(d.Component);const ts=t=>new Promise((r,e)=>{const n=new Image;n.addEventListener("load",()=>r(n)),n.addEventListener("error",o=>e(o)),n.crossOrigin="anonymous",n.src=t});async function rs(t,r,e=0){const n=await ts(t),o=document.createElement("canvas"),a=o.getContext("2d");if(!a)throw new Error("No 2d context");const c=e*Math.PI/180,l=Math.abs(Math.sin(c)),h=Math.abs(Math.cos(c)),f=n.width*h+n.height*l,p=n.width*l+n.height*h;o.width=r.width,o.height=r.height;const g=document.createElement("canvas"),x=g.getContext("2d");if(!x)throw new Error("No 2d context");g.width=f,g.height=p,x.translate(f/2,p/2),x.rotate(c),x.translate(-n.width/2,-n.height/2),x.drawImage(n,0,0);const m=(f-n.width)/2,C=(p-n.height)/2;return a.drawImage(g,r.x+m,r.y+C,r.width,r.height,0,0,r.width,r.height),o.toDataURL("image/jpeg",.9)}const ns=({image:t,onCropComplete:r,onCancel:e,aspectRatio:n=1})=>{const[o,a]=d.useState({x:0,y:0}),[c,l]=d.useState(1),[h,f]=d.useState(0),[p,g]=d.useState(null),x=d.useCallback(S=>{a(S)},[]),m=d.useCallback(S=>{l(S)},[]),C=d.useCallback((S,N)=>{g(N)},[]),b=()=>{f(S=>(S+90)%360)},w=async()=>{if(p)try{const S=await rs(t,p,h);r(S)}catch(S){console.error("Error cropping image:",S)}};return i.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/50",children:[i.jsx("button",{onClick:e,className:"p-2 text-white hover:bg-white/20 rounded-full transition-colors",children:i.jsx(Lt,{className:"w-6 h-6"})}),i.jsx("span",{className:"text-white font-medium",children:"이미지 자르기 (1:1)"}),i.jsx("button",{onClick:w,className:"p-2 text-white hover:bg-white/20 rounded-full transition-colors",children:i.jsx(jo,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex-1 relative",children:i.jsx(es,{image:t,crop:o,zoom:c,rotation:h,aspect:n,onCropChange:x,onZoomChange:m,onCropComplete:C,cropShape:"rect",showGrid:!0,style:{containerStyle:{backgroundColor:"#000"}}})}),i.jsx("div",{className:"p-4 bg-black/50",children:i.jsxs("div",{className:"flex items-center justify-center gap-6",children:[i.jsx("button",{onClick:b,className:"p-3 text-white hover:bg-white/20 rounded-full transition-colors",title:"90도 회전",children:i.jsx(No,{className:"w-6 h-6"})}),i.jsxs("div",{className:"flex items-center gap-3 flex-1 max-w-xs",children:[i.jsx("span",{className:"text-white text-sm",children:"-"}),i.jsx("input",{type:"range",min:1,max:3,step:.1,value:c,onChange:S=>l(Number(S.target.value)),className:"w-full h-2 bg-white/30 rounded-lg appearance-none cursor-pointer accent-white"}),i.jsx("span",{className:"text-white text-sm",children:"+"})]})]})})]})};function os(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return d.useMemo(()=>n=>{r.forEach(o=>o(n))},r)}const Zt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ft(t){const r=Object.prototype.toString.call(t);return r==="[object Window]"||r==="[object global]"}function Ir(t){return"nodeType"in t}function ye(t){var r,e;return t?ft(t)?t:Ir(t)&&(r=(e=t.ownerDocument)==null?void 0:e.defaultView)!=null?r:window:window}function kr(t){const{Document:r}=ye(t);return t instanceof r}function kt(t){return ft(t)?!1:t instanceof ye(t).HTMLElement}function Mn(t){return t instanceof ye(t).SVGElement}function pt(t){return t?ft(t)?t.document:Ir(t)?kr(t)?t:kt(t)||Mn(t)?t.ownerDocument:document:document:document}const $e=Zt?d.useLayoutEffect:d.useEffect;function Mr(t){const r=d.useRef(t);return $e(()=>{r.current=t}),d.useCallback(function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.current==null?void 0:r.current(...n)},[])}function ss(){const t=d.useRef(null),r=d.useCallback((n,o)=>{t.current=setInterval(n,o)},[]),e=d.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[r,e]}function Rt(t,r){r===void 0&&(r=[t]);const e=d.useRef(t);return $e(()=>{e.current!==t&&(e.current=t)},r),e}function Mt(t,r){const e=d.useRef();return d.useMemo(()=>{const n=t(e.current);return e.current=n,n},[...r])}function $t(t){const r=Mr(t),e=d.useRef(null),n=d.useCallback(o=>{o!==e.current&&(r==null||r(o,e.current)),e.current=o},[]);return[e,n]}function wr(t){const r=d.useRef();return d.useEffect(()=>{r.current=t},[t]),r.current}let sr={};function Pt(t,r){return d.useMemo(()=>{if(r)return r;const e=sr[t]==null?0:sr[t]+1;return sr[t]=e,t+"-"+e},[t,r])}function Pn(t){return function(r){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.reduce((a,c)=>{const l=Object.entries(c);for(const[h,f]of l){const p=a[h];p!=null&&(a[h]=p+t*f)}return a},{...r})}}const ut=Pn(1),Et=Pn(-1);function is(t){return"clientX"in t&&"clientY"in t}function Pr(t){if(!t)return!1;const{KeyboardEvent:r}=ye(t.target);return r&&t instanceof r}function as(t){if(!t)return!1;const{TouchEvent:r}=ye(t.target);return r&&t instanceof r}function Cr(t){if(as(t)){if(t.touches&&t.touches.length){const{clientX:r,clientY:e}=t.touches[0];return{x:r,y:e}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:r,clientY:e}=t.changedTouches[0];return{x:r,y:e}}}return is(t)?{x:t.clientX,y:t.clientY}:null}const st=Object.freeze({Translate:{toString(t){if(!t)return;const{x:r,y:e}=t;return"translate3d("+(r?Math.round(r):0)+"px, "+(e?Math.round(e):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:r,scaleY:e}=t;return"scaleX("+r+") scaleY("+e+")"}},Transform:{toString(t){if(t)return[st.Translate.toString(t),st.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:r,duration:e,easing:n}=t;return r+" "+e+"ms "+n}}}),ln="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function cs(t){return t.matches(ln)?t:t.querySelector(ln)}const ls={display:"none"};function ds(t){let{id:r,value:e}=t;return be.createElement("div",{id:r,style:ls},e)}function us(t){let{id:r,announcement:e,ariaLiveType:n="assertive"}=t;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return be.createElement("div",{id:r,style:o,role:"status","aria-live":n,"aria-atomic":!0},e)}function hs(){const[t,r]=d.useState("");return{announce:d.useCallback(n=>{n!=null&&r(n)},[]),announcement:t}}const An=d.createContext(null);function fs(t){const r=d.useContext(An);d.useEffect(()=>{if(!r)throw new Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r])}function ps(){const[t]=d.useState(()=>new Set),r=d.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[d.useCallback(n=>{let{type:o,event:a}=n;t.forEach(c=>{var l;return(l=c[o])==null?void 0:l.call(c,a)})},[t]),r]}const gs={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ms={onDragStart(t){let{active:r}=t;return"Picked up draggable item "+r.id+"."},onDragOver(t){let{active:r,over:e}=t;return e?"Draggable item "+r.id+" was moved over droppable area "+e.id+".":"Draggable item "+r.id+" is no longer over a droppable area."},onDragEnd(t){let{active:r,over:e}=t;return e?"Draggable item "+r.id+" was dropped over droppable area "+e.id:"Draggable item "+r.id+" was dropped."},onDragCancel(t){let{active:r}=t;return"Dragging was cancelled. Draggable item "+r.id+" was dropped."}};function vs(t){let{announcements:r=ms,container:e,hiddenTextDescribedById:n,screenReaderInstructions:o=gs}=t;const{announce:a,announcement:c}=hs(),l=Pt("DndLiveRegion"),[h,f]=d.useState(!1);if(d.useEffect(()=>{f(!0)},[]),fs(d.useMemo(()=>({onDragStart(g){let{active:x}=g;a(r.onDragStart({active:x}))},onDragMove(g){let{active:x,over:m}=g;r.onDragMove&&a(r.onDragMove({active:x,over:m}))},onDragOver(g){let{active:x,over:m}=g;a(r.onDragOver({active:x,over:m}))},onDragEnd(g){let{active:x,over:m}=g;a(r.onDragEnd({active:x,over:m}))},onDragCancel(g){let{active:x,over:m}=g;a(r.onDragCancel({active:x,over:m}))}}),[a,r])),!h)return null;const p=be.createElement(be.Fragment,null,be.createElement(ds,{id:n,value:o.draggable}),be.createElement(us,{id:l,announcement:c}));return e?Ct.createPortal(p,e):p}var V;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(V||(V={}));function Bt(){}function dn(t,r){return d.useMemo(()=>({sensor:t,options:r??{}}),[t,r])}function xs(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return d.useMemo(()=>[...r].filter(n=>n!=null),[...r])}const _e=Object.freeze({x:0,y:0});function Tn(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}function zn(t,r){let{data:{value:e}}=t,{data:{value:n}}=r;return e-n}function bs(t,r){let{data:{value:e}}=t,{data:{value:n}}=r;return n-e}function un(t){let{left:r,top:e,height:n,width:o}=t;return[{x:r,y:e},{x:r+o,y:e},{x:r,y:e+n},{x:r+o,y:e+n}]}function Ln(t,r){if(!t||t.length===0)return null;const[e]=t;return e[r]}function hn(t,r,e){return r===void 0&&(r=t.left),e===void 0&&(e=t.top),{x:r+t.width*.5,y:e+t.height*.5}}const ir=t=>{let{collisionRect:r,droppableRects:e,droppableContainers:n}=t;const o=hn(r,r.left,r.top),a=[];for(const c of n){const{id:l}=c,h=e.get(l);if(h){const f=Tn(hn(h),o);a.push({id:l,data:{droppableContainer:c,value:f}})}}return a.sort(zn)},ys=t=>{let{collisionRect:r,droppableRects:e,droppableContainers:n}=t;const o=un(r),a=[];for(const c of n){const{id:l}=c,h=e.get(l);if(h){const f=un(h),p=o.reduce((x,m,C)=>x+Tn(f[C],m),0),g=Number((p/4).toFixed(4));a.push({id:l,data:{droppableContainer:c,value:g}})}}return a.sort(zn)};function ws(t,r){const e=Math.max(r.top,t.top),n=Math.max(r.left,t.left),o=Math.min(r.left+r.width,t.left+t.width),a=Math.min(r.top+r.height,t.top+t.height),c=o-n,l=a-e;if(n<o&&e<a){const h=r.width*r.height,f=t.width*t.height,p=c*l,g=p/(h+f-p);return Number(g.toFixed(4))}return 0}const Cs=t=>{let{collisionRect:r,droppableRects:e,droppableContainers:n}=t;const o=[];for(const a of n){const{id:c}=a,l=e.get(c);if(l){const h=ws(l,r);h>0&&o.push({id:c,data:{droppableContainer:a,value:h}})}}return o.sort(bs)};function Ss(t,r,e){return{...t,scaleX:r&&e?r.width/e.width:1,scaleY:r&&e?r.height/e.height:1}}function On(t,r){return t&&r?{x:t.left-r.left,y:t.top-r.top}:_e}function Ds(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return o.reduce((c,l)=>({...c,top:c.top+t*l.y,bottom:c.bottom+t*l.y,left:c.left+t*l.x,right:c.right+t*l.x}),{...e})}}const js=Ds(1);function Ns(t){if(t.startsWith("matrix3d(")){const r=t.slice(9,-1).split(/, /);return{x:+r[12],y:+r[13],scaleX:+r[0],scaleY:+r[5]}}else if(t.startsWith("matrix(")){const r=t.slice(7,-1).split(/, /);return{x:+r[4],y:+r[5],scaleX:+r[0],scaleY:+r[3]}}return null}function Rs(t,r,e){const n=Ns(r);if(!n)return t;const{scaleX:o,scaleY:a,x:c,y:l}=n,h=t.left-c-(1-o)*parseFloat(e),f=t.top-l-(1-a)*parseFloat(e.slice(e.indexOf(" ")+1)),p=o?t.width/o:t.width,g=a?t.height/a:t.height;return{width:p,height:g,top:f,right:h+p,bottom:f+g,left:h}}const Es={ignoreTransform:!1};function gt(t,r){r===void 0&&(r=Es);let e=t.getBoundingClientRect();if(r.ignoreTransform){const{transform:f,transformOrigin:p}=ye(t).getComputedStyle(t);f&&(e=Rs(e,f,p))}const{top:n,left:o,width:a,height:c,bottom:l,right:h}=e;return{top:n,left:o,width:a,height:c,bottom:l,right:h}}function fn(t){return gt(t,{ignoreTransform:!0})}function Is(t){const r=t.innerWidth,e=t.innerHeight;return{top:0,left:0,right:r,bottom:e,width:r,height:e}}function ks(t,r){return r===void 0&&(r=ye(t).getComputedStyle(t)),r.position==="fixed"}function Ms(t,r){r===void 0&&(r=ye(t).getComputedStyle(t));const e=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=r[o];return typeof a=="string"?e.test(a):!1})}function Gt(t,r){const e=[];function n(o){if(r!=null&&e.length>=r||!o)return e;if(kr(o)&&o.scrollingElement!=null&&!e.includes(o.scrollingElement))return e.push(o.scrollingElement),e;if(!kt(o)||Mn(o)||e.includes(o))return e;const a=ye(t).getComputedStyle(o);return o!==t&&Ms(o,a)&&e.push(o),ks(o,a)?e:n(o.parentNode)}return t?n(t):e}function _n(t){const[r]=Gt(t,1);return r??null}function ar(t){return!Zt||!t?null:ft(t)?t:Ir(t)?kr(t)||t===pt(t).scrollingElement?window:kt(t)?t:null:null}function Fn(t){return ft(t)?t.scrollX:t.scrollLeft}function Wn(t){return ft(t)?t.scrollY:t.scrollTop}function Sr(t){return{x:Fn(t),y:Wn(t)}}var re;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(re||(re={}));function $n(t){return!Zt||!t?!1:t===document.scrollingElement}function Bn(t){const r={x:0,y:0},e=$n(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-e.width,y:t.scrollHeight-e.height},o=t.scrollTop<=r.y,a=t.scrollLeft<=r.x,c=t.scrollTop>=n.y,l=t.scrollLeft>=n.x;return{isTop:o,isLeft:a,isBottom:c,isRight:l,maxScroll:n,minScroll:r}}const Ps={x:.2,y:.2};function As(t,r,e,n,o){let{top:a,left:c,right:l,bottom:h}=e;n===void 0&&(n=10),o===void 0&&(o=Ps);const{isTop:f,isBottom:p,isLeft:g,isRight:x}=Bn(t),m={x:0,y:0},C={x:0,y:0},b={height:r.height*o.y,width:r.width*o.x};return!f&&a<=r.top+b.height?(m.y=re.Backward,C.y=n*Math.abs((r.top+b.height-a)/b.height)):!p&&h>=r.bottom-b.height&&(m.y=re.Forward,C.y=n*Math.abs((r.bottom-b.height-h)/b.height)),!x&&l>=r.right-b.width?(m.x=re.Forward,C.x=n*Math.abs((r.right-b.width-l)/b.width)):!g&&c<=r.left+b.width&&(m.x=re.Backward,C.x=n*Math.abs((r.left+b.width-c)/b.width)),{direction:m,speed:C}}function Ts(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:c}=window;return{top:0,left:0,right:a,bottom:c,width:a,height:c}}const{top:r,left:e,right:n,bottom:o}=t.getBoundingClientRect();return{top:r,left:e,right:n,bottom:o,width:t.clientWidth,height:t.clientHeight}}function Xn(t){return t.reduce((r,e)=>ut(r,Sr(e)),_e)}function zs(t){return t.reduce((r,e)=>r+Fn(e),0)}function Ls(t){return t.reduce((r,e)=>r+Wn(e),0)}function Os(t,r){if(r===void 0&&(r=gt),!t)return;const{top:e,left:n,bottom:o,right:a}=r(t);_n(t)&&(o<=0||a<=0||e>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const _s=[["x",["left","right"],zs],["y",["top","bottom"],Ls]];class Ar{constructor(r,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Gt(e),o=Xn(n);this.rect={...r},this.width=r.width,this.height=r.height;for(const[a,c,l]of _s)for(const h of c)Object.defineProperty(this,h,{get:()=>{const f=l(n),p=o[a]-f;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class St{constructor(r){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...e)})},this.target=r}add(r,e,n){var o;(o=this.target)==null||o.addEventListener(r,e,n),this.listeners.push([r,e,n])}}function Fs(t){const{EventTarget:r}=ye(t);return t instanceof r?t:pt(t)}function cr(t,r){const e=Math.abs(t.x),n=Math.abs(t.y);return typeof r=="number"?Math.sqrt(e**2+n**2)>r:"x"in r&&"y"in r?e>r.x&&n>r.y:"x"in r?e>r.x:"y"in r?n>r.y:!1}var Ae;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ae||(Ae={}));function pn(t){t.preventDefault()}function Ws(t){t.stopPropagation()}var L;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(L||(L={}));const Yn={start:[L.Space,L.Enter],cancel:[L.Esc],end:[L.Space,L.Enter,L.Tab]},$s=(t,r)=>{let{currentCoordinates:e}=r;switch(t.code){case L.Right:return{...e,x:e.x+25};case L.Left:return{...e,x:e.x-25};case L.Down:return{...e,y:e.y+25};case L.Up:return{...e,y:e.y-25}}};class Tr{constructor(r){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=r;const{event:{target:e}}=r;this.props=r,this.listeners=new St(pt(e)),this.windowListeners=new St(ye(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ae.Resize,this.handleCancel),this.windowListeners.add(Ae.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ae.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:r,onStart:e}=this.props,n=r.node.current;n&&Os(n),e(_e)}handleKeyDown(r){if(Pr(r)){const{active:e,context:n,options:o}=this.props,{keyboardCodes:a=Yn,coordinateGetter:c=$s,scrollBehavior:l="smooth"}=o,{code:h}=r;if(a.end.includes(h)){this.handleEnd(r);return}if(a.cancel.includes(h)){this.handleCancel(r);return}const{collisionRect:f}=n.current,p=f?{x:f.left,y:f.top}:_e;this.referenceCoordinates||(this.referenceCoordinates=p);const g=c(r,{active:e,context:n.current,currentCoordinates:p});if(g){const x=Et(g,p),m={x:0,y:0},{scrollableAncestors:C}=n.current;for(const b of C){const w=r.code,{isTop:S,isRight:N,isLeft:R,isBottom:P,maxScroll:A,minScroll:T}=Bn(b),E=Ts(b),k={x:Math.min(w===L.Right?E.right-E.width/2:E.right,Math.max(w===L.Right?E.left:E.left+E.width/2,g.x)),y:Math.min(w===L.Down?E.bottom-E.height/2:E.bottom,Math.max(w===L.Down?E.top:E.top+E.height/2,g.y))},I=w===L.Right&&!N||w===L.Left&&!R,$=w===L.Down&&!P||w===L.Up&&!S;if(I&&k.x!==g.x){const z=b.scrollLeft+x.x,K=w===L.Right&&z<=A.x||w===L.Left&&z>=T.x;if(K&&!x.y){b.scrollTo({left:z,behavior:l});return}K?m.x=b.scrollLeft-z:m.x=w===L.Right?b.scrollLeft-A.x:b.scrollLeft-T.x,m.x&&b.scrollBy({left:-m.x,behavior:l});break}else if($&&k.y!==g.y){const z=b.scrollTop+x.y,K=w===L.Down&&z<=A.y||w===L.Up&&z>=T.y;if(K&&!x.x){b.scrollTo({top:z,behavior:l});return}K?m.y=b.scrollTop-z:m.y=w===L.Down?b.scrollTop-A.y:b.scrollTop-T.y,m.y&&b.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(r,ut(Et(g,this.referenceCoordinates),m))}}}handleMove(r,e){const{onMove:n}=this.props;r.preventDefault(),n(e)}handleEnd(r){const{onEnd:e}=this.props;r.preventDefault(),this.detach(),e()}handleCancel(r){const{onCancel:e}=this.props;r.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Tr.activators=[{eventName:"onKeyDown",handler:(t,r,e)=>{let{keyboardCodes:n=Yn,onActivation:o}=r,{active:a}=e;const{code:c}=t.nativeEvent;if(n.start.includes(c)){const l=a.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),o==null||o({event:t.nativeEvent}),!0)}return!1}}];function gn(t){return!!(t&&"distance"in t)}function mn(t){return!!(t&&"delay"in t)}class zr{constructor(r,e,n){var o;n===void 0&&(n=Fs(r.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=r,this.events=e;const{event:a}=r,{target:c}=a;this.props=r,this.events=e,this.document=pt(c),this.documentListeners=new St(this.document),this.listeners=new St(n),this.windowListeners=new St(ye(c)),this.initialCoordinates=(o=Cr(a))!=null?o:_e,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:r,props:{options:{activationConstraint:e,bypassActivationConstraint:n}}}=this;if(this.listeners.add(r.move.name,this.handleMove,{passive:!1}),this.listeners.add(r.end.name,this.handleEnd),r.cancel&&this.listeners.add(r.cancel.name,this.handleCancel),this.windowListeners.add(Ae.Resize,this.handleCancel),this.windowListeners.add(Ae.DragStart,pn),this.windowListeners.add(Ae.VisibilityChange,this.handleCancel),this.windowListeners.add(Ae.ContextMenu,pn),this.documentListeners.add(Ae.Keydown,this.handleKeydown),e){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(mn(e)){this.timeoutId=setTimeout(this.handleStart,e.delay),this.handlePending(e);return}if(gn(e)){this.handlePending(e);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(r,e){const{active:n,onPending:o}=this.props;o(n,r,this.initialCoordinates,e)}handleStart(){const{initialCoordinates:r}=this,{onStart:e}=this.props;r&&(this.activated=!0,this.documentListeners.add(Ae.Click,Ws,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ae.SelectionChange,this.removeTextSelection),e(r))}handleMove(r){var e;const{activated:n,initialCoordinates:o,props:a}=this,{onMove:c,options:{activationConstraint:l}}=a;if(!o)return;const h=(e=Cr(r))!=null?e:_e,f=Et(o,h);if(!n&&l){if(gn(l)){if(l.tolerance!=null&&cr(f,l.tolerance))return this.handleCancel();if(cr(f,l.distance))return this.handleStart()}if(mn(l)&&cr(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}r.cancelable&&r.preventDefault(),c(h)}handleEnd(){const{onAbort:r,onEnd:e}=this.props;this.detach(),this.activated||r(this.props.active),e()}handleCancel(){const{onAbort:r,onCancel:e}=this.props;this.detach(),this.activated||r(this.props.active),e()}handleKeydown(r){r.code===L.Esc&&this.handleCancel()}removeTextSelection(){var r;(r=this.document.getSelection())==null||r.removeAllRanges()}}const Bs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lr extends zr{constructor(r){const{event:e}=r,n=pt(e.target);super(r,Bs,n)}}Lr.activators=[{eventName:"onPointerDown",handler:(t,r)=>{let{nativeEvent:e}=t,{onActivation:n}=r;return!e.isPrimary||e.button!==0?!1:(n==null||n({event:e}),!0)}}];const Xs={move:{name:"mousemove"},end:{name:"mouseup"}};var Dr;(function(t){t[t.RightClick=2]="RightClick"})(Dr||(Dr={}));class Ys extends zr{constructor(r){super(r,Xs,pt(r.event.target))}}Ys.activators=[{eventName:"onMouseDown",handler:(t,r)=>{let{nativeEvent:e}=t,{onActivation:n}=r;return e.button===Dr.RightClick?!1:(n==null||n({event:e}),!0)}}];const lr={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Us extends zr{constructor(r){super(r,lr)}static setup(){return window.addEventListener(lr.move.name,r,{capture:!1,passive:!1}),function(){window.removeEventListener(lr.move.name,r)};function r(){}}}Us.activators=[{eventName:"onTouchStart",handler:(t,r)=>{let{nativeEvent:e}=t,{onActivation:n}=r;const{touches:o}=e;return o.length>1?!1:(n==null||n({event:e}),!0)}}];var Dt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Dt||(Dt={}));var Xt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Xt||(Xt={}));function Hs(t){let{acceleration:r,activator:e=Dt.Pointer,canScroll:n,draggingRect:o,enabled:a,interval:c=5,order:l=Xt.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:p,delta:g,threshold:x}=t;const m=Gs({delta:g,disabled:!a}),[C,b]=ss(),w=d.useRef({x:0,y:0}),S=d.useRef({x:0,y:0}),N=d.useMemo(()=>{switch(e){case Dt.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Dt.DraggableRect:return o}},[e,o,h]),R=d.useRef(null),P=d.useCallback(()=>{const T=R.current;if(!T)return;const E=w.current.x*S.current.x,k=w.current.y*S.current.y;T.scrollBy(E,k)},[]),A=d.useMemo(()=>l===Xt.TreeOrder?[...f].reverse():f,[l,f]);d.useEffect(()=>{if(!a||!f.length||!N){b();return}for(const T of A){if((n==null?void 0:n(T))===!1)continue;const E=f.indexOf(T),k=p[E];if(!k)continue;const{direction:I,speed:$}=As(T,k,N,r,x);for(const z of["x","y"])m[z][I[z]]||($[z]=0,I[z]=0);if($.x>0||$.y>0){b(),R.current=T,C(P,c),w.current=$,S.current=I;return}}w.current={x:0,y:0},S.current={x:0,y:0},b()},[r,P,n,b,a,c,JSON.stringify(N),JSON.stringify(m),C,f,A,p,JSON.stringify(x)])}const Zs={x:{[re.Backward]:!1,[re.Forward]:!1},y:{[re.Backward]:!1,[re.Forward]:!1}};function Gs(t){let{delta:r,disabled:e}=t;const n=wr(r);return Mt(o=>{if(e||!n||!o)return Zs;const a={x:Math.sign(r.x-n.x),y:Math.sign(r.y-n.y)};return{x:{[re.Backward]:o.x[re.Backward]||a.x===-1,[re.Forward]:o.x[re.Forward]||a.x===1},y:{[re.Backward]:o.y[re.Backward]||a.y===-1,[re.Forward]:o.y[re.Forward]||a.y===1}}},[e,r,n])}function qs(t,r){const e=r!=null?t.get(r):void 0,n=e?e.node.current:null;return Mt(o=>{var a;return r==null?null:(a=n??o)!=null?a:null},[n,r])}function Vs(t,r){return d.useMemo(()=>t.reduce((e,n)=>{const{sensor:o}=n,a=o.activators.map(c=>({eventName:c.eventName,handler:r(c.handler,n)}));return[...e,...a]},[]),[t,r])}var It;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(It||(It={}));var jr;(function(t){t.Optimized="optimized"})(jr||(jr={}));const vn=new Map;function Ks(t,r){let{dragging:e,dependencies:n,config:o}=r;const[a,c]=d.useState(null),{frequency:l,measure:h,strategy:f}=o,p=d.useRef(t),g=w(),x=Rt(g),m=d.useCallback(function(S){S===void 0&&(S=[]),!x.current&&c(N=>N===null?S:N.concat(S.filter(R=>!N.includes(R))))},[x]),C=d.useRef(null),b=Mt(S=>{if(g&&!e)return vn;if(!S||S===vn||p.current!==t||a!=null){const N=new Map;for(let R of t){if(!R)continue;if(a&&a.length>0&&!a.includes(R.id)&&R.rect.current){N.set(R.id,R.rect.current);continue}const P=R.node.current,A=P?new Ar(h(P),P):null;R.rect.current=A,A&&N.set(R.id,A)}return N}return S},[t,a,e,g,h]);return d.useEffect(()=>{p.current=t},[t]),d.useEffect(()=>{g||m()},[e,g]),d.useEffect(()=>{a&&a.length>0&&c(null)},[JSON.stringify(a)]),d.useEffect(()=>{g||typeof l!="number"||C.current!==null||(C.current=setTimeout(()=>{m(),C.current=null},l))},[l,g,m,...n]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:a!=null};function w(){switch(f){case It.Always:return!1;case It.BeforeDragging:return e;default:return!e}}}function Un(t,r){return Mt(e=>t?e||(typeof r=="function"?r(t):t):null,[r,t])}function Js(t,r){return Un(t,r)}function Qs(t){let{callback:r,disabled:e}=t;const n=Mr(r),o=d.useMemo(()=>{if(e||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(n)},[n,e]);return d.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function qt(t){let{callback:r,disabled:e}=t;const n=Mr(r),o=d.useMemo(()=>{if(e||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(n)},[e]);return d.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function ei(t){return new Ar(gt(t),t)}function xn(t,r,e){r===void 0&&(r=ei);const[n,o]=d.useState(null);function a(){o(h=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=h??e)!=null?f:null}const p=r(t);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const c=Qs({callback(h){if(t)for(const f of h){const{type:p,target:g}=f;if(p==="childList"&&g instanceof HTMLElement&&g.contains(t)){a();break}}}}),l=qt({callback:a});return $e(()=>{a(),t?(l==null||l.observe(t),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),c==null||c.disconnect())},[t]),n}function ti(t){const r=Un(t);return On(t,r)}const bn=[];function ri(t){const r=d.useRef(t),e=Mt(n=>t?n&&n!==bn&&t&&r.current&&t.parentNode===r.current.parentNode?n:Gt(t):bn,[t]);return d.useEffect(()=>{r.current=t},[t]),e}function ni(t){const[r,e]=d.useState(null),n=d.useRef(t),o=d.useCallback(a=>{const c=ar(a.target);c&&e(l=>l?(l.set(c,Sr(c)),new Map(l)):null)},[]);return d.useEffect(()=>{const a=n.current;if(t!==a){c(a);const l=t.map(h=>{const f=ar(h);return f?(f.addEventListener("scroll",o,{passive:!0}),[f,Sr(f)]):null}).filter(h=>h!=null);e(l.length?new Map(l):null),n.current=t}return()=>{c(t),c(a)};function c(l){l.forEach(h=>{const f=ar(h);f==null||f.removeEventListener("scroll",o)})}},[o,t]),d.useMemo(()=>t.length?r?Array.from(r.values()).reduce((a,c)=>ut(a,c),_e):Xn(t):_e,[t,r])}function yn(t,r){r===void 0&&(r=[]);const e=d.useRef(null);return d.useEffect(()=>{e.current=null},r),d.useEffect(()=>{const n=t!==_e;n&&!e.current&&(e.current=t),!n&&e.current&&(e.current=null)},[t]),e.current?Et(t,e.current):_e}function oi(t){d.useEffect(()=>{if(!Zt)return;const r=t.map(e=>{let{sensor:n}=e;return n.setup==null?void 0:n.setup()});return()=>{for(const e of r)e==null||e()}},t.map(r=>{let{sensor:e}=r;return e}))}function si(t,r){return d.useMemo(()=>t.reduce((e,n)=>{let{eventName:o,handler:a}=n;return e[o]=c=>{a(c,r)},e},{}),[t,r])}function Hn(t){return d.useMemo(()=>t?Is(t):null,[t])}const wn=[];function ii(t,r){r===void 0&&(r=gt);const[e]=t,n=Hn(e?ye(e):null),[o,a]=d.useState(wn);function c(){a(()=>t.length?t.map(h=>$n(h)?n:new Ar(r(h),h)):wn)}const l=qt({callback:c});return $e(()=>{l==null||l.disconnect(),c(),t.forEach(h=>l==null?void 0:l.observe(h))},[t]),o}function ai(t){if(!t)return null;if(t.children.length>1)return t;const r=t.children[0];return kt(r)?r:t}function ci(t){let{measure:r}=t;const[e,n]=d.useState(null),o=d.useCallback(f=>{for(const{target:p}of f)if(kt(p)){n(g=>{const x=r(p);return g?{...g,width:x.width,height:x.height}:x});break}},[r]),a=qt({callback:o}),c=d.useCallback(f=>{const p=ai(f);a==null||a.disconnect(),p&&(a==null||a.observe(p)),n(p?r(p):null)},[r,a]),[l,h]=$t(c);return d.useMemo(()=>({nodeRef:l,rect:e,setRef:h}),[e,l,h])}const li=[{sensor:Lr,options:{}},{sensor:Tr,options:{}}],di={current:{}},Wt={draggable:{measure:fn},droppable:{measure:fn,strategy:It.WhileDragging,frequency:jr.Optimized},dragOverlay:{measure:gt}};class jt extends Map{get(r){var e;return r!=null&&(e=super.get(r))!=null?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(r=>{let{disabled:e}=r;return!e})}getNodeFor(r){var e,n;return(e=(n=this.get(r))==null?void 0:n.node.current)!=null?e:void 0}}const ui={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Bt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wt,measureDroppableContainers:Bt,windowRect:null,measuringScheduled:!1},hi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Bt,draggableNodes:new Map,over:null,measureDroppableContainers:Bt},Vt=d.createContext(hi),Zn=d.createContext(ui);function fi(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jt}}}function pi(t,r){switch(r.type){case V.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:r.initialCoordinates,active:r.active}};case V.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:r.coordinates.x-t.draggable.initialCoordinates.x,y:r.coordinates.y-t.draggable.initialCoordinates.y}}};case V.DragEnd:case V.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case V.RegisterDroppable:{const{element:e}=r,{id:n}=e,o=new jt(t.droppable.containers);return o.set(n,e),{...t,droppable:{...t.droppable,containers:o}}}case V.SetDroppableDisabled:{const{id:e,key:n,disabled:o}=r,a=t.droppable.containers.get(e);if(!a||n!==a.key)return t;const c=new jt(t.droppable.containers);return c.set(e,{...a,disabled:o}),{...t,droppable:{...t.droppable,containers:c}}}case V.UnregisterDroppable:{const{id:e,key:n}=r,o=t.droppable.containers.get(e);if(!o||n!==o.key)return t;const a=new jt(t.droppable.containers);return a.delete(e),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function gi(t){let{disabled:r}=t;const{active:e,activatorEvent:n,draggableNodes:o}=d.useContext(Vt),a=wr(n),c=wr(e==null?void 0:e.id);return d.useEffect(()=>{if(!r&&!n&&a&&c!=null){if(!Pr(a)||document.activeElement===a.target)return;const l=o.get(c);if(!l)return;const{activatorNode:h,node:f}=l;if(!h.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[h.current,f.current]){if(!p)continue;const g=cs(p);if(g){g.focus();break}}})}},[n,r,o,c,a]),null}function mi(t,r){let{transform:e,...n}=r;return t!=null&&t.length?t.reduce((o,a)=>a({transform:o,...n}),e):e}function vi(t){return d.useMemo(()=>({draggable:{...Wt.draggable,...t==null?void 0:t.draggable},droppable:{...Wt.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Wt.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function xi(t){let{activeNode:r,measure:e,initialRect:n,config:o=!0}=t;const a=d.useRef(!1),{x:c,y:l}=typeof o=="boolean"?{x:o,y:o}:o;$e(()=>{if(!c&&!l||!r){a.current=!1;return}if(a.current||!n)return;const f=r==null?void 0:r.node.current;if(!f||f.isConnected===!1)return;const p=e(f),g=On(p,n);if(c||(g.x=0),l||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const x=_n(f);x&&x.scrollBy({top:g.y,left:g.x})}},[r,c,l,n,e])}const Gn=d.createContext({..._e,scaleX:1,scaleY:1});var Je;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Je||(Je={}));const dr=d.memo(function(r){var e,n,o,a;let{id:c,accessibility:l,autoScroll:h=!0,children:f,sensors:p=li,collisionDetection:g=Cs,measuring:x,modifiers:m,...C}=r;const b=d.useReducer(pi,void 0,fi),[w,S]=b,[N,R]=ps(),[P,A]=d.useState(Je.Uninitialized),T=P===Je.Initialized,{draggable:{active:E,nodes:k,translate:I},droppable:{containers:$}}=w,z=E!=null?k.get(E):null,K=d.useRef({initial:null,translated:null}),M=d.useMemo(()=>{var G;return E!=null?{id:E,data:(G=z==null?void 0:z.data)!=null?G:di,rect:K}:null},[E,z]),U=d.useRef(null),[Ue,Re]=d.useState(null),[B,He]=d.useState(null),j=Rt(C,Object.values(C)),se=Pt("DndDescribedBy",c),ne=d.useMemo(()=>$.getEnabled(),[$]),J=vi(x),{droppableRects:Te,measureDroppableContainers:ze,measuringScheduled:Qe}=Ks(ne,{dragging:T,dependencies:[I.x,I.y],config:J.droppable}),he=qs(k,E),fe=d.useMemo(()=>B?Cr(B):null,[B]),Q=Qt(),me=Js(he,J.draggable.measure);xi({activeNode:E!=null?k.get(E):null,config:Q.layoutShiftCompensation,initialRect:me,measure:J.draggable.measure});const _=xn(he,J.draggable.measure,me),ve=xn(he?he.parentElement:null),we=d.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:Te,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Y=$.getNodeFor((e=we.current.over)==null?void 0:e.id),Ee=ci({measure:J.dragOverlay.measure}),ee=(n=Ee.nodeRef.current)!=null?n:he,Ie=T?(o=Ee.rect)!=null?o:_:null,et=!!(Ee.nodeRef.current&&Ee.rect),Fe=ti(et?null:_),We=Hn(ee?ye(ee):null),Ce=ri(T?Y??he:null),ie=ii(Ce),Ze=mi(m,{transform:{x:I.x-Fe.x,y:I.y-Fe.y,scaleX:1,scaleY:1},activatorEvent:B,active:M,activeNodeRect:_,containerNodeRect:ve,draggingNodeRect:Ie,over:we.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:Ce,scrollableAncestorRects:ie,windowRect:We}),Kt=fe?ut(fe,I):null,it=ni(Ce),Jt=yn(it),at=yn(it,[_]),Z=ut(Ze,Jt),H=Ie?js(Ie,Ze):null,ae=M&&H?g({active:M,collisionRect:H,droppableRects:Te,droppableContainers:ne,pointerCoordinates:Kt}):null,ce=Ln(ae,"id"),[ke,ct]=d.useState(null),lt=et?Ze:ut(Ze,at),mt=Ss(lt,(a=ke==null?void 0:ke.rect)!=null?a:null,_),tt=d.useRef(null),Be=d.useCallback((G,pe)=>{let{sensor:oe,options:Le}=pe;if(U.current==null)return;const le=k.get(U.current);if(!le)return;const de=G.nativeEvent,ge=new oe({active:U.current,activeNode:le,event:de,options:Le,context:we,onAbort(X){if(!k.get(X))return;const{onDragAbort:De}=j.current,je={id:X};De==null||De(je),N({type:"onDragAbort",event:je})},onPending(X,Me,De,je){if(!k.get(X))return;const{onDragPending:Ve}=j.current,Oe={id:X,constraint:Me,initialCoordinates:De,offset:je};Ve==null||Ve(Oe),N({type:"onDragPending",event:Oe})},onStart(X){const Me=U.current;if(Me==null)return;const De=k.get(Me);if(!De)return;const{onDragStart:je}=j.current,qe={activatorEvent:de,active:{id:Me,data:De.data,rect:K}};Ct.unstable_batchedUpdates(()=>{je==null||je(qe),A(Je.Initializing),S({type:V.DragStart,initialCoordinates:X,active:Me}),N({type:"onDragStart",event:qe}),Re(tt.current),He(de)})},onMove(X){S({type:V.DragMove,coordinates:X})},onEnd:Se(V.DragEnd),onCancel:Se(V.DragCancel)});tt.current=ge;function Se(X){return async function(){const{active:De,collisions:je,over:qe,scrollAdjustedTranslate:Ve}=we.current;let Oe=null;if(De&&Ve){const{cancelDrop:Ne}=j.current;Oe={activatorEvent:de,active:De,collisions:je,delta:Ve,over:qe},X===V.DragEnd&&typeof Ne=="function"&&await Promise.resolve(Ne(Oe))&&(X=V.DragCancel)}U.current=null,Ct.unstable_batchedUpdates(()=>{S({type:X}),A(Je.Uninitialized),ct(null),Re(null),He(null),tt.current=null;const Ne=X===V.DragEnd?"onDragEnd":"onDragCancel";if(Oe){const Ke=j.current[Ne];Ke==null||Ke(Oe),N({type:Ne,event:Oe})}})}}},[k]),vt=d.useCallback((G,pe)=>(oe,Le)=>{const le=oe.nativeEvent,de=k.get(Le);if(U.current!==null||!de||le.dndKit||le.defaultPrevented)return;const ge={active:de};G(oe,pe.options,ge)===!0&&(le.dndKit={capturedBy:pe.sensor},U.current=Le,Be(oe,pe))},[k,Be]),Xe=Vs(p,vt);oi(p),$e(()=>{_&&P===Je.Initializing&&A(Je.Initialized)},[_,P]),d.useEffect(()=>{const{onDragMove:G}=j.current,{active:pe,activatorEvent:oe,collisions:Le,over:le}=we.current;if(!pe||!oe)return;const de={active:pe,activatorEvent:oe,collisions:Le,delta:{x:Z.x,y:Z.y},over:le};Ct.unstable_batchedUpdates(()=>{G==null||G(de),N({type:"onDragMove",event:de})})},[Z.x,Z.y]),d.useEffect(()=>{const{active:G,activatorEvent:pe,collisions:oe,droppableContainers:Le,scrollAdjustedTranslate:le}=we.current;if(!G||U.current==null||!pe||!le)return;const{onDragOver:de}=j.current,ge=Le.get(ce),Se=ge&&ge.rect.current?{id:ge.id,rect:ge.rect.current,data:ge.data,disabled:ge.disabled}:null,X={active:G,activatorEvent:pe,collisions:oe,delta:{x:le.x,y:le.y},over:Se};Ct.unstable_batchedUpdates(()=>{ct(Se),de==null||de(X),N({type:"onDragOver",event:X})})},[ce]),$e(()=>{we.current={activatorEvent:B,active:M,activeNode:he,collisionRect:H,collisions:ae,droppableRects:Te,draggableNodes:k,draggingNode:ee,draggingNodeRect:Ie,droppableContainers:$,over:ke,scrollableAncestors:Ce,scrollAdjustedTranslate:Z},K.current={initial:Ie,translated:H}},[M,he,ae,H,k,ee,Ie,Te,$,ke,Ce,Z]),Hs({...Q,delta:I,draggingRect:H,pointerCoordinates:Kt,scrollableAncestors:Ce,scrollableAncestorRects:ie});const dt=d.useMemo(()=>({active:M,activeNode:he,activeNodeRect:_,activatorEvent:B,collisions:ae,containerNodeRect:ve,dragOverlay:Ee,draggableNodes:k,droppableContainers:$,droppableRects:Te,over:ke,measureDroppableContainers:ze,scrollableAncestors:Ce,scrollableAncestorRects:ie,measuringConfiguration:J,measuringScheduled:Qe,windowRect:We}),[M,he,_,B,ae,ve,Ee,k,$,Te,ke,ze,Ce,ie,J,Qe,We]),Ge=d.useMemo(()=>({activatorEvent:B,activators:Xe,active:M,activeNodeRect:_,ariaDescribedById:{draggable:se},dispatch:S,draggableNodes:k,over:ke,measureDroppableContainers:ze}),[B,Xe,M,_,S,se,k,ke,ze]);return be.createElement(An.Provider,{value:R},be.createElement(Vt.Provider,{value:Ge},be.createElement(Zn.Provider,{value:dt},be.createElement(Gn.Provider,{value:mt},f)),be.createElement(gi,{disabled:(l==null?void 0:l.restoreFocus)===!1})),be.createElement(vs,{...l,hiddenTextDescribedById:se}));function Qt(){const G=(Ue==null?void 0:Ue.autoScrollEnabled)===!1,pe=typeof h=="object"?h.enabled===!1:h===!1,oe=T&&!G&&!pe;return typeof h=="object"?{...h,enabled:oe}:{enabled:oe}}}),bi=d.createContext(null),Cn="button",yi="Draggable";function wi(t){let{id:r,data:e,disabled:n=!1,attributes:o}=t;const a=Pt(yi),{activators:c,activatorEvent:l,active:h,activeNodeRect:f,ariaDescribedById:p,draggableNodes:g,over:x}=d.useContext(Vt),{role:m=Cn,roleDescription:C="draggable",tabIndex:b=0}=o??{},w=(h==null?void 0:h.id)===r,S=d.useContext(w?Gn:bi),[N,R]=$t(),[P,A]=$t(),T=si(c,r),E=Rt(e);$e(()=>(g.set(r,{id:r,key:a,node:N,activatorNode:P,data:E}),()=>{const I=g.get(r);I&&I.key===a&&g.delete(r)}),[g,r]);const k=d.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":n,"aria-pressed":w&&m===Cn?!0:void 0,"aria-roledescription":C,"aria-describedby":p.draggable}),[n,m,b,w,C,p.draggable]);return{active:h,activatorEvent:l,activeNodeRect:f,attributes:k,isDragging:w,listeners:n?void 0:T,node:N,over:x,setNodeRef:R,setActivatorNodeRef:A,transform:S}}function Ci(){return d.useContext(Zn)}const Si="Droppable",Di={timeout:25};function ji(t){let{data:r,disabled:e=!1,id:n,resizeObserverConfig:o}=t;const a=Pt(Si),{active:c,dispatch:l,over:h,measureDroppableContainers:f}=d.useContext(Vt),p=d.useRef({disabled:e}),g=d.useRef(!1),x=d.useRef(null),m=d.useRef(null),{disabled:C,updateMeasurementsFor:b,timeout:w}={...Di,...o},S=Rt(b??n),N=d.useCallback(()=>{if(!g.current){g.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{f(Array.isArray(S.current)?S.current:[S.current]),m.current=null},w)},[w]),R=qt({callback:N,disabled:C||!c}),P=d.useCallback((k,I)=>{R&&(I&&(R.unobserve(I),g.current=!1),k&&R.observe(k))},[R]),[A,T]=$t(P),E=Rt(r);return d.useEffect(()=>{!R||!A.current||(R.disconnect(),g.current=!1,R.observe(A.current))},[A,R]),d.useEffect(()=>(l({type:V.RegisterDroppable,element:{id:n,key:a,disabled:e,node:A,rect:x,data:E}}),()=>l({type:V.UnregisterDroppable,key:a,id:n})),[n]),d.useEffect(()=>{e!==p.current.disabled&&(l({type:V.SetDroppableDisabled,id:n,key:a,disabled:e}),p.current.disabled=e)},[n,a,e,l]),{active:c,rect:x,isOver:(h==null?void 0:h.id)===n,node:A,over:h,setNodeRef:T}}function Nt(t,r,e){const n=t.slice();return n.splice(e<0?n.length+e:e,0,n.splice(r,1)[0]),n}function Ni(t,r){return t.reduce((e,n,o)=>{const a=r.get(n);return a&&(e[o]=a),e},Array(t.length))}function Tt(t){return t!==null&&t>=0}function Ri(t,r){if(t===r)return!0;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==r[e])return!1;return!0}function Ei(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Or=t=>{let{rects:r,activeIndex:e,overIndex:n,index:o}=t;const a=Nt(r,n,e),c=r[o],l=a[o];return!l||!c?null:{x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height}},zt={scaleX:1,scaleY:1},Sn=t=>{var r;let{activeIndex:e,activeNodeRect:n,index:o,rects:a,overIndex:c}=t;const l=(r=a[e])!=null?r:n;if(!l)return null;if(o===e){const f=a[c];return f?{x:0,y:e<c?f.top+f.height-(l.top+l.height):f.top-l.top,...zt}:null}const h=Ii(a,o,e);return o>e&&o<=c?{x:0,y:-l.height-h,...zt}:o<e&&o>=c?{x:0,y:l.height+h,...zt}:{x:0,y:0,...zt}};function Ii(t,r,e){const n=t[r],o=t[r-1],a=t[r+1];return n?e<r?o?n.top-(o.top+o.height):a?a.top-(n.top+n.height):0:a?a.top-(n.top+n.height):o?n.top-(o.top+o.height):0:0}const qn="Sortable",Vn=be.createContext({activeIndex:-1,containerId:qn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Or,disabled:{draggable:!1,droppable:!1}});function ur(t){let{children:r,id:e,items:n,strategy:o=Or,disabled:a=!1}=t;const{active:c,dragOverlay:l,droppableRects:h,over:f,measureDroppableContainers:p}=Ci(),g=Pt(qn,e),x=l.rect!==null,m=d.useMemo(()=>n.map(T=>typeof T=="object"&&"id"in T?T.id:T),[n]),C=c!=null,b=c?m.indexOf(c.id):-1,w=f?m.indexOf(f.id):-1,S=d.useRef(m),N=!Ri(m,S.current),R=w!==-1&&b===-1||N,P=Ei(a);$e(()=>{N&&C&&p(m)},[N,m,C,p]),d.useEffect(()=>{S.current=m},[m]);const A=d.useMemo(()=>({activeIndex:b,containerId:g,disabled:P,disableTransforms:R,items:m,overIndex:w,useDragOverlay:x,sortedRects:Ni(m,h),strategy:o}),[b,g,P.draggable,P.droppable,R,m,w,h,x,o]);return be.createElement(Vn.Provider,{value:A},r)}const ki=t=>{let{id:r,items:e,activeIndex:n,overIndex:o}=t;return Nt(e,n,o).indexOf(r)},Mi=t=>{let{containerId:r,isSorting:e,wasDragging:n,index:o,items:a,newIndex:c,previousItems:l,previousContainerId:h,transition:f}=t;return!f||!n||l!==a&&o===c?!1:e?!0:c!==o&&r===h},Pi={duration:200,easing:"ease"},Kn="transform",Ai=st.Transition.toString({property:Kn,duration:0,easing:"linear"}),Ti={roleDescription:"sortable"};function zi(t){let{disabled:r,index:e,node:n,rect:o}=t;const[a,c]=d.useState(null),l=d.useRef(e);return $e(()=>{if(!r&&e!==l.current&&n.current){const h=o.current;if(h){const f=gt(n.current,{ignoreTransform:!0}),p={x:h.left-f.left,y:h.top-f.top,scaleX:h.width/f.width,scaleY:h.height/f.height};(p.x||p.y)&&c(p)}}e!==l.current&&(l.current=e)},[r,e,n,o]),d.useEffect(()=>{a&&c(null)},[a]),a}function _r(t){let{animateLayoutChanges:r=Mi,attributes:e,disabled:n,data:o,getNewIndex:a=ki,id:c,strategy:l,resizeObserverConfig:h,transition:f=Pi}=t;const{items:p,containerId:g,activeIndex:x,disabled:m,disableTransforms:C,sortedRects:b,overIndex:w,useDragOverlay:S,strategy:N}=d.useContext(Vn),R=Li(n,m),P=p.indexOf(c),A=d.useMemo(()=>({sortable:{containerId:g,index:P,items:p},...o}),[g,o,P,p]),T=d.useMemo(()=>p.slice(p.indexOf(c)),[p,c]),{rect:E,node:k,isOver:I,setNodeRef:$}=ji({id:c,data:A,disabled:R.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...h}}),{active:z,activatorEvent:K,activeNodeRect:M,attributes:U,setNodeRef:Ue,listeners:Re,isDragging:B,over:He,setActivatorNodeRef:j,transform:se}=wi({id:c,data:A,attributes:{...Ti,...e},disabled:R.draggable}),ne=os($,Ue),J=!!z,Te=J&&!C&&Tt(x)&&Tt(w),ze=!S&&B,Qe=ze&&Te?se:null,fe=Te?Qe??(l??N)({rects:b,activeNodeRect:M,activeIndex:x,overIndex:w,index:P}):null,Q=Tt(x)&&Tt(w)?a({id:c,items:p,activeIndex:x,overIndex:w}):P,me=z==null?void 0:z.id,_=d.useRef({activeId:me,items:p,newIndex:Q,containerId:g}),ve=p!==_.current.items,we=r({active:z,containerId:g,isDragging:B,isSorting:J,id:c,index:P,items:p,newIndex:_.current.newIndex,previousItems:_.current.items,previousContainerId:_.current.containerId,transition:f,wasDragging:_.current.activeId!=null}),Y=zi({disabled:!we,index:P,node:k,rect:E});return d.useEffect(()=>{J&&_.current.newIndex!==Q&&(_.current.newIndex=Q),g!==_.current.containerId&&(_.current.containerId=g),p!==_.current.items&&(_.current.items=p)},[J,Q,g,p]),d.useEffect(()=>{if(me===_.current.activeId)return;if(me&&!_.current.activeId){_.current.activeId=me;return}const ee=setTimeout(()=>{_.current.activeId=me},50);return()=>clearTimeout(ee)},[me]),{active:z,activeIndex:x,attributes:U,data:A,rect:E,index:P,newIndex:Q,items:p,isOver:I,isSorting:J,isDragging:B,listeners:Re,node:k,overIndex:w,over:He,setNodeRef:ne,setActivatorNodeRef:j,setDroppableNodeRef:$,setDraggableNodeRef:Ue,transform:Y??fe,transition:Ee()};function Ee(){if(Y||ve&&_.current.newIndex===P)return Ai;if(!(ze&&!Pr(K)||!f)&&(J||we))return st.Transition.toString({...f,property:Kn})}}function Li(t,r){var e,n;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(e=t==null?void 0:t.draggable)!=null?e:r.draggable,droppable:(n=t==null?void 0:t.droppable)!=null?n:r.droppable}}function Yt(t){if(!t)return!1;const r=t.data.current;return!!(r&&"sortable"in r&&typeof r.sortable=="object"&&"containerId"in r.sortable&&"items"in r.sortable&&"index"in r.sortable)}const Oi=[L.Down,L.Right,L.Up,L.Left],_i=(t,r)=>{let{context:{active:e,collisionRect:n,droppableRects:o,droppableContainers:a,over:c,scrollableAncestors:l}}=r;if(Oi.includes(t.code)){if(t.preventDefault(),!e||!n)return;const h=[];a.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const x=o.get(g.id);if(x)switch(t.code){case L.Down:n.top<x.top&&h.push(g);break;case L.Up:n.top>x.top&&h.push(g);break;case L.Left:n.left>x.left&&h.push(g);break;case L.Right:n.left<x.left&&h.push(g);break}});const f=ys({collisionRect:n,droppableRects:o,droppableContainers:h});let p=Ln(f,"id");if(p===(c==null?void 0:c.id)&&f.length>1&&(p=f[1].id),p!=null){const g=a.get(e.id),x=a.get(p),m=x?o.get(x.id):null,C=x==null?void 0:x.node.current;if(C&&m&&g&&x){const w=Gt(C).some((T,E)=>l[E]!==T),S=Jn(g,x),N=Fi(g,x),R=w||!S?{x:0,y:0}:{x:N?n.width-m.width:0,y:N?n.height-m.height:0},P={x:m.left,y:m.top};return R.x&&R.y?P:Et(P,R)}}}};function Jn(t,r){return!Yt(t)||!Yt(r)?!1:t.data.current.sortable.containerId===r.data.current.sortable.containerId}function Fi(t,r){return!Yt(t)||!Yt(r)||!Jn(t,r)?!1:t.data.current.sortable.index<r.data.current.sortable.index}const Nr=t=>{if(!t)return"";const r=t.split(",").map(l=>l.trim());if(r.length===0)return"";if(r.length===1)return r[0]==="하이엔드"?"하이":r[0];const e=["알뜰","기본","고급","하이엔드"],n=r.sort((l,h)=>e.indexOf(l)-e.indexOf(h)),o=n[0],a=n[n.length-1];return`${o}-${a==="하이엔드"?"하이":a}`},Rr=t=>{if(!t)return"";const r=t.split(",").map(e=>e.trim());return r.includes("하이엔드")?"bg-purple-100 text-purple-700":r.includes("고급")?"bg-blue-100 text-blue-700":r.includes("기본")?"bg-green-100 text-green-700":r.includes("알뜰")?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"},Wi=({id:t,fileData:r,index:e,onDelete:n,onFileClick:o})=>{const{attributes:a,listeners:c,setNodeRef:l,transform:h,transition:f,isDragging:p}=_r({id:t}),g={transform:st.Transform.toString(h),transition:f,opacity:p?.5:1,zIndex:p?100:1},x=r.includes("|")&&!r.startsWith("data:image"),m=x?r.split("|")[0]:"",C=x?r.split("|")[1]:r,b=C.startsWith("data:image"),w=C.startsWith("data:application/pdf"),S=C.includes("wordprocessingml")||C.includes("msword"),N=C.includes("spreadsheetml")||C.includes("ms-excel"),R=C.includes("presentationml")||C.includes("ms-powerpoint"),P=C.includes("application/zip"),A=C.startsWith("data:text/plain"),T=m.endsWith(".hwp")||C.includes("x-hwp"),E=m.toLowerCase().endsWith(".dwg")||C.includes("autocad")||C.includes("vnd.dwg"),k=m.toLowerCase().endsWith(".dxf"),I=m.toLowerCase().endsWith(".skp"),$=m.toLowerCase().endsWith(".3dm"),K=w?{color:"text-red-600",label:"PDF"}:S?{color:"text-blue-600",label:"DOC"}:N?{color:"text-green-600",label:"XLS"}:R?{color:"text-orange-600",label:"PPT"}:P?{color:"text-yellow-600",label:"ZIP"}:A?{color:"text-gray-600",label:"TXT"}:T?{color:"text-sky-600",label:"HWP"}:E?{color:"text-purple-600",label:"DWG"}:k?{color:"text-violet-600",label:"DXF"}:I?{color:"text-amber-600",label:"SKP"}:$?{color:"text-teal-600",label:"3DM"}:{color:"text-gray-600",label:"FILE"};return i.jsxs("div",{ref:l,style:g,className:"relative group",children:[i.jsx("div",{...a,...c,className:"absolute top-2 left-2 p-1.5 bg-gray-700 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing z-10 touch-none",title:"드래그하여 순서 변경",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),i.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-gray-200 hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>o(C,m,b,w),children:b?i.jsx("img",{src:C,alt:`상세 이미지 ${e+1}`,className:"w-full h-full object-contain"}):i.jsxs("div",{className:`w-full h-full flex flex-col items-center justify-center ${K.color}`,children:[i.jsxs("svg",{className:"h-12 w-12 mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"}),i.jsx("path",{d:"M14 2v6h6"})]}),i.jsx("span",{className:"text-xs font-bold",children:K.label}),m&&i.jsx("span",{className:"text-xs text-gray-500 mt-1 px-2 truncate max-w-full",children:m.length>15?m.slice(0,12)+"...":m})]})}),i.jsx("button",{onClick:M=>{M.stopPropagation(),n(e)},className:"absolute top-2 right-2 p-1.5 bg-gray-700 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-gray-800 z-10",children:i.jsx(Ut,{className:"h-4 w-4"})})]})},$i=({item:t,onEdit:r,onDelete:e,onImageClick:n})=>{const{attributes:o,listeners:a,setNodeRef:c,transform:l,transition:h,isDragging:f}=_r({id:t.id}),p={transform:st.Transform.toString(l),transition:h,opacity:f?.5:1};return i.jsxs("div",{ref:c,style:p,...o,...a,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 overflow-hidden flex flex-col group relative cursor-move",children:[i.jsxs("div",{className:"w-full aspect-square bg-gray-100 flex-shrink-0 relative",children:[t.image_url?i.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-contain block cursor-pointer",loading:"lazy",onClick:g=>{g.stopPropagation(),n(t)},onPointerDown:g=>g.stopPropagation()}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"이미지 없음"}),i.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:g=>{g.stopPropagation(),r(t)},onPointerDown:g=>g.stopPropagation(),className:"p-1.5 bg-white text-gray-700 hover:bg-gray-100 rounded-md shadow-md transition-colors",title:"수정",children:i.jsx(Er,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:g=>{g.stopPropagation(),e(t.id)},onPointerDown:g=>g.stopPropagation(),className:"p-1.5 bg-white text-rose-600 hover:bg-rose-50 rounded-md shadow-md transition-colors",title:"삭제",children:i.jsx(Ut,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"p-2 pt-1.5 flex flex-col flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-1",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:t.category}),t.brand&&i.jsx("span",{className:"text-xs text-gray-500",children:t.brand})]}),t.grade&&i.jsx("span",{className:`hidden md:inline-block px-1 py-0.5 text-[10px] rounded ${Rr(t.grade)}`,children:Nr(t.grade)})]}),i.jsxs("div",{className:"flex items-baseline justify-between gap-1 mt-auto",children:[i.jsx("div",{className:"flex items-baseline gap-1 min-w-0",children:i.jsx("h3",{className:"font-semibold text-xs text-gray-900 truncate",children:t.name})}),t.price&&i.jsxs("span",{className:"hidden md:inline text-xs text-gray-900 font-medium flex-shrink-0",children:[t.price,"원"]})]})]})]})},Bi=({category:t,onRemove:r,onEdit:e})=>{const{attributes:n,listeners:o,setNodeRef:a,transform:c,transition:l,isDragging:h}=_r({id:t}),f={transform:st.Transform.toString(c),transition:l,opacity:h?.5:1};return i.jsxs("div",{ref:a,style:f,className:"flex items-center justify-between p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 bg-white",children:[i.jsx("div",{className:"flex items-center gap-2 flex-1 cursor-grab active:cursor-grabbing",...n,...o,children:i.jsx("span",{className:"text-sm text-gray-900",children:t})}),t!=="전체"&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:p=>{p.stopPropagation(),p.preventDefault(),e(t)},className:"text-gray-600 hover:text-gray-800 transition-colors p-1",title:"수정",type:"button",children:i.jsx(Er,{className:"h-4 w-4"})}),i.jsx("button",{onClick:p=>{p.stopPropagation(),p.preventDefault(),r(t)},className:"text-red-500 hover:text-red-700 transition-colors p-1",title:"삭제",type:"button",children:i.jsx(Ut,{className:"h-4 w-4"})})]})]})},Vi=()=>{var Kr;const{user:t}=Co(),r=Do(),e=(t==null?void 0:t.name)==="안팀",{libraryItems:n,libraryLoaded:o,categories:a,categoriesLoaded:c,getLibraryItems:l,loadProjectItems:h,preloadLibrary:f,invalidateLibrary:p,invalidateProject:g,addItemToCache:x,updateItemInCache:m,removeItemFromCache:C}=So(),[b,w]=d.useState(()=>e||localStorage.getItem("specBook_lastProject")?"project":"library"),[S,N]=d.useState([]),[R,P]=d.useState([]),[A,T]=d.useState([]),[E,k]=d.useState([]),[I,$]=d.useState("전체"),[z,K]=d.useState([]),[M,U]=d.useState(()=>{const s=localStorage.getItem("specBook_lastProject");return s?Number(s):null}),[Ue,Re]=d.useState(!1),[B,He]=d.useState(null),[j,se]=d.useState({name:"",category:"",brand:"",price:"",grades:["기본"],imageData:null}),[ne,J]=d.useState([]),[Te,ze]=d.useState(!1),[Qe,he]=d.useState(!1),[fe,Q]=d.useState([]),[me,_]=d.useState(""),[ve,we]=d.useState(!1),[Y,Ee]=d.useState(null),[ee,Ie]=d.useState([]),[et,Fe]=d.useState(null),[We,Ce]=d.useState(0),[ie,Ze]=d.useState([]),[Kt,it]=d.useState(!1),[Jt,at]=d.useState(!1),[Z,H]=d.useState(1),[ae,ce]=d.useState({x:0,y:0}),[ke,ct]=d.useState(!1),[lt,mt]=d.useState({x:0,y:0}),[tt,Be]=d.useState(null),[vt,Xe]=d.useState(null),[dt,Ge]=d.useState(!1),[Qt,G]=d.useState(0),[pe,oe]=d.useState(!1),[Le,le]=d.useState(null),[de,ge]=d.useState(!1),[Se,X]=d.useState(null),[Me,De]=d.useState(null),[je,qe]=d.useState(!1),Ve=d.useRef(null),Oe=d.useRef(null),Ne=d.useRef(null),Ke=d.useRef([]),Pe=d.useRef(!0),[Fr,xt]=d.useState(null),[er,bt]=d.useState(!1),tr=xs(dn(Lr),dn(Tr,{coordinateGetter:_i})),Wr=(s,u)=>{const v=s.clientX-u.clientX,y=s.clientY-u.clientY;return Math.sqrt(v*v+y*y)},$r=(s,u)=>({x:(s.clientX+u.clientX)/2,y:(s.clientY+u.clientY)/2});d.useEffect(()=>(Pe.current=!0,()=>{Pe.current=!1}),[]),d.useEffect(()=>{Qn(),yt()},[c,a,o,n]),d.useEffect(()=>{eo()},[r]),d.useEffect(()=>{nt()},[b,I,M,ne,o,n]),d.useEffect(()=>{b==="project"&&M&&rt()},[b,M]),d.useEffect(()=>{M&&localStorage.setItem("specBook_lastProject",String(M))},[M]);const Qn=async()=>{if(c&&a.length>0){k(a);return}try{const s=await q.get("/specbook/categories");k(s.data)}catch(s){console.error("카테고리 로드 실패:",s)}},eo=async()=>{try{const s=r.map(v=>({id:v.id,title:v.name}));console.log("프로젝트 목록 로드됨:",s.length,"개",s),K(s);const u=localStorage.getItem("specBook_lastProject");if(u&&s.length>0){const v=Number(u);if(s.find(D=>D.id===v)){U(v),w("project");return}}e&&s.length>0&&!M&&(U(s[0].id),w("project"))}catch(s){console.error("프로젝트 로드 실패:",s)}},yt=async()=>{if(o&&n.length>0){Pe.current&&P(n);return}try{const s=await q.get("/specbook/library/meta");Pe.current&&P(s.data)}catch(s){console.error("전체 라이브러리 아이템 로드 실패:",s)}},rt=async()=>{if(M)try{const s=await q.get(`/specbook/project/${M}/meta`);T(s.data)}catch(s){console.error("전체 프로젝트 아이템 로드 실패:",s)}},nt=async()=>{try{if(b==="library"){if(o&&n.length>0){const v=l(I!=="전체"?I:void 0,ne.length>0?ne:void 0);if(Pe.current){const D=v.slice(0,20);N(D),Re(!1),v.length>20&&requestAnimationFrame(()=>{Pe.current&&N(v)})}return}S.length===0&&Re(!0);const s={};I!=="전체"&&(s.category=I),ne.length>0&&(s.grades=ne.join(","));const u=await q.get("/specbook/library/meta",{params:s});if(Pe.current){const v=u.data,y=20,D=v.slice(0,y);N(D),Re(!1),v.length>y&&requestAnimationFrame(()=>{Pe.current&&N(v)})}}else{if(!M){N([]),Re(!1);return}S.length===0&&Re(!0);const s={};I!=="전체"&&(s.category=I),ne.length>0&&(s.grades=ne.join(","));const u=await q.get(`/specbook/project/${M}/meta`,{params:s});if(Pe.current){const v=u.data,y=20,D=v.slice(0,y);N(D),Re(!1),v.length>y&&requestAnimationFrame(()=>{Pe.current&&N(v)})}}}catch(s){console.error("스펙북 아이템 로드 실패:",s),Pe.current&&F.error("스펙북 아이템을 불러오는데 실패했습니다")}finally{Pe.current&&Re(!1)}},to=s=>b==="library"?s==="전체"?R.length:R.filter(u=>u.category===s).length:s==="전체"?A.length:A.filter(u=>u.category===s).length,ro=s=>{s.preventDefault(),ze(!1);const u=s.dataTransfer.files[0];if(u&&u.type.startsWith("image/")){const v=new FileReader;v.onload=y=>{var D;xt((D=y.target)==null?void 0:D.result),bt(!0)},v.readAsDataURL(u)}},Br=s=>{var v;if(er||ve)return;const u=(v=s.clipboardData)==null?void 0:v.items;if(u){for(let y=0;y<u.length;y++)if(u[y].type.indexOf("image")!==-1){const D=u[y].getAsFile();if(D){const O=new FileReader;O.onload=W=>{var ue;xt((ue=W.target)==null?void 0:ue.result),bt(!0)},O.readAsDataURL(D)}}}};d.useEffect(()=>(document.addEventListener("paste",Br),()=>document.removeEventListener("paste",Br)),[j,er,ve]);const no=s=>{const u=s.replace(/[^\d]/g,"");return u?u.replace(/\B(?=(\d{3})+(?!\d))/g,","):""},oo=s=>{const u=no(s.target.value);se({...j,price:u})},so=async s=>{var u,v;if(s.preventDefault(),!je){if(!j.name||!j.category){F.error("제품명과 카테고리는 필수입니다");return}if(j.grades.length===0){F.error("최소 하나의 등급을 선택해주세요");return}qe(!0);try{const y=j.grades.join(",");if(B){const D={name:j.name,category:j.category,brand:j.brand,price:j.price,grade:y,description:"",imageData:j.imageData,projectId:b==="project"?M:null,isLibrary:b==="library"};await q.put(`/specbook/base64/${B.id}`,D),F.success("스펙북 아이템이 수정되었습니다")}else if(b==="project"&&M){const D={name:j.name,category:j.category,brand:j.brand,price:j.price,grade:y,description:"",imageData:j.imageData,projectId:null,isLibrary:!0};await q.post("/specbook/base64",D);const O={name:j.name,category:j.category,brand:j.brand,price:j.price,grade:y,description:"",imageData:j.imageData,projectId:M,isLibrary:!1};await q.post("/specbook/base64",O),F.success("스펙북 아이템이 라이브러리와 프로젝트에 추가되었습니다")}else{const D={name:j.name,category:j.category,brand:j.brand,price:j.price,grade:y,description:"",imageData:j.imageData,projectId:null,isLibrary:!0};await q.post("/specbook/base64",D),F.success("스펙북 아이템이 추가되었습니다")}He(null),se({name:"",category:I!=="전체"?I:"",brand:"",price:"",grades:["기본"],imageData:null}),nt(),(b==="library"||b==="project"&&!B)&&yt(),b==="project"&&M&&rt()}catch(y){console.error("스펙북 아이템 저장 실패:",y),F.error(((v=(u=y.response)==null?void 0:u.data)==null?void 0:v.error)||"저장에 실패했습니다")}finally{qe(!1)}}},Xr=s=>{He(s);const u=s.grade?s.grade.includes(",")?s.grade.split(","):[s.grade]:["기본"];se({name:s.name,category:s.category,brand:s.brand,price:s.price,grades:u,imageData:null}),window.scrollTo({top:0,behavior:"smooth"})},Yr=async s=>{if(confirm("정말 삭제하시겠습니까?"))try{await q.delete(`/specbook/${s}`),F.success("스펙북 아이템이 삭제되었습니다"),nt(),b==="library"?yt():b==="project"&&M&&rt()}catch(u){console.error("삭제 실패:",u),F.error("삭제에 실패했습니다")}},io=()=>{He(null),se({name:"",category:I!=="전체"?I:"",brand:"",price:"",grades:["기본"],imageData:null})},ao=s=>{se({...j,imageData:s}),bt(!1),xt(null)},co=()=>{bt(!1),xt(null)},rr=s=>{Ee(s);const u=s.sub_images||[];Ie(u),Ke.current=u,we(!0)},lo=s=>{const u=Array.from(s.target.files||[]);nr(u)},nr=s=>{const u=["image/","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/zip","application/x-hwp","text/plain","application/acad","application/x-autocad","image/vnd.dwg"],v=[".hwp",".dwg",".skp",".3dm",".dxf"];s.forEach(y=>{const D=y.name.toLowerCase().slice(y.name.lastIndexOf("."));if(u.some(W=>W.endsWith("/")?y.type.startsWith(W):y.type===W)||v.includes(D)){const W=new FileReader;W.onload=ue=>{var Jr;const Ye=(Jr=ue.target)==null?void 0:Jr.result,or=y.type.startsWith("image/")?Ye:`${y.name}|${Ye}`;Ie(yo=>[...yo,or])},W.readAsDataURL(y)}else F.error(`지원하지 않는 파일 형식입니다: ${y.name}`)})},uo=s=>{s.preventDefault(),s.stopPropagation(),it(!1);const u=Array.from(s.dataTransfer.files);nr(u)},Ur=s=>{var y;if(!ve)return;const u=(y=s.clipboardData)==null?void 0:y.items;if(!u)return;const v=[];for(let D=0;D<u.length;D++)if(u[D].type.indexOf("image")!==-1){const O=u[D].getAsFile();O&&v.push(O)}v.length>0&&(nr(v),F.success(`${v.length}개의 이미지가 추가되었습니다`))};d.useEffect(()=>{if(ve)return document.addEventListener("paste",Ur),()=>document.removeEventListener("paste",Ur)},[ve]),d.useEffect(()=>{if(!(!Y||!ve||!(JSON.stringify(ee)!==JSON.stringify(Ke.current))))return Ne.current&&clearTimeout(Ne.current),Ne.current=setTimeout(async()=>{at(!0);try{await q.put(`/specbook/${Y.id}/sub-images`,{sub_images:ee}),Ke.current=ee,nt(),b==="library"?yt():b==="project"&&M&&rt()}catch(u){console.error("Sub 이미지 자동 저장 실패:",u),F.error("상세 이미지 저장에 실패했습니다")}finally{at(!1)}},1e3),()=>{Ne.current&&clearTimeout(Ne.current)}},[ee,Y,ve]);const ho=s=>{Ie(u=>u.filter((v,y)=>y!==s))},fo=s=>{const{active:u,over:v}=s;v&&u.id!==v.id&&Ie(y=>{const D=y.findIndex((W,ue)=>`subimg-${ue}`===u.id),O=y.findIndex((W,ue)=>`subimg-${ue}`===v.id);return Nt(y,D,O)})},po=(s,u,v,y)=>{if(v){const D=[];Y!=null&&Y.image_url&&D.push(Y.image_url),ee.forEach(W=>{const Ye=W.includes("|")&&!W.startsWith("data:image")?W.split("|")[1]:W;Ye.startsWith("data:image")&&D.push(Ye)}),Ze(D);const O=D.indexOf(s);Ce(O>=0?O:0),Fe(s)}else if(y){const D=window.open();D&&D.document.write(`
          <html>
            <head><title>${u||"PDF 파일"}</title></head>
            <body style="margin:0;padding:0;overflow:hidden;">
              <iframe src="${s}" style="width:100%;height:100vh;border:none;"></iframe>
            </body>
          </html>
        `)}else{const D=document.createElement("a");D.href=s,D.download=u||"file",D.click()}},Hr=()=>{if(ie.length<=1)return;const s=We>0?We-1:ie.length-1;Ce(s),Fe(ie[s]),H(1),ce({x:0,y:0})},Zr=()=>{if(ie.length<=1)return;const s=We<ie.length-1?We+1:0;Ce(s),Fe(ie[s]),H(1),ce({x:0,y:0})};d.useEffect(()=>{if(!et)return;const s=u=>{u.key==="ArrowLeft"?(u.preventDefault(),Hr()):u.key==="ArrowRight"?(u.preventDefault(),Zr()):u.key==="Escape"&&(u.preventDefault(),Fe(null),H(1),ce({x:0,y:0}),Ze([]))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[et,We,ie]);const Gr=async()=>{if(Ne.current&&clearTimeout(Ne.current),JSON.stringify(ee)!==JSON.stringify(Ke.current)&&Y){at(!0);try{await q.put(`/specbook/${Y.id}/sub-images`,{sub_images:ee}),nt(),b==="library"?yt():b==="project"&&M&&rt()}catch(u){console.error("Sub 이미지 저장 실패:",u),F.error("파일 저장에 실패했습니다")}}we(!1),Ee(null),Ie([]),at(!1)},go=async s=>{const{active:u,over:v}=s;if(!v||u.id===v.id)return;const y=S.findIndex(O=>O.id===u.id),D=S.findIndex(O=>O.id===v.id);if(y!==-1&&D!==-1){const O=Nt(S,y,D);N(O);try{await q.put("/specbook/reorder",{items:O.map((W,ue)=>({id:W.id,display_order:ue}))}),F.success("아이템 순서가 업데이트되었습니다")}catch(W){console.error("순서 업데이트 실패:",W),F.error("순서 업데이트 실패"),nt()}}},mo=()=>{Q([...E]),he(!0)},qr=()=>{he(!1),_("")},Vr=async()=>{if(!me.trim()){F.error("카테고리 이름을 입력하세요");return}if(fe.includes(me.trim())){F.error("이미 존재하는 카테고리입니다");return}const s=[...fe,me.trim()];Q(s),_("");try{await q.put("/specbook/categories",{categories:s}),k(s),F.success("카테고리가 추가되었습니다")}catch(u){console.error("카테고리 추가 저장 실패:",u),F.error("카테고리 추가 저장에 실패했습니다"),Q(E)}},vo=async s=>{if(s==="전체"){F.error("전체 카테고리는 수정할 수 없습니다");return}const u=window.prompt("새 카테고리 이름을 입력하세요",s);if(!u||!u.trim()||u.trim()===s)return;if(fe.includes(u.trim())){F.error("이미 존재하는 카테고리입니다");return}const v=fe.map(y=>y===s?u.trim():y);Q(v);try{await q.put("/specbook/categories",{categories:v}),k(v),F.success("카테고리 이름이 변경되었습니다")}catch(y){console.error("카테고리 수정 저장 실패:",y),F.error("카테고리 수정 저장에 실패했습니다"),Q(E)}},xo=async s=>{if(s==="전체"){F.error("전체 카테고리는 삭제할 수 없습니다");return}const u=fe.filter(v=>v!==s);Q(u);try{await q.put("/specbook/categories",{categories:u}),k(u),F.success("카테고리가 삭제되었습니다")}catch(v){console.error("카테고리 삭제 저장 실패:",v),F.error("카테고리 삭제 저장에 실패했습니다"),Q(E)}},bo=async s=>{const{active:u,over:v}=s;if(v&&u.id!==v.id){const y=fe.indexOf(u.id),D=fe.indexOf(v.id),O=Nt(fe,y,D);Q(O);try{await q.put("/specbook/categories",{categories:O}),k(O),F.success("카테고리 순서가 변경되었습니다")}catch(W){console.error("카테고리 순서 저장 실패:",W),F.error("카테고리 순서 저장에 실패했습니다"),Q(E)}}};return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-120px)] bg-gray-50",children:[i.jsxs("div",{className:"specbook-container flex-1 flex flex-col md:flex-row gap-4 md:gap-6 overflow-hidden",children:[i.jsxs("div",{className:"specbook-sidebar hidden md:flex flex-col gap-4 w-80 lg:w-96 flex-shrink-0",children:[i.jsx("div",{className:"specbook-form bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden flex flex-col",children:i.jsxs("form",{onSubmit:so,className:"flex flex-col pt-3",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 px-3",children:[i.jsxs("div",{onDragOver:s=>{s.preventDefault(),ze(!0)},onDragLeave:()=>ze(!1),onDrop:ro,className:`w-full sm:w-48 aspect-square flex-shrink-0 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer transition-colors ${Te?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>{var s;return(s=Ve.current)==null?void 0:s.click()},children:[j.imageData||B!=null&&B.image_url?i.jsx("img",{src:j.imageData||(B==null?void 0:B.image_url)||"",alt:"Preview",className:"w-full h-full object-contain rounded-lg"}):i.jsxs("div",{className:"text-center",children:[i.jsx(Ro,{className:"w-8 h-8 mx-auto mb-1 text-gray-400"}),i.jsx("p",{className:"text-sm text-gray-500",children:"이미지"})]}),i.jsx("input",{ref:Ve,type:"file",accept:"image/*",onChange:s=>{var v;const u=(v=s.target.files)==null?void 0:v[0];if(u){const y=new FileReader;y.onload=D=>{var O;xt((O=D.target)==null?void 0:O.result),bt(!0)},y.readAsDataURL(u)}s.target.value=""},className:"hidden"})]}),i.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[i.jsxs("div",{className:"space-y-1.5",children:[i.jsxs("select",{value:j.category,onChange:s=>se({...j,category:s.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",required:!0,children:[i.jsx("option",{value:"",children:"카테고리"}),E.filter(s=>s!=="전체").map(s=>i.jsx("option",{value:s,children:s},s))]}),i.jsx("input",{type:"text",value:j.brand,onChange:s=>se({...j,brand:s.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",placeholder:"브랜드"}),i.jsx("input",{type:"text",value:j.name,onChange:s=>se({...j,name:s.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",placeholder:"제품명",required:!0}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:j.price,onChange:oo,className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500 pr-8",placeholder:"가격"}),i.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"원"})]})]}),i.jsx("div",{className:"flex gap-1",children:["알뜰","기본","고급","하이"].map((s,u)=>{const v=u===3?"하이엔드":s;return i.jsx("button",{type:"button",onClick:()=>{j.grades.includes(v)?se({...j,grades:j.grades.filter(y=>y!==v)}):se({...j,grades:[...j.grades,v]})},className:`flex-1 px-1 py-1 text-xs font-medium rounded transition-colors ${j.grades.includes(v)?v==="하이엔드"?"bg-violet-500 text-white":v==="고급"?"bg-sky-500 text-white":v==="기본"?"bg-emerald-500 text-white":"bg-amber-400 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},v)})}),i.jsxs("div",{className:"flex gap-1.5 mt-3",children:[i.jsx("button",{type:"submit",disabled:je,className:"flex-1 px-3 py-1.5 text-xs bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:je?"저장 중...":B?"수정":"추가"}),B&&i.jsx("button",{type:"button",onClick:io,className:"px-3 py-1.5 text-xs bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"취소"})]})]})]}),i.jsx("div",{className:"p-3 pt-0"})]})}),i.jsx("div",{className:"specbook-grade-filter bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-900 mr-3",children:"등급 필터"}),i.jsxs("div",{className:"flex gap-2 flex-1",children:[["알뜰","기본","고급","하이엔드"].map(s=>i.jsx("button",{onClick:()=>{ne.includes(s)?J(ne.filter(u=>u!==s)):J([...ne,s])},className:`px-3 py-1.5 rounded text-xs font-medium transition-colors whitespace-nowrap ${ne.includes(s)?s==="하이엔드"?"bg-violet-500 text-white":s==="고급"?"bg-sky-500 text-white":s==="기본"?"bg-emerald-500 text-white":"bg-amber-400 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},s)),ne.length>0&&i.jsx("button",{onClick:()=>J([]),className:"px-3 py-1.5 rounded text-xs font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors whitespace-nowrap",children:"초기화"})]})]})}),i.jsxs("div",{className:"specbook-category bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:["카테고리",b==="project"&&M&&i.jsxs("span",{className:"ml-1 text-gray-600",children:["(",(Kr=z.find(s=>s.id===M))==null?void 0:Kr.title,")"]})]}),i.jsx("button",{onClick:mo,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"카테고리 편집",children:i.jsx(Eo,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:E.map(s=>{const u=to(s),v=(b==="library"||b==="project"&&M)&&u>0;return i.jsxs("button",{onClick:()=>$(s),className:`px-2 py-1.5 rounded text-xs font-medium transition-colors ${I===s?"bg-gray-800 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[s,v&&i.jsxs("span",{className:`ml-1 ${I===s?"text-gray-300":"text-gray-400"}`,children:["(",u,")"]})]},s)})})]})]}),b==="library"?i.jsxs("div",{className:"specbook-main flex-1 flex flex-col overflow-hidden pr-4 pt-3",children:[i.jsx("div",{className:"mb-4 px-4",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 lg:gap-4",children:[!e&&i.jsx("button",{onClick:()=>{w("library"),U(null)},className:`col-span-1 lg:col-span-1 h-9 rounded-lg font-medium transition-colors text-xs md:text-sm flex items-center justify-center ${b==="library"?"bg-gray-800 text-white":"bg-gray-200 text-gray-700"}`,children:"스펙 라이브러리"}),i.jsxs("select",{value:M||"",onChange:s=>{s.target.value?(w("project"),U(Number(s.target.value))):e||(w("library"),U(null))},className:`specbook-header-project-select col-span-1 lg:col-span-1 ${e?"":"lg:col-start-4"} h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-xs md:text-sm px-1 md:px-2`,children:[!e&&i.jsx("option",{value:"",children:"프로젝트 선택"}),z.map(s=>i.jsx("option",{value:s.id,children:s.title},s.id))]})]})}),i.jsxs("div",{className:"specbook-content flex-1 flex flex-col md:flex-row overflow-hidden",children:[i.jsx("div",{className:"specbook-library w-full md:w-1/2 flex flex-col overflow-hidden pb-4 md:pr-3",children:i.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",children:Ue?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"text-gray-500",children:"로딩 중..."})}):S.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:"등록된 스펙북 아이템이 없습니다"}):i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:S.map(s=>i.jsxs("div",{draggable:!0,onDragStart:u=>{ge(!0),u.dataTransfer.setData("itemId",s.id.toString()),u.dataTransfer.effectAllowed="copy"},onDragEnd:()=>{ge(!1),X(null)},className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all border border-gray-200 overflow-hidden cursor-grab active:cursor-grabbing flex flex-col group relative",children:[i.jsx("div",{className:"w-full aspect-square bg-gray-100 relative",onMouseDown:u=>{X({x:u.clientX,y:u.clientY})},onClick:u=>{!de&&Se&&Math.sqrt(Math.pow(u.clientX-Se.x,2)+Math.pow(u.clientY-Se.y,2))<5&&rr(s),X(null)},children:s.image_url?i.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-contain pointer-events-none",loading:"lazy",draggable:!1}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs pointer-events-none",children:"이미지 없음"})}),i.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto",children:[i.jsx("button",{onClick:u=>{u.stopPropagation(),Xr(s)},onPointerDown:u=>u.stopPropagation(),className:"p-1.5 bg-white text-gray-700 hover:bg-gray-100 rounded-md shadow-md transition-colors cursor-pointer",title:"수정",children:i.jsx(Er,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:u=>{u.stopPropagation(),Yr(s.id)},onPointerDown:u=>u.stopPropagation(),className:"p-1.5 bg-white text-rose-600 hover:bg-rose-50 rounded-md shadow-md transition-colors cursor-pointer",title:"삭제",children:i.jsx(Ut,{className:"w-3.5 h-3.5"})})]}),i.jsxs("div",{className:"p-2 pt-1.5 flex flex-col flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-1",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:s.category}),s.brand&&i.jsx("span",{className:"text-xs text-gray-500",children:s.brand})]}),s.grade&&i.jsx("span",{className:`hidden md:inline-block px-1.5 py-0.5 text-xs rounded ${Rr(s.grade)}`,children:Nr(s.grade)})]}),i.jsxs("div",{className:"flex items-baseline justify-between gap-1 mt-auto",children:[i.jsx("div",{className:"flex items-baseline gap-1 min-w-0",children:i.jsx("h3",{className:"font-semibold text-xs text-gray-900 truncate",children:s.name})}),s.price&&i.jsxs("span",{className:"hidden md:inline text-xs text-gray-900 font-medium flex-shrink-0",children:[s.price,"원"]})]})]})]},s.id))})})}),i.jsx("div",{className:"hidden md:block w-px bg-gray-300 self-stretch"}),i.jsxs("div",{className:"specbook-drop-zone hidden md:flex w-1/2 flex-col overflow-hidden pl-3 pb-4",children:[i.jsx("div",{className:"specbook-drop-project-select hidden mb-2",children:i.jsxs("select",{value:M||"",onChange:s=>{s.target.value&&(w("project"),U(Number(s.target.value)))},className:"h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-sm px-3",children:[i.jsx("option",{value:"",children:"프로젝트 선택"}),z.map(s=>i.jsx("option",{value:s.id,children:s.title},s.id))]})}),i.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-300 transition-colors",onDragOver:s=>{s.preventDefault(),s.currentTarget.classList.add("bg-blue-50","border-blue-400")},onDragLeave:s=>{s.currentTarget.classList.remove("bg-blue-50","border-blue-400")},onDrop:s=>{s.preventDefault(),s.currentTarget.classList.remove("bg-blue-50","border-blue-400");const u=s.dataTransfer.getData("itemId");u&&(le(Number(u)),oe(!0))},children:i.jsxs("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:[i.jsx("span",{className:"specbook-drop-text-landscape",children:"좌측에서 아이템을 드래그하여 추가하세요"}),i.jsx("span",{className:"specbook-drop-text-portrait",children:"상단에서 아이템을 드래그하여 추가하세요"})]})})]})]})]}):i.jsxs("div",{className:"specbook-main flex-1 flex flex-col overflow-hidden pr-4 pt-3",children:[i.jsx("div",{className:"mb-4 px-4",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 lg:gap-4",children:[!e&&i.jsx("button",{onClick:()=>{w("library"),U(null)},className:"col-span-1 lg:col-span-1 h-9 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700 text-xs md:text-sm flex items-center justify-center",children:"스펙 라이브러리"}),i.jsxs("select",{value:M||"",onChange:s=>{s.target.value?(w("project"),U(Number(s.target.value))):e||(w("library"),U(null))},className:`specbook-header-project-select col-span-1 lg:col-span-1 ${e?"":"lg:col-start-4"} h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-xs md:text-sm px-1 md:px-2`,children:[!e&&i.jsx("option",{value:"",children:"프로젝트 선택"}),z.map(s=>i.jsx("option",{value:s.id,children:s.title},s.id))]})]})}),i.jsxs("div",{className:"specbook-content flex-1 flex flex-col md:flex-row overflow-hidden gap-4",children:[!e&&i.jsx("div",{className:"specbook-library hidden md:flex md:w-1/2 flex-col overflow-hidden pb-4 md:pr-3",children:i.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:R.filter(s=>I==="전체"||s.category===I).map(s=>i.jsxs("div",{draggable:!0,onDragStart:u=>{ge(!0),u.dataTransfer.setData("itemId",s.id.toString()),u.dataTransfer.effectAllowed="copy"},onDragEnd:()=>{ge(!1),X(null)},className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all border border-gray-200 overflow-hidden cursor-grab active:cursor-grabbing flex flex-col",children:[i.jsx("div",{className:"w-full aspect-square bg-gray-100",onMouseDown:u=>{X({x:u.clientX,y:u.clientY})},onClick:u=>{!de&&Se&&Math.sqrt(Math.pow(u.clientX-Se.x,2)+Math.pow(u.clientY-Se.y,2))<5&&rr(s),X(null)},children:s.image_url?i.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-contain pointer-events-none",loading:"lazy",draggable:!1}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs pointer-events-none",children:"이미지 없음"})}),i.jsxs("div",{className:"p-2 pt-1.5 flex flex-col flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-1",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:s.category}),s.brand&&i.jsx("span",{className:"text-xs text-gray-500",children:s.brand})]}),s.grade&&i.jsx("span",{className:`hidden md:inline-block px-1.5 py-0.5 text-xs rounded ${Rr(s.grade)}`,children:Nr(s.grade)})]}),i.jsxs("div",{className:"flex items-baseline justify-between gap-1 mt-auto",children:[i.jsx("div",{className:"flex items-baseline gap-1 min-w-0",children:i.jsx("h3",{className:"font-semibold text-xs text-gray-900 truncate",children:s.name})}),s.price&&i.jsxs("span",{className:"hidden md:inline text-xs text-gray-900 font-medium flex-shrink-0",children:[s.price,"원"]})]})]})]},s.id))})})}),!e&&i.jsx("div",{className:"hidden md:block w-px bg-gray-300 self-stretch"}),i.jsxs("div",{className:`specbook-project w-full ${e?"":"md:w-1/2"} flex flex-col overflow-hidden ${e?"":"md:pl-3"} pb-4`,children:[i.jsx("div",{className:"specbook-drop-project-select hidden mb-2",children:i.jsxs("select",{value:M||"",onChange:s=>{s.target.value?(w("project"),U(Number(s.target.value))):e||(w("library"),U(null))},className:"w-full h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-sm px-3",children:[!e&&i.jsx("option",{value:"",children:"프로젝트 선택"}),z.map(s=>i.jsx("option",{value:s.id,children:s.title},s.id))]})}),i.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",onDragOver:s=>{s.preventDefault(),s.dataTransfer.dropEffect="copy"},onDrop:async s=>{s.preventDefault();const u=s.dataTransfer.getData("itemId");if(u&&M)try{const v=R.find(y=>y.id===Number(u));if(v){const{id:y,created_at:D,updated_at:O,...W}=v;await q.post("/specbook/base64",{...W,isLibrary:!1,projectId:M}),F.success("아이템이 프로젝트에 추가되었습니다"),nt(),rt()}}catch(v){console.error("아이템 추가 실패:",v),F.error("아이템 추가 실패")}},children:Ue?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"text-gray-500",children:"로딩 중..."})}):S.length===0?i.jsxs("div",{className:"flex items-center justify-center h-full text-gray-600 text-sm",children:[i.jsx("span",{className:"specbook-drop-text-landscape",children:"좌측에서 아이템을 드래그하여 추가하세요"}),i.jsx("span",{className:"specbook-drop-text-portrait",children:"상단에서 아이템을 드래그하여 추가하세요"})]}):i.jsx(dr,{sensors:tr,collisionDetection:ir,onDragEnd:go,children:i.jsx(ur,{items:S.filter(s=>I==="전체"||s.category===I).map(s=>s.id),strategy:Sn,children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:S.filter(s=>I==="전체"||s.category===I).map(s=>i.jsx($i,{item:s,onEdit:Xr,onDelete:Yr,onImageClick:rr},s.id))})})})})]})]})]})]}),Qe&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"카테고리 관리"}),i.jsx("button",{onClick:qr,className:"text-gray-500 hover:text-gray-700 transition-colors",children:i.jsx(Lt,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:me,onChange:s=>_(s.target.value),onKeyPress:s=>{s.key==="Enter"&&Vr()},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"카테고리 이름 입력"}),i.jsxs("button",{onClick:Vr,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center gap-1",children:[i.jsx(Qr,{className:"h-4 w-4"}),"추가"]})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"카테고리 목록 (드래그하여 순서 변경)"}),i.jsx("div",{className:"max-h-120 overflow-y-auto border border-gray-200 rounded-lg",children:i.jsx(dr,{sensors:tr,collisionDetection:ir,onDragEnd:bo,children:i.jsx(ur,{items:fe,strategy:Sn,children:fe.map(s=>i.jsx(Bi,{category:s,onRemove:xo,onEdit:vo},s))})})})]}),i.jsx("div",{className:"flex justify-center",children:i.jsx("button",{onClick:qr,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"닫기"})})]})]})}),ve&&Y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s=>{s.target===s.currentTarget&&Gr()},children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-gray-200",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:Y.name}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"드래그 앤 드롭 또는 Ctrl+V로 이미지/PDF를 추가할 수 있습니다"})]}),i.jsx("button",{onClick:Gr,className:"text-gray-500 hover:text-gray-700 transition-colors",children:i.jsx(Lt,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",onDragOver:s=>{s.preventDefault(),it(!0)},onDragLeave:s=>{s.preventDefault(),it(!1)},onDrop:uo,children:[i.jsx("input",{ref:Oe,type:"file",accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.hwp,.txt,.zip,.dwg,.skp,.3dm,.dxf",multiple:!0,onChange:lo,className:"hidden"}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[Y.image_url&&i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-blue-500 cursor-pointer hover:border-blue-600 transition-colors",onClick:()=>{const s=[Y.image_url];ee.forEach(u=>{const y=u.includes("|")&&!u.startsWith("data:image")?u.split("|")[1]:u;y.startsWith("data:image")&&s.push(y)}),Ze(s),Ce(0),Fe(Y.image_url)},children:i.jsx("img",{src:Y.image_url,alt:"메인 이미지",className:"w-full h-full object-contain"})}),i.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded",children:"메인"})]}),i.jsx(dr,{sensors:tr,collisionDetection:ir,onDragEnd:fo,children:i.jsx(ur,{items:ee.map((s,u)=>`subimg-${u}`),strategy:Or,children:ee.map((s,u)=>i.jsx(Wi,{id:`subimg-${u}`,fileData:s,index:u,onDelete:ho,onFileClick:po},`subimg-${u}`))})}),i.jsx("div",{onClick:()=>{var s;return(s=Oe.current)==null?void 0:s.click()},className:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-gray-400 hover:bg-gray-50 transition-colors",children:i.jsx(Qr,{className:"h-12 w-12 text-gray-400"})})]})]}),i.jsx("div",{className:"flex items-center justify-center p-4 border-t border-gray-200 bg-gray-50",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["총 ",(Y.image_url?1:0)+ee.length,"개의 파일"]}),Jt&&i.jsxs("p",{className:"text-sm text-blue-600 flex items-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"저장 중..."]})]})})]})}),et&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60] overflow-hidden",onClick:s=>{s.target===s.currentTarget&&(Fe(null),H(1),ce({x:0,y:0}),Be(null),Xe(null),Ge(!1))},onWheel:s=>{s.preventDefault();const u=s.deltaY>0?-.1:.1;H(v=>Math.max(.5,Math.min(5,v+u)))},children:[i.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[i.jsx("button",{onClick:()=>{Fe(null),H(1),ce({x:0,y:0}),Be(null),Xe(null),Ge(!1)},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",children:i.jsx(Lt,{className:"h-6 w-6 text-white"})}),i.jsx("button",{onClick:s=>{s.stopPropagation(),H(u=>Math.min(5,u+.5))},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:"확대 (+)",children:i.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"})})}),i.jsx("button",{onClick:s=>{s.stopPropagation(),H(u=>Math.max(.5,u-.5))},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:"축소 (-)",children:i.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),i.jsx("button",{onClick:s=>{s.stopPropagation(),H(1),ce({x:0,y:0})},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:"초기화",children:i.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),i.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-3",children:[i.jsxs("div",{className:"bg-white bg-opacity-10 text-white px-3 py-2 rounded-lg text-sm",children:[Math.round(Z*100),"%"]}),ie.length>1&&i.jsxs("div",{className:"bg-white bg-opacity-10 text-white px-3 py-2 rounded-lg text-sm",children:[We+1," / ",ie.length]})]}),ie.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:s=>{s.stopPropagation(),Hr()},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-white bg-opacity-10 hover:bg-opacity-30 rounded-full transition-colors z-10",title:"이전 이미지 (←)",children:i.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),i.jsx("button",{onClick:s=>{s.stopPropagation(),Zr()},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-white bg-opacity-10 hover:bg-opacity-30 rounded-full transition-colors z-10",title:"다음 이미지 (→)",children:i.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),ie.length>1&&i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white bg-opacity-10 text-white px-4 py-2 rounded-lg text-sm",children:"← → 키보드로 이동 | ESC 닫기"}),i.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",onMouseDown:s=>{Z>1&&(ct(!0),mt({x:s.clientX-ae.x,y:s.clientY-ae.y}))},onMouseMove:s=>{ke&&Z>1&&ce({x:s.clientX-lt.x,y:s.clientY-lt.y})},onMouseUp:()=>ct(!1),onMouseLeave:()=>ct(!1),onTouchStart:s=>{if(s.touches.length===2){s.preventDefault(),Ge(!0);const u=Wr(s.touches[0],s.touches[1]),v=$r(s.touches[0],s.touches[1]);Be(u),Xe(v)}else if(s.touches.length===1&&Z>1&&!dt){const u=s.touches[0];mt({x:u.clientX-ae.x,y:u.clientY-ae.y})}},onTouchMove:s=>{if(s.touches.length===2){s.preventDefault(),Ge(!0);const u=Wr(s.touches[0],s.touches[1]),v=$r(s.touches[0],s.touches[1]);if(tt&&vt){const y=u/tt,D=Math.max(.5,Math.min(5,Z*y)),O=v.x-vt.x,W=v.y-vt.y,ue=D/Z,Ye=ae.x*ue+O,or=ae.y*ue+W;H(D),ce({x:Ye,y:or})}Be(u),Xe(v)}else if(s.touches.length===1&&Z>1&&!dt){s.preventDefault();const u=s.touches[0];ce({x:u.clientX-lt.x,y:u.clientY-lt.y})}},onTouchEnd:s=>{if(s.touches.length===0){const u=Date.now(),v=s.changedTouches[0],y={x:v.clientX,y:v.clientY};if(u-Qt<300&&Me&&Math.abs(y.x-Me.x)<30&&Math.abs(y.y-Me.y)<30&&!dt){if(Z===1){const W=s.currentTarget.getBoundingClientRect(),ue=y.x-W.left-W.width/2,Ye=y.y-W.top-W.height/2;H(2.5),ce({x:-ue*1.5,y:-Ye*1.5})}else H(1),ce({x:0,y:0});G(0),De(null)}else G(u),De(y);Be(null),Xe(null),Ge(!1)}else if(s.touches.length===1&&dt){Be(null),Xe(null),Ge(!1);const u=s.touches[0];mt({x:u.clientX-ae.x,y:u.clientY-ae.y})}},onDoubleClick:s=>{s.stopPropagation();const u=s.currentTarget.getBoundingClientRect(),v=s.clientX-u.left-u.width/2,y=s.clientY-u.top-u.height/2;Z===1?(H(2.5),ce({x:-v*1.5,y:-y*1.5})):(H(1),ce({x:0,y:0}))},children:i.jsx("img",{src:et,alt:"원본 이미지",style:{transform:`scale(${Z}) translate(${ae.x/Z}px, ${ae.y/Z}px)`,transformOrigin:"center center",transition:ke||tt!==null?"none":"transform 0.25s cubic-bezier(0.2, 0, 0, 1)",maxWidth:"100%",maxHeight:"100%",objectFit:"contain",cursor:Z>1?ke?"grabbing":"grab":"pointer",userSelect:"none",touchAction:"none"},draggable:!1})}),i.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-white bg-opacity-10 text-white px-4 py-2 rounded-lg text-xs text-center",children:"마우스 휠 또는 두 손가락으로 확대/축소 | 드래그로 이동 | 더블클릭으로 2배 확대/초기화"})]}),pe&&Le&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"프로젝트 선택"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"아이템을 추가할 프로젝트를 선택하세요"}),i.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 mb-6",children:z.map(s=>i.jsx("button",{onClick:async()=>{try{const u=R.find(v=>v.id===Le);if(u){const{id:v,created_at:y,updated_at:D,...O}=u;await q.post("/specbook/base64",{...O,isLibrary:!1,projectId:s.id}),F.success(`"${s.title}"에 아이템이 추가되었습니다`),rt()}}catch(u){console.error("아이템 추가 실패:",u),F.error("아이템 추가 실패")}finally{oe(!1),le(null)}},className:"w-full px-4 py-3 text-left border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-colors",children:i.jsx("div",{className:"font-medium text-gray-900",children:s.title})},s.id))}),i.jsx("button",{onClick:()=>{oe(!1),le(null)},className:"w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"취소"})]})}),er&&Fr&&i.jsx(ns,{image:Fr,onCropComplete:ao,onCancel:co,aspectRatio:1})]})};export{Vi as default};
