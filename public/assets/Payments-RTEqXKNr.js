import{j as e}from"./vendor-data-DG_4MGb7.js";import{r as u}from"./vendor-react-D-r2Cqeg.js";import{u as ot,c as rt}from"./dataStore-ByVzUXWH.js";import{l as G,u as ct,s as $e,z as p,p as le,a as lt}from"./index-HUdyR-Tx.js";import{u as it}from"./useFilteredProjects-4XYld7On.js";import{p as L}from"./vendor-date-9Cl9d1sr.js";import{X as se,h as dt,j as Le,T as Te,U as mt,I as ut}from"./vendor-ui-DTwhhNuH.js";import{r as Fe}from"./formatters-15aXprTM.js";import{s as gt,m as pt,g as ft}from"./imageStorage-DjLpiDnu.js";import{a as ye,b as bt,B as xt}from"./index-CSlX1tQB.js";const ht=({projectName:y,onClose:w,type:ie="cash"})=>{const V=ie==="cash",U=V?"í˜„ê¸ˆìˆ˜ë ¹ì¦":"ì´ì²´í™•ì¸ì¦",K=V?"ìœ„ì™€ ê°™ì´ í˜„ê¸ˆìœ¼ë¡œ ì§€ê¸‰ ë°›ì•˜ìŒì„ í™•ì¸ í•©ë‹ˆë‹¤.":"ìœ„ì™€ ê°™ì´ ê³„ì¢Œì´ì²´ë¡œ ì§€ê¸‰ ë°›ì•˜ìŒì„ í™•ì¸ í•©ë‹ˆë‹¤.",[m,D]=u.useState({receiptDate:L(new Date,"yyyy-MM-dd"),customerName:"",amount:"",purpose:"ì¸í…Œë¦¬ì–´ ê³µì‚¬ëŒ€ê¸ˆ",receivedBy:""}),W=()=>{window.print()},je=N=>{const H=Number(N.replace(/,/g,""));return isNaN(H)?"":H.toLocaleString()},f=N=>{if(N===0)return"ì˜";const H=["","ë§Œ","ì–µ","ì¡°"],Z=["","ì‹­","ë°±","ì²œ"],de=["","ì¼","ì´","ì‚¼","ì‚¬","ì˜¤","ìœ¡","ì¹ ","íŒ”","êµ¬"];let _="",M=0;for(;N>0;){const T=N%1e4;if(T>0){let I="",$=T,ne=0;for(;$>0;){const z=$%10;z>0&&(I=de[z]+Z[ne]+I),$=Math.floor($/10),ne++}_=I+H[M]+_}N=Math.floor(N/1e4),M++}return _+"ì›ì •"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:U}),e.jsx("button",{onClick:w,className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(se,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-4 print:hidden",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ìˆ˜ë ¹ì¼ì"}),e.jsx("input",{type:"date",value:m.receiptDate,onChange:N=>D({...m,receiptDate:N.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³ ê°ëª…"}),e.jsx("input",{type:"text",value:m.customerName,onChange:N=>D({...m,customerName:N.target.value}),placeholder:"ê³ ê°ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê¸ˆì•¡"}),e.jsx("input",{type:"text",value:je(m.amount),onChange:N=>{const H=N.target.value.replace(/,/g,"");/^\d*$/.test(H)&&D({...m,amount:H})},placeholder:"ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"}),m.amount&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f(Number(m.amount))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ë‚´ì—­"}),e.jsx("input",{type:"text",value:m.purpose,onChange:N=>D({...m,purpose:N.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ìˆ˜ë ¹ì¸"}),e.jsx("input",{type:"text",value:m.receivedBy,onChange:N=>D({...m,receivedBy:N.target.value}),placeholder:"ìˆ˜ë ¹ì¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("button",{onClick:W,disabled:!m.customerName||!m.amount||!m.receivedBy,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"ì¸ì‡„í•˜ê¸°"]})]}),e.jsx("div",{className:"hidden print:block p-12",children:e.jsxs("div",{className:"border-4 border-double border-gray-900 p-8",children:[e.jsx("h1",{className:"text-center text-3xl font-bold mb-8",children:V?"í˜„ ê¸ˆ ìˆ˜ ë ¹ ì¦":"ì´ ì²´ í™• ì¸ ì¦"}),e.jsxs("div",{className:"space-y-6 text-lg",children:[e.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsx("span",{className:"font-medium w-32",children:"ìˆ˜ë ¹ì¼ì:"}),e.jsx("span",{className:"flex-1 receipt-date",children:L(new Date(m.receiptDate),"yyyyë…„ MMì›” ddì¼",{locale:G})})]}),e.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsx("span",{className:"font-medium w-32",children:"ê³ ê°ëª…:"}),e.jsx("span",{className:"flex-1",children:m.customerName})]}),e.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsx("span",{className:"font-medium w-32",children:"í”„ë¡œì íŠ¸:"}),e.jsx("span",{className:"flex-1",children:y})]}),e.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsx("span",{className:"font-medium w-32",children:"ê¸ˆì•¡:"}),e.jsxs("span",{className:"flex-1 font-bold receipt-amount",children:["â‚©",Number(m.amount).toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsx("span",{className:"font-medium w-32",children:"ê¸ˆì•¡(í•œê¸€):"}),e.jsx("span",{className:"flex-1",children:f(Number(m.amount))})]}),e.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[e.jsx("span",{className:"font-medium w-32",children:"ë‚´ì—­:"}),e.jsx("span",{className:"flex-1",children:m.purpose})]})]}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsx("p",{className:"text-lg mb-8",children:K}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg receipt-date",children:L(new Date(m.receiptDate),"yyyyë…„ MMì›” ddì¼",{locale:G})}),e.jsxs("p",{className:"text-xl font-medium mt-8",children:["ìˆ˜ë ¹ì¸: ",m.receivedBy," ",e.jsx("span",{className:"ml-4",children:"(ì¸)"})]})]})]})]})})]})}),e.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
        }
      `})]})},Tt=()=>{const{payments:y,loadPaymentsFromAPI:w,addPaymentToAPI:ie,deletePaymentFromAPI:V,updatePaymentInAPI:U,updatePayment:K}=ot(),{user:m}=ct(),D=it(),[W,je]=u.useState(""),[f,N]=u.useState(null),[H,Z]=u.useState(null),[de,_]=u.useState(!1),[M,T]=u.useState(!1),[I,$]=u.useState(!1),[ne,z]=u.useState(!1),[Ee,qe]=u.useState(""),[O,J]=u.useState("form"),[me,Be]=u.useState(!1),[Re,q]=u.useState(!1),ee=u.useRef(null),[B,X]=u.useState("pending"),[Nt,yt]=u.useState("all"),[jt,Ke]=u.useState(!1),[vt,kt]=u.useState(null),[_e,Oe]=u.useState(!1),[Ve,wt]=u.useState(""),[oe,ve]=u.useState(!1),ke=u.useRef(!1),[te,Ue]=u.useState([]),[ue,we]=u.useState([]),[re,Y]=u.useState(null),[ge,pe]=u.useState([]),[Ie,Ce]=u.useState([]),[fe,be]=u.useState(!1),[F,ae]=u.useState({}),[Se,De]=u.useState(!1),We=()=>{const t=localStorage.getItem("lastSelectedProject"),a=D.filter(s=>s.status!=="completed");return t&&a.some(s=>s.name===t)?t:a.length>0?a[0].name:""},[l,x]=u.useState({project:"",date:L(new Date,"yyyy-MM-dd"),process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]});u.useEffect(()=>{(async()=>{try{const a=await rt.getAllContractors();Ue(a.map(s=>({id:s._id||s.id,rank:s.rank,companyName:s.companyName,name:s.name,process:s.process,contact:s.contact,accountNumber:s.accountNumber,bankName:s.bankName,notes:s.notes,createdAt:new Date(s.createdAt),updatedAt:new Date(s.updatedAt)})))}catch(a){console.error("Failed to load contractors:",a)}})()},[]),u.useEffect(()=>{w().catch(a=>{console.error("Failed to load payments:",a)});const t=()=>{Be(window.innerWidth<1024)};if(t(),window.addEventListener("resize",t),D.length>0&&!l.project){const a=We();a&&(x(s=>({...s,project:a})),localStorage.setItem("lastSelectedProject",a))}return()=>window.removeEventListener("resize",t)},[w,D]),u.useEffect(()=>{const t=setInterval(()=>{console.log("[ìë™ ìƒˆë¡œê³ ì¹¨] ê²°ì œ ë‚´ì—­ ì—…ë°ì´íŠ¸ ì¤‘..."),w().catch(s=>{console.error("[ìë™ ìƒˆë¡œê³ ì¹¨] ì‹¤íŒ¨:",s)})},3e4),a=()=>{document.visibilityState==="visible"&&(console.log("[í¬ì»¤ìŠ¤ ìƒˆë¡œê³ ì¹¨] í˜ì´ì§€ í™œì„±í™” - ê²°ì œ ë‚´ì—­ ì—…ë°ì´íŠ¸ ì¤‘..."),w().catch(s=>{console.error("[í¬ì»¤ìŠ¤ ìƒˆë¡œê³ ì¹¨] ì‹¤íŒ¨:",s)}))};return document.addEventListener("visibilitychange",a),()=>{clearInterval(t),document.removeEventListener("visibilitychange",a)}},[w]),u.useEffect(()=>{const t=$e.getSocket();if(!t)return;const a=s=>{console.log("ğŸ”„ [ì‹¤ì‹œê°„ ë™ê¸°í™”] ê²°ì œ ìƒíƒœ ë³€ê²½ ê°ì§€:",s),w().catch(c=>{console.error("[ì‹¤ì‹œê°„ ë™ê¸°í™”] ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:",c)})};return t.on("payment:refresh",a),()=>{t.off("payment:refresh",a)}},[w]),u.useEffect(()=>{(async()=>{var c,n,r,o;if(ke.current)return;const a=new URLSearchParams(window.location.search),s=a.get("complete")||a.get("c");if(s){if(!m){console.log("[ìë™ ì†¡ê¸ˆì™„ë£Œ] ë¡œê·¸ì¸ í•„ìš” - ëŒ€ê¸° ì¤‘");return}ke.current=!0,console.log("[ìë™ ì†¡ê¸ˆì™„ë£Œ] ì²˜ë¦¬ ì‹œì‘:",s),window.history.replaceState({},"","/payments"),J("list"),X("completed"),K(String(s),{status:"completed"}),p.success("ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤");try{await U(String(s),{status:"completed"}),w()}catch(i){console.error("[ìë™ ì†¡ê¸ˆì™„ë£Œ] ì²˜ë¦¬ ì‹¤íŒ¨:",i),K(String(s),{status:"pending"}),X("pending");let d="ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤";((c=i.response)==null?void 0:c.status)===401?d="ì¸ì¦ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”":((n=i.response)==null?void 0:n.status)===404?d="ê²°ì œ ìš”ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ID: "+s+")":(o=(r=i.response)==null?void 0:r.data)!=null&&o.error?d=i.response.data.error:i.message&&(d+=": "+i.message),p.error(d)}}})()},[w,U,K,m]),u.useEffect(()=>{if(l.process){const t=new Set(y.filter(n=>{var r;return n.status==="completed"&&((r=n.bankInfo)==null?void 0:r.accountHolder)}).map(n=>n.bankInfo.accountHolder.trim().toLowerCase())),a=(n,r)=>{const o=n.toLowerCase(),i=r.toLowerCase();if(o.includes(i)||i.includes(o))return!0;const d=o.split("/").map(b=>b.trim()),g=i.replace(/ê³µì‚¬$/,"").trim();for(const b of d)if(b===g||g.includes(b)||b.includes(g))return!0;return!1},c=te.filter(n=>{if(!a(l.process,n.process))return!1;const o=n.accountNumber&&n.accountNumber.trim()!=="",i=n.name.trim().toLowerCase(),d=t.has(i);return o||d}).sort((n,r)=>{const o=n.accountNumber&&n.accountNumber.trim()!=="",i=r.accountNumber&&r.accountNumber.trim()!=="";return o&&!i?-1:!o&&i?1:0});we(c)}else we([])},[l.process,te,y]),u.useEffect(()=>{if(l.process){const t=(c,n)=>{if(!n)return!1;const r=c.toLowerCase(),o=n.toLowerCase();if(r.includes(o)||o.includes(r))return!0;const i=r.split("/").map(g=>g.trim()),d=o.replace(/ê³µì‚¬$/,"").trim();for(const g of i)if(g===d||d.includes(g)||g.includes(d))return!0;return!1},a=y.filter(c=>{var n,r,o;return c.status==="completed"&&c.process&&t(l.process,c.process)&&((n=c.bankInfo)==null?void 0:n.accountHolder)&&((r=c.bankInfo)==null?void 0:r.bankName)&&((o=c.bankInfo)==null?void 0:o.accountNumber)}),s=new Map;a.forEach(c=>{const n=`${c.bankInfo.accountHolder}_${c.bankInfo.bankName}_${c.bankInfo.accountNumber}`;s.has(n)||s.set(n,{accountHolder:c.bankInfo.accountHolder,bankName:c.bankInfo.bankName,accountNumber:c.bankInfo.accountNumber,itemName:c.itemName||"",amount:c.amount||0})}),pe(Array.from(s.values()))}else pe([])},[l.process,y]),u.useEffect(()=>{var a;const t=((a=l.accountHolder)==null?void 0:a.trim())||"";if(t.length>=1&&fe){const s=[],c=new Set;te.filter(n=>n.accountNumber&&n.accountNumber.trim()!=="").forEach(n=>{const r=n.name.trim(),o=r.toLowerCase(),i=t.toLowerCase();o.startsWith(i)&&!c.has(o)&&(c.add(o),s.push({name:r,bankName:n.bankName||"",accountNumber:n.accountNumber||"",source:"contractor"}))}),y.filter(n=>{var r;return n.status==="completed"&&((r=n.bankInfo)==null?void 0:r.accountHolder)}).forEach(n=>{const r=n.bankInfo.accountHolder.trim(),o=r.toLowerCase(),i=t.toLowerCase();o.startsWith(i)&&!c.has(o)&&(c.add(o),s.push({name:r,bankName:n.bankInfo.bankName||"",accountNumber:n.bankInfo.accountNumber||"",source:"payment"}))}),Ce(s)}else Ce([])},[l.accountHolder,fe,te,y]);const ze=t=>{const a=t.split(`
`).map(o=>o.trim()).filter(o=>o),s={amounts:{},bankInfo:{},vendor:null,itemName:void 0,includeVat:!1},c=["ê¹€","ì´","ë°•","ìµœ","ì •","ê°•","ì¡°","ìœ¤","ì¥","ì„","í•œ","ì˜¤","ì„œ","ì‹ ","ê¶Œ","í™©","ì•ˆ","ì†¡","ë¥˜","ì „","í™","ê³ ","ë¬¸","ì–‘","ì†","ë°°","ë°±","í—ˆ","ìœ ","ë‚¨","ì‹¬","ë…¸","í•˜","ê³½","ì„±","ì°¨","ì£¼","ìš°","êµ¬","ë¯¼","ì§„","ë‚˜","ì—„","ì±„","ì›","ì²œ","ë°©","ê³µ","í˜„","í•¨","ë³€","ì—¼","ì—¬","ì¶”","ë„","ì„","ì„ ","ì„¤","ë§ˆ","ê¸¸","ì—°","ìœ„","í‘œ","ëª…","ê¸°","ë°˜","ë¼","ì™•","ê¸ˆ","ì˜¥","ìœ¡","ì¸","ë§¹","ì œ","íƒ","êµ­","ì–´","ê²½","ë´‰","ì‚¬"],n=o=>{if(!o||o.length<2||o.length>5||!/^[ê°€-í£]{2,5}$/.test(o))return!1;if(o.length>=2){const i=o.charAt(0),d=o.substring(0,2);if(["ë‚¨ê¶","ì„ ìš°","ë…ê³ ","í™©ë³´","ì‚¬ê³µ","ì„œë¬¸","ì œê°ˆ"].includes(d)||c.includes(i))return!0}return o.length>=2&&o.length<=4},r=a.some(o=>o.includes("ë¬´í†µì¥ ì…ê¸ˆ")||o.includes("ë¬´í†µì¥ì…ê¸ˆ"));return a.forEach((o,i)=>{if(o.includes("ìƒí’ˆëª…")&&o.includes(":")){const d=o.match(/ìƒí’ˆëª…\s*:\s*(.+)/);d&&(s.itemName=d[1].trim())}if(o.includes("ì˜ˆê¸ˆì£¼")&&o.includes(":")){const d=o.match(/ì˜ˆê¸ˆì£¼\s*:\s*(.+)/);d&&(s.bankInfo.accountHolder=d[1].trim())}if(o.includes("ì…ê¸ˆì€í–‰")&&o.includes(":")){const d=o.match(/ì…ê¸ˆì€í–‰\s*:\s*(.+)/);d&&(s.bankInfo.bankName=d[1].trim())}if(o.includes("ê³„ì¢Œë²ˆí˜¸")&&o.includes(":")){const d=o.match(/ê³„ì¢Œë²ˆí˜¸\s*:\s*(.+)/);d&&(s.bankInfo.accountNumber=d[1].trim())}if(o.includes("ì…ê¸ˆê¸ˆì•¡")&&o.includes(":")){const d=o.match(/ì…ê¸ˆê¸ˆì•¡\s*:\s*([\d,]+)ì›?/);d&&(s.amounts.total=parseInt(d[1].replace(/,/g,"")))}}),r||(a.forEach(o=>{const i=o.match(/\[([^\]]+)\]/);i&&!s.itemName&&(s.itemName=i[1].trim())}),a.forEach((o,i)=>{(o.includes("ë¶€ê°€ì„¸í¬í•¨")||o.includes("ë¶€ê°€ì„¸ í¬í•¨")||o.includes("(ë¶€ê°€ì„¸í¬í•¨)"))&&(s.includeVat=!0);const d=o.match(/(\d+)\s*ë§Œ\s*ì›/);if(d){const h=parseInt(d[1])*1e4;o.includes("ìì¬")||o.includes("ì¬ë£Œ")?s.amounts.material=h:o.includes("ì¸ê±´")||o.includes("ë…¸ë¬´")?s.amounts.labor=h:s.amounts.total||(s.amounts.total=h),o=o.replace(/(\d+)\s*ë§Œ\s*ì›/g,"")}o.includes("/")&&o.split("/").forEach(j=>{const v=j.trim();v.startsWith("[")||v.endsWith("]")||(/^[\d\-]+$/.test(v)&&v.replace(/\-/g,"").length>=10?s.bankInfo.accountNumber||(s.bankInfo.accountNumber=v):n(v)&&!s.bankInfo.accountHolder&&(s.bankInfo.accountHolder=v))});const g=[/\d{6}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{5,7}[\s\-]+\d{2}[\s\-]+\d{5,7}/,/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/,/\d{3}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{3}[\s\-]+\d{4}[\s\-]+\d{7}/,/\d{4}[\s\-]+\d{4}[\s\-]+\d{5}/,/\d{3,4}[\s\-]+\d{2,6}[\s\-]+\d{4,7}/,/\d{10,}/];let b="",C=-1;for(const h of g){const j=o.match(h);if(j&&!s.bankInfo.accountNumber){b=j[0],C=j.index||-1,s.bankInfo.accountNumber=j[0].trim().replace(/\s+/g,"-");const P=o.substring(C+b.length).trim().split(/\s+/);for(const E of P)if(!(E.startsWith("[")||E.endsWith("]"))&&n(E)){s.bankInfo.accountHolder=E;break}if(!s.bankInfo.accountHolder&&i+1<a.length){const E=a[i+1],He=E.split(/\s+/);for(const R of He)if(!(R.startsWith("[")||R.endsWith("]"))&&n(R)){s.bankInfo.accountHolder=R;break}if(!s.bankInfo.accountHolder){const R=E.match(/^([ê°€-í£]{2,5})/);if(R){const Me=R[1].trim();n(Me)&&(s.bankInfo.accountHolder=Me)}}}break}}const S=o.match(/[\d,]+/g);S&&S.forEach(h=>{const j=parseInt(h.replace(/,/g,"")),v=h.replace(/,/g,""),P=b&&b.includes(v);!s.bankInfo.accountNumber&&v.length>=10&&v.length<=20?(s.bankInfo.accountNumber=v,b=v):j>=1e3&&!d&&!P&&(o.includes("ìì¬")||o.includes("ì¬ë£Œ")?s.amounts.material=j:o.includes("ì¸ê±´")||o.includes("ë…¸ë¬´")?s.amounts.labor=j:s.amounts.total||(s.amounts.total=j))});const k={êµ­ë¯¼:"KBêµ­ë¯¼ì€í–‰",KB:"KBêµ­ë¯¼ì€í–‰",ì‹ í•œ:"ì‹ í•œì€í–‰",í•˜ë‚˜:"í•˜ë‚˜ì€í–‰",ìš°ë¦¬:"ìš°ë¦¬ì€í–‰",ê¸°ì—…:"IBKê¸°ì—…ì€í–‰",IBK:"IBKê¸°ì—…ì€í–‰",ë†í˜‘:"NHë†í˜‘ì€í–‰",NH:"NHë†í˜‘ì€í–‰",ì¹´ì¹´ì˜¤:"ì¹´ì¹´ì˜¤ë±…í¬",ì¹´ë±…:"ì¹´ì¹´ì˜¤ë±…í¬",í† ìŠ¤:"í† ìŠ¤ë±…í¬",ì¼€ì´:"ì¼€ì´ë±…í¬",Kë±…í¬:"ì¼€ì´ë±…í¬",ì‚°ì—…:"KDBì‚°ì—…ì€í–‰",KDB:"KDBì‚°ì—…ì€í–‰",ìˆ˜í˜‘:"ìˆ˜í˜‘ì€í–‰",ëŒ€êµ¬:"ëŒ€êµ¬ì€í–‰",ë¶€ì‚°:"ë¶€ì‚°ì€í–‰",ê²½ë‚¨:"ê²½ë‚¨ì€í–‰",ê´‘ì£¼:"ê´‘ì£¼ì€í–‰",ì „ë¶:"ì „ë¶ì€í–‰",ì œì¼:"SCì œì¼ì€í–‰",SC:"SCì œì¼ì€í–‰",ì”¨í‹°:"í•œêµ­ì”¨í‹°ì€í–‰",ìš°ì²´êµ­:"ìš°ì²´êµ­",ìƒˆë§ˆì„:"ìƒˆë§ˆì„ê¸ˆê³ ",ì‹ í˜‘:"ì‹ í˜‘"};for(const[h,j]of Object.entries(k))if(o.includes(h)){s.bankInfo.bankName=j;const v=new RegExp(`${h}\\s+([ê°€-í£]{2,5})`),P=o.match(v);P&&(s.bankInfo.accountHolder=P[1]);break}if(!s.bankInfo.bankName){const h=o.match(/([ê°€-í£]+)(ì€í–‰|ë±…í¬)/);h&&(s.bankInfo.bankName=h[0])}const A=o.match(/\(([ê°€-í£]{2,5})\)/);if(A){const h=A[1];n(h)&&(s.bankInfo.accountHolder=h)}if(!A&&!s.bankInfo.accountHolder){const h=/[ê°€-í£]{2,5}/g,j=o.match(h);if(j){const v=o.match(/\d{10,}/)||o.match(/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/);j.forEach(P=>{const E=t.split(`
`)[i];E&&E.includes(`[${P}]`)||!n(P)||["ì² ê±°","íê¸°ë¬¼","ëª©ê³µ","íƒ€ì¼","ë„ë°°","ì „ê¸°","ì„¤ë¹„","ì²­ì†Œ","ë¯¸ì¥","ë„ì¥","ë°©ìˆ˜","ìƒ·ì‹œ","ìƒ¤ì‹œ","ìœ ë¦¬","í•„ë¦„","ì¡°ëª…","ê°€êµ¬","ì‹±í¬","ì£¼ë°©","ìš•ì‹¤","í™”ì¥ì‹¤","ë§ˆë£¨","ì¥íŒ","ë²½ì§€","í˜ì¸íŠ¸","ë„ìƒ‰","ë°°ê´€","ëˆ„ìˆ˜","í•˜ì","ë³´ìˆ˜","ì‹œê³µ","ê³µì‚¬"].includes(P)||A&&P===A[1]||(v&&!A?s.bankInfo.accountHolder=P:s.bankInfo.accountHolder||(i>0&&(a[i-1].match(/\d{10,}/)||a[i-1].match(/ì€í–‰|ë±…í¬/))||i<a.length-1&&(a[i+1].match(/\d{10,}/)||a[i+1].match(/ì€í–‰|ë±…í¬/))||o.match(/ì€í–‰|ë±…í¬/))&&(s.bankInfo.accountHolder=P))})}}const Ne={ëª©ê³µ:"ëª©ê³µ",ëª©ì¬:"ëª©ê³µ",ë‚˜ë¬´:"ëª©ê³µ",íƒ€ì¼:"íƒ€ì¼",íƒ€ì¼ê³µì‚¬:"íƒ€ì¼",ë„ë°°:"ë„ë°°",ë„ë°°ì§€:"ë„ë°°",ë²½ì§€:"ë„ë°°",ì „ê¸°:"ì „ê¸°",ì „ê¸°ìì¬:"ì „ê¸°",ì „ë“±:"ì „ê¸°",ì¡°ëª…:"ì „ê¸°",ìŠ¤ìœ„ì¹˜:"ì „ê¸°",ì½˜ì„¼íŠ¸:"ì „ê¸°",ì„¤ë¹„:"ì„¤ë¹„",ë°°ê´€:"ì„¤ë¹„",ìˆ˜ë„:"ì„¤ë¹„",í•˜ìˆ˜:"ì„¤ë¹„",ìƒ¤ì‹œ:"ìƒ¤ì‹œ",ì°½ë¬¸:"ìƒ¤ì‹œ",ì°½í˜¸:"ìƒ¤ì‹œ",ìœ ë¦¬:"ìœ ë¦¬",ê±°ìš¸:"ìœ ë¦¬",ë°©ìˆ˜:"ë°©ìˆ˜",ë°©ìˆ˜ê³µì‚¬:"ë°©ìˆ˜",ì² ê±°:"ì² ê±°",ì² ê±°ê³µì‚¬:"ì² ê±°",í•´ì²´:"ì² ê±°",ì²­ì†Œ:"ì²­ì†Œ",ì¤€ê³µì²­ì†Œ:"ì²­ì†Œ",ì…ì£¼ì²­ì†Œ:"ì²­ì†Œ",ë¯¸ì¥:"ë¯¸ì¥",ëª°íƒˆ:"ë¯¸ì¥",ì‹œë©˜íŠ¸:"ë¯¸ì¥",ì„ê³µ:"ì„ê³µ",ëŒ€ë¦¬ì„:"ì„ê³µ",í™”ê°•ì„:"ì„ê³µ",ë„ì¥:"ë„ì¥",í˜ì¸íŠ¸:"ë„ì¥",ë„ìƒ‰:"ë„ì¥",í•„ë¦„:"í•„ë¦„",ì‹œíŠ¸ì§€:"í•„ë¦„",ì¬íŒ…:"í•„ë¦„",ë°”ë‹¥:"ë°”ë‹¥",ë§ˆë£¨:"ë°”ë‹¥",ì¥íŒ:"ë°”ë‹¥",ë°ì½”íƒ€ì¼:"ë°”ë‹¥",ê°€êµ¬:"ê°€êµ¬",ë¶™ë°•ì´ì¥:"ê°€êµ¬",ìˆ˜ë‚©ì¥:"ê°€êµ¬",ì£¼ë°©:"ì£¼ë°©",ì‹±í¬ëŒ€:"ì£¼ë°©",ì£¼ë°©ê°€êµ¬:"ì£¼ë°©",ìš•ì‹¤:"ìš•ì‹¤",í™”ì¥ì‹¤:"ìš•ì‹¤",ë³€ê¸°:"ìš•ì‹¤",ì„¸ë©´ëŒ€:"ìš•ì‹¤",ì–‘ë³€ê¸°:"ìš•ì‹¤",ê°„íŒ:"ê°„íŒ",ì‚¬ì¸ë¬¼:"ê°„íŒ",í˜„ìˆ˜ë§‰:"ê°„íŒ",ë³´ì–‘:"ê°€ì„¤",ê°€ì„¤:"ê°€ì„¤"};for(const[h,j]of Object.entries(Ne))if(o.includes(h)){s.vendor=j;break}if(i===0&&!s.itemName){const h=o.replace(/[\[\]{}()<>]/g,"").trim();h&&!h.includes("ë¬´í†µì¥ ì…ê¸ˆ")&&(s.itemName=h.substring(0,50))}})),s.itemName&&s.itemName.includes("ë³´ì–‘")&&(s.vendor="ê°€ì„¤"),s},Je=()=>{const t=l.quickText;if(!t.trim())return;const a=ze(t),s={project:l.project,date:l.date,quickText:l.quickText,quickImages:l.quickImages||[],process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[]};Y(null),T(!1),$(!1);let c=0;if(a.amounts.material&&(c+=a.amounts.material),a.amounts.labor&&(c+=a.amounts.labor),a.amounts.total&&!a.amounts.material&&!a.amounts.labor&&(c=a.amounts.total),c>0&&(s.amount=c),a.bankInfo.bankName&&(s.bankName=a.bankInfo.bankName),a.bankInfo.accountNumber){s.accountNumber=a.bankInfo.accountNumber;const r=te.find(o=>{var g,b;const i=(g=a.bankInfo.accountNumber)==null?void 0:g.replace(/[-\s]/g,"");return((b=o.accountNumber)==null?void 0:b.replace(/[-\s]/g,""))===i});r?(s.accountHolder=r.name||a.bankInfo.accountHolder,s.bankName=r.bankName||a.bankInfo.bankName,s.accountNumber=r.accountNumber||a.bankInfo.accountNumber,Y(r.id||r._id||null),r.process&&(s.process=r.process)):a.bankInfo.accountHolder&&(s.accountHolder=a.bankInfo.accountHolder)}else a.bankInfo.accountHolder&&(s.accountHolder=a.bankInfo.accountHolder);if(a.vendor&&(s.process=a.vendor),!s.process){const r=t.toLowerCase();for(const o of ye)if(r.includes(o.toLowerCase())){s.process=o;break}}a.itemName&&(s.itemName=a.itemName),x(s),a.includeVat&&(T(!0),$(!1));let n=[];if(a.amounts.material||a.amounts.labor||a.amounts.total){const r=[];a.amounts.material&&r.push(`ìì¬ë¹„: ${a.amounts.material.toLocaleString()}ì›`),a.amounts.labor&&r.push(`ì¸ê±´ë¹„: ${a.amounts.labor.toLocaleString()}ì›`),a.amounts.total&&!a.amounts.material&&!a.amounts.labor&&r.push(`ê¸ˆì•¡: ${a.amounts.total.toLocaleString()}ì›`),n.push(r.join(", "))}if(a.bankInfo.bankName||a.bankInfo.accountHolder){const r=[];a.bankInfo.bankName&&r.push(a.bankInfo.bankName),a.bankInfo.accountHolder&&r.push(a.bankInfo.accountHolder),a.bankInfo.accountNumber&&r.push(a.bankInfo.accountNumber),r.length>0&&n.push(`ê³„ì¢Œ: ${r.join(" ")}`)}a.vendor&&n.push(`ê³µì •: ${a.vendor}`),a.includeVat&&n.push("ë¶€ê°€ì„¸ í¬í•¨ ì„¤ì •ë¨"),n.length>0?p.success(`ìë™ ì¸ì‹ ì™„ë£Œ!
${n.join(`
`)}`,{duration:4e3,style:{whiteSpace:"pre-line"}}):p.info("í…ìŠ¤íŠ¸ë¥¼ ë¶„ì„ ì¤‘... ë” ëª…í™•í•œ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")};u.useEffect(()=>{(async()=>{try{await pt();const a=await ft();ae(a),De(!0)}catch(a){console.error("ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:",a),De(!0)}})()},[]);const Ae=u.useRef({});u.useEffect(()=>{Se&&(Object.entries(F).forEach(([t,a])=>{JSON.stringify(Ae.current[t])!==JSON.stringify(a)&&gt(t,a).catch(s=>{console.error("ì´ë¯¸ì§€ ì €ì¥ ì‹¤íŒ¨:",s),p.error("ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")})}),Ae.current={...F})},[F,Se]);const xe=u.useCallback(async t=>{var c;const a=(c=t.clipboardData)==null?void 0:c.items;if(!a)return;let s=!1;for(let n=0;n<a.length;n++)if(a[n].type.indexOf("image")!==-1){s=!0;break}if(s){if(!f){const n=document.activeElement;(n==null?void 0:n.tagName)==="INPUT"||(n==null?void 0:n.tagName)==="TEXTAREA"||(n==null?void 0:n.classList.contains("form-input"))||p.error("ë¨¼ì € ê²°ì œìš”ì²­ì„ ì„ íƒí•´ì£¼ì„¸ìš”");return}for(let n=0;n<a.length;n++)if(a[n].type.indexOf("image")!==-1){t.preventDefault();const r=a[n].getAsFile();if(r){const o=new FileReader;o.onload=async i=>{var g;const d=(g=i.target)==null?void 0:g.result;if(d)try{const b=y.find(k=>k.id===f),S=[...(b==null?void 0:b.images)||F[f]||[],d];await le.updatePaymentImages(f,S),ae(k=>({...k,[f]:S})),await w(),p.success("ì´ë¯¸ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(b){console.error("ì´ë¯¸ì§€ ì €ì¥ ì‹¤íŒ¨:",b),p.error("ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},o.readAsDataURL(r)}}}},[f,y,F,w]);u.useEffect(()=>(document.addEventListener("paste",xe),()=>document.removeEventListener("paste",xe)),[xe]);const he=(m==null?void 0:m.name)==="ì•ˆíŒ€"?y.filter(t=>D.some(a=>a.name===t.project)):y,Q=[...he].sort((t,a)=>new Date(a.requestDate).getTime()-new Date(t.requestDate).getTime());console.log("[ê²°ì œìš”ì²­ ë””ë²„ê¹…]",{"ì „ì²´ payments":y.length,"í”„ë¡œì íŠ¸ í•„í„°ë§ í›„":he.length,"ì™„ë£Œëœ ê²°ì œ(ì „ì²´)":y.filter(t=>t.status==="completed").length,"ì™„ë£Œëœ ê²°ì œ(í•„í„°ë§ í›„)":he.filter(t=>t.status==="completed").length,"í˜„ì¬ ì‚¬ìš©ì":m==null?void 0:m.name,"í”„ë¡œì íŠ¸ ìˆ˜":D.length});const ce=Q.filter(t=>{var n,r,o;const a=W===""||((n=t.purpose)==null?void 0:n.toLowerCase().includes(W.toLowerCase()))||((r=t.itemName)==null?void 0:r.toLowerCase().includes(W.toLowerCase()))||((o=t.process)==null?void 0:o.toLowerCase().includes(W.toLowerCase())),s=t.status===B,c=B==="pending"||!l.project||t.project===l.project;return a&&s&&c}),Xe=t=>{const a=t.id||t._id||null;if(re===a){Y(null);const r=document.querySelector('input[placeholder="ì˜ˆê¸ˆì£¼ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"]');r&&setTimeout(()=>{r.focus()},100);return}Y(a);const s=Fe(t.name);let c=t.bankName||"",n=t.accountNumber||"";if(n&&!c){const r=n.trim().split(/\s+/);if(r.length>=2){const o=r[0];(o.includes("ì€í–‰")||o.includes("ë±…í¬")||o.includes("ê¸ˆê³ ")||o.includes("ì‹ í˜‘")||o.includes("ìš°ì²´êµ­"))&&(c=o,n=r.slice(1).join(""))}}x(r=>({...r,accountHolder:s,bankName:c,accountNumber:n}))};ce.reduce((t,a)=>{const s=a.materialAmount||0,c=a.laborAmount||0,n=a.amount||0;let r=s,o=c,i=0;return s===0&&c===0&&n>0?a.includesVAT?(r=Math.round(n/1.1),i=n-r):(r=n,i=0):a.includesVAT?(s>0&&(r=Math.round(s/1.1)),c>0&&(o=Math.round(c/1.1)),i=n-(r+o)):i=0,t.material+=r,t.labor+=o,t.vat+=i,t.total+=n,t},{material:0,labor:0,vat:0,total:0});const Ye=async()=>{var a;if(oe){console.log("ğŸ’° Already submitting, ignoring click");return}if(console.log("ğŸ’° handleSave called"),console.log("ğŸ’° Current user:",m),console.log("ğŸ’° Form data:",l),!l.project){p.error("í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”");return}if(!l.itemName){p.error("í•­ëª©ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");return}const t=Number(l.amount)||0;if(t===0){p.error("ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");return}ve(!0);try{const s=I?Math.round(t*.967):t,c=new Date;if(H){const n={project:l.project,requestDate:new Date(l.date),purpose:l.itemName,amount:s,category:"material",urgency:"normal",process:l.process,itemName:l.itemName,includesVAT:M,applyTaxDeduction:I,materialAmount:s,laborAmount:0,originalLaborAmount:0,accountHolder:l.accountHolder,bank:l.bankName,accountNumber:l.accountNumber,bankInfo:l.accountHolder||l.bankName||l.accountNumber?{accountHolder:l.accountHolder,bankName:l.bankName,accountNumber:l.accountNumber}:void 0,updatedAt:c};console.log("ğŸ’° Updating payment:",n),await U(H,n),p.success("ê²°ì œìš”ì²­ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤"),Z(null)}else{const n=l.project||"ê¸°íƒ€",r={id:`payment_${Date.now()}`,project:n,requestDate:new Date(l.date),requestedBy:(m==null?void 0:m.name)||"ì•Œ ìˆ˜ ì—†ìŒ",purpose:l.itemName,amount:s,status:"pending",category:"material",urgency:"normal",process:l.process,itemName:l.itemName,includesVAT:M,applyTaxDeduction:I,materialAmount:s,laborAmount:0,originalLaborAmount:0,accountHolder:l.accountHolder,bank:l.bankName,accountNumber:l.accountNumber,bankInfo:l.accountHolder||l.bankName||l.accountNumber?{accountHolder:l.accountHolder,bankName:l.bankName,accountNumber:l.accountNumber}:void 0,quickText:l.quickText||"",images:l.quickImages,attachments:[],createdAt:c,updatedAt:c};console.log("ğŸ’° Creating payment:",r),console.log("ğŸ’° Images in payment:",((a=l.quickImages)==null?void 0:a.length)||0,"ê°œ");const o=await ie(r);if(p.success("ê²°ì œìš”ì²­ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"),!M&&!I&&l.accountHolder&&l.bankName&&l.accountNumber)try{await lt.post("/payments/send-toss-payment-sms",{recipientPhone:"01089423283",accountHolder:l.accountHolder,bankName:l.bankName,accountNumber:l.accountNumber,amount:s,projectName:n,itemName:l.itemName,process:l.process,paymentId:o}),p.success("ê²°ì œ ìš”ì²­ ë¬¸ìê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(i){console.error("SMS ë°œì†¡ ì‹¤íŒ¨:",i)}}x(n=>({project:n.project,date:L(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),T(!1),$(!1),Y(null),window.innerWidth<768&&J("list")}catch(s){console.error("ğŸ’° Payment save error:",s),p.error("ê²°ì œìš”ì²­ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: "+s.message)}finally{ve(!1)}},Pe=t=>{var a,s,c,n;try{console.log("[handleEdit] Starting edit for payment:",t.id);const r=t.originalMaterialAmount!==void 0?t.originalMaterialAmount:t.materialAmount||0,o=t.originalLaborAmount!==void 0?t.originalLaborAmount:t.laborAmount||0,i={project:t.project||"",date:t.requestDate?L(new Date(t.requestDate),"yyyy-MM-dd"):L(new Date,"yyyy-MM-dd"),process:t.process||"",itemName:t.itemName||t.purpose||"",materialCost:r>0?r.toString():"",laborCost:o>0?o.toString():"",amount:((a=t.amount)==null?void 0:a.toString())||"",accountHolder:((s=t.bankInfo)==null?void 0:s.accountHolder)||"",bankName:((c=t.bankInfo)==null?void 0:c.bankName)||"",accountNumber:((n=t.bankInfo)==null?void 0:n.accountNumber)||"",images:t.attachments||[],quickText:t.quickText||"",quickImages:t.images||[]};console.log("[handleEdit] Setting form data:",i),x(i),T(t.includesVAT||!1),$(t.applyTaxDeduction||!1),N(t.id),Z(t.id),me&&J("form"),console.log("[handleEdit] Edit setup complete"),p.success("ìˆ˜ì •í•  ë‚´ì—­ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤")}catch(r){console.error("[handleEdit] Error:",r),p.error("ìˆ˜ì • ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ")}},Qe=async t=>{var a,s,c;try{const n=((a=t.bankInfo)==null?void 0:a.accountHolder)||t.accountHolder,r=((s=t.bankInfo)==null?void 0:s.bankName)||t.bank,o=((c=t.bankInfo)==null?void 0:c.accountNumber)||t.accountNumber;if(!n||!r||!o){p.error("ê³„ì¢Œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ê²°ì œ ìš”ì²­ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");return}if(!window.confirm(`í† ìŠ¤ ì•±ìœ¼ë¡œ ì´ì²´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ë°›ëŠ”ë¶„: ì—ì´ì¹˜ë¸Œì´ë©
ì€í–‰: ${r}
ê³„ì¢Œ: ${o}
ê¸ˆì•¡: ${t.amount.toLocaleString()}ì›`))return;const d=o.replace(/[-\s]/g,""),g=bt[r]||r,b=xt[r]||"004",C="ì—ì´ì¹˜ë¸Œì´ë©",S=`supertoss://send?amount=${t.amount}&bankCode=${b}&bank=${encodeURIComponent(g)}&accountNo=${d}&receiverName=${encodeURIComponent(C)}&toName=${encodeURIComponent(C)}`;let k=!1;try{window.location.href=S,k=!0,p.success("í† ìŠ¤ ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤...",{duration:3e3}),setTimeout(()=>{const A=/iPhone|iPad|iPod/i.test(navigator.userAgent),Ne=/Android/i.test(navigator.userAgent);(A||Ne)&&p(`í† ìŠ¤ ì•±ì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šê±°ë‚˜ ì‹¤í–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.

ë°›ëŠ”ë¶„: ì—ì´ì¹˜ë¸Œì´ë©
ê³„ì¢Œ: ${o}
ê¸ˆì•¡: ${t.amount.toLocaleString()}ì›

í† ìŠ¤ ì•±ì„ ì§ì ‘ ì—´ì–´ ì´ì²´í•´ì£¼ì„¸ìš”.`,{icon:"ğŸ’³",duration:8e3})},2e3)}catch(A){console.error("í† ìŠ¤ ì•± ì‹¤í–‰ ì‹¤íŒ¨:",A),p(`í† ìŠ¤ ì•± ì‹¤í–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.

ë°›ëŠ”ë¶„: ì—ì´ì¹˜ë¸Œì´ë©
ì€í–‰: ${r}
ê³„ì¢Œ: ${o}
ê¸ˆì•¡: ${t.amount.toLocaleString()}ì›

í† ìŠ¤ ì•±ì„ ì§ì ‘ ì—´ì–´ ì´ì²´í•´ì£¼ì„¸ìš”.`,{icon:"ğŸ’³",duration:1e4})}}catch(n){console.error("ì¦‰ì‹œì†¡ê¸ˆ ì˜¤ë¥˜:",n),p.error(`ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${n.message}`)}},Ge=async t=>{const a=y.find(s=>s.id===t);if(a&&a.quickText){const s=localStorage.getItem("executionMemos"),c=s?JSON.parse(s):{};c[t]=a.quickText,localStorage.setItem("executionMemos",JSON.stringify(c))}K(t,{status:"completed"}),Ke(!1),X("completed"),p.success("ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤"),window.dispatchEvent(new CustomEvent("paymentCompleted")),U(t,{status:"completed"}).then(()=>{$e.getSocket().emit("payment:refresh")}).catch(s=>{console.error("ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨:",s),K(t,{status:"pending"}),X("pending"),p.error("ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ ì‹¤íŒ¨ - ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”")})},Ze=async t=>{var c;if(!f){p.error("ë¨¼ì € ê²°ì œìš”ì²­ì„ ì„ íƒí•´ì£¼ì„¸ìš”");return}const s=Array.from(((c=t.target)==null?void 0:c.files)||[]).filter(n=>n.type.startsWith("image/"));if(s.length!==0){try{const n=await Promise.all(s.map(d=>new Promise((g,b)=>{const C=new FileReader;C.onload=S=>{var A;const k=(A=S.target)==null?void 0:A.result;k?g(k):b(new Error("ì´ë¯¸ì§€ ì½ê¸° ì‹¤íŒ¨"))},C.onerror=()=>b(new Error("FileReader ì˜¤ë¥˜")),C.readAsDataURL(d)}))),r=y.find(d=>d.id===f),i=[...(r==null?void 0:r.images)||F[f]||[],...n];await le.updatePaymentImages(f,i),ae(d=>({...d,[f]:i})),await w(),p.success(`${n.length}ê°œì˜ ì´ë¯¸ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤`)}catch(n){console.error("ì´ë¯¸ì§€ ì €ì¥ ì‹¤íŒ¨:",n),p.error("ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}t.target.value=""}},et=async t=>{if(f)try{const a=y.find(n=>n.id===f),c=((a==null?void 0:a.images)||F[f]||[]).filter((n,r)=>r!==t);await le.updatePaymentImages(f,c),ae(n=>({...n,[f]:c})),await w()}catch(a){console.error("ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨:",a),p.error("ì´ë¯¸ì§€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},tt=t=>{qe(t),z(!0)},at=t=>{t.preventDefault(),_(!0)},st=t=>{t.preventDefault(),_(!1)},nt=async t=>{if(t.preventDefault(),_(!1),!f){p.error("ë¨¼ì € ê²°ì œìš”ì²­ì„ ì„ íƒí•´ì£¼ì„¸ìš”");return}const s=Array.from(t.dataTransfer.files).filter(c=>c.type.startsWith("image/"));if(s.length!==0)try{const c=await Promise.all(s.map(i=>new Promise((d,g)=>{const b=new FileReader;b.onload=C=>{var k;const S=(k=C.target)==null?void 0:k.result;S?d(S):g(new Error("ì´ë¯¸ì§€ ì½ê¸° ì‹¤íŒ¨"))},b.onerror=()=>g(new Error("FileReader ì˜¤ë¥˜")),b.readAsDataURL(i)}))),n=y.find(i=>i.id===f),o=[...(n==null?void 0:n.images)||F[f]||[],...c];await le.updatePaymentImages(f,o),ae(i=>({...i,[f]:o})),await w(),p.success(`${c.length}ê°œì˜ ì´ë¯¸ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤`)}catch(c){console.error("ì´ë¯¸ì§€ ì €ì¥ ì‹¤íŒ¨:",c),p.error("ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}};return e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsx("div",{className:"lg:hidden mb-4",children:e.jsxs("select",{value:l.project,onChange:t=>{x({...l,project:t.target.value}),t.target.value&&localStorage.setItem("lastSelectedProject",t.target.value)},className:"w-full px-3 py-2.5 md:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(m==null?void 0:m.name)!=="ì•ˆíŒ€"&&e.jsx("option",{value:"",children:"í”„ë¡œì íŠ¸ ì„ íƒ"}),D.filter(t=>t.status!=="completed").map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})}),e.jsx("div",{className:"lg:hidden border-b border-gray-200 mb-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("nav",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>J("form"),className:`py-2 px-1 border-b-2 font-medium text-sm ${O==="form"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"ì…ë ¥"}),e.jsx("button",{onClick:()=>J("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${O==="list"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"ë‚´ì—­"}),e.jsx("button",{onClick:()=>J("image"),className:`py-2 px-1 border-b-2 font-medium text-sm ${O==="image"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"ì´ë¯¸ì§€"})]})})}),e.jsxs("div",{className:"payment-container grid grid-cols-1 md:grid-cols-6 ipad:grid-cols-6 ipad-lg:grid-cols-6 ipad-xl:grid-cols-12 ipad-2xl:grid-cols-12 gap-3 md:gap-4",children:[e.jsx("div",{className:`payment-form md:col-span-2 ipad:col-span-2 ipad-lg:col-span-2 ipad-xl:col-span-2 ipad-2xl:col-span-2 bg-white rounded-lg border p-3 md:p-4 overflow-y-auto h-[calc(100vh-180px)] ${O!=="form"?"hidden md:block":""}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden lg:block payment-project-row",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:l.project,onChange:t=>{x({...l,project:t.target.value}),t.target.value&&localStorage.setItem("lastSelectedProject",t.target.value)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(m==null?void 0:m.name)!=="ì•ˆíŒ€"&&e.jsx("option",{value:"",children:"í”„ë¡œì íŠ¸ ì„ íƒ"}),D.filter(t=>t.status!=="completed").map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]}),e.jsxs("select",{value:l.bankName,onChange:t=>x({...l,bankName:t.target.value}),className:"payment-bank-select hidden px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-8",children:[e.jsx("option",{value:"",children:"ì€í–‰"}),e.jsx("option",{value:"KBêµ­ë¯¼ì€í–‰",children:"KBêµ­ë¯¼"}),e.jsx("option",{value:"ì‹ í•œì€í–‰",children:"ì‹ í•œ"}),e.jsx("option",{value:"ìš°ë¦¬ì€í–‰",children:"ìš°ë¦¬"}),e.jsx("option",{value:"í•˜ë‚˜ì€í–‰",children:"í•˜ë‚˜"}),e.jsx("option",{value:"NHë†í˜‘ì€í–‰",children:"ë†í˜‘"}),e.jsx("option",{value:"IBKê¸°ì—…ì€í–‰",children:"ê¸°ì—…"}),e.jsx("option",{value:"ì¹´ì¹´ì˜¤ë±…í¬",children:"ì¹´ì¹´ì˜¤"}),e.jsx("option",{value:"ì¼€ì´ë±…í¬",children:"ì¼€ì´"}),e.jsx("option",{value:"í† ìŠ¤ë±…í¬",children:"í† ìŠ¤"}),e.jsx("option",{value:"ìƒˆë§ˆì„ê¸ˆê³ ",children:"ìƒˆë§ˆì„"}),e.jsx("option",{value:"ì‹ í˜‘",children:"ì‹ í˜‘"}),e.jsx("option",{value:"ìš°ì²´êµ­",children:"ìš°ì²´êµ­"})]})]})}),e.jsxs("div",{children:[e.jsx("textarea",{value:l.quickText,onChange:t=>x({...l,quickText:t.target.value}),onPaste:t=>{var s;const a=(s=t.clipboardData)==null?void 0:s.items;if(a){for(let c=0;c<a.length;c++)if(a[c].type.indexOf("image")!==-1){t.preventDefault();const n=a[c].getAsFile();if(n){const r=new FileReader;r.onload=o=>{var d;const i=(d=o.target)==null?void 0:d.result;x(g=>({...g,quickImages:[...g.quickImages,i]}))},r.readAsDataURL(n)}break}}},onDragOver:t=>{t.preventDefault(),t.stopPropagation()},onDrop:t=>{t.preventDefault(),t.stopPropagation(),Array.from(t.dataTransfer.files).filter(c=>c.type.startsWith("image/")).forEach(c=>{const n=new FileReader;n.onload=r=>{var i;const o=(i=r.target)==null?void 0:i.result;x(d=>({...d,quickImages:[...d.quickImages,o]}))},n.readAsDataURL(c)})},rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:me?"ì²­êµ¬ ë‚´ì—­ ë¶™ì—¬ë„£ê¸°":"ì²­êµ¬ ë‚´ì—­ ë¶™ì—¬ë„£ê¸° (ì´ë¯¸ì§€ ë“œë˜ê·¸ ë˜ëŠ” Ctrl+V)"}),l.quickImages.length>0&&e.jsx("div",{className:"mt-2 mb-2 grid grid-cols-3 gap-2",children:l.quickImages.map((t,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t,alt:`ì²­êµ¬ë‚´ì—­ ${a+1}`,className:"w-full h-20 object-cover rounded-lg border"}),e.jsx("button",{type:"button",onClick:()=>{x(s=>({...s,quickImages:s.quickImages.filter((c,n)=>n!==a)}))},className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"Ã—"})]},a))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:t=>{Array.from(t.target.files||[]).forEach(s=>{const c=new FileReader;c.onload=n=>{var o;const r=(o=n.target)==null?void 0:o.result;x(i=>({...i,quickImages:[...i.quickImages,r]}))},c.readAsDataURL(s)}),t.target.value=""}}),e.jsx("div",{className:"w-full h-10 flex items-center justify-center bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium border border-gray-300",children:"ì´ë¯¸ì§€ ì²¨ë¶€"})]}),e.jsx("button",{type:"button",onClick:Je,className:"h-10 flex items-center justify-center bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors text-sm font-medium",children:"ìë™ ì±„ìš°ê¸°"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ë‚ ì§œ ",l.date&&`(${L(new Date(l.date),"E",{locale:G})})`]}),e.jsx("input",{type:"date",value:l.date,onChange:t=>x({...l,date:t.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer text-gray-900",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundColor:"white",backgroundImage:"none"}})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³µì •"}),e.jsx("button",{ref:ee,type:"button",onClick:()=>q(!0),className:"w-full px-3 py-2 border rounded-lg text-left bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:l.process||e.jsx("span",{className:"text-gray-400",children:"ì„ íƒí•˜ì„¸ìš”"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"í•­ëª©ëª…"}),e.jsx("input",{type:"text",value:l.itemName,onChange:t=>x({...l,itemName:t.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),e.jsxs("div",{className:"space-y-2 payment-amount-section",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³µì‚¬ë¹„"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:l.amount?Number(l.amount).toLocaleString():"",onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,"");x({...l,amount:a})},className:"w-full px-3 py-2 pr-8 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”"}),e.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"ì›"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:t=>t.preventDefault(),onClick:()=>{M||$(!1),T(!M)},children:[e.jsx("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${M?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:M&&e.jsx("span",{className:"text-white text-xs",children:"âœ“"})}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"ë¶€ê°€ì„¸ í¬í•¨ (10%)"})]}),e.jsxs("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:t=>t.preventDefault(),onClick:()=>{I||T(!1),$(!I)},children:[e.jsx("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${I?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:I&&e.jsx("span",{className:"text-white text-xs",children:"âœ“"})}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"3.3% ì„¸ê¸ˆê³µì œ"})]})]})]}),e.jsxs("div",{className:"payment-account-section border-t pt-3 space-y-2",children:[(ue.length>0||ge.length>0&&!re)&&e.jsxs("div",{className:"payment-suggestions-row grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:`payment-contractor-suggestions bg-amber-50 border border-amber-200 rounded-lg p-2 ${ue.length===0?"hidden":""}`,children:[e.jsx("label",{className:"block text-xs font-medium text-amber-900 mb-1",children:"ì¶”ì²œ í˜‘ë ¥ì—…ì²´"}),e.jsx("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:ue.map(t=>{const a=t.id||t._id,s=re===a;return e.jsxs("button",{type:"button",onClick:()=>Xe(t),className:`w-full text-left px-2 py-1.5 rounded border transition-colors ${s?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-400 hover:bg-gray-50"}`,children:[e.jsx("div",{className:"font-medium text-xs text-gray-900",children:Fe(t.name)}),e.jsxs("div",{className:"text-[10px] text-gray-500 truncate",children:[t.bankName||""," ",t.accountNumber||""]})]},a)})})]}),e.jsxs("div",{className:`payment-history-suggestions bg-blue-50 border border-blue-200 rounded-lg p-2 ${ge.length===0||re?"hidden":""}`,children:[e.jsx("label",{className:"block text-xs font-medium text-blue-900 mb-1",children:"ì´ì „ ì†¡ê¸ˆ ë‚´ì—­"}),e.jsx("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:ge.map((t,a)=>e.jsxs("button",{type:"button",onClick:()=>{x(s=>({...s,accountHolder:t.accountHolder,bankName:t.bankName,accountNumber:t.accountNumber})),pe([])},className:"w-full text-left px-2 py-1.5 rounded border border-blue-200 bg-white hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[e.jsx("div",{className:"font-medium text-xs text-gray-900",children:t.accountHolder}),e.jsxs("div",{className:"text-[10px] text-gray-500 truncate",children:[t.bankName," ",t.accountNumber]})]},a))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì˜ˆê¸ˆì£¼"}),e.jsx("input",{type:"text",value:l.accountHolder,onChange:t=>x({...l,accountHolder:t.target.value}),onFocus:()=>be(!0),onBlur:()=>setTimeout(()=>be(!1),150),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"ì˜ˆê¸ˆì£¼ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"}),fe&&Ie.length>0&&e.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Ie.map((t,a)=>e.jsxs("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 border-b last:border-b-0 flex justify-between items-center",onMouseDown:s=>s.preventDefault(),onClick:()=>{x({...l,accountHolder:t.name,bankName:t.bankName||l.bankName,accountNumber:t.accountNumber||l.accountNumber}),be(!1)},children:[e.jsx("span",{className:"font-medium",children:t.name}),e.jsx("span",{className:"text-xs text-gray-500",children:t.source==="contractor"?"í˜‘ë ¥ì—…ì²´":"ì†¡ê¸ˆë‚´ì—­"})]},`${t.name}-${a}`))})]}),e.jsxs("div",{className:"payment-bank-field",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì€í–‰"}),e.jsxs("select",{value:l.bankName,onChange:t=>x({...l,bankName:t.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx("option",{value:"",children:"ì€í–‰ ì„ íƒ"}),e.jsx("option",{value:"KBêµ­ë¯¼ì€í–‰",children:"KBêµ­ë¯¼ì€í–‰"}),e.jsx("option",{value:"ì‹ í•œì€í–‰",children:"ì‹ í•œì€í–‰"}),e.jsx("option",{value:"ìš°ë¦¬ì€í–‰",children:"ìš°ë¦¬ì€í–‰"}),e.jsx("option",{value:"í•˜ë‚˜ì€í–‰",children:"í•˜ë‚˜ì€í–‰"}),e.jsx("option",{value:"NHë†í˜‘ì€í–‰",children:"NHë†í˜‘ì€í–‰"}),e.jsx("option",{value:"IBKê¸°ì—…ì€í–‰",children:"IBKê¸°ì—…ì€í–‰"}),e.jsx("option",{value:"SCì œì¼ì€í–‰",children:"SCì œì¼ì€í–‰"}),e.jsx("option",{value:"í•œêµ­ì”¨í‹°ì€í–‰",children:"í•œêµ­ì”¨í‹°ì€í–‰"}),e.jsx("option",{value:"ì¹´ì¹´ì˜¤ë±…í¬",children:"ì¹´ì¹´ì˜¤ë±…í¬"}),e.jsx("option",{value:"ì¼€ì´ë±…í¬",children:"ì¼€ì´ë±…í¬"}),e.jsx("option",{value:"í† ìŠ¤ë±…í¬",children:"í† ìŠ¤ë±…í¬"}),e.jsx("option",{value:"ìƒˆë§ˆì„ê¸ˆê³ ",children:"ìƒˆë§ˆì„ê¸ˆê³ "}),e.jsx("option",{value:"ì‹ í˜‘",children:"ì‹ í˜‘"}),e.jsx("option",{value:"ìš°ì²´êµ­",children:"ìš°ì²´êµ­"}),e.jsx("option",{value:"KDBì‚°ì—…ì€í–‰",children:"KDBì‚°ì—…ì€í–‰"}),e.jsx("option",{value:"ìˆ˜í˜‘ì€í–‰",children:"ìˆ˜í˜‘ì€í–‰"}),e.jsx("option",{value:"ëŒ€êµ¬ì€í–‰",children:"ëŒ€êµ¬ì€í–‰"}),e.jsx("option",{value:"ë¶€ì‚°ì€í–‰",children:"ë¶€ì‚°ì€í–‰"}),e.jsx("option",{value:"ê²½ë‚¨ì€í–‰",children:"ê²½ë‚¨ì€í–‰"}),e.jsx("option",{value:"ê´‘ì£¼ì€í–‰",children:"ê´‘ì£¼ì€í–‰"}),e.jsx("option",{value:"ì „ë¶ì€í–‰",children:"ì „ë¶ì€í–‰"}),e.jsx("option",{value:"ì œì£¼ì€í–‰",children:"ì œì£¼ì€í–‰"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê³„ì¢Œë²ˆí˜¸"}),e.jsx("input",{type:"text",value:l.accountNumber,onChange:t=>x({...l,accountNumber:t.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"ê³„ì¢Œë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("span",{className:"font-medium",children:"ì´ì•¡"}),e.jsxs("div",{className:"text-right",children:[(M||I)&&e.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["(",M&&"ë¶€ê°€ì„¸ í¬í•¨",I&&"3.3% ì„¸ê¸ˆê³µì œ",")"]}),e.jsxs("span",{className:"font-semibold",children:[(()=>{const t=Number(l.amount)||0;let a=t;return I&&(a=Math.round(t*.967)),a.toLocaleString()})(),"ì›"]})]})]})}),e.jsxs("div",{className:"mt-6 lg:my-[50px]",children:[H&&e.jsx("button",{onClick:()=>{Z(null),x(t=>({project:t.project,date:L(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),T(!1),$(!1),Y(null),p.info("ìˆ˜ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤")},className:"w-full py-2 mb-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 touch-manipulation",style:{minHeight:"48px"},children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:t=>{console.log("ğŸ’° Payment button clicked!",t),console.log("ğŸ’° Button element:",t.currentTarget),console.log("ğŸ’° Form data:",l),Ye()},disabled:oe,className:`w-full py-3 rounded-lg touch-manipulation font-medium text-base ${oe?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800 active:bg-gray-950"}`,style:{minHeight:"48px",WebkitTapHighlightColor:"transparent"},children:oe?"ì²˜ë¦¬ì¤‘...":H?"ìˆ˜ì •ì™„ë£Œ":"ê²°ì œìš”ì²­"})]})]})]})}),e.jsxs("div",{className:`payment-list md:col-span-4 ipad:col-span-4 ipad-lg:col-span-4 ipad-xl:col-span-4 ipad-2xl:col-span-4 bg-white rounded-lg border overflow-hidden flex flex-col h-[calc(100vh-180px)] ${O!=="list"?"hidden md:flex":""}`,children:[e.jsx("div",{className:"bg-gray-50 px-4 pt-3 pb-0 flex-shrink-0",children:e.jsx("div",{className:"flex items-center justify-between gap-4",children:e.jsxs("nav",{className:"flex gap-2 overflow-x-auto flex-1",children:[e.jsxs("button",{onClick:()=>X("pending"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${B==="pending"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["ëŒ€ê¸°ì¤‘",e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${B==="pending"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:Q.filter(t=>t.status==="pending").length})]}),e.jsxs("button",{onClick:()=>X("completed"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${B==="completed"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["ì†¡ê¸ˆì™„ë£Œ",e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${B==="completed"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:Q.filter(t=>t.status==="completed").length})]})]})})}),e.jsx("div",{className:"border-b border-gray-200"}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:ce.length>0?e.jsx("div",{className:"space-y-4",children:B==="completed"?(()=>{const t=ce.reduce((a,s)=>{const c=s.project||"ë¯¸ë¶„ë¥˜";return a[c]||(a[c]=[]),a[c].push(s),a},{});return Object.entries(t).map(([a,s])=>{const c=s.reduce((n,r)=>n+(r.amount||0),0);return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:a}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ì´ ",s.length,"ê±´ Â· ",c.toLocaleString(),"ì›"]})]})}),e.jsx("div",{className:"p-2 space-y-2",children:s.map(n=>{var b,C,S;const r=n.amount||0,o=((b=n.bankInfo)==null?void 0:b.accountHolder)||n.accountHolder||"",i=((C=n.bankInfo)==null?void 0:C.bankName)||n.bank||"",d=((S=n.bankInfo)==null?void 0:S.accountNumber)||n.accountNumber||"",g=o&&i&&d?`${o} | ${i} ${d}`:"ê³„ì¢Œì •ë³´ ì—†ìŒ";return e.jsxs("div",{onClick:()=>N(n.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${f===n.id?"border-gray-900 bg-gray-50":"border-gray-200 bg-white hover:border-gray-400"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2.5",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[n.process&&e.jsxs("span",{className:"text-xs text-gray-500 shrink-0",children:["[",n.process,"]"]}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:n.purpose||n.itemName||"-"})]})}),e.jsxs("div",{className:"text-right ml-3 shrink-0",children:[e.jsxs("p",{className:"text-base font-bold text-gray-900",children:[r.toLocaleString(),"ì›"]}),e.jsxs("p",{className:"text-[10px] text-gray-400",children:[n.requestedBy||"-"," Â· ",L(new Date(n.requestDate),"MM/dd",{locale:G})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2.5 text-xs",children:[e.jsxs("span",{className:"text-gray-400",children:["ìì¬ë¹„ ",(n.materialAmount||0).toLocaleString()]}),e.jsx("span",{className:"text-gray-300",children:"Â·"}),e.jsxs("span",{className:"text-gray-400",children:["ì¸ê±´ë¹„ ",(n.laborAmount||0).toLocaleString()]}),n.includesVAT&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"Â·"}),e.jsx("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-700 text-[10px] rounded",children:"VAT"})]}),n.applyTaxDeduction&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"Â·"}),e.jsx("span",{className:"px-1.5 py-0.5 bg-purple-50 text-purple-700 text-[10px] rounded",children:"3.3%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500 truncate flex-1",children:g}),e.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:k=>{k.stopPropagation(),Pe(n)},className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"ìˆ˜ì •",children:e.jsx(Le,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:async k=>{k.stopPropagation(),window.confirm("ì´ ê²°ì œìš”ì²­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(await V(n.id),p.success("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"))},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"ì‚­ì œ",children:e.jsx(Te,{className:"h-3.5 w-3.5"})})]})]})]},n.id)})})]},a)})})():ce.map(t=>{var o,i,d;const a=t.amount||0,s=((o=t.bankInfo)==null?void 0:o.accountHolder)||t.accountHolder||"",c=((i=t.bankInfo)==null?void 0:i.bankName)||t.bank||"",n=((d=t.bankInfo)==null?void 0:d.accountNumber)||t.accountNumber||"",r=s&&c&&n?`${s} | ${c} ${n}`:"ê³„ì¢Œì •ë³´ ì—†ìŒ";return e.jsxs("div",{onClick:()=>N(t.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${f===t.id?"border-gray-900 bg-gray-50":"border-gray-200 bg-white hover:border-gray-400"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2.5",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[t.process&&e.jsxs("span",{className:"text-xs text-gray-500 shrink-0",children:["[",t.process,"]"]}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:t.purpose||t.itemName||"-"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:t.project||"-"})]}),e.jsxs("div",{className:"text-right ml-3 shrink-0",children:[e.jsxs("p",{className:"text-base font-bold text-gray-900",children:[a.toLocaleString(),"ì›"]}),e.jsxs("p",{className:"text-[10px] text-gray-400",children:[t.requestedBy||"-"," Â· ",L(new Date(t.requestDate),"MM/dd",{locale:G})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2.5 text-xs",children:[e.jsxs("span",{className:"text-gray-400",children:["ìì¬ë¹„ ",(t.materialAmount||0).toLocaleString()]}),e.jsx("span",{className:"text-gray-300",children:"Â·"}),e.jsxs("span",{className:"text-gray-400",children:["ì¸ê±´ë¹„ ",(t.laborAmount||0).toLocaleString()]}),t.includesVAT&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"Â·"}),e.jsx("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-700 text-[10px] rounded",children:"VAT"})]}),t.applyTaxDeduction&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"Â·"}),e.jsx("span",{className:"px-1.5 py-0.5 bg-purple-50 text-purple-700 text-[10px] rounded",children:"3.3%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[e.jsx("div",{className:"text-xs text-gray-500 truncate flex-1",children:r}),e.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:g=>{g.stopPropagation(),Pe(t)},className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"ìˆ˜ì •",children:e.jsx(Le,{className:"h-3.5 w-3.5"})}),e.jsx("button",{onClick:async g=>{g.stopPropagation(),window.confirm("ì´ ê²°ì œìš”ì²­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(await V(t.id),p.success("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"))},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"ì‚­ì œ",children:e.jsx(Te,{className:"h-3.5 w-3.5"})})]})]}),B==="pending"&&(m==null?void 0:m.role)&&["manager","admin"].includes(m.role)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:g=>{if(g.stopPropagation(),t.status==="completed"){p.info("ì´ë¯¸ ì†¡ê¸ˆì™„ë£Œ ì²˜ë¦¬ëœ ê±´ì…ë‹ˆë‹¤");return}Qe(t)},disabled:t.status==="completed",className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${t.status==="completed"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,children:t.status==="completed"?"ì†¡ê¸ˆì™„ë£Œë¨":"ì¦‰ì‹œì†¡ê¸ˆ"}),e.jsx("button",{onClick:g=>{g.stopPropagation(),Ge(t.id)},disabled:t.status==="completed",className:`flex-1 py-1.5 px-2 text-white rounded text-xs font-medium transition-colors ${t.status==="completed"?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:t.status==="completed"?"#9ca3af":"#5f81a5"},onMouseEnter:g=>{t.status!=="completed"&&(g.currentTarget.style.backgroundColor="#4a6b8a")},onMouseLeave:g=>{t.status!=="completed"&&(g.currentTarget.style.backgroundColor="#5f81a5")},children:"ì†¡ê¸ˆì™„ë£Œ"})]})]},t.id)})}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"ê²°ì œìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤"})})]}),e.jsxs("div",{className:`payment-images md:col-span-6 ipad:col-span-6 ipad-lg:col-span-6 ipad-xl:col-span-6 ipad-2xl:col-span-6 bg-white rounded-lg border flex flex-col overflow-hidden h-[calc(100vh-180px)] ${O!=="image"?"hidden lg:flex":""}`,onDragOver:at,onDragLeave:st,onDrop:nt,children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Ze,className:"hidden",id:"image-file-input"}),me&&f&&O==="image"&&(()=>{const t=Q.find(a=>a.id===f);return t?e.jsx("div",{className:"border-b bg-gray-50 p-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:t.purpose||t.itemName}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[t.process||"-"," â€¢ ",L(new Date(t.requestDate),"yyyy.MM.dd",{locale:G})]})]}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["â‚©",(t.amount||0).toLocaleString()]})]})}):null})(),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 relative",onClick:t=>{var s;const a=t.target;if(!a.closest("img")&&!a.closest("button")&&f){const c=Q.find(i=>i.id===f),n=(c==null?void 0:c.images)||[],r=F[f]||[];(n.length>0?n:r).length>0&&((s=document.getElementById("image-file-input"))==null||s.click())}},children:f?(()=>{const t=Q.find(n=>n.id===f),a=(t==null?void 0:t.images)||[],s=F[f]||[],c=a.length>0?a:s;return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"ë©”ëª¨"}),e.jsx("textarea",{value:(t==null?void 0:t.quickText)||(t==null?void 0:t.notes)||"",readOnly:!0,placeholder:"ë©”ëª¨ ì—†ìŒ",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-gray-50 resize-none",rows:8})]}),c.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-3",children:c.map((n,r)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:n,alt:`ì¦ë¹™ ${r+1}`,className:"w-full aspect-square object-contain rounded-lg cursor-pointer hover:opacity-90 transition-opacity border bg-gray-100",onClick:o=>{o.stopPropagation(),tt(n)}}),e.jsx("button",{onClick:o=>{o.stopPropagation(),et(r)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:e.jsx(se,{className:"h-3 w-3"})}),e.jsxs("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1.5 py-0.5 rounded",children:[r+1,"/",c.length]})]},r))}),e.jsx("label",{htmlFor:"image-file-input",className:`block cursor-pointer ${c.length>0?"":"flex-1"}`,onClick:n=>n.stopPropagation(),children:e.jsxs("div",{className:`w-full border-2 border-dashed rounded-lg p-4 text-center transition-colors flex flex-col items-center justify-center ${de?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"} ${c.length>0?"min-h-[80px]":"min-h-[200px]"}`,children:[e.jsx(mt,{className:`mx-auto text-gray-400 mb-1 ${c.length>0?"h-6 w-6":"h-10 w-10 mb-2"}`}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:c.length>0?"ì´ë¯¸ì§€ ì²¨ë¶€":"í´ë¦­í•˜ì—¬ ì„ íƒ"}),c.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ Ctrl+Vë¡œ ë¶™ì—¬ë„£ê¸°"})]})})]})})():e.jsx("div",{className:"h-full flex items-center justify-center min-h-[200px]",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(ut,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"ê²°ì œìš”ì²­ì„ ì„ íƒí•˜ì„¸ìš”"})]})})})]})]}),Re&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"ê³µì • ì„ íƒ"}),e.jsx("button",{onClick:()=>q(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(se,{className:"h-4 w-4 text-gray-500"})})]}),e.jsxs("div",{className:"p-3 overflow-y-auto max-h-[calc(80vh-100px)]",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:ye.map(t=>e.jsx("button",{onClick:()=>{x({...l,process:t}),q(!1)},className:`p-2 text-sm text-center border rounded-lg transition-all ${l.process===t?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:t},t))}),e.jsx("button",{onClick:()=>{x({...l,process:""}),q(!1)},className:"w-full p-2 text-sm text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:"ì„ íƒ ì•ˆí•¨"})]})]})}),e.jsx("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>q(!1),children:e.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute bg-white rounded-lg shadow-xl border border-gray-200",style:{top:ee.current?`${ee.current.getBoundingClientRect().bottom+window.scrollY+4}px`:"50%",left:ee.current?`${ee.current.getBoundingClientRect().left+window.scrollX}px`:"50%"},children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[e.jsx("h2",{className:"text-sm font-bold text-gray-900",children:"ê³µì • ì„ íƒ"}),e.jsx("button",{onClick:()=>q(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(se,{className:"h-3 w-3 text-gray-500"})})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"grid grid-cols-4 gap-1.5 mb-2",children:ye.map(t=>e.jsx("button",{onClick:()=>{x({...l,process:t}),q(!1)},className:`p-1.5 text-xs text-center border rounded-lg transition-all whitespace-nowrap ${l.process===t?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:t},t))}),e.jsx("button",{onClick:()=>{x({...l,process:""}),q(!1)},className:"w-full p-1.5 text-xs text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:"ì„ íƒ ì•ˆí•¨"})]})]})})]}),ne&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>z(!1),children:e.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),z(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:e.jsx(se,{className:"h-8 w-8"})}),e.jsx("img",{src:Ee,alt:"ì›ë³¸ ì´ë¯¸ì§€",className:"max-w-full max-h-[90vh] object-contain",onClick:t=>t.stopPropagation()})]})}),_e&&e.jsx(ht,{projectName:Ve,onClose:()=>Oe(!1)})]})};export{Tt as default};
