import{u as he,z as c,j as s,l as K}from"./index-DHFsVlfa.js";import{r as o}from"./vendor-react-B9Yt5e0k.js";import{u as Se}from"./dataStore-CeecEqYp.js";import{u as Ce}from"./useFilteredProjects-DQq2t5Zw.js";import{u as Ee}from"./index.esm-CwHht2tV.js";import{f as je}from"./formatters-15aXprTM.js";import{n as Le,T as Be,b as ne,X as He}from"./vendor-ui-CcgAtStV.js";import{p as E}from"./vendor-date-9Cl9d1sr.js";import"./vendor-data-BwGxWJIh.js";const ie=["상준","신애","재천","민기","재성","재현","안팀"],ze=()=>{const{user:_}=he(),W=Ce(),{asRequests:w,loadASRequestsFromAPI:X,addASRequestToAPI:ae,updateASRequestInAPI:g,deleteASRequestFromAPI:me}=Se(),oe=W.map(e=>e.name),x=(_==null?void 0:_.name)==="안팀"?w.filter(e=>oe.includes(e.project)):w,[l,G]=o.useState(null),[D,J]=o.useState("active"),[i,u]=o.useState(null),k=o.useRef(null),[Q,Ue]=o.useState(null),[_e,T]=o.useState(!1),[le,I]=o.useState(!1),[de,ce]=o.useState(""),[M,ue]=o.useState(!1),[$,Y]=o.useState(!1),{register:N,handleSubmit:pe,setValue:p,reset:F,formState:{errors:Z}}=Ee(),[j,b]=o.useState([]),[L,B]=o.useState(""),[H,v]=o.useState("오전"),[A,V]=o.useState(9),[q,U]=o.useState(0),ee=W.filter(e=>e.status==="completed");o.useEffect(()=>{X().catch(e=>{console.error("Failed to load AS requests:",e),c.error("AS 요청 데이터를 불러오는데 실패했습니다")})},[X]),o.useEffect(()=>{if(l){if(p("project",l.project),p("client",l.client),p("siteAddress",l.siteAddress),p("description",l.description),l.requestDate&&p("requestDate",new Date(l.requestDate).toISOString().split("T")[0]),l.scheduledVisitDate&&p("scheduledVisitDate",new Date(l.scheduledVisitDate).toISOString().split("T")[0]),l.scheduledVisitTime){const[e,t]=l.scheduledVisitTime.split(":"),r=parseInt(e,10),a=parseInt(t,10);r>=12?(v("오후"),V(r===12?12:r-12)):(v("오전"),V(r===0?12:r)),U(a)}b(l.assignedTo||[])}else F(),b([]),v("오전"),V(9),U(0),B("")},[l,p,F]),o.useEffect(()=>{var e,t;i&&k.current&&((t=(e=k.current).showPicker)==null||t.call(e))},[i]),o.useEffect(()=>{const e=()=>{ue(t=>{const r=!t;return window.dispatchEvent(new CustomEvent("mobileFormStateChange",{detail:{isOpen:r}})),r})};return window.addEventListener("headerAddButtonClick",e),()=>window.removeEventListener("headerAddButtonClick",e)},[]),o.useEffect(()=>{window.dispatchEvent(new CustomEvent("mobileFormStateChange",{detail:{isOpen:M}}))},[M]);const se=()=>{G(null),F(),b([]),v("오전"),V(9),U(0),B("")},fe=async e=>{if(!$){Y(!0);try{let t;if(e.scheduledVisitDate){let a=A;H==="오후"&&A!==12?a=A+12:H==="오전"&&A===12&&(a=0),t=`${a.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`}const r={...e,requestDate:new Date(e.requestDate),scheduledVisitDate:e.scheduledVisitDate?new Date(e.scheduledVisitDate):void 0,scheduledVisitTime:t,assignedTo:j};if(l)await g(l.id,r),c.success("AS 요청이 수정되었습니다");else{const a={id:"",...r};await ae(a),c.success("AS 요청이 추가되었습니다")}se()}catch(t){console.error("Failed to save AS request:",t),c.error("AS 요청 저장에 실패했습니다")}finally{Y(!1)}}},ge=e=>{b(t=>t.includes(e)?t.filter(r=>r!==e):[...t,e])},te=()=>{L.trim()&&!j.includes(L.trim())&&(b(e=>[...e,L.trim()]),B(""))},xe=e=>{b(t=>t.filter(r=>r!==e))},Ne=e=>{G(e),window.scrollTo({top:0,behavior:"smooth"})},be=async(e,t)=>{if(window.confirm(`"${t}" AS 요청을 삭제하시겠습니까?

삭제된 내역은 복구할 수 없습니다.`))try{await me(e),c.success("AS 요청이 삭제되었습니다")}catch(r){console.error("Failed to delete AS request:",r),c.error("AS 요청 삭제에 실패했습니다")}},re=(e,t)=>{if(t==="scheduledVisitDate"){const r=w.find(d=>d.id===e);let a={period:"오전",hour:9,minute:0};if(r!=null&&r.scheduledVisitTime){const[d,n]=r.scheduledVisitTime.split(":"),m=parseInt(d,10),f=parseInt(n,10);a={period:m>=12?"오후":"오전",hour:m===0?12:m>12?m-12:m,minute:f}}u({requestId:e,field:t,time:a})}else u({requestId:e,field:t})},P=async(e,t)=>{if(!i)return;const r=new Date(e);if(!isNaN(r.getTime()))try{const a={[i.field]:r};if(i.field==="scheduledVisitDate"&&t){let d=t.hour;t.period==="오후"&&t.hour!==12?d=t.hour+12:t.period==="오전"&&t.hour===12&&(d=0),a.scheduledVisitTime=`${d.toString().padStart(2,"0")}:${t.minute.toString().padStart(2,"0")}`}await g(i.requestId,a),u(null)}catch(a){console.error("Failed to update date:",a),c.error("날짜 수정에 실패했습니다"),u(null)}},R=o.useCallback(e=>{var r;const t=(r=e.clipboardData)==null?void 0:r.items;if(t){for(let a=0;a<t.length;a++)if(t[a].type.indexOf("image")!==-1){e.preventDefault();const d=t[a].getAsFile();if(d){const n=new FileReader;n.onload=m=>{var S,C;const f=(S=m.target)==null?void 0:S.result,h=Q||((C=e.target.closest("[data-request-id]"))==null?void 0:C.getAttribute("data-request-id"));if(h){const y=x.find(z=>z.id===h);if(y){const z=[...y.images||[],f];g(h,{images:z}),c.success("이미지가 추가되었습니다")}}else c.error("AS 요청 카드 위에서 붙여넣기 해주세요")},n.readAsDataURL(d)}}}},[Q,x,g]);o.useEffect(()=>(document.addEventListener("paste",R),()=>document.removeEventListener("paste",R)),[R]);const ve=e=>{ce(e),I(!0)},ye=(e,t)=>{e.preventDefault(),e.stopPropagation(),t&&T(!0)},De=e=>{e.preventDefault(),e.stopPropagation(),T(!1)},ke=(e,t)=>{e.preventDefault(),e.stopPropagation(),T(!1);const r=Array.from(e.dataTransfer.files),a=[],d=r.filter(n=>n.type.startsWith("image/"));if(d.length===0){c.error("이미지 파일만 업로드 가능합니다");return}d.forEach(n=>{const m=new FileReader;m.onload=f=>{var S;const h=(S=f.target)==null?void 0:S.result;if(a.push(h),a.length===d.length){const C=x.find(y=>y.id===t);if(C){const y=[...C.images||[],...a];g(t,{images:y}),c.success(`${a.length}개의 이미지가 추가되었습니다`)}}},m.readAsDataURL(n)})},O=async(e,t)=>{try{const r={status:t};t==="completed"?r.completionDate=new Date:t==="pending"?r.completionDate=void 0:t==="revisit"&&(r.scheduledVisitDate=void 0,r.completionDate=void 0),await g(e,r);const a=t==="completed"?"AS 완료":t==="revisit"?"재방문 필요":"진행중";c.success(`상태가 "${a}"으로 변경되었습니다`)}catch(r){console.error("Failed to update status:",r),c.error("상태 변경에 실패했습니다")}},Ae=e=>{const t={pending:{label:"대기중",color:"bg-gray-100 text-gray-700 border-gray-300"},completed:{label:"AS 완료",color:"bg-green-100 text-green-700 border-green-300"},revisit:{label:"재방문",color:"bg-orange-100 text-orange-700 border-orange-300"}},r=t[e]||t.pending;return s.jsxDEV("span",{className:`px-2 py-1 text-xs font-medium border rounded ${r.color}`,children:r.label},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:402,columnNumber:7},void 0)},Ve=x.filter(e=>D==="completed"?e.status==="completed":e.status!=="completed");return s.jsxDEV("div",{className:"as-container grid grid-cols-1 lg:grid-cols-5 gap-4",children:[s.jsxDEV("div",{className:`as-form lg:col-span-1 ${M?"block":"hidden lg:block"}`,children:s.jsxDEV("div",{className:"card p-4 sticky top-4",children:s.jsxDEV("form",{onSubmit:pe(fe),className:"space-y-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("select",{...N("project",{required:"프로젝트를 선택하세요"}),className:"input text-sm",onChange:e=>{const t=ee.find(r=>r.name===e.target.value);t&&(p("client",t.client),p("siteAddress",t.location))},children:[s.jsxDEV("option",{value:"",children:"프로젝트 선택 (공사완료 현장)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:435,columnNumber:17},void 0),ee.map(e=>s.jsxDEV("option",{value:e.name,children:e.name},e.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:437,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:424,columnNumber:15},void 0),Z.project&&s.jsxDEV("p",{className:"mt-1 text-xs text-red-600",children:String(Z.project.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:443,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:423,columnNumber:13},void 0),s.jsxDEV("input",{type:"hidden",...N("client")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:448,columnNumber:13},void 0),s.jsxDEV("input",{type:"hidden",...N("siteAddress")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:449,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"내용"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:452,columnNumber:15},void 0),s.jsxDEV("textarea",{...N("description"),rows:3,className:"input text-sm"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:455,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:451,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"담당자 (중복 선택 가능)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:464,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[ie.map(e=>s.jsxDEV("button",{type:"button",onClick:()=>ge(e),className:`px-2.5 py-1.5 rounded border transition-colors text-xs ${j.includes(e)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:e},e,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:470,columnNumber:19},void 0)),j.filter(e=>!ie.includes(e)).map(e=>s.jsxDEV("button",{type:"button",onClick:()=>xe(e),className:"px-2.5 py-1.5 rounded border transition-colors text-xs bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[e," ×"]},e,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:487,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:468,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex gap-2",children:[s.jsxDEV("input",{type:"text",value:L,onChange:e=>B(e.target.value),onKeyPress:e=>{e.key==="Enter"&&(e.preventDefault(),te())},placeholder:"직접 입력",className:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:500,columnNumber:17},void 0),s.jsxDEV("button",{type:"button",onClick:te,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded text-xs font-medium hover:bg-gray-200 transition-colors",children:"추가"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:513,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:499,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:463,columnNumber:13},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"요청일"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:526,columnNumber:17},void 0),s.jsxDEV("input",{...N("requestDate"),type:"date",className:"w-full px-2.5 py-2 text-xs bg-white text-gray-700 border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:529,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:525,columnNumber:15},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"방문예정일"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:537,columnNumber:17},void 0),s.jsxDEV("input",{...N("scheduledVisitDate"),type:"date",className:"w-full px-2.5 py-2 text-xs bg-white text-gray-700 border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:540,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:536,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:524,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"방문 시간"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:550,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("div",{className:"flex gap-1",children:[s.jsxDEV("button",{type:"button",onClick:()=>v("오전"),className:`px-2 py-1.5 text-xs rounded border transition-colors ${H==="오전"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"오전"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:555,columnNumber:19},void 0),s.jsxDEV("button",{type:"button",onClick:()=>v("오후"),className:`px-2 py-1.5 text-xs rounded border transition-colors ${H==="오후"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"오후"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:566,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:554,columnNumber:17},void 0),s.jsxDEV("select",{value:A,onChange:e=>V(parseInt(e.target.value)),className:"px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(e=>s.jsxDEV("option",{value:e,children:[e,"시"]},e,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:585,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:579,columnNumber:17},void 0),s.jsxDEV("select",{value:q,onChange:e=>U(parseInt(e.target.value)),className:"px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(e=>s.jsxDEV("option",{value:e,children:[e,"분"]},e,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:597,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:591,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:553,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:549,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex gap-2 pt-2",children:[l&&s.jsxDEV("button",{type:"button",onClick:se,className:"flex-1 btn btn-outline text-sm py-2",children:"취소"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:608,columnNumber:17},void 0),s.jsxDEV("button",{type:"submit",disabled:$,className:"flex-1 btn btn-primary text-sm py-2 disabled:opacity-50",children:$?"저장 중...":l?"수정":"추가"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:616,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:606,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:421,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:420,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:419,columnNumber:7},void 0),s.jsxDEV("div",{className:"as-list lg:col-span-4 space-y-4",children:[s.jsxDEV("div",{className:"border-b border-gray-200",children:s.jsxDEV("nav",{className:"flex space-x-4 md:space-x-8",children:[s.jsxDEV("button",{onClick:()=>J("active"),className:`py-2 md:py-3 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap ${D==="active"?"border-gray-700 text-gray-700":"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"}`,children:["진행중",s.jsxDEV("span",{className:`ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold ${D==="active"?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"}`,children:x.filter(e=>e.status!=="completed").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:642,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:633,columnNumber:13},void 0),s.jsxDEV("button",{onClick:()=>J("completed"),className:`py-2 md:py-3 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap ${D==="completed"?"border-gray-700 text-gray-700":"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"}`,children:["AS 완료",s.jsxDEV("span",{className:`ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold ${D==="completed"?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"}`,children:x.filter(e=>e.status==="completed").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:657,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:648,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:632,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:631,columnNumber:9},void 0),s.jsxDEV("div",{className:"as-cards grid grid-cols-1 md:grid-cols-2 gap-4",children:Ve.map(e=>{var t,r,a,d;return s.jsxDEV("div",{"data-request-id":e.id,className:"card p-4 hover:border-gray-400 transition-colors",onDragOver:n=>ye(n,e.id),onDragLeave:De,onDrop:n=>ke(n,e.id),children:[s.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:[s.jsxDEV("div",{className:"flex-1",children:[s.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:Ae(e.status)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:679,columnNumber:19},void 0),s.jsxDEV("h3",{className:"font-bold text-base text-gray-900",children:e.project},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:682,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:678,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex items-center space-x-1",children:[s.jsxDEV("button",{onClick:()=>Ne(e),className:"text-gray-600 hover:text-gray-700 p-1",children:s.jsxDEV(Le,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:689,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:685,columnNumber:19},void 0),s.jsxDEV("button",{onClick:()=>be(e.id,e.project),className:"text-rose-600 hover:text-rose-700 p-1",children:s.jsxDEV(Be,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:695,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:691,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:684,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:677,columnNumber:15},void 0),s.jsxDEV("div",{className:"space-y-2 text-sm",children:[s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-gray-500",children:"현장주소"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:702,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-gray-900 mt-0.5",children:e.siteAddress},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:703,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:701,columnNumber:17},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-gray-500",children:"AS 내용"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:707,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-gray-900 mt-0.5",children:e.description},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:708,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:706,columnNumber:17},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-gray-500",children:"담당자"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:712,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-gray-900 mt-0.5",children:e.assignedTo&&e.assignedTo.length>0?e.assignedTo.join(", "):" "},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:713,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:711,columnNumber:17},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-gray-500 mb-1",children:"요청일"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:722,columnNumber:21},void 0),s.jsxDEV("div",{className:"relative inline-block",children:[(i==null?void 0:i.requestId)===e.id&&(i==null?void 0:i.field)==="requestDate"&&s.jsxDEV("input",{ref:k,type:"date",defaultValue:E(e.requestDate,"yyyy-MM-dd"),onChange:n=>P(n.target.value),onBlur:()=>u(null),className:"absolute left-0 top-0 w-auto h-auto opacity-0 z-50",style:{pointerEvents:"auto"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:725,columnNumber:25},void 0),s.jsxDEV("button",{onClick:()=>re(e.id,"requestDate"),className:"flex items-center space-x-1 text-xs text-gray-900 hover:text-gray-600 transition-colors",children:[s.jsxDEV(ne,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:739,columnNumber:25},void 0),s.jsxDEV("span",{children:E(e.requestDate,"MM.dd (eee)",{locale:K})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:740,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:735,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:723,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:721,columnNumber:19},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-gray-500 mb-1",children:"방문예정일"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:746,columnNumber:21},void 0),s.jsxDEV("div",{className:"relative inline-block",children:[(i==null?void 0:i.requestId)===e.id&&(i==null?void 0:i.field)==="scheduledVisitDate"&&s.jsxDEV("div",{className:"absolute left-0 top-0 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-3",style:{minWidth:"280px"},children:s.jsxDEV("div",{className:"space-y-3",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"날짜"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:752,columnNumber:31},void 0),s.jsxDEV("input",{ref:k,type:"date",defaultValue:e.scheduledVisitDate?E(e.scheduledVisitDate,"yyyy-MM-dd"):"",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",onChange:n=>{const m=n.target.value,f=i.time||{period:"오전",hour:9,minute:0};P(m,f)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:753,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:751,columnNumber:29},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"시간"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:767,columnNumber:31},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("div",{className:"flex gap-1",children:[s.jsxDEV("button",{type:"button",onClick:()=>u(n=>n?{...n,time:{...n.time,period:"오전"}}:null),className:`px-2 py-1 text-xs rounded border transition-colors ${((t=i==null?void 0:i.time)==null?void 0:t.period)==="오전"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"오전"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:770,columnNumber:35},void 0),s.jsxDEV("button",{type:"button",onClick:()=>u(n=>n?{...n,time:{...n.time,period:"오후"}}:null),className:`px-2 py-1 text-xs rounded border transition-colors ${((r=i==null?void 0:i.time)==null?void 0:r.period)==="오후"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"오후"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:781,columnNumber:35},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:769,columnNumber:33},void 0),s.jsxDEV("select",{value:((a=i==null?void 0:i.time)==null?void 0:a.hour)||9,onChange:n=>u(m=>m?{...m,time:{...m.time,hour:parseInt(n.target.value)}}:null),className:"px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(n=>s.jsxDEV("option",{value:n,children:[n,"시"]},n,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:800,columnNumber:37},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:794,columnNumber:33},void 0),s.jsxDEV("select",{value:((d=i==null?void 0:i.time)==null?void 0:d.minute)||0,onChange:n=>u(m=>m?{...m,time:{...m.time,minute:parseInt(n.target.value)}}:null),className:"px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(n=>s.jsxDEV("option",{value:n,children:[n,"분"]},n,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:812,columnNumber:37},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:806,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:768,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:766,columnNumber:29},void 0),s.jsxDEV("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[s.jsxDEV("button",{type:"button",onClick:()=>u(null),className:"px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"취소"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:821,columnNumber:31},void 0),s.jsxDEV("button",{type:"button",onClick:()=>{const n=k.current;n&&(i!=null&&i.time)&&P(n.value,i.time)},className:"px-3 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800",children:"확인"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:828,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:820,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:750,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:749,columnNumber:25},void 0),s.jsxDEV("button",{onClick:()=>re(e.id,"scheduledVisitDate"),className:"flex items-center space-x-1 text-xs text-gray-900 hover:text-gray-600 transition-colors",children:[s.jsxDEV(ne,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:848,columnNumber:25},void 0),s.jsxDEV("span",{children:[e.scheduledVisitDate?E(e.scheduledVisitDate,"MM.dd (eee)",{locale:K}):"미정",e.scheduledVisitTime&&` ${je(e.scheduledVisitTime)}`]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:849,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:844,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:747,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:745,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:720,columnNumber:17},void 0),e.status!=="completed"&&s.jsxDEV("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-100",children:[s.jsxDEV("button",{onClick:()=>O(e.id,"completed"),className:"flex-1 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:"AS 완료"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:861,columnNumber:21},void 0),s.jsxDEV("button",{onClick:()=>O(e.id,"revisit"),className:"flex-1 px-3 py-2 text-xs font-medium bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"재방문"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:867,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:860,columnNumber:19},void 0),e.status==="completed"&&s.jsxDEV("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[s.jsxDEV("button",{onClick:()=>O(e.id,"pending"),className:"w-full px-3 py-2 text-xs font-medium bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors mb-2",children:"진행중으로 변경"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:877,columnNumber:21},void 0),s.jsxDEV("p",{className:"text-xs text-gray-500 text-center",children:e.completionDate&&`완료일: ${E(e.completionDate,"yyyy.MM.dd",{locale:K})}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:883,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:876,columnNumber:19},void 0),e.images&&e.images.length>0&&s.jsxDEV("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[s.jsxDEV("p",{className:"text-xs text-gray-500 mb-2",children:["첨부 이미지 (",e.images.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:892,columnNumber:21},void 0),s.jsxDEV("div",{className:"grid grid-cols-3 gap-2",children:e.images.map((n,m)=>s.jsxDEV("img",{src:n,alt:`AS 이미지 ${m+1}`,className:"w-full h-20 object-cover rounded cursor-pointer hover:opacity-75",onClick:()=>ve(n)},m,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:895,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:893,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:891,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:700,columnNumber:15},void 0)]},e.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:669,columnNumber:13},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:667,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:629,columnNumber:7},void 0),le&&s.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>I(!1),children:s.jsxDEV("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[s.jsxDEV("button",{onClick:e=>{e.stopPropagation(),I(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:s.jsxDEV(He,{className:"h-8 w-8"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:926,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:919,columnNumber:13},void 0),s.jsxDEV("img",{src:de,alt:"원본 이미지",className:"max-w-full max-h-[90vh] object-contain",onClick:e=>e.stopPropagation()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:928,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:918,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:914,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AfterService.tsx",lineNumber:417,columnNumber:5},void 0)};export{ze as default};
