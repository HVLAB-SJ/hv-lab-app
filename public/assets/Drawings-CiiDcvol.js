import{a as ge,u as vs,j as s}from"./index-BXDj-KrE.js";import{r as i}from"./vendor-react-B9Yt5e0k.js";import{u as Vs}from"./useFilteredProjects-D8Fxj3tw.js";import{A as ts,i as Cs,T as ne,j as rs,F as as,X as js}from"./vendor-ui-CcgAtStV.js";import"./vendor-data-BwGxWJIh.js";import"./vendor-date-9Cl9d1sr.js";import"./dataStore-D1iRZ9dK.js";class Es{async uploadImage(D){var h,o;const a=new FormData;a.append("image",D);try{const d=await ge.post("/drawings/upload",a,{headers:{"Content-Type":"multipart/form-data"}});return console.log("âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„±ê³µ:",d.data.imageUrl),d.data.imageUrl}catch(d){console.error("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨:",d);const w=((o=(h=d.response)==null?void 0:h.data)==null?void 0:o.error)||d.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜";throw new Error(`ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨: ${w}`)}}async setItem(D,a,h){var o,d,w,P,V,p,H;try{console.log("[drawingStorage] ë„ë©´ ì €ì¥ ìš”ì²­:",{projectId:a.projectId,type:a.type,imageUrl:a.imageUrl?"provided":"none",markersCount:((o=a.markers)==null?void 0:o.length)||0,roomsCount:((d=a.rooms)==null?void 0:d.length)||0}),await ge.post("/drawings",{projectId:a.projectId,type:a.type,imageUrl:a.imageUrl,markers:a.markers,rooms:a.rooms,naverTypeSqm:a.naverTypeSqm,naverTypePyeong:a.naverTypePyeong,naverArea:a.naverArea}),console.log("âœ… ë„ë©´ ë°ì´í„° ì €ì¥ ì„±ê³µ")}catch(k){console.error("ì„œë²„ ë„ë©´ ì €ì¥ ì‹¤íŒ¨:",k);const E=((P=(w=k.response)==null?void 0:w.data)==null?void 0:P.error)||"ì €ì¥ ì‹¤íŒ¨",B=((p=(V=k.response)==null?void 0:V.data)==null?void 0:p.details)||k.message||"",v=((H=k.response)==null?void 0:H.status)||"",R=new Error(`${E}${B?` (${B})`:""}`);throw R.statusCode=v,R.response=k.response,R}}async getItem(D){var a,h,o;try{const d=D.split("-");if(d.length<4)return console.error("ì˜ëª»ëœ í‚¤ í˜•ì‹:",D),null;const w=d[2],P=d.slice(3).join("-");console.log(`[drawingStorage] ë„ë©´ ì¡°íšŒ ìš”ì²­: projectId=${w}, type=${P}`);const p=(await ge.get(`/drawings/${w}/${encodeURIComponent(P)}`)).data;return{type:p.type,projectId:p.projectId,imageUrl:p.imageUrl,markers:p.markers||[],rooms:p.rooms||[],lastModified:new Date(p.updatedAt),naverTypeSqm:p.naverTypeSqm,naverTypePyeong:p.naverTypePyeong,naverArea:p.naverArea}}catch(d){if(((a=d.response)==null?void 0:a.status)===404)return console.log("[drawingStorage] ë„ë©´ ë°ì´í„° ì—†ìŒ (404)"),null;if(((h=d.response)==null?void 0:h.status)===500)return console.warn("[drawingStorage] ì„œë²„ ì—ëŸ¬, ë¹ˆ ë°ì´í„° ë°˜í™˜:",(o=d.response)==null?void 0:o.data),null;throw console.error("ì„œë²„ ë„ë©´ ì¡°íšŒ ì‹¤íŒ¨:",d),d}}async removeItem(D){try{const a=D.split("-");if(a.length<4){console.error("ì˜ëª»ëœ í‚¤ í˜•ì‹:",D);return}const h=a[2],o=a.slice(3).join("-");await ge.delete(`/drawings/${h}/${encodeURIComponent(o)}`)}catch(a){throw console.error("ì„œë²„ ë„ë©´ ì‚­ì œ ì‹¤íŒ¨:",a),a}}async clearAll(){return console.warn("ì„œë²„ ê¸°ë°˜ ì €ì¥ì†Œì—ì„œëŠ” clearAllì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."),0}async migrateFromLocalStorage(D){let a=0;const h=[];for(let o=0;o<localStorage.length;o++){const d=localStorage.key(o);d&&d.startsWith("drawing-")&&h.push(d)}return h.forEach(o=>{localStorage.removeItem(o),a++}),a>0&&console.log(`âœ… ${a}ê°œì˜ ë¡œì»¬ ë„ë©´ ë°ì´í„°ë¥¼ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.`),a}async estimateSize(){return{usage:0,quota:0}}}const fe=new Es,Ne=["ë„¤ì´ë²„ë„ë©´","ê±´ì¶•ë„ë©´","í‰ë©´ë„","3Dë„ë©´","ì² ê±°ë„ë©´","ì „ê¸°ë„ë©´","ì„¤ë¹„ë„ë©´","ëª©ê³µë„ë©´","íƒ€ì¼ë„ë©´","ê¸ˆì†ë„ë©´","ê°€êµ¬ë„ë©´","ì„¸ë¼ë¯¹ë„ë©´","ë””í…Œì¼ë„ë©´","ì²œì¥ë„ë©´"],xe=[{id:"outlet-1",name:"ì½˜ì„¼íŠ¸ 1êµ¬",symbol:"C1",count:1,color:"#ef4444",category:"outlet"},{id:"outlet-2",name:"ì½˜ì„¼íŠ¸ 2êµ¬",symbol:"C2",count:2,color:"#ef4444",category:"outlet"},{id:"outlet-3",name:"ì½˜ì„¼íŠ¸ 3êµ¬",symbol:"C3",count:3,color:"#ef4444",category:"outlet"},{id:"outlet-4",name:"ì½˜ì„¼íŠ¸ 4êµ¬",symbol:"C4",count:4,color:"#ef4444",category:"outlet"},{id:"switch-1",name:"ìŠ¤ìœ„ì¹˜ 1êµ¬",symbol:"S1",count:1,color:"#3b82f6",category:"switch"},{id:"switch-2",name:"ìŠ¤ìœ„ì¹˜ 2êµ¬",symbol:"S2",count:2,color:"#3b82f6",category:"switch"},{id:"switch-3",name:"ìŠ¤ìœ„ì¹˜ 3êµ¬",symbol:"S3",count:3,color:"#3b82f6",category:"switch"},{id:"switch-4",name:"ìŠ¤ìœ„ì¹˜ 4êµ¬",symbol:"S4",count:4,color:"#3b82f6",category:"switch"},{id:"switch-5",name:"ìŠ¤ìœ„ì¹˜ 5êµ¬",symbol:"S5",count:5,color:"#3b82f6",category:"switch"},{id:"switch-6",name:"ìŠ¤ìœ„ì¹˜ 6êµ¬",symbol:"S6",count:6,color:"#3b82f6",category:"switch"},{id:"switch-7",name:"ìŠ¤ìœ„ì¹˜ 7êµ¬",symbol:"S7",count:7,color:"#3b82f6",category:"switch"},{id:"switch-8",name:"ìŠ¤ìœ„ì¹˜ 8êµ¬",symbol:"S8",count:8,color:"#3b82f6",category:"switch"},{id:"light",name:"ì¡°ëª…",symbol:"â—",count:1,color:"#f59e0b",category:"light"}],Ms=()=>{const{user:t}=vs(),D=Vs(),[a,h]=i.useState(()=>{try{const e=localStorage.getItem("user");if(e){const n=JSON.parse(e);return localStorage.getItem(`drawings-selected-project-${n.id}`)||""}}catch(e){console.error("Failed to load saved project:",e)}return""}),[o,d]=i.useState(()=>{try{const e=localStorage.getItem("user");if(e){const n=JSON.parse(e),r=localStorage.getItem(`drawings-selected-type-${n.id}`);if(r&&Ne.includes(r))return r}}catch(e){console.error("Failed to load saved drawing type:",e)}return"ë„¤ì´ë²„ë„ë©´"}),[w,P]=i.useState(xe[0].id),[V,p]=i.useState([]),[H,k]=i.useState(0),[E,B]=i.useState([]),[v,R]=i.useState([]),T=V[H]||"",[te,O]=i.useState(""),[re,J]=i.useState(""),[ae,G]=i.useState(""),[W,is]=i.useState("marker"),[Y,K]=i.useState("full"),[C,Q]=i.useState(null),[Ee,Ue]=i.useState(!1),[ie,Ae]=i.useState(null),[be,Le]=i.useState(!1),[_,He]=i.useState(null),[I,he]=i.useState(null),[os,De]=i.useState(!1),[oe,ye]=i.useState(""),[Be,we]=i.useState(null),[ms,_e]=i.useState(!1),[X,me]=i.useState(1),[U,z]=i.useState({x:0,y:0}),[le,F]=i.useState(!1),[de,ke]=i.useState({x:0,y:0}),[Z,ve]=i.useState(!1),q=i.useRef(0),Se=i.useRef({x:0,y:0}),Ve=i.useRef(0),ls=i.useRef({x:0,y:0}),ee=i.useRef(null),$=i.useRef(null),Me=i.useRef(null),ce=i.useRef(!1),Ie=i.useRef(!1),se=i.useRef(null),$e=i.useRef(!1);i.useEffect(()=>{if(t!=null&&t.id&&!$e.current){if($e.current=!0,!a){const n=localStorage.getItem(`drawings-selected-project-${t.id}`);n&&h(n)}const e=localStorage.getItem(`drawings-selected-type-${t.id}`);e&&Ne.includes(e)&&e!==o&&d(e)}},[t==null?void 0:t.id]),i.useEffect(()=>{t!=null&&t.id&&!Ie.current&&(Ie.current=!0,fe.migrateFromLocalStorage(t.id).then(e=>{e>0&&console.log(`âœ… ${e}ê°œì˜ ë„ë©´ì„ ì„œë²„ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í–ˆìŠµë‹ˆë‹¤.`)}).catch(e=>{console.error("ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨:",e)}))},[t==null?void 0:t.id]),i.useEffect(()=>{if(t!=null&&t.id&&t.name==="ì•ˆíŒ€"&&D.length>0&&!a){const e=D.find(n=>n.status!=="completed");e&&h(e.id)}},[t==null?void 0:t.id,t==null?void 0:t.name,D,a]),i.useEffect(()=>{t!=null&&t.id&&a&&localStorage.setItem(`drawings-selected-project-${t.id}`,a)},[t==null?void 0:t.id,a]),i.useEffect(()=>{t!=null&&t.id&&o&&localStorage.setItem(`drawings-selected-type-${t.id}`,o)},[t==null?void 0:t.id,o]),i.useEffect(()=>{if(t!=null&&t.id&&a&&o){ce.current=!0;const e=`drawing-${t.id}-${a}-${o}`;fe.getItem(e).then(n=>{n?(n.imageUrls&&Array.isArray(n.imageUrls)?p(n.imageUrls):n.imageUrl?p([n.imageUrl]):p([]),k(0),B(n.markers||[]),R(n.rooms||[]),O(n.naverTypeSqm||""),J(n.naverTypePyeong||""),G(n.naverArea||"")):(p([]),k(0),B([]),R([]),O(""),J(""),G("")),K("full"),Q(null),setTimeout(()=>{ce.current=!1},0)}).catch(n=>{console.error("Failed to load drawing data:",n),p([]),k(0),B([]),R([]),O(""),J(""),G(""),K("full"),Q(null),ce.current=!1})}},[t==null?void 0:t.id,a,o]),i.useEffect(()=>{if(!ce.current)return t!=null&&t.id&&a&&o&&V.length>0&&(se.current&&clearTimeout(se.current),se.current=setTimeout(async()=>{var r,m,l;const e=`drawing-${t.id}-${a}-${o}`,n={type:o,projectId:a,imageUrl:V[0],imageUrls:V,markers:E,rooms:v,lastModified:new Date,naverTypeSqm:te,naverTypePyeong:re,naverArea:ae};try{await fe.setItem(e,n,t.id),console.log("âœ… ë„ë©´ ì €ì¥ ì™„ë£Œ")}catch(u){console.error("Failed to save drawing data:",u);const f=((m=(r=u.response)==null?void 0:r.data)==null?void 0:m.error)||u.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",N=((l=u.response)==null?void 0:l.status)||"";alert(`ë„ë©´ ì €ì¥ ì‹¤íŒ¨: ${N?`[${N}] `:""}${f}`)}},500)),()=>{se.current&&clearTimeout(se.current)}},[t==null?void 0:t.id,a,o,V,E,v,te,re,ae]);const[ds,Re]=i.useState(!1),ue=async(e,n)=>{if(!e.type.startsWith("image/")){alert("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");return}if(e.size>20*1024*1024){alert("íŒŒì¼ í¬ê¸°ê°€ 20MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.");return}Re(!0);try{const r=await fe.uploadImage(e);console.log(`ğŸ“¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ: ${r}`),n!==void 0?p(m=>{const l=[...m];return l[n]=r,l}):(p(m=>[...m,r]),k(V.length))}catch(r){console.error("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨:",r),alert(r.message||"ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{Re(!1)}},Te=e=>{confirm("ì´ ë„ë©´ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&p(n=>{const r=n.filter((m,l)=>l!==e);return H>=r.length?k(Math.max(0,r.length-1)):H>e&&k(H-1),r})},Ye=e=>{const n=document.createElement("input");n.type="file",n.accept="image/*",n.onchange=r=>{var l;const m=(l=r.target.files)==null?void 0:l[0];m&&ue(m,e)},n.click()},cs=e=>{const n=e.target.files;n&&Array.from(n).forEach(r=>ue(r)),e.target.value=""},Pe=e=>{var r;if(!a)return;const n=(r=e.clipboardData)==null?void 0:r.items;if(n){for(let m=0;m<n.length;m++)if(n[m].type.startsWith("image/")){const l=n[m].getAsFile();if(l){ue(l);break}}}},Xe=e=>{e.preventDefault(),ve(!0)},Fe=e=>{e.preventDefault(),ve(!1)},We=e=>{var r;e.preventDefault(),ve(!1);const n=(r=e.dataTransfer.files)==null?void 0:r[0];n&&ue(n)};i.useEffect(()=>(document.addEventListener("paste",Pe),()=>{document.removeEventListener("paste",Pe)}),[a]);const us=e=>{e.preventDefault();const m=1+(e.deltaY>0?-1:1)*.15,l=Math.min(Math.max(.5,X*m),5),u=e.currentTarget.getBoundingClientRect(),f=e.clientX-u.left-u.width/2,N=e.clientY-u.top-u.height/2,g=l/X,x=f-(f-U.x)*g,b=N-(N-U.y)*g;me(l),z({x,y:b})},ps=e=>{e.button===0&&(F(!0),ke({x:e.clientX-U.x,y:e.clientY-U.y}))},gs=e=>{le&&z({x:e.clientX-de.x,y:e.clientY-de.y})},ze=()=>{F(!1)},qe=()=>{me(1),z({x:0,y:0})},Oe=e=>{if(e.length<2)return 0;const n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},Je=e=>e.length<2?{x:e[0].clientX,y:e[0].clientY}:{x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2},fs=e=>{e.preventDefault(),e.stopPropagation();const n=e.touches;if(n.length===1){const r=Date.now(),m=r-Ve.current;ls.current={x:n[0].clientX,y:n[0].clientY},m<300?(qe(),Ve.current=0):(Ve.current=r,F(!0),ke({x:n[0].clientX-U.x,y:n[0].clientY-U.y}))}else n.length===2&&(F(!1),q.current=Oe(n),Se.current=Je(n))},Ns=e=>{e.preventDefault(),e.stopPropagation();const n=e.touches;if(n.length===1&&le)z({x:n[0].clientX-de.x,y:n[0].clientY-de.y});else if(n.length===2){const r=Oe(n),m=Je(n);if(q.current>0){const l=r/q.current,u=Math.min(Math.max(.5,X*l),5),f=u/X,N=m.x-window.innerWidth/2,g=m.y-window.innerHeight/2,x=N-(N-U.x)*f,b=g-(g-U.y)*f;me(u),z({x,y:b})}q.current=r,Se.current=m}},xs=e=>{e.stopPropagation(),e.touches.length===0?(F(!1),q.current=0):e.touches.length===1&&(q.current=0,F(!0),ke({x:e.touches[0].clientX-U.x,y:e.touches[0].clientY-U.y}))},Ge=()=>{_e(!1),me(1),z({x:0,y:0}),F(!1)},bs=e=>{if(!T||!ee.current)return;const n=ee.current.getBoundingClientRect(),r=e.clientX-n.left,m=e.clientY-n.top;let l,u;if(Y==="room"&&C){if(!v.find(j=>j.id===C)||!$.current)return;const N=$.current.naturalWidth,g=$.current.naturalHeight;if(!N||!g)return;const x=N/g,b=n.width/n.height;let c,y,M,A;b>x?(y=n.height,c=n.height*x,M=(n.width-c)/2,A=0):(c=n.width,y=n.width/x,M=0,A=(n.height-y)/2);const L=r-M,pe=m-A;if(L<0||L>c||pe<0||pe>y)return;l=L/c*100,u=pe/y*100}else{if(!$.current)return;const f=$.current.naturalWidth,N=$.current.naturalHeight;if(!f||!N)return;const g=f/N,x=n.width/n.height;let b,c,y,M;x>g?(c=n.height,b=n.height*g,y=(n.width-b)/2,M=0):(b=n.width,c=n.width/g,y=0,M=(n.height-c)/2);const A=r-y,L=m-M;if(A<0||A>b||L<0||L>c)return;l=A/b*100,u=L/c*100}if(W==="room")Le(!0),He({x:l,y:u}),he({x:l,y:u});else if(o==="ì „ê¸°ë„ë©´"){if(Ee)return;const f=xe.find(c=>c.id===w);let N=null,g,x;if(Y==="room"&&C){const c=v.find(y=>y.id===C);c&&(N=C,g=(l-c.x)/c.width*100,x=(u-c.y)/c.height*100)}const b={id:`marker-${Date.now()}`,x:l,y:u,roomId:N,roomX:g,roomY:x,type:w,label:(f==null?void 0:f.name)||"",details:""};B([...E,b])}},hs=e=>{if(!T||!ee.current||!$.current)return;const n=ee.current.getBoundingClientRect(),r=e.clientX-n.left,m=e.clientY-n.top,l=$.current.naturalWidth,u=$.current.naturalHeight;if(!l||!u)return;const f=l/u,N=n.width/n.height;let g,x,b,c;N>f?(x=n.height,g=n.height*f,b=(n.width-g)/2,c=0):(g=n.width,x=n.width/f,b=0,c=(n.height-x)/2);const y=r-b,M=m-c;if(y<0||y>g||M<0||M>x)return;const A=y/g*100,L=M/x*100;if(be&&_)he({x:A,y:L});else if(Ee&&ie){if(E.find(j=>j.id===ie)&&Y==="room"&&C){const j=v.find(Ce=>Ce.id===C);if(j){const Ce=(A-j.x)/j.width*100,ks=(L-j.y)/j.height*100;B(E.map(je=>je.id===ie?{...je,x:A,y:L,roomX:Ce,roomY:ks}:je));return}}B(E.map(j=>j.id===ie?{...j,x:A,y:L}:j))}},Ke=()=>{if(be&&_&&I){const e=Math.min(_.x,I.x),n=Math.min(_.y,I.y),r=Math.abs(I.x-_.x),m=Math.abs(I.y-_.y);r>2&&m>2&&(we({x:e,y:n,width:r,height:m}),De(!0)),Le(!1),He(null),he(null)}Ue(!1),Ae(null)},Qe=()=>{if(Be&&oe.trim()){const e={id:`room-${Date.now()}`,name:oe.trim(),...Be};R([...v,e]),De(!1),ye(""),we(null)}},Ds=(e,n)=>{e.stopPropagation(),Ue(!0),Ae(n)},ys=e=>{B(E.filter(n=>n.id!==e))},Ze=e=>{R(v.filter(n=>n.id!==e)),B(E.filter(n=>n.roomId!==e)),C===e&&(Q(null),K("full"))},es=e=>{Q(e),K("room")},ss=()=>{K("full"),Q(null)},ws=()=>{if(Y==="room"&&C){const e=v.find(n=>n.id===C);return e?E.filter(n=>n.roomId===C).map(n=>({...n,x:e.x+(n.roomX||0)*e.width/100,y:e.y+(n.roomY||0)*e.height/100})):[]}return E},S=v.find(e=>e.id===C),ns=e=>e.replace("ë„ë©´","");return s.jsxDEV("div",{className:"h-full flex flex-col",children:[s.jsxDEV("div",{className:"bg-white border-b px-3 md:px-6 py-3 flex-shrink-0",children:[s.jsxDEV("div",{className:"md:hidden",children:[s.jsxDEV("div",{className:"flex justify-end mb-3",children:s.jsxDEV("select",{value:a,onChange:e=>h(e.target.value),className:"input max-w-[200px] text-sm",children:[(t==null?void 0:t.name)!=="ì•ˆíŒ€"&&s.jsxDEV("option",{value:"",children:"í”„ë¡œì íŠ¸ ì„ íƒ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:938,columnNumber:39},void 0),D.filter(e=>e.status!=="completed").map(e=>s.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:942,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:933,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:932,columnNumber:11},void 0),s.jsxDEV("div",{className:"grid grid-cols-5 gap-2 mb-3",children:Ne.map(e=>s.jsxDEV("button",{onClick:()=>d(e),className:`px-2 py-1.5 rounded text-xs whitespace-nowrap transition-colors ${o===e?"bg-gray-900 text-white font-medium":"text-gray-700 bg-gray-100 hover:bg-gray-200"}`,children:ns(e)},e,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:952,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:950,columnNumber:11},void 0),Y==="room"&&S&&s.jsxDEV("div",{className:"flex items-center justify-between mt-3",children:[s.jsxDEV("button",{onClick:ss,className:"btn btn-outline text-sm",children:[s.jsxDEV(ts,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:974,columnNumber:17},void 0),"ì „ì²´ ë³´ê¸°"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:970,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-base font-semibold text-gray-900",children:S.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:977,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:969,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:930,columnNumber:9},void 0),s.jsxDEV("div",{className:"hidden md:flex items-center justify-between gap-4",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("div",{className:"w-80",children:s.jsxDEV("select",{value:a,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-500",children:[(t==null?void 0:t.name)!=="ì•ˆíŒ€"&&s.jsxDEV("option",{value:"",children:"í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:991,columnNumber:41},void 0),D.filter(e=>e.status!=="completed").map(e=>s.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:995,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:986,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:985,columnNumber:13},void 0),o==="ë„¤ì´ë²„ë„ë©´"&&a&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"íƒ€ì…"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1006,columnNumber:19},void 0),s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("input",{type:"text",value:te,onChange:e=>O(e.target.value),placeholder:"ì˜ˆ: 136E",className:"w-28 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1008,columnNumber:21},void 0),s.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"ã¡"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1015,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1007,columnNumber:19},void 0),s.jsxDEV("span",{className:"text-gray-400",children:"/"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1017,columnNumber:19},void 0),s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV("input",{type:"text",value:re,onChange:e=>J(e.target.value),placeholder:"ì˜ˆ: 41E",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1019,columnNumber:21},void 0),s.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"í‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1026,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1018,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1005,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:"ê³µê¸‰/ì „ìš©"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1030,columnNumber:19},void 0),s.jsxDEV("input",{type:"text",value:ae,onChange:e=>G(e.target.value),placeholder:"ì˜ˆ: 136.21ã¡/101.97ã¡(ì „ìš©ë¥  75%)",className:"w-80 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1031,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1029,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1004,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:984,columnNumber:11},void 0),Y==="room"&&S&&s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("button",{onClick:ss,className:"btn btn-outline text-sm",children:[s.jsxDEV(ts,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1049,columnNumber:17},void 0),"ì „ì²´ ë³´ê¸°"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1045,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-lg font-semibold text-gray-900",children:S.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1052,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1044,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:983,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:928,columnNumber:7},void 0),s.jsxDEV("div",{className:"drawings-main flex-1 flex flex-col md:flex-row overflow-hidden",children:[s.jsxDEV("div",{className:"drawings-sidebar hidden md:block w-48 bg-white border-r flex-shrink-0 overflow-y-auto",children:s.jsxDEV("div",{className:"drawings-sidebar-inner p-4",children:[s.jsxDEV("h3",{className:"drawings-sidebar-title text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"ë„ë©´ ì¢…ë¥˜"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1062,columnNumber:13},void 0),s.jsxDEV("div",{className:"drawings-type-list space-y-1 mb-6",children:Ne.map(e=>s.jsxDEV("button",{onClick:()=>d(e),className:`drawings-type-btn w-full text-left px-3 py-2.5 rounded text-sm transition-colors ${o===e?"bg-gray-900 text-white font-medium":"text-gray-700 hover:bg-gray-100"}`,children:ns(e)},e,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1065,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1063,columnNumber:13},void 0),a&&o==="ì „ê¸°ë„ë©´"&&T&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"mb-6",children:s.jsxDEV("button",{onClick:()=>is(W==="room"?"marker":"room"),className:`w-full text-left px-3 py-2.5 rounded text-sm transition-colors flex items-center font-medium ${W==="room"?"bg-green-700 text-white":"bg-green-600 text-white hover:bg-green-700"}`,children:[s.jsxDEV(Cs,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1090,columnNumber:21},void 0),W==="room"?"ì˜ì—­ ê·¸ë¦¬ê¸° ì¤‘...":"ì˜ì—­ ê·¸ë¦¬ê¸°"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1082,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1081,columnNumber:17},void 0),v.length>0&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:"ì˜ì—­ ëª©ë¡"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1097,columnNumber:21},void 0),s.jsxDEV("div",{className:"space-y-1",children:v.map(e=>s.jsxDEV("div",{className:`w-full text-left px-3 py-2.5 rounded text-sm transition-colors flex items-center justify-between group ${C===e.id?"bg-purple-600 text-white font-medium":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsxDEV("button",{onClick:()=>es(e.id),className:"flex-1 text-left",children:e.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1108,columnNumber:27},void 0),s.jsxDEV("button",{onClick:n=>{n.stopPropagation(),Ze(e.id)},className:"opacity-0 group-hover:opacity-100 ml-2",children:s.jsxDEV(ne,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1121,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1114,columnNumber:27},void 0)]},e.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1100,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1098,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1096,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1080,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1061,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1060,columnNumber:9},void 0),a?s.jsxDEV(s.Fragment,{children:s.jsxDEV("div",{className:"flex-1 bg-gray-50 flex flex-col overflow-hidden",children:s.jsxDEV("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o==="ë„¤ì´ë²„ë„ë©´"&&a&&s.jsxDEV("div",{className:"md:hidden bg-white border-b px-3 py-1",children:s.jsxDEV("div",{className:"flex items-center gap-1.5 overflow-x-auto",children:[s.jsxDEV("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[s.jsxDEV("span",{className:"text-[11px] text-gray-500",children:"íƒ€ì…"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1145,columnNumber:23},void 0),s.jsxDEV("input",{type:"text",value:te,onChange:e=>O(e.target.value),placeholder:"136E",className:"input w-12 h-5 text-[12px] px-1"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1146,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-[11px] text-gray-500",children:"ã¡"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1153,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-gray-300 text-xs",children:"/"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1154,columnNumber:23},void 0),s.jsxDEV("input",{type:"text",value:re,onChange:e=>J(e.target.value),placeholder:"41E",className:"input w-10 h-5 text-[12px] px-1"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1155,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-[11px] text-gray-500",children:"í‰"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1162,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1144,columnNumber:21},void 0),s.jsxDEV("div",{className:"w-px h-3 bg-gray-200 flex-shrink-0"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1165,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex items-center gap-0.5 flex-1 min-w-0",children:[s.jsxDEV("span",{className:"text-[11px] text-gray-500 flex-shrink-0",children:"ê³µê¸‰/ì „ìš©"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1168,columnNumber:23},void 0),s.jsxDEV("input",{type:"text",value:ae,onChange:e=>G(e.target.value),placeholder:"136.21ã¡/101.97ã¡",className:"input h-5 text-[12px] px-1 flex-1 min-w-[100px]"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1169,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1167,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1142,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1141,columnNumber:17},void 0),s.jsxDEV("div",{className:"overflow-hidden p-3 md:p-6 flex-1 md:flex-none",children:T?s.jsxDEV("div",{className:`relative w-full h-full md:h-auto md:max-h-[calc(100vh-280px)] bg-white rounded-lg shadow-lg overflow-hidden md:aspect-[16/10] group/canvas ${Z?"ring-4 ring-blue-500 ring-inset":""}`,onDragOver:Xe,onDragLeave:Fe,onDrop:We,children:[Z&&s.jsxDEV("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-20 z-30 flex items-center justify-center pointer-events-none",children:s.jsxDEV("div",{className:"bg-white px-6 py-3 rounded-lg shadow-lg text-blue-600 font-medium",children:"ì´ë¯¸ì§€ë¥¼ ë†“ì•„ì„œ ì¶”ê°€"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1195,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1194,columnNumber:23},void 0),s.jsxDEV("div",{className:"absolute top-3 right-3 flex gap-2 z-20 opacity-0 group-hover/canvas:opacity-100 transition-opacity",children:[s.jsxDEV("button",{onClick:e=>{e.stopPropagation(),Ye(H)},className:"w-9 h-9 bg-white rounded-full shadow-lg flex items-center justify-center text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-all border border-gray-200",title:"ì´ë¯¸ì§€ ìˆ˜ì •",children:s.jsxDEV(rs,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1210,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1202,columnNumber:23},void 0),s.jsxDEV("button",{onClick:e=>{e.stopPropagation(),Te(H)},className:"w-9 h-9 bg-white rounded-full shadow-lg flex items-center justify-center text-red-500 hover:text-red-600 hover:bg-red-50 transition-all border border-gray-200",title:"ì´ë¯¸ì§€ ì‚­ì œ",children:s.jsxDEV(ne,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1220,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1212,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1201,columnNumber:21},void 0),s.jsxDEV("div",{ref:ee,className:`relative w-full h-full ${W==="room"?"cursor-crosshair":"cursor-default"}`,onMouseDown:bs,onMouseMove:hs,onMouseUp:Ke,onMouseLeave:Ke,children:[s.jsxDEV("img",{ref:$,src:T,alt:"í‰ë©´ë„",className:"w-full h-full object-contain select-none",draggable:!1,onClick:()=>_e(!0),style:Y==="room"&&S?(()=>{const e=100/S.width,n=100/S.height,r=Math.max(e,n),m=S.x+S.width/2,l=S.y+S.height/2;return{objectFit:"none",transform:`scale(${r}) translate(${(50-m)/r}%, ${(50-l)/r}%)`,transformOrigin:"0 0",pointerEvents:"auto",cursor:"pointer"}})():{pointerEvents:"auto",cursor:"pointer"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1233,columnNumber:23},void 0),Y==="full"&&v.map(e=>s.jsxDEV("div",{className:"absolute border-2 border-purple-500 bg-purple-500 bg-opacity-10 hover:bg-opacity-20 transition-all cursor-pointer group",style:{left:`${e.x}%`,top:`${e.y}%`,width:`${e.width}%`,height:`${e.height}%`},onClick:()=>es(e.id),children:[s.jsxDEV("div",{className:"absolute top-1 left-1 bg-purple-600 text-white px-2 py-0.5 rounded text-xs font-medium",children:e.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1280,columnNumber:25},void 0),s.jsxDEV("button",{onClick:n=>{n.stopPropagation(),Ze(e.id)},className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:s.jsxDEV(ne,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1290,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1283,columnNumber:25},void 0)]},e.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1269,columnNumber:23},void 0)),be&&_&&I&&s.jsxDEV("div",{className:"absolute border-2 border-dashed border-green-500 bg-green-500 bg-opacity-10",style:{left:`${Math.min(_.x,I.x)}%`,top:`${Math.min(_.y,I.y)}%`,width:`${Math.abs(I.x-_.x)}%`,height:`${Math.abs(I.y-_.y)}%`}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1297,columnNumber:23},void 0),ws().map(e=>{const n=xe.find(r=>r.id===e.type);return s.jsxDEV("div",{onMouseDown:r=>Ds(r,e.id),className:"absolute transform -translate-x-1/2 -translate-y-1/2 cursor-move group",style:{left:`${e.x}%`,top:`${e.y}%`},children:[(n==null?void 0:n.category)==="light"?s.jsxDEV("div",{className:"rounded-full shadow-md transition-transform group-hover:scale-110",style:{backgroundColor:n.color,width:"16px",height:"16px"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1322,columnNumber:29},void 0):s.jsxDEV("div",{className:"flex items-center justify-center bg-white rounded shadow-md transition-transform group-hover:scale-110",style:{borderColor:n==null?void 0:n.color,color:n==null?void 0:n.color,border:"1.5px solid",padding:"2px 4px",fontSize:"10px",fontWeight:"600",minWidth:"20px",minHeight:"20px"},children:n==null?void 0:n.symbol},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1331,columnNumber:29},void 0),s.jsxDEV("button",{onClick:r=>{r.stopPropagation(),ys(e.id)},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:s.jsxDEV(ne,{className:"w-2.5 h-2.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1354,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1347,columnNumber:27},void 0)]},e.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1312,columnNumber:25},void 0)})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1223,columnNumber:21},void 0),V.length>1&&s.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 px-3 py-2 z-20",children:s.jsxDEV("div",{className:"flex items-center gap-2 overflow-x-auto",children:V.map((e,n)=>s.jsxDEV("div",{className:`relative flex-shrink-0 cursor-pointer group rounded overflow-hidden transition-all ${H===n?"ring-2 ring-white":"opacity-70 hover:opacity-100"}`,onClick:()=>k(n),children:[s.jsxDEV("img",{src:e,alt:`ë„ë©´ ${n+1}`,className:"w-12 h-12 md:w-14 md:h-14 object-cover"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1376,columnNumber:31},void 0),s.jsxDEV("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100",children:[s.jsxDEV("button",{onClick:r=>{r.stopPropagation(),Ye(n)},className:"w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-md hover:bg-gray-100 transition-colors",title:"ìˆ˜ì •",children:s.jsxDEV(rs,{className:"w-3 h-3 text-gray-700"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1391,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1383,columnNumber:33},void 0),s.jsxDEV("button",{onClick:r=>{r.stopPropagation(),Te(n)},className:"w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-md hover:bg-red-50 transition-colors",title:"ì‚­ì œ",children:s.jsxDEV(ne,{className:"w-3 h-3 text-red-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1401,columnNumber:35},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1393,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1382,columnNumber:31},void 0),H===n&&s.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 bg-white text-gray-900 text-[9px] text-center py-0.5 font-bold",children:[n+1,"/",V.length]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1406,columnNumber:33},void 0)]},n,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1367,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1365,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1364,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1184,columnNumber:19},void 0):s.jsxDEV("div",{className:`flex flex-col items-center justify-center h-full bg-white rounded-lg shadow-lg text-gray-500 transition-all ${Z?"border-4 border-dashed border-blue-500 bg-blue-50":""}`,onDragOver:Xe,onDragLeave:Fe,onDrop:We,children:[ds?s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"w-20 h-20 mb-4 flex items-center justify-center",children:s.jsxDEV("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1428,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1427,columnNumber:25},void 0),s.jsxDEV("p",{className:"text-base mb-2 font-semibold text-blue-600",children:"ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1430,columnNumber:25},void 0),s.jsxDEV("p",{className:"text-sm text-gray-400",children:"ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1433,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1426,columnNumber:23},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV(as,{className:`w-20 h-20 mb-4 transition-colors ${Z?"text-blue-500":"text-gray-400"}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1439,columnNumber:25},void 0),s.jsxDEV("p",{className:"text-base mb-2 font-semibold",children:Z?"ì´ë¯¸ì§€ë¥¼ ì—¬ê¸°ì— ë†“ìœ¼ì„¸ìš”":"ë„ë©´ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1442,columnNumber:25},void 0),s.jsxDEV("p",{className:"text-sm mb-4 text-gray-400",children:"íŒŒì¼ ì„ íƒ, ë“œë˜ê·¸ ì•¤ ë“œë¡­, ë˜ëŠ” Ctrl+Vë¡œ ë¶™ì—¬ë„£ê¸°"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1445,columnNumber:25},void 0),s.jsxDEV("button",{onClick:()=>{var e;return(e=Me.current)==null?void 0:e.click()},className:"px-6 py-2.5 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:"íŒŒì¼ ì„ íƒ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1448,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1438,columnNumber:23},void 0),s.jsxDEV("input",{ref:Me,type:"file",accept:"image/*",multiple:!0,onChange:cs,className:"hidden"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1456,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1417,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1182,columnNumber:15},void 0),o==="ì „ê¸°ë„ë©´"&&T&&W==="marker"&&s.jsxDEV("div",{className:"bg-white border-t px-6 py-3 flex-shrink-0",children:s.jsxDEV("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxDEV("span",{className:"text-xs font-medium text-gray-700 mr-2",children:"C: ì½˜ì„¼íŠ¸ / S: ìŠ¤ìœ„ì¹˜ / â—: ì¡°ëª…"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1472,columnNumber:21},void 0),s.jsxDEV("div",{className:"w-px h-4 bg-gray-300 mx-1"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1473,columnNumber:21},void 0),xe.map(e=>s.jsxDEV("button",{onClick:()=>P(e.id),className:`px-3 py-1.5 rounded text-xs font-medium transition-all ${w===e.id?"bg-gray-900 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:border-gray-900"}`,style:{borderColor:w===e.id?void 0:e.color,borderWidth:w===e.id?void 0:"1.5px"},children:s.jsxDEV("span",{className:"text-sm font-semibold",style:{color:w===e.id?"white":e.color},children:e.symbol},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1488,columnNumber:25},void 0)},e.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1475,columnNumber:23},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1471,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1470,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1138,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1137,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1134,columnNumber:11},void 0):s.jsxDEV("div",{className:"drawings-empty flex-1 flex items-center justify-center bg-gray-50",children:s.jsxDEV("div",{className:"text-center",children:[s.jsxDEV(as,{className:"w-20 h-20 mx-auto mb-4 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1503,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-lg text-gray-600 mb-2",children:"í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1504,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-sm text-gray-500",children:"ë„ë©´ì„ ì—…ë¡œë“œí•˜ê³  ì „ê¸°/ì„¤ë¹„ ìœ„ì¹˜ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1505,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1502,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1501,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1058,columnNumber:7},void 0),os&&s.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxDEV("div",{className:"bg-white rounded-lg p-6 w-96",children:[s.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ì˜ì—­ ì´ë¦„ ì…ë ¥"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1515,columnNumber:13},void 0),s.jsxDEV("input",{type:"text",value:oe,onChange:e=>ye(e.target.value),onKeyDown:e=>{e.key==="Enter"&&Qe()},placeholder:"ì˜ˆ: ê±°ì‹¤, ì¹¨ì‹¤1, ì£¼ë°©",className:"input w-full mb-4",autoFocus:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1516,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex justify-end gap-2",children:[s.jsxDEV("button",{onClick:()=>{De(!1),ye(""),we(null)},className:"btn btn-outline",children:"ì·¨ì†Œ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1530,columnNumber:15},void 0),s.jsxDEV("button",{onClick:Qe,className:"btn btn-primary",disabled:!oe.trim(),children:"ì €ì¥"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1540,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1529,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1514,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1513,columnNumber:9},void 0),ms&&T&&s.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 touch-none",onClick:Ge,onWheel:us,onMouseMove:gs,onMouseUp:ze,onMouseLeave:ze,onTouchStart:fs,onTouchMove:Ns,onTouchEnd:xs,children:s.jsxDEV("div",{className:"relative w-full h-full p-4 md:p-8 flex items-center justify-center overflow-hidden",children:[s.jsxDEV("button",{onClick:Ge,className:"absolute top-4 right-4 w-10 h-10 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full flex items-center justify-center text-white transition-all z-10",children:s.jsxDEV(js,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1570,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1566,columnNumber:13},void 0),s.jsxDEV("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white text-xs px-3 py-2 rounded z-10",children:[s.jsxDEV("span",{className:"hidden md:inline",children:"ë§ˆìš°ìŠ¤ íœ : í™•ëŒ€/ì¶•ì†Œ | ë“œë˜ê·¸: ì´ë™ | ë”ë¸”í´ë¦­: ì´ˆê¸°í™”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1575,columnNumber:15},void 0),s.jsxDEV("span",{className:"md:hidden",children:"ë‘ ì†ê°€ë½: í™•ëŒ€/ì¶•ì†Œ | ë“œë˜ê·¸: ì´ë™ | ë”ë¸”íƒ­: ì´ˆê¸°í™”"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1576,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1574,columnNumber:13},void 0),X!==1&&s.jsxDEV("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white text-sm px-3 py-1 rounded z-10",children:[Math.round(X*100),"%"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1581,columnNumber:15},void 0),s.jsxDEV("img",{src:T,alt:"ë„ë©´ ì „ì²´í™”ë©´",className:"object-contain select-none touch-none",style:{transform:`translate(${U.x}px, ${U.y}px) scale(${X})`,cursor:le?"grabbing":"grab",transition:le?"none":"transform 0.1s ease-out",maxWidth:"100%",maxHeight:"100%"},onClick:e=>e.stopPropagation(),onMouseDown:ps,onDoubleClick:qe,draggable:!1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1586,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1565,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:1554,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Drawings.tsx",lineNumber:926,columnNumber:5},void 0)};export{Ms as default};
