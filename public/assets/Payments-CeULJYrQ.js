import{j as s,l as ie,u as us,s as Re,z as g,p as ge,a as ps}from"./index-CeUnYdZD.js";import{r as p}from"./vendor-react-B9Yt5e0k.js";import{u as fs,c as gs}from"./dataStore-B8jrcu4d.js";import{u as bs}from"./useFilteredProjects-DV_VAzZB.js";import{p as w}from"./vendor-date-9Cl9d1sr.js";import{X as me,h as Ns,j as xs,T as ys,U as ks,I as hs}from"./vendor-ui-CcgAtStV.js";import{r as $e}from"./formatters-15aXprTM.js";import{s as Ds,m as vs,g as Vs}from"./imageStorage-DjLpiDnu.js";import{a as He,b as Cs,B as As}from"./index-CSlX1tQB.js";import"./vendor-data-BwGxWJIh.js";const Hs=({projectName:D,onClose:C,type:be="cash"})=>{const ne=be==="cash",z=ne?"ÌòÑÍ∏àÏàòÎ†πÏ¶ù":"Ïù¥Ï≤¥ÌôïÏù∏Ï¶ù",T=ne?"ÏúÑÏôÄ Í∞ôÏù¥ ÌòÑÍ∏àÏúºÎ°ú ÏßÄÍ∏â Î∞õÏïòÏùåÏùÑ ÌôïÏù∏ Ìï©ÎãàÎã§.":"ÏúÑÏôÄ Í∞ôÏù¥ Í≥ÑÏ¢åÏù¥Ï≤¥Î°ú ÏßÄÍ∏â Î∞õÏïòÏùåÏùÑ ÌôïÏù∏ Ìï©ÎãàÎã§.",[u,E]=p.useState({receiptDate:w(new Date,"yyyy-MM-dd"),customerName:"",amount:"",purpose:"Ïù∏ÌÖåÎ¶¨Ïñ¥ Í≥µÏÇ¨ÎåÄÍ∏à",receivedBy:""}),Z=()=>{window.print()},je=k=>{const B=Number(k.replace(/,/g,""));return isNaN(B)?"":B.toLocaleString()},b=k=>{if(k===0)return"ÏòÅ";const B=["","Îßå","Ïñµ","Ï°∞"],te=["","Ïã≠","Î∞±","Ï≤ú"],Ne=["","Ïùº","Ïù¥","ÏÇº","ÏÇ¨","Ïò§","Ïú°","Ïπ†","Ìåî","Íµ¨"];let F="",P=0;for(;k>0;){const I=k%1e4;if(I>0){let j="",_=I,le=0;for(;_>0;){const J=_%10;J>0&&(j=Ne[J]+te[le]+j),_=Math.floor(_/10),le++}F=j+B[P]+F}k=Math.floor(k/1e4),P++}return F+"ÏõêÏ†ï"};return s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:s.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[s.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[s.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:z},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:76,columnNumber:13},void 0),s.jsxDEV("button",{onClick:C,className:"p-1 hover:bg-gray-100 rounded-full",children:s.jsxDEV(me,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:81,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:77,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:75,columnNumber:11},void 0),s.jsxDEV("div",{className:"p-6 space-y-4 print:hidden",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÏàòÎ†πÏùºÏûê"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:88,columnNumber:15},void 0),s.jsxDEV("input",{type:"date",value:u.receiptDate,onChange:k=>E({...u,receiptDate:k.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:89,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:87,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Í≥†Í∞ùÎ™Ö"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:98,columnNumber:15},void 0),s.jsxDEV("input",{type:"text",value:u.customerName,onChange:k=>E({...u,customerName:k.target.value}),placeholder:"Í≥†Í∞ùÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:99,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:97,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Í∏àÏï°"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:109,columnNumber:15},void 0),s.jsxDEV("input",{type:"text",value:je(u.amount),onChange:k=>{const B=k.target.value.replace(/,/g,"");/^\d*$/.test(B)&&E({...u,amount:B})},placeholder:"Í∏àÏï°ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:110,columnNumber:15},void 0),u.amount&&s.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:b(Number(u.amount))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:123,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:108,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÎÇ¥Ïó≠"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:130,columnNumber:15},void 0),s.jsxDEV("input",{type:"text",value:u.purpose,onChange:k=>E({...u,purpose:k.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:131,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:129,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÏàòÎ†πÏù∏"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:140,columnNumber:15},void 0),s.jsxDEV("input",{type:"text",value:u.receivedBy,onChange:k=>E({...u,receivedBy:k.target.value}),placeholder:"ÏàòÎ†πÏù∏Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:141,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:139,columnNumber:13},void 0),s.jsxDEV("button",{onClick:Z,disabled:!u.customerName||!u.amount||!u.receivedBy,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsxDEV(Ns,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:155,columnNumber:15},void 0),"Ïù∏ÏáÑÌïòÍ∏∞"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:150,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:86,columnNumber:11},void 0),s.jsxDEV("div",{className:"hidden print:block p-12",children:s.jsxDEV("div",{className:"border-4 border-double border-gray-900 p-8",children:[s.jsxDEV("h1",{className:"text-center text-3xl font-bold mb-8",children:ne?"ÌòÑ Í∏à Ïàò Î†π Ï¶ù":"Ïù¥ Ï≤¥ Ìôï Ïù∏ Ï¶ù"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:163,columnNumber:15},void 0),s.jsxDEV("div",{className:"space-y-6 text-lg",children:[s.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[s.jsxDEV("span",{className:"font-medium w-32",children:"ÏàòÎ†πÏùºÏûê:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:169,columnNumber:19},void 0),s.jsxDEV("span",{className:"flex-1 receipt-date",children:w(new Date(u.receiptDate),"yyyyÎÖÑ MMÏõî ddÏùº",{locale:ie})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:170,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:168,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[s.jsxDEV("span",{className:"font-medium w-32",children:"Í≥†Í∞ùÎ™Ö:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:174,columnNumber:19},void 0),s.jsxDEV("span",{className:"flex-1",children:u.customerName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:175,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:173,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[s.jsxDEV("span",{className:"font-medium w-32",children:"ÌîÑÎ°úÏ†ùÌä∏:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:179,columnNumber:19},void 0),s.jsxDEV("span",{className:"flex-1",children:D},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:180,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:178,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[s.jsxDEV("span",{className:"font-medium w-32",children:"Í∏àÏï°:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:184,columnNumber:19},void 0),s.jsxDEV("span",{className:"flex-1 font-bold receipt-amount",children:["‚Ç©",Number(u.amount).toLocaleString(),"Ïõê"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:185,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:183,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[s.jsxDEV("span",{className:"font-medium w-32",children:"Í∏àÏï°(ÌïúÍ∏Ä):"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:191,columnNumber:19},void 0),s.jsxDEV("span",{className:"flex-1",children:b(Number(u.amount))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:192,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:190,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[s.jsxDEV("span",{className:"font-medium w-32",children:"ÎÇ¥Ïó≠:"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:196,columnNumber:19},void 0),s.jsxDEV("span",{className:"flex-1",children:u.purpose},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:197,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:195,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:167,columnNumber:15},void 0),s.jsxDEV("div",{className:"mt-12 text-center",children:[s.jsxDEV("p",{className:"text-lg mb-8",children:T},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:202,columnNumber:17},void 0),s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV("p",{className:"text-lg receipt-date",children:w(new Date(u.receiptDate),"yyyyÎÖÑ MMÏõî ddÏùº",{locale:ie})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:205,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-xl font-medium mt-8",children:["ÏàòÎ†πÏù∏: ",u.receivedBy," ",s.jsxDEV("span",{className:"ml-4",children:"(Ïù∏)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:207,columnNumber:48},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:206,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:204,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:162,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:161,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:72,columnNumber:7},void 0),s.jsxDEV("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
        }
      `},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:217,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/CashReceiptModal.tsx",lineNumber:71,columnNumber:5},void 0)},Ks=()=>{const{payments:D,loadPaymentsFromAPI:C,addPaymentToAPI:be,deletePaymentFromAPI:ne,updatePaymentInAPI:z,updatePayment:T}=fs(),{user:u}=us(),E=bs(),[Z,je]=p.useState(""),[b,k]=p.useState(null),[B,te]=p.useState(null),[Ne,F]=p.useState(!1),[P,I]=p.useState(!1),[j,_]=p.useState(!1),[le,J]=p.useState(!1),[Te,Fe]=p.useState(""),[q,X]=p.useState("form"),[xe,qe]=p.useState(!1),[We,$]=p.useState(!1),ae=p.useRef(null),[S,Q]=p.useState("pending"),[js,Ls]=p.useState("all"),[Le,Ke]=p.useState(()=>localStorage.getItem("payments_showMyRequestsOnly")==="true"),[Es,Oe]=p.useState(!1),[Bs,Ps]=p.useState(null),[ze,Ze]=p.useState(!1),[Je,_s]=p.useState(""),[ce,Ee]=p.useState(!1),Be=p.useRef(!1),[re,Xe]=p.useState([]),[ye,Pe]=p.useState([]),[de,Y]=p.useState(null),[ke,he]=p.useState([]),[_e,Ue]=p.useState([]),[De,ve]=p.useState(!1),[M,oe]=p.useState({}),[we,Ie]=p.useState(!1),Qe=()=>{const e=localStorage.getItem("lastSelectedProject"),t=E.filter(n=>n.status!=="completed");return e&&t.some(n=>n.name===e)?e:t.length>0?t[0].name:""},[i,y]=p.useState({project:"",date:w(new Date,"yyyy-MM-dd"),process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]});p.useEffect(()=>{(async()=>{try{const t=await gs.getAllContractors();Xe(t.map(n=>({id:n._id||n.id,rank:n.rank,companyName:n.companyName,name:n.name,process:n.process,contact:n.contact,accountNumber:n.accountNumber,bankName:n.bankName,notes:n.notes,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)})))}catch(t){console.error("Failed to load contractors:",t)}})()},[]),p.useEffect(()=>{C().catch(t=>{console.error("Failed to load payments:",t)});const e=()=>{qe(window.innerWidth<1024)};if(e(),window.addEventListener("resize",e),E.length>0&&!i.project){const t=Qe();t&&(y(n=>({...n,project:t})),localStorage.setItem("lastSelectedProject",t))}return()=>window.removeEventListener("resize",e)},[C,E]),p.useEffect(()=>{const e=setInterval(()=>{console.log("[ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ®] Í≤∞Ï†ú ÎÇ¥Ïó≠ ÏóÖÎç∞Ïù¥Ìä∏ Ï§ë..."),C().catch(n=>{console.error("[ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ®] Ïã§Ìå®:",n)})},3e4),t=()=>{document.visibilityState==="visible"&&(console.log("[Ìè¨Ïª§Ïä§ ÏÉàÎ°úÍ≥†Ïπ®] ÌéòÏù¥ÏßÄ ÌôúÏÑ±Ìôî - Í≤∞Ï†ú ÎÇ¥Ïó≠ ÏóÖÎç∞Ïù¥Ìä∏ Ï§ë..."),C().catch(n=>{console.error("[Ìè¨Ïª§Ïä§ ÏÉàÎ°úÍ≥†Ïπ®] Ïã§Ìå®:",n)}))};return document.addEventListener("visibilitychange",t),()=>{clearInterval(e),document.removeEventListener("visibilitychange",t)}},[C]),p.useEffect(()=>{const e=Re.getSocket();if(!e)return;const t=n=>{console.log("üîÑ [Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî] Í≤∞Ï†ú ÏÉÅÌÉú Î≥ÄÍ≤Ω Í∞êÏßÄ:",n),C().catch(m=>{console.error("[Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî] ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìå®:",m)})};return e.on("payment:refresh",t),()=>{e.off("payment:refresh",t)}},[C]),p.useEffect(()=>{(async()=>{var m,r,o,l;if(Be.current)return;const t=new URLSearchParams(window.location.search),n=t.get("complete")||t.get("c");if(n){if(!u){console.log("[ÏûêÎèô ÏÜ°Í∏àÏôÑÎ£å] Î°úÍ∑∏Ïù∏ ÌïÑÏöî - ÎåÄÍ∏∞ Ï§ë");return}Be.current=!0,console.log("[ÏûêÎèô ÏÜ°Í∏àÏôÑÎ£å] Ï≤òÎ¶¨ ÏãúÏûë:",n),window.history.replaceState({},"","/payments"),X("list"),Q("completed"),T(String(n),{status:"completed"}),g.success("ÏÜ°Í∏àÏôÑÎ£å Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§");try{await z(String(n),{status:"completed"}),C()}catch(a){console.error("[ÏûêÎèô ÏÜ°Í∏àÏôÑÎ£å] Ï≤òÎ¶¨ Ïã§Ìå®:",a),T(String(n),{status:"pending"}),Q("pending");let d="ÏÜ°Í∏àÏôÑÎ£å Ï≤òÎ¶¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§";((m=a.response)==null?void 0:m.status)===401?d="Ïù∏Ï¶ùÏù¥ ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§. Îã§Ïãú Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî":((r=a.response)==null?void 0:r.status)===404?d="Í≤∞Ï†ú ÏöîÏ≤≠ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§ (ID: "+n+")":(l=(o=a.response)==null?void 0:o.data)!=null&&l.error?d=a.response.data.error:a.message&&(d+=": "+a.message),g.error(d)}}})()},[C,z,T,u]),p.useEffect(()=>{if(i.process){const e=new Set(D.filter(r=>{var o;return r.status==="completed"&&((o=r.bankInfo)==null?void 0:o.accountHolder)}).map(r=>r.bankInfo.accountHolder.trim().toLowerCase())),t=(r,o)=>{const l=r.toLowerCase(),a=o.toLowerCase();if(l.includes(a)||a.includes(l))return!0;const d=l.split("/").map(x=>x.trim()),c=a.replace(/Í≥µÏÇ¨$/,"").trim();for(const x of d)if(x===c||c.includes(x)||x.includes(c))return!0;return!1},m=re.filter(r=>{if(!t(i.process,r.process))return!1;const l=r.accountNumber&&r.accountNumber.trim()!=="",a=r.name.trim().toLowerCase(),d=e.has(a);return l||d}).sort((r,o)=>{const l=r.accountNumber&&r.accountNumber.trim()!=="",a=o.accountNumber&&o.accountNumber.trim()!=="";return l&&!a?-1:!l&&a?1:0});Pe(m)}else Pe([])},[i.process,re,D]),p.useEffect(()=>{if(i.process){const e=(m,r)=>{if(!r)return!1;const o=m.toLowerCase(),l=r.toLowerCase();if(o.includes(l)||l.includes(o))return!0;const a=o.split("/").map(c=>c.trim()),d=l.replace(/Í≥µÏÇ¨$/,"").trim();for(const c of a)if(c===d||d.includes(c)||c.includes(d))return!0;return!1},t=D.filter(m=>{var r,o,l;return m.status==="completed"&&m.process&&e(i.process,m.process)&&((r=m.bankInfo)==null?void 0:r.accountHolder)&&((o=m.bankInfo)==null?void 0:o.bankName)&&((l=m.bankInfo)==null?void 0:l.accountNumber)}),n=new Map;t.forEach(m=>{const r=`${m.bankInfo.accountHolder}_${m.bankInfo.bankName}_${m.bankInfo.accountNumber}`;n.has(r)||n.set(r,{accountHolder:m.bankInfo.accountHolder,bankName:m.bankInfo.bankName,accountNumber:m.bankInfo.accountNumber,itemName:m.itemName||"",amount:m.amount||0})}),he(Array.from(n.values()))}else he([])},[i.process,D]),p.useEffect(()=>{var t;const e=((t=i.accountHolder)==null?void 0:t.trim())||"";if(e.length>=1&&De){const n=[],m=new Set;re.filter(r=>r.accountNumber&&r.accountNumber.trim()!=="").forEach(r=>{const o=r.name.trim(),l=o.toLowerCase(),a=e.toLowerCase();l.startsWith(a)&&!m.has(l)&&(m.add(l),n.push({name:o,bankName:r.bankName||"",accountNumber:r.accountNumber||"",source:"contractor"}))}),D.filter(r=>{var o;return r.status==="completed"&&((o=r.bankInfo)==null?void 0:o.accountHolder)}).forEach(r=>{const o=r.bankInfo.accountHolder.trim(),l=o.toLowerCase(),a=e.toLowerCase();l.startsWith(a)&&!m.has(l)&&(m.add(l),n.push({name:o,bankName:r.bankInfo.bankName||"",accountNumber:r.bankInfo.accountNumber||"",source:"payment"}))}),Ue(n)}else Ue([])},[i.accountHolder,De,re,D]);const Ye=e=>{const t=e.split(`
`).map(a=>a.trim()).filter(a=>a),n={amounts:{},bankInfo:{},vendor:null,itemName:void 0,includeVat:!1},m=["ÍπÄ","Ïù¥","Î∞ï","Ïµú","Ï†ï","Í∞ï","Ï°∞","Ïú§","Ïû•","ÏûÑ","Ìïú","Ïò§","ÏÑú","Ïã†","Í∂å","Ìô©","Ïïà","ÏÜ°","Î•ò","Ï†Ñ","Ìôç","Í≥†","Î¨∏","Ïñë","ÏÜê","Î∞∞","Î∞±","Ìóà","Ïú†","ÎÇ®","Ïã¨","ÎÖ∏","Ìïò","Í≥Ω","ÏÑ±","Ï∞®","Ï£º","Ïö∞","Íµ¨","ÎØº","ÏßÑ","ÎÇò","ÏóÑ","Ï±Ñ","Ïõê","Ï≤ú","Î∞©","Í≥µ","ÌòÑ","Ìï®","Î≥Ä","Ïóº","Ïó¨","Ï∂î","ÎèÑ","ÏÑù","ÏÑ†","ÏÑ§","Îßà","Í∏∏","Ïó∞","ÏúÑ","Ìëú","Î™Ö","Í∏∞","Î∞ò","Îùº","Ïôï","Í∏à","Ïò•","Ïú°","Ïù∏","Îßπ","Ï†ú","ÌÉÅ","Íµ≠","Ïñ¥","Í≤Ω","Î¥â","ÏÇ¨"],r=a=>{const d=["Î°ú","ÏóêÍ≤å","ÏïûÏúºÎ°ú","Îãò","Ïî®","Íªò","ÌïúÌÖå","Î≥¥Í≥†"];for(const c of d)if(a.endsWith(c)&&a.length>c.length+1)return a.slice(0,-c.length);return a},o=a=>{if(!a||a.length<2||a.length>5||!/^[Í∞Ä-Ìû£]{2,5}$/.test(a)||["ÏùÄÌñâ","Î±ÖÌÅ¨","Í∏àÍ≥†","Ïã†Ìòë","Ï¶ùÍ∂å","Ìà¨Ïûê","Ï†ÄÏ∂ï","Ïö∞Ï≤¥Íµ≠","Íµ≠ÎØº","Ïã†Ìïú","Ïö∞Î¶¨","ÌïòÎÇò","ÎÜçÌòë","Í∏∞ÏóÖ","Ï†úÏùº","Ïî®Ìã∞","Ïπ¥Ïπ¥Ïò§","ÏºÄÏù¥","ÌÜ†Ïä§","Î∂ÄÏÇ∞","ÎåÄÍµ¨","Í≤ΩÎÇ®","Í¥ëÏ£º","Ï†ÑÎ∂Å","Ï†úÏ£º","ÏÇ∞ÏóÖ","ÏàòÌòë","ÏÉàÎßàÏùÑ","ÌïòÎÇòÏùÄÌñâ","Íµ≠ÎØºÏùÄÌñâ","Ïã†ÌïúÏùÄÌñâ","Ïö∞Î¶¨ÏùÄÌñâ","ÎÜçÌòëÏùÄÌñâ","Í∏∞ÏóÖÏùÄÌñâ","Ï†úÏùºÏùÄÌñâ","ÌÜ†Ïä§Î±ÖÌÅ¨","Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨"].includes(a)||["Í∞ÄÏÑ§","Ï≤†Í±∞","ÏÑ§ÎπÑ","ÎØ∏Ïû•","Ï†ÑÍ∏∞","Î™©Í≥µ","Ï°∞Í≤Ω","Í∞ÄÍµ¨","ÎßàÎ£®","ÌÉÄÏùº","ÏöïÏã§","ÌïÑÎ¶Ñ","ÎèÑÎ∞∞","ÎèÑÏû•","Ï∞ΩÌò∏","ÏóêÏñ¥Ïª®","Í∏∞ÌÉÄ","Î∞©Ïàò","Ï≤≠ÏÜå","Ïú†Î¶¨","ÏÉ§Ïãú","Î∞∞Í¥Ä","ÏÑùÍ≥µ","Ï£ºÎ∞©","Î∞îÎã•","Í∞ÑÌåê"].includes(a)||["Í∏àÏï°","ÏòàÍ∏àÏ£º","Í≥ÑÏ¢å","ÏûÖÍ∏à","Ï∂úÍ∏à","Ïù¥Ï≤¥","ÏÜ°Í∏à","ÏûîÏï°","Ìï©Í≥Ñ","Ï¥ùÏï°","Î∂ÄÍ∞ÄÏÑ∏","Í≥µÍ∏âÍ∞Ä","ÏÑ∏Í∏à","ÏàòÏàòÎ£å","ÏõêÍ∏à","ÏÉÅÌíàÎ™Ö","ÌíàÎ™Ö","Îã®Í∞Ä","ÏàòÎüâ","ÎπÑÍ≥†","Î©îÎ™®","ÎÇ†Ïßú","ÏùºÏûê"].includes(a))return!1;if(a.length>=2){const A=a.charAt(0),h=a.substring(0,2);if(["ÎÇ®Í∂Å","ÏÑ†Ïö∞","ÎèÖÍ≥†","Ìô©Î≥¥","ÏÇ¨Í≥µ","ÏÑúÎ¨∏","Ï†úÍ∞à"].includes(h)||m.includes(A))return!0}return a.length>=2&&a.length<=4},l=t.some(a=>a.includes("Î¨¥ÌÜµÏû• ÏûÖÍ∏à")||a.includes("Î¨¥ÌÜµÏû•ÏûÖÍ∏à"));if(t.forEach((a,d)=>{if(a.includes("ÏÉÅÌíàÎ™Ö")&&a.includes(":")){const c=a.match(/ÏÉÅÌíàÎ™Ö\s*:\s*(.+)/);c&&(n.itemName=c[1].trim())}if(a.includes("ÏòàÍ∏àÏ£º")&&a.includes(":")){const c=a.match(/ÏòàÍ∏àÏ£º\s*:\s*(.+)/);c&&(n.bankInfo.accountHolder=c[1].trim())}if(a.includes("ÏûÖÍ∏àÏùÄÌñâ")&&a.includes(":")){const c=a.match(/ÏûÖÍ∏àÏùÄÌñâ\s*:\s*(.+)/);c&&(n.bankInfo.bankName=c[1].trim())}if(a.includes("Í≥ÑÏ¢åÎ≤àÌò∏")&&a.includes(":")){const c=a.match(/Í≥ÑÏ¢åÎ≤àÌò∏\s*:\s*(.+)/);c&&(n.bankInfo.accountNumber=c[1].trim())}if(a.includes("ÏûÖÍ∏àÍ∏àÏï°")&&a.includes(":")){const c=a.match(/ÏûÖÍ∏àÍ∏àÏï°\s*:\s*([\d,]+)Ïõê?/);c&&(n.amounts.total=parseInt(c[1].replace(/,/g,"")))}}),l||(t.forEach(a=>{const d=a.match(/\[([^\]]+)\]/);d&&!n.itemName&&(n.itemName=d[1].trim())}),t.forEach((a,d)=>{(a.includes("Î∂ÄÍ∞ÄÏÑ∏Ìè¨Ìï®")||a.includes("Î∂ÄÍ∞ÄÏÑ∏ Ìè¨Ìï®")||a.includes("(Î∂ÄÍ∞ÄÏÑ∏Ìè¨Ìï®)"))&&(n.includeVat=!0);const c=a.match(/=\s*([\d,]+)\s*Ïõê?/);if(c){const f=parseInt(c[1].replace(/,/g,""));f>=1e3&&!n.amounts.total&&(n.amounts.total=f)}else{const f=a.match(/(\d+)\s*Îßå\s*Ïõê?/);if(f){const N=parseInt(f[1])*1e4;a.includes("ÏûêÏû¨")||a.includes("Ïû¨Î£å")?n.amounts.material=N:a.includes("Ïù∏Í±¥")||a.includes("ÎÖ∏Î¨¥")?n.amounts.labor=N:n.amounts.total||(n.amounts.total=N),a=a.replace(/(\d+)\s*Îßå\s*Ïõê?/g,"")}}a.includes("/")&&a.split("/").forEach(N=>{const v=N.trim();v.startsWith("[")||v.endsWith("]")||(/^[\d\-]+$/.test(v)&&v.replace(/\-/g,"").length>=10?n.bankInfo.accountNumber||(n.bankInfo.accountNumber=v):o(v)&&!n.bankInfo.accountHolder&&(n.bankInfo.accountHolder=v))});const x=[/\d{6}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{5,7}[\s\-]+\d{2}[\s\-]+\d{5,7}/,/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/,/\d{3}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{3}[\s\-]+\d{4}[\s\-]+\d{7}/,/\d{4}[\s\-]+\d{4}[\s\-]+\d{5}/,/\d{3,4}[\s\-]+\d{2,6}[\s\-]+\d{4,7}/,/\d{4,6}[\s]+\d{5,7}/,/\d{10,}/],A=a.match(/(ÏùÄÌñâ|Î±ÖÌÅ¨|Í∏àÍ≥†|Ïã†Ìòë|Ïö∞Ï≤¥Íµ≠)(\d{4,}[\s\-]?\d*)/);if(A&&!n.bankInfo.accountNumber){const f=A[2].trim().replace(/\s+/g,"-");f.replace(/\-/g,"").length>=8&&(n.bankInfo.accountNumber=f)}let h="",H=-1;for(const f of x){const N=a.match(f);if(N&&!n.bankInfo.accountNumber){h=N[0],H=N.index||-1,n.bankInfo.accountNumber=N[0].trim().replace(/\s+/g,"-");const K=a.substring(H+h.length).trim().split(/\s+/);for(const L of K){if(L.startsWith("[")||L.endsWith("]"))continue;const V=r(L);if(o(V)){n.bankInfo.accountHolder=V;break}}if(!n.bankInfo.accountHolder&&d+1<t.length){const L=t[d+1],V=L.split(/\s+/);for(const R of V){if(R.startsWith("[")||R.endsWith("]"))continue;const se=r(R);if(o(se)){n.bankInfo.accountHolder=se;break}}if(!n.bankInfo.accountHolder){const R=L.match(/^([Í∞Ä-Ìû£]{2,6})/);if(R){const se=r(R[1].trim());o(se)&&(n.bankInfo.accountHolder=se)}}}break}}const U=a.match(/[\d,]+/g);U&&U.forEach(f=>{const N=parseInt(f.replace(/,/g,"")),v=f.replace(/,/g,""),K=h&&h.includes(v);!n.bankInfo.accountNumber&&v.length>=10&&v.length<=20?(n.bankInfo.accountNumber=v,h=v):N>=1e3&&!manwonMatch&&!K&&(a.includes("ÏûêÏû¨")||a.includes("Ïû¨Î£å")?n.amounts.material=N:a.includes("Ïù∏Í±¥")||a.includes("ÎÖ∏Î¨¥")?n.amounts.labor=N:n.amounts.total||(n.amounts.total=N))});const ee={Íµ≠ÎØº:"KBÍµ≠ÎØºÏùÄÌñâ",KB:"KBÍµ≠ÎØºÏùÄÌñâ",Ïã†Ìïú:"Ïã†ÌïúÏùÄÌñâ",ÌïòÎÇò:"ÌïòÎÇòÏùÄÌñâ",Ïö∞Î¶¨:"Ïö∞Î¶¨ÏùÄÌñâ",Í∏∞ÏóÖ:"IBKÍ∏∞ÏóÖÏùÄÌñâ",IBK:"IBKÍ∏∞ÏóÖÏùÄÌñâ",ÎÜçÌòë:"NHÎÜçÌòëÏùÄÌñâ",NH:"NHÎÜçÌòëÏùÄÌñâ",Ïπ¥Ïπ¥Ïò§:"Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨",Ïπ¥Î±Ö:"Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨",ÌÜ†Ïä§:"ÌÜ†Ïä§Î±ÖÌÅ¨",ÏºÄÏù¥:"ÏºÄÏù¥Î±ÖÌÅ¨",KÎ±ÖÌÅ¨:"ÏºÄÏù¥Î±ÖÌÅ¨",ÏÇ∞ÏóÖ:"KDBÏÇ∞ÏóÖÏùÄÌñâ",KDB:"KDBÏÇ∞ÏóÖÏùÄÌñâ",ÏàòÌòë:"ÏàòÌòëÏùÄÌñâ",ÎåÄÍµ¨:"ÎåÄÍµ¨ÏùÄÌñâ",Î∂ÄÏÇ∞:"Î∂ÄÏÇ∞ÏùÄÌñâ",Í≤ΩÎÇ®:"Í≤ΩÎÇ®ÏùÄÌñâ",Í¥ëÏ£º:"Í¥ëÏ£ºÏùÄÌñâ",Ï†ÑÎ∂Å:"Ï†ÑÎ∂ÅÏùÄÌñâ",SCÏ†úÏùºÏùÄÌñâ:"SCÏ†úÏùºÏùÄÌñâ",SCÏ†úÏùº:"SCÏ†úÏùºÏùÄÌñâ",Ï†úÏùº:"SCÏ†úÏùºÏùÄÌñâ",SC:"SCÏ†úÏùºÏùÄÌñâ",Ïî®Ìã∞:"ÌïúÍµ≠Ïî®Ìã∞ÏùÄÌñâ",Ïö∞Ï≤¥Íµ≠:"Ïö∞Ï≤¥Íµ≠",ÏÉàÎßàÏùÑ:"ÏÉàÎßàÏùÑÍ∏àÍ≥†",Ïã†Ìòë:"Ïã†Ìòë"},W=Object.keys(ee).sort((f,N)=>N.length-f.length);for(const f of W){const N=a.indexOf(f);if(N===-1)continue;if(f.length<=2){if(N>0&&/[Í∞Ä-Ìû£]/.test(a[N-1]))continue;const V=a.substring(N+f.length);if(V&&/^[Í∞Ä-Ìû£]/.test(V)&&!/^(ÏùÄÌñâ|Î±ÖÌÅ¨)/.test(V))continue}const v=ee[f];n.bankInfo.bankName=v;const K=new RegExp(`${f}(?:ÏùÄÌñâ|Î±ÖÌÅ¨)?\\s+([Í∞Ä-Ìû£]{2,5})`),L=a.match(K);if(L){const V=r(L[1]);o(V)&&(n.bankInfo.accountHolder=V)}break}if(!n.bankInfo.bankName){const f=a.match(/([Í∞Ä-Ìû£]+)(ÏùÄÌñâ|Î±ÖÌÅ¨)/);f&&(n.bankInfo.bankName=f[0])}const ue=[/\(Ï£º\)[Í∞Ä-Ìû£a-zA-Z0-9]+/,/\(Ïú†\)[Í∞Ä-Ìû£a-zA-Z0-9]+/,/\(ÏÇ¨\)[Í∞Ä-Ìû£a-zA-Z0-9]+/,/Ï£ºÏãùÌöåÏÇ¨\s*[Í∞Ä-Ìû£a-zA-Z0-9]+/,/Ïú†ÌïúÌöåÏÇ¨\s*[Í∞Ä-Ìû£a-zA-Z0-9]+/];for(const f of ue){const N=a.match(f);if(N&&!n.bankInfo.accountHolder){n.bankInfo.accountHolder=N[0].trim();break}}const pe=a.match(/\(([Í∞Ä-Ìû£]{2,5})\)/);if(pe&&!n.bankInfo.accountHolder){const f=pe[1];o(f)&&!["Ï£º","Ïú†","ÏÇ¨"].includes(f)&&(n.bankInfo.accountHolder=f)}if(!n.bankInfo.accountHolder){const f=/[Í∞Ä-Ìû£]{2,6}/g,N=a.match(f);if(N){const v=a.match(/\d{10,}/)||a.match(/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/),K=a.match(/ÏùÄÌñâ|Î±ÖÌÅ¨|Í∏àÍ≥†|Ïã†Ìòë|Ïö∞Ï≤¥Íµ≠/);N.forEach(L=>{const V=r(L),R=e.split(`
`)[d];if(R&&R.includes(`[${L}]`)||!o(V)||["Ï≤†Í±∞","ÌèêÍ∏∞Î¨º","Î™©Í≥µ","ÌÉÄÏùº","ÎèÑÎ∞∞","Ï†ÑÍ∏∞","ÏÑ§ÎπÑ","Ï≤≠ÏÜå","ÎØ∏Ïû•","ÎèÑÏû•","Î∞©Ïàò","ÏÉ∑Ïãú","ÏÉ§Ïãú","Ïú†Î¶¨","ÌïÑÎ¶Ñ","Ï°∞Î™Ö","Í∞ÄÍµ¨","Ïã±ÌÅ¨","Ï£ºÎ∞©","ÏöïÏã§","ÌôîÏû•Ïã§","ÎßàÎ£®","Ïû•Ìåê","Î≤ΩÏßÄ","ÌéòÏù∏Ìä∏","ÎèÑÏÉâ","Î∞∞Í¥Ä","ÎàÑÏàò","ÌïòÏûê","Î≥¥Ïàò","ÏãúÍ≥µ","Í≥µÏÇ¨","Î™∞Îî©","ÏãúÏä§ÌÖú","ÎßàÏù¥ÎÑàÏä§","ÌîåÎü¨Ïä§","ÏûêÏû¨","Î∂ÄÏûêÏû¨","Ï°∞Í≥µ","ÎßåÏõê","Ï≤úÏõê","Î∞±Ïõê","ÏûÖÍ∏à","ÏÜ°Í∏à","Ïù¥Ï≤¥","Í≥ÑÏ¢å","Ï∞©Î∂à","ÏÑ†Î∂à","ÌõÑÎ∂à","Î∞∞ÏÜ°","ÌÉùÎ∞∞","Ïö¥ÏÜ°"].includes(V))return;const fe=a.indexOf(L);if(fe>0){const O=a[fe-1];if(/[Í∞Ä-Ìû£]/.test(O))return}if(fe+L.length<a.length){const O=a[fe+L.length];if(/[Í∞Ä-Ìû£]/.test(O))return}if(!(pe&&V===pe[1])){if((v||K)&&!n.bankInfo.accountHolder)n.bankInfo.accountHolder=V;else if(!n.bankInfo.accountHolder){const O=/ÏùÄÌñâ|Î±ÖÌÅ¨|Ïö∞Ï≤¥Íµ≠|Í∏àÍ≥†|Ïã†Ìòë/,Se=/\d{6,}/;(d>0&&(Se.test(t[d-1])||O.test(t[d-1]))||d<t.length-1&&(Se.test(t[d+1])||O.test(t[d+1]))||O.test(a))&&(n.bankInfo.accountHolder=V)}}})}}const ds={Î™©Í≥µ:"Î™©Í≥µ",Î™©Ïû¨:"Î™©Í≥µ",ÎÇòÎ¨¥:"Î™©Í≥µ",ÌÉÄÏùº:"ÌÉÄÏùº",ÌÉÄÏùºÍ≥µÏÇ¨:"ÌÉÄÏùº",ÎèÑÎ∞∞:"ÎèÑÎ∞∞",ÎèÑÎ∞∞ÏßÄ:"ÎèÑÎ∞∞",Î≤ΩÏßÄ:"ÎèÑÎ∞∞",Ï†ÑÍ∏∞:"Ï†ÑÍ∏∞",Ï†ÑÍ∏∞ÏûêÏû¨:"Ï†ÑÍ∏∞",Ï†ÑÎì±:"Ï†ÑÍ∏∞",Ï°∞Î™Ö:"Ï†ÑÍ∏∞",Ïä§ÏúÑÏπò:"Ï†ÑÍ∏∞",ÏΩòÏÑºÌä∏:"Ï†ÑÍ∏∞",ÏÑ§ÎπÑ:"ÏÑ§ÎπÑ",Î∞∞Í¥Ä:"ÏÑ§ÎπÑ",ÏàòÎèÑ:"ÏÑ§ÎπÑ",ÌïòÏàò:"ÏÑ§ÎπÑ",ÏÉ§Ïãú:"ÏÉ§Ïãú",Ï∞ΩÎ¨∏:"ÏÉ§Ïãú",Ï∞ΩÌò∏:"ÏÉ§Ïãú",Ïú†Î¶¨:"Ïú†Î¶¨",Í±∞Ïö∏:"Ïú†Î¶¨",Î∞©Ïàò:"Î∞©Ïàò",Î∞©ÏàòÍ≥µÏÇ¨:"Î∞©Ïàò",Ï≤†Í±∞:"Ï≤†Í±∞",Ï≤†Í±∞Í≥µÏÇ¨:"Ï≤†Í±∞",Ìï¥Ï≤¥:"Ï≤†Í±∞",Ï≤≠ÏÜå:"Ï≤≠ÏÜå",Ï§ÄÍ≥µÏ≤≠ÏÜå:"Ï≤≠ÏÜå",ÏûÖÏ£ºÏ≤≠ÏÜå:"Ï≤≠ÏÜå",ÎØ∏Ïû•:"ÎØ∏Ïû•",Î™∞ÌÉà:"ÎØ∏Ïû•",ÏãúÎ©òÌä∏:"ÎØ∏Ïû•",ÏÑùÍ≥µ:"ÏÑùÍ≥µ",ÎåÄÎ¶¨ÏÑù:"ÏÑùÍ≥µ",ÌôîÍ∞ïÏÑù:"ÏÑùÍ≥µ",ÎèÑÏû•:"ÎèÑÏû•",ÌéòÏù∏Ìä∏:"ÎèÑÏû•",ÎèÑÏÉâ:"ÎèÑÏû•",ÌïÑÎ¶Ñ:"ÌïÑÎ¶Ñ",ÏãúÌä∏ÏßÄ:"ÌïÑÎ¶Ñ",Ïç¨ÌåÖ:"ÌïÑÎ¶Ñ",Î∞îÎã•:"Î∞îÎã•",ÎßàÎ£®:"Î∞îÎã•",Ïû•Ìåê:"Î∞îÎã•",Îç∞ÏΩîÌÉÄÏùº:"Î∞îÎã•",Í∞ÄÍµ¨:"Í∞ÄÍµ¨",Î∂ôÎ∞ïÏù¥Ïû•:"Í∞ÄÍµ¨",ÏàòÎÇ©Ïû•:"Í∞ÄÍµ¨",Ï£ºÎ∞©:"Ï£ºÎ∞©",Ïã±ÌÅ¨ÎåÄ:"Ï£ºÎ∞©",Ï£ºÎ∞©Í∞ÄÍµ¨:"Ï£ºÎ∞©",ÏöïÏã§:"ÏöïÏã§",ÌôîÏû•Ïã§:"ÏöïÏã§",Î≥ÄÍ∏∞:"ÏöïÏã§",ÏÑ∏Î©¥ÎåÄ:"ÏöïÏã§",ÏñëÎ≥ÄÍ∏∞:"ÏöïÏã§",Í∞ÑÌåê:"Í∞ÑÌåê",ÏÇ¨Ïù∏Î¨º:"Í∞ÑÌåê",ÌòÑÏàòÎßâ:"Í∞ÑÌåê",Î≥¥Ïñë:"Í∞ÄÏÑ§",Í∞ÄÏÑ§:"Í∞ÄÏÑ§"};for(const[f,N]of Object.entries(ds))if(a.includes(f)){n.vendor=N;break}if(d===0&&!n.itemName){const f=a.replace(/[\[\]{}()<>]/g,"").trim();f&&!f.includes("Î¨¥ÌÜµÏû• ÏûÖÍ∏à")&&(n.itemName=f.substring(0,50))}})),n.itemName&&n.itemName.includes("Î≥¥Ïñë")&&(n.vendor="Í∞ÄÏÑ§"),n.itemName){const a=["ÏùÄÌñâ","Î±ÖÌÅ¨","Í∏àÍ≥†","Ïã†Ìòë","Ï¶ùÍ∂å","Ìà¨Ïûê","Ï†ÄÏ∂ï","Ïö∞Ï≤¥Íµ≠","Íµ≠ÎØº","Ïã†Ìïú","Ïö∞Î¶¨","ÌïòÎÇò","ÎÜçÌòë","Í∏∞ÏóÖ","Ï†úÏùº","Ïî®Ìã∞","Ïπ¥Ïπ¥Ïò§","ÏºÄÏù¥","ÌÜ†Ïä§","Î∂ÄÏÇ∞","ÎåÄÍµ¨","Í≤ΩÎÇ®","Í¥ëÏ£º","Ï†ÑÎ∂Å","Ï†úÏ£º","ÏÇ∞ÏóÖ","ÏàòÌòë","ÏÉàÎßàÏùÑ","ÌïòÎÇòÏùÄÌñâ","Íµ≠ÎØºÏùÄÌñâ","Ïã†ÌïúÏùÄÌñâ","Ïö∞Î¶¨ÏùÄÌñâ","ÎÜçÌòëÏùÄÌñâ","Í∏∞ÏóÖÏùÄÌñâ","KBÍµ≠ÎØºÏùÄÌñâ","NHÎÜçÌòëÏùÄÌñâ","IBKÍ∏∞ÏóÖÏùÄÌñâ","SCÏ†úÏùºÏùÄÌñâ","Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨","ÌÜ†Ïä§Î±ÖÌÅ¨","ÏºÄÏù¥Î±ÖÌÅ¨"],d=["Í∏àÏï°","ÏòàÍ∏àÏ£º","Í≥ÑÏ¢å","ÏûÖÍ∏à","Ï∂úÍ∏à","Ïù¥Ï≤¥","ÏÜ°Í∏à","ÏûîÏï°","Ìï©Í≥Ñ","Ï¥ùÏï°","Î∂ÄÍ∞ÄÏÑ∏","Í≥µÍ∏âÍ∞Ä","ÏÑ∏Í∏à","ÏàòÏàòÎ£å","ÏõêÍ∏à","ÏÉÅÌíàÎ™Ö","ÌíàÎ™Ö","Îã®Í∞Ä","ÏàòÎüâ","ÎπÑÍ≥†","Î©îÎ™®","ÎÇ†Ïßú","ÏùºÏûê","Í≥ÑÏ¢åÎ≤àÌò∏","ÏûÖÍ∏àÏùÄÌñâ","ÏûÖÍ∏àÍ∏àÏï°"],c=n.itemName.toLowerCase(),x=a.some(W=>c===W.toLowerCase()||c.startsWith(W.toLowerCase()+" ")||c.replace(/\s+/g,"").match(/^[\d\-\s]+$/)),A=d.some(W=>{const ue=n.itemName.replace(/[\d,\.Ïõê]/g,"").trim();return ue===W||ue.startsWith(W)}),h=/^[\d\-\s]/.test(n.itemName),H=/^\d{2,}[\s\-]?\d+/.test(n.itemName.replace(/[Í∞Ä-Ìû£]/g,"").trim()),U=n.bankInfo.accountHolder&&(n.itemName===n.bankInfo.accountHolder||n.itemName.includes(n.bankInfo.accountHolder)),ee=n.amounts.total&&n.itemName.includes(n.amounts.total.toLocaleString());(x||A||h||H||U||ee)&&(n.itemName=void 0)}return n},Ge=()=>{try{console.log("handleQuickTextParse ÏãúÏûë");const e=i.quickText;if(!e.trim()){console.log("Îπà ÌÖçÏä§Ìä∏");return}console.log("Î∂ÑÏÑù ÏãúÏûë:",e);const t=Ye(e);console.log("Î∂ÑÏÑù Í≤∞Í≥º:",t);const n={project:i.project,date:i.date,quickText:i.quickText,quickImages:i.quickImages||[],process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[]};Y(null),I(!1),_(!1);let m=0;if(t.amounts.material&&(m+=t.amounts.material),t.amounts.labor&&(m+=t.amounts.labor),t.amounts.total&&!t.amounts.material&&!t.amounts.labor&&(m=t.amounts.total),m>0&&(n.amount=m),t.bankInfo.bankName&&(n.bankName=t.bankInfo.bankName),t.bankInfo.accountNumber){n.accountNumber=t.bankInfo.accountNumber;const o=re.find(l=>{var c,x;const a=(c=t.bankInfo.accountNumber)==null?void 0:c.replace(/[-\s]/g,"");return((x=l.accountNumber)==null?void 0:x.replace(/[-\s]/g,""))===a});o?(n.accountHolder=o.name||t.bankInfo.accountHolder,n.bankName=o.bankName||t.bankInfo.bankName,n.accountNumber=o.accountNumber||t.bankInfo.accountNumber,Y(o.id||o._id||null),o.process&&(n.process=o.process)):t.bankInfo.accountHolder&&(n.accountHolder=t.bankInfo.accountHolder)}else t.bankInfo.accountHolder&&(n.accountHolder=t.bankInfo.accountHolder);if(t.vendor&&(n.process=t.vendor),!n.process){const o=e.toLowerCase();for(const l of He)if(o.includes(l.toLowerCase())){n.process=l;break}}t.itemName&&(n.itemName=t.itemName),y(n),t.includeVat&&(I(!0),_(!1));let r=[];if(t.amounts.material||t.amounts.labor||t.amounts.total){const o=[];t.amounts.material&&o.push(`ÏûêÏû¨ÎπÑ: ${t.amounts.material.toLocaleString()}Ïõê`),t.amounts.labor&&o.push(`Ïù∏Í±¥ÎπÑ: ${t.amounts.labor.toLocaleString()}Ïõê`),t.amounts.total&&!t.amounts.material&&!t.amounts.labor&&o.push(`Í∏àÏï°: ${t.amounts.total.toLocaleString()}Ïõê`),r.push(o.join(", "))}if(t.bankInfo.bankName||t.bankInfo.accountHolder){const o=[];t.bankInfo.bankName&&o.push(t.bankInfo.bankName),t.bankInfo.accountHolder&&o.push(t.bankInfo.accountHolder),t.bankInfo.accountNumber&&o.push(t.bankInfo.accountNumber),o.length>0&&r.push(`Í≥ÑÏ¢å: ${o.join(" ")}`)}t.vendor&&r.push(`Í≥µÏ†ï: ${t.vendor}`),t.includeVat&&r.push("Î∂ÄÍ∞ÄÏÑ∏ Ìè¨Ìï® ÏÑ§Ï†ïÎê®"),r.length>0?g.success(`ÏûêÎèô Ïù∏Ïãù ÏôÑÎ£å!
${r.join(`
`)}`,{duration:4e3,style:{whiteSpace:"pre-line"}}):g.info("ÌÖçÏä§Ìä∏Î•º Î∂ÑÏÑù Ï§ë... Îçî Î™ÖÌôïÌïú Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.")}catch(e){console.error("ÏûêÎèôÏ±ÑÏö∞Í∏∞ ÏóêÎü¨:",e),g.error("ÏûêÎèôÏ±ÑÏö∞Í∏∞ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.")}};p.useEffect(()=>{(async()=>{try{await vs();const t=await Vs();oe(t),Ie(!0)}catch(t){console.error("Ïù¥ÎØ∏ÏßÄ Î°úÎìú Ïã§Ìå®:",t),Ie(!0)}})()},[]);const Me=p.useRef({});p.useEffect(()=>{we&&(Object.entries(M).forEach(([e,t])=>{JSON.stringify(Me.current[e])!==JSON.stringify(t)&&Ds(e,t).catch(n=>{console.error("Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû• Ïã§Ìå®:",n),g.error("Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")})}),Me.current={...M})},[M,we]);const Ve=p.useCallback(async e=>{var m;const t=(m=e.clipboardData)==null?void 0:m.items;if(!t)return;let n=!1;for(let r=0;r<t.length;r++)if(t[r].type.indexOf("image")!==-1){n=!0;break}if(n){if(!b){const r=document.activeElement;(r==null?void 0:r.tagName)==="INPUT"||(r==null?void 0:r.tagName)==="TEXTAREA"||(r==null?void 0:r.classList.contains("form-input"))||g.error("Î®ºÏ†Ä Í≤∞Ï†úÏöîÏ≤≠ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî");return}for(let r=0;r<t.length;r++)if(t[r].type.indexOf("image")!==-1){e.preventDefault();const o=t[r].getAsFile();if(o){const l=new FileReader;l.onload=async a=>{var c;const d=(c=a.target)==null?void 0:c.result;if(d)try{const x=D.find(H=>H.id===b),h=[...(x==null?void 0:x.images)||M[b]||[],d];await ge.updatePaymentImages(b,h),oe(H=>({...H,[b]:h})),await C(),g.success("Ïù¥ÎØ∏ÏßÄÍ∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§")}catch(x){console.error("Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû• Ïã§Ìå®:",x),g.error("Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}},l.readAsDataURL(o)}}}},[b,D,M,C]);p.useEffect(()=>(document.addEventListener("paste",Ve),()=>document.removeEventListener("paste",Ve)),[Ve]);const Ce=(u==null?void 0:u.name)==="ÏïàÌåÄ"?D.filter(e=>E.some(t=>t.name===e.project)):D,G=[...Ce].sort((e,t)=>new Date(t.requestDate).getTime()-new Date(e.requestDate).getTime());console.log("[Í≤∞Ï†úÏöîÏ≤≠ ÎîîÎ≤ÑÍπÖ]",{"Ï†ÑÏ≤¥ payments":D.length,"ÌîÑÎ°úÏ†ùÌä∏ ÌïÑÌÑ∞ÎßÅ ÌõÑ":Ce.length,"ÏôÑÎ£åÎêú Í≤∞Ï†ú(Ï†ÑÏ≤¥)":D.filter(e=>e.status==="completed").length,"ÏôÑÎ£åÎêú Í≤∞Ï†ú(ÌïÑÌÑ∞ÎßÅ ÌõÑ)":Ce.filter(e=>e.status==="completed").length,"ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê":u==null?void 0:u.name,"ÌîÑÎ°úÏ†ùÌä∏ Ïàò":E.length});const Ae=G.filter(e=>{var o,l,a;const t=Z===""||((o=e.purpose)==null?void 0:o.toLowerCase().includes(Z.toLowerCase()))||((l=e.itemName)==null?void 0:l.toLowerCase().includes(Z.toLowerCase()))||((a=e.process)==null?void 0:a.toLowerCase().includes(Z.toLowerCase())),n=e.status===S,m=S==="pending"||!i.project||e.project===i.project,r=!Le||S!=="completed"||e.requestedBy===(u==null?void 0:u.name);return t&&n&&m&&r}),es=e=>{const t=e.id||e._id||null;if(de===t){Y(null);const o=document.querySelector('input[placeholder="ÏòàÍ∏àÏ£ºÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"]');o&&setTimeout(()=>{o.focus()},100);return}Y(t);const n=$e(e.name);let m=e.bankName||"",r=e.accountNumber||"";if(r&&!m){const o=r.trim().split(/\s+/);if(o.length>=2){const l=o[0];(l.includes("ÏùÄÌñâ")||l.includes("Î±ÖÌÅ¨")||l.includes("Í∏àÍ≥†")||l.includes("Ïã†Ìòë")||l.includes("Ïö∞Ï≤¥Íµ≠"))&&(m=l,r=o.slice(1).join(""))}}y(o=>({...o,accountHolder:n,bankName:m,accountNumber:r}))};Ae.reduce((e,t)=>{const n=t.materialAmount||0,m=t.laborAmount||0,r=t.amount||0;let o=n,l=m,a=0;return n===0&&m===0&&r>0?t.includesVAT?(o=Math.round(r/1.1),a=r-o):(o=r,a=0):t.includesVAT?(n>0&&(o=Math.round(n/1.1)),m>0&&(l=Math.round(m/1.1)),a=r-(o+l)):a=0,e.material+=o,e.labor+=l,e.vat+=a,e.total+=r,e},{material:0,labor:0,vat:0,total:0});const ss=async()=>{var t;if(ce){console.log("üí∞ Already submitting, ignoring click");return}if(console.log("üí∞ handleSave called"),console.log("üí∞ Current user:",u),console.log("üí∞ Form data:",i),!i.project){g.error("ÌîÑÎ°úÏ†ùÌä∏Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî");return}if(!i.itemName){g.error("Ìï≠Î™©Î™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");return}const e=Number(i.amount)||0;if(e===0){g.error("Í∏àÏï°ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");return}Ee(!0);try{const n=j?Math.round(e*.967):e,m=new Date;if(B){const r={project:i.project,requestDate:new Date(i.date),purpose:i.itemName,amount:n,category:"material",urgency:"normal",process:i.process,itemName:i.itemName,includesVAT:P,applyTaxDeduction:j,materialAmount:n,laborAmount:0,originalLaborAmount:0,accountHolder:i.accountHolder,bank:i.bankName,accountNumber:i.accountNumber,bankInfo:i.accountHolder||i.bankName||i.accountNumber?{accountHolder:i.accountHolder,bankName:i.bankName,accountNumber:i.accountNumber}:void 0,updatedAt:m};console.log("üí∞ Updating payment:",r),await z(B,r),g.success("Í≤∞Ï†úÏöîÏ≤≠Ïù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),te(null)}else{const r=i.project||"Í∏∞ÌÉÄ",o={id:`payment_${Date.now()}`,project:r,requestDate:new Date(i.date),requestedBy:(u==null?void 0:u.name)||"Ïïå Ïàò ÏóÜÏùå",purpose:i.itemName,amount:n,status:"pending",category:"material",urgency:"normal",process:i.process,itemName:i.itemName,includesVAT:P,applyTaxDeduction:j,materialAmount:n,laborAmount:0,originalLaborAmount:0,accountHolder:i.accountHolder,bank:i.bankName,accountNumber:i.accountNumber,bankInfo:i.accountHolder||i.bankName||i.accountNumber?{accountHolder:i.accountHolder,bankName:i.bankName,accountNumber:i.accountNumber}:void 0,quickText:i.quickText||"",images:i.quickImages,attachments:[],createdAt:m,updatedAt:m};console.log("üí∞ Creating payment:",o),console.log("üí∞ Images in payment:",((t=i.quickImages)==null?void 0:t.length)||0,"Í∞ú");const l=await be(o);if(g.success("Í≤∞Ï†úÏöîÏ≤≠Ïù¥ Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§"),!P&&!j&&i.accountHolder&&i.bankName&&i.accountNumber)try{await ps.post("/payments/send-toss-payment-sms",{recipientPhone:"01089423283",accountHolder:i.accountHolder,bankName:i.bankName,accountNumber:i.accountNumber,amount:n,projectName:r,itemName:i.itemName,process:i.process,paymentId:l}),g.success("Í≤∞Ï†ú ÏöîÏ≤≠ Î¨∏ÏûêÍ∞Ä Î∞úÏÜ°ÎêòÏóàÏäµÎãàÎã§")}catch(a){console.error("SMS Î∞úÏÜ° Ïã§Ìå®:",a)}}y(r=>({project:r.project,date:w(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),I(!1),_(!1),Y(null),window.innerWidth<768&&X("list")}catch(n){console.error("üí∞ Payment save error:",n),g.error("Í≤∞Ï†úÏöîÏ≤≠ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§: "+n.message)}finally{Ee(!1)}},ns=e=>{var t,n,m,r;try{console.log("[handleEdit] Starting edit for payment:",e.id);const o=e.originalMaterialAmount!==void 0?e.originalMaterialAmount:e.materialAmount||0,l=e.originalLaborAmount!==void 0?e.originalLaborAmount:e.laborAmount||0,a={project:e.project||"",date:e.requestDate?w(new Date(e.requestDate),"yyyy-MM-dd"):w(new Date,"yyyy-MM-dd"),process:e.process||"",itemName:e.itemName||e.purpose||"",materialCost:o>0?o.toString():"",laborCost:l>0?l.toString():"",amount:((t=e.amount)==null?void 0:t.toString())||"",accountHolder:((n=e.bankInfo)==null?void 0:n.accountHolder)||"",bankName:((m=e.bankInfo)==null?void 0:m.bankName)||"",accountNumber:((r=e.bankInfo)==null?void 0:r.accountNumber)||"",images:e.attachments||[],quickText:e.quickText||"",quickImages:e.images||[]};console.log("[handleEdit] Setting form data:",a),y(a),I(e.includesVAT||!1),_(e.applyTaxDeduction||!1),k(e.id),te(e.id),xe&&X("form"),console.log("[handleEdit] Edit setup complete"),g.success("ÏàòÏ†ïÌï† ÎÇ¥Ïó≠ÏùÑ Î∂àÎü¨ÏôîÏäµÎãàÎã§")}catch(o){console.error("[handleEdit] Error:",o),g.error("ÏàòÏ†ï Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ï§ë Ïò§Î•ò Î∞úÏÉù")}},ts=async e=>{var t,n,m;try{const r=((t=e.bankInfo)==null?void 0:t.accountHolder)||e.accountHolder,o=((n=e.bankInfo)==null?void 0:n.bankName)||e.bank,l=((m=e.bankInfo)==null?void 0:m.accountNumber)||e.accountNumber;if(!r||!o||!l){g.error("Í≥ÑÏ¢å Ï†ïÎ≥¥Í∞Ä ÏóÜÏäµÎãàÎã§. Í≤∞Ï†ú ÏöîÏ≤≠ Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.");return}if(!window.confirm(`ÌÜ†Ïä§ Ïï±ÏúºÎ°ú Ïù¥Ï≤¥ÌïòÏãúÍ≤†ÏäµÎãàÍπå?

Î∞õÎäîÎ∂Ñ: ÏóêÏù¥ÏπòÎ∏åÏù¥Îû©
ÏùÄÌñâ: ${o}
Í≥ÑÏ¢å: ${l}
Í∏àÏï°: ${e.amount.toLocaleString()}Ïõê`))return;const d=l.replace(/[-\s]/g,""),c=Cs[o]||o,x=As[o]||"004",A="ÏóêÏù¥ÏπòÎ∏åÏù¥Îû©",h=`supertoss://send?amount=${e.amount}&bankCode=${x}&bank=${encodeURIComponent(c)}&accountNo=${d}&receiverName=${encodeURIComponent(A)}&toName=${encodeURIComponent(A)}`;let H=!1;try{window.location.href=h,H=!0,g.success("ÌÜ†Ïä§ Ïï±ÏùÑ Ïã§ÌñâÌï©ÎãàÎã§...",{duration:3e3}),setTimeout(()=>{const U=/iPhone|iPad|iPod/i.test(navigator.userAgent),ee=/Android/i.test(navigator.userAgent);(U||ee)&&g(`ÌÜ†Ïä§ Ïï±Ïù¥ ÏÑ§ÏπòÎêòÏñ¥ ÏûàÏßÄ ÏïäÍ±∞ÎÇò Ïã§ÌñâÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.

Î∞õÎäîÎ∂Ñ: ÏóêÏù¥ÏπòÎ∏åÏù¥Îû©
Í≥ÑÏ¢å: ${l}
Í∏àÏï°: ${e.amount.toLocaleString()}Ïõê

ÌÜ†Ïä§ Ïï±ÏùÑ ÏßÅÏ†ë Ïó¥Ïñ¥ Ïù¥Ï≤¥Ìï¥Ï£ºÏÑ∏Ïöî.`,{icon:"üí≥",duration:8e3})},2e3)}catch(U){console.error("ÌÜ†Ïä§ Ïï± Ïã§Ìñâ Ïã§Ìå®:",U),g(`ÌÜ†Ïä§ Ïï± Ïã§ÌñâÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.

Î∞õÎäîÎ∂Ñ: ÏóêÏù¥ÏπòÎ∏åÏù¥Îû©
ÏùÄÌñâ: ${o}
Í≥ÑÏ¢å: ${l}
Í∏àÏï°: ${e.amount.toLocaleString()}Ïõê

ÌÜ†Ïä§ Ïï±ÏùÑ ÏßÅÏ†ë Ïó¥Ïñ¥ Ïù¥Ï≤¥Ìï¥Ï£ºÏÑ∏Ïöî.`,{icon:"üí≥",duration:1e4})}}catch(r){console.error("Ï¶âÏãúÏÜ°Í∏à Ïò§Î•ò:",r),g.error(`Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${r.message}`)}},as=async e=>{const t=D.find(n=>n.id===e);if(t&&t.quickText){const n=localStorage.getItem("executionMemos"),m=n?JSON.parse(n):{};m[e]=t.quickText,localStorage.setItem("executionMemos",JSON.stringify(m))}T(e,{status:"completed"}),Oe(!1),Q("completed"),g.success("ÏÜ°Í∏àÏôÑÎ£å Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§"),window.dispatchEvent(new CustomEvent("paymentCompleted")),z(e,{status:"completed"}).then(()=>{Re.getSocket().emit("payment:refresh")}).catch(n=>{console.error("ÏÜ°Í∏àÏôÑÎ£å Ï≤òÎ¶¨ Ïã§Ìå®:",n),T(e,{status:"pending"}),Q("pending"),g.error("ÏÜ°Í∏àÏôÑÎ£å Ï≤òÎ¶¨ Ïã§Ìå® - Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî")})},rs=async e=>{var m;if(!b){g.error("Î®ºÏ†Ä Í≤∞Ï†úÏöîÏ≤≠ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî");return}const n=Array.from(((m=e.target)==null?void 0:m.files)||[]).filter(r=>r.type.startsWith("image/"));if(n.length!==0){try{const r=await Promise.all(n.map(d=>new Promise((c,x)=>{const A=new FileReader;A.onload=h=>{var U;const H=(U=h.target)==null?void 0:U.result;H?c(H):x(new Error("Ïù¥ÎØ∏ÏßÄ ÏùΩÍ∏∞ Ïã§Ìå®"))},A.onerror=()=>x(new Error("FileReader Ïò§Î•ò")),A.readAsDataURL(d)}))),o=D.find(d=>d.id===b),a=[...(o==null?void 0:o.images)||M[b]||[],...r];await ge.updatePaymentImages(b,a),oe(d=>({...d,[b]:a})),await C(),g.success(`${r.length}Í∞úÏùò Ïù¥ÎØ∏ÏßÄÍ∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§`)}catch(r){console.error("Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû• Ïã§Ìå®:",r),g.error("Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}e.target.value=""}},os=async e=>{if(b)try{const t=D.find(r=>r.id===b),m=((t==null?void 0:t.images)||M[b]||[]).filter((r,o)=>o!==e);await ge.updatePaymentImages(b,m),oe(r=>({...r,[b]:m})),await C()}catch(t){console.error("Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†ú Ïã§Ìå®:",t),g.error("Ïù¥ÎØ∏ÏßÄ ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}},ms=e=>{Fe(e),J(!0)},is=e=>{e.preventDefault(),F(!0)},ls=e=>{e.preventDefault(),F(!1)},cs=async e=>{if(e.preventDefault(),F(!1),!b){g.error("Î®ºÏ†Ä Í≤∞Ï†úÏöîÏ≤≠ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî");return}const n=Array.from(e.dataTransfer.files).filter(m=>m.type.startsWith("image/"));if(n.length!==0)try{const m=await Promise.all(n.map(a=>new Promise((d,c)=>{const x=new FileReader;x.onload=A=>{var H;const h=(H=A.target)==null?void 0:H.result;h?d(h):c(new Error("Ïù¥ÎØ∏ÏßÄ ÏùΩÍ∏∞ Ïã§Ìå®"))},x.onerror=()=>c(new Error("FileReader Ïò§Î•ò")),x.readAsDataURL(a)}))),r=D.find(a=>a.id===b),l=[...(r==null?void 0:r.images)||M[b]||[],...m];await ge.updatePaymentImages(b,l),oe(a=>({...a,[b]:l})),await C(),g.success(`${m.length}Í∞úÏùò Ïù¥ÎØ∏ÏßÄÍ∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§`)}catch(m){console.error("Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû• Ïã§Ìå®:",m),g.error("Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}};return s.jsxDEV("div",{className:"space-y-3 md:space-y-4",children:[s.jsxDEV("div",{className:"lg:hidden mb-4",children:s.jsxDEV("select",{value:i.project,onChange:e=>{y({...i,project:e.target.value}),e.target.value&&localStorage.setItem("lastSelectedProject",e.target.value)},className:"w-full px-3 py-2.5 md:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(u==null?void 0:u.name)!=="ÏïàÌåÄ"&&s.jsxDEV("option",{value:"",children:"ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2084,columnNumber:35},void 0),E.filter(e=>e.status!=="completed").map(e=>s.jsxDEV("option",{value:e.name,children:e.name},e.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2086,columnNumber:13},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2074,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2073,columnNumber:7},void 0),s.jsxDEV("div",{className:"lg:hidden border-b border-gray-200 mb-4",children:s.jsxDEV("div",{className:"flex items-center justify-between",children:s.jsxDEV("nav",{className:"flex space-x-4",children:[s.jsxDEV("button",{onClick:()=>X("form"),className:`py-2 px-1 border-b-2 font-medium text-sm ${q==="form"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"ÏûÖÎ†•"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2095,columnNumber:13},void 0),s.jsxDEV("button",{onClick:()=>X("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${q==="list"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"ÎÇ¥Ïó≠"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2105,columnNumber:13},void 0),s.jsxDEV("button",{onClick:()=>X("image"),className:`py-2 px-1 border-b-2 font-medium text-sm ${q==="image"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:"Ïù¥ÎØ∏ÏßÄ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2115,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2094,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2093,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2092,columnNumber:7},void 0),s.jsxDEV("div",{className:"payment-container grid grid-cols-1 md:grid-cols-6 ipad:grid-cols-6 ipad-lg:grid-cols-6 ipad-xl:grid-cols-12 ipad-2xl:grid-cols-12 gap-3 md:gap-4",children:[s.jsxDEV("div",{className:`payment-form md:col-span-2 ipad:col-span-2 ipad-lg:col-span-2 ipad-xl:col-span-2 ipad-2xl:col-span-2 bg-white rounded-lg border p-3 md:p-4 overflow-y-auto h-[calc(100vh-180px)] ${q!=="form"?"hidden md:block":""}`,children:s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("div",{className:"hidden lg:block payment-project-row",children:s.jsxDEV("div",{className:"flex gap-2",children:[s.jsxDEV("select",{value:i.project,onChange:e=>{y({...i,project:e.target.value}),e.target.value&&localStorage.setItem("lastSelectedProject",e.target.value)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(u==null?void 0:u.name)!=="ÏïàÌåÄ"&&s.jsxDEV("option",{value:"",children:"ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2150,columnNumber:43},void 0),E.filter(e=>e.status!=="completed").map(e=>s.jsxDEV("option",{value:e.name,children:e.name},e.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2152,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2140,columnNumber:17},void 0),s.jsxDEV("select",{value:i.bankName,onChange:e=>y({...i,bankName:e.target.value}),className:"payment-bank-select hidden px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-8",children:[s.jsxDEV("option",{value:"",children:"ÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2160,columnNumber:19},void 0),s.jsxDEV("option",{value:"KBÍµ≠ÎØºÏùÄÌñâ",children:"KBÍµ≠ÎØº"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2161,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïã†ÌïúÏùÄÌñâ",children:"Ïã†Ìïú"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2162,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïö∞Î¶¨ÏùÄÌñâ",children:"Ïö∞Î¶¨"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2163,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÌïòÎÇòÏùÄÌñâ",children:"ÌïòÎÇò"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2164,columnNumber:19},void 0),s.jsxDEV("option",{value:"NHÎÜçÌòëÏùÄÌñâ",children:"ÎÜçÌòë"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2165,columnNumber:19},void 0),s.jsxDEV("option",{value:"IBKÍ∏∞ÏóÖÏùÄÌñâ",children:"Í∏∞ÏóÖ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2166,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨",children:"Ïπ¥Ïπ¥Ïò§"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2167,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÏºÄÏù¥Î±ÖÌÅ¨",children:"ÏºÄÏù¥"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2168,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÌÜ†Ïä§Î±ÖÌÅ¨",children:"ÌÜ†Ïä§"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2169,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÏÉàÎßàÏùÑÍ∏àÍ≥†",children:"ÏÉàÎßàÏùÑ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2170,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïã†Ìòë",children:"Ïã†Ìòë"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2171,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïö∞Ï≤¥Íµ≠",children:"Ïö∞Ï≤¥Íµ≠"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2172,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2155,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2139,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2138,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("textarea",{value:i.quickText,onChange:e=>y({...i,quickText:e.target.value}),onPaste:e=>{var n;const t=(n=e.clipboardData)==null?void 0:n.items;if(t){for(let m=0;m<t.length;m++)if(t[m].type.indexOf("image")!==-1){e.preventDefault();const r=t[m].getAsFile();if(r){const o=new FileReader;o.onload=l=>{var d;const a=(d=l.target)==null?void 0:d.result;y(c=>({...c,quickImages:[...c.quickImages,a]}))},o.readAsDataURL(r)}break}}},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),Array.from(e.dataTransfer.files).filter(m=>m.type.startsWith("image/")).forEach(m=>{const r=new FileReader;r.onload=o=>{var a;const l=(a=o.target)==null?void 0:a.result;y(d=>({...d,quickImages:[...d.quickImages,l]}))},r.readAsDataURL(m)})},rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:xe?"Ï≤≠Íµ¨ ÎÇ¥Ïó≠ Î∂ôÏó¨ÎÑ£Í∏∞":"Ï≤≠Íµ¨ ÎÇ¥Ïó≠ Î∂ôÏó¨ÎÑ£Í∏∞ (Ïù¥ÎØ∏ÏßÄ ÎìúÎûòÍ∑∏ ÎòêÎäî Ctrl+V)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2179,columnNumber:15},void 0),i.quickImages.length>0&&s.jsxDEV("div",{className:"mt-2 mb-2 grid grid-cols-3 gap-2",children:i.quickImages.map((e,t)=>s.jsxDEV("div",{className:"relative group",children:[s.jsxDEV("img",{src:e,alt:`Ï≤≠Íµ¨ÎÇ¥Ïó≠ ${t+1}`,className:"w-full h-20 object-cover rounded-lg border"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2234,columnNumber:23},void 0),s.jsxDEV("button",{type:"button",onClick:()=>{y(n=>({...n,quickImages:n.quickImages.filter((m,r)=>r!==t)}))},className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"√ó"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2239,columnNumber:23},void 0)]},t,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2233,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2231,columnNumber:17},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[s.jsxDEV("label",{className:"cursor-pointer",children:[s.jsxDEV("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>{Array.from(e.target.files||[]).forEach(n=>{const m=new FileReader;m.onload=r=>{var l;const o=(l=r.target)==null?void 0:l.result;y(a=>({...a,quickImages:[...a.quickImages,o]}))},m.readAsDataURL(n)}),e.target.value=""}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2258,columnNumber:19},void 0),s.jsxDEV("div",{className:"w-full h-10 flex items-center justify-center bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium border border-gray-300",children:"Ïù¥ÎØ∏ÏßÄ Ï≤®Î∂Ä"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2279,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2257,columnNumber:17},void 0),s.jsxDEV("button",{type:"button",onClick:Ge,className:"h-10 flex items-center justify-center bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors text-sm font-medium",children:"ÏûêÎèô Ï±ÑÏö∞Í∏∞"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2283,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2256,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2178,columnNumber:13},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ÎÇ†Ïßú ",i.date&&`(${w(new Date(i.date),"E",{locale:ie})})`]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2296,columnNumber:17},void 0),s.jsxDEV("input",{type:"date",value:i.date,onChange:e=>y({...i,date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer text-gray-900",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundColor:"white",backgroundImage:"none"}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2299,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2295,columnNumber:15},void 0),s.jsxDEV("div",{className:"relative",children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Í≥µÏ†ï"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2315,columnNumber:17},void 0),s.jsxDEV("button",{ref:ae,type:"button",onClick:()=>$(!0),className:"w-full px-3 py-2 border rounded-lg text-left bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:i.process||s.jsxDEV("span",{className:"text-gray-400",children:"ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2322,columnNumber:40},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2316,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2314,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2294,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ìï≠Î™©Î™Ö"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2329,columnNumber:15},void 0),s.jsxDEV("input",{type:"text",value:i.itemName,onChange:e=>y({...i,itemName:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2330,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2328,columnNumber:13},void 0),s.jsxDEV("div",{className:"space-y-2 payment-amount-section",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Í≥µÏÇ¨ÎπÑ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2341,columnNumber:17},void 0),s.jsxDEV("div",{className:"relative",children:[s.jsxDEV("input",{type:"text",value:i.amount?Number(i.amount).toLocaleString():"",onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");y({...i,amount:t})},className:"w-full px-3 py-2 pr-8 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"Í∏àÏï°ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2343,columnNumber:19},void 0),s.jsxDEV("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Ïõê"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2354,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2342,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2340,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex items-center gap-4",children:[s.jsxDEV("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:e=>e.preventDefault(),onClick:()=>{P||_(!1),I(!P)},children:[s.jsxDEV("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${P?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:P&&s.jsxDEV("span",{className:"text-white text-xs",children:"‚úì"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2372,columnNumber:36},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2371,columnNumber:19},void 0),s.jsxDEV("span",{className:"ml-2 text-sm text-gray-700",children:"Î∂ÄÍ∞ÄÏÑ∏ Ìè¨Ìï® (10%)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2374,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2360,columnNumber:17},void 0),s.jsxDEV("button",{type:"button",className:"flex items-center cursor-pointer",onMouseDown:e=>e.preventDefault(),onClick:()=>{j||I(!1),_(!j)},children:[s.jsxDEV("div",{className:`h-4 w-4 border rounded flex items-center justify-center ${j?"bg-gray-600 border-gray-600":"border-gray-300"}`,children:j&&s.jsxDEV("span",{className:"text-white text-xs",children:"‚úì"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2390,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2389,columnNumber:19},void 0),s.jsxDEV("span",{className:"ml-2 text-sm text-gray-700",children:"3.3% ÏÑ∏Í∏àÍ≥µÏ†ú"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2392,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2378,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2359,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2339,columnNumber:13},void 0),s.jsxDEV("div",{className:"payment-account-section border-t pt-3 space-y-2",children:[(ye.length>0||ke.length>0&&!de)&&s.jsxDEV("div",{className:"payment-suggestions-row grid grid-cols-2 gap-2",children:[s.jsxDEV("div",{className:`payment-contractor-suggestions bg-amber-50 border border-amber-200 rounded-lg p-2 ${ye.length===0?"hidden":""}`,children:[s.jsxDEV("label",{className:"block text-xs font-medium text-amber-900 mb-1",children:"Ï∂îÏ≤ú ÌòëÎ†•ÏóÖÏ≤¥"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2408,columnNumber:21},void 0),s.jsxDEV("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:ye.map(e=>{const t=e.id||e._id,n=de===t;return s.jsxDEV("button",{type:"button",onClick:()=>es(e),className:`w-full text-left px-2 py-1.5 rounded border transition-colors ${n?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-400 hover:bg-gray-50"}`,children:[s.jsxDEV("div",{className:"font-medium text-xs text-gray-900",children:$e(e.name)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2424,columnNumber:29},void 0),s.jsxDEV("div",{className:"text-[10px] text-gray-500 truncate",children:[e.bankName||""," ",e.accountNumber||""]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2427,columnNumber:29},void 0)]},t,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2414,columnNumber:27},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2409,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2405,columnNumber:19},void 0),s.jsxDEV("div",{className:`payment-history-suggestions bg-blue-50 border border-blue-200 rounded-lg p-2 ${ke.length===0||de?"hidden":""}`,children:[s.jsxDEV("label",{className:"block text-xs font-medium text-blue-900 mb-1",children:"Ïù¥Ï†Ñ ÏÜ°Í∏à ÎÇ¥Ïó≠"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2440,columnNumber:21},void 0),s.jsxDEV("div",{className:"space-y-1 max-h-56 overflow-y-auto",children:ke.map((e,t)=>s.jsxDEV("button",{type:"button",onClick:()=>{y(n=>({...n,accountHolder:e.accountHolder,bankName:e.bankName,accountNumber:e.accountNumber})),he([])},className:"w-full text-left px-2 py-1.5 rounded border border-blue-200 bg-white hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[s.jsxDEV("div",{className:"font-medium text-xs text-gray-900",children:e.accountHolder},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2457,columnNumber:27},void 0),s.jsxDEV("div",{className:"text-[10px] text-gray-500 truncate",children:[e.bankName," ",e.accountNumber]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2460,columnNumber:27},void 0)]},t,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2443,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2441,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2437,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2403,columnNumber:17},void 0),s.jsxDEV("div",{className:"relative",children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÏòàÍ∏àÏ£º"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2472,columnNumber:17},void 0),s.jsxDEV("input",{type:"text",value:i.accountHolder,onChange:e=>y({...i,accountHolder:e.target.value}),onFocus:()=>ve(!0),onBlur:()=>setTimeout(()=>ve(!1),150),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"ÏòàÍ∏àÏ£ºÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2473,columnNumber:17},void 0),De&&_e.length>0&&s.jsxDEV("div",{className:"absolute z-20 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:_e.map((e,t)=>s.jsxDEV("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-gray-100 border-b last:border-b-0 flex justify-between items-center",onMouseDown:n=>n.preventDefault(),onClick:()=>{y({...i,accountHolder:e.name,bankName:e.bankName||i.bankName,accountNumber:e.accountNumber||i.accountNumber}),ve(!1)},children:[s.jsxDEV("span",{className:"font-medium",children:e.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2501,columnNumber:25},void 0),s.jsxDEV("span",{className:"text-xs text-gray-500",children:e.source==="contractor"?"ÌòëÎ†•ÏóÖÏ≤¥":"ÏÜ°Í∏àÎÇ¥Ïó≠"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2502,columnNumber:25},void 0)]},`${e.name}-${t}`,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2486,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2484,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2471,columnNumber:15},void 0),s.jsxDEV("div",{className:"payment-bank-field",children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2513,columnNumber:17},void 0),s.jsxDEV("select",{value:i.bankName,onChange:e=>y({...i,bankName:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[s.jsxDEV("option",{value:"",children:"ÏùÄÌñâ ÏÑ†ÌÉù"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2519,columnNumber:19},void 0),s.jsxDEV("option",{value:"KBÍµ≠ÎØºÏùÄÌñâ",children:"KBÍµ≠ÎØºÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2520,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïã†ÌïúÏùÄÌñâ",children:"Ïã†ÌïúÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2521,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïö∞Î¶¨ÏùÄÌñâ",children:"Ïö∞Î¶¨ÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2522,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÌïòÎÇòÏùÄÌñâ",children:"ÌïòÎÇòÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2523,columnNumber:19},void 0),s.jsxDEV("option",{value:"NHÎÜçÌòëÏùÄÌñâ",children:"NHÎÜçÌòëÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2524,columnNumber:19},void 0),s.jsxDEV("option",{value:"IBKÍ∏∞ÏóÖÏùÄÌñâ",children:"IBKÍ∏∞ÏóÖÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2525,columnNumber:19},void 0),s.jsxDEV("option",{value:"SCÏ†úÏùºÏùÄÌñâ",children:"SCÏ†úÏùºÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2526,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÌïúÍµ≠Ïî®Ìã∞ÏùÄÌñâ",children:"ÌïúÍµ≠Ïî®Ìã∞ÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2527,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨",children:"Ïπ¥Ïπ¥Ïò§Î±ÖÌÅ¨"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2528,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÏºÄÏù¥Î±ÖÌÅ¨",children:"ÏºÄÏù¥Î±ÖÌÅ¨"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2529,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÌÜ†Ïä§Î±ÖÌÅ¨",children:"ÌÜ†Ïä§Î±ÖÌÅ¨"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2530,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÏÉàÎßàÏùÑÍ∏àÍ≥†",children:"ÏÉàÎßàÏùÑÍ∏àÍ≥†"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2531,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïã†Ìòë",children:"Ïã†Ìòë"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2532,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ïö∞Ï≤¥Íµ≠",children:"Ïö∞Ï≤¥Íµ≠"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2533,columnNumber:19},void 0),s.jsxDEV("option",{value:"KDBÏÇ∞ÏóÖÏùÄÌñâ",children:"KDBÏÇ∞ÏóÖÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2534,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÏàòÌòëÏùÄÌñâ",children:"ÏàòÌòëÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2535,columnNumber:19},void 0),s.jsxDEV("option",{value:"ÎåÄÍµ¨ÏùÄÌñâ",children:"ÎåÄÍµ¨ÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2536,columnNumber:19},void 0),s.jsxDEV("option",{value:"Î∂ÄÏÇ∞ÏùÄÌñâ",children:"Î∂ÄÏÇ∞ÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2537,columnNumber:19},void 0),s.jsxDEV("option",{value:"Í≤ΩÎÇ®ÏùÄÌñâ",children:"Í≤ΩÎÇ®ÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2538,columnNumber:19},void 0),s.jsxDEV("option",{value:"Í¥ëÏ£ºÏùÄÌñâ",children:"Í¥ëÏ£ºÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2539,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ï†ÑÎ∂ÅÏùÄÌñâ",children:"Ï†ÑÎ∂ÅÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2540,columnNumber:19},void 0),s.jsxDEV("option",{value:"Ï†úÏ£ºÏùÄÌñâ",children:"Ï†úÏ£ºÏùÄÌñâ"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2541,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2514,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2512,columnNumber:15},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Í≥ÑÏ¢åÎ≤àÌò∏"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2546,columnNumber:17},void 0),s.jsxDEV("input",{type:"text",value:i.accountNumber,onChange:e=>y({...i,accountNumber:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"Í≥ÑÏ¢åÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2547,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2545,columnNumber:15},void 0),s.jsxDEV("div",{className:"pt-2 border-t",children:s.jsxDEV("div",{className:"flex justify-between items-baseline",children:[s.jsxDEV("span",{className:"font-medium",children:"Ï¥ùÏï°"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2558,columnNumber:19},void 0),s.jsxDEV("div",{className:"text-right",children:[(P||j)&&s.jsxDEV("span",{className:"text-xs text-gray-500 mr-2",children:["(",P&&"Î∂ÄÍ∞ÄÏÑ∏ Ìè¨Ìï®",j&&"3.3% ÏÑ∏Í∏àÍ≥µÏ†ú",")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2561,columnNumber:23},void 0),s.jsxDEV("span",{className:"font-semibold",children:[(()=>{const e=Number(i.amount)||0;let t=e;return j&&(t=Math.round(e*.967)),t.toLocaleString()})(),"Ïõê"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2565,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2559,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2557,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2556,columnNumber:15},void 0),s.jsxDEV("div",{className:"mt-6 lg:my-[50px]",children:[B&&s.jsxDEV("button",{onClick:()=>{te(null),y(e=>({project:e.project,date:w(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:"",quickImages:[]})),I(!1),_(!1),Y(null),g.info("ÏàòÏ†ïÏù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§")},className:"w-full py-2 mb-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 touch-manipulation",style:{minHeight:"48px"},children:"Ï∑®ÏÜå"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2584,columnNumber:19},void 0),s.jsxDEV("button",{onClick:e=>{console.log("üí∞ Payment button clicked!",e),console.log("üí∞ Button element:",e.currentTarget),console.log("üí∞ Form data:",i),ss()},disabled:ce,className:`w-full py-3 rounded-lg touch-manipulation font-medium text-base ${ce?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800 active:bg-gray-950"}`,style:{minHeight:"48px",WebkitTapHighlightColor:"transparent"},children:ce?"Ï≤òÎ¶¨Ï§ë...":B?"ÏàòÏ†ïÏôÑÎ£å":"Í≤∞Ï†úÏöîÏ≤≠"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2613,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2582,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2400,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2136,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2133,columnNumber:9},void 0),s.jsxDEV("div",{className:`payment-list md:col-span-4 ipad:col-span-4 ipad-lg:col-span-4 ipad-xl:col-span-4 ipad-2xl:col-span-4 bg-white rounded-lg border overflow-hidden flex flex-col h-[calc(100vh-180px)] ${q!=="list"?"hidden md:flex":""}`,children:[s.jsxDEV("div",{className:"bg-gray-50 px-4 pt-3 pb-0 flex-shrink-0",children:s.jsxDEV("div",{className:"flex items-center justify-between gap-4",children:s.jsxDEV("nav",{className:"flex gap-2 overflow-x-auto flex-1",children:[s.jsxDEV("button",{onClick:()=>Q("pending"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${S==="pending"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["ÎåÄÍ∏∞Ï§ë",s.jsxDEV("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${S==="pending"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:G.filter(e=>e.status==="pending").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2652,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2643,columnNumber:17},void 0),s.jsxDEV("button",{onClick:()=>Q("completed"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${S==="completed"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["ÏÜ°Í∏àÏôÑÎ£å",s.jsxDEV("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${S==="completed"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:G.filter(e=>e.status==="completed").length},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2667,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2658,columnNumber:17},void 0),S==="completed"&&s.jsxDEV("label",{className:"ml-3 flex items-center gap-1.5 cursor-pointer text-xs text-gray-600",children:[s.jsxDEV("input",{type:"checkbox",checked:Le,onChange:e=>{Ke(e.target.checked),localStorage.setItem("payments_showMyRequestsOnly",String(e.target.checked))},className:"w-3.5 h-3.5 rounded border-gray-300 text-gray-600 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2676,columnNumber:21},void 0),"ÎÇ¥ ÏöîÏ≤≠Îßå"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2675,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2642,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2641,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2640,columnNumber:11},void 0),s.jsxDEV("div",{className:"border-b border-gray-200"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2691,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex-1 overflow-auto p-4",children:Ae.length>0?s.jsxDEV("div",{className:"space-y-4",children:Ae.map(e=>{var l,a,d;const t=e.amount||0,n=((l=e.bankInfo)==null?void 0:l.accountHolder)||e.accountHolder||"",m=((a=e.bankInfo)==null?void 0:a.bankName)||e.bank||"",r=((d=e.bankInfo)==null?void 0:d.accountNumber)||e.accountNumber||"",o=n&&m&&r?`${n} | ${m} ${r}`:"Í≥ÑÏ¢åÏ†ïÎ≥¥ ÏóÜÏùå";return s.jsxDEV("div",{onClick:()=>k(e.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${b===e.id?"border-gray-900 bg-gray-50":"border-gray-200 bg-white hover:border-gray-400"}`,children:[s.jsxDEV("div",{className:"flex justify-between items-start mb-2.5",children:[s.jsxDEV("div",{className:"flex-1 min-w-0",children:[s.jsxDEV("div",{className:"flex items-baseline gap-2",children:[e.process&&s.jsxDEV("span",{className:"text-xs text-gray-500 shrink-0",children:["[",e.process,"]"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2723,columnNumber:31},void 0),s.jsxDEV("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:e.purpose||e.itemName||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2725,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2721,columnNumber:27},void 0),s.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:e.project||"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2729,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2720,columnNumber:25},void 0),s.jsxDEV("div",{className:"text-right ml-3 shrink-0",children:[s.jsxDEV("p",{className:"text-base font-bold text-gray-900",children:[t.toLocaleString(),"Ïõê"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2732,columnNumber:27},void 0),s.jsxDEV("p",{className:"text-[10px] text-gray-400",children:[e.requestedBy||"-"," ¬∑ ",w(new Date(e.requestDate),"MM/dd",{locale:ie})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2735,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2731,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2719,columnNumber:23},void 0),s.jsxDEV("div",{className:"flex items-center gap-2 mb-2.5 text-xs",children:[s.jsxDEV("span",{className:"text-gray-400",children:["ÏûêÏû¨ÎπÑ ",(e.materialAmount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2743,columnNumber:25},void 0),s.jsxDEV("span",{className:"text-gray-300",children:"¬∑"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2744,columnNumber:25},void 0),s.jsxDEV("span",{className:"text-gray-400",children:["Ïù∏Í±¥ÎπÑ ",(e.laborAmount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2745,columnNumber:25},void 0),e.includesVAT&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("span",{className:"text-gray-300",children:"¬∑"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2748,columnNumber:29},void 0),s.jsxDEV("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-700 text-[10px] rounded",children:"VAT"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2749,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2747,columnNumber:27},void 0),e.applyTaxDeduction&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("span",{className:"text-gray-300",children:"¬∑"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2754,columnNumber:29},void 0),s.jsxDEV("span",{className:"px-1.5 py-0.5 bg-purple-50 text-purple-700 text-[10px] rounded",children:"3.3%"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2755,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2753,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2742,columnNumber:23},void 0),s.jsxDEV("div",{className:"flex items-center justify-between mb-2.5",children:[s.jsxDEV("div",{className:"text-xs text-gray-500 truncate flex-1",children:o},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2762,columnNumber:25},void 0),s.jsxDEV("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[s.jsxDEV("button",{onClick:c=>{c.stopPropagation(),ns(e)},className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"ÏàòÏ†ï",children:s.jsxDEV(xs,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2774,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2766,columnNumber:27},void 0),s.jsxDEV("button",{onClick:async c=>{c.stopPropagation(),window.confirm("Ïù¥ Í≤∞Ï†úÏöîÏ≤≠ÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&(await ne(e.id),g.success("ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§"))},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"ÏÇ≠Ï†ú",children:s.jsxDEV(ys,{className:"h-3.5 w-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2787,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2776,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2765,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2761,columnNumber:23},void 0),S==="pending"&&(u==null?void 0:u.role)&&["manager","admin"].includes(u.role)&&s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("button",{onClick:c=>{if(c.stopPropagation(),e.status==="completed"){g.info("Ïù¥ÎØ∏ ÏÜ°Í∏àÏôÑÎ£å Ï≤òÎ¶¨Îêú Í±¥ÏûÖÎãàÎã§");return}ts(e)},disabled:e.status==="completed",className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${e.status==="completed"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,children:e.status==="completed"?"ÏÜ°Í∏àÏôÑÎ£åÎê®":"Ï¶âÏãúÏÜ°Í∏à"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2796,columnNumber:27},void 0),s.jsxDEV("button",{onClick:c=>{c.stopPropagation(),as(e.id)},disabled:e.status==="completed",className:`flex-1 py-1.5 px-2 text-white rounded text-xs font-medium transition-colors ${e.status==="completed"?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:e.status==="completed"?"#9ca3af":"#5f81a5"},onMouseEnter:c=>{e.status!=="completed"&&(c.currentTarget.style.backgroundColor="#4a6b8a")},onMouseLeave:c=>{e.status!=="completed"&&(c.currentTarget.style.backgroundColor="#5f81a5")},children:"ÏÜ°Í∏àÏôÑÎ£å"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2814,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2795,columnNumber:25},void 0)]},e.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2709,columnNumber:21},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2695,columnNumber:15},void 0):s.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Í≤∞Ï†úÏöîÏ≤≠Ïù¥ ÏóÜÏäµÎãàÎã§"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2845,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2693,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2636,columnNumber:9},void 0),s.jsxDEV("div",{className:`payment-images md:col-span-6 ipad:col-span-6 ipad-lg:col-span-6 ipad-xl:col-span-6 ipad-2xl:col-span-6 bg-white rounded-lg border flex flex-col overflow-hidden h-[calc(100vh-180px)] ${q!=="image"?"hidden lg:flex":""}`,onDragOver:is,onDragLeave:ls,onDrop:cs,children:[s.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:rs,className:"hidden",id:"image-file-input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2861,columnNumber:11},void 0),xe&&b&&q==="image"&&(()=>{const e=G.find(t=>t.id===b);return e?s.jsxDEV("div",{className:"border-b bg-gray-50 p-3",children:s.jsxDEV("div",{className:"flex justify-between items-start",children:[s.jsxDEV("div",{className:"flex-1",children:[s.jsxDEV("p",{className:"font-medium text-gray-900 text-sm",children:e.purpose||e.itemName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2878,columnNumber:23},void 0),s.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:[e.process||"-"," ‚Ä¢ ",w(new Date(e.requestDate),"yyyy.MM.dd",{locale:ie})]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2879,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2877,columnNumber:21},void 0),s.jsxDEV("p",{className:"text-sm font-bold text-gray-900",children:["‚Ç©",(e.amount||0).toLocaleString()]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2883,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2876,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2875,columnNumber:17},void 0):null})(),s.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 relative",onClick:e=>{var n;const t=e.target;if(!t.closest("img")&&!t.closest("button")&&b){const m=G.find(a=>a.id===b),r=(m==null?void 0:m.images)||[],o=M[b]||[];(r.length>0?r:o).length>0&&((n=document.getElementById("image-file-input"))==null||n.click())}},children:b?(()=>{const e=G.find(r=>r.id===b),t=(e==null?void 0:e.images)||[],n=M[b]||[],m=t.length>0?t:n;return s.jsxDEV("div",{className:"h-full flex flex-col",children:[s.jsxDEV("div",{className:"mb-3",children:[s.jsxDEV("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Î©îÎ™®"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2919,columnNumber:21},void 0),s.jsxDEV("textarea",{value:(e==null?void 0:e.quickText)||(e==null?void 0:e.notes)||"",readOnly:!0,placeholder:"Î©îÎ™® ÏóÜÏùå",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-gray-50 resize-none",rows:8},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2920,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2918,columnNumber:19},void 0),m.length>0&&s.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mb-3",children:m.map((r,o)=>s.jsxDEV("div",{className:"relative group",children:[s.jsxDEV("img",{src:r,alt:`Ï¶ùÎπô ${o+1}`,className:"w-full aspect-square object-contain rounded-lg cursor-pointer hover:opacity-90 transition-opacity border bg-gray-100",onClick:l=>{l.stopPropagation(),ms(r)}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2934,columnNumber:27},void 0),s.jsxDEV("button",{onClick:l=>{l.stopPropagation(),os(o)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:s.jsxDEV(me,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2950,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2943,columnNumber:27},void 0),s.jsxDEV("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1.5 py-0.5 rounded",children:[o+1,"/",m.length]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2952,columnNumber:27},void 0)]},o,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2933,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2931,columnNumber:21},void 0),s.jsxDEV("label",{htmlFor:"image-file-input",className:`block cursor-pointer ${m.length>0?"":"flex-1"}`,onClick:r=>r.stopPropagation(),children:s.jsxDEV("div",{className:`w-full border-2 border-dashed rounded-lg p-4 text-center transition-colors flex flex-col items-center justify-center ${Ne?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"} ${m.length>0?"min-h-[80px]":"min-h-[200px]"}`,children:[s.jsxDEV(ks,{className:`mx-auto text-gray-400 mb-1 ${m.length>0?"h-6 w-6":"h-10 w-10 mb-2"}`},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2971,columnNumber:23},void 0),s.jsxDEV("p",{className:"text-sm font-medium text-gray-700",children:m.length>0?"Ïù¥ÎØ∏ÏßÄ Ï≤®Î∂Ä":"ÌÅ¥Î¶≠ÌïòÏó¨ ÏÑ†ÌÉù"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2972,columnNumber:23},void 0),m.length===0&&s.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"ÎòêÎäî Ïù¥ÎØ∏ÏßÄÎ•º ÎìúÎûòÍ∑∏ÌïòÍ±∞ÎÇò Ctrl+VÎ°ú Î∂ôÏó¨ÎÑ£Í∏∞"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2976,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2966,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2961,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2916,columnNumber:17},void 0)})():s.jsxDEV("div",{className:"h-full flex items-center justify-center min-h-[200px]",children:s.jsxDEV("div",{className:"text-center text-gray-400",children:[s.jsxDEV(hs,{className:"h-12 w-12 mx-auto mb-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2985,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-sm",children:"Í≤∞Ï†úÏöîÏ≤≠ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2986,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2984,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2983,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2893,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2853,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2130,columnNumber:7},void 0),We&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"lg:hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxDEV("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[s.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b",children:[s.jsxDEV("h2",{className:"text-base font-bold text-gray-900",children:"Í≥µÏ†ï ÏÑ†ÌÉù"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3001,columnNumber:17},void 0),s.jsxDEV("button",{onClick:()=>$(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:s.jsxDEV(me,{className:"h-4 w-4 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3006,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3002,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3e3,columnNumber:15},void 0),s.jsxDEV("div",{className:"p-3 overflow-y-auto max-h-[calc(80vh-100px)]",children:[s.jsxDEV("div",{className:"grid grid-cols-2 gap-2 mb-2",children:He.map(e=>s.jsxDEV("button",{onClick:()=>{y({...i,process:e}),$(!1)},className:`p-2 text-sm text-center border rounded-lg transition-all ${i.process===e?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:e},e,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3013,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3011,columnNumber:17},void 0),s.jsxDEV("button",{onClick:()=>{y({...i,process:""}),$(!1)},className:"w-full p-2 text-sm text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:"ÏÑ†ÌÉù ÏïàÌï®"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3030,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3010,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2999,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2998,columnNumber:11},void 0),s.jsxDEV("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>$(!1),children:s.jsxDEV("div",{onClick:e=>e.stopPropagation(),className:"absolute bg-white rounded-lg shadow-xl border border-gray-200",style:{top:ae.current?`${ae.current.getBoundingClientRect().bottom+window.scrollY+4}px`:"50%",left:ae.current?`${ae.current.getBoundingClientRect().left+window.scrollX}px`:"50%"},children:[s.jsxDEV("div",{className:"flex items-center justify-between p-2 border-b",children:[s.jsxDEV("h2",{className:"text-sm font-bold text-gray-900",children:"Í≥µÏ†ï ÏÑ†ÌÉù"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3054,columnNumber:17},void 0),s.jsxDEV("button",{onClick:()=>$(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:s.jsxDEV(me,{className:"h-3 w-3 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3059,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3055,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3053,columnNumber:15},void 0),s.jsxDEV("div",{className:"p-2",children:[s.jsxDEV("div",{className:"grid grid-cols-4 gap-1.5 mb-2",children:He.map(e=>s.jsxDEV("button",{onClick:()=>{y({...i,process:e}),$(!1)},className:`p-1.5 text-xs text-center border rounded-lg transition-all whitespace-nowrap ${i.process===e?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:e},e,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3066,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3064,columnNumber:17},void 0),s.jsxDEV("button",{onClick:()=>{y({...i,process:""}),$(!1)},className:"w-full p-1.5 text-xs text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:"ÏÑ†ÌÉù ÏïàÌï®"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3083,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3063,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3045,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3044,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2996,columnNumber:9},void 0),le&&s.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>J(!1),children:s.jsxDEV("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[s.jsxDEV("button",{onClick:e=>{e.stopPropagation(),J(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:s.jsxDEV(me,{className:"h-8 w-8"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3112,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3105,columnNumber:13},void 0),s.jsxDEV("img",{src:Te,alt:"ÏõêÎ≥∏ Ïù¥ÎØ∏ÏßÄ",className:"max-w-full max-h-[90vh] object-contain",onClick:e=>e.stopPropagation()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3114,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3104,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3100,columnNumber:9},void 0),ze&&s.jsxDEV(Hs,{projectName:Je,onClose:()=>Ze(!1)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:3126,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Payments.tsx",lineNumber:2071,columnNumber:5},void 0)};export{Ks as default};
