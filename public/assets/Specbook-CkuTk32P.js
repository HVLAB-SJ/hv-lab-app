import{j as a,u as ns,a as X,z as U}from"./index-BEcj_9LK.js";import{g as rs,r as d,R as he,b as gt}from"./vendor-react-B9Yt5e0k.js";import{u as ss}from"./useFilteredProjects-DRzDCrDj.js";import{X as jt,C as os,t as is,U as as,u as ls,j as yn,T as zt,P as Pn}from"./vendor-ui-CcgAtStV.js";import"./vendor-data-CCSjXVfu.js";import"./vendor-date-9Cl9d1sr.js";import"./dataStore-BgcWWVmH.js";var sn=function(t,n){return sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},sn(t,n)};function cs(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");sn(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var ee=function(){return ee=Object.assign||function(n){for(var e,r=1,s=arguments.length;r<s;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ee.apply(this,arguments)};var Tn=!1,Qe,on,an,Rt,Bt,cr,Ut,ln,cn,dn,dr,un,mn,ur,mr;function ge(){if(!Tn){Tn=!0;var t=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),e=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(un=/\b(iPhone|iP[ao]d)/.exec(t),mn=/\b(iP[ao]d)/.exec(t),dn=/Android/i.exec(t),ur=/FBAN\/\w+;/i.exec(t),mr=/Mobile/i.exec(t),dr=!!/Win64/.exec(t),n){Qe=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,Qe&&document&&document.documentMode&&(Qe=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);cr=r?parseFloat(r[1])+4:Qe,on=n[2]?parseFloat(n[2]):NaN,an=n[3]?parseFloat(n[3]):NaN,Rt=n[4]?parseFloat(n[4]):NaN,Rt?(n=/(?:Chrome\/(\d+\.\d+))/.exec(t),Bt=n&&n[1]?parseFloat(n[1]):NaN):Bt=NaN}else Qe=on=an=Bt=Rt=NaN;if(e){if(e[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Ut=s?parseFloat(s[1].replace("_",".")):!0}else Ut=!1;ln=!!e[2],cn=!!e[3]}else Ut=ln=cn=!1}}var pn={ie:function(){return ge()||Qe},ieCompatibilityMode:function(){return ge()||cr>Qe},ie64:function(){return pn.ie()&&dr},firefox:function(){return ge()||on},opera:function(){return ge()||an},webkit:function(){return ge()||Rt},safari:function(){return pn.webkit()},chrome:function(){return ge()||Bt},windows:function(){return ge()||ln},osx:function(){return ge()||Ut},linux:function(){return ge()||cn},iphone:function(){return ge()||un},mobile:function(){return ge()||un||mn||dn||mr},nativeApp:function(){return ge()||ur},android:function(){return ge()||dn},ipad:function(){return ge()||mn}},ds=pn,us=!!(typeof window<"u"&&window.document&&window.document.createElement),ms={canUseDOM:us},ps=ms,pr=ps,fr;pr.canUseDOM&&(fr=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function fs(t,n){if(!pr.canUseDOM||n&&!("addEventListener"in document))return!1;var e="on"+t,r=e in document;if(!r){var s=document.createElement("div");s.setAttribute(e,"return;"),r=typeof s[e]=="function"}return!r&&fr&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var gs=fs,hs=ds,bs=gs,zn=10,On=40,Fn=800;function gr(t){var n=0,e=0,r=0,s=0;return"detail"in t&&(e=t.detail),"wheelDelta"in t&&(e=-t.wheelDelta/120),"wheelDeltaY"in t&&(e=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(n=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(n=e,e=0),r=n*zn,s=e*zn,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||s)&&t.deltaMode&&(t.deltaMode==1?(r*=On,s*=On):(r*=Fn,s*=Fn)),r&&!n&&(n=r<1?-1:1),s&&!e&&(e=s<1?-1:1),{spinX:n,spinY:e,pixelX:r,pixelY:s}}gr.getEventType=function(){return hs.firefox()?"DOMMouseScroll":bs("wheel")?"wheel":"mousewheel"};var vs=gr,xs=vs;const Ns=rs(xs);function ys(t,n,e,r,s,i){i===void 0&&(i=0);var l=it(t,n,i),c=l.width,u=l.height,p=Math.min(c,e),g=Math.min(u,r);return p>g*s?{width:g*s,height:g}:{width:p,height:p/s}}function ks(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function ft(t,n,e,r,s){s===void 0&&(s=0);var i=it(n.width,n.height,s),l=i.width,c=i.height;return{x:Wn(t.x,l,e.width,r),y:Wn(t.y,c,e.height,r)}}function Wn(t,n,e,r){var s=n*r/2-e/2;return Ot(t,-s,s)}function $n(t,n){return Math.sqrt(Math.pow(t.y-n.y,2)+Math.pow(t.x-n.x,2))}function Xn(t,n){return Math.atan2(n.y-t.y,n.x-t.x)*180/Math.PI}function Ds(t,n,e,r,s,i,l){i===void 0&&(i=0),l===void 0&&(l=!0);var c=l?ws:Cs,u=it(n.width,n.height,i),p=it(n.naturalWidth,n.naturalHeight,i),g={x:c(100,((u.width-e.width/s)/2-t.x/s)/u.width*100),y:c(100,((u.height-e.height/s)/2-t.y/s)/u.height*100),width:c(100,e.width/u.width*100/s),height:c(100,e.height/u.height*100/s)},f=Math.round(c(p.width,g.width*p.width/100)),b=Math.round(c(p.height,g.height*p.height/100)),h=p.width>=p.height*r,D=h?{width:Math.round(b*r),height:b}:{width:f,height:Math.round(f/r)},y=ee(ee({},D),{x:Math.round(c(p.width-D.width,g.x*p.width/100)),y:Math.round(c(p.height-D.height,g.y*p.height/100))});return{croppedAreaPercentages:g,croppedAreaPixels:y}}function ws(t,n){return Math.min(t,Math.max(0,n))}function Cs(t,n){return n}function Ss(t,n,e,r,s,i){var l=it(n.width,n.height,e),c=Ot(r.width/l.width*(100/t.width),s,i),u={x:c*l.width/2-r.width/2-l.width*c*(t.x/100),y:c*l.height/2-r.height/2-l.height*c*(t.y/100)};return{crop:u,zoom:c}}function Es(t,n,e){var r=ks(n);return e.height>e.width?e.height/(t.height*r):e.width/(t.width*r)}function Vs(t,n,e,r,s,i){e===void 0&&(e=0);var l=it(n.naturalWidth,n.naturalHeight,e),c=Ot(Es(t,n,r),s,i),u=r.height>r.width?r.height/t.height:r.width/t.width,p={x:((l.width-t.width)/2-t.x)*u,y:((l.height-t.height)/2-t.y)*u};return{crop:p,zoom:c}}function Yn(t,n){return{x:(n.x+t.x)/2,y:(n.y+t.y)/2}}function As(t){return t*Math.PI/180}function it(t,n,e){var r=As(e);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*n),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*n)}}function Ot(t,n,e){return Math.min(Math.max(t,n),e)}function At(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.filter(function(e){return typeof e=="string"&&e.length>0}).join(" ").trim()}var _s=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Ls=1,js=3,Rs=1,Bs=function(t){cs(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.cropperRef=d.createRef(),e.imageRef=d.createRef(),e.videoRef=d.createRef(),e.containerPosition={x:0,y:0},e.containerRef=null,e.styleRef=null,e.containerRect=null,e.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},e.dragStartPosition={x:0,y:0},e.dragStartCrop={x:0,y:0},e.gestureZoomStart=0,e.gestureRotationStart=0,e.isTouching=!1,e.lastPinchDistance=0,e.lastPinchRotation=0,e.rafDragTimeout=null,e.rafPinchTimeout=null,e.wheelTimer=null,e.currentDoc=typeof document<"u"?document:null,e.currentWindow=typeof window<"u"?window:null,e.resizeObserver=null,e.previousCropSize=null,e.isInitialized=!1,e.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},e.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!e.containerRef)){var r=!0;e.resizeObserver=new window.ResizeObserver(function(s){if(r){r=!1;return}e.computeSizes()}),e.resizeObserver.observe(e.containerRef)}},e.preventZoomSafari=function(r){return r.preventDefault()},e.cleanEvents=function(){e.currentDoc&&(e.currentDoc.removeEventListener("mousemove",e.onMouseMove),e.currentDoc.removeEventListener("mouseup",e.onDragStopped),e.currentDoc.removeEventListener("touchmove",e.onTouchMove),e.currentDoc.removeEventListener("touchend",e.onDragStopped),e.currentDoc.removeEventListener("gesturechange",e.onGestureChange),e.currentDoc.removeEventListener("gestureend",e.onGestureEnd),e.currentDoc.removeEventListener("scroll",e.onScroll))},e.clearScrollEvent=function(){e.containerRef&&e.containerRef.removeEventListener("wheel",e.onWheel),e.wheelTimer&&clearTimeout(e.wheelTimer)},e.onMediaLoad=function(){var r=e.computeSizes();r&&(e.previousCropSize=r,e.emitCropData(),e.setInitialCrop(r),e.isInitialized=!0),e.props.onMediaLoaded&&e.props.onMediaLoaded(e.mediaSize)},e.setInitialCrop=function(r){if(e.props.initialCroppedAreaPercentages){var s=Ss(e.props.initialCroppedAreaPercentages,e.mediaSize,e.props.rotation,r,e.props.minZoom,e.props.maxZoom),i=s.crop,l=s.zoom;e.props.onCropChange(i),e.props.onZoomChange&&e.props.onZoomChange(l)}else if(e.props.initialCroppedAreaPixels){var c=Vs(e.props.initialCroppedAreaPixels,e.mediaSize,e.props.rotation,r,e.props.minZoom,e.props.maxZoom),i=c.crop,l=c.zoom;e.props.onCropChange(i),e.props.onZoomChange&&e.props.onZoomChange(l)}},e.computeSizes=function(){var r,s,i,l,c,u,p=e.imageRef.current||e.videoRef.current;if(p&&e.containerRef){e.containerRect=e.containerRef.getBoundingClientRect(),e.saveContainerPosition();var g=e.containerRect.width/e.containerRect.height,f=((r=e.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((s=e.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,b=((i=e.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((l=e.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,h=p.offsetWidth<f||p.offsetHeight<b,D=f/b,y=void 0;if(h)switch(e.state.mediaObjectFit){default:case"contain":y=g>D?{width:e.containerRect.height*D,height:e.containerRect.height}:{width:e.containerRect.width,height:e.containerRect.width/D};break;case"horizontal-cover":y={width:e.containerRect.width,height:e.containerRect.width/D};break;case"vertical-cover":y={width:e.containerRect.height*D,height:e.containerRect.height};break}else y={width:p.offsetWidth,height:p.offsetHeight};e.mediaSize=ee(ee({},y),{naturalWidth:f,naturalHeight:b}),e.props.setMediaSize&&e.props.setMediaSize(e.mediaSize);var w=e.props.cropSize?e.props.cropSize:ys(e.mediaSize.width,e.mediaSize.height,e.containerRect.width,e.containerRect.height,e.props.aspect,e.props.rotation);return(((c=e.state.cropSize)===null||c===void 0?void 0:c.height)!==w.height||((u=e.state.cropSize)===null||u===void 0?void 0:u.width)!==w.width)&&e.props.onCropSizeChange&&e.props.onCropSizeChange(w),e.setState({cropSize:w},e.recomputeCropPosition),e.props.setCropSize&&e.props.setCropSize(w),w}},e.saveContainerPosition=function(){if(e.containerRef){var r=e.containerRef.getBoundingClientRect();e.containerPosition={x:r.left,y:r.top}}},e.onMouseDown=function(r){e.currentDoc&&(r.preventDefault(),e.currentDoc.addEventListener("mousemove",e.onMouseMove),e.currentDoc.addEventListener("mouseup",e.onDragStopped),e.saveContainerPosition(),e.onDragStart(n.getMousePoint(r)))},e.onMouseMove=function(r){return e.onDrag(n.getMousePoint(r))},e.onScroll=function(r){e.currentDoc&&(r.preventDefault(),e.saveContainerPosition())},e.onTouchStart=function(r){e.currentDoc&&(e.isTouching=!0,!(e.props.onTouchRequest&&!e.props.onTouchRequest(r))&&(e.currentDoc.addEventListener("touchmove",e.onTouchMove,{passive:!1}),e.currentDoc.addEventListener("touchend",e.onDragStopped),e.saveContainerPosition(),r.touches.length===2?e.onPinchStart(r):r.touches.length===1&&e.onDragStart(n.getTouchPoint(r.touches[0]))))},e.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?e.onPinchMove(r):r.touches.length===1&&e.onDrag(n.getTouchPoint(r.touches[0]))},e.onGestureStart=function(r){e.currentDoc&&(r.preventDefault(),e.currentDoc.addEventListener("gesturechange",e.onGestureChange),e.currentDoc.addEventListener("gestureend",e.onGestureEnd),e.gestureZoomStart=e.props.zoom,e.gestureRotationStart=e.props.rotation)},e.onGestureChange=function(r){if(r.preventDefault(),!e.isTouching){var s=n.getMousePoint(r),i=e.gestureZoomStart-1+r.scale;if(e.setNewZoom(i,s,{shouldUpdatePosition:!0}),e.props.onRotationChange){var l=e.gestureRotationStart+r.rotation;e.props.onRotationChange(l)}}},e.onGestureEnd=function(r){e.cleanEvents()},e.onDragStart=function(r){var s,i,l=r.x,c=r.y;e.dragStartPosition={x:l,y:c},e.dragStartCrop=ee({},e.props.crop),(i=(s=e.props).onInteractionStart)===null||i===void 0||i.call(s)},e.onDrag=function(r){var s=r.x,i=r.y;e.currentWindow&&(e.rafDragTimeout&&e.currentWindow.cancelAnimationFrame(e.rafDragTimeout),e.rafDragTimeout=e.currentWindow.requestAnimationFrame(function(){if(e.state.cropSize&&!(s===void 0||i===void 0)){var l=s-e.dragStartPosition.x,c=i-e.dragStartPosition.y,u={x:e.dragStartCrop.x+l,y:e.dragStartCrop.y+c},p=e.props.restrictPosition?ft(u,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):u;e.props.onCropChange(p)}}))},e.onDragStopped=function(){var r,s;e.isTouching=!1,e.cleanEvents(),e.emitCropData(),(s=(r=e.props).onInteractionEnd)===null||s===void 0||s.call(r)},e.onWheel=function(r){if(e.currentWindow&&!(e.props.onWheelRequest&&!e.props.onWheelRequest(r))){r.preventDefault();var s=n.getMousePoint(r),i=Ns(r).pixelY,l=e.props.zoom-i*e.props.zoomSpeed/200;e.setNewZoom(l,s,{shouldUpdatePosition:!0}),e.state.hasWheelJustStarted||e.setState({hasWheelJustStarted:!0},function(){var c,u;return(u=(c=e.props).onInteractionStart)===null||u===void 0?void 0:u.call(c)}),e.wheelTimer&&clearTimeout(e.wheelTimer),e.wheelTimer=e.currentWindow.setTimeout(function(){return e.setState({hasWheelJustStarted:!1},function(){var c,u;return(u=(c=e.props).onInteractionEnd)===null||u===void 0?void 0:u.call(c)})},250)}},e.getPointOnContainer=function(r,s){var i=r.x,l=r.y;if(!e.containerRect)throw new Error("The Cropper is not mounted");return{x:e.containerRect.width/2-(i-s.x),y:e.containerRect.height/2-(l-s.y)}},e.getPointOnMedia=function(r){var s=r.x,i=r.y,l=e.props,c=l.crop,u=l.zoom;return{x:(s+c.x)/u,y:(i+c.y)/u}},e.setNewZoom=function(r,s,i){var l=i===void 0?{}:i,c=l.shouldUpdatePosition,u=c===void 0?!0:c;if(!(!e.state.cropSize||!e.props.onZoomChange)){var p=Ot(r,e.props.minZoom,e.props.maxZoom);if(u){var g=e.getPointOnContainer(s,e.containerPosition),f=e.getPointOnMedia(g),b={x:f.x*p-g.x,y:f.y*p-g.y},h=e.props.restrictPosition?ft(b,e.mediaSize,e.state.cropSize,p,e.props.rotation):b;e.props.onCropChange(h)}e.props.onZoomChange(p)}},e.getCropData=function(){if(!e.state.cropSize)return null;var r=e.props.restrictPosition?ft(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;return Ds(r,e.mediaSize,e.state.cropSize,e.getAspect(),e.props.zoom,e.props.rotation,e.props.restrictPosition)},e.emitCropData=function(){var r=e.getCropData();if(r){var s=r.croppedAreaPercentages,i=r.croppedAreaPixels;e.props.onCropComplete&&e.props.onCropComplete(s,i),e.props.onCropAreaChange&&e.props.onCropAreaChange(s,i)}},e.emitCropAreaChange=function(){var r=e.getCropData();if(r){var s=r.croppedAreaPercentages,i=r.croppedAreaPixels;e.props.onCropAreaChange&&e.props.onCropAreaChange(s,i)}},e.recomputeCropPosition=function(){var r,s;if(e.state.cropSize){var i=e.props.crop;if(e.isInitialized&&(!((r=e.previousCropSize)===null||r===void 0)&&r.width)&&(!((s=e.previousCropSize)===null||s===void 0)&&s.height)){var l=Math.abs(e.previousCropSize.width-e.state.cropSize.width)>1e-6||Math.abs(e.previousCropSize.height-e.state.cropSize.height)>1e-6;if(l){var c=e.state.cropSize.width/e.previousCropSize.width,u=e.state.cropSize.height/e.previousCropSize.height;i={x:e.props.crop.x*c,y:e.props.crop.y*u}}}var p=e.props.restrictPosition?ft(i,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):i;e.previousCropSize=e.state.cropSize,e.props.onCropChange(p),e.emitCropData()}},e.onKeyDown=function(r){var s,i,l=e.props,c=l.crop,u=l.onCropChange,p=l.keyboardStep,g=l.zoom,f=l.rotation,b=p;if(e.state.cropSize){r.shiftKey&&(b*=.2);var h=ee({},c);switch(r.key){case"ArrowUp":h.y-=b,r.preventDefault();break;case"ArrowDown":h.y+=b,r.preventDefault();break;case"ArrowLeft":h.x-=b,r.preventDefault();break;case"ArrowRight":h.x+=b,r.preventDefault();break;default:return}e.props.restrictPosition&&(h=ft(h,e.mediaSize,e.state.cropSize,g,f)),r.repeat||(i=(s=e.props).onInteractionStart)===null||i===void 0||i.call(s),u(h)}},e.onKeyUp=function(r){var s,i;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}e.emitCropData(),(i=(s=e.props).onInteractionEnd)===null||i===void 0||i.call(s)},e}return n.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=_s,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},n.prototype.componentWillUnmount=function(){var e,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},n.prototype.componentDidUpdate=function(e){var r,s,i,l,c,u,p,g,f;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():((r=e.cropSize)===null||r===void 0?void 0:r.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((i=e.cropSize)===null||i===void 0?void 0:i.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((c=e.crop)===null||c===void 0?void 0:c.x)!==((u=this.props.crop)===null||u===void 0?void 0:u.x)||((p=e.crop)===null||p===void 0?void 0:p.y)!==((g=this.props.crop)===null||g===void 0?void 0:g.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&((f=this.videoRef.current)===null||f===void 0||f.load());var b=this.getObjectFit();b!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:b},this.computeSizes)},n.prototype.getAspect=function(){var e=this.props,r=e.cropSize,s=e.aspect;return r?r.width/r.height:s},n.prototype.getObjectFit=function(){var e,r,s,i;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var c=this.containerRect.width/this.containerRect.height,u=((e=this.imageRef.current)===null||e===void 0?void 0:e.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,p=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,g=u/p;return g<c?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},n.prototype.onPinchStart=function(e){var r=n.getTouchPoint(e.touches[0]),s=n.getTouchPoint(e.touches[1]);this.lastPinchDistance=$n(r,s),this.lastPinchRotation=Xn(r,s),this.onDragStart(Yn(r,s))},n.prototype.onPinchMove=function(e){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var s=n.getTouchPoint(e.touches[0]),i=n.getTouchPoint(e.touches[1]),l=Yn(s,i);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var c=$n(s,i),u=r.props.zoom*(c/r.lastPinchDistance);r.setNewZoom(u,l,{shouldUpdatePosition:!1}),r.lastPinchDistance=c;var p=Xn(s,i),g=r.props.rotation+(p-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(g),r.lastPinchRotation=p})}},n.prototype.render=function(){var e=this,r,s=this.props,i=s.image,l=s.video,c=s.mediaProps,u=s.cropperProps,p=s.transform,g=s.crop,f=g.x,b=g.y,h=s.rotation,D=s.zoom,y=s.cropShape,w=s.showGrid,N=s.roundCropAreaPixels,C=s.style,V=C.containerStyle,_=C.cropAreaStyle,E=C.mediaStyle,L=s.classes,x=L.containerClassName,S=L.cropAreaClassName,R=L.mediaClassName,H=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return d.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(F){return e.containerRef=F},"data-testid":"container",style:V,className:At("reactEasyCrop_Container",x)},i?d.createElement("img",ee({alt:"",className:At("reactEasyCrop_Image",H==="contain"&&"reactEasyCrop_Contain",H==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",H==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",R)},c,{src:i,ref:this.imageRef,style:ee(ee({},E),{transform:p||"translate(".concat(f,"px, ").concat(b,"px) rotate(").concat(h,"deg) scale(").concat(D,")")}),onLoad:this.onMediaLoad})):l&&d.createElement("video",ee({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:At("reactEasyCrop_Video",H==="contain"&&"reactEasyCrop_Contain",H==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",H==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",R)},c,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:ee(ee({},E),{transform:p||"translate(".concat(f,"px, ").concat(b,"px) rotate(").concat(h,"deg) scale(").concat(D,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(I){return d.createElement("source",ee({key:I.src},I))})),this.state.cropSize&&d.createElement("div",ee({ref:this.cropperRef,style:ee(ee({},_),{width:N?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:N?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:At("reactEasyCrop_CropArea",y==="round"&&"reactEasyCrop_CropAreaRound",w&&"reactEasyCrop_CropAreaGrid",S)},u)))},n.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:js,minZoom:Ls,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:Rs},n.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},n.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},n}(d.Component);const Us=t=>new Promise((n,e)=>{const r=new Image;r.addEventListener("load",()=>n(r)),r.addEventListener("error",s=>e(s)),r.crossOrigin="anonymous",r.src=t});async function Hs(t,n,e=0){const r=await Us(t),s=document.createElement("canvas"),i=s.getContext("2d");if(!i)throw new Error("No 2d context");const l=e*Math.PI/180,c=Math.abs(Math.sin(l)),u=Math.abs(Math.cos(l)),p=r.width*u+r.height*c,g=r.width*c+r.height*u;s.width=n.width,s.height=n.height;const f=document.createElement("canvas"),b=f.getContext("2d");if(!b)throw new Error("No 2d context");f.width=p,f.height=g,b.translate(p/2,g/2),b.rotate(l),b.translate(-r.width/2,-r.height/2),b.drawImage(r,0,0);const h=(p-r.width)/2,D=(g-r.height)/2;return i.drawImage(f,n.x+h,n.y+D,n.width,n.height,0,0,n.width,n.height),s.toDataURL("image/jpeg",.9)}const Is=({image:t,onCropComplete:n,onCancel:e,aspectRatio:r=1})=>{const[s,i]=d.useState({x:0,y:0}),[l,c]=d.useState(1),[u,p]=d.useState(0),[g,f]=d.useState(null),b=d.useCallback(N=>{i(N)},[]),h=d.useCallback(N=>{c(N)},[]),D=d.useCallback((N,C)=>{f(C)},[]),y=()=>{p(N=>(N+90)%360)},w=async()=>{if(g)try{const N=await Hs(t,g,u);n(N)}catch(N){console.error("Error cropping image:",N)}};return a.jsxDEV("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col",children:[a.jsxDEV("div",{className:"flex items-center justify-between p-4 bg-black/50",children:[a.jsxDEV("button",{onClick:e,className:"p-2 text-white hover:bg-white/20 rounded-full transition-colors",children:a.jsxDEV(jt,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:131,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:127,columnNumber:9},void 0),a.jsxDEV("span",{className:"text-white font-medium",children:"이미지 자르기 (1:1)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:133,columnNumber:9},void 0),a.jsxDEV("button",{onClick:w,className:"p-2 text-white hover:bg-white/20 rounded-full transition-colors",children:a.jsxDEV(os,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:138,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:134,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:126,columnNumber:7},void 0),a.jsxDEV("div",{className:"flex-1 relative",children:a.jsxDEV(Bs,{image:t,crop:s,zoom:l,rotation:u,aspect:r,onCropChange:b,onZoomChange:h,onCropComplete:D,cropShape:"rect",showGrid:!0,style:{containerStyle:{backgroundColor:"#000"}}},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:144,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:143,columnNumber:7},void 0),a.jsxDEV("div",{className:"p-4 bg-black/50",children:a.jsxDEV("div",{className:"flex items-center justify-center gap-6",children:[a.jsxDEV("button",{onClick:y,className:"p-3 text-white hover:bg-white/20 rounded-full transition-colors",title:"90도 회전",children:a.jsxDEV(is,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:172,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:167,columnNumber:11},void 0),a.jsxDEV("div",{className:"flex items-center gap-3 flex-1 max-w-xs",children:[a.jsxDEV("span",{className:"text-white text-sm",children:"-"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:177,columnNumber:13},void 0),a.jsxDEV("input",{type:"range",min:1,max:3,step:.1,value:l,onChange:N=>c(Number(N.target.value)),className:"w-full h-2 bg-white/30 rounded-lg appearance-none cursor-pointer accent-white"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:178,columnNumber:13},void 0),a.jsxDEV("span",{className:"text-white text-sm",children:"+"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:187,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:176,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:165,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:164,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/ImageCropper.tsx",lineNumber:124,columnNumber:5},void 0)};function Ms(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return d.useMemo(()=>r=>{n.forEach(s=>s(r))},n)}const Ft=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function at(t){const n=Object.prototype.toString.call(t);return n==="[object Window]"||n==="[object global]"}function kn(t){return"nodeType"in t}function be(t){var n,e;return t?at(t)?t:kn(t)&&(n=(e=t.ownerDocument)==null?void 0:e.defaultView)!=null?n:window:window}function Dn(t){const{Document:n}=be(t);return t instanceof n}function Dt(t){return at(t)?!1:t instanceof be(t).HTMLElement}function hr(t){return t instanceof be(t).SVGElement}function lt(t){return t?at(t)?t.document:kn(t)?Dn(t)?t:Dt(t)||hr(t)?t.ownerDocument:document:document:document}const Be=Ft?d.useLayoutEffect:d.useEffect;function wn(t){const n=d.useRef(t);return Be(()=>{n.current=t}),d.useCallback(function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n.current==null?void 0:n.current(...r)},[])}function Ps(){const t=d.useRef(null),n=d.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),e=d.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[n,e]}function Nt(t,n){n===void 0&&(n=[t]);const e=d.useRef(t);return Be(()=>{e.current!==t&&(e.current=t)},n),e}function wt(t,n){const e=d.useRef();return d.useMemo(()=>{const r=t(e.current);return e.current=r,r},[...n])}function It(t){const n=wn(t),e=d.useRef(null),r=d.useCallback(s=>{s!==e.current&&(n==null||n(s,e.current)),e.current=s},[]);return[e,r]}function fn(t){const n=d.useRef();return d.useEffect(()=>{n.current=t},[t]),n.current}let Kt={};function Ct(t,n){return d.useMemo(()=>{if(n)return n;const e=Kt[t]==null?0:Kt[t]+1;return Kt[t]=e,t+"-"+e},[t,n])}function br(t){return function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),s=1;s<e;s++)r[s-1]=arguments[s];return r.reduce((i,l)=>{const c=Object.entries(l);for(const[u,p]of c){const g=i[u];g!=null&&(i[u]=g+t*p)}return i},{...n})}}const ot=br(1),yt=br(-1);function Ts(t){return"clientX"in t&&"clientY"in t}function Cn(t){if(!t)return!1;const{KeyboardEvent:n}=be(t.target);return n&&t instanceof n}function zs(t){if(!t)return!1;const{TouchEvent:n}=be(t.target);return n&&t instanceof n}function gn(t){if(zs(t)){if(t.touches&&t.touches.length){const{clientX:n,clientY:e}=t.touches[0];return{x:n,y:e}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:n,clientY:e}=t.changedTouches[0];return{x:n,y:e}}}return Ts(t)?{x:t.clientX,y:t.clientY}:null}const et=Object.freeze({Translate:{toString(t){if(!t)return;const{x:n,y:e}=t;return"translate3d("+(n?Math.round(n):0)+"px, "+(e?Math.round(e):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:n,scaleY:e}=t;return"scaleX("+n+") scaleY("+e+")"}},Transform:{toString(t){if(t)return[et.Translate.toString(t),et.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:n,duration:e,easing:r}=t;return n+" "+e+"ms "+r}}}),Zn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Os(t){return t.matches(Zn)?t:t.querySelector(Zn)}const Fs={display:"none"};function Ws(t){let{id:n,value:e}=t;return he.createElement("div",{id:n,style:Fs},e)}function $s(t){let{id:n,announcement:e,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return he.createElement("div",{id:n,style:s,role:"status","aria-live":r,"aria-atomic":!0},e)}function Xs(){const[t,n]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&n(r)},[]),announcement:t}}const vr=d.createContext(null);function Ys(t){const n=d.useContext(vr);d.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(t)},[t,n])}function Zs(){const[t]=d.useState(()=>new Set),n=d.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[d.useCallback(r=>{let{type:s,event:i}=r;t.forEach(l=>{var c;return(c=l[s])==null?void 0:c.call(l,i)})},[t]),n]}const Gs={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qs={onDragStart(t){let{active:n}=t;return"Picked up draggable item "+n.id+"."},onDragOver(t){let{active:n,over:e}=t;return e?"Draggable item "+n.id+" was moved over droppable area "+e.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(t){let{active:n,over:e}=t;return e?"Draggable item "+n.id+" was dropped over droppable area "+e.id:"Draggable item "+n.id+" was dropped."},onDragCancel(t){let{active:n}=t;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function Ks(t){let{announcements:n=qs,container:e,hiddenTextDescribedById:r,screenReaderInstructions:s=Gs}=t;const{announce:i,announcement:l}=Xs(),c=Ct("DndLiveRegion"),[u,p]=d.useState(!1);if(d.useEffect(()=>{p(!0)},[]),Ys(d.useMemo(()=>({onDragStart(f){let{active:b}=f;i(n.onDragStart({active:b}))},onDragMove(f){let{active:b,over:h}=f;n.onDragMove&&i(n.onDragMove({active:b,over:h}))},onDragOver(f){let{active:b,over:h}=f;i(n.onDragOver({active:b,over:h}))},onDragEnd(f){let{active:b,over:h}=f;i(n.onDragEnd({active:b,over:h}))},onDragCancel(f){let{active:b,over:h}=f;i(n.onDragCancel({active:b,over:h}))}}),[i,n])),!u)return null;const g=he.createElement(he.Fragment,null,he.createElement(Ws,{id:r,value:s.draggable}),he.createElement($s,{id:c,announcement:l}));return e?gt.createPortal(g,e):g}var q;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(q||(q={}));function Mt(){}function Gn(t,n){return d.useMemo(()=>({sensor:t,options:n??{}}),[t,n])}function Js(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return d.useMemo(()=>[...n].filter(r=>r!=null),[...n])}const Ve=Object.freeze({x:0,y:0});function xr(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Nr(t,n){let{data:{value:e}}=t,{data:{value:r}}=n;return e-r}function Qs(t,n){let{data:{value:e}}=t,{data:{value:r}}=n;return r-e}function qn(t){let{left:n,top:e,height:r,width:s}=t;return[{x:n,y:e},{x:n+s,y:e},{x:n,y:e+r},{x:n+s,y:e+r}]}function yr(t,n){if(!t||t.length===0)return null;const[e]=t;return e[n]}function Kn(t,n,e){return n===void 0&&(n=t.left),e===void 0&&(e=t.top),{x:n+t.width*.5,y:e+t.height*.5}}const Jt=t=>{let{collisionRect:n,droppableRects:e,droppableContainers:r}=t;const s=Kn(n,n.left,n.top),i=[];for(const l of r){const{id:c}=l,u=e.get(c);if(u){const p=xr(Kn(u),s);i.push({id:c,data:{droppableContainer:l,value:p}})}}return i.sort(Nr)},eo=t=>{let{collisionRect:n,droppableRects:e,droppableContainers:r}=t;const s=qn(n),i=[];for(const l of r){const{id:c}=l,u=e.get(c);if(u){const p=qn(u),g=s.reduce((b,h,D)=>b+xr(p[D],h),0),f=Number((g/4).toFixed(4));i.push({id:c,data:{droppableContainer:l,value:f}})}}return i.sort(Nr)};function to(t,n){const e=Math.max(n.top,t.top),r=Math.max(n.left,t.left),s=Math.min(n.left+n.width,t.left+t.width),i=Math.min(n.top+n.height,t.top+t.height),l=s-r,c=i-e;if(r<s&&e<i){const u=n.width*n.height,p=t.width*t.height,g=l*c,f=g/(u+p-g);return Number(f.toFixed(4))}return 0}const no=t=>{let{collisionRect:n,droppableRects:e,droppableContainers:r}=t;const s=[];for(const i of r){const{id:l}=i,c=e.get(l);if(c){const u=to(c,n);u>0&&s.push({id:l,data:{droppableContainer:i,value:u}})}}return s.sort(Qs)};function ro(t,n,e){return{...t,scaleX:n&&e?n.width/e.width:1,scaleY:n&&e?n.height/e.height:1}}function kr(t,n){return t&&n?{x:t.left-n.left,y:t.top-n.top}:Ve}function so(t){return function(e){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((l,c)=>({...l,top:l.top+t*c.y,bottom:l.bottom+t*c.y,left:l.left+t*c.x,right:l.right+t*c.x}),{...e})}}const oo=so(1);function io(t){if(t.startsWith("matrix3d(")){const n=t.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(t.startsWith("matrix(")){const n=t.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function ao(t,n,e){const r=io(n);if(!r)return t;const{scaleX:s,scaleY:i,x:l,y:c}=r,u=t.left-l-(1-s)*parseFloat(e),p=t.top-c-(1-i)*parseFloat(e.slice(e.indexOf(" ")+1)),g=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:g,height:f,top:p,right:u+g,bottom:p+f,left:u}}const lo={ignoreTransform:!1};function ct(t,n){n===void 0&&(n=lo);let e=t.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:g}=be(t).getComputedStyle(t);p&&(e=ao(e,p,g))}const{top:r,left:s,width:i,height:l,bottom:c,right:u}=e;return{top:r,left:s,width:i,height:l,bottom:c,right:u}}function Jn(t){return ct(t,{ignoreTransform:!0})}function co(t){const n=t.innerWidth,e=t.innerHeight;return{top:0,left:0,right:n,bottom:e,width:n,height:e}}function uo(t,n){return n===void 0&&(n=be(t).getComputedStyle(t)),n.position==="fixed"}function mo(t,n){n===void 0&&(n=be(t).getComputedStyle(t));const e=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=n[s];return typeof i=="string"?e.test(i):!1})}function Wt(t,n){const e=[];function r(s){if(n!=null&&e.length>=n||!s)return e;if(Dn(s)&&s.scrollingElement!=null&&!e.includes(s.scrollingElement))return e.push(s.scrollingElement),e;if(!Dt(s)||hr(s)||e.includes(s))return e;const i=be(t).getComputedStyle(s);return s!==t&&mo(s,i)&&e.push(s),uo(s,i)?e:r(s.parentNode)}return t?r(t):e}function Dr(t){const[n]=Wt(t,1);return n??null}function Qt(t){return!Ft||!t?null:at(t)?t:kn(t)?Dn(t)||t===lt(t).scrollingElement?window:Dt(t)?t:null:null}function wr(t){return at(t)?t.scrollX:t.scrollLeft}function Cr(t){return at(t)?t.scrollY:t.scrollTop}function hn(t){return{x:wr(t),y:Cr(t)}}var te;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(te||(te={}));function Sr(t){return!Ft||!t?!1:t===document.scrollingElement}function Er(t){const n={x:0,y:0},e=Sr(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-e.width,y:t.scrollHeight-e.height},s=t.scrollTop<=n.y,i=t.scrollLeft<=n.x,l=t.scrollTop>=r.y,c=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:l,isRight:c,maxScroll:r,minScroll:n}}const po={x:.2,y:.2};function fo(t,n,e,r,s){let{top:i,left:l,right:c,bottom:u}=e;r===void 0&&(r=10),s===void 0&&(s=po);const{isTop:p,isBottom:g,isLeft:f,isRight:b}=Er(t),h={x:0,y:0},D={x:0,y:0},y={height:n.height*s.y,width:n.width*s.x};return!p&&i<=n.top+y.height?(h.y=te.Backward,D.y=r*Math.abs((n.top+y.height-i)/y.height)):!g&&u>=n.bottom-y.height&&(h.y=te.Forward,D.y=r*Math.abs((n.bottom-y.height-u)/y.height)),!b&&c>=n.right-y.width?(h.x=te.Forward,D.x=r*Math.abs((n.right-y.width-c)/y.width)):!f&&l<=n.left+y.width&&(h.x=te.Backward,D.x=r*Math.abs((n.left+y.width-l)/y.width)),{direction:h,speed:D}}function go(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:n,left:e,right:r,bottom:s}=t.getBoundingClientRect();return{top:n,left:e,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Vr(t){return t.reduce((n,e)=>ot(n,hn(e)),Ve)}function ho(t){return t.reduce((n,e)=>n+wr(e),0)}function bo(t){return t.reduce((n,e)=>n+Cr(e),0)}function vo(t,n){if(n===void 0&&(n=ct),!t)return;const{top:e,left:r,bottom:s,right:i}=n(t);Dr(t)&&(s<=0||i<=0||e>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const xo=[["x",["left","right"],ho],["y",["top","bottom"],bo]];class Sn{constructor(n,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Wt(e),s=Vr(r);this.rect={...n},this.width=n.width,this.height=n.height;for(const[i,l,c]of xo)for(const u of l)Object.defineProperty(this,u,{get:()=>{const p=c(r),g=s[i]-p;return this.rect[u]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ht{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...e)})},this.target=n}add(n,e,r){var s;(s=this.target)==null||s.addEventListener(n,e,r),this.listeners.push([n,e,r])}}function No(t){const{EventTarget:n}=be(t);return t instanceof n?t:lt(t)}function en(t,n){const e=Math.abs(t.x),r=Math.abs(t.y);return typeof n=="number"?Math.sqrt(e**2+r**2)>n:"x"in n&&"y"in n?e>n.x&&r>n.y:"x"in n?e>n.x:"y"in n?r>n.y:!1}var we;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(we||(we={}));function Qn(t){t.preventDefault()}function yo(t){t.stopPropagation()}var j;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(j||(j={}));const Ar={start:[j.Space,j.Enter],cancel:[j.Esc],end:[j.Space,j.Enter,j.Tab]},ko=(t,n)=>{let{currentCoordinates:e}=n;switch(t.code){case j.Right:return{...e,x:e.x+25};case j.Left:return{...e,x:e.x-25};case j.Down:return{...e,y:e.y+25};case j.Up:return{...e,y:e.y-25}}};class En{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:e}}=n;this.props=n,this.listeners=new ht(lt(e)),this.windowListeners=new ht(be(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(we.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:e}=this.props,r=n.node.current;r&&vo(r),e(Ve)}handleKeyDown(n){if(Cn(n)){const{active:e,context:r,options:s}=this.props,{keyboardCodes:i=Ar,coordinateGetter:l=ko,scrollBehavior:c="smooth"}=s,{code:u}=n;if(i.end.includes(u)){this.handleEnd(n);return}if(i.cancel.includes(u)){this.handleCancel(n);return}const{collisionRect:p}=r.current,g=p?{x:p.left,y:p.top}:Ve;this.referenceCoordinates||(this.referenceCoordinates=g);const f=l(n,{active:e,context:r.current,currentCoordinates:g});if(f){const b=yt(f,g),h={x:0,y:0},{scrollableAncestors:D}=r.current;for(const y of D){const w=n.code,{isTop:N,isRight:C,isLeft:V,isBottom:_,maxScroll:E,minScroll:L}=Er(y),x=go(y),S={x:Math.min(w===j.Right?x.right-x.width/2:x.right,Math.max(w===j.Right?x.left:x.left+x.width/2,f.x)),y:Math.min(w===j.Down?x.bottom-x.height/2:x.bottom,Math.max(w===j.Down?x.top:x.top+x.height/2,f.y))},R=w===j.Right&&!C||w===j.Left&&!V,H=w===j.Down&&!_||w===j.Up&&!N;if(R&&S.x!==f.x){const I=y.scrollLeft+b.x,F=w===j.Right&&I<=E.x||w===j.Left&&I>=L.x;if(F&&!b.y){y.scrollTo({left:I,behavior:c});return}F?h.x=y.scrollLeft-I:h.x=w===j.Right?y.scrollLeft-E.x:y.scrollLeft-L.x,h.x&&y.scrollBy({left:-h.x,behavior:c});break}else if(H&&S.y!==f.y){const I=y.scrollTop+b.y,F=w===j.Down&&I<=E.y||w===j.Up&&I>=L.y;if(F&&!b.x){y.scrollTo({top:I,behavior:c});return}F?h.y=y.scrollTop-I:h.y=w===j.Down?y.scrollTop-E.y:y.scrollTop-L.y,h.y&&y.scrollBy({top:-h.y,behavior:c});break}}this.handleMove(n,ot(yt(f,this.referenceCoordinates),h))}}}handleMove(n,e){const{onMove:r}=this.props;n.preventDefault(),r(e)}handleEnd(n){const{onEnd:e}=this.props;n.preventDefault(),this.detach(),e()}handleCancel(n){const{onCancel:e}=this.props;n.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}En.activators=[{eventName:"onKeyDown",handler:(t,n,e)=>{let{keyboardCodes:r=Ar,onActivation:s}=n,{active:i}=e;const{code:l}=t.nativeEvent;if(r.start.includes(l)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function er(t){return!!(t&&"distance"in t)}function tr(t){return!!(t&&"delay"in t)}class Vn{constructor(n,e,r){var s;r===void 0&&(r=No(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=e;const{event:i}=n,{target:l}=i;this.props=n,this.events=e,this.document=lt(l),this.documentListeners=new ht(this.document),this.listeners=new ht(r),this.windowListeners=new ht(be(l)),this.initialCoordinates=(s=gn(i))!=null?s:Ve,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:e,bypassActivationConstraint:r}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.DragStart,Qn),this.windowListeners.add(we.VisibilityChange,this.handleCancel),this.windowListeners.add(we.ContextMenu,Qn),this.documentListeners.add(we.Keydown,this.handleKeydown),e){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tr(e)){this.timeoutId=setTimeout(this.handleStart,e.delay),this.handlePending(e);return}if(er(e)){this.handlePending(e);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,e){const{active:r,onPending:s}=this.props;s(r,n,this.initialCoordinates,e)}handleStart(){const{initialCoordinates:n}=this,{onStart:e}=this.props;n&&(this.activated=!0,this.documentListeners.add(we.Click,yo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(we.SelectionChange,this.removeTextSelection),e(n))}handleMove(n){var e;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:l,options:{activationConstraint:c}}=i;if(!s)return;const u=(e=gn(n))!=null?e:Ve,p=yt(s,u);if(!r&&c){if(er(c)){if(c.tolerance!=null&&en(p,c.tolerance))return this.handleCancel();if(en(p,c.distance))return this.handleStart()}if(tr(c)&&en(p,c.tolerance))return this.handleCancel();this.handlePending(c,p);return}n.cancelable&&n.preventDefault(),l(u)}handleEnd(){const{onAbort:n,onEnd:e}=this.props;this.detach(),this.activated||n(this.props.active),e()}handleCancel(){const{onAbort:n,onCancel:e}=this.props;this.detach(),this.activated||n(this.props.active),e()}handleKeydown(n){n.code===j.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const Do={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class An extends Vn{constructor(n){const{event:e}=n,r=lt(e.target);super(n,Do,r)}}An.activators=[{eventName:"onPointerDown",handler:(t,n)=>{let{nativeEvent:e}=t,{onActivation:r}=n;return!e.isPrimary||e.button!==0?!1:(r==null||r({event:e}),!0)}}];const wo={move:{name:"mousemove"},end:{name:"mouseup"}};var bn;(function(t){t[t.RightClick=2]="RightClick"})(bn||(bn={}));class Co extends Vn{constructor(n){super(n,wo,lt(n.event.target))}}Co.activators=[{eventName:"onMouseDown",handler:(t,n)=>{let{nativeEvent:e}=t,{onActivation:r}=n;return e.button===bn.RightClick?!1:(r==null||r({event:e}),!0)}}];const tn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class So extends Vn{constructor(n){super(n,tn)}static setup(){return window.addEventListener(tn.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(tn.move.name,n)};function n(){}}}So.activators=[{eventName:"onTouchStart",handler:(t,n)=>{let{nativeEvent:e}=t,{onActivation:r}=n;const{touches:s}=e;return s.length>1?!1:(r==null||r({event:e}),!0)}}];var bt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(bt||(bt={}));var Pt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Pt||(Pt={}));function Eo(t){let{acceleration:n,activator:e=bt.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:l=5,order:c=Pt.TreeOrder,pointerCoordinates:u,scrollableAncestors:p,scrollableAncestorRects:g,delta:f,threshold:b}=t;const h=Ao({delta:f,disabled:!i}),[D,y]=Ps(),w=d.useRef({x:0,y:0}),N=d.useRef({x:0,y:0}),C=d.useMemo(()=>{switch(e){case bt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case bt.DraggableRect:return s}},[e,s,u]),V=d.useRef(null),_=d.useCallback(()=>{const L=V.current;if(!L)return;const x=w.current.x*N.current.x,S=w.current.y*N.current.y;L.scrollBy(x,S)},[]),E=d.useMemo(()=>c===Pt.TreeOrder?[...p].reverse():p,[c,p]);d.useEffect(()=>{if(!i||!p.length||!C){y();return}for(const L of E){if((r==null?void 0:r(L))===!1)continue;const x=p.indexOf(L),S=g[x];if(!S)continue;const{direction:R,speed:H}=fo(L,S,C,n,b);for(const I of["x","y"])h[I][R[I]]||(H[I]=0,R[I]=0);if(H.x>0||H.y>0){y(),V.current=L,D(_,l),w.current=H,N.current=R;return}}w.current={x:0,y:0},N.current={x:0,y:0},y()},[n,_,r,y,i,l,JSON.stringify(C),JSON.stringify(h),D,p,E,g,JSON.stringify(b)])}const Vo={x:{[te.Backward]:!1,[te.Forward]:!1},y:{[te.Backward]:!1,[te.Forward]:!1}};function Ao(t){let{delta:n,disabled:e}=t;const r=fn(n);return wt(s=>{if(e||!r||!s)return Vo;const i={x:Math.sign(n.x-r.x),y:Math.sign(n.y-r.y)};return{x:{[te.Backward]:s.x[te.Backward]||i.x===-1,[te.Forward]:s.x[te.Forward]||i.x===1},y:{[te.Backward]:s.y[te.Backward]||i.y===-1,[te.Forward]:s.y[te.Forward]||i.y===1}}},[e,n,r])}function _o(t,n){const e=n!=null?t.get(n):void 0,r=e?e.node.current:null;return wt(s=>{var i;return n==null?null:(i=r??s)!=null?i:null},[r,n])}function Lo(t,n){return d.useMemo(()=>t.reduce((e,r)=>{const{sensor:s}=r,i=s.activators.map(l=>({eventName:l.eventName,handler:n(l.handler,r)}));return[...e,...i]},[]),[t,n])}var kt;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(kt||(kt={}));var vn;(function(t){t.Optimized="optimized"})(vn||(vn={}));const nr=new Map;function jo(t,n){let{dragging:e,dependencies:r,config:s}=n;const[i,l]=d.useState(null),{frequency:c,measure:u,strategy:p}=s,g=d.useRef(t),f=w(),b=Nt(f),h=d.useCallback(function(N){N===void 0&&(N=[]),!b.current&&l(C=>C===null?N:C.concat(N.filter(V=>!C.includes(V))))},[b]),D=d.useRef(null),y=wt(N=>{if(f&&!e)return nr;if(!N||N===nr||g.current!==t||i!=null){const C=new Map;for(let V of t){if(!V)continue;if(i&&i.length>0&&!i.includes(V.id)&&V.rect.current){C.set(V.id,V.rect.current);continue}const _=V.node.current,E=_?new Sn(u(_),_):null;V.rect.current=E,E&&C.set(V.id,E)}return C}return N},[t,i,e,f,u]);return d.useEffect(()=>{g.current=t},[t]),d.useEffect(()=>{f||h()},[e,f]),d.useEffect(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),d.useEffect(()=>{f||typeof c!="number"||D.current!==null||(D.current=setTimeout(()=>{h(),D.current=null},c))},[c,f,h,...r]),{droppableRects:y,measureDroppableContainers:h,measuringScheduled:i!=null};function w(){switch(p){case kt.Always:return!1;case kt.BeforeDragging:return e;default:return!e}}}function _r(t,n){return wt(e=>t?e||(typeof n=="function"?n(t):t):null,[n,t])}function Ro(t,n){return _r(t,n)}function Bo(t){let{callback:n,disabled:e}=t;const r=wn(n),s=d.useMemo(()=>{if(e||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,e]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function $t(t){let{callback:n,disabled:e}=t;const r=wn(n),s=d.useMemo(()=>{if(e||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[e]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Uo(t){return new Sn(ct(t),t)}function rr(t,n,e){n===void 0&&(n=Uo);const[r,s]=d.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var p;return(p=u??e)!=null?p:null}const g=n(t);return JSON.stringify(u)===JSON.stringify(g)?u:g})}const l=Bo({callback(u){if(t)for(const p of u){const{type:g,target:f}=p;if(g==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),c=$t({callback:i});return Be(()=>{i(),t?(c==null||c.observe(t),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),l==null||l.disconnect())},[t]),r}function Ho(t){const n=_r(t);return kr(t,n)}const sr=[];function Io(t){const n=d.useRef(t),e=wt(r=>t?r&&r!==sr&&t&&n.current&&t.parentNode===n.current.parentNode?r:Wt(t):sr,[t]);return d.useEffect(()=>{n.current=t},[t]),e}function Mo(t){const[n,e]=d.useState(null),r=d.useRef(t),s=d.useCallback(i=>{const l=Qt(i.target);l&&e(c=>c?(c.set(l,hn(l)),new Map(c)):null)},[]);return d.useEffect(()=>{const i=r.current;if(t!==i){l(i);const c=t.map(u=>{const p=Qt(u);return p?(p.addEventListener("scroll",s,{passive:!0}),[p,hn(p)]):null}).filter(u=>u!=null);e(c.length?new Map(c):null),r.current=t}return()=>{l(t),l(i)};function l(c){c.forEach(u=>{const p=Qt(u);p==null||p.removeEventListener("scroll",s)})}},[s,t]),d.useMemo(()=>t.length?n?Array.from(n.values()).reduce((i,l)=>ot(i,l),Ve):Vr(t):Ve,[t,n])}function or(t,n){n===void 0&&(n=[]);const e=d.useRef(null);return d.useEffect(()=>{e.current=null},n),d.useEffect(()=>{const r=t!==Ve;r&&!e.current&&(e.current=t),!r&&e.current&&(e.current=null)},[t]),e.current?yt(t,e.current):Ve}function Po(t){d.useEffect(()=>{if(!Ft)return;const n=t.map(e=>{let{sensor:r}=e;return r.setup==null?void 0:r.setup()});return()=>{for(const e of n)e==null||e()}},t.map(n=>{let{sensor:e}=n;return e}))}function To(t,n){return d.useMemo(()=>t.reduce((e,r)=>{let{eventName:s,handler:i}=r;return e[s]=l=>{i(l,n)},e},{}),[t,n])}function Lr(t){return d.useMemo(()=>t?co(t):null,[t])}const ir=[];function zo(t,n){n===void 0&&(n=ct);const[e]=t,r=Lr(e?be(e):null),[s,i]=d.useState(ir);function l(){i(()=>t.length?t.map(u=>Sr(u)?r:new Sn(n(u),u)):ir)}const c=$t({callback:l});return Be(()=>{c==null||c.disconnect(),l(),t.forEach(u=>c==null?void 0:c.observe(u))},[t]),s}function Oo(t){if(!t)return null;if(t.children.length>1)return t;const n=t.children[0];return Dt(n)?n:t}function Fo(t){let{measure:n}=t;const[e,r]=d.useState(null),s=d.useCallback(p=>{for(const{target:g}of p)if(Dt(g)){r(f=>{const b=n(g);return f?{...f,width:b.width,height:b.height}:b});break}},[n]),i=$t({callback:s}),l=d.useCallback(p=>{const g=Oo(p);i==null||i.disconnect(),g&&(i==null||i.observe(g)),r(g?n(g):null)},[n,i]),[c,u]=It(l);return d.useMemo(()=>({nodeRef:c,rect:e,setRef:u}),[e,c,u])}const Wo=[{sensor:An,options:{}},{sensor:En,options:{}}],$o={current:{}},Ht={draggable:{measure:Jn},droppable:{measure:Jn,strategy:kt.WhileDragging,frequency:vn.Optimized},dragOverlay:{measure:ct}};class vt extends Map{get(n){var e;return n!=null&&(e=super.get(n))!=null?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:e}=n;return!e})}getNodeFor(n){var e,r;return(e=(r=this.get(n))==null?void 0:r.node.current)!=null?e:void 0}}const Xo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new vt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Mt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ht,measureDroppableContainers:Mt,windowRect:null,measuringScheduled:!1},Yo={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Mt,draggableNodes:new Map,over:null,measureDroppableContainers:Mt},Xt=d.createContext(Yo),jr=d.createContext(Xo);function Zo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new vt}}}function Go(t,n){switch(n.type){case q.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case q.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:n.coordinates.x-t.draggable.initialCoordinates.x,y:n.coordinates.y-t.draggable.initialCoordinates.y}}};case q.DragEnd:case q.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case q.RegisterDroppable:{const{element:e}=n,{id:r}=e,s=new vt(t.droppable.containers);return s.set(r,e),{...t,droppable:{...t.droppable,containers:s}}}case q.SetDroppableDisabled:{const{id:e,key:r,disabled:s}=n,i=t.droppable.containers.get(e);if(!i||r!==i.key)return t;const l=new vt(t.droppable.containers);return l.set(e,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:l}}}case q.UnregisterDroppable:{const{id:e,key:r}=n,s=t.droppable.containers.get(e);if(!s||r!==s.key)return t;const i=new vt(t.droppable.containers);return i.delete(e),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function qo(t){let{disabled:n}=t;const{active:e,activatorEvent:r,draggableNodes:s}=d.useContext(Xt),i=fn(r),l=fn(e==null?void 0:e.id);return d.useEffect(()=>{if(!n&&!r&&i&&l!=null){if(!Cn(i)||document.activeElement===i.target)return;const c=s.get(l);if(!c)return;const{activatorNode:u,node:p}=c;if(!u.current&&!p.current)return;requestAnimationFrame(()=>{for(const g of[u.current,p.current]){if(!g)continue;const f=Os(g);if(f){f.focus();break}}})}},[r,n,s,l,i]),null}function Ko(t,n){let{transform:e,...r}=n;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),e):e}function Jo(t){return d.useMemo(()=>({draggable:{...Ht.draggable,...t==null?void 0:t.draggable},droppable:{...Ht.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Ht.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Qo(t){let{activeNode:n,measure:e,initialRect:r,config:s=!0}=t;const i=d.useRef(!1),{x:l,y:c}=typeof s=="boolean"?{x:s,y:s}:s;Be(()=>{if(!l&&!c||!n){i.current=!1;return}if(i.current||!r)return;const p=n==null?void 0:n.node.current;if(!p||p.isConnected===!1)return;const g=e(p),f=kr(g,r);if(l||(f.x=0),c||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const b=Dr(p);b&&b.scrollBy({top:f.y,left:f.x})}},[n,l,c,r,e])}const Rr=d.createContext({...Ve,scaleX:1,scaleY:1});var Xe;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Xe||(Xe={}));const nn=d.memo(function(n){var e,r,s,i;let{id:l,accessibility:c,autoScroll:u=!0,children:p,sensors:g=Wo,collisionDetection:f=no,measuring:b,modifiers:h,...D}=n;const y=d.useReducer(Go,void 0,Zo),[w,N]=y,[C,V]=Zs(),[_,E]=d.useState(Xe.Uninitialized),L=_===Xe.Initialized,{draggable:{active:x,nodes:S,translate:R},droppable:{containers:H}}=w,I=x!=null?S.get(x):null,F=d.useRef({initial:null,translated:null}),le=d.useMemo(()=>{var z;return x!=null?{id:x,data:(z=I==null?void 0:I.data)!=null?z:$o,rect:F}:null},[x,I]),ve=d.useRef(null),[se,me]=d.useState(null),[K,Me]=d.useState(null),J=Nt(D,Object.values(D)),Pe=Ct("DndDescribedBy",l),oe=d.useMemo(()=>H.getEnabled(),[H]),Q=Jo(b),{droppableRects:Y,measureDroppableContainers:xe,measuringScheduled:Te}=jo(oe,{dragging:L,dependencies:[R.x,R.y],config:Q.droppable}),ne=_o(S,x),dt=d.useMemo(()=>K?gn(K):null,[K]),ke=He(),Ce=Ro(ne,Q.draggable.measure);Qo({activeNode:x!=null?S.get(x):null,config:ke.layoutShiftCompensation,initialRect:Ce,measure:Q.draggable.measure});const B=rr(ne,Q.draggable.measure,Ce),Z=rr(ne?ne.parentElement:null),T=d.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:H,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),re=H.getNodeFor((e=T.current.over)==null?void 0:e.id),W=Fo({measure:Q.dragOverlay.measure}),Ae=(r=W.nodeRef.current)!=null?r:ne,_e=L?(s=W.rect)!=null?s:B:null,Ye=!!(W.nodeRef.current&&W.rect),tt=Ho(Ye?null:B),Ze=Lr(Ae?be(Ae):null),ce=Io(L?re??ne:null),ze=zo(ce),Se=Ko(h,{transform:{x:R.x-tt.x,y:R.y-tt.y,scaleX:1,scaleY:1},activatorEvent:K,active:le,activeNodeRect:B,containerNodeRect:Z,draggingNodeRect:_e,over:T.current.over,overlayNodeRect:W.rect,scrollableAncestors:ce,scrollableAncestorRects:ze,windowRect:Ze}),Ge=dt?ot(dt,R):null,Ue=Mo(ce),Yt=or(Ue),St=or(Ue,[B]),Oe=ot(Se,Yt),Le=_e?oo(_e,Se):null,Fe=le&&Le?f({active:le,collisionRect:Le,droppableRects:Y,droppableContainers:oe,pointerCoordinates:Ge}):null,nt=yr(Fe,"id"),[Ee,qe]=d.useState(null),We=Ye?Se:ot(Se,St),$e=ro(We,(i=Ee==null?void 0:Ee.rect)!=null?i:null,B),Ke=d.useRef(null),ut=d.useCallback((z,O)=>{let{sensor:ie,options:pe}=O;if(ve.current==null)return;const ae=S.get(ve.current);if(!ae)return;const G=z.nativeEvent,fe=new ie({active:ve.current,activeNode:ae,event:G,options:pe,context:T,onAbort($){if(!S.get($))return;const{onDragAbort:De}=J.current,de={id:$};De==null||De(de),C({type:"onDragAbort",event:de})},onPending($,je,De,de){if(!S.get($))return;const{onDragPending:ye}=J.current,Re={id:$,constraint:je,initialCoordinates:De,offset:de};ye==null||ye(Re),C({type:"onDragPending",event:Re})},onStart($){const je=ve.current;if(je==null)return;const De=S.get(je);if(!De)return;const{onDragStart:de}=J.current,Ne={activatorEvent:G,active:{id:je,data:De.data,rect:F}};gt.unstable_batchedUpdates(()=>{de==null||de(Ne),E(Xe.Initializing),N({type:q.DragStart,initialCoordinates:$,active:je}),C({type:"onDragStart",event:Ne}),me(Ke.current),Me(G)})},onMove($){N({type:q.DragMove,coordinates:$})},onEnd:Ie(q.DragEnd),onCancel:Ie(q.DragCancel)});Ke.current=fe;function Ie($){return async function(){const{active:De,collisions:de,over:Ne,scrollAdjustedTranslate:ye}=T.current;let Re=null;if(De&&ye){const{cancelDrop:Je}=J.current;Re={activatorEvent:G,active:De,collisions:de,delta:ye,over:Ne},$===q.DragEnd&&typeof Je=="function"&&await Promise.resolve(Je(Re))&&($=q.DragCancel)}ve.current=null,gt.unstable_batchedUpdates(()=>{N({type:$}),E(Xe.Uninitialized),qe(null),me(null),Me(null),Ke.current=null;const Je=$===q.DragEnd?"onDragEnd":"onDragCancel";if(Re){const rt=J.current[Je];rt==null||rt(Re),C({type:Je,event:Re})}})}}},[S]),mt=d.useCallback((z,O)=>(ie,pe)=>{const ae=ie.nativeEvent,G=S.get(pe);if(ve.current!==null||!G||ae.dndKit||ae.defaultPrevented)return;const fe={active:G};z(ie,O.options,fe)===!0&&(ae.dndKit={capturedBy:O.sensor},ve.current=pe,ut(ie,O))},[S,ut]),pt=Lo(g,mt);Po(g),Be(()=>{B&&_===Xe.Initializing&&E(Xe.Initialized)},[B,_]),d.useEffect(()=>{const{onDragMove:z}=J.current,{active:O,activatorEvent:ie,collisions:pe,over:ae}=T.current;if(!O||!ie)return;const G={active:O,activatorEvent:ie,collisions:pe,delta:{x:Oe.x,y:Oe.y},over:ae};gt.unstable_batchedUpdates(()=>{z==null||z(G),C({type:"onDragMove",event:G})})},[Oe.x,Oe.y]),d.useEffect(()=>{const{active:z,activatorEvent:O,collisions:ie,droppableContainers:pe,scrollAdjustedTranslate:ae}=T.current;if(!z||ve.current==null||!O||!ae)return;const{onDragOver:G}=J.current,fe=pe.get(nt),Ie=fe&&fe.rect.current?{id:fe.id,rect:fe.rect.current,data:fe.data,disabled:fe.disabled}:null,$={active:z,activatorEvent:O,collisions:ie,delta:{x:ae.x,y:ae.y},over:Ie};gt.unstable_batchedUpdates(()=>{qe(Ie),G==null||G($),C({type:"onDragOver",event:$})})},[nt]),Be(()=>{T.current={activatorEvent:K,active:le,activeNode:ne,collisionRect:Le,collisions:Fe,droppableRects:Y,draggableNodes:S,draggingNode:Ae,draggingNodeRect:_e,droppableContainers:H,over:Ee,scrollableAncestors:ce,scrollAdjustedTranslate:Oe},F.current={initial:_e,translated:Le}},[le,ne,Fe,Le,S,Ae,_e,Y,H,Ee,ce,Oe]),Eo({...ke,delta:R,draggingRect:Le,pointerCoordinates:Ge,scrollableAncestors:ce,scrollableAncestorRects:ze});const Et=d.useMemo(()=>({active:le,activeNode:ne,activeNodeRect:B,activatorEvent:K,collisions:Fe,containerNodeRect:Z,dragOverlay:W,draggableNodes:S,droppableContainers:H,droppableRects:Y,over:Ee,measureDroppableContainers:xe,scrollableAncestors:ce,scrollableAncestorRects:ze,measuringConfiguration:Q,measuringScheduled:Te,windowRect:Ze}),[le,ne,B,K,Fe,Z,W,S,H,Y,Ee,xe,ce,ze,Q,Te,Ze]),Vt=d.useMemo(()=>({activatorEvent:K,activators:pt,active:le,activeNodeRect:B,ariaDescribedById:{draggable:Pe},dispatch:N,draggableNodes:S,over:Ee,measureDroppableContainers:xe}),[K,pt,le,B,N,Pe,S,Ee,xe]);return he.createElement(vr.Provider,{value:V},he.createElement(Xt.Provider,{value:Vt},he.createElement(jr.Provider,{value:Et},he.createElement(Rr.Provider,{value:$e},p)),he.createElement(qo,{disabled:(c==null?void 0:c.restoreFocus)===!1})),he.createElement(Ks,{...c,hiddenTextDescribedById:Pe}));function He(){const z=(se==null?void 0:se.autoScrollEnabled)===!1,O=typeof u=="object"?u.enabled===!1:u===!1,ie=L&&!z&&!O;return typeof u=="object"?{...u,enabled:ie}:{enabled:ie}}}),ei=d.createContext(null),ar="button",ti="Draggable";function ni(t){let{id:n,data:e,disabled:r=!1,attributes:s}=t;const i=Ct(ti),{activators:l,activatorEvent:c,active:u,activeNodeRect:p,ariaDescribedById:g,draggableNodes:f,over:b}=d.useContext(Xt),{role:h=ar,roleDescription:D="draggable",tabIndex:y=0}=s??{},w=(u==null?void 0:u.id)===n,N=d.useContext(w?Rr:ei),[C,V]=It(),[_,E]=It(),L=To(l,n),x=Nt(e);Be(()=>(f.set(n,{id:n,key:i,node:C,activatorNode:_,data:x}),()=>{const R=f.get(n);R&&R.key===i&&f.delete(n)}),[f,n]);const S=d.useMemo(()=>({role:h,tabIndex:y,"aria-disabled":r,"aria-pressed":w&&h===ar?!0:void 0,"aria-roledescription":D,"aria-describedby":g.draggable}),[r,h,y,w,D,g.draggable]);return{active:u,activatorEvent:c,activeNodeRect:p,attributes:S,isDragging:w,listeners:r?void 0:L,node:C,over:b,setNodeRef:V,setActivatorNodeRef:E,transform:N}}function ri(){return d.useContext(jr)}const si="Droppable",oi={timeout:25};function ii(t){let{data:n,disabled:e=!1,id:r,resizeObserverConfig:s}=t;const i=Ct(si),{active:l,dispatch:c,over:u,measureDroppableContainers:p}=d.useContext(Xt),g=d.useRef({disabled:e}),f=d.useRef(!1),b=d.useRef(null),h=d.useRef(null),{disabled:D,updateMeasurementsFor:y,timeout:w}={...oi,...s},N=Nt(y??r),C=d.useCallback(()=>{if(!f.current){f.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{p(Array.isArray(N.current)?N.current:[N.current]),h.current=null},w)},[w]),V=$t({callback:C,disabled:D||!l}),_=d.useCallback((S,R)=>{V&&(R&&(V.unobserve(R),f.current=!1),S&&V.observe(S))},[V]),[E,L]=It(_),x=Nt(n);return d.useEffect(()=>{!V||!E.current||(V.disconnect(),f.current=!1,V.observe(E.current))},[E,V]),d.useEffect(()=>(c({type:q.RegisterDroppable,element:{id:r,key:i,disabled:e,node:E,rect:b,data:x}}),()=>c({type:q.UnregisterDroppable,key:i,id:r})),[r]),d.useEffect(()=>{e!==g.current.disabled&&(c({type:q.SetDroppableDisabled,id:r,key:i,disabled:e}),g.current.disabled=e)},[r,i,e,c]),{active:l,rect:b,isOver:(u==null?void 0:u.id)===r,node:E,over:u,setNodeRef:L}}function xt(t,n,e){const r=t.slice();return r.splice(e<0?r.length+e:e,0,r.splice(n,1)[0]),r}function ai(t,n){return t.reduce((e,r,s)=>{const i=n.get(r);return i&&(e[s]=i),e},Array(t.length))}function _t(t){return t!==null&&t>=0}function li(t,n){if(t===n)return!0;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function ci(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const _n=t=>{let{rects:n,activeIndex:e,overIndex:r,index:s}=t;const i=xt(n,r,e),l=n[s],c=i[s];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},Lt={scaleX:1,scaleY:1},lr=t=>{var n;let{activeIndex:e,activeNodeRect:r,index:s,rects:i,overIndex:l}=t;const c=(n=i[e])!=null?n:r;if(!c)return null;if(s===e){const p=i[l];return p?{x:0,y:e<l?p.top+p.height-(c.top+c.height):p.top-c.top,...Lt}:null}const u=di(i,s,e);return s>e&&s<=l?{x:0,y:-c.height-u,...Lt}:s<e&&s>=l?{x:0,y:c.height+u,...Lt}:{x:0,y:0,...Lt}};function di(t,n,e){const r=t[n],s=t[n-1],i=t[n+1];return r?e<n?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Br="Sortable",Ur=he.createContext({activeIndex:-1,containerId:Br,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_n,disabled:{draggable:!1,droppable:!1}});function rn(t){let{children:n,id:e,items:r,strategy:s=_n,disabled:i=!1}=t;const{active:l,dragOverlay:c,droppableRects:u,over:p,measureDroppableContainers:g}=ri(),f=Ct(Br,e),b=c.rect!==null,h=d.useMemo(()=>r.map(L=>typeof L=="object"&&"id"in L?L.id:L),[r]),D=l!=null,y=l?h.indexOf(l.id):-1,w=p?h.indexOf(p.id):-1,N=d.useRef(h),C=!li(h,N.current),V=w!==-1&&y===-1||C,_=ci(i);Be(()=>{C&&D&&g(h)},[C,h,D,g]),d.useEffect(()=>{N.current=h},[h]);const E=d.useMemo(()=>({activeIndex:y,containerId:f,disabled:_,disableTransforms:V,items:h,overIndex:w,useDragOverlay:b,sortedRects:ai(h,u),strategy:s}),[y,f,_.draggable,_.droppable,V,h,w,u,b,s]);return he.createElement(Ur.Provider,{value:E},n)}const ui=t=>{let{id:n,items:e,activeIndex:r,overIndex:s}=t;return xt(e,r,s).indexOf(n)},mi=t=>{let{containerId:n,isSorting:e,wasDragging:r,index:s,items:i,newIndex:l,previousItems:c,previousContainerId:u,transition:p}=t;return!p||!r||c!==i&&s===l?!1:e?!0:l!==s&&n===u},pi={duration:200,easing:"ease"},Hr="transform",fi=et.Transition.toString({property:Hr,duration:0,easing:"linear"}),gi={roleDescription:"sortable"};function hi(t){let{disabled:n,index:e,node:r,rect:s}=t;const[i,l]=d.useState(null),c=d.useRef(e);return Be(()=>{if(!n&&e!==c.current&&r.current){const u=s.current;if(u){const p=ct(r.current,{ignoreTransform:!0}),g={x:u.left-p.left,y:u.top-p.top,scaleX:u.width/p.width,scaleY:u.height/p.height};(g.x||g.y)&&l(g)}}e!==c.current&&(c.current=e)},[n,e,r,s]),d.useEffect(()=>{i&&l(null)},[i]),i}function Ln(t){let{animateLayoutChanges:n=mi,attributes:e,disabled:r,data:s,getNewIndex:i=ui,id:l,strategy:c,resizeObserverConfig:u,transition:p=pi}=t;const{items:g,containerId:f,activeIndex:b,disabled:h,disableTransforms:D,sortedRects:y,overIndex:w,useDragOverlay:N,strategy:C}=d.useContext(Ur),V=bi(r,h),_=g.indexOf(l),E=d.useMemo(()=>({sortable:{containerId:f,index:_,items:g},...s}),[f,s,_,g]),L=d.useMemo(()=>g.slice(g.indexOf(l)),[g,l]),{rect:x,node:S,isOver:R,setNodeRef:H}=ii({id:l,data:E,disabled:V.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...u}}),{active:I,activatorEvent:F,activeNodeRect:le,attributes:ve,setNodeRef:se,listeners:me,isDragging:K,over:Me,setActivatorNodeRef:J,transform:Pe}=ni({id:l,data:E,attributes:{...gi,...e},disabled:V.draggable}),oe=Ms(H,se),Q=!!I,Y=Q&&!D&&_t(b)&&_t(w),xe=!N&&K,Te=xe&&Y?Pe:null,dt=Y?Te??(c??C)({rects:y,activeNodeRect:le,activeIndex:b,overIndex:w,index:_}):null,ke=_t(b)&&_t(w)?i({id:l,items:g,activeIndex:b,overIndex:w}):_,Ce=I==null?void 0:I.id,B=d.useRef({activeId:Ce,items:g,newIndex:ke,containerId:f}),Z=g!==B.current.items,T=n({active:I,containerId:f,isDragging:K,isSorting:Q,id:l,index:_,items:g,newIndex:B.current.newIndex,previousItems:B.current.items,previousContainerId:B.current.containerId,transition:p,wasDragging:B.current.activeId!=null}),re=hi({disabled:!T,index:_,node:S,rect:x});return d.useEffect(()=>{Q&&B.current.newIndex!==ke&&(B.current.newIndex=ke),f!==B.current.containerId&&(B.current.containerId=f),g!==B.current.items&&(B.current.items=g)},[Q,ke,f,g]),d.useEffect(()=>{if(Ce===B.current.activeId)return;if(Ce&&!B.current.activeId){B.current.activeId=Ce;return}const Ae=setTimeout(()=>{B.current.activeId=Ce},50);return()=>clearTimeout(Ae)},[Ce]),{active:I,activeIndex:b,attributes:ve,data:E,rect:x,index:_,newIndex:ke,items:g,isOver:R,isSorting:Q,isDragging:K,listeners:me,node:S,overIndex:w,over:Me,setNodeRef:oe,setActivatorNodeRef:J,setDroppableNodeRef:H,setDraggableNodeRef:se,transform:re??dt,transition:W()};function W(){if(re||Z&&B.current.newIndex===_)return fi;if(!(xe&&!Cn(F)||!p)&&(Q||T))return et.Transition.toString({...p,property:Hr})}}function bi(t,n){var e,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(e=t==null?void 0:t.draggable)!=null?e:n.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:n.droppable}}function Tt(t){if(!t)return!1;const n=t.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const vi=[j.Down,j.Right,j.Up,j.Left],xi=(t,n)=>{let{context:{active:e,collisionRect:r,droppableRects:s,droppableContainers:i,over:l,scrollableAncestors:c}}=n;if(vi.includes(t.code)){if(t.preventDefault(),!e||!r)return;const u=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const b=s.get(f.id);if(b)switch(t.code){case j.Down:r.top<b.top&&u.push(f);break;case j.Up:r.top>b.top&&u.push(f);break;case j.Left:r.left>b.left&&u.push(f);break;case j.Right:r.left<b.left&&u.push(f);break}});const p=eo({collisionRect:r,droppableRects:s,droppableContainers:u});let g=yr(p,"id");if(g===(l==null?void 0:l.id)&&p.length>1&&(g=p[1].id),g!=null){const f=i.get(e.id),b=i.get(g),h=b?s.get(b.id):null,D=b==null?void 0:b.node.current;if(D&&h&&f&&b){const w=Wt(D).some((L,x)=>c[x]!==L),N=Ir(f,b),C=Ni(f,b),V=w||!N?{x:0,y:0}:{x:C?r.width-h.width:0,y:C?r.height-h.height:0},_={x:h.left,y:h.top};return V.x&&V.y?_:yt(_,V)}}}};function Ir(t,n){return!Tt(t)||!Tt(n)?!1:t.data.current.sortable.containerId===n.data.current.sortable.containerId}function Ni(t,n){return!Tt(t)||!Tt(n)||!Ir(t,n)?!1:t.data.current.sortable.index<n.data.current.sortable.index}const xn=t=>{if(!t)return"";const n=t.split(",").map(c=>c.trim());if(n.length===0)return"";if(n.length===1)return n[0]==="하이엔드"?"하이":n[0];const e=["알뜰","기본","고급","하이엔드"],r=n.sort((c,u)=>e.indexOf(c)-e.indexOf(u)),s=r[0],i=r[r.length-1];return`${s}-${i==="하이엔드"?"하이":i}`},Nn=t=>{if(!t)return"";const n=t.split(",").map(e=>e.trim());return n.includes("하이엔드")?"bg-purple-100 text-purple-700":n.includes("고급")?"bg-blue-100 text-blue-700":n.includes("기본")?"bg-green-100 text-green-700":n.includes("알뜰")?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"},yi=({id:t,fileData:n,index:e,onDelete:r,onFileClick:s})=>{const{attributes:i,listeners:l,setNodeRef:c,transform:u,transition:p,isDragging:g}=Ln({id:t}),f={transform:et.Transform.toString(u),transition:p,opacity:g?.5:1,zIndex:g?100:1},b=n.includes("|")&&!n.startsWith("data:image"),h=b?n.split("|")[0]:"",D=b?n.split("|")[1]:n,y=D.startsWith("data:image"),w=D.startsWith("data:application/pdf"),N=D.includes("wordprocessingml")||D.includes("msword"),C=D.includes("spreadsheetml")||D.includes("ms-excel"),V=D.includes("presentationml")||D.includes("ms-powerpoint"),_=D.includes("application/zip"),E=D.startsWith("data:text/plain"),L=h.endsWith(".hwp")||D.includes("x-hwp"),x=h.toLowerCase().endsWith(".dwg")||D.includes("autocad")||D.includes("vnd.dwg"),S=h.toLowerCase().endsWith(".dxf"),R=h.toLowerCase().endsWith(".skp"),H=h.toLowerCase().endsWith(".3dm"),F=w?{color:"text-red-600",label:"PDF"}:N?{color:"text-blue-600",label:"DOC"}:C?{color:"text-green-600",label:"XLS"}:V?{color:"text-orange-600",label:"PPT"}:_?{color:"text-yellow-600",label:"ZIP"}:E?{color:"text-gray-600",label:"TXT"}:L?{color:"text-sky-600",label:"HWP"}:x?{color:"text-purple-600",label:"DWG"}:S?{color:"text-violet-600",label:"DXF"}:R?{color:"text-amber-600",label:"SKP"}:H?{color:"text-teal-600",label:"3DM"}:{color:"text-gray-600",label:"FILE"};return a.jsxDEV("div",{ref:c,style:f,className:"relative group",children:[a.jsxDEV("div",{...i,...l,className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-gray-200 hover:border-gray-400 transition-colors cursor-grab active:cursor-grabbing touch-none",onClick:()=>s(D,h,y,w),children:y?a.jsxDEV("img",{src:D,alt:`상세 이미지 ${e+1}`,className:"w-full h-full object-contain pointer-events-none"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:158,columnNumber:11},void 0):a.jsxDEV("div",{className:`w-full h-full flex flex-col items-center justify-center ${F.color}`,children:[a.jsxDEV("svg",{className:"h-12 w-12 mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:[a.jsxDEV("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:166,columnNumber:15},void 0),a.jsxDEV("path",{d:"M14 2v6h6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:167,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:165,columnNumber:13},void 0),a.jsxDEV("span",{className:"text-xs font-bold",children:F.label},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:169,columnNumber:13},void 0),h&&a.jsxDEV("span",{className:"text-xs text-gray-500 mt-1 px-2 truncate max-w-full",children:h.length>15?h.slice(0,12)+"...":h},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:171,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:164,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:151,columnNumber:7},void 0),a.jsxDEV("button",{onClick:le=>{le.stopPropagation(),r(e)},className:"absolute top-2 right-2 p-1.5 bg-gray-700 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-gray-800",children:a.jsxDEV(zt,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:185,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:178,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:150,columnNumber:5},void 0)},ki=({item:t,onEdit:n,onDelete:e,onImageClick:r})=>{const{attributes:s,listeners:i,setNodeRef:l,transform:c,transition:u,isDragging:p}=Ln({id:t.id}),g={transform:et.Transform.toString(c),transition:u,opacity:p?.5:1};return a.jsxDEV("div",{ref:l,style:g,...s,...i,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 overflow-hidden flex flex-col group relative cursor-move",children:[a.jsxDEV("div",{className:"w-full aspect-square bg-gray-100 flex-shrink-0 relative",children:[t.image_url?a.jsxDEV("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-contain block cursor-pointer",loading:"lazy",onClick:f=>{f.stopPropagation(),r(t)},onPointerDown:f=>f.stopPropagation()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:230,columnNumber:11},void 0):a.jsxDEV("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:"이미지 없음"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:242,columnNumber:11},void 0),a.jsxDEV("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsxDEV("button",{onClick:f=>{f.stopPropagation(),n(t)},onPointerDown:f=>f.stopPropagation(),className:"p-1.5 bg-white text-gray-700 hover:bg-gray-100 rounded-md shadow-md transition-colors",title:"수정",children:a.jsxDEV(yn,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:258,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:249,columnNumber:11},void 0),a.jsxDEV("button",{onClick:f=>{f.stopPropagation(),e(t.id)},onPointerDown:f=>f.stopPropagation(),className:"p-1.5 bg-white text-rose-600 hover:bg-rose-50 rounded-md shadow-md transition-colors",title:"삭제",children:a.jsxDEV(zt,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:269,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:260,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:248,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:228,columnNumber:7},void 0),a.jsxDEV("div",{className:"p-2 pt-1.5 flex flex-col flex-1",children:[a.jsxDEV("div",{className:"flex items-start justify-between mb-1",children:[a.jsxDEV("div",{className:"flex items-center gap-1.5",children:[a.jsxDEV("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:t.category},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:278,columnNumber:13},void 0),t.brand&&a.jsxDEV("span",{className:"text-xs text-gray-500",children:t.brand},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:282,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:277,columnNumber:11},void 0),t.grade&&a.jsxDEV("span",{className:`hidden md:inline-block px-1 py-0.5 text-[10px] rounded ${Nn(t.grade)}`,children:xn(t.grade)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:286,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:276,columnNumber:9},void 0),a.jsxDEV("div",{className:"flex items-baseline justify-between gap-1 mt-auto",children:[a.jsxDEV("div",{className:"flex items-baseline gap-1 min-w-0",children:a.jsxDEV("h3",{className:"font-semibold text-xs text-gray-900 truncate",children:t.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:293,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:292,columnNumber:11},void 0),t.price&&a.jsxDEV("span",{className:"hidden md:inline text-xs text-gray-900 font-medium flex-shrink-0",children:[t.price,"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:296,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:291,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:275,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:219,columnNumber:5},void 0)},Di=({category:t,onRemove:n,onEdit:e})=>{const{attributes:r,listeners:s,setNodeRef:i,transform:l,transition:c,isDragging:u}=Ln({id:t}),p={transform:et.Transform.toString(l),transition:c,opacity:u?.5:1};return a.jsxDEV("div",{ref:i,style:p,className:"flex items-center justify-between p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 bg-white",children:[a.jsxDEV("div",{className:"flex items-center gap-2 flex-1 cursor-grab active:cursor-grabbing",...r,...s,children:a.jsxDEV("span",{className:"text-sm text-gray-900",children:t},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:340,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:335,columnNumber:7},void 0),t!=="전체"&&a.jsxDEV("div",{className:"flex items-center gap-1",children:[a.jsxDEV("button",{onClick:g=>{g.stopPropagation(),g.preventDefault(),e(t)},className:"text-gray-600 hover:text-gray-800 transition-colors p-1",title:"수정",type:"button",children:a.jsxDEV(yn,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:354,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:344,columnNumber:11},void 0),a.jsxDEV("button",{onClick:g=>{g.stopPropagation(),g.preventDefault(),n(t)},className:"text-red-500 hover:text-red-700 transition-colors p-1",title:"삭제",type:"button",children:a.jsxDEV(zt,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:366,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:356,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:343,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:330,columnNumber:5},void 0)},Li=()=>{var In;const{user:t}=ns(),n=ss(),e=(t==null?void 0:t.name)==="안팀",[r,s]=d.useState(()=>e||localStorage.getItem("specBook_lastProject")?"project":"library"),[i,l]=d.useState([]),[c,u]=d.useState([]),[p,g]=d.useState([]),[f,b]=d.useState([]),[h,D]=d.useState("전체"),[y,w]=d.useState([]),[N,C]=d.useState(()=>{const o=localStorage.getItem("specBook_lastProject");return o?Number(o):null}),[V,_]=d.useState(!1),[E,L]=d.useState(null),[x,S]=d.useState({name:"",category:"",brand:"",price:"",grades:["기본"],imageData:null}),[R,H]=d.useState([]),[I,F]=d.useState(!1),[le,ve]=d.useState(!1),[se,me]=d.useState([]),[K,Me]=d.useState(""),[J,Pe]=d.useState(!1),[oe,Q]=d.useState(null),[Y,xe]=d.useState([]),[Te,ne]=d.useState(null),[dt,ke]=d.useState(!1),[Ce,B]=d.useState(!1),[Z,T]=d.useState(1),[re,W]=d.useState({x:0,y:0}),[Ae,_e]=d.useState(!1),[Ye,tt]=d.useState({x:0,y:0}),[Ze,ce]=d.useState(null),[ze,Se]=d.useState(null),[Ge,Ue]=d.useState(!1),[Yt,St]=d.useState(0),[Oe,Le]=d.useState(!1),[Fe,nt]=d.useState(null),[Ee,qe]=d.useState(!1),[We,$e]=d.useState(null),[Ke,ut]=d.useState(null),[mt,pt]=d.useState(!1),Et=d.useRef(null),Vt=d.useRef(null),He=d.useRef(null),z=d.useRef([]),O=d.useRef(!0),[ie,pe]=d.useState(null),[ae,G]=d.useState(!1),fe=Js(Gn(An),Gn(En,{coordinateGetter:xi})),Ie=(o,m)=>{const v=o.clientX-m.clientX,k=o.clientY-m.clientY;return Math.sqrt(v*v+k*k)},$=(o,m)=>({x:(o.clientX+m.clientX)/2,y:(o.clientY+m.clientY)/2});d.useEffect(()=>(O.current=!0,()=>{O.current=!1}),[]),d.useEffect(()=>{je(),de()},[]),d.useEffect(()=>{De()},[n]),d.useEffect(()=>{ye()},[r,h,N,R]),d.useEffect(()=>{r==="project"&&N&&Ne()},[r,N]),d.useEffect(()=>{N&&localStorage.setItem("specBook_lastProject",String(N))},[N]);const je=async()=>{try{const o=await X.get("/specbook/categories");b(o.data)}catch(o){console.error("카테고리 로드 실패:",o)}},De=async()=>{try{const o=n.map(v=>({id:v.id,title:v.name}));console.log("프로젝트 목록 로드됨:",o.length,"개",o),w(o);const m=localStorage.getItem("specBook_lastProject");if(m&&o.length>0){const v=Number(m);if(o.find(A=>A.id===v)){C(v),s("project");return}}e&&o.length>0&&!N&&(C(o[0].id),s("project"))}catch(o){console.error("프로젝트 로드 실패:",o)}},de=async()=>{try{const o=await X.get("/specbook/library/meta");O.current&&u(o.data)}catch(o){console.error("전체 라이브러리 아이템 로드 실패:",o)}},Ne=async()=>{if(N)try{const o=await X.get(`/specbook/project/${N}/meta`);g(o.data)}catch(o){console.error("전체 프로젝트 아이템 로드 실패:",o)}},ye=async()=>{try{i.length===0&&_(!0);const o={};h!=="전체"&&(o.category=h),R.length>0&&(o.grades=R.join(","));let m;if(r==="library")m=await X.get("/specbook/library/meta",{params:o});else{if(!N){l([]),_(!1);return}m=await X.get(`/specbook/project/${N}/meta`,{params:o})}O.current&&(l(m.data),_(!1))}catch(o){console.error("스펙북 아이템 로드 실패:",o),O.current&&U.error("스펙북 아이템을 불러오는데 실패했습니다")}finally{O.current&&_(!1)}},Re=o=>r==="library"?o==="전체"?c.length:c.filter(m=>m.category===o).length:o==="전체"?p.length:p.filter(m=>m.category===o).length,Je=o=>{o.preventDefault(),F(!1);const m=o.dataTransfer.files[0];if(m&&m.type.startsWith("image/")){const v=new FileReader;v.onload=k=>{var A;pe((A=k.target)==null?void 0:A.result),G(!0)},v.readAsDataURL(m)}},rt=o=>{var v;if(ae||J)return;const m=(v=o.clipboardData)==null?void 0:v.items;if(m){for(let k=0;k<m.length;k++)if(m[k].type.indexOf("image")!==-1){const A=m[k].getAsFile();if(A){const M=new FileReader;M.onload=P=>{var ue;pe((ue=P.target)==null?void 0:ue.result),G(!0)},M.readAsDataURL(A)}}}};d.useEffect(()=>(document.addEventListener("paste",rt),()=>document.removeEventListener("paste",rt)),[x,ae,J]);const Mr=o=>{const m=o.replace(/[^\d]/g,"");return m?m.replace(/\B(?=(\d{3})+(?!\d))/g,","):""},Pr=o=>{const m=Mr(o.target.value);S({...x,price:m})},Tr=async o=>{var m,v;if(o.preventDefault(),!mt){if(!x.name||!x.category){U.error("제품명과 카테고리는 필수입니다");return}if(x.grades.length===0){U.error("최소 하나의 등급을 선택해주세요");return}pt(!0);try{const k=x.grades.join(",");if(E){const A={name:x.name,category:x.category,brand:x.brand,price:x.price,grade:k,description:"",imageData:x.imageData,projectId:r==="project"?N:null,isLibrary:r==="library"};await X.put(`/specbook/base64/${E.id}`,A),U.success("스펙북 아이템이 수정되었습니다")}else if(r==="project"&&N){const A={name:x.name,category:x.category,brand:x.brand,price:x.price,grade:k,description:"",imageData:x.imageData,projectId:null,isLibrary:!0};await X.post("/specbook/base64",A);const M={name:x.name,category:x.category,brand:x.brand,price:x.price,grade:k,description:"",imageData:x.imageData,projectId:N,isLibrary:!1};await X.post("/specbook/base64",M),U.success("스펙북 아이템이 라이브러리와 프로젝트에 추가되었습니다")}else{const A={name:x.name,category:x.category,brand:x.brand,price:x.price,grade:k,description:"",imageData:x.imageData,projectId:null,isLibrary:!0};await X.post("/specbook/base64",A),U.success("스펙북 아이템이 추가되었습니다")}L(null),S({name:"",category:h!=="전체"?h:"",brand:"",price:"",grades:["기본"],imageData:null}),ye(),(r==="library"||r==="project"&&!E)&&de(),r==="project"&&N&&Ne()}catch(k){console.error("스펙북 아이템 저장 실패:",k),U.error(((v=(m=k.response)==null?void 0:m.data)==null?void 0:v.error)||"저장에 실패했습니다")}finally{pt(!1)}}},jn=o=>{L(o);const m=o.grade?o.grade.includes(",")?o.grade.split(","):[o.grade]:["기본"];S({name:o.name,category:o.category,brand:o.brand,price:o.price,grades:m,imageData:null}),window.scrollTo({top:0,behavior:"smooth"})},Rn=async o=>{if(confirm("정말 삭제하시겠습니까?"))try{await X.delete(`/specbook/${o}`),U.success("스펙북 아이템이 삭제되었습니다"),ye(),r==="library"?de():r==="project"&&N&&Ne()}catch(m){console.error("삭제 실패:",m),U.error("삭제에 실패했습니다")}},zr=()=>{L(null),S({name:"",category:h!=="전체"?h:"",brand:"",price:"",grades:["기본"],imageData:null})},Or=o=>{S({...x,imageData:o}),G(!1),pe(null)},Fr=()=>{G(!1),pe(null)},Zt=async o=>{Q(o);const m=o.sub_images||[];xe(m),z.current=m,Pe(!0);try{const v=await X.get(`/specbook/item/${o.id}/image`);v.data.image_url&&O.current&&Q(k=>k?{...k,image_url:v.data.image_url}:null)}catch(v){console.error("원본 이미지 로드 실패:",v)}},Wr=o=>{const m=Array.from(o.target.files||[]);Gt(m)},Gt=o=>{const m=["image/","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/zip","application/x-hwp","text/plain","application/acad","application/x-autocad","image/vnd.dwg"],v=[".hwp",".dwg",".skp",".3dm",".dxf"];o.forEach(k=>{const A=k.name.toLowerCase().slice(k.name.lastIndexOf("."));if(m.some(P=>P.endsWith("/")?k.type.startsWith(P):k.type===P)||v.includes(A)){const P=new FileReader;P.onload=ue=>{var Mn;const st=(Mn=ue.target)==null?void 0:Mn.result,qt=k.type.startsWith("image/")?st:`${k.name}|${st}`;xe(ts=>[...ts,qt])},P.readAsDataURL(k)}else U.error(`지원하지 않는 파일 형식입니다: ${k.name}`)})},$r=o=>{o.preventDefault(),o.stopPropagation(),ke(!1);const m=Array.from(o.dataTransfer.files);Gt(m)},Bn=o=>{var k;if(!J)return;const m=(k=o.clipboardData)==null?void 0:k.items;if(!m)return;const v=[];for(let A=0;A<m.length;A++)if(m[A].type.indexOf("image")!==-1){const M=m[A].getAsFile();M&&v.push(M)}v.length>0&&(Gt(v),U.success(`${v.length}개의 이미지가 추가되었습니다`))};d.useEffect(()=>{if(J)return document.addEventListener("paste",Bn),()=>document.removeEventListener("paste",Bn)},[J]),d.useEffect(()=>{if(!(!oe||!J||!(JSON.stringify(Y)!==JSON.stringify(z.current))))return He.current&&clearTimeout(He.current),He.current=setTimeout(async()=>{B(!0);try{await X.put(`/specbook/${oe.id}/sub-images`,{sub_images:Y}),z.current=Y,ye(),r==="library"?de():r==="project"&&N&&Ne()}catch(m){console.error("Sub 이미지 자동 저장 실패:",m),U.error("상세 이미지 저장에 실패했습니다")}finally{B(!1)}},1e3),()=>{He.current&&clearTimeout(He.current)}},[Y,oe,J]);const Xr=o=>{xe(m=>m.filter((v,k)=>k!==o))},Yr=o=>{const{active:m,over:v}=o;v&&m.id!==v.id&&xe(k=>{const A=k.findIndex((P,ue)=>`subimg-${ue}`===m.id),M=k.findIndex((P,ue)=>`subimg-${ue}`===v.id);return xt(k,A,M)})},Zr=(o,m,v,k)=>{if(v)ne(o);else if(k){const A=window.open();A&&A.document.write(`
          <html>
            <head><title>${m||"PDF 파일"}</title></head>
            <body style="margin:0;padding:0;overflow:hidden;">
              <iframe src="${o}" style="width:100%;height:100vh;border:none;"></iframe>
            </body>
          </html>
        `)}else{const A=document.createElement("a");A.href=o,A.download=m||"file",A.click()}},Gr=async()=>{if(He.current&&clearTimeout(He.current),JSON.stringify(Y)!==JSON.stringify(z.current)&&oe){B(!0);try{await X.put(`/specbook/${oe.id}/sub-images`,{sub_images:Y}),ye(),r==="library"?de():r==="project"&&N&&Ne()}catch(m){console.error("Sub 이미지 저장 실패:",m),U.error("파일 저장에 실패했습니다")}}Pe(!1),Q(null),xe([]),B(!1)},qr=async o=>{const{active:m,over:v}=o;if(!v||m.id===v.id)return;const k=i.findIndex(M=>M.id===m.id),A=i.findIndex(M=>M.id===v.id);if(k!==-1&&A!==-1){const M=xt(i,k,A);l(M);try{await X.put("/specbook/reorder",{items:M.map((P,ue)=>({id:P.id,display_order:ue}))}),U.success("아이템 순서가 업데이트되었습니다")}catch(P){console.error("순서 업데이트 실패:",P),U.error("순서 업데이트 실패"),ye()}}},Kr=()=>{me([...f]),ve(!0)},Un=()=>{ve(!1),Me("")},Hn=async()=>{if(!K.trim()){U.error("카테고리 이름을 입력하세요");return}if(se.includes(K.trim())){U.error("이미 존재하는 카테고리입니다");return}const o=[...se,K.trim()];me(o),Me("");try{await X.put("/specbook/categories",{categories:o}),b(o),U.success("카테고리가 추가되었습니다")}catch(m){console.error("카테고리 추가 저장 실패:",m),U.error("카테고리 추가 저장에 실패했습니다"),me(f)}},Jr=async o=>{if(o==="전체"){U.error("전체 카테고리는 수정할 수 없습니다");return}const m=window.prompt("새 카테고리 이름을 입력하세요",o);if(!m||!m.trim()||m.trim()===o)return;if(se.includes(m.trim())){U.error("이미 존재하는 카테고리입니다");return}const v=se.map(k=>k===o?m.trim():k);me(v);try{await X.put("/specbook/categories",{categories:v}),b(v),U.success("카테고리 이름이 변경되었습니다")}catch(k){console.error("카테고리 수정 저장 실패:",k),U.error("카테고리 수정 저장에 실패했습니다"),me(f)}},Qr=async o=>{if(o==="전체"){U.error("전체 카테고리는 삭제할 수 없습니다");return}const m=se.filter(v=>v!==o);me(m);try{await X.put("/specbook/categories",{categories:m}),b(m),U.success("카테고리가 삭제되었습니다")}catch(v){console.error("카테고리 삭제 저장 실패:",v),U.error("카테고리 삭제 저장에 실패했습니다"),me(f)}},es=async o=>{const{active:m,over:v}=o;if(v&&m.id!==v.id){const k=se.indexOf(m.id),A=se.indexOf(v.id),M=xt(se,k,A);me(M);try{await X.put("/specbook/categories",{categories:M}),b(M),U.success("카테고리 순서가 변경되었습니다")}catch(P){console.error("카테고리 순서 저장 실패:",P),U.error("카테고리 순서 저장에 실패했습니다"),me(f)}}};return a.jsxDEV("div",{className:"flex flex-col h-[calc(100vh-120px)] bg-gray-50",children:[a.jsxDEV("div",{className:"specbook-container flex-1 flex flex-col md:flex-row gap-4 md:gap-6 overflow-hidden",children:[a.jsxDEV("div",{className:"specbook-sidebar hidden md:flex flex-col gap-4 w-80 lg:w-96 flex-shrink-0",children:[a.jsxDEV("div",{className:"specbook-form bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden flex flex-col",children:a.jsxDEV("form",{onSubmit:Tr,className:"flex flex-col pt-3",children:[a.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-3 px-3",children:[a.jsxDEV("div",{onDragOver:o=>{o.preventDefault(),F(!0)},onDragLeave:()=>F(!1),onDrop:Je,className:`w-full sm:w-48 aspect-square flex-shrink-0 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer transition-colors ${I?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>{var o;return(o=Et.current)==null?void 0:o.click()},children:[x.imageData||E!=null&&E.image_url?a.jsxDEV("img",{src:x.imageData||(E==null?void 0:E.image_url)||"",alt:"Preview",className:"w-full h-full object-contain rounded-lg"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1244,columnNumber:23},void 0):a.jsxDEV("div",{className:"text-center",children:[a.jsxDEV(as,{className:"w-8 h-8 mx-auto mb-1 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1251,columnNumber:25},void 0),a.jsxDEV("p",{className:"text-sm text-gray-500",children:"이미지"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1252,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1250,columnNumber:23},void 0),a.jsxDEV("input",{ref:Et,type:"file",accept:"image/*",onChange:o=>{var v;const m=(v=o.target.files)==null?void 0:v[0];if(m){const k=new FileReader;k.onload=A=>{var M;pe((M=A.target)==null?void 0:M.result),G(!0)},k.readAsDataURL(m)}o.target.value=""},className:"hidden"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1255,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1231,columnNumber:19},void 0),a.jsxDEV("div",{className:"flex-1 flex flex-col gap-2",children:[a.jsxDEV("div",{className:"space-y-1.5",children:[a.jsxDEV("select",{value:x.category,onChange:o=>S({...x,category:o.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",required:!0,children:[a.jsxDEV("option",{value:"",children:"카테고리"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1286,columnNumber:25},void 0),f.filter(o=>o!=="전체").map(o=>a.jsxDEV("option",{value:o,children:o},o,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1288,columnNumber:27},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1280,columnNumber:23},void 0),a.jsxDEV("input",{type:"text",value:x.brand,onChange:o=>S({...x,brand:o.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",placeholder:"브랜드"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1292,columnNumber:23},void 0),a.jsxDEV("input",{type:"text",value:x.name,onChange:o=>S({...x,name:o.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",placeholder:"제품명",required:!0},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1300,columnNumber:23},void 0),a.jsxDEV("div",{className:"relative",children:[a.jsxDEV("input",{type:"text",value:x.price,onChange:Pr,className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500 pr-8",placeholder:"가격"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1310,columnNumber:25},void 0),a.jsxDEV("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"원"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1317,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1309,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1279,columnNumber:21},void 0),a.jsxDEV("div",{className:"flex gap-1",children:["알뜰","기본","고급","하이"].map((o,m)=>{const v=m===3?"하이엔드":o;return a.jsxDEV("button",{type:"button",onClick:()=>{x.grades.includes(v)?S({...x,grades:x.grades.filter(k=>k!==v)}):S({...x,grades:[...x.grades,v]})},className:`flex-1 px-1 py-1 text-xs font-medium rounded transition-colors ${x.grades.includes(v)?v==="하이엔드"?"bg-violet-500 text-white":v==="고급"?"bg-sky-500 text-white":v==="기본"?"bg-emerald-500 text-white":"bg-amber-400 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:o},v,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1326,columnNumber:27},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1322,columnNumber:21},void 0),a.jsxDEV("div",{className:"flex gap-1.5 mt-3",children:[a.jsxDEV("button",{type:"submit",disabled:mt,className:"flex-1 px-3 py-1.5 text-xs bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors disabled:opacity-50",children:mt?"저장 중...":E?"수정":"추가"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1353,columnNumber:23},void 0),E&&a.jsxDEV("button",{type:"button",onClick:zr,className:"px-3 py-1.5 text-xs bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"취소"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1361,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1352,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1278,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1229,columnNumber:17},void 0),a.jsxDEV("div",{className:"p-3 pt-0"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1374,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1227,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1226,columnNumber:11},void 0),a.jsxDEV("div",{className:"specbook-grade-filter bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:a.jsxDEV("div",{className:"flex items-center gap-3",children:[a.jsxDEV("h3",{className:"text-sm font-semibold text-gray-900 mr-3",children:"등급 필터"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1381,columnNumber:15},void 0),a.jsxDEV("div",{className:"flex gap-2 flex-1",children:[["알뜰","기본","고급","하이엔드"].map(o=>a.jsxDEV("button",{onClick:()=>{R.includes(o)?H(R.filter(m=>m!==o)):H([...R,o])},className:`px-3 py-1.5 rounded text-xs font-medium transition-colors whitespace-nowrap ${R.includes(o)?o==="하이엔드"?"bg-violet-500 text-white":o==="고급"?"bg-sky-500 text-white":o==="기본"?"bg-emerald-500 text-white":"bg-amber-400 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:o},o,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1384,columnNumber:19},void 0)),R.length>0&&a.jsxDEV("button",{onClick:()=>H([]),className:"px-3 py-1.5 rounded text-xs font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors whitespace-nowrap",children:"초기화"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1406,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1382,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1380,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1379,columnNumber:11},void 0),a.jsxDEV("div",{className:"specbook-category bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[a.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[a.jsxDEV("h3",{className:"text-sm font-semibold text-gray-900",children:["카테고리",r==="project"&&N&&a.jsxDEV("span",{className:"ml-1 text-gray-600",children:["(",(In=y.find(o=>o.id===N))==null?void 0:In.title,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1423,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1420,columnNumber:15},void 0),a.jsxDEV("button",{onClick:Kr,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:"카테고리 편집",children:a.jsxDEV(ls,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1433,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1428,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1419,columnNumber:13},void 0),a.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:f.map(o=>{const m=Re(o),v=(r==="library"||r==="project"&&N)&&m>0;return a.jsxDEV("button",{onClick:()=>D(o),className:`px-2 py-1.5 rounded text-xs font-medium transition-colors ${h===o?"bg-gray-800 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[o,v&&a.jsxDEV("span",{className:`ml-1 ${h===o?"text-gray-300":"text-gray-400"}`,children:["(",m,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1454,columnNumber:23},void 0)]},o,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1443,columnNumber:19},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1436,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1418,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1224,columnNumber:9},void 0),r==="library"?a.jsxDEV("div",{className:"specbook-main flex-1 flex flex-col overflow-hidden pr-4 pt-3",children:[a.jsxDEV("div",{className:"mb-4 px-4",children:a.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 lg:gap-4",children:[!e&&a.jsxDEV("button",{onClick:()=>{s("library"),C(null)},className:`col-span-1 lg:col-span-1 h-9 rounded-lg font-medium transition-colors text-xs md:text-sm flex items-center justify-center ${r==="library"?"bg-gray-800 text-white":"bg-gray-200 text-gray-700"}`,children:"스펙 라이브러리"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1475,columnNumber:17},void 0),a.jsxDEV("select",{value:N||"",onChange:o=>{o.target.value?(s("project"),C(Number(o.target.value))):e||(s("library"),C(null))},className:`specbook-header-project-select col-span-1 lg:col-span-1 ${e?"":"lg:col-start-4"} h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-xs md:text-sm px-1 md:px-2`,children:[!e&&a.jsxDEV("option",{value:"",children:"프로젝트 선택"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1498,columnNumber:35},void 0),y.map(o=>a.jsxDEV("option",{value:o.id,children:o.title},o.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1500,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1485,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1473,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1472,columnNumber:11},void 0),a.jsxDEV("div",{className:"specbook-content flex-1 flex flex-col md:flex-row overflow-hidden",children:[a.jsxDEV("div",{className:"specbook-library w-full md:w-1/2 flex flex-col overflow-hidden pb-4 md:pr-3",children:a.jsxDEV("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",children:V?a.jsxDEV("div",{className:"flex items-center justify-center h-full",children:a.jsxDEV("div",{className:"text-gray-500",children:"로딩 중..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1514,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1513,columnNumber:13},void 0):i.length===0?a.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:"등록된 스펙북 아이템이 없습니다"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1517,columnNumber:13},void 0):a.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:i.map(o=>a.jsxDEV("div",{draggable:!0,onDragStart:m=>{qe(!0),m.dataTransfer.setData("itemId",o.id.toString()),m.dataTransfer.effectAllowed="copy"},onDragEnd:()=>{qe(!1),$e(null)},className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all border border-gray-200 overflow-hidden cursor-grab active:cursor-grabbing flex flex-col group relative",children:[a.jsxDEV("div",{className:"w-full aspect-square bg-gray-100 relative",onMouseDown:m=>{$e({x:m.clientX,y:m.clientY})},onClick:m=>{!Ee&&We&&Math.sqrt(Math.pow(m.clientX-We.x,2)+Math.pow(m.clientY-We.y,2))<5&&Zt(o),$e(null)},children:o.image_url?a.jsxDEV("img",{src:o.image_url,alt:o.name,className:"w-full h-full object-contain pointer-events-none",draggable:!1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1557,columnNumber:23},void 0):a.jsxDEV("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs pointer-events-none",children:"이미지 없음"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1564,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1537,columnNumber:19},void 0),a.jsxDEV("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto",children:[a.jsxDEV("button",{onClick:m=>{m.stopPropagation(),jn(o)},onPointerDown:m=>m.stopPropagation(),className:"p-1.5 bg-white text-gray-700 hover:bg-gray-100 rounded-md shadow-md transition-colors cursor-pointer",title:"수정",children:a.jsxDEV(yn,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1579,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1570,columnNumber:21},void 0),a.jsxDEV("button",{onClick:m=>{m.stopPropagation(),Rn(o.id)},onPointerDown:m=>m.stopPropagation(),className:"p-1.5 bg-white text-rose-600 hover:bg-rose-50 rounded-md shadow-md transition-colors cursor-pointer",title:"삭제",children:a.jsxDEV(zt,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1590,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1581,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1569,columnNumber:19},void 0),a.jsxDEV("div",{className:"p-2 pt-1.5 flex flex-col flex-1",children:[a.jsxDEV("div",{className:"flex items-start justify-between mb-1",children:[a.jsxDEV("div",{className:"flex items-center gap-1.5",children:[a.jsxDEV("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:o.category},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1596,columnNumber:25},void 0),o.brand&&a.jsxDEV("span",{className:"text-xs text-gray-500",children:o.brand},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1600,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1595,columnNumber:23},void 0),o.grade&&a.jsxDEV("span",{className:`hidden md:inline-block px-1.5 py-0.5 text-xs rounded ${Nn(o.grade)}`,children:xn(o.grade)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1604,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1594,columnNumber:21},void 0),a.jsxDEV("div",{className:"flex items-baseline justify-between gap-1 mt-auto",children:[a.jsxDEV("div",{className:"flex items-baseline gap-1 min-w-0",children:a.jsxDEV("h3",{className:"font-semibold text-xs text-gray-900 truncate",children:o.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1611,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1610,columnNumber:23},void 0),o.price&&a.jsxDEV("span",{className:"hidden md:inline text-xs text-gray-900 font-medium flex-shrink-0",children:[o.price,"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1614,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1609,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1593,columnNumber:19},void 0)]},o.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1523,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1521,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1511,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1510,columnNumber:13},void 0),a.jsxDEV("div",{className:"hidden md:block w-px bg-gray-300 self-stretch"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1625,columnNumber:13},void 0),a.jsxDEV("div",{className:"specbook-drop-zone hidden md:flex w-1/2 flex-col overflow-hidden pl-3 pb-4",children:[a.jsxDEV("div",{className:"specbook-drop-project-select hidden mb-2",children:a.jsxDEV("select",{value:N||"",onChange:o=>{o.target.value&&(s("project"),C(Number(o.target.value)))},className:"h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-sm px-3",children:[a.jsxDEV("option",{value:"",children:"프로젝트 선택"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1640,columnNumber:19},void 0),y.map(o=>a.jsxDEV("option",{value:o.id,children:o.title},o.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1642,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1630,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1629,columnNumber:15},void 0),a.jsxDEV("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-300 transition-colors",onDragOver:o=>{o.preventDefault(),o.currentTarget.classList.add("bg-blue-50","border-blue-400")},onDragLeave:o=>{o.currentTarget.classList.remove("bg-blue-50","border-blue-400")},onDrop:o=>{o.preventDefault(),o.currentTarget.classList.remove("bg-blue-50","border-blue-400");const m=o.dataTransfer.getData("itemId");m&&(nt(Number(m)),Le(!0))},children:a.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:[a.jsxDEV("span",{className:"specbook-drop-text-landscape",children:"좌측에서 아이템을 드래그하여 추가하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1668,columnNumber:19},void 0),a.jsxDEV("span",{className:"specbook-drop-text-portrait",children:"상단에서 아이템을 드래그하여 추가하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1669,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1667,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1648,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1627,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1508,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1470,columnNumber:11},void 0):a.jsxDEV("div",{className:"specbook-main flex-1 flex flex-col overflow-hidden pr-4 pt-3",children:[a.jsxDEV("div",{className:"mb-4 px-4",children:a.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 lg:gap-4",children:[!e&&a.jsxDEV("button",{onClick:()=>{s("library"),C(null)},className:"col-span-1 lg:col-span-1 h-9 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700 text-xs md:text-sm flex items-center justify-center",children:"스펙 라이브러리"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1682,columnNumber:19},void 0),a.jsxDEV("select",{value:N||"",onChange:o=>{o.target.value?(s("project"),C(Number(o.target.value))):e||(s("library"),C(null))},className:`specbook-header-project-select col-span-1 lg:col-span-1 ${e?"":"lg:col-start-4"} h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-xs md:text-sm px-1 md:px-2`,children:[!e&&a.jsxDEV("option",{value:"",children:"프로젝트 선택"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1705,columnNumber:37},void 0),y.map(o=>a.jsxDEV("option",{value:o.id,children:o.title},o.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1707,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1692,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1680,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1679,columnNumber:13},void 0),a.jsxDEV("div",{className:"specbook-content flex-1 flex flex-col md:flex-row overflow-hidden gap-4",children:[!e&&a.jsxDEV("div",{className:"specbook-library hidden md:flex md:w-1/2 flex-col overflow-hidden pb-4 md:pr-3",children:a.jsxDEV("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",children:a.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:c.filter(o=>h==="전체"||o.category===h).map(o=>a.jsxDEV("div",{draggable:!0,onDragStart:m=>{qe(!0),m.dataTransfer.setData("itemId",o.id.toString()),m.dataTransfer.effectAllowed="copy"},onDragEnd:()=>{qe(!1),$e(null)},className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all border border-gray-200 overflow-hidden cursor-grab active:cursor-grabbing flex flex-col",children:[a.jsxDEV("div",{className:"w-full aspect-square bg-gray-100",onMouseDown:m=>{$e({x:m.clientX,y:m.clientY})},onClick:m=>{!Ee&&We&&Math.sqrt(Math.pow(m.clientX-We.x,2)+Math.pow(m.clientY-We.y,2))<5&&Zt(o),$e(null)},children:o.image_url?a.jsxDEV("img",{src:o.image_url,alt:o.name,className:"w-full h-full object-contain pointer-events-none",loading:"lazy",draggable:!1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1759,columnNumber:29},void 0):a.jsxDEV("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs pointer-events-none",children:"이미지 없음"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1767,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1739,columnNumber:25},void 0),a.jsxDEV("div",{className:"p-2 pt-1.5 flex flex-col flex-1",children:[a.jsxDEV("div",{className:"flex items-start justify-between mb-1",children:[a.jsxDEV("div",{className:"flex items-center gap-1.5",children:[a.jsxDEV("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:o.category},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1775,columnNumber:31},void 0),o.brand&&a.jsxDEV("span",{className:"text-xs text-gray-500",children:o.brand},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1779,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1774,columnNumber:29},void 0),o.grade&&a.jsxDEV("span",{className:`hidden md:inline-block px-1.5 py-0.5 text-xs rounded ${Nn(o.grade)}`,children:xn(o.grade)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1783,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1773,columnNumber:27},void 0),a.jsxDEV("div",{className:"flex items-baseline justify-between gap-1 mt-auto",children:[a.jsxDEV("div",{className:"flex items-baseline gap-1 min-w-0",children:a.jsxDEV("h3",{className:"font-semibold text-xs text-gray-900 truncate",children:o.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1790,columnNumber:31},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1789,columnNumber:29},void 0),o.price&&a.jsxDEV("span",{className:"hidden md:inline text-xs text-gray-900 font-medium flex-shrink-0",children:[o.price,"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1793,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1788,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1772,columnNumber:25},void 0)]},o.id,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1725,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1721,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1719,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1718,columnNumber:17},void 0),!e&&a.jsxDEV("div",{className:"hidden md:block w-px bg-gray-300 self-stretch"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1806,columnNumber:15},void 0),a.jsxDEV("div",{className:`specbook-project w-full ${e?"":"md:w-1/2"} flex flex-col overflow-hidden ${e?"":"md:pl-3"} pb-4`,children:[a.jsxDEV("div",{className:"specbook-drop-project-select hidden mb-2",children:a.jsxDEV("select",{value:N||"",onChange:o=>{o.target.value?(s("project"),C(Number(o.target.value))):e||(s("library"),C(null))},className:"w-full h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-sm px-3",children:[!e&&a.jsxDEV("option",{value:"",children:"프로젝트 선택"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1825,columnNumber:37},void 0),y.map(o=>a.jsxDEV("option",{value:o.id,children:o.title},o.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1827,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1812,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1811,columnNumber:15},void 0),a.jsxDEV("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",onDragOver:o=>{o.preventDefault(),o.dataTransfer.dropEffect="copy"},onDrop:async o=>{o.preventDefault();const m=o.dataTransfer.getData("itemId");if(m&&N)try{const v=c.find(k=>k.id===Number(m));if(v){const{id:k,created_at:A,updated_at:M,...P}=v;await X.post("/specbook/base64",{...P,isLibrary:!1,projectId:N}),U.success("아이템이 프로젝트에 추가되었습니다"),ye(),Ne()}}catch(v){console.error("아이템 추가 실패:",v),U.error("아이템 추가 실패")}},children:V?a.jsxDEV("div",{className:"flex items-center justify-center h-full",children:a.jsxDEV("div",{className:"text-gray-500",children:"로딩 중..."},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1866,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1865,columnNumber:19},void 0):i.length===0?a.jsxDEV("div",{className:"flex items-center justify-center h-full text-gray-600 text-sm",children:[a.jsxDEV("span",{className:"specbook-drop-text-landscape",children:"좌측에서 아이템을 드래그하여 추가하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1870,columnNumber:21},void 0),a.jsxDEV("span",{className:"specbook-drop-text-portrait",children:"상단에서 아이템을 드래그하여 추가하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1871,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1869,columnNumber:19},void 0):a.jsxDEV(nn,{sensors:fe,collisionDetection:Jt,onDragEnd:qr,children:a.jsxDEV(rn,{items:i.filter(o=>h==="전체"||o.category===h).map(o=>o.id),strategy:lr,children:a.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:i.filter(o=>h==="전체"||o.category===h).map(o=>a.jsxDEV(ki,{item:o,onEdit:jn,onDelete:Rn,onImageClick:Zt},o.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1889,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1885,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1879,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1874,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1833,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1809,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1715,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1677,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1222,columnNumber:7},void 0),le&&a.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[a.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxDEV("h2",{className:"text-lg font-bold text-gray-900",children:"카테고리 관리"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1913,columnNumber:15},void 0),a.jsxDEV("button",{onClick:Un,className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsxDEV(jt,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1918,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1914,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1912,columnNumber:13},void 0),a.jsxDEV("div",{className:"p-4",children:[a.jsxDEV("div",{className:"mb-4",children:a.jsxDEV("div",{className:"flex gap-2",children:[a.jsxDEV("input",{type:"text",value:K,onChange:o=>Me(o.target.value),onKeyPress:o=>{o.key==="Enter"&&Hn()},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"카테고리 이름 입력"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1926,columnNumber:19},void 0),a.jsxDEV("button",{onClick:Hn,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center gap-1",children:[a.jsxDEV(Pn,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1942,columnNumber:21},void 0),"추가"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1938,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1925,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1924,columnNumber:15},void 0),a.jsxDEV("div",{className:"mb-4",children:[a.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"카테고리 목록 (드래그하여 순서 변경)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1950,columnNumber:17},void 0),a.jsxDEV("div",{className:"max-h-120 overflow-y-auto border border-gray-200 rounded-lg",children:a.jsxDEV(nn,{sensors:fe,collisionDetection:Jt,onDragEnd:es,children:a.jsxDEV(rn,{items:se,strategy:lr,children:se.map(o=>a.jsxDEV(Di,{category:o,onRemove:Qr,onEdit:Jr},o,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1964,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1959,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1954,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1953,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1949,columnNumber:15},void 0),a.jsxDEV("div",{className:"flex justify-center",children:a.jsxDEV("button",{onClick:Un,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:"닫기"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1978,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1977,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1922,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1911,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1910,columnNumber:9},void 0),J&&oe&&a.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxDEV("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxDEV("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-gray-200",children:[a.jsxDEV("div",{children:[a.jsxDEV("h2",{className:"text-xl font-bold text-gray-900",children:oe.name},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1997,columnNumber:17},void 0),a.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"드래그 앤 드롭 또는 Ctrl+V로 이미지/PDF를 추가할 수 있습니다"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1998,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1996,columnNumber:15},void 0),a.jsxDEV("button",{onClick:Gr,className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsxDEV(jt,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2006,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2002,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1995,columnNumber:13},void 0),a.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",onDragOver:o=>{o.preventDefault(),ke(!0)},onDragLeave:o=>{o.preventDefault(),ke(!1)},onDrop:$r,children:[a.jsxDEV("input",{ref:Vt,type:"file",accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.hwp,.txt,.zip,.dwg,.skp,.3dm,.dxf",multiple:!0,onChange:Wr,className:"hidden"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2024,columnNumber:15},void 0),a.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[oe.image_url&&a.jsxDEV("div",{className:"relative group",children:[a.jsxDEV("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-blue-500 cursor-pointer hover:border-blue-600 transition-colors",onClick:()=>ne(oe.image_url),children:a.jsxDEV("img",{src:oe.image_url,alt:"메인 이미지",className:"w-full h-full object-contain"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2042,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2038,columnNumber:21},void 0),a.jsxDEV("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded",children:"메인"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2048,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2037,columnNumber:19},void 0),a.jsxDEV(nn,{sensors:fe,collisionDetection:Jt,onDragEnd:Yr,children:a.jsxDEV(rn,{items:Y.map((o,m)=>`subimg-${m}`),strategy:_n,children:Y.map((o,m)=>a.jsxDEV(yi,{id:`subimg-${m}`,fileData:o,index:m,onDelete:Xr,onFileClick:Zr},`subimg-${m}`,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2065,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2060,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2055,columnNumber:17},void 0),a.jsxDEV("div",{onClick:()=>{var o;return(o=Vt.current)==null?void 0:o.click()},className:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-gray-400 hover:bg-gray-50 transition-colors",children:a.jsxDEV(Pn,{className:"h-12 w-12 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2082,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2078,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2034,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2011,columnNumber:13},void 0),a.jsxDEV("div",{className:"flex items-center justify-center p-4 border-t border-gray-200 bg-gray-50",children:a.jsxDEV("div",{className:"flex items-center gap-4",children:[a.jsxDEV("p",{className:"text-sm text-gray-600",children:["총 ",(oe.image_url?1:0)+Y.length,"개의 파일"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2091,columnNumber:17},void 0),Ce&&a.jsxDEV("p",{className:"text-sm text-blue-600 flex items-center gap-2",children:[a.jsxDEV("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2097,columnNumber:23},void 0),a.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2098,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2096,columnNumber:21},void 0),"저장 중..."]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2095,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2090,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2089,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1993,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1992,columnNumber:9},void 0),Te&&a.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60] overflow-hidden",onClick:o=>{o.target===o.currentTarget&&(ne(null),T(1),W({x:0,y:0}),ce(null),Se(null),Ue(!1))},onWheel:o=>{o.preventDefault();const m=o.deltaY>0?-.1:.1;T(v=>Math.max(.5,Math.min(5,v+m)))},children:[a.jsxDEV("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[a.jsxDEV("button",{onClick:()=>{ne(null),T(1),W({x:0,y:0}),ce(null),Se(null),Ue(!1)},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",children:a.jsxDEV(jt,{className:"h-6 w-6 text-white"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2142,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2131,columnNumber:13},void 0),a.jsxDEV("button",{onClick:o=>{o.stopPropagation(),T(m=>Math.min(5,m+.5))},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:"확대 (+)",children:a.jsxDEV("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2153,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2152,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2144,columnNumber:13},void 0),a.jsxDEV("button",{onClick:o=>{o.stopPropagation(),T(m=>Math.max(.5,m-.5))},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:"축소 (-)",children:a.jsxDEV("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2165,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2164,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2156,columnNumber:13},void 0),a.jsxDEV("button",{onClick:o=>{o.stopPropagation(),T(1),W({x:0,y:0})},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:"초기화",children:a.jsxDEV("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2178,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2177,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2168,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2130,columnNumber:11},void 0),a.jsxDEV("div",{className:"absolute top-4 left-4 bg-white bg-opacity-10 text-white px-3 py-2 rounded-lg text-sm",children:[Math.round(Z*100),"%"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2184,columnNumber:11},void 0),a.jsxDEV("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",onMouseDown:o=>{Z>1&&(_e(!0),tt({x:o.clientX-re.x,y:o.clientY-re.y}))},onMouseMove:o=>{Ae&&Z>1&&W({x:o.clientX-Ye.x,y:o.clientY-Ye.y})},onMouseUp:()=>_e(!1),onMouseLeave:()=>_e(!1),onTouchStart:o=>{if(o.touches.length===2){o.preventDefault(),Ue(!0);const m=Ie(o.touches[0],o.touches[1]),v=$(o.touches[0],o.touches[1]);ce(m),Se(v)}else if(o.touches.length===1&&Z>1&&!Ge){const m=o.touches[0];tt({x:m.clientX-re.x,y:m.clientY-re.y})}},onTouchMove:o=>{if(o.touches.length===2){o.preventDefault(),Ue(!0);const m=Ie(o.touches[0],o.touches[1]),v=$(o.touches[0],o.touches[1]);if(Ze&&ze){const k=m/Ze,A=Math.max(.5,Math.min(5,Z*k)),M=v.x-ze.x,P=v.y-ze.y,ue=A/Z,st=re.x*ue+M,qt=re.y*ue+P;T(A),W({x:st,y:qt})}ce(m),Se(v)}else if(o.touches.length===1&&Z>1&&!Ge){o.preventDefault();const m=o.touches[0];W({x:m.clientX-Ye.x,y:m.clientY-Ye.y})}},onTouchEnd:o=>{if(o.touches.length===0){const m=Date.now(),v=o.changedTouches[0],k={x:v.clientX,y:v.clientY};if(m-Yt<300&&Ke&&Math.abs(k.x-Ke.x)<30&&Math.abs(k.y-Ke.y)<30&&!Ge){if(Z===1){const P=o.currentTarget.getBoundingClientRect(),ue=k.x-P.left-P.width/2,st=k.y-P.top-P.height/2;T(2.5),W({x:-ue*1.5,y:-st*1.5})}else T(1),W({x:0,y:0});St(0),ut(null)}else St(m),ut(k);ce(null),Se(null),Ue(!1)}else if(o.touches.length===1&&Ge){ce(null),Se(null),Ue(!1);const m=o.touches[0];tt({x:m.clientX-re.x,y:m.clientY-re.y})}},onDoubleClick:o=>{o.stopPropagation();const m=o.currentTarget.getBoundingClientRect(),v=o.clientX-m.left-m.width/2,k=o.clientY-m.top-m.height/2;Z===1?(T(2.5),W({x:-v*1.5,y:-k*1.5})):(T(1),W({x:0,y:0}))},children:a.jsxDEV("img",{src:Te,alt:"원본 이미지",style:{transform:`scale(${Z}) translate(${re.x/Z}px, ${re.y/Z}px)`,transformOrigin:"center center",transition:Ae||Ze!==null?"none":"transform 0.25s cubic-bezier(0.2, 0, 0, 1)",maxWidth:"100%",maxHeight:"100%",objectFit:"contain",cursor:Z>1?Ae?"grabbing":"grab":"pointer",userSelect:"none",touchAction:"none"},draggable:!1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2327,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2189,columnNumber:11},void 0),a.jsxDEV("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-white bg-opacity-10 text-white px-4 py-2 rounded-lg text-xs text-center",children:"마우스 휠 또는 두 손가락으로 확대/축소 | 드래그로 이동 | 더블클릭으로 2배 확대/초기화"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2346,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2111,columnNumber:9},void 0),Oe&&Fe&&a.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxDEV("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"프로젝트 선택"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2356,columnNumber:13},void 0),a.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"아이템을 추가할 프로젝트를 선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2357,columnNumber:13},void 0),a.jsxDEV("div",{className:"max-h-96 overflow-y-auto space-y-2 mb-6",children:y.map(o=>a.jsxDEV("button",{onClick:async()=>{try{const m=c.find(v=>v.id===Fe);if(m){const{id:v,created_at:k,updated_at:A,...M}=m;await X.post("/specbook/base64",{...M,isLibrary:!1,projectId:o.id}),U.success(`"${o.title}"에 아이템이 추가되었습니다`),Ne()}}catch(m){console.error("아이템 추가 실패:",m),U.error("아이템 추가 실패")}finally{Le(!1),nt(null)}},className:"w-full px-4 py-3 text-left border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-colors",children:a.jsxDEV("div",{className:"font-medium text-gray-900",children:o.title},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2387,columnNumber:19},void 0)},o.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2362,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2360,columnNumber:13},void 0),a.jsxDEV("button",{onClick:()=>{Le(!1),nt(null)},className:"w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"취소"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2391,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2355,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2354,columnNumber:9},void 0),ae&&ie&&a.jsxDEV(Is,{image:ie,onCropComplete:Or,onCancel:Fr,aspectRatio:1},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:2406,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/Specbook.tsx",lineNumber:1217,columnNumber:5},void 0)};export{Li as default};
