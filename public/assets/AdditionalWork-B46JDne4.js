import{u as xe,z as k,j as e,l as he}from"./index-CtWI97G0.js";import{r}from"./vendor-react-B9Yt5e0k.js";import{u as je}from"./index.esm-CwHht2tV.js";import{u as ye}from"./useFilteredProjects-bRf3jFP3.js";import{X as Y,I as Z,U as te,T as re,o as ge,p as be,n as ke}from"./vendor-ui-CcgAtStV.js";import{a as K}from"./additionalWorkService-HVdbvTeI.js";import{u as Ce}from"./dataStore-DzAS0Jmg.js";import{p as Q}from"./vendor-date-9Cl9d1sr.js";import"./vendor-data-BwGxWJIh.js";const Ee=({work:d,onClose:P,onSave:z,initialProject:j})=>{const{register:_,handleSubmit:D,setValue:f,formState:{errors:V}}=je(),{user:v}=xe(),B=ye(),[ee,I]=r.useState(!1),[c,C]=r.useState([]),[w,E]=r.useState([]),[R,T]=r.useState(!1);r.useEffect(()=>{if(d)f("project",d.project),f("description",d.description),f("amount",d.amount),f("date",d.date.toISOString().split("T")[0]),f("notes",d.notes||""),E(d.images||[]),C(d.images||[]);else{const i=new Date().toISOString().split("T")[0];f("date",i),E([]),C([]),(v==null?void 0:v.name)==="안팀"&&B.length>0?f("project",B[0].name):j&&f("project",j)}},[d,f,j,v,B]);const O=r.useCallback(i=>{var u;const m=(u=i.clipboardData)==null?void 0:u.items;if(m){for(let p=0;p<m.length;p++)if(m[p].type.indexOf("image")!==-1){i.preventDefault();const N=m[p].getAsFile();if(N){const x=new FileReader;x.onload=g=>{var H;const y=(H=g.target)==null?void 0:H.result;C(G=>[...G,y]),E(G=>[...G,y]),k.success("이미지가 추가되었습니다")},x.readAsDataURL(N)}}}},[]);r.useEffect(()=>(document.addEventListener("paste",O),()=>document.removeEventListener("paste",O)),[O]);const $=i=>{i.preventDefault(),I(!0)},q=i=>{i.preventDefault(),I(!1)},se=i=>{i.preventDefault(),I(!1);const m=Array.from(i.dataTransfer.files);m.forEach(u=>{if(u.type.startsWith("image/")){const p=new FileReader;p.onload=N=>{var g;const x=(g=N.target)==null?void 0:g.result;C(y=>[...y,x]),E(y=>[...y,x])},p.readAsDataURL(u)}}),m.length>0&&k.success(`${m.length}개의 이미지가 추가되었습니다`)},W=i=>{var u;const m=Array.from(((u=i.target)==null?void 0:u.files)||[]);m.forEach(p=>{if(p.type.startsWith("image/")){const N=new FileReader;N.onload=x=>{var y;const g=(y=x.target)==null?void 0:y.result;C(H=>[...H,g]),E(H=>[...H,g])},N.readAsDataURL(p)}}),m.length>0&&k.success(`${m.length}개의 이미지가 추가되었습니다`)},U=i=>{C(m=>m.filter((u,p)=>p!==i)),E(m=>m.filter((u,p)=>p!==i)),k.success("이미지가 삭제되었습니다")},S=async i=>{if(R)return;T(!0);const m={...i,amount:Number(i.amount),date:new Date(i.date),images:w};try{await z(m)}catch(u){throw T(!1),u}};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[e.jsxDEV("h2",{className:"text-xl font-semibold",children:d?"추가내역 수정":"추가내역 등록"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:180,columnNumber:11},void 0),e.jsxDEV("button",{onClick:P,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsxDEV(Y,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:187,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:183,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:179,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:D(S),className:"p-6 space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"프로젝트명 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:195,columnNumber:13},void 0),e.jsxDEV("select",{..._("project",{required:"프로젝트를 선택하세요"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[(v==null?void 0:v.name)!=="안팀"&&e.jsxDEV("option",{value:"",children:"선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:202,columnNumber:39},void 0),B.map(i=>e.jsxDEV("option",{value:i.name,children:i.name},i.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:204,columnNumber:17},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:198,columnNumber:13},void 0),V.project&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(V.project.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:210,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:194,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"내용 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:216,columnNumber:13},void 0),e.jsxDEV("textarea",{..._("description",{required:"추가내역 내용을 입력하세요"}),rows:3,className:"input",placeholder:"추가 공사 내용을 입력하세요 (예: 거실 조명 추가 설치)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:219,columnNumber:13},void 0),V.description&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(V.description.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:226,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:215,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"금액 (원) *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:233,columnNumber:15},void 0),e.jsxDEV("input",{..._("amount",{required:"금액을 입력하세요",min:{value:0,message:"금액은 0 이상이어야 합니다"}}),type:"number",className:"input",placeholder:"예: 500000"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:236,columnNumber:15},void 0),V.amount&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(V.amount.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:246,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:232,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"일자 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:251,columnNumber:15},void 0),e.jsxDEV("input",{..._("date",{required:"일자를 선택하세요"}),type:"date",className:"input"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:254,columnNumber:15},void 0),V.date&&e.jsxDEV("p",{className:"mt-1 text-sm text-red-600",children:String(V.date.message)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:260,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:250,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:231,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"비고"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:267,columnNumber:13},void 0),e.jsxDEV("textarea",{..._("notes"),rows:2,className:"input",placeholder:"추가 메모 (선택사항)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:270,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:266,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"증빙 이미지 (Ctrl+V로 붙여넣기 가능)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:280,columnNumber:13},void 0),e.jsxDEV("div",{className:`border-2 border-dashed rounded-lg p-6 transition-colors ${ee?"border-gray-500 bg-gray-50":"border-gray-300"}`,onDragOver:$,onDragLeave:q,onDrop:se,children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Z,{className:"mx-auto h-12 w-12 text-gray-400"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:293,columnNumber:17},void 0),e.jsxDEV("p",{className:"mt-2 text-sm text-gray-600",children:"이미지를 드래그하여 놓거나 클릭하여 선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:294,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"또는 Ctrl+V로 클립보드 이미지 붙여넣기"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:297,columnNumber:17},void 0),e.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:W,className:"hidden",id:"file-upload-additional"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:300,columnNumber:17},void 0),e.jsxDEV("label",{htmlFor:"file-upload-additional",className:"mt-4 inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[e.jsxDEV(te,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:312,columnNumber:19},void 0),"파일 선택"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:308,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:292,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:284,columnNumber:13},void 0),c.length>0&&e.jsxDEV("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:c.map((i,m)=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:i,alt:`증빙 ${m+1}`,className:"w-full h-32 object-cover rounded-lg"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:323,columnNumber:21},void 0),e.jsxDEV("button",{type:"button",onClick:()=>U(m),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(re,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:333,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:328,columnNumber:21},void 0)]},m,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:322,columnNumber:19},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:320,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:279,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[e.jsxDEV("button",{type:"button",onClick:P,className:"btn btn-outline",children:"취소"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:343,columnNumber:13},void 0),e.jsxDEV("button",{type:"submit",disabled:R,className:"btn btn-primary disabled:opacity-50",children:R?"저장 중...":d?"수정":"등록"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:350,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:342,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:192,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:177,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/components/AdditionalWorkModal.tsx",lineNumber:176,columnNumber:5},void 0)},Fe=()=>{var ue;const{user:d}=xe(),P=ye(),{constructionPayments:z}=Ce(),[j,_]=r.useState(()=>localStorage.getItem("additionalWork_includeCompleted")==="true"),D=j?P:P.filter(s=>s.status!=="completed"),[f,V]=r.useState([]),[v,B]=r.useState(!1),[ee,I]=r.useState(null),[c,C]=r.useState(null),[w,E]=r.useState(new Set),[R,T]=r.useState(void 0),[O,$]=r.useState(!1),[q,se]=r.useState(null),[W,U]=r.useState({}),[S,i]=r.useState([]);r.useRef(null);const m=r.useRef(null),[u,p]=r.useState(!1),[N,x]=r.useState(!1),[g,y]=r.useState(!1),H=s=>f.filter(n=>n.project===s).reduce((n,t)=>n+t.amount,0),F=((d==null?void 0:d.name)==="안팀"?z.filter(s=>D.some(n=>n.name===s.project)):z).filter(s=>{var b;const n=H(s.project);let t;if(s.vatType==="amount")t=(s.totalAmount||0)+(s.vatAmount||0);else{const A=(s.totalAmount||0)*((s.vatPercentage??100)/100)*.1;t=(s.totalAmount||0)+A}const a=t+n,o=((b=s.payments)==null?void 0:b.reduce((A,L)=>A+L.amount,0))||0;return a>0&&o>=a}).map(s=>s.project),[l,h]=r.useState({project:"",description:"",amount:"",date:Q(new Date,"yyyy-MM-dd"),notes:""});r.useEffect(()=>{var s;if(D.length>0&&!l.project){const n=localStorage.getItem("lastSelectedProject"),t=((s=D.find(a=>a.name===n))==null?void 0:s.name)||D[0].name;h(a=>({...a,project:t}))}},[D]),r.useEffect(()=>{localStorage.setItem("additionalWork_includeCompleted",String(j))},[j]);const ne=r.useCallback(s=>{var o;const n=document.activeElement;if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)return;const a=(o=s.clipboardData)==null?void 0:o.items;if(a){for(let b=0;b<a.length;b++)if(a[b].type.indexOf("image")!==-1){s.preventDefault();const A=a[b].getAsFile();if(A){const L=new FileReader;L.onload=ve=>{var fe;const pe=(fe=ve.target)==null?void 0:fe.result;c?U(X=>{const Ne=[...X[c]||[],pe];return ie(c,Ne),{...X,[c]:Ne}}):i(X=>[...X,pe]),k.success("이미지가 첨부되었습니다")},L.readAsDataURL(A)}}}},[c]);r.useEffect(()=>(document.addEventListener("paste",ne),()=>document.removeEventListener("paste",ne)),[ne]),r.useEffect(()=>{const s=localStorage.getItem("additionalWorkImages");s&&U(JSON.parse(s))},[]),r.useEffect(()=>{localStorage.setItem("additionalWorkImages",JSON.stringify(W))},[W]),r.useEffect(()=>{const s=()=>{p(n=>{const t=!n;return window.dispatchEvent(new CustomEvent("mobileFormStateChange",{detail:{isOpen:t}})),t})};return window.addEventListener("headerAddButtonClick",s),()=>window.removeEventListener("headerAddButtonClick",s)},[]),r.useEffect(()=>{window.dispatchEvent(new CustomEvent("mobileFormStateChange",{detail:{isOpen:u}}))},[u]);const ie=async(s,n)=>{try{await K.updateAdditionalWork(s,{images:n})}catch(t){console.error("Failed to save images:",t)}},Ae=s=>{const n=Array.from(s.target.files||[]);if(!c){k.error("먼저 추가내역을 선택해주세요");return}n.forEach(t=>{if(t.type.startsWith("image/")){const a=new FileReader;a.onload=o=>{var A;const b=(A=o.target)==null?void 0:A.result;U(L=>({...L,[c]:[...L[c]||[],b]}))},a.readAsDataURL(t)}}),n.length>0&&k.success("이미지가 첨부되었습니다")},De=(s,n)=>{U(a=>({...a,[s]:(a[s]||[]).filter((o,b)=>b!==n)})),k.success("이미지가 삭제되었습니다");const t=(W[s]||[]).filter((a,o)=>o!==n);ie(s,t)},ae=s=>{se(s),$(!0)},J=async()=>{try{const s=await K.getAllAdditionalWorks(),n=D.map(o=>o.name),t=(d==null?void 0:d.name)==="안팀"?s.filter(o=>n.includes(o.project)):s;V(t.map(o=>({id:o._id,project:o.project,description:o.description,amount:o.amount,date:new Date(o.date),notes:o.notes,images:o.images||[]})));const a={};t.forEach(o=>{o.images&&o.images.length>0&&(a[o._id]=o.images)}),U(a)}catch(s){console.error("Failed to load additional works:",s),V([])}};r.useEffect(()=>{J()},[]);const oe=s=>{I(s),T(s.project),B(!0)},me=async s=>{if(window.confirm("이 추가내역을 삭제하시겠습니까?"))try{await K.deleteAdditionalWork(s),await J(),k.success("추가내역이 삭제되었습니다"),c===s&&C(null)}catch(n){console.error("Failed to delete additional work:",n),k.error("추가내역 삭제에 실패했습니다")}},Ve=async s=>{B(!1),I(null),T(void 0),s&&await J()},de=async s=>{if(s.preventDefault(),!g){if(!l.project||!l.description||!l.amount||!l.date){k.error("모든 필수 항목을 입력해주세요");return}y(!0);try{const n=await K.createAdditionalWork({project:l.project,description:l.description,amount:parseFloat(l.amount),date:new Date(l.date),images:S});k.success("추가내역이 등록되었습니다"),h(t=>({...t,description:"",amount:"",date:Q(new Date,"yyyy-MM-dd"),notes:""})),i([]),await J(),S.length>0&&n._id&&U(t=>({...t,[n._id]:S})),localStorage.setItem("lastSelectedProject",l.project)}catch(n){console.error("Failed to create additional work:",n),k.error("추가내역 등록에 실패했습니다")}finally{y(!1)}}},le=f.filter(s=>{const n=F.includes(s.project);return N?n:!n}),M=le.reduce((s,n)=>{const t=s.find(a=>a.projectName===n.project);return t?(t.works.push(n),t.totalAmount+=n.amount):s.push({projectName:n.project,works:[n],totalAmount:n.amount}),s},[]);M.sort((s,n)=>s.projectName.localeCompare(n.projectName)),M.forEach(s=>{s.works.sort((n,t)=>t.date.getTime()-n.date.getTime())}),r.useEffect(()=>{const s=new Set(M.map(n=>n.projectName));E(s)},[le.length]);const ce=s=>{const n=new Set(w);n.has(s)?n.delete(s):n.add(s),E(n)};return e.jsxDEV("div",{className:"space-y-4 md:space-y-6",children:[e.jsxDEV("div",{className:"additional-work-container hidden desktop:grid desktop:gap-4 2xl:gap-6 desktop:grid-cols-12",children:[e.jsxDEV("div",{className:"additional-work-form md:col-span-4 lg:col-span-4 bg-white border border-gray-200 rounded-lg p-4 md:p-5 lg:p-6 h-fit sticky top-4",children:e.jsxDEV("div",{className:"aw-form-inner space-y-4",children:[e.jsxDEV("div",{className:"aw-project space-y-2",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700",children:"프로젝트 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:437,columnNumber:15},void 0),e.jsxDEV("select",{value:l.project,onChange:s=>h(n=>({...n,project:s.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white",children:[(d==null?void 0:d.name)!=="안팀"&&e.jsxDEV("option",{value:"",children:"선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:445,columnNumber:41},void 0),D.map(s=>e.jsxDEV("option",{value:s.name,children:s.name},s.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:447,columnNumber:19},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:440,columnNumber:15},void 0),e.jsxDEV("label",{className:"flex items-center gap-2 text-xs text-gray-600 cursor-pointer",children:[e.jsxDEV("input",{type:"checkbox",checked:j,onChange:s=>_(s.target.checked),className:"rounded border-gray-300 text-gray-900 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:453,columnNumber:17},void 0),"공사완료 현장 포함"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:452,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:436,columnNumber:13},void 0),e.jsxDEV("div",{className:"aw-date",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"일자 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:465,columnNumber:15},void 0),e.jsxDEV("input",{type:"date",value:l.date,onChange:s=>h(n=>({...n,date:s.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:468,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:464,columnNumber:13},void 0),e.jsxDEV("div",{className:"aw-description",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"내용 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:478,columnNumber:15},void 0),e.jsxDEV("textarea",{value:l.description,onChange:s=>h(n=>({...n,description:s.target.value})),rows:5,className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 resize-none",placeholder:"추가내역 내용을 입력하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:481,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:477,columnNumber:13},void 0),e.jsxDEV("div",{className:"aw-amount",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"금액 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:492,columnNumber:15},void 0),e.jsxDEV("input",{type:"number",value:l.amount,onChange:s=>h(n=>({...n,amount:s.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"0"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:495,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:491,columnNumber:13},void 0),e.jsxDEV("div",{className:"aw-images",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["이미지 첨부",e.jsxDEV("span",{className:"text-xs text-gray-500 ml-2",children:"(Ctrl+V로 붙여넣기 가능)"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:508,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:506,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("input",{ref:m,type:"file",accept:"image/*",multiple:!0,onChange:s=>{Array.from(s.target.files||[]).forEach(t=>{if(t.type.startsWith("image/")){const a=new FileReader;a.onload=o=>{var A;const b=(A=o.target)==null?void 0:A.result;i(L=>[...L,b])},a.readAsDataURL(t)}}),s.target.value=""},className:"hidden"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:511,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",onClick:()=>{var s;return(s=m.current)==null?void 0:s.click()},className:"w-full px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 flex items-center justify-center gap-2",children:[e.jsxDEV(te,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:537,columnNumber:19},void 0),"이미지 첨부"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:532,columnNumber:17},void 0),S.length>0&&e.jsxDEV("div",{className:"grid grid-cols-3 gap-2 mt-2",children:S.map((s,n)=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:s,alt:`첨부 ${n+1}`,className:"w-full h-20 object-cover rounded cursor-pointer",onClick:()=>ae(s)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:544,columnNumber:25},void 0),e.jsxDEV("button",{type:"button",onClick:()=>i(t=>t.filter((a,o)=>o!==n)),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(Y,{className:"h-3 w-3"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:555,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:550,columnNumber:25},void 0)]},n,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:543,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:541,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:510,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:505,columnNumber:13},void 0),e.jsxDEV("button",{onClick:de,disabled:g,className:"aw-submit w-full py-3.5 bg-gray-900 text-white text-base font-semibold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"등록 중...":"추가내역 등록"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:565,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:434,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:433,columnNumber:9},void 0),e.jsxDEV("div",{className:"additional-work-list md:col-span-4 lg:col-span-5 flex flex-col h-[calc(100vh-120px)]",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 flex-shrink-0",children:e.jsxDEV("div",{className:"space-y-4",children:e.jsxDEV("div",{className:"flex border-b border-gray-200",children:[e.jsxDEV("button",{onClick:()=>x(!1),className:`flex-1 py-2 text-sm font-medium border-b-2 transition-colors ${N?"border-transparent text-gray-500 hover:text-gray-700":"border-gray-900 text-gray-900"}`,children:["미납 (",M.filter(s=>!F.includes(s.projectName)).length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:582,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>x(!0),className:`flex-1 py-2 text-sm font-medium border-b-2 transition-colors ${N?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["완납 (",F.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:592,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:581,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:579,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:578,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-4 flex-1 overflow-y-auto mt-3 pr-1",children:M.map(s=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxDEV("div",{className:"px-4 py-3.5 border-b border-gray-200 flex items-center justify-between cursor-pointer bg-gray-100 hover:bg-gray-200",onClick:()=>ce(s.projectName),children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[w.has(s.projectName)?e.jsxDEV(ge,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:616,columnNumber:23},void 0):e.jsxDEV(be,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:618,columnNumber:23},void 0),e.jsxDEV("h3",{className:"text-base font-semibold text-gray-900",children:s.projectName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:620,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-sm text-gray-500",children:["(",s.works.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:621,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:614,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-base font-bold text-gray-900",children:[s.totalAmount.toLocaleString(),"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:623,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:610,columnNumber:17},void 0),w.has(s.projectName)&&e.jsxDEV("div",{className:"divide-y divide-gray-100",children:s.works.map(n=>{var t;return e.jsxDEV("div",{className:`px-4 py-3.5 hover:bg-gray-50 cursor-pointer transition-colors ${c===n.id?"bg-blue-50 border-l-4 border-blue-500":""}`,onClick:()=>C(n.id),children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"text-base text-gray-900 line-clamp-2",children:n.description},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:640,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxDEV("span",{className:"text-sm text-gray-500",children:Q(n.date,"yyyy.MM.dd")},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:642,columnNumber:31},void 0),((t=W[n.id])==null?void 0:t.length)>0&&e.jsxDEV("span",{className:"text-sm text-blue-600 flex items-center gap-1",children:[e.jsxDEV(Z,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:647,columnNumber:35},void 0),W[n.id].length]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:646,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:641,columnNumber:29},void 0),n.notes&&e.jsxDEV("p",{className:"text-sm text-gray-500 mt-2",children:n.notes},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:653,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:639,columnNumber:27},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 ml-4",children:[e.jsxDEV("span",{className:"text-base font-semibold text-gray-900",children:[n.amount.toLocaleString(),"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:657,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:a=>{a.stopPropagation(),oe(n)},className:"p-1.5 text-gray-500 hover:text-gray-700",children:e.jsxDEV(ke,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:668,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:661,columnNumber:31},void 0),e.jsxDEV("button",{onClick:a=>{a.stopPropagation(),me(n.id)},className:"p-1.5 text-red-500 hover:text-red-700",children:e.jsxDEV(re,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:677,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:670,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:660,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:656,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:638,columnNumber:25},void 0)},n.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:631,columnNumber:23},void 0)})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:629,columnNumber:19},void 0)]},s.projectName,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:609,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:607,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:576,columnNumber:9},void 0),e.jsxDEV("div",{className:"additional-work-images md:col-span-4 lg:col-span-3 bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-5 lg:p-6 h-[calc(100vh-120px)] overflow-y-auto",children:c?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-5 sticky top-0 bg-white pb-2",children:[e.jsxDEV("h3",{className:"text-base font-semibold text-gray-900",children:"이미지 관리"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:696,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("span",{className:"text-sm text-gray-500",children:"Ctrl+V로 이미지 붙여넣기"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:698,columnNumber:19},void 0),e.jsxDEV("input",{type:"file",multiple:!0,accept:"image/*",onChange:Ae,className:"hidden",id:"work-image-upload"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:701,columnNumber:19},void 0),e.jsxDEV("label",{htmlFor:"work-image-upload",className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 cursor-pointer flex items-center gap-2 font-medium",children:[e.jsxDEV(te,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:713,columnNumber:21},void 0),"이미지 첨부"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:709,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:697,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:695,columnNumber:15},void 0),((ue=W[c])==null?void 0:ue.length)>0?e.jsxDEV("div",{className:"grid grid-cols-2 xl:grid-cols-3 gap-4",children:W[c].map((s,n)=>e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:s,alt:`이미지 ${n+1}`,className:"w-full h-40 object-cover rounded-lg cursor-pointer",onClick:()=>ae(s)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:723,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>De(c,n),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxDEV(Y,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:733,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:729,columnNumber:23},void 0)]},n,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:722,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:720,columnNumber:17},void 0):e.jsxDEV("div",{className:"text-center py-16 text-gray-500",children:[e.jsxDEV(Z,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:740,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-base",children:"이미지가 없습니다"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:741,columnNumber:19},void 0),e.jsxDEV("p",{className:"text-sm mt-2",children:"이미지를 업로드하거나 Ctrl+V로 붙여넣기"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:742,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:739,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:694,columnNumber:13},void 0):e.jsxDEV("div",{className:"text-center py-16 text-gray-500",children:[e.jsxDEV(Z,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:750,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-base",children:"추가내역을 선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:751,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm mt-2",children:"선택한 항목의 이미지를 관리할 수 있습니다"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:752,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:749,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:692,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:431,columnNumber:7},void 0),e.jsxDEV("div",{className:"desktop:hidden space-y-3",children:[u&&e.jsxDEV("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700",children:"프로젝트 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:766,columnNumber:17},void 0),e.jsxDEV("select",{value:l.project,onChange:s=>h(n=>({...n,project:s.target.value})),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white",children:[(d==null?void 0:d.name)!=="안팀"&&e.jsxDEV("option",{value:"",children:"선택하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:774,columnNumber:43},void 0),D.map(s=>e.jsxDEV("option",{value:s.name,children:s.name},s.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:776,columnNumber:21},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:769,columnNumber:17},void 0),e.jsxDEV("label",{className:"flex items-center gap-2 text-xs text-gray-600 cursor-pointer",children:[e.jsxDEV("input",{type:"checkbox",checked:j,onChange:s=>_(s.target.checked),className:"rounded border-gray-300 text-gray-900 focus:ring-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:782,columnNumber:19},void 0),"공사완료 현장 포함"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:781,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:765,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"일자 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:794,columnNumber:17},void 0),e.jsxDEV("input",{type:"date",value:l.date,onChange:s=>h(n=>({...n,date:s.target.value})),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:797,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:793,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"내용 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:807,columnNumber:17},void 0),e.jsxDEV("textarea",{value:l.description,onChange:s=>h(n=>({...n,description:s.target.value})),rows:4,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 resize-none",placeholder:"추가내역 내용을 입력하세요"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:810,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:806,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"금액 *"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:821,columnNumber:17},void 0),e.jsxDEV("input",{type:"number",value:l.amount,onChange:s=>h(n=>({...n,amount:s.target.value})),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white",placeholder:"0"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:824,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:820,columnNumber:15},void 0),e.jsxDEV("button",{onClick:de,disabled:g,className:"w-full py-3 bg-gray-900 text-white text-sm font-semibold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"등록 중...":"추가내역 등록"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:834,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:763,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:762,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex border-b border-gray-200",children:[e.jsxDEV("button",{onClick:()=>x(!1),className:`flex-1 py-2 text-xs font-medium border-b-2 transition-colors ${N?"border-transparent text-gray-500":"border-gray-900 text-gray-900"}`,children:["미납 (",f.filter(s=>!F.includes(s.project)).length>0?M.filter(s=>!F.includes(s.projectName)).length:0,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:847,columnNumber:11},void 0),e.jsxDEV("button",{onClick:()=>x(!0),className:`flex-1 py-2 text-xs font-medium border-b-2 transition-colors ${N?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:["완납 (",F.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:857,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:846,columnNumber:9},void 0),M.map(s=>e.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxDEV("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between bg-gray-100",onClick:()=>ce(s.projectName),children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[w.has(s.projectName)?e.jsxDEV(ge,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:878,columnNumber:19},void 0):e.jsxDEV(be,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:880,columnNumber:19},void 0),e.jsxDEV("h3",{className:"font-semibold text-gray-900",children:s.projectName},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:882,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-sm text-gray-500",children:["(",s.works.length,")"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:883,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:876,columnNumber:15},void 0),e.jsxDEV("span",{className:"font-bold text-gray-900",children:[s.totalAmount.toLocaleString(),"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:885,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:872,columnNumber:13},void 0),w.has(s.projectName)&&e.jsxDEV("div",{className:"divide-y divide-gray-100",children:s.works.map(n=>e.jsxDEV("div",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:"text-sm text-gray-900",children:n.description},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:896,columnNumber:25},void 0),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:Q(n.date,"yyyy.MM.dd",{locale:he})},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:897,columnNumber:25},void 0),n.notes&&e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:n.notes},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:901,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:895,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 ml-3",children:[e.jsxDEV("span",{className:"font-semibold text-gray-900",children:[n.amount.toLocaleString(),"원"]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:905,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex gap-1",children:[e.jsxDEV("button",{onClick:()=>oe(n),className:"p-1 text-gray-500 hover:text-gray-700",children:e.jsxDEV(ke,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:913,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:909,columnNumber:27},void 0),e.jsxDEV("button",{onClick:()=>me(n.id),className:"p-1 text-red-500 hover:text-red-700",children:e.jsxDEV(re,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:919,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:915,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:908,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:904,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:894,columnNumber:21},void 0)},n.id,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:893,columnNumber:19},void 0))},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:891,columnNumber:15},void 0)]},s.projectName,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:871,columnNumber:11},void 0))]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:759,columnNumber:7},void 0),v&&e.jsxDEV(Ee,{isOpen:v,onClose:Ve,work:ee,projects:D,initialProject:R},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:935,columnNumber:9},void 0),O&&q&&e.jsxDEV("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",onClick:()=>$(!1),children:e.jsxDEV("div",{className:"relative max-w-4xl max-h-full",children:[e.jsxDEV("button",{onClick:()=>$(!1),className:"absolute top-4 right-4 p-2 bg-white rounded-full hover:bg-gray-100 z-10",children:e.jsxDEV(Y,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:955,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:951,columnNumber:13},void 0),e.jsxDEV("img",{src:q,alt:"확대 이미지",className:"max-w-full max-h-[90vh] object-contain",onClick:s=>s.stopPropagation()},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:957,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:950,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:946,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/kim_s/Desktop/HV LAB app/interior-management-system/frontend/src/pages/AdditionalWork.tsx",lineNumber:429,columnNumber:5},void 0)};export{Fe as default};
