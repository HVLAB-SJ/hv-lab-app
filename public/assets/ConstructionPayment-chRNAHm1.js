import{j as e}from"./vendor-data-DG_4MGb7.js";import{r as u}from"./vendor-react-D-r2Cqeg.js";import{u as je}from"./dataStore-D-kob-RA.js";import{a as fe}from"./additionalWorkService-nIAYBYK_.js";import{z as p}from"./index-Dgd7wCS1.js";import{p as x}from"./vendor-date-9Cl9d1sr.js";import{n as ve,X as G}from"./vendor-ui-DTwhhNuH.js";const Ne="data:image/png;base64,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",De=()=>{const{projects:f,constructionPayments:P,loadConstructionPaymentsFromAPI:K,addConstructionPaymentToAPI:_,updateConstructionPaymentInAPI:N,deleteConstructionPaymentFromAPI:ee,executionRecords:te,payments:ae}=je(),[b,v]=u.useState(P),[se,re]=u.useState([]),[ne,F]=u.useState(!1),[H,X]=u.useState("cash"),[i,C]=u.useState({project:"",client:"",amount:"",date:x(new Date,"yyyy-MM-dd"),clientSignature:"",totalContractAmount:0,previousAmount:0,remainingAmount:0,startDate:"",endDate:""});u.useEffect(()=>{console.log("ğŸ’° ConstructionPayment: Loading payments from API..."),K().then(()=>{console.log("ğŸ’° ConstructionPayment: Payments loaded successfully")}).catch(t=>{console.error("ğŸ’° ConstructionPayment: Failed to load construction payments:",t),p.error("ê³µì‚¬ëŒ€ê¸ˆ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")})},[K]),u.useEffect(()=>{console.log("ğŸ’° ConstructionPayment: Loading additional works from API..."),fe.getAllAdditionalWorks().then(t=>{console.log("ğŸ’° ConstructionPayment: Additional works loaded:",t),re(t.map(a=>({_id:a._id,project:a.project,amount:a.amount})))}).catch(t=>{console.error("ğŸ’° ConstructionPayment: Failed to load additional works:",t)})},[]),u.useEffect(()=>{const t=()=>{Z()};return window.addEventListener("headerAddButtonClick",t),()=>window.removeEventListener("headerAddButtonClick",t)},[]),u.useEffect(()=>{console.log("ğŸ’° ConstructionPayment: Syncing with dataStore"),console.log("ğŸ’° constructionPayments:",P),console.log("ğŸ’° projects:",f);const t=P.map(a=>({...a,vatType:a.vatType||"percentage",vatPercentage:a.vatPercentage??100,vatAmount:a.vatAmount??0,payments:a.payments.map(s=>{var n;return{...s,type:s.type||((n=s.types)==null?void 0:n[0])||"ê³„ì•½ê¸ˆ"}})}));console.log("ğŸ’° Normalized records:",t),v(t)},[P,f]);const[r,h]=u.useState(null),[le,L]=u.useState(!1),[oe,E]=u.useState(!1),[M,J]=u.useState(!1),[W,q]=u.useState(!1),[I,B]=u.useState(null),[R,ce]=u.useState("remaining"),[o,k]=u.useState({projectId:"",totalAmount:0,vatType:"percentage",vatPercentage:100,vatAmount:0}),[l,A]=u.useState({types:[],percentage:0,amount:0,date:"",method:"ê³„ì¢Œì´ì²´",notes:""}),U={ê³„ì•½ê¸ˆ:10,ì°©ìˆ˜ê¸ˆ:40,ì¤‘ë„ê¸ˆ:40,ì”ê¸ˆ:10,ì¶”ê°€ê¸ˆ:0},O=t=>t.reduce((a,s)=>a+(U[s]||0),0),de=(t,a)=>{const s=r?f.find(d=>d.name===r.project):null;if(!s||t.length===0||!s.startDate||!s.endDate)return"";const n=new Date(s.startDate),c=new Date(s.endDate);if(isNaN(n.getTime())||isNaN(c.getTime())||t.includes("ê³„ì•½ê¸ˆ"))return"";if(t.includes("ì°©ìˆ˜ê¸ˆ")){const d=new Date(n);return d.setDate(d.getDate()-7),x(d,"yyyy-MM-dd")}else if(t.includes("ì¤‘ë„ê¸ˆ")){const d=n.getTime()+(c.getTime()-n.getTime())/2;return x(new Date(d),"yyyy-MM-dd")}else if(t.includes("ì”ê¸ˆ")||t.includes("ì¶”ê°€ê¸ˆ"))return x(c,"yyyy-MM-dd");return""},ie=t=>{const a=f.find(y=>y.name===t.project);if(!a)return[];if(!a.startDate||!a.endDate)return[];const s=w(t),n=new Date(a.startDate),c=new Date(a.endDate);if(isNaN(n.getTime())||isNaN(c.getTime()))return[];const d=[];d.push({type:"ê³„ì•½ê¸ˆ",date:null,amount:Math.round(s*.1),percentage:10,status:"pending"});const g=new Date(n);g.setDate(g.getDate()-7),d.push({type:"ì°©ìˆ˜ê¸ˆ",date:g,amount:Math.round(s*.4),percentage:40,status:g<=new Date?"overdue":"pending"});const j=n.getTime()+(c.getTime()-n.getTime())/2,m=new Date(j);return d.push({type:"ì¤‘ë„ê¸ˆ",date:m,amount:Math.round(s*.4),percentage:40,status:m<=new Date?"overdue":"pending"}),d.push({type:"ì”ê¸ˆ",date:c,amount:Math.round(s*.1),percentage:10,status:c<=new Date?"overdue":"pending"}),t.payments.forEach(y=>{var $;((($=y.type)==null?void 0:$.split(", "))||[]).forEach(he=>{const T=d.find(Ae=>Ae.type===he.trim());T&&(T.status="completed",T.actualDate=y.date,T.actualAmount=y.amount)})}),d},Z=()=>{L(!0)},me=async()=>{if(M)return;console.log("ğŸ’° handleSaveProject called"),console.log("ğŸ’° newProject:",o),console.log("ğŸ’° projects:",f);const t=f.find(a=>a.id===o.projectId||a.id===parseInt(o.projectId)||a.id.toString()===o.projectId.toString());if(console.log("ğŸ’° selectedProject:",t),console.log("ğŸ’° totalAmount:",o.totalAmount,"type:",typeof o.totalAmount),!t){alert("í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”");return}if(o.totalAmount<=0){alert("ì´ ê³µì‚¬ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš” (0ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤)");return}J(!0);try{const a={id:"",project_id:t.id,project:t.name,client:t.client,totalAmount:o.totalAmount,vatType:o.vatType,vatPercentage:o.vatPercentage,vatAmount:o.vatAmount,payments:[]};console.log("ğŸ“¤ Sending to API:",a),await _(a),p.success("í”„ë¡œì íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤"),L(!1),k({projectId:"",totalAmount:0,vatType:"percentage",vatPercentage:100,vatAmount:0})}catch(a){console.error("Failed to add construction payment:",a),p.error("í”„ë¡œì íŠ¸ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}finally{J(!1)}},xe=()=>{B(null),A({types:[],percentage:0,amount:0,date:"",method:"ê³„ì¢Œì´ì²´",notes:"",quickText:""}),E(!0)},ue=t=>{const a=r==null?void 0:r.payments[t];if(!a)return;B(t);const s=a.type?a.type.split(",").map(n=>n.trim()):[];A({types:s,percentage:O(s),amount:a.amount,date:x(a.date,"yyyy-MM-dd"),method:a.method,notes:a.notes||""}),E(!0)},pe=async()=>{if(!W){if(!r||!l.date||l.amount<=0||l.types.length===0){alert("ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”");return}q(!0);try{let t;I!==null?t=r.payments.map((n,c)=>c===I?{type:l.types.join(", "),amount:l.amount,date:new Date(l.date),method:l.method,notes:l.notes}:n):t=[...r.payments,{type:l.types.join(", "),amount:l.amount,date:new Date(l.date),method:l.method,notes:l.notes}];const a={...r,payments:t};await N(r.id,a),p.success(I!==null?"ì…ê¸ˆì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤":"ì…ê¸ˆì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤");const s=b.map(n=>n.id===r.id?a:n);v(s),h(a),E(!1),B(null),A({types:[],percentage:0,amount:0,date:"",method:"ê³„ì¢Œì´ì²´",notes:""})}catch(t){console.error("Failed to save payment:",t),p.error("ì…ê¸ˆ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}finally{q(!1)}}},w=t=>{const a=t.totalAmount;if(t.vatType==="amount")return a+(t.vatAmount||0);{const s=a*((t.vatPercentage??100)/100)*.1;return a+s}},ge=t=>{const a=Y(t.project);if(t.vatType==="amount")return t.totalAmount+(t.vatAmount||0)+a;{const s=t.totalAmount*((t.vatPercentage??100)/100)*.1;return t.totalAmount+s+a}},ye=t=>t.vatType==="amount"?t.vatAmount||0:t.totalAmount*((t.vatPercentage??100)/100)*.1,V=t=>{if(!r)return 0;const a=w(r);return Math.round(a*t/100)},D=t=>t.payments.reduce((a,s)=>a+s.amount,0),S=t=>ge(t)-D(t),z=t=>{const a=te.filter(n=>n.project===t).reduce((n,c)=>n+(c.totalAmount||0),0),s=ae.filter(n=>(n.status==="approved"||n.status==="completed")&&n.project===t).reduce((n,c)=>n+c.amount,0);return a+s},Y=t=>se.filter(a=>a.project===t).reduce((a,s)=>a+s.amount,0),be=b.filter(t=>{if(R==="all")return!0;const a=S(t);return R==="completed"?a===0:R==="remaining"?a>0:!0});return e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"border-b border-gray-200 flex items-center justify-between",children:[e.jsx("nav",{className:"flex space-x-4 md:space-x-8 overflow-x-auto",children:[{id:"remaining",label:"ë¯¸ìˆ˜ê¸ˆ",count:b.filter(t=>S(t)>0).length},{id:"completed",label:"ì™„ë‚©",count:b.filter(t=>S(t)===0).length},{id:"all",label:"ì „ì²´",count:b.length}].map(t=>e.jsxs("button",{onClick:()=>ce(t.id),className:`py-3 md:py-4 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap ${R===t.id?"border-gray-700 text-gray-700":"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"}`,children:[t.label,e.jsx("span",{className:`ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold ${R===t.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"}`,children:t.count})]},t.id))}),e.jsx("button",{onClick:Z,className:"btn btn-primary px-4 py-2 whitespace-nowrap hidden md:block",children:"+í”„ë¡œì íŠ¸"})]}),e.jsx("div",{className:"construction-payment-grid grid grid-cols-1 lg:grid-cols-1 xl:grid-cols-3 gap-6",children:be.map(t=>{const a=D(t),s=S(t),n=w(t),c=a/n*100;return e.jsxs("div",{className:"card hover:border-gray-400 transition-colors",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 flex-shrink-0",children:t.project}),e.jsxs("div",{className:"flex gap-1.5 flex-wrap",children:[e.jsx("button",{onClick:()=>{const d=D(t),g=w(t),j=g-d,m=f.find(y=>y.name===t.project);C({project:t.project,client:t.client,amount:"",date:x(new Date,"yyyy-MM-dd"),clientSignature:"",totalContractAmount:g,previousAmount:d,remainingAmount:j,startDate:m!=null&&m.startDate?x(new Date(m.startDate),"yyyy-MM-dd"):"",endDate:m!=null&&m.endDate?x(new Date(m.endDate),"yyyy-MM-dd"):""}),X("transfer"),F(!0)},className:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm bg-gray-800 text-white rounded hover:bg-gray-900 transition-colors whitespace-nowrap",children:"ì´ì²´í™•ì¸ì¦"}),e.jsx("button",{onClick:()=>{const d=D(t),g=w(t),j=g-d,m=f.find(y=>y.name===t.project);C({project:t.project,client:t.client,amount:"",date:x(new Date,"yyyy-MM-dd"),clientSignature:"",totalContractAmount:g,previousAmount:d,remainingAmount:j,startDate:m!=null&&m.startDate?x(new Date(m.startDate),"yyyy-MM-dd"):"",endDate:m!=null&&m.endDate?x(new Date(m.endDate),"yyyy-MM-dd"):""}),X("cash"),F(!0)},className:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm bg-gray-800 text-white rounded hover:bg-gray-900 transition-colors whitespace-nowrap",children:"í˜„ê¸ˆìˆ˜ë ¹ì¦"}),e.jsx("button",{onClick:()=>h(t),className:"px-2 py-1 text-xs sm:text-sm text-gray-600 hover:text-gray-800 whitespace-nowrap",children:"ìƒì„¸ë³´ê¸°"})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"ê³„ì•½ê¸ˆì•¡"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["â‚©",t.totalAmount.toLocaleString()]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"ì´ í•©ê³„"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["â‚©",n.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["(ë¶€ê°€ì„¸ ",t.vatType==="percentage"?`${t.vatPercentage??100}%`:`â‚©${(t.vatAmount||0).toLocaleString()}`," í¬í•¨)"]})]})]})})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ìˆ˜ë ¹ë¥ "}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[c.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full",children:e.jsx("div",{className:"bg-gray-600 h-2 rounded-full transition-all",style:{width:`${c}%`}})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ìˆ˜ë ¹ê¸ˆì•¡"}),e.jsxs("p",{className:"text-base font-bold text-gray-800",children:["â‚©",a.toLocaleString()]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ì‹¤í–‰ë‚´ì—­ í•©ê³„"}),e.jsxs("p",{className:"text-base font-bold text-gray-800",children:["â‚©",z(t.project).toLocaleString()]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ì¶”ê°€ë‚´ì—­ í•©ê³„"}),e.jsxs("p",{className:"text-base font-bold text-gray-800",children:["â‚©",Y(t.project).toLocaleString()]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ë¯¸ìˆ˜ê¸ˆ"}),e.jsxs("p",{className:"text-base font-bold text-gray-800",children:["â‚©",s.toLocaleString()]})]})]})}),t.payments.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"ìˆ˜ë ¹ê¸ˆì•¡"}),t.payments.slice(-2).reverse().map((d,g)=>e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsxs("span",{className:"text-gray-700",children:[d.type||"ë¯¸ë¶„ë¥˜"," - ",x(d.date,"MM/dd")]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["â‚©",d.amount.toLocaleString()]})]},g))]})]},t.id)})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:r.project}),e.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:"âœ•"})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ìˆ˜ê¸ˆ ì¼ì •"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"space-y-3",children:ie(r).map((t,a)=>{var c;const n={ê³„ì•½ê¸ˆ:"contract",ì°©ìˆ˜ê¸ˆ:"start",ì¤‘ë„ê¸ˆ:"middle",ì”ê¸ˆ:"final"}[t.type];return e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${t.status==="completed"?"bg-green-100 text-green-800":t.status==="overdue"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.type}),t.status!=="completed"?e.jsx("input",{type:"date",value:(c=r.expectedPaymentDates)!=null&&c[n]?x(new Date(r.expectedPaymentDates[n]),"yyyy-MM-dd"):t.date?x(t.date,"yyyy-MM-dd"):"",onChange:async d=>{const g=d.target.value?new Date(d.target.value):null,j={...r.expectedPaymentDates,[n]:g},m={...r,expectedPaymentDates:j};h(m);try{await N(r.id,{expectedPaymentDates:j});const y=b.map(Q=>Q.id===r.id?m:Q);v(y),p.success("ìˆ˜ê¸ˆ ì¼ì •ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤")}catch(y){console.error("Failed to update payment date:",y),p.error("ì¼ì • ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-600"}):e.jsxs("span",{className:"text-sm text-gray-700",children:[t.date?x(t.date,"yyyyë…„ MMì›” ddì¼"):"ë‚ ì§œ ë¯¸ì •",t.actualDate&&e.jsxs("span",{className:"text-green-600 ml-2",children:["(ì‹¤ì œ: ",x(t.actualDate,"MM/dd"),")"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["â‚©",t.amount.toLocaleString(),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",t.percentage,"%)"]})]}),t.status==="completed"&&t.actualAmount&&e.jsxs("p",{className:"text-xs text-green-600",children:["ì‹¤ì œ: â‚©",t.actualAmount.toLocaleString()]})]})]},a)})}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"ì˜ˆìƒ ì´ì•¡"}),e.jsxs("span",{className:"font-bold text-gray-900",children:["â‚©",w(r).toLocaleString()]})]})})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-300 rounded-lg",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"ìˆœìˆ˜ ê³µì‚¬ê¸ˆì•¡ (â‚©)"}),e.jsx("input",{type:"number",value:r.totalAmount||"",onChange:async t=>{const a=t.target.value===""?0:Number(t.target.value),s={...r,totalAmount:a};h(s);try{await N(r.id,s);const n=b.map(c=>c.id===r.id?s:c);v(n)}catch(n){console.error("Failed to update total amount:",n),p.error("ê¸ˆì•¡ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-lg font-bold focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"50000000",min:"0"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"ë¶€ê°€ì„¸ë¥¼ ì œì™¸í•œ ìˆœìˆ˜ ê³µì‚¬ê¸ˆì•¡"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-gray-700 mb-1",children:["ì´ í•©ê³„ (ë¶€ê°€ì„¸ ",r.vatType==="percentage"?`${r.vatPercentage??100}%`:`â‚©${(r.vatAmount||0).toLocaleString()}`," í¬í•¨)"]}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["â‚©",w(r).toLocaleString()]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-300 rounded-lg",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"ë¶€ê°€ì„¸ ì…ë ¥ ë°©ì‹"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:async()=>{const t={...r,vatType:"percentage"};h(t);try{await N(r.id,t);const a=b.map(s=>s.id===r.id?t:s);v(a)}catch(a){console.error("Failed to update VAT type:",a),p.error("ë¶€ê°€ì„¸ ë°©ì‹ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},className:`flex-1 px-3 py-2 text-sm border rounded-lg font-medium transition-colors ${r.vatType==="percentage"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"ë¹„ìœ¨ (%)"}),e.jsx("button",{type:"button",onClick:async()=>{const t={...r,vatType:"amount"};h(t);try{await N(r.id,t);const a=b.map(s=>s.id===r.id?t:s);v(a)}catch(a){console.error("Failed to update VAT type:",a),p.error("ë¶€ê°€ì„¸ ë°©ì‹ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},className:`flex-1 px-3 py-2 text-sm border rounded-lg font-medium transition-colors ${r.vatType==="amount"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"ê¸ˆì•¡ (â‚©)"})]}),r.vatType==="percentage"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"ë¶€ê°€ì„¸ ë°œí–‰ ë¹„ìœ¨ (%)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",value:r.vatPercentage,onChange:async t=>{const a=Number(t.target.value),s={...r,vatPercentage:a};h(s);try{await N(r.id,s);const n=b.map(c=>c.id===r.id?s:c);v(n)}catch(n){console.error("Failed to update VAT percentage:",n),p.error("ë¶€ê°€ì„¸ ë¹„ìœ¨ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"100",min:"0",max:"100"}),e.jsx("div",{className:"text-xs text-gray-600",children:e.jsxs("p",{children:["ë¶€ê°€ì„¸: â‚©",ye(r).toLocaleString()]})})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"0%: ë¶€ê°€ì„¸ ì—†ìŒ | 100%: ì „ì²´ ê¸ˆì•¡ì— ë¶€ê°€ì„¸ ë°œí–‰ | 50%: ì ˆë°˜ë§Œ ë¶€ê°€ì„¸ ë°œí–‰"})]}),r.vatType==="amount"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"ë¶€ê°€ì„¸ ë°œí–‰ ê¸ˆì•¡ (â‚©)"}),e.jsx("input",{type:"number",value:r.vatAmount,onChange:async t=>{const a=Number(t.target.value),s={...r,vatAmount:a};h(s);try{await N(r.id,s);const n=b.map(c=>c.id===r.id?s:c);v(n)}catch(n){console.error("Failed to update VAT amount:",n),p.error("ë¶€ê°€ì„¸ ê¸ˆì•¡ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"5000000",min:"0"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"ë¶€ê°€ì„¸ë¡œ ë°œí–‰í•  ê¸ˆì•¡ì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ìˆ˜ë ¹ê¸ˆì•¡"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["â‚©",D(r).toLocaleString()]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ì‹¤í–‰ë‚´ì—­ í•©ê³„"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["â‚©",z(r.project).toLocaleString()]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ì¶”ê°€ë‚´ì—­ í•©ê³„"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["â‚©",Y(r.project).toLocaleString()]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ë¯¸ìˆ˜ê¸ˆ"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["â‚©",S(r).toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"ì…ê¸ˆ ë‚´ì—­"}),e.jsx("button",{onClick:xe,className:"btn btn-primary btn-sm",children:"+ ì…ê¸ˆ ì¶”ê°€"})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"êµ¬ë¶„"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ê¸ˆì•¡"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ì…ê¸ˆì¼"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ë°©ë²•"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ë¹„ê³ "}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"ìˆ˜ì •"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.payments.map((t,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:t.type||"ë¯¸ë¶„ë¥˜"})}),e.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900",children:["â‚©",t.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:x(t.date,"yyyyë…„ MMì›” ddì¼")}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.method}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:t.notes||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>ue(a),className:"text-gray-600 hover:text-gray-700 transition-colors",children:e.jsx(ve,{className:"h-4 w-4"})})})]},a))})]})})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx("button",{onClick:async()=>{if(r&&window.confirm(`ì´ ê³µì‚¬ëŒ€ê¸ˆ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
ì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`))try{await ee(r.id),p.success("ê³µì‚¬ëŒ€ê¸ˆì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"),h(null)}catch(t){console.error("Failed to delete construction payment:",t),p.error("ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},className:"btn btn-outline text-red-600 hover:bg-red-50 hover:border-red-300",children:"ì‚­ì œ"}),e.jsx("button",{onClick:()=>h(null),className:"btn btn-outline",children:"ë‹«ê¸°"})]})]})}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"ìƒˆ í”„ë¡œì íŠ¸ ì¶”ê°€"}),e.jsx("button",{onClick:()=>L(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(G,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"í”„ë¡œì íŠ¸ ì„ íƒ *"}),e.jsxs("select",{value:o.projectId,onChange:t=>k({...o,projectId:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",children:[e.jsx("option",{value:"",children:"ì„ íƒí•˜ì„¸ìš”"}),f.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.client]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì´ ê³µì‚¬ê¸ˆì•¡ *"}),e.jsx("input",{type:"number",value:o.totalAmount||"",onChange:t=>k({...o,totalAmount:Number(t.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"50000000"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"ìˆœìˆ˜ ê³µì‚¬ê¸ˆì•¡ (ë¶€ê°€ì„¸ ì œì™¸)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ë¶€ê°€ì„¸ ì…ë ¥ ë°©ì‹ *"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>k({...o,vatType:"percentage"}),className:`flex-1 px-3 py-2 text-sm border rounded-lg font-medium transition-colors ${o.vatType==="percentage"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"ë¹„ìœ¨ (%)"}),e.jsx("button",{type:"button",onClick:()=>k({...o,vatType:"amount"}),className:`flex-1 px-3 py-2 text-sm border rounded-lg font-medium transition-colors ${o.vatType==="amount"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"ê¸ˆì•¡ (â‚©)"})]}),o.vatType==="percentage"&&e.jsxs("div",{children:[e.jsx("input",{type:"number",value:o.vatPercentage??100,onChange:t=>{const a=t.target.value===""?100:Number(t.target.value);k({...o,vatPercentage:a})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"100",min:"0",max:"100"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"0%: ë¶€ê°€ì„¸ ì—†ìŒ | 100%: ì „ì²´ ê¸ˆì•¡ì— ë¶€ê°€ì„¸ ë°œí–‰ | 50%: ì ˆë°˜ë§Œ ë¶€ê°€ì„¸ ë°œí–‰"})]}),o.vatType==="amount"&&e.jsxs("div",{children:[e.jsx("input",{type:"number",value:o.vatAmount??0,onChange:t=>{const a=t.target.value===""?0:Number(t.target.value);k({...o,vatAmount:a})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"5000000",min:"0"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"ë¶€ê°€ì„¸ë¡œ ë°œí–‰í•  ê¸ˆì•¡ì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”"})]}),o.totalAmount>0&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ì´ í•©ê³„ (ë¶€ê°€ì„¸ í¬í•¨)"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["â‚©",(o.totalAmount+(o.vatType==="percentage"?o.totalAmount*((o.vatPercentage??100)/100)*.1:o.vatAmount??0)).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["= ê³µì‚¬ê¸ˆì•¡ â‚©",o.totalAmount.toLocaleString()," + ë¶€ê°€ì„¸ â‚©",(o.vatType==="percentage"?o.totalAmount*((o.vatPercentage??100)/100)*.1:o.vatAmount??0).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>L(!1),className:"btn btn-outline",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:me,disabled:M,className:"btn btn-primary disabled:opacity-50",children:M?"ì €ì¥ ì¤‘...":"ì¶”ê°€"})]})]})}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:I!==null?"ì…ê¸ˆ ìˆ˜ì •":"ì…ê¸ˆ ì¶”ê°€"}),e.jsx("button",{onClick:()=>{E(!1),B(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(G,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"êµ¬ë¶„ * (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)"}),e.jsx("div",{className:"space-y-2",children:["ê³„ì•½ê¸ˆ","ì°©ìˆ˜ê¸ˆ","ì¤‘ë„ê¸ˆ","ì”ê¸ˆ","ì¶”ê°€ê¸ˆ"].map(t=>{const a=U[t];return e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.types.includes(t),onChange:s=>{let n;s.target.checked?n=[...l.types,t]:n=l.types.filter(j=>j!==t);const c=O(n),d=V(c),g=de(n);A({...l,types:n,percentage:c,amount:d,date:g||l.date})},className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-600"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[t,e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",a,"%)"]}),t==="ê³„ì•½ê¸ˆ"&&e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(ë‚ ì§œ ì§ì ‘ ì…ë ¥)"}),t==="ì°©ìˆ˜ê¸ˆ"&&e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(ê³µì‚¬ ì‹œì‘ 1ì£¼ì¼ ì „)"}),t==="ì¤‘ë„ê¸ˆ"&&e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(ê³µì‚¬ ì¤‘ê°„)"}),t==="ì”ê¸ˆ"&&e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(ê³µì‚¬ ì¢…ë£Œì¼)"}),t==="ì¶”ê°€ê¸ˆ"&&e.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(ê³µì‚¬ ì¢…ë£Œì¼)"})]})]},t)})}),l.types.length>0&&e.jsx("div",{className:"mt-2 p-2 bg-gray-50 border border-gray-200 rounded",children:e.jsxs("p",{className:"text-xs text-gray-700",children:["ì„ íƒëœ êµ¬ë¶„: ",l.types.join(" + ")," = ì´ ",l.percentage,"%"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ê²°ì œ ë°©ë²• *"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>A({...l,method:"ê³„ì¢Œì´ì²´"}),className:`flex-1 px-4 py-3 border-2 rounded-lg font-medium transition-colors ${l.method==="ê³„ì¢Œì´ì²´"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"ê³„ì¢Œì´ì²´"}),e.jsx("button",{type:"button",onClick:()=>A({...l,method:"í˜„ê¸ˆ"}),className:`flex-1 px-4 py-3 border-2 rounded-lg font-medium transition-colors ${l.method==="í˜„ê¸ˆ"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:"í˜„ê¸ˆ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ê³„ì•½ê¸ˆì•¡ ëŒ€ë¹„ ë¹„ìœ¨ (%)"}),e.jsx("input",{type:"number",value:l.percentage||"",onChange:t=>{const a=Number(t.target.value),s=V(a);A({...l,percentage:a,amount:s})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"10",min:"0",max:"100"}),r&&l.percentage>0&&e.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"ê³„ì‚° ë°©ì‹"}),e.jsxs("p",{className:"text-xs text-gray-900",children:["ì´ í•©ê³„(ë¶€ê°€ì„¸ ",r.vatPercentage,"% í¬í•¨) â‚©",w(r).toLocaleString()," Ã— ",l.percentage,"%"]}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 mt-1",children:["= â‚©",V(l.percentage).toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì…ê¸ˆ ê¸ˆì•¡ *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:l.amount||"",onChange:t=>A({...l,amount:Number(t.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"5000000",min:"0"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:l.percentage>0?"ìœ„ì˜ ë¹„ìœ¨ì— ë”°ë¼ ìë™ ê³„ì‚°ë˜ì—ˆì§€ë§Œ ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥í•©ë‹ˆë‹¤":"ì…ê¸ˆ ê¸ˆì•¡ì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì…ê¸ˆì¼ *"}),e.jsx("input",{type:"date",value:l.date,onChange:t=>A({...l,date:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"êµ¬ë¶„ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ë‚ ì§œê°€ ì…ë ¥ë˜ë©°, ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥í•©ë‹ˆë‹¤"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ë¹„ê³ "}),e.jsx("textarea",{value:l.notes,onChange:t=>A({...l,notes:t.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"ì¶”ê°€ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”"})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx("div",{children:I!==null&&e.jsx("button",{onClick:async()=>{if(r&&window.confirm("ì´ ì…ê¸ˆ ë‚´ì—­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{const t=r.payments.filter((n,c)=>c!==I),a={...r,payments:t};await N(r.id,{payments:t}),h(a);const s=b.map(n=>n.id===r.id?a:n);v(s),E(!1),B(null),p.success("ì…ê¸ˆ ë‚´ì—­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤")}catch(t){console.error("Failed to delete payment:",t),p.error("ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")}},className:"btn btn-outline text-red-600 hover:bg-red-50 hover:border-red-300",children:"ì‚­ì œ"})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{E(!1),B(null)},className:"btn btn-outline",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:pe,disabled:W,className:"btn btn-primary disabled:opacity-50",children:W?"ì €ì¥ ì¤‘...":I!==null?"ìˆ˜ì •":"ì¶”ê°€"})]})]})]})}),ne&&e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
            @media print {
              * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
              }
              /* ì§ì¸ ì´ë¯¸ì§€ê°€ ì¸ì‡„ ì‹œì—ë„ ë³´ì´ë„ë¡ ë³´ì¥ */
              img[alt="ì§ì¸"] {
                display: inline-block !important;
                visibility: visible !important;
                opacity: 0.8 !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
              }
            }
            @page {
              size: A4;
              margin: 20mm;
            }
          `}),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 print:bg-white print:relative print:p-0",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto print:shadow-none print:max-w-none print:max-h-none",children:e.jsxs("div",{className:"p-6 print:p-8",children:[e.jsx("div",{className:"flex items-center justify-end mb-6 print:hidden",children:e.jsx("button",{onClick:()=>F(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(G,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"space-y-6 print:space-y-0",children:[e.jsxs("div",{className:"border border-black p-8 bg-white print:border print:p-12",children:[e.jsx("div",{className:"p-3 mb-8",children:e.jsx("h3",{className:"text-center text-2xl font-bold",children:H==="cash"?"í˜„ê¸ˆìˆ˜ë ¹ì¦":"ì´ì²´í™•ì¸ì¦"})}),e.jsxs("table",{className:"w-full mb-8 border-collapse",children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"30%"}}),e.jsx("col",{style:{width:"70%"}})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border border-black",children:[e.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:"í”„ë¡œì íŠ¸ëª…"}),e.jsxs("td",{className:"py-3 px-4 print:py-3 text-center",children:[e.jsx("span",{className:"print:hidden",children:i.project}),e.jsx("input",{type:"text",value:i.project,className:"hidden print:block w-full bg-transparent border-none outline-none p-0 text-center",readOnly:!0})]})]}),e.jsxs("tr",{className:"border border-t-0 border-black",children:[e.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:"ê³µì‚¬ê¸°ê°„"}),e.jsx("td",{className:"py-3 px-4 text-center",children:i.startDate&&i.endDate?e.jsxs("span",{children:[x(new Date(i.startDate),"yyyy.MM.dd")," ~ ",x(new Date(i.endDate),"yyyy.MM.dd")]}):e.jsx("span",{className:"text-gray-400 print:hidden",children:"-"})})]}),e.jsxs("tr",{className:"border border-t-0 border-black",children:[e.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:"ì´ê³µì‚¬ê¸ˆì•¡"}),e.jsxs("td",{className:"py-3 px-4 text-right pr-4",children:[e.jsxs("span",{className:"print:hidden flex items-center justify-end gap-1",children:[e.jsx("input",{type:"text",value:i.totalContractAmount.toLocaleString(),onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,""),s=a?parseInt(a):0;C({...i,totalContractAmount:s})},placeholder:"ê¸ˆì•¡ ì…ë ¥",className:"w-full text-right border border-gray-300 rounded px-2 py-1"}),e.jsx("span",{children:"ì›"})]}),e.jsxs("span",{className:"hidden print:inline",children:[i.totalContractAmount.toLocaleString()," ì›"]})]})]}),e.jsxs("tr",{className:"border border-t-0 border-black",children:[e.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:"ì´ì „ìˆ˜ë ¹ê¸ˆì•¡"}),e.jsxs("td",{className:"py-3 px-4 text-right pr-4",children:[e.jsxs("span",{className:"print:hidden flex items-center justify-end gap-1",children:[e.jsx("input",{type:"text",value:i.previousAmount.toLocaleString(),onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,""),s=a?parseInt(a):0;C({...i,previousAmount:s})},placeholder:"ê¸ˆì•¡ ì…ë ¥",className:"w-full text-right border border-gray-300 rounded px-2 py-1"}),e.jsx("span",{children:"ì›"})]}),e.jsxs("span",{className:"hidden print:inline",children:[i.previousAmount.toLocaleString()," ì›"]})]})]}),e.jsxs("tr",{className:"border border-t-0 border-black",children:[e.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:"ë‹¹ì¼ìˆ˜ë ¹ê¸ˆì•¡"}),e.jsxs("td",{className:"py-3 px-4 text-right pr-4",children:[e.jsxs("span",{className:"print:hidden flex items-center justify-end gap-1",children:[e.jsx("input",{type:"text",value:i.amount,onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,""),s=a?parseInt(a).toLocaleString():"";C({...i,amount:s})},placeholder:"ê¸ˆì•¡ ì…ë ¥",className:"w-full text-right border border-gray-300 rounded px-2 py-1"}),e.jsx("span",{children:"ì›"})]}),e.jsxs("span",{className:"hidden print:inline",children:[i.amount," ì›"]})]})]}),e.jsxs("tr",{className:"border border-t-0 border-black",children:[e.jsxs("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:["ì”ì—¬ê¸ˆì•¡ ",e.jsx("span",{className:"text-xs",children:"(ì¶”ê°€ê¸ˆì•¡ ì œì™¸)"})]}),e.jsxs("td",{className:"py-3 px-4 text-right pr-4",children:[e.jsxs("span",{className:"print:hidden flex items-center justify-end gap-1",children:[e.jsx("input",{type:"text",value:i.remainingAmount.toLocaleString(),onChange:t=>{const a=t.target.value.replace(/[^0-9]/g,""),s=a?parseInt(a):0;C({...i,remainingAmount:s})},placeholder:"ê¸ˆì•¡ ì…ë ¥",className:"w-full text-right border border-gray-300 rounded px-2 py-1"}),e.jsx("span",{children:"ì›"})]}),e.jsxs("span",{className:"hidden print:inline",children:[i.remainingAmount.toLocaleString()," ì›"]})]})]})]})]}),e.jsx("div",{className:"text-center mb-12",children:e.jsxs("p",{className:"text-base",children:["* ",H==="cash"?"ìœ„ì™€ ê°™ì´ í˜„ê¸ˆìœ¼ë¡œ ì§€ê¸‰ ë°›ì•˜ìŒì„ í™•ì¸ í•©ë‹ˆë‹¤.":"ìœ„ì™€ ê°™ì´ ê³„ì¢Œì´ì²´ë¡œ ì§€ê¸‰ ë°›ì•˜ìŒì„ í™•ì¸ í•©ë‹ˆë‹¤."]})}),e.jsx("div",{className:"text-center mb-12",children:e.jsxs("p",{className:"text-base",children:[e.jsx("span",{className:"print:hidden",children:e.jsx("input",{type:"date",value:i.date,onChange:t=>C({...i,date:t.target.value}),className:"border border-gray-300 rounded px-2 py-1"})}),e.jsx("span",{className:"hidden print:inline",children:x(new Date(i.date),"yyyyë…„ MMì›” ddì¼")})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center border-b border-gray-300 pb-2",children:[e.jsx("span",{className:"font-medium",children:"[ìˆ˜ë ¹ì¸]"}),e.jsx("span",{children:"ì—ì´ì¹˜ë¸Œì´ë© ëŒ€í‘œ"}),e.jsx("span",{className:"text-xl font-bold text-right pr-4",children:"ê¹€ ìƒ ì¤€"}),e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-sm",style:{marginRight:"20px"},children:"(ì¸)"}),e.jsx("img",{src:Ne,alt:"ì§ì¸",style:{display:"inline-block",width:"56px",height:"56px",marginLeft:"-45px",marginRight:"10px",opacity:.8,printColorAdjust:"exact",WebkitPrintColorAdjust:"exact",colorAdjust:"exact"}})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center border-b border-gray-300 pb-2",children:[e.jsx("span",{className:"font-medium",children:"[ì§€ê¸‰ì¸]"}),e.jsx("span",{children:i.project.split("_")[0]}),e.jsx("span",{className:"text-xl text-right pr-4",children:"Â "}),e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("span",{className:"text-sm",style:{marginRight:"20px"},children:"(ì¸)"}),e.jsx("div",{style:{display:"inline-block",width:"56px",height:"56px",marginLeft:"-45px",marginRight:"10px",visibility:"hidden"}})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 print:hidden",children:[e.jsx("button",{onClick:()=>{if(!i.amount){p.error("ìˆ˜ë ¹ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");return}window.print(),p.success("í˜„ê¸ˆìˆ˜ë ¹ì¦ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤")},className:"flex-1 px-4 py-3 bg-gray-800 text-white font-medium rounded-lg hover:bg-gray-900 transition-colors",children:"ì¸ì‡„í•˜ê¸°"}),e.jsx("button",{onClick:()=>F(!1),className:"px-4 py-3 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:"ì·¨ì†Œ"})]})]})]})})})]})]})};export{De as default};
