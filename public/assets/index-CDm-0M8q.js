var av=e=>{throw TypeError(e)};var RE=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var jh=(e,t,r)=>t.has(e)||av("Cannot "+r);var be=(e,t,r)=>(jh(e,t,"read from private field"),r?r.call(e):t.get(e)),nt=(e,t,r)=>t.has(e)?av("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ue=(e,t,r,n)=>(jh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Nr=(e,t,r)=>(jh(e,t,"access private method"),r);var Fu=(e,t,r,n)=>({set _(s){Ue(e,t,s,r)},get _(){return be(e,t,n)}});var qne=RE((hse,rf)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Oj={exports:{}},im={},Ij={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nu=Symbol.for("react.element"),OE=Symbol.for("react.portal"),IE=Symbol.for("react.fragment"),LE=Symbol.for("react.strict_mode"),$E=Symbol.for("react.profiler"),FE=Symbol.for("react.provider"),BE=Symbol.for("react.context"),WE=Symbol.for("react.forward_ref"),HE=Symbol.for("react.suspense"),UE=Symbol.for("react.memo"),zE=Symbol.for("react.lazy"),iv=Symbol.iterator;function VE(e){return e===null||typeof e!="object"?null:(e=iv&&e[iv]||e["@@iterator"],typeof e=="function"?e:null)}var Lj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$j=Object.assign,Fj={};function Qo(e,t,r){this.props=e,this.context=t,this.refs=Fj,this.updater=r||Lj}Qo.prototype.isReactComponent={};Qo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bj(){}Bj.prototype=Qo.prototype;function ky(e,t,r){this.props=e,this.context=t,this.refs=Fj,this.updater=r||Lj}var Dy=ky.prototype=new Bj;Dy.constructor=ky;$j(Dy,Qo.prototype);Dy.isPureReactComponent=!0;var ov=Array.isArray,Wj=Object.prototype.hasOwnProperty,Cy={current:null},Hj={key:!0,ref:!0,__self:!0,__source:!0};function Uj(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Wj.call(t,n)&&!Hj.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:nu,type:e,key:i,ref:o,props:s,_owner:Cy.current}}function YE(e,t){return{$$typeof:nu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ey(e){return typeof e=="object"&&e!==null&&e.$$typeof===nu}function qE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var lv=/\/+/g;function Sh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qE(""+e.key):t.toString(36)}function jd(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case nu:case OE:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Sh(o,0):n,ov(s)?(r="",e!=null&&(r=e.replace(lv,"$&/")+"/"),jd(s,t,r,"",function(u){return u})):s!=null&&(Ey(s)&&(s=YE(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lv,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",ov(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Sh(i,l);o+=jd(i,t,r,c,s)}else if(c=VE(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Sh(i,l++),o+=jd(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bu(e,t,r){if(e==null)return e;var n=[],s=0;return jd(e,n,"","",function(i){return t.call(r,i,s++)}),n}function KE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Hr={current:null},Sd={transition:null},GE={ReactCurrentDispatcher:Hr,ReactCurrentBatchConfig:Sd,ReactCurrentOwner:Cy};function zj(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:Bu,forEach:function(e,t,r){Bu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Bu(e,function(){t++}),t},toArray:function(e){return Bu(e,function(t){return t})||[]},only:function(e){if(!Ey(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ze.Component=Qo;Ze.Fragment=IE;Ze.Profiler=$E;Ze.PureComponent=ky;Ze.StrictMode=LE;Ze.Suspense=HE;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GE;Ze.act=zj;Ze.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=$j({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Cy.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Wj.call(t,c)&&!Hj.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:nu,type:e.type,key:s,ref:i,props:n,_owner:o}};Ze.createContext=function(e){return e={$$typeof:BE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FE,_context:e},e.Consumer=e};Ze.createElement=Uj;Ze.createFactory=function(e){var t=Uj.bind(null,e);return t.type=e,t};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(e){return{$$typeof:WE,render:e}};Ze.isValidElement=Ey;Ze.lazy=function(e){return{$$typeof:zE,_payload:{_status:-1,_result:e},_init:KE}};Ze.memo=function(e,t){return{$$typeof:UE,type:e,compare:t===void 0?null:t}};Ze.startTransition=function(e){var t=Sd.transition;Sd.transition={};try{e()}finally{Sd.transition=t}};Ze.unstable_act=zj;Ze.useCallback=function(e,t){return Hr.current.useCallback(e,t)};Ze.useContext=function(e){return Hr.current.useContext(e)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(e){return Hr.current.useDeferredValue(e)};Ze.useEffect=function(e,t){return Hr.current.useEffect(e,t)};Ze.useId=function(){return Hr.current.useId()};Ze.useImperativeHandle=function(e,t,r){return Hr.current.useImperativeHandle(e,t,r)};Ze.useInsertionEffect=function(e,t){return Hr.current.useInsertionEffect(e,t)};Ze.useLayoutEffect=function(e,t){return Hr.current.useLayoutEffect(e,t)};Ze.useMemo=function(e,t){return Hr.current.useMemo(e,t)};Ze.useReducer=function(e,t,r){return Hr.current.useReducer(e,t,r)};Ze.useRef=function(e){return Hr.current.useRef(e)};Ze.useState=function(e){return Hr.current.useState(e)};Ze.useSyncExternalStore=function(e,t,r){return Hr.current.useSyncExternalStore(e,t,r)};Ze.useTransition=function(){return Hr.current.useTransition()};Ze.version="18.3.1";Ij.exports=Ze;var b=Ij.exports;const z=Wr(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE=b,XE=Symbol.for("react.element"),JE=Symbol.for("react.fragment"),ZE=Object.prototype.hasOwnProperty,eT=QE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tT={key:!0,ref:!0,__self:!0,__source:!0};function Vj(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)ZE.call(t,n)&&!tT.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:XE,type:e,key:i,ref:o,props:s,_owner:eT.current}}im.Fragment=JE;im.jsx=Vj;im.jsxs=Vj;Oj.exports=im;var a=Oj.exports,Yj={exports:{}},dn={},qj={exports:{}},Kj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ie,V){var ge=ie.length;ie.push(V);e:for(;0<ge;){var G=ge-1>>>1,U=ie[G];if(0<s(U,V))ie[G]=V,ie[ge]=U,ge=G;else break e}}function r(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var V=ie[0],ge=ie.pop();if(ge!==V){ie[0]=ge;e:for(var G=0,U=ie.length,L=U>>>1;G<L;){var Y=2*(G+1)-1,ue=ie[Y],ye=Y+1,Ne=ie[ye];if(0>s(ue,ge))ye<U&&0>s(Ne,ue)?(ie[G]=Ne,ie[ye]=ge,G=ye):(ie[G]=ue,ie[Y]=ge,G=Y);else if(ye<U&&0>s(Ne,ge))ie[G]=Ne,ie[ye]=ge,G=ye;else break e}}return V}function s(ie,V){var ge=ie.sortIndex-V.sortIndex;return ge!==0?ge:ie.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,y=!1,j=!1,p=!1,k=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(ie){for(var V=r(u);V!==null;){if(V.callback===null)n(u);else if(V.startTime<=ie)n(u),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(u)}}function x(ie){if(p=!1,S(ie),!j)if(r(c)!==null)j=!0,te(T);else{var V=r(u);V!==null&&xe(x,V.startTime-ie)}}function T(ie,V){j=!1,p&&(p=!1,h(M),M=-1),y=!0;var ge=m;try{for(S(V),f=r(c);f!==null&&(!(f.expirationTime>V)||ie&&!K());){var G=f.callback;if(typeof G=="function"){f.callback=null,m=f.priorityLevel;var U=G(f.expirationTime<=V);V=e.unstable_now(),typeof U=="function"?f.callback=U:f===r(c)&&n(c),S(V)}else n(c);f=r(c)}if(f!==null)var L=!0;else{var Y=r(u);Y!==null&&xe(x,Y.startTime-V),L=!1}return L}finally{f=null,m=ge,y=!1}}var E=!1,_=null,M=-1,O=5,R=-1;function K(){return!(e.unstable_now()-R<O)}function Q(){if(_!==null){var ie=e.unstable_now();R=ie;var V=!0;try{V=_(!0,ie)}finally{V?ne():(E=!1,_=null)}}else E=!1}var ne;if(typeof v=="function")ne=function(){v(Q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,fe=Z.port2;Z.port1.onmessage=Q,ne=function(){fe.postMessage(null)}}else ne=function(){k(Q,0)};function te(ie){_=ie,E||(E=!0,ne())}function xe(ie,V){M=k(function(){ie(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){j||y||(j=!0,te(T))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(ie){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var ge=m;m=V;try{return ie()}finally{m=ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,V){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ge=m;m=ie;try{return V()}finally{m=ge}},e.unstable_scheduleCallback=function(ie,V,ge){var G=e.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?G+ge:G):ge=G,ie){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ge+U,ie={id:d++,callback:V,priorityLevel:ie,startTime:ge,expirationTime:U,sortIndex:-1},ge>G?(ie.sortIndex=ge,t(u,ie),r(c)===null&&ie===r(u)&&(p?(h(M),M=-1):p=!0,xe(x,ge-G))):(ie.sortIndex=U,t(c,ie),j||y||(j=!0,te(T))),ie},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(ie){var V=m;return function(){var ge=m;m=V;try{return ie.apply(this,arguments)}finally{m=ge}}}})(Kj);qj.exports=Kj;var rT=qj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT=b,cn=rT;function Ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gj=new Set,fc={};function Hi(e,t){Ro(e,t),Ro(e+"Capture",t)}function Ro(e,t){for(fc[e]=t,e=0;e<t.length;e++)Gj.add(t[e])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rp=Object.prototype.hasOwnProperty,sT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cv={},uv={};function aT(e){return Rp.call(uv,e)?!0:Rp.call(cv,e)?!1:sT.test(e)?uv[e]=!0:(cv[e]=!0,!1)}function iT(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oT(e,t,r,n){if(t===null||typeof t>"u"||iT(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ur(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vr[e]=new Ur(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vr[t]=new Ur(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vr[e]=new Ur(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vr[e]=new Ur(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vr[e]=new Ur(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vr[e]=new Ur(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vr[e]=new Ur(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vr[e]=new Ur(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vr[e]=new Ur(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ty=/[\-:]([a-z])/g;function Ay(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ty,Ay);vr[t]=new Ur(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ty,Ay);vr[t]=new Ur(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ty,Ay);vr[t]=new Ur(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vr[e]=new Ur(e,1,!1,e.toLowerCase(),null,!1,!1)});vr.xlinkHref=new Ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vr[e]=new Ur(e,1,!1,e.toLowerCase(),null,!0,!0)});function _y(e,t,r,n){var s=vr.hasOwnProperty(t)?vr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oT(t,r,s,n)&&(r=null),n||s===null?aT(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var la=nT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wu=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),Py=Symbol.for("react.strict_mode"),Op=Symbol.for("react.profiler"),Qj=Symbol.for("react.provider"),Xj=Symbol.for("react.context"),My=Symbol.for("react.forward_ref"),Ip=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),Ry=Symbol.for("react.memo"),va=Symbol.for("react.lazy"),Jj=Symbol.for("react.offscreen"),dv=Symbol.iterator;function wl(e){return e===null||typeof e!="object"?null:(e=dv&&e[dv]||e["@@iterator"],typeof e=="function"?e:null)}var $t=Object.assign,kh;function Fl(e){if(kh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);kh=t&&t[1]||""}return`
`+kh+e}var Dh=!1;function Ch(e,t){if(!e||Dh)return"";Dh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Dh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fl(e):""}function lT(e){switch(e.tag){case 5:return Fl(e.type);case 16:return Fl("Lazy");case 13:return Fl("Suspense");case 19:return Fl("SuspenseList");case 0:case 2:case 15:return e=Ch(e.type,!1),e;case 11:return e=Ch(e.type.render,!1),e;case 1:return e=Ch(e.type,!0),e;default:return""}}function $p(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case to:return"Fragment";case eo:return"Portal";case Op:return"Profiler";case Py:return"StrictMode";case Ip:return"Suspense";case Lp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xj:return(e.displayName||"Context")+".Consumer";case Qj:return(e._context.displayName||"Context")+".Provider";case My:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ry:return t=e.displayName||null,t!==null?t:$p(e.type)||"Memo";case va:t=e._payload,e=e._init;try{return $p(e(t))}catch{}}return null}function cT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $p(t);case 8:return t===Py?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ya(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uT(e){var t=Zj(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hu(e){e._valueTracker||(e._valueTracker=uT(e))}function e1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Zj(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function nf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fp(e,t){var r=t.checked;return $t({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function fv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ya(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function t1(e,t){t=t.checked,t!=null&&_y(e,"checked",t,!1)}function Bp(e,t){t1(e,t);var r=Ya(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wp(e,t.type,r):t.hasOwnProperty("defaultValue")&&Wp(e,t.type,Ya(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Wp(e,t,r){(t!=="number"||nf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Bl=Array.isArray;function ho(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ya(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Hp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return $t({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ae(92));if(Bl(r)){if(1<r.length)throw Error(Ae(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ya(r)}}function r1(e,t){var r=Ya(t.value),n=Ya(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function pv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function n1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?n1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Uu,s1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Uu=Uu||document.createElement("div"),Uu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Uu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dT=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(e){dT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ql[t]=ql[e]})});function a1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ql.hasOwnProperty(e)&&ql[e]?(""+t).trim():t+"px"}function i1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=a1(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var fT=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zp(e,t){if(t){if(fT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ae(62))}}function Vp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yp=null;function Oy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qp=null,po=null,go=null;function gv(e){if(e=iu(e)){if(typeof qp!="function")throw Error(Ae(280));var t=e.stateNode;t&&(t=dm(t),qp(e.stateNode,e.type,t))}}function o1(e){po?go?go.push(e):go=[e]:po=e}function l1(){if(po){var e=po,t=go;if(go=po=null,gv(e),t)for(e=0;e<t.length;e++)gv(t[e])}}function c1(e,t){return e(t)}function u1(){}var Eh=!1;function d1(e,t,r){if(Eh)return e(t,r);Eh=!0;try{return c1(e,t,r)}finally{Eh=!1,(po!==null||go!==null)&&(u1(),l1())}}function hc(e,t){var r=e.stateNode;if(r===null)return null;var n=dm(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ae(231,t,typeof r));return r}var Kp=!1;if(Zs)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Kp=!1}function mT(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Kl=!1,sf=null,af=!1,Gp=null,hT={onError:function(e){Kl=!0,sf=e}};function pT(e,t,r,n,s,i,o,l,c){Kl=!1,sf=null,mT.apply(hT,arguments)}function gT(e,t,r,n,s,i,o,l,c){if(pT.apply(this,arguments),Kl){if(Kl){var u=sf;Kl=!1,sf=null}else throw Error(Ae(198));af||(af=!0,Gp=u)}}function Ui(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function f1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yv(e){if(Ui(e)!==e)throw Error(Ae(188))}function yT(e){var t=e.alternate;if(!t){if(t=Ui(e),t===null)throw Error(Ae(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return yv(s),e;if(i===n)return yv(s),t;i=i.sibling}throw Error(Ae(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(Ae(189))}}if(r.alternate!==n)throw Error(Ae(190))}if(r.tag!==3)throw Error(Ae(188));return r.stateNode.current===r?e:t}function m1(e){return e=yT(e),e!==null?h1(e):null}function h1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=h1(e);if(t!==null)return t;e=e.sibling}return null}var p1=cn.unstable_scheduleCallback,xv=cn.unstable_cancelCallback,xT=cn.unstable_shouldYield,vT=cn.unstable_requestPaint,Yt=cn.unstable_now,bT=cn.unstable_getCurrentPriorityLevel,Iy=cn.unstable_ImmediatePriority,g1=cn.unstable_UserBlockingPriority,of=cn.unstable_NormalPriority,wT=cn.unstable_LowPriority,y1=cn.unstable_IdlePriority,om=null,vs=null;function NT(e){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(om,e,void 0,(e.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:kT,jT=Math.log,ST=Math.LN2;function kT(e){return e>>>=0,e===0?32:31-(jT(e)/ST|0)|0}var zu=64,Vu=4194304;function Wl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Wl(l):(i&=o,i!==0&&(n=Wl(i)))}else o=r&~s,o!==0?n=Wl(o):i!==0&&(n=Wl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Vn(t),s=1<<r,n|=e[r],t&=~s;return n}function DT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CT(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Vn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=DT(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Qp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function x1(){var e=zu;return zu<<=1,!(zu&4194240)&&(zu=64),e}function Th(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function su(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vn(t),e[t]=r}function ET(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Vn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Ly(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Vn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var yt=0;function v1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var b1,$y,w1,N1,j1,Xp=!1,Yu=[],Ia=null,La=null,$a=null,pc=new Map,gc=new Map,Na=[],TT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vv(e,t){switch(e){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":pc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(t.pointerId)}}function jl(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=iu(t),t!==null&&$y(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function AT(e,t,r,n,s){switch(t){case"focusin":return Ia=jl(Ia,e,t,r,n,s),!0;case"dragenter":return La=jl(La,e,t,r,n,s),!0;case"mouseover":return $a=jl($a,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return pc.set(i,jl(pc.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,gc.set(i,jl(gc.get(i)||null,e,t,r,n,s)),!0}return!1}function S1(e){var t=ui(e.target);if(t!==null){var r=Ui(t);if(r!==null){if(t=r.tag,t===13){if(t=f1(r),t!==null){e.blockedOn=t,j1(e.priority,function(){w1(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Yp=n,r.target.dispatchEvent(n),Yp=null}else return t=iu(r),t!==null&&$y(t),e.blockedOn=r,!1;t.shift()}return!0}function bv(e,t,r){kd(e)&&r.delete(t)}function _T(){Xp=!1,Ia!==null&&kd(Ia)&&(Ia=null),La!==null&&kd(La)&&(La=null),$a!==null&&kd($a)&&($a=null),pc.forEach(bv),gc.forEach(bv)}function Sl(e,t){e.blockedOn===t&&(e.blockedOn=null,Xp||(Xp=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,_T)))}function yc(e){function t(s){return Sl(s,e)}if(0<Yu.length){Sl(Yu[0],e);for(var r=1;r<Yu.length;r++){var n=Yu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ia!==null&&Sl(Ia,e),La!==null&&Sl(La,e),$a!==null&&Sl($a,e),pc.forEach(t),gc.forEach(t),r=0;r<Na.length;r++)n=Na[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Na.length&&(r=Na[0],r.blockedOn===null);)S1(r),r.blockedOn===null&&Na.shift()}var yo=la.ReactCurrentBatchConfig,cf=!0;function PT(e,t,r,n){var s=yt,i=yo.transition;yo.transition=null;try{yt=1,Fy(e,t,r,n)}finally{yt=s,yo.transition=i}}function MT(e,t,r,n){var s=yt,i=yo.transition;yo.transition=null;try{yt=4,Fy(e,t,r,n)}finally{yt=s,yo.transition=i}}function Fy(e,t,r,n){if(cf){var s=Jp(e,t,r,n);if(s===null)Fh(e,t,n,uf,r),vv(e,n);else if(AT(s,e,t,r,n))n.stopPropagation();else if(vv(e,n),t&4&&-1<TT.indexOf(e)){for(;s!==null;){var i=iu(s);if(i!==null&&b1(i),i=Jp(e,t,r,n),i===null&&Fh(e,t,n,uf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Fh(e,t,n,null,r)}}var uf=null;function Jp(e,t,r,n){if(uf=null,e=Oy(n),e=ui(e),e!==null)if(t=Ui(e),t===null)e=null;else if(r=t.tag,r===13){if(e=f1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return uf=e,null}function k1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bT()){case Iy:return 1;case g1:return 4;case of:case wT:return 16;case y1:return 536870912;default:return 16}default:return 16}}var Pa=null,By=null,Dd=null;function D1(){if(Dd)return Dd;var e,t=By,r=t.length,n,s="value"in Pa?Pa.value:Pa.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Dd=s.slice(e,1<n?1-n:void 0)}function Cd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qu(){return!0}function wv(){return!1}function fn(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qu:wv,this.isPropagationStopped=wv,this}return $t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qu)},persist:function(){},isPersistent:qu}),t}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=fn(Xo),au=$t({},Xo,{view:0,detail:0}),RT=fn(au),Ah,_h,kl,lm=$t({},au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kl&&(kl&&e.type==="mousemove"?(Ah=e.screenX-kl.screenX,_h=e.screenY-kl.screenY):_h=Ah=0,kl=e),Ah)},movementY:function(e){return"movementY"in e?e.movementY:_h}}),Nv=fn(lm),OT=$t({},lm,{dataTransfer:0}),IT=fn(OT),LT=$t({},au,{relatedTarget:0}),Ph=fn(LT),$T=$t({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),FT=fn($T),BT=$t({},Xo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),WT=fn(BT),HT=$t({},Xo,{data:0}),jv=fn(HT),UT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=VT[e])?!!t[e]:!1}function Hy(){return YT}var qT=$t({},au,{key:function(e){if(e.key){var t=UT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(e){return e.type==="keypress"?Cd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),KT=fn(qT),GT=$t({},lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sv=fn(GT),QT=$t({},au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),XT=fn(QT),JT=$t({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZT=fn(JT),eA=$t({},lm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tA=fn(eA),rA=[9,13,27,32],Uy=Zs&&"CompositionEvent"in window,Gl=null;Zs&&"documentMode"in document&&(Gl=document.documentMode);var nA=Zs&&"TextEvent"in window&&!Gl,C1=Zs&&(!Uy||Gl&&8<Gl&&11>=Gl),kv=" ",Dv=!1;function E1(e,t){switch(e){case"keyup":return rA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ro=!1;function sA(e,t){switch(e){case"compositionend":return T1(t);case"keypress":return t.which!==32?null:(Dv=!0,kv);case"textInput":return e=t.data,e===kv&&Dv?null:e;default:return null}}function aA(e,t){if(ro)return e==="compositionend"||!Uy&&E1(e,t)?(e=D1(),Dd=By=Pa=null,ro=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return C1&&t.locale!=="ko"?null:t.data;default:return null}}var iA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iA[e.type]:t==="textarea"}function A1(e,t,r,n){o1(n),t=df(t,"onChange"),0<t.length&&(r=new Wy("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ql=null,xc=null;function oA(e){W1(e,0)}function cm(e){var t=ao(e);if(e1(t))return e}function lA(e,t){if(e==="change")return t}var _1=!1;if(Zs){var Mh;if(Zs){var Rh="oninput"in document;if(!Rh){var Ev=document.createElement("div");Ev.setAttribute("oninput","return;"),Rh=typeof Ev.oninput=="function"}Mh=Rh}else Mh=!1;_1=Mh&&(!document.documentMode||9<document.documentMode)}function Tv(){Ql&&(Ql.detachEvent("onpropertychange",P1),xc=Ql=null)}function P1(e){if(e.propertyName==="value"&&cm(xc)){var t=[];A1(t,xc,e,Oy(e)),d1(oA,t)}}function cA(e,t,r){e==="focusin"?(Tv(),Ql=t,xc=r,Ql.attachEvent("onpropertychange",P1)):e==="focusout"&&Tv()}function uA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cm(xc)}function dA(e,t){if(e==="click")return cm(t)}function fA(e,t){if(e==="input"||e==="change")return cm(t)}function mA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qn=typeof Object.is=="function"?Object.is:mA;function vc(e,t){if(qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Rp.call(t,s)||!qn(e[s],t[s]))return!1}return!0}function Av(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _v(e,t){var r=Av(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Av(r)}}function M1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?M1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function R1(){for(var e=window,t=nf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=nf(e.document)}return t}function zy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hA(e){var t=R1(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&M1(r.ownerDocument.documentElement,r)){if(n!==null&&zy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=_v(r,i);var o=_v(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pA=Zs&&"documentMode"in document&&11>=document.documentMode,no=null,Zp=null,Xl=null,eg=!1;function Pv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;eg||no==null||no!==nf(n)||(n=no,"selectionStart"in n&&zy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xl&&vc(Xl,n)||(Xl=n,n=df(Zp,"onSelect"),0<n.length&&(t=new Wy("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=no)))}function Ku(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var so={animationend:Ku("Animation","AnimationEnd"),animationiteration:Ku("Animation","AnimationIteration"),animationstart:Ku("Animation","AnimationStart"),transitionend:Ku("Transition","TransitionEnd")},Oh={},O1={};Zs&&(O1=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function um(e){if(Oh[e])return Oh[e];if(!so[e])return e;var t=so[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in O1)return Oh[e]=t[r];return e}var I1=um("animationend"),L1=um("animationiteration"),$1=um("animationstart"),F1=um("transitionend"),B1=new Map,Mv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(e,t){B1.set(e,t),Hi(t,[e])}for(var Ih=0;Ih<Mv.length;Ih++){var Lh=Mv[Ih],gA=Lh.toLowerCase(),yA=Lh[0].toUpperCase()+Lh.slice(1);Xa(gA,"on"+yA)}Xa(I1,"onAnimationEnd");Xa(L1,"onAnimationIteration");Xa($1,"onAnimationStart");Xa("dblclick","onDoubleClick");Xa("focusin","onFocus");Xa("focusout","onBlur");Xa(F1,"onTransitionEnd");Ro("onMouseEnter",["mouseout","mouseover"]);Ro("onMouseLeave",["mouseout","mouseover"]);Ro("onPointerEnter",["pointerout","pointerover"]);Ro("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hl));function Rv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,gT(n,t,void 0,e),e.currentTarget=null}function W1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Rv(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Rv(s,l,u),i=c}}}if(af)throw e=Gp,af=!1,Gp=null,e}function St(e,t){var r=t[ag];r===void 0&&(r=t[ag]=new Set);var n=e+"__bubble";r.has(n)||(H1(t,e,2,!1),r.add(n))}function $h(e,t,r){var n=0;t&&(n|=4),H1(r,e,n,t)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function bc(e){if(!e[Gu]){e[Gu]=!0,Gj.forEach(function(r){r!=="selectionchange"&&(xA.has(r)||$h(r,!1,e),$h(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gu]||(t[Gu]=!0,$h("selectionchange",!1,t))}}function H1(e,t,r,n){switch(k1(t)){case 1:var s=PT;break;case 4:s=MT;break;default:s=Fy}r=s.bind(null,t,r,e),s=void 0,!Kp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Fh(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ui(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}d1(function(){var u=i,d=Oy(r),f=[];e:{var m=B1.get(e);if(m!==void 0){var y=Wy,j=e;switch(e){case"keypress":if(Cd(r)===0)break e;case"keydown":case"keyup":y=KT;break;case"focusin":j="focus",y=Ph;break;case"focusout":j="blur",y=Ph;break;case"beforeblur":case"afterblur":y=Ph;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Nv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=IT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=XT;break;case I1:case L1:case $1:y=FT;break;case F1:y=ZT;break;case"scroll":y=RT;break;case"wheel":y=tA;break;case"copy":case"cut":case"paste":y=WT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Sv}var p=(t&4)!==0,k=!p&&e==="scroll",h=p?m!==null?m+"Capture":null:m;p=[];for(var v=u,S;v!==null;){S=v;var x=S.stateNode;if(S.tag===5&&x!==null&&(S=x,h!==null&&(x=hc(v,h),x!=null&&p.push(wc(v,x,S)))),k)break;v=v.return}0<p.length&&(m=new y(m,j,null,r,d),f.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==Yp&&(j=r.relatedTarget||r.fromElement)&&(ui(j)||j[ea]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(j=r.relatedTarget||r.toElement,y=u,j=j?ui(j):null,j!==null&&(k=Ui(j),j!==k||j.tag!==5&&j.tag!==6)&&(j=null)):(y=null,j=u),y!==j)){if(p=Nv,x="onMouseLeave",h="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(p=Sv,x="onPointerLeave",h="onPointerEnter",v="pointer"),k=y==null?m:ao(y),S=j==null?m:ao(j),m=new p(x,v+"leave",y,r,d),m.target=k,m.relatedTarget=S,x=null,ui(d)===u&&(p=new p(h,v+"enter",j,r,d),p.target=S,p.relatedTarget=k,x=p),k=x,y&&j)t:{for(p=y,h=j,v=0,S=p;S;S=Yi(S))v++;for(S=0,x=h;x;x=Yi(x))S++;for(;0<v-S;)p=Yi(p),v--;for(;0<S-v;)h=Yi(h),S--;for(;v--;){if(p===h||h!==null&&p===h.alternate)break t;p=Yi(p),h=Yi(h)}p=null}else p=null;y!==null&&Ov(f,m,y,p,!1),j!==null&&k!==null&&Ov(f,k,j,p,!0)}}e:{if(m=u?ao(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var T=lA;else if(Cv(m))if(_1)T=fA;else{T=uA;var E=cA}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=dA);if(T&&(T=T(e,u))){A1(f,T,r,d);break e}E&&E(e,m,u),e==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&Wp(m,"number",m.value)}switch(E=u?ao(u):window,e){case"focusin":(Cv(E)||E.contentEditable==="true")&&(no=E,Zp=u,Xl=null);break;case"focusout":Xl=Zp=no=null;break;case"mousedown":eg=!0;break;case"contextmenu":case"mouseup":case"dragend":eg=!1,Pv(f,r,d);break;case"selectionchange":if(pA)break;case"keydown":case"keyup":Pv(f,r,d)}var _;if(Uy)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ro?E1(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(C1&&r.locale!=="ko"&&(ro||M!=="onCompositionStart"?M==="onCompositionEnd"&&ro&&(_=D1()):(Pa=d,By="value"in Pa?Pa.value:Pa.textContent,ro=!0)),E=df(u,M),0<E.length&&(M=new jv(M,e,null,r,d),f.push({event:M,listeners:E}),_?M.data=_:(_=T1(r),_!==null&&(M.data=_)))),(_=nA?sA(e,r):aA(e,r))&&(u=df(u,"onBeforeInput"),0<u.length&&(d=new jv("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}W1(f,t)})}function wc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function df(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=hc(e,r),i!=null&&n.unshift(wc(e,i,s)),i=hc(e,t),i!=null&&n.push(wc(e,i,s))),e=e.return}return n}function Yi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ov(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=hc(r,i),c!=null&&o.unshift(wc(r,c,l))):s||(c=hc(r,i),c!=null&&o.push(wc(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var vA=/\r\n?/g,bA=/\u0000|\uFFFD/g;function Iv(e){return(typeof e=="string"?e:""+e).replace(vA,`
`).replace(bA,"")}function Qu(e,t,r){if(t=Iv(t),Iv(e)!==t&&r)throw Error(Ae(425))}function ff(){}var tg=null,rg=null;function ng(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sg=typeof setTimeout=="function"?setTimeout:void 0,wA=typeof clearTimeout=="function"?clearTimeout:void 0,Lv=typeof Promise=="function"?Promise:void 0,NA=typeof queueMicrotask=="function"?queueMicrotask:typeof Lv<"u"?function(e){return Lv.resolve(null).then(e).catch(jA)}:sg;function jA(e){setTimeout(function(){throw e})}function Bh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),yc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);yc(t)}function Fa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $v(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),hs="__reactFiber$"+Jo,Nc="__reactProps$"+Jo,ea="__reactContainer$"+Jo,ag="__reactEvents$"+Jo,SA="__reactListeners$"+Jo,kA="__reactHandles$"+Jo;function ui(e){var t=e[hs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ea]||r[hs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$v(e);e!==null;){if(r=e[hs])return r;e=$v(e)}return t}e=r,r=e.parentNode}return null}function iu(e){return e=e[hs]||e[ea],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ao(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ae(33))}function dm(e){return e[Nc]||null}var ig=[],io=-1;function Ja(e){return{current:e}}function Ct(e){0>io||(e.current=ig[io],ig[io]=null,io--)}function jt(e,t){io++,ig[io]=e.current,e.current=t}var qa={},Tr=Ja(qa),Kr=Ja(!1),Ti=qa;function Oo(e,t){var r=e.type.contextTypes;if(!r)return qa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Gr(e){return e=e.childContextTypes,e!=null}function mf(){Ct(Kr),Ct(Tr)}function Fv(e,t,r){if(Tr.current!==qa)throw Error(Ae(168));jt(Tr,t),jt(Kr,r)}function U1(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Ae(108,cT(e)||"Unknown",s));return $t({},r,n)}function hf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qa,Ti=Tr.current,jt(Tr,e),jt(Kr,Kr.current),!0}function Bv(e,t,r){var n=e.stateNode;if(!n)throw Error(Ae(169));r?(e=U1(e,t,Ti),n.__reactInternalMemoizedMergedChildContext=e,Ct(Kr),Ct(Tr),jt(Tr,e)):Ct(Kr),jt(Kr,r)}var Hs=null,fm=!1,Wh=!1;function z1(e){Hs===null?Hs=[e]:Hs.push(e)}function DA(e){fm=!0,z1(e)}function Za(){if(!Wh&&Hs!==null){Wh=!0;var e=0,t=yt;try{var r=Hs;for(yt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Hs=null,fm=!1}catch(s){throw Hs!==null&&(Hs=Hs.slice(e+1)),p1(Iy,Za),s}finally{yt=t,Wh=!1}}return null}var oo=[],lo=0,pf=null,gf=0,yn=[],xn=0,Ai=null,zs=1,Vs="";function ai(e,t){oo[lo++]=gf,oo[lo++]=pf,pf=e,gf=t}function V1(e,t,r){yn[xn++]=zs,yn[xn++]=Vs,yn[xn++]=Ai,Ai=e;var n=zs;e=Vs;var s=32-Vn(n)-1;n&=~(1<<s),r+=1;var i=32-Vn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,zs=1<<32-Vn(t)+s|r<<s|n,Vs=i+e}else zs=1<<i|r<<s|n,Vs=e}function Vy(e){e.return!==null&&(ai(e,1),V1(e,1,0))}function Yy(e){for(;e===pf;)pf=oo[--lo],oo[lo]=null,gf=oo[--lo],oo[lo]=null;for(;e===Ai;)Ai=yn[--xn],yn[xn]=null,Vs=yn[--xn],yn[xn]=null,zs=yn[--xn],yn[xn]=null}var ln=null,on=null,Rt=!1,Bn=null;function Y1(e,t){var r=jn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Wv(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ln=e,on=Fa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ln=e,on=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ai!==null?{id:zs,overflow:Vs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=jn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ln=e,on=null,!0):!1;default:return!1}}function og(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lg(e){if(Rt){var t=on;if(t){var r=t;if(!Wv(e,t)){if(og(e))throw Error(Ae(418));t=Fa(r.nextSibling);var n=ln;t&&Wv(e,t)?Y1(n,r):(e.flags=e.flags&-4097|2,Rt=!1,ln=e)}}else{if(og(e))throw Error(Ae(418));e.flags=e.flags&-4097|2,Rt=!1,ln=e}}}function Hv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ln=e}function Xu(e){if(e!==ln)return!1;if(!Rt)return Hv(e),Rt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ng(e.type,e.memoizedProps)),t&&(t=on)){if(og(e))throw q1(),Error(Ae(418));for(;t;)Y1(e,t),t=Fa(t.nextSibling)}if(Hv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){on=Fa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}on=null}}else on=ln?Fa(e.stateNode.nextSibling):null;return!0}function q1(){for(var e=on;e;)e=Fa(e.nextSibling)}function Io(){on=ln=null,Rt=!1}function qy(e){Bn===null?Bn=[e]:Bn.push(e)}var CA=la.ReactCurrentBatchConfig;function Dl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ae(309));var n=r.stateNode}if(!n)throw Error(Ae(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ae(284));if(!r._owner)throw Error(Ae(290,e))}return e}function Ju(e,t){throw e=Object.prototype.toString.call(t),Error(Ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uv(e){var t=e._init;return t(e._payload)}function K1(e){function t(h,v){if(e){var S=h.deletions;S===null?(h.deletions=[v],h.flags|=16):S.push(v)}}function r(h,v){if(!e)return null;for(;v!==null;)t(h,v),v=v.sibling;return null}function n(h,v){for(h=new Map;v!==null;)v.key!==null?h.set(v.key,v):h.set(v.index,v),v=v.sibling;return h}function s(h,v){return h=Ua(h,v),h.index=0,h.sibling=null,h}function i(h,v,S){return h.index=S,e?(S=h.alternate,S!==null?(S=S.index,S<v?(h.flags|=2,v):S):(h.flags|=2,v)):(h.flags|=1048576,v)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,v,S,x){return v===null||v.tag!==6?(v=Kh(S,h.mode,x),v.return=h,v):(v=s(v,S),v.return=h,v)}function c(h,v,S,x){var T=S.type;return T===to?d(h,v,S.props.children,x,S.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===va&&Uv(T)===v.type)?(x=s(v,S.props),x.ref=Dl(h,v,S),x.return=h,x):(x=Rd(S.type,S.key,S.props,null,h.mode,x),x.ref=Dl(h,v,S),x.return=h,x)}function u(h,v,S,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Gh(S,h.mode,x),v.return=h,v):(v=s(v,S.children||[]),v.return=h,v)}function d(h,v,S,x,T){return v===null||v.tag!==7?(v=Si(S,h.mode,x,T),v.return=h,v):(v=s(v,S),v.return=h,v)}function f(h,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Kh(""+v,h.mode,S),v.return=h,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wu:return S=Rd(v.type,v.key,v.props,null,h.mode,S),S.ref=Dl(h,null,v),S.return=h,S;case eo:return v=Gh(v,h.mode,S),v.return=h,v;case va:var x=v._init;return f(h,x(v._payload),S)}if(Bl(v)||wl(v))return v=Si(v,h.mode,S,null),v.return=h,v;Ju(h,v)}return null}function m(h,v,S,x){var T=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:l(h,v,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Wu:return S.key===T?c(h,v,S,x):null;case eo:return S.key===T?u(h,v,S,x):null;case va:return T=S._init,m(h,v,T(S._payload),x)}if(Bl(S)||wl(S))return T!==null?null:d(h,v,S,x,null);Ju(h,S)}return null}function y(h,v,S,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return h=h.get(S)||null,l(v,h,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wu:return h=h.get(x.key===null?S:x.key)||null,c(v,h,x,T);case eo:return h=h.get(x.key===null?S:x.key)||null,u(v,h,x,T);case va:var E=x._init;return y(h,v,S,E(x._payload),T)}if(Bl(x)||wl(x))return h=h.get(S)||null,d(v,h,x,T,null);Ju(v,x)}return null}function j(h,v,S,x){for(var T=null,E=null,_=v,M=v=0,O=null;_!==null&&M<S.length;M++){_.index>M?(O=_,_=null):O=_.sibling;var R=m(h,_,S[M],x);if(R===null){_===null&&(_=O);break}e&&_&&R.alternate===null&&t(h,_),v=i(R,v,M),E===null?T=R:E.sibling=R,E=R,_=O}if(M===S.length)return r(h,_),Rt&&ai(h,M),T;if(_===null){for(;M<S.length;M++)_=f(h,S[M],x),_!==null&&(v=i(_,v,M),E===null?T=_:E.sibling=_,E=_);return Rt&&ai(h,M),T}for(_=n(h,_);M<S.length;M++)O=y(_,h,M,S[M],x),O!==null&&(e&&O.alternate!==null&&_.delete(O.key===null?M:O.key),v=i(O,v,M),E===null?T=O:E.sibling=O,E=O);return e&&_.forEach(function(K){return t(h,K)}),Rt&&ai(h,M),T}function p(h,v,S,x){var T=wl(S);if(typeof T!="function")throw Error(Ae(150));if(S=T.call(S),S==null)throw Error(Ae(151));for(var E=T=null,_=v,M=v=0,O=null,R=S.next();_!==null&&!R.done;M++,R=S.next()){_.index>M?(O=_,_=null):O=_.sibling;var K=m(h,_,R.value,x);if(K===null){_===null&&(_=O);break}e&&_&&K.alternate===null&&t(h,_),v=i(K,v,M),E===null?T=K:E.sibling=K,E=K,_=O}if(R.done)return r(h,_),Rt&&ai(h,M),T;if(_===null){for(;!R.done;M++,R=S.next())R=f(h,R.value,x),R!==null&&(v=i(R,v,M),E===null?T=R:E.sibling=R,E=R);return Rt&&ai(h,M),T}for(_=n(h,_);!R.done;M++,R=S.next())R=y(_,h,M,R.value,x),R!==null&&(e&&R.alternate!==null&&_.delete(R.key===null?M:R.key),v=i(R,v,M),E===null?T=R:E.sibling=R,E=R);return e&&_.forEach(function(Q){return t(h,Q)}),Rt&&ai(h,M),T}function k(h,v,S,x){if(typeof S=="object"&&S!==null&&S.type===to&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Wu:e:{for(var T=S.key,E=v;E!==null;){if(E.key===T){if(T=S.type,T===to){if(E.tag===7){r(h,E.sibling),v=s(E,S.props.children),v.return=h,h=v;break e}}else if(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===va&&Uv(T)===E.type){r(h,E.sibling),v=s(E,S.props),v.ref=Dl(h,E,S),v.return=h,h=v;break e}r(h,E);break}else t(h,E);E=E.sibling}S.type===to?(v=Si(S.props.children,h.mode,x,S.key),v.return=h,h=v):(x=Rd(S.type,S.key,S.props,null,h.mode,x),x.ref=Dl(h,v,S),x.return=h,h=x)}return o(h);case eo:e:{for(E=S.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){r(h,v.sibling),v=s(v,S.children||[]),v.return=h,h=v;break e}else{r(h,v);break}else t(h,v);v=v.sibling}v=Gh(S,h.mode,x),v.return=h,h=v}return o(h);case va:return E=S._init,k(h,v,E(S._payload),x)}if(Bl(S))return j(h,v,S,x);if(wl(S))return p(h,v,S,x);Ju(h,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(r(h,v.sibling),v=s(v,S),v.return=h,h=v):(r(h,v),v=Kh(S,h.mode,x),v.return=h,h=v),o(h)):r(h,v)}return k}var Lo=K1(!0),G1=K1(!1),yf=Ja(null),xf=null,co=null,Ky=null;function Gy(){Ky=co=xf=null}function Qy(e){var t=yf.current;Ct(yf),e._currentValue=t}function cg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function xo(e,t){xf=e,Ky=co=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qr=!0),e.firstContext=null)}function kn(e){var t=e._currentValue;if(Ky!==e)if(e={context:e,memoizedValue:t,next:null},co===null){if(xf===null)throw Error(Ae(308));co=e,xf.dependencies={lanes:0,firstContext:e}}else co=co.next=e;return t}var di=null;function Xy(e){di===null?di=[e]:di.push(e)}function Q1(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Xy(t)):(r.next=s.next,s.next=r),t.interleaved=r,ta(e,n)}function ta(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ba=!1;function Jy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,lt&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ta(e,r)}return s=n.interleaved,s===null?(t.next=t,Xy(n)):(t.next=s.next,s.next=t),n.interleaved=t,ta(e,r)}function Ed(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ly(e,r)}}function zv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function vf(e,t,r,n){var s=e.updateQueue;ba=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,p=l;switch(m=t,y=r,p.tag){case 1:if(j=p.payload,typeof j=="function"){f=j.call(y,f,m);break e}f=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=p.payload,m=typeof j=="function"?j.call(y,f,m):j,m==null)break e;f=$t({},f,m);break e;case 2:ba=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=f):d=d.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Pi|=o,e.lanes=o,e.memoizedState=f}}function Vv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Ae(191,s));s.call(n)}}}var ou={},bs=Ja(ou),jc=Ja(ou),Sc=Ja(ou);function fi(e){if(e===ou)throw Error(Ae(174));return e}function Zy(e,t){switch(jt(Sc,t),jt(jc,e),jt(bs,ou),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Up(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Up(t,e)}Ct(bs),jt(bs,t)}function $o(){Ct(bs),Ct(jc),Ct(Sc)}function J1(e){fi(Sc.current);var t=fi(bs.current),r=Up(t,e.type);t!==r&&(jt(jc,e),jt(bs,r))}function ex(e){jc.current===e&&(Ct(bs),Ct(jc))}var It=Ja(0);function bf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hh=[];function tx(){for(var e=0;e<Hh.length;e++)Hh[e]._workInProgressVersionPrimary=null;Hh.length=0}var Td=la.ReactCurrentDispatcher,Uh=la.ReactCurrentBatchConfig,_i=0,Lt=null,rr=null,fr=null,wf=!1,Jl=!1,kc=0,EA=0;function jr(){throw Error(Ae(321))}function rx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qn(e[r],t[r]))return!1;return!0}function nx(e,t,r,n,s,i){if(_i=i,Lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Td.current=e===null||e.memoizedState===null?PA:MA,e=r(n,s),Jl){i=0;do{if(Jl=!1,kc=0,25<=i)throw Error(Ae(301));i+=1,fr=rr=null,t.updateQueue=null,Td.current=RA,e=r(n,s)}while(Jl)}if(Td.current=Nf,t=rr!==null&&rr.next!==null,_i=0,fr=rr=Lt=null,wf=!1,t)throw Error(Ae(300));return e}function sx(){var e=kc!==0;return kc=0,e}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Lt.memoizedState=fr=e:fr=fr.next=e,fr}function Dn(){if(rr===null){var e=Lt.alternate;e=e!==null?e.memoizedState:null}else e=rr.next;var t=fr===null?Lt.memoizedState:fr.next;if(t!==null)fr=t,rr=e;else{if(e===null)throw Error(Ae(310));rr=e,e={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},fr===null?Lt.memoizedState=fr=e:fr=fr.next=e}return fr}function Dc(e,t){return typeof t=="function"?t(e):t}function zh(e){var t=Dn(),r=t.queue;if(r===null)throw Error(Ae(311));r.lastRenderedReducer=e;var n=rr,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((_i&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Lt.lanes|=d,Pi|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,qn(n,t.memoizedState)||(qr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Lt.lanes|=i,Pi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vh(e){var t=Dn(),r=t.queue;if(r===null)throw Error(Ae(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);qn(i,t.memoizedState)||(qr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Z1(){}function e2(e,t){var r=Lt,n=Dn(),s=t(),i=!qn(n.memoizedState,s);if(i&&(n.memoizedState=s,qr=!0),n=n.queue,ax(n2.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||fr!==null&&fr.memoizedState.tag&1){if(r.flags|=2048,Cc(9,r2.bind(null,r,n,s,t),void 0,null),hr===null)throw Error(Ae(349));_i&30||t2(r,t,s)}return s}function t2(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Lt.updateQueue,t===null?(t={lastEffect:null,stores:null},Lt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function r2(e,t,r,n){t.value=r,t.getSnapshot=n,s2(t)&&a2(e)}function n2(e,t,r){return r(function(){s2(t)&&a2(e)})}function s2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qn(e,r)}catch{return!0}}function a2(e){var t=ta(e,1);t!==null&&Yn(t,e,1,-1)}function Yv(e){var t=os();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dc,lastRenderedState:e},t.queue=e,e=e.dispatch=_A.bind(null,Lt,e),[t.memoizedState,e]}function Cc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Lt.updateQueue,t===null?(t={lastEffect:null,stores:null},Lt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function i2(){return Dn().memoizedState}function Ad(e,t,r,n){var s=os();Lt.flags|=e,s.memoizedState=Cc(1|t,r,void 0,n===void 0?null:n)}function mm(e,t,r,n){var s=Dn();n=n===void 0?null:n;var i=void 0;if(rr!==null){var o=rr.memoizedState;if(i=o.destroy,n!==null&&rx(n,o.deps)){s.memoizedState=Cc(t,r,i,n);return}}Lt.flags|=e,s.memoizedState=Cc(1|t,r,i,n)}function qv(e,t){return Ad(8390656,8,e,t)}function ax(e,t){return mm(2048,8,e,t)}function o2(e,t){return mm(4,2,e,t)}function l2(e,t){return mm(4,4,e,t)}function c2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function u2(e,t,r){return r=r!=null?r.concat([e]):null,mm(4,4,c2.bind(null,t,e),r)}function ix(){}function d2(e,t){var r=Dn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&rx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function f2(e,t){var r=Dn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&rx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function m2(e,t,r){return _i&21?(qn(r,t)||(r=x1(),Lt.lanes|=r,Pi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qr=!0),e.memoizedState=r)}function TA(e,t){var r=yt;yt=r!==0&&4>r?r:4,e(!0);var n=Uh.transition;Uh.transition={};try{e(!1),t()}finally{yt=r,Uh.transition=n}}function h2(){return Dn().memoizedState}function AA(e,t,r){var n=Ha(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},p2(e))g2(t,r);else if(r=Q1(e,t,r,n),r!==null){var s=Br();Yn(r,e,n,s),y2(r,t,n)}}function _A(e,t,r){var n=Ha(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(p2(e))g2(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,qn(l,o)){var c=t.interleaved;c===null?(s.next=s,Xy(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Q1(e,t,s,n),r!==null&&(s=Br(),Yn(r,e,n,s),y2(r,t,n))}}function p2(e){var t=e.alternate;return e===Lt||t!==null&&t===Lt}function g2(e,t){Jl=wf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function y2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ly(e,r)}}var Nf={readContext:kn,useCallback:jr,useContext:jr,useEffect:jr,useImperativeHandle:jr,useInsertionEffect:jr,useLayoutEffect:jr,useMemo:jr,useReducer:jr,useRef:jr,useState:jr,useDebugValue:jr,useDeferredValue:jr,useTransition:jr,useMutableSource:jr,useSyncExternalStore:jr,useId:jr,unstable_isNewReconciler:!1},PA={readContext:kn,useCallback:function(e,t){return os().memoizedState=[e,t===void 0?null:t],e},useContext:kn,useEffect:qv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ad(4194308,4,c2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ad(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ad(4,2,e,t)},useMemo:function(e,t){var r=os();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=os();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=AA.bind(null,Lt,e),[n.memoizedState,e]},useRef:function(e){var t=os();return e={current:e},t.memoizedState=e},useState:Yv,useDebugValue:ix,useDeferredValue:function(e){return os().memoizedState=e},useTransition:function(){var e=Yv(!1),t=e[0];return e=TA.bind(null,e[1]),os().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Lt,s=os();if(Rt){if(r===void 0)throw Error(Ae(407));r=r()}else{if(r=t(),hr===null)throw Error(Ae(349));_i&30||t2(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,qv(n2.bind(null,n,i,e),[e]),n.flags|=2048,Cc(9,r2.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=os(),t=hr.identifierPrefix;if(Rt){var r=Vs,n=zs;r=(n&~(1<<32-Vn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=kc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=EA++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},MA={readContext:kn,useCallback:d2,useContext:kn,useEffect:ax,useImperativeHandle:u2,useInsertionEffect:o2,useLayoutEffect:l2,useMemo:f2,useReducer:zh,useRef:i2,useState:function(){return zh(Dc)},useDebugValue:ix,useDeferredValue:function(e){var t=Dn();return m2(t,rr.memoizedState,e)},useTransition:function(){var e=zh(Dc)[0],t=Dn().memoizedState;return[e,t]},useMutableSource:Z1,useSyncExternalStore:e2,useId:h2,unstable_isNewReconciler:!1},RA={readContext:kn,useCallback:d2,useContext:kn,useEffect:ax,useImperativeHandle:u2,useInsertionEffect:o2,useLayoutEffect:l2,useMemo:f2,useReducer:Vh,useRef:i2,useState:function(){return Vh(Dc)},useDebugValue:ix,useDeferredValue:function(e){var t=Dn();return rr===null?t.memoizedState=e:m2(t,rr.memoizedState,e)},useTransition:function(){var e=Vh(Dc)[0],t=Dn().memoizedState;return[e,t]},useMutableSource:Z1,useSyncExternalStore:e2,useId:h2,unstable_isNewReconciler:!1};function Rn(e,t){if(e&&e.defaultProps){t=$t({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ug(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:$t({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var hm={isMounted:function(e){return(e=e._reactInternals)?Ui(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Br(),s=Ha(e),i=Gs(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ba(e,i,s),t!==null&&(Yn(t,e,s,n),Ed(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Br(),s=Ha(e),i=Gs(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ba(e,i,s),t!==null&&(Yn(t,e,s,n),Ed(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Br(),n=Ha(e),s=Gs(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ba(e,s,n),t!==null&&(Yn(t,e,n,r),Ed(t,e,n))}};function Kv(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!vc(r,n)||!vc(s,i):!0}function x2(e,t,r){var n=!1,s=qa,i=t.contextType;return typeof i=="object"&&i!==null?i=kn(i):(s=Gr(t)?Ti:Tr.current,n=t.contextTypes,i=(n=n!=null)?Oo(e,s):qa),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hm,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&hm.enqueueReplaceState(t,t.state,null)}function dg(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Jy(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=kn(i):(i=Gr(t)?Ti:Tr.current,s.context=Oo(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ug(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&hm.enqueueReplaceState(s,s.state,null),vf(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Fo(e,t){try{var r="",n=t;do r+=lT(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Yh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function fg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var OA=typeof WeakMap=="function"?WeakMap:Map;function v2(e,t,r){r=Gs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Sf||(Sf=!0,Ng=n),fg(e,t)},r}function b2(e,t,r){r=Gs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){fg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){fg(e,t),typeof n!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Qv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new OA;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=GA.bind(null,e,t,r),t.then(e,e))}function Xv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jv(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gs(-1,1),t.tag=2,Ba(r,t,1))),r.lanes|=1),e)}var IA=la.ReactCurrentOwner,qr=!1;function Or(e,t,r,n){t.child=e===null?G1(t,null,r,n):Lo(t,e.child,r,n)}function Zv(e,t,r,n,s){r=r.render;var i=t.ref;return xo(t,s),n=nx(e,t,r,n,i,s),r=sx(),e!==null&&!qr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ra(e,t,s)):(Rt&&r&&Vy(t),t.flags|=1,Or(e,t,n,s),t.child)}function eb(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!hx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,w2(e,t,i,n,s)):(e=Rd(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:vc,r(o,n)&&e.ref===t.ref)return ra(e,t,s)}return t.flags|=1,e=Ua(i,n),e.ref=t.ref,e.return=t,t.child=e}function w2(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(vc(i,n)&&e.ref===t.ref)if(qr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(qr=!0);else return t.lanes=e.lanes,ra(e,t,s)}return mg(e,t,r,n,s)}function N2(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(fo,sn),sn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jt(fo,sn),sn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,jt(fo,sn),sn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,jt(fo,sn),sn|=n;return Or(e,t,s,r),t.child}function j2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function mg(e,t,r,n,s){var i=Gr(r)?Ti:Tr.current;return i=Oo(t,i),xo(t,s),r=nx(e,t,r,n,i,s),n=sx(),e!==null&&!qr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ra(e,t,s)):(Rt&&n&&Vy(t),t.flags|=1,Or(e,t,r,s),t.child)}function tb(e,t,r,n,s){if(Gr(r)){var i=!0;hf(t)}else i=!1;if(xo(t,s),t.stateNode===null)_d(e,t),x2(t,r,n),dg(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=kn(u):(u=Gr(r)?Ti:Tr.current,u=Oo(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Gv(t,o,n,u),ba=!1;var m=t.memoizedState;o.state=m,vf(t,n,o,s),c=t.memoizedState,l!==n||m!==c||Kr.current||ba?(typeof d=="function"&&(ug(t,r,d,n),c=t.memoizedState),(l=ba||Kv(t,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,X1(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Rn(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=kn(c):(c=Gr(r)?Ti:Tr.current,c=Oo(t,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Gv(t,o,n,c),ba=!1,m=t.memoizedState,o.state=m,vf(t,n,o,s);var j=t.memoizedState;l!==f||m!==j||Kr.current||ba?(typeof y=="function"&&(ug(t,r,y,n),j=t.memoizedState),(u=ba||Kv(t,r,u,n,m,j,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),o.props=n,o.state=j,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return hg(e,t,r,n,i,s)}function hg(e,t,r,n,s,i){j2(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Bv(t,r,!1),ra(e,t,i);n=t.stateNode,IA.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Lo(t,e.child,null,i),t.child=Lo(t,null,l,i)):Or(e,t,l,i),t.memoizedState=n.state,s&&Bv(t,r,!0),t.child}function S2(e){var t=e.stateNode;t.pendingContext?Fv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fv(e,t.context,!1),Zy(e,t.containerInfo)}function rb(e,t,r,n,s){return Io(),qy(s),t.flags|=256,Or(e,t,r,n),t.child}var pg={dehydrated:null,treeContext:null,retryLane:0};function gg(e){return{baseLanes:e,cachePool:null,transitions:null}}function k2(e,t,r){var n=t.pendingProps,s=It.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),jt(It,s&1),e===null)return lg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ym(o,n,0,null),e=Si(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=gg(r),t.memoizedState=pg,e):ox(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return LA(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ua(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ua(l,i):(i=Si(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?gg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=pg,n}return i=e.child,e=i.sibling,n=Ua(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ox(e,t){return t=ym({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zu(e,t,r,n){return n!==null&&qy(n),Lo(t,e.child,null,r),e=ox(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LA(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Yh(Error(Ae(422))),Zu(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=ym({mode:"visible",children:n.children},s,0,null),i=Si(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Lo(t,e.child,null,o),t.child.memoizedState=gg(o),t.memoizedState=pg,i);if(!(t.mode&1))return Zu(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Ae(419)),n=Yh(i,n,void 0),Zu(e,t,o,n)}if(l=(o&e.childLanes)!==0,qr||l){if(n=hr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ta(e,s),Yn(n,e,s,-1))}return mx(),n=Yh(Error(Ae(421))),Zu(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=QA.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,on=Fa(s.nextSibling),ln=t,Rt=!0,Bn=null,e!==null&&(yn[xn++]=zs,yn[xn++]=Vs,yn[xn++]=Ai,zs=e.id,Vs=e.overflow,Ai=t),t=ox(t,n.children),t.flags|=4096,t)}function nb(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),cg(e.return,t,r)}function qh(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function D2(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Or(e,t,n.children,r),n=It.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nb(e,r,t);else if(e.tag===19)nb(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(jt(It,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&bf(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),qh(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bf(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}qh(t,!0,r,null,i);break;case"together":qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _d(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ra(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Pi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ae(153));if(t.child!==null){for(e=t.child,r=Ua(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ua(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function $A(e,t,r){switch(t.tag){case 3:S2(t),Io();break;case 5:J1(t);break;case 1:Gr(t.type)&&hf(t);break;case 4:Zy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;jt(yf,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(jt(It,It.current&1),t.flags|=128,null):r&t.child.childLanes?k2(e,t,r):(jt(It,It.current&1),e=ra(e,t,r),e!==null?e.sibling:null);jt(It,It.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return D2(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jt(It,It.current),n)break;return null;case 22:case 23:return t.lanes=0,N2(e,t,r)}return ra(e,t,r)}var C2,yg,E2,T2;C2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yg=function(){};E2=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,fi(bs.current);var i=null;switch(r){case"input":s=Fp(e,s),n=Fp(e,n),i=[];break;case"select":s=$t({},s,{value:void 0}),n=$t({},n,{value:void 0}),i=[];break;case"textarea":s=Hp(e,s),n=Hp(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ff)}zp(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};T2=function(e,t,r,n){r!==n&&(t.flags|=4)};function Cl(e,t){if(!Rt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function FA(e,t,r){var n=t.pendingProps;switch(Yy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sr(t),null;case 1:return Gr(t.type)&&mf(),Sr(t),null;case 3:return n=t.stateNode,$o(),Ct(Kr),Ct(Tr),tx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bn!==null&&(kg(Bn),Bn=null))),yg(e,t),Sr(t),null;case 5:ex(t);var s=fi(Sc.current);if(r=t.type,e!==null&&t.stateNode!=null)E2(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ae(166));return Sr(t),null}if(e=fi(bs.current),Xu(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[hs]=t,n[Nc]=i,e=(t.mode&1)!==0,r){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(s=0;s<Hl.length;s++)St(Hl[s],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":fv(n,i),St("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},St("invalid",n);break;case"textarea":hv(n,i),St("invalid",n)}zp(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Qu(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Qu(n.textContent,l,e),s=["children",""+l]):fc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&St("scroll",n)}switch(r){case"input":Hu(n),mv(n,i,!0);break;case"textarea":Hu(n),pv(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ff)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=n1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[hs]=t,e[Nc]=n,C2(e,t,!1,!1),t.stateNode=e;e:{switch(o=Vp(r,n),r){case"dialog":St("cancel",e),St("close",e),s=n;break;case"iframe":case"object":case"embed":St("load",e),s=n;break;case"video":case"audio":for(s=0;s<Hl.length;s++)St(Hl[s],e);s=n;break;case"source":St("error",e),s=n;break;case"img":case"image":case"link":St("error",e),St("load",e),s=n;break;case"details":St("toggle",e),s=n;break;case"input":fv(e,n),s=Fp(e,n),St("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=$t({},n,{value:void 0}),St("invalid",e);break;case"textarea":hv(e,n),s=Hp(e,n),St("invalid",e);break;default:s=n}zp(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?i1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&s1(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&mc(e,c):typeof c=="number"&&mc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&St("scroll",e):c!=null&&_y(e,i,c,o))}switch(r){case"input":Hu(e),mv(e,n,!1);break;case"textarea":Hu(e),pv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ya(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ho(e,!!n.multiple,i,!1):n.defaultValue!=null&&ho(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ff)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sr(t),null;case 6:if(e&&t.stateNode!=null)T2(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ae(166));if(r=fi(Sc.current),fi(bs.current),Xu(t)){if(n=t.stateNode,r=t.memoizedProps,n[hs]=t,(i=n.nodeValue!==r)&&(e=ln,e!==null))switch(e.tag){case 3:Qu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qu(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[hs]=t,t.stateNode=n}return Sr(t),null;case 13:if(Ct(It),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rt&&on!==null&&t.mode&1&&!(t.flags&128))q1(),Io(),t.flags|=98560,i=!1;else if(i=Xu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Ae(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ae(317));i[hs]=t}else Io(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Sr(t),i=!1}else Bn!==null&&(kg(Bn),Bn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||It.current&1?ar===0&&(ar=3):mx())),t.updateQueue!==null&&(t.flags|=4),Sr(t),null);case 4:return $o(),yg(e,t),e===null&&bc(t.stateNode.containerInfo),Sr(t),null;case 10:return Qy(t.type._context),Sr(t),null;case 17:return Gr(t.type)&&mf(),Sr(t),null;case 19:if(Ct(It),i=t.memoizedState,i===null)return Sr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Cl(i,!1);else{if(ar!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bf(e),o!==null){for(t.flags|=128,Cl(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return jt(It,It.current&1|2),t.child}e=e.sibling}i.tail!==null&&Yt()>Bo&&(t.flags|=128,n=!0,Cl(i,!1),t.lanes=4194304)}else{if(!n)if(e=bf(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Cl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Rt)return Sr(t),null}else 2*Yt()-i.renderingStartTime>Bo&&r!==1073741824&&(t.flags|=128,n=!0,Cl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Yt(),t.sibling=null,r=It.current,jt(It,n?r&1|2:r&1),t):(Sr(t),null);case 22:case 23:return fx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?sn&1073741824&&(Sr(t),t.subtreeFlags&6&&(t.flags|=8192)):Sr(t),null;case 24:return null;case 25:return null}throw Error(Ae(156,t.tag))}function BA(e,t){switch(Yy(t),t.tag){case 1:return Gr(t.type)&&mf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $o(),Ct(Kr),Ct(Tr),tx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ex(t),null;case 13:if(Ct(It),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ae(340));Io()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ct(It),null;case 4:return $o(),null;case 10:return Qy(t.type._context),null;case 22:case 23:return fx(),null;case 24:return null;default:return null}}var ed=!1,Dr=!1,WA=typeof WeakSet=="function"?WeakSet:Set,$e=null;function uo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ht(e,t,n)}else r.current=null}function xg(e,t,r){try{r()}catch(n){Ht(e,t,n)}}var sb=!1;function HA(e,t){if(tg=cf,e=R1(),zy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var y;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(rg={focusedElem:e,selectionRange:r},cf=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){t=$e;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var p=j.memoizedProps,k=j.memoizedState,h=t.stateNode,v=h.getSnapshotBeforeUpdate(t.elementType===t.type?p:Rn(t.type,p),k);h.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(x){Ht(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}return j=sb,sb=!1,j}function Zl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&xg(t,r,i)}s=s.next}while(s!==n)}}function pm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function A2(e){var t=e.alternate;t!==null&&(e.alternate=null,A2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hs],delete t[Nc],delete t[ag],delete t[SA],delete t[kA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _2(e){return e.tag===5||e.tag===3||e.tag===4}function ab(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ff));else if(n!==4&&(e=e.child,e!==null))for(bg(e,t,r),e=e.sibling;e!==null;)bg(e,t,r),e=e.sibling}function wg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(wg(e,t,r),e=e.sibling;e!==null;)wg(e,t,r),e=e.sibling}var yr=null,$n=!1;function ma(e,t,r){for(r=r.child;r!==null;)P2(e,t,r),r=r.sibling}function P2(e,t,r){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(om,r)}catch{}switch(r.tag){case 5:Dr||uo(r,t);case 6:var n=yr,s=$n;yr=null,ma(e,t,r),yr=n,$n=s,yr!==null&&($n?(e=yr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):yr.removeChild(r.stateNode));break;case 18:yr!==null&&($n?(e=yr,r=r.stateNode,e.nodeType===8?Bh(e.parentNode,r):e.nodeType===1&&Bh(e,r),yc(e)):Bh(yr,r.stateNode));break;case 4:n=yr,s=$n,yr=r.stateNode.containerInfo,$n=!0,ma(e,t,r),yr=n,$n=s;break;case 0:case 11:case 14:case 15:if(!Dr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xg(r,t,o),s=s.next}while(s!==n)}ma(e,t,r);break;case 1:if(!Dr&&(uo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ht(r,t,l)}ma(e,t,r);break;case 21:ma(e,t,r);break;case 22:r.mode&1?(Dr=(n=Dr)||r.memoizedState!==null,ma(e,t,r),Dr=n):ma(e,t,r);break;default:ma(e,t,r)}}function ib(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new WA),t.forEach(function(n){var s=XA.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Mn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:yr=l.stateNode,$n=!1;break e;case 3:yr=l.stateNode.containerInfo,$n=!0;break e;case 4:yr=l.stateNode.containerInfo,$n=!0;break e}l=l.return}if(yr===null)throw Error(Ae(160));P2(i,o,s),yr=null,$n=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ht(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)M2(t,e),t=t.sibling}function M2(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mn(t,e),as(e),n&4){try{Zl(3,e,e.return),pm(3,e)}catch(p){Ht(e,e.return,p)}try{Zl(5,e,e.return)}catch(p){Ht(e,e.return,p)}}break;case 1:Mn(t,e),as(e),n&512&&r!==null&&uo(r,r.return);break;case 5:if(Mn(t,e),as(e),n&512&&r!==null&&uo(r,r.return),e.flags&32){var s=e.stateNode;try{mc(s,"")}catch(p){Ht(e,e.return,p)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&t1(s,i),Vp(l,o);var u=Vp(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?i1(s,f):d==="dangerouslySetInnerHTML"?s1(s,f):d==="children"?mc(s,f):_y(s,d,f,u)}switch(l){case"input":Bp(s,i);break;case"textarea":r1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ho(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?ho(s,!!i.multiple,i.defaultValue,!0):ho(s,!!i.multiple,i.multiple?[]:"",!1))}s[Nc]=i}catch(p){Ht(e,e.return,p)}}break;case 6:if(Mn(t,e),as(e),n&4){if(e.stateNode===null)throw Error(Ae(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(p){Ht(e,e.return,p)}}break;case 3:if(Mn(t,e),as(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{yc(t.containerInfo)}catch(p){Ht(e,e.return,p)}break;case 4:Mn(t,e),as(e);break;case 13:Mn(t,e),as(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ux=Yt())),n&4&&ib(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Dr=(u=Dr)||d,Mn(t,e),Dr=u):Mn(t,e),as(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for($e=e,d=e.child;d!==null;){for(f=$e=d;$e!==null;){switch(m=$e,y=m.child,m.tag){case 0:case 11:case 14:case 15:Zl(4,m,m.return);break;case 1:uo(m,m.return);var j=m.stateNode;if(typeof j.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(p){Ht(n,r,p)}}break;case 5:uo(m,m.return);break;case 22:if(m.memoizedState!==null){lb(f);continue}}y!==null?(y.return=m,$e=y):lb(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=a1("display",o))}catch(p){Ht(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Ht(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mn(t,e),as(e),n&4&&ib(e);break;case 21:break;default:Mn(t,e),as(e)}}function as(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(_2(r)){var n=r;break e}r=r.return}throw Error(Ae(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(mc(s,""),n.flags&=-33);var i=ab(e);wg(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=ab(e);bg(e,l,o);break;default:throw Error(Ae(161))}}catch(c){Ht(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function UA(e,t,r){$e=e,R2(e)}function R2(e,t,r){for(var n=(e.mode&1)!==0;$e!==null;){var s=$e,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ed;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Dr;l=ed;var u=Dr;if(ed=o,(Dr=c)&&!u)for($e=s;$e!==null;)o=$e,c=o.child,o.tag===22&&o.memoizedState!==null?cb(s):c!==null?(c.return=o,$e=c):cb(s);for(;i!==null;)$e=i,R2(i),i=i.sibling;$e=s,ed=l,Dr=u}ob(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$e=i):ob(e)}}function ob(e){for(;$e!==null;){var t=$e;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dr||pm(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Dr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Rn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Vv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Vv(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&yc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Dr||t.flags&512&&vg(t)}catch(m){Ht(t,t.return,m)}}if(t===e){$e=null;break}if(r=t.sibling,r!==null){r.return=t.return,$e=r;break}$e=t.return}}function lb(e){for(;$e!==null;){var t=$e;if(t===e){$e=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$e=r;break}$e=t.return}}function cb(e){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{pm(4,t)}catch(c){Ht(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Ht(t,s,c)}}var i=t.return;try{vg(t)}catch(c){Ht(t,i,c)}break;case 5:var o=t.return;try{vg(t)}catch(c){Ht(t,o,c)}}}catch(c){Ht(t,t.return,c)}if(t===e){$e=null;break}var l=t.sibling;if(l!==null){l.return=t.return,$e=l;break}$e=t.return}}var zA=Math.ceil,jf=la.ReactCurrentDispatcher,lx=la.ReactCurrentOwner,Sn=la.ReactCurrentBatchConfig,lt=0,hr=null,Jt=null,xr=0,sn=0,fo=Ja(0),ar=0,Ec=null,Pi=0,gm=0,cx=0,ec=null,Yr=null,ux=0,Bo=1/0,Bs=null,Sf=!1,Ng=null,Wa=null,td=!1,Ma=null,kf=0,tc=0,jg=null,Pd=-1,Md=0;function Br(){return lt&6?Yt():Pd!==-1?Pd:Pd=Yt()}function Ha(e){return e.mode&1?lt&2&&xr!==0?xr&-xr:CA.transition!==null?(Md===0&&(Md=x1()),Md):(e=yt,e!==0||(e=window.event,e=e===void 0?16:k1(e.type)),e):1}function Yn(e,t,r,n){if(50<tc)throw tc=0,jg=null,Error(Ae(185));su(e,r,n),(!(lt&2)||e!==hr)&&(e===hr&&(!(lt&2)&&(gm|=r),ar===4&&ja(e,xr)),Qr(e,n),r===1&&lt===0&&!(t.mode&1)&&(Bo=Yt()+500,fm&&Za()))}function Qr(e,t){var r=e.callbackNode;CT(e,t);var n=lf(e,e===hr?xr:0);if(n===0)r!==null&&xv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&xv(r),t===1)e.tag===0?DA(ub.bind(null,e)):z1(ub.bind(null,e)),NA(function(){!(lt&6)&&Za()}),r=null;else{switch(v1(n)){case 1:r=Iy;break;case 4:r=g1;break;case 16:r=of;break;case 536870912:r=y1;break;default:r=of}r=H2(r,O2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function O2(e,t){if(Pd=-1,Md=0,lt&6)throw Error(Ae(327));var r=e.callbackNode;if(vo()&&e.callbackNode!==r)return null;var n=lf(e,e===hr?xr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Df(e,n);else{t=n;var s=lt;lt|=2;var i=L2();(hr!==e||xr!==t)&&(Bs=null,Bo=Yt()+500,ji(e,t));do try{qA();break}catch(l){I2(e,l)}while(!0);Gy(),jf.current=i,lt=s,Jt!==null?t=0:(hr=null,xr=0,t=ar)}if(t!==0){if(t===2&&(s=Qp(e),s!==0&&(n=s,t=Sg(e,s))),t===1)throw r=Ec,ji(e,0),ja(e,n),Qr(e,Yt()),r;if(t===6)ja(e,n);else{if(s=e.current.alternate,!(n&30)&&!VA(s)&&(t=Df(e,n),t===2&&(i=Qp(e),i!==0&&(n=i,t=Sg(e,i))),t===1))throw r=Ec,ji(e,0),ja(e,n),Qr(e,Yt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Ae(345));case 2:ii(e,Yr,Bs);break;case 3:if(ja(e,n),(n&130023424)===n&&(t=ux+500-Yt(),10<t)){if(lf(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Br(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=sg(ii.bind(null,e,Yr,Bs),t);break}ii(e,Yr,Bs);break;case 4:if(ja(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Vn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=Yt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zA(n/1960))-n,10<n){e.timeoutHandle=sg(ii.bind(null,e,Yr,Bs),n);break}ii(e,Yr,Bs);break;case 5:ii(e,Yr,Bs);break;default:throw Error(Ae(329))}}}return Qr(e,Yt()),e.callbackNode===r?O2.bind(null,e):null}function Sg(e,t){var r=ec;return e.current.memoizedState.isDehydrated&&(ji(e,t).flags|=256),e=Df(e,t),e!==2&&(t=Yr,Yr=r,t!==null&&kg(t)),e}function kg(e){Yr===null?Yr=e:Yr.push.apply(Yr,e)}function VA(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!qn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ja(e,t){for(t&=~cx,t&=~gm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Vn(t),n=1<<r;e[r]=-1,t&=~n}}function ub(e){if(lt&6)throw Error(Ae(327));vo();var t=lf(e,0);if(!(t&1))return Qr(e,Yt()),null;var r=Df(e,t);if(e.tag!==0&&r===2){var n=Qp(e);n!==0&&(t=n,r=Sg(e,n))}if(r===1)throw r=Ec,ji(e,0),ja(e,t),Qr(e,Yt()),r;if(r===6)throw Error(Ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ii(e,Yr,Bs),Qr(e,Yt()),null}function dx(e,t){var r=lt;lt|=1;try{return e(t)}finally{lt=r,lt===0&&(Bo=Yt()+500,fm&&Za())}}function Mi(e){Ma!==null&&Ma.tag===0&&!(lt&6)&&vo();var t=lt;lt|=1;var r=Sn.transition,n=yt;try{if(Sn.transition=null,yt=1,e)return e()}finally{yt=n,Sn.transition=r,lt=t,!(lt&6)&&Za()}}function fx(){sn=fo.current,Ct(fo)}function ji(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,wA(r)),Jt!==null)for(r=Jt.return;r!==null;){var n=r;switch(Yy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mf();break;case 3:$o(),Ct(Kr),Ct(Tr),tx();break;case 5:ex(n);break;case 4:$o();break;case 13:Ct(It);break;case 19:Ct(It);break;case 10:Qy(n.type._context);break;case 22:case 23:fx()}r=r.return}if(hr=e,Jt=e=Ua(e.current,null),xr=sn=t,ar=0,Ec=null,cx=gm=Pi=0,Yr=ec=null,di!==null){for(t=0;t<di.length;t++)if(r=di[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}di=null}return e}function I2(e,t){do{var r=Jt;try{if(Gy(),Td.current=Nf,wf){for(var n=Lt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}wf=!1}if(_i=0,fr=rr=Lt=null,Jl=!1,kc=0,lx.current=null,r===null||r.return===null){ar=1,Ec=t,Jt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=xr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Xv(o);if(y!==null){y.flags&=-257,Jv(y,o,l,i,t),y.mode&1&&Qv(i,u,t),t=y,c=u;var j=t.updateQueue;if(j===null){var p=new Set;p.add(c),t.updateQueue=p}else j.add(c);break e}else{if(!(t&1)){Qv(i,u,t),mx();break e}c=Error(Ae(426))}}else if(Rt&&l.mode&1){var k=Xv(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Jv(k,o,l,i,t),qy(Fo(c,l));break e}}i=c=Fo(c,l),ar!==4&&(ar=2),ec===null?ec=[i]:ec.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=v2(i,c,t);zv(i,h);break e;case 1:l=c;var v=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Wa===null||!Wa.has(S)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=b2(i,l,t);zv(i,x);break e}}i=i.return}while(i!==null)}F2(r)}catch(T){t=T,Jt===r&&r!==null&&(Jt=r=r.return);continue}break}while(!0)}function L2(){var e=jf.current;return jf.current=Nf,e===null?Nf:e}function mx(){(ar===0||ar===3||ar===2)&&(ar=4),hr===null||!(Pi&268435455)&&!(gm&268435455)||ja(hr,xr)}function Df(e,t){var r=lt;lt|=2;var n=L2();(hr!==e||xr!==t)&&(Bs=null,ji(e,t));do try{YA();break}catch(s){I2(e,s)}while(!0);if(Gy(),lt=r,jf.current=n,Jt!==null)throw Error(Ae(261));return hr=null,xr=0,ar}function YA(){for(;Jt!==null;)$2(Jt)}function qA(){for(;Jt!==null&&!xT();)$2(Jt)}function $2(e){var t=W2(e.alternate,e,sn);e.memoizedProps=e.pendingProps,t===null?F2(e):Jt=t,lx.current=null}function F2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=BA(r,t),r!==null){r.flags&=32767,Jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ar=6,Jt=null;return}}else if(r=FA(r,t,sn),r!==null){Jt=r;return}if(t=t.sibling,t!==null){Jt=t;return}Jt=t=e}while(t!==null);ar===0&&(ar=5)}function ii(e,t,r){var n=yt,s=Sn.transition;try{Sn.transition=null,yt=1,KA(e,t,r,n)}finally{Sn.transition=s,yt=n}return null}function KA(e,t,r,n){do vo();while(Ma!==null);if(lt&6)throw Error(Ae(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ae(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ET(e,i),e===hr&&(Jt=hr=null,xr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||td||(td=!0,H2(of,function(){return vo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Sn.transition,Sn.transition=null;var o=yt;yt=1;var l=lt;lt|=4,lx.current=null,HA(e,r),M2(r,e),hA(rg),cf=!!tg,rg=tg=null,e.current=r,UA(r),vT(),lt=l,yt=o,Sn.transition=i}else e.current=r;if(td&&(td=!1,Ma=e,kf=s),i=e.pendingLanes,i===0&&(Wa=null),NT(r.stateNode),Qr(e,Yt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Sf)throw Sf=!1,e=Ng,Ng=null,e;return kf&1&&e.tag!==0&&vo(),i=e.pendingLanes,i&1?e===jg?tc++:(tc=0,jg=e):tc=0,Za(),null}function vo(){if(Ma!==null){var e=v1(kf),t=Sn.transition,r=yt;try{if(Sn.transition=null,yt=16>e?16:e,Ma===null)var n=!1;else{if(e=Ma,Ma=null,kf=0,lt&6)throw Error(Ae(331));var s=lt;for(lt|=4,$e=e.current;$e!==null;){var i=$e,o=i.child;if($e.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for($e=u;$e!==null;){var d=$e;switch(d.tag){case 0:case 11:case 15:Zl(8,d,i)}var f=d.child;if(f!==null)f.return=d,$e=f;else for(;$e!==null;){d=$e;var m=d.sibling,y=d.return;if(A2(d),d===u){$e=null;break}if(m!==null){m.return=y,$e=m;break}$e=y}}}var j=i.alternate;if(j!==null){var p=j.child;if(p!==null){j.child=null;do{var k=p.sibling;p.sibling=null,p=k}while(p!==null)}}$e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$e=o;else e:for(;$e!==null;){if(i=$e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zl(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,$e=h;break e}$e=i.return}}var v=e.current;for($e=v;$e!==null;){o=$e;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,$e=S;else e:for(o=v;$e!==null;){if(l=$e,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:pm(9,l)}}catch(T){Ht(l,l.return,T)}if(l===o){$e=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,$e=x;break e}$e=l.return}}if(lt=s,Za(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(om,e)}catch{}n=!0}return n}finally{yt=r,Sn.transition=t}}return!1}function db(e,t,r){t=Fo(r,t),t=v2(e,t,1),e=Ba(e,t,1),t=Br(),e!==null&&(su(e,1,t),Qr(e,t))}function Ht(e,t,r){if(e.tag===3)db(e,e,r);else for(;t!==null;){if(t.tag===3){db(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Wa===null||!Wa.has(n))){e=Fo(r,e),e=b2(t,e,1),t=Ba(t,e,1),e=Br(),t!==null&&(su(t,1,e),Qr(t,e));break}}t=t.return}}function GA(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Br(),e.pingedLanes|=e.suspendedLanes&r,hr===e&&(xr&r)===r&&(ar===4||ar===3&&(xr&130023424)===xr&&500>Yt()-ux?ji(e,0):cx|=r),Qr(e,t)}function B2(e,t){t===0&&(e.mode&1?(t=Vu,Vu<<=1,!(Vu&130023424)&&(Vu=4194304)):t=1);var r=Br();e=ta(e,t),e!==null&&(su(e,t,r),Qr(e,r))}function QA(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),B2(e,r)}function XA(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ae(314))}n!==null&&n.delete(t),B2(e,r)}var W2;W2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kr.current)qr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qr=!1,$A(e,t,r);qr=!!(e.flags&131072)}else qr=!1,Rt&&t.flags&1048576&&V1(t,gf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;_d(e,t),e=t.pendingProps;var s=Oo(t,Tr.current);xo(t,r),s=nx(null,t,n,e,s,r);var i=sx();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gr(n)?(i=!0,hf(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jy(t),s.updater=hm,t.stateNode=s,s._reactInternals=t,dg(t,n,e,r),t=hg(null,t,n,!0,i,r)):(t.tag=0,Rt&&i&&Vy(t),Or(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(_d(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=ZA(n),e=Rn(n,e),s){case 0:t=mg(null,t,n,e,r);break e;case 1:t=tb(null,t,n,e,r);break e;case 11:t=Zv(null,t,n,e,r);break e;case 14:t=eb(null,t,n,Rn(n.type,e),r);break e}throw Error(Ae(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rn(n,s),mg(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rn(n,s),tb(e,t,n,s,r);case 3:e:{if(S2(t),e===null)throw Error(Ae(387));n=t.pendingProps,i=t.memoizedState,s=i.element,X1(e,t),vf(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Fo(Error(Ae(423)),t),t=rb(e,t,n,r,s);break e}else if(n!==s){s=Fo(Error(Ae(424)),t),t=rb(e,t,n,r,s);break e}else for(on=Fa(t.stateNode.containerInfo.firstChild),ln=t,Rt=!0,Bn=null,r=G1(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Io(),n===s){t=ra(e,t,r);break e}Or(e,t,n,r)}t=t.child}return t;case 5:return J1(t),e===null&&lg(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,ng(n,s)?o=null:i!==null&&ng(n,i)&&(t.flags|=32),j2(e,t),Or(e,t,o,r),t.child;case 6:return e===null&&lg(t),null;case 13:return k2(e,t,r);case 4:return Zy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Lo(t,null,n,r):Or(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rn(n,s),Zv(e,t,n,s,r);case 7:return Or(e,t,t.pendingProps,r),t.child;case 8:return Or(e,t,t.pendingProps.children,r),t.child;case 12:return Or(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,jt(yf,n._currentValue),n._currentValue=o,i!==null)if(qn(i.value,o)){if(i.children===s.children&&!Kr.current){t=ra(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Gs(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),cg(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ae(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),cg(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Or(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,xo(t,r),s=kn(s),n=n(s),t.flags|=1,Or(e,t,n,r),t.child;case 14:return n=t.type,s=Rn(n,t.pendingProps),s=Rn(n.type,s),eb(e,t,n,s,r);case 15:return w2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rn(n,s),_d(e,t),t.tag=1,Gr(n)?(e=!0,hf(t)):e=!1,xo(t,r),x2(t,n,s),dg(t,n,s,r),hg(null,t,n,!0,e,r);case 19:return D2(e,t,r);case 22:return N2(e,t,r)}throw Error(Ae(156,t.tag))};function H2(e,t){return p1(e,t)}function JA(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,r,n){return new JA(e,t,r,n)}function hx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ZA(e){if(typeof e=="function")return hx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===My)return 11;if(e===Ry)return 14}return 2}function Ua(e,t){var r=e.alternate;return r===null?(r=jn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Rd(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")hx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case to:return Si(r.children,s,i,t);case Py:o=8,s|=8;break;case Op:return e=jn(12,r,t,s|2),e.elementType=Op,e.lanes=i,e;case Ip:return e=jn(13,r,t,s),e.elementType=Ip,e.lanes=i,e;case Lp:return e=jn(19,r,t,s),e.elementType=Lp,e.lanes=i,e;case Jj:return ym(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qj:o=10;break e;case Xj:o=9;break e;case My:o=11;break e;case Ry:o=14;break e;case va:o=16,n=null;break e}throw Error(Ae(130,e==null?e:typeof e,""))}return t=jn(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Si(e,t,r,n){return e=jn(7,e,n,t),e.lanes=r,e}function ym(e,t,r,n){return e=jn(22,e,n,t),e.elementType=Jj,e.lanes=r,e.stateNode={isHidden:!1},e}function Kh(e,t,r){return e=jn(6,e,null,t),e.lanes=r,e}function Gh(e,t,r){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function e_(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Th(0),this.expirationTimes=Th(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Th(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function px(e,t,r,n,s,i,o,l,c){return e=new e_(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=jn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jy(i),e}function t_(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function U2(e){if(!e)return qa;e=e._reactInternals;e:{if(Ui(e)!==e||e.tag!==1)throw Error(Ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Gr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ae(171))}if(e.tag===1){var r=e.type;if(Gr(r))return U1(e,r,t)}return t}function z2(e,t,r,n,s,i,o,l,c){return e=px(r,n,!0,e,s,i,o,l,c),e.context=U2(null),r=e.current,n=Br(),s=Ha(r),i=Gs(n,s),i.callback=t??null,Ba(r,i,s),e.current.lanes=s,su(e,s,n),Qr(e,n),e}function xm(e,t,r,n){var s=t.current,i=Br(),o=Ha(s);return r=U2(r),t.context===null?t.context=r:t.pendingContext=r,t=Gs(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ba(s,t,o),e!==null&&(Yn(e,s,o,i),Ed(e,s,o)),o}function Cf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gx(e,t){fb(e,t),(e=e.alternate)&&fb(e,t)}function r_(){return null}var V2=typeof reportError=="function"?reportError:function(e){console.error(e)};function yx(e){this._internalRoot=e}vm.prototype.render=yx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ae(409));xm(e,t,null,null)};vm.prototype.unmount=yx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mi(function(){xm(null,e,null,null)}),t[ea]=null}};function vm(e){this._internalRoot=e}vm.prototype.unstable_scheduleHydration=function(e){if(e){var t=N1();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Na.length&&t!==0&&t<Na[r].priority;r++);Na.splice(r,0,e),r===0&&S1(e)}};function xx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mb(){}function n_(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Cf(o);i.call(u)}}var o=z2(t,n,e,0,null,!1,!1,"",mb);return e._reactRootContainer=o,e[ea]=o.current,bc(e.nodeType===8?e.parentNode:e),Mi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Cf(c);l.call(u)}}var c=px(e,0,!1,null,null,!1,!1,"",mb);return e._reactRootContainer=c,e[ea]=c.current,bc(e.nodeType===8?e.parentNode:e),Mi(function(){xm(t,c,r,n)}),c}function wm(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Cf(o);l.call(c)}}xm(t,o,e,s)}else o=n_(r,t,e,s,n);return Cf(o)}b1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Wl(t.pendingLanes);r!==0&&(Ly(t,r|1),Qr(t,Yt()),!(lt&6)&&(Bo=Yt()+500,Za()))}break;case 13:Mi(function(){var n=ta(e,1);if(n!==null){var s=Br();Yn(n,e,1,s)}}),gx(e,1)}};$y=function(e){if(e.tag===13){var t=ta(e,134217728);if(t!==null){var r=Br();Yn(t,e,134217728,r)}gx(e,134217728)}};w1=function(e){if(e.tag===13){var t=Ha(e),r=ta(e,t);if(r!==null){var n=Br();Yn(r,e,t,n)}gx(e,t)}};N1=function(){return yt};j1=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}};qp=function(e,t,r){switch(t){case"input":if(Bp(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=dm(n);if(!s)throw Error(Ae(90));e1(n),Bp(n,s)}}}break;case"textarea":r1(e,r);break;case"select":t=r.value,t!=null&&ho(e,!!r.multiple,t,!1)}};c1=dx;u1=Mi;var s_={usingClientEntryPoint:!1,Events:[iu,ao,dm,o1,l1,dx]},El={findFiberByHostInstance:ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a_={bundleType:El.bundleType,version:El.version,rendererPackageName:El.rendererPackageName,rendererConfig:El.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:la.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=m1(e),e===null?null:e.stateNode},findFiberByHostInstance:El.findFiberByHostInstance||r_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{om=rd.inject(a_),vs=rd}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s_;dn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xx(t))throw Error(Ae(200));return t_(e,t,null,r)};dn.createRoot=function(e,t){if(!xx(e))throw Error(Ae(299));var r=!1,n="",s=V2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=px(e,1,!1,null,null,r,!1,n,s),e[ea]=t.current,bc(e.nodeType===8?e.parentNode:e),new yx(t)};dn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ae(188)):(e=Object.keys(e).join(","),Error(Ae(268,e)));return e=m1(t),e=e===null?null:e.stateNode,e};dn.flushSync=function(e){return Mi(e)};dn.hydrate=function(e,t,r){if(!bm(t))throw Error(Ae(200));return wm(null,e,t,!0,r)};dn.hydrateRoot=function(e,t,r){if(!xx(e))throw Error(Ae(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=V2;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=z2(t,null,e,1,r??null,s,!1,i,o),e[ea]=t.current,bc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new vm(t)};dn.render=function(e,t,r){if(!bm(t))throw Error(Ae(200));return wm(null,e,t,!1,r)};dn.unmountComponentAtNode=function(e){if(!bm(e))throw Error(Ae(40));return e._reactRootContainer?(Mi(function(){wm(null,null,e,!1,function(){e._reactRootContainer=null,e[ea]=null})}),!0):!1};dn.unstable_batchedUpdates=dx;dn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bm(r))throw Error(Ae(200));if(e==null||e._reactInternals===void 0)throw Error(Ae(38));return wm(e,t,r,!1,n)};dn.version="18.3.1-next-f1338f8080-20240426";function Y2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y2)}catch(e){console.error(e)}}Y2(),Yj.exports=dn;var mi=Yj.exports;const q2=Wr(mi);var K2,hb=mi;K2=hb.createRoot,hb.hydrateRoot;/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pb="popstate";function i_(e={}){function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Dg("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Tc(s)}return l_(t,r,null,e)}function Ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function o_(){return Math.random().toString(36).substring(2,10)}function gb(e,t){return{usr:e.state,key:e.key,idx:t}}function Dg(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Zo(t):t,state:r,key:t&&t.key||n||o_()}}function Tc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function l_(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let k=d(),h=k==null?null:k-u;u=k,c&&c({action:l,location:p.location,delta:h})}function m(k,h){l="PUSH";let v=Dg(p.location,k,h);u=d()+1;let S=gb(v,u),x=p.createHref(v);try{o.pushState(S,"",x)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(x)}i&&c&&c({action:l,location:p.location,delta:1})}function y(k,h){l="REPLACE";let v=Dg(p.location,k,h);u=d();let S=gb(v,u),x=p.createHref(v);o.replaceState(S,"",x),i&&c&&c({action:l,location:p.location,delta:0})}function j(k){return c_(k)}let p={get action(){return l},get location(){return e(s,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(pb,f),c=k,()=>{s.removeEventListener(pb,f),c=null}},createHref(k){return t(s,k)},createURL:j,encodeLocation(k){let h=j(k);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:m,replace:y,go(k){return o.go(k)}};return p}function c_(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ot(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Tc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function G2(e,t,r="/"){return u_(e,t,r,!1)}function u_(e,t,r,n){let s=typeof t=="string"?Zo(t):t,i=na(s.pathname||"/",r);if(i==null)return null;let o=Q2(e);d_(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=N_(i);l=b_(o[c],u,n)}return l}function Q2(e,t=[],r=[],n="",s=!1){let i=(o,l,c=s,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;Ot(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Qs([n,d.relativePath]),m=r.concat(d);o.children&&o.children.length>0&&(Ot(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Q2(o.children,t,m,f,c)),!(o.path==null&&!o.index)&&t.push({path:f,score:x_(f,o.index),routesMeta:m})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let u of X2(o.path))i(o,l,!0,u)}),t}function X2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=X2(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function d_(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:v_(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var f_=/^:[\w-]+$/,m_=3,h_=2,p_=1,g_=10,y_=-2,yb=e=>e==="*";function x_(e,t){let r=e.split("/"),n=r.length;return r.some(yb)&&(n+=y_),t&&(n+=h_),r.filter(s=>!yb(s)).reduce((s,i)=>s+(f_.test(i)?m_:i===""?p_:g_),n)}function v_(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function b_(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Ef({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=Ef({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Qs([i,f.pathname]),pathnameBase:D_(Qs([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Qs([i,f.pathnameBase]))}return o}function Ef(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=w_(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let j=l[m]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const y=l[m];return f&&!y?u[d]=void 0:u[d]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function w_(e,t=!1,r=!0){Kn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function N_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function na(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function j_(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Zo(e):e;return{pathname:r?r.startsWith("/")?r:S_(r,t):t,search:C_(n),hash:E_(s)}}function S_(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Qh(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k_(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function vx(e){let t=k_(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function bx(e,t,r,n=!1){let s;typeof e=="string"?s=Zo(e):(s={...e},Ot(!s.pathname||!s.pathname.includes("?"),Qh("?","pathname","search",s)),Ot(!s.pathname||!s.pathname.includes("#"),Qh("#","pathname","hash",s)),Ot(!s.search||!s.search.includes("#"),Qh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=j_(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Qs=e=>e.join("/").replace(/\/\/+/g,"/"),D_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),C_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,E_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function T_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var J2=["POST","PUT","PATCH","DELETE"];new Set(J2);var A_=["GET",...J2];new Set(A_);var el=b.createContext(null);el.displayName="DataRouter";var Nm=b.createContext(null);Nm.displayName="DataRouterState";b.createContext(!1);var Z2=b.createContext({isTransitioning:!1});Z2.displayName="ViewTransition";var __=b.createContext(new Map);__.displayName="Fetchers";var P_=b.createContext(null);P_.displayName="Await";var es=b.createContext(null);es.displayName="Navigation";var lu=b.createContext(null);lu.displayName="Location";var ts=b.createContext({outlet:null,matches:[],isDataRoute:!1});ts.displayName="Route";var wx=b.createContext(null);wx.displayName="RouteError";function M_(e,{relative:t}={}){Ot(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=b.useContext(es),{hash:s,pathname:i,search:o}=cu(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Qs([r,i])),n.createHref({pathname:l,search:o,hash:s})}function tl(){return b.useContext(lu)!=null}function ca(){return Ot(tl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(lu).location}var eS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tS(e){b.useContext(es).static||b.useLayoutEffect(e)}function jm(){let{isDataRoute:e}=b.useContext(ts);return e?K_():R_()}function R_(){Ot(tl(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(el),{basename:t,navigator:r}=b.useContext(es),{matches:n}=b.useContext(ts),{pathname:s}=ca(),i=JSON.stringify(vx(n)),o=b.useRef(!1);return tS(()=>{o.current=!0}),b.useCallback((c,u={})=>{if(Kn(o.current,eS),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=bx(c,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Qs([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,s,e])}var O_=b.createContext(null);function I_(e){let t=b.useContext(ts).outlet;return b.useMemo(()=>t&&b.createElement(O_.Provider,{value:e},t),[t,e])}function cu(e,{relative:t}={}){let{matches:r}=b.useContext(ts),{pathname:n}=ca(),s=JSON.stringify(vx(r));return b.useMemo(()=>bx(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function L_(e,t){return rS(e,t)}function rS(e,t,r,n,s){var v;Ot(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=b.useContext(es),{matches:o}=b.useContext(ts),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let S=f&&f.path||"";nS(u,!f||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let m=ca(),y;if(t){let S=typeof t=="string"?Zo(t):t;Ot(d==="/"||((v=S.pathname)==null?void 0:v.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${S.pathname}" was given in the \`location\` prop.`),y=S}else y=m;let j=y.pathname||"/",p=j;if(d!=="/"){let S=d.replace(/^\//,"").split("/");p="/"+j.replace(/^\//,"").split("/").slice(S.length).join("/")}let k=G2(e,{pathname:p});Kn(f||k!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Kn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let h=H_(k&&k.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:Qs([d,i.encodeLocation?i.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:Qs([d,i.encodeLocation?i.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,r,n,s);return t&&h?b.createElement(lu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},h):h}function $_(){let e=q_(),t=T_(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:s},r):null,o)}var F_=b.createElement($_,null),B_=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?b.createElement(ts.Provider,{value:this.props.routeContext},b.createElement(wx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function W_({routeContext:e,match:t,children:r}){let n=b.useContext(el);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(ts.Provider,{value:e},r)}function H_(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let u=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Ot(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(r)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:m}=r,y=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,f)=>{let m,y=!1,j=null,p=null;r&&(m=o&&d.route.id?o[d.route.id]:void 0,j=d.route.errorElement||F_,l&&(c<0&&f===0?(nS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,p=null):c===f&&(y=!0,p=d.route.hydrateFallbackElement||null)));let k=t.concat(i.slice(0,f+1)),h=()=>{let v;return m?v=j:y?v=p:d.route.Component?v=b.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,b.createElement(W_,{match:d,routeContext:{outlet:u,matches:k,isDataRoute:r!=null},children:v})};return r&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(B_,{location:r.location,revalidation:r.revalidation,component:j,error:m,children:h(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:n}):h()},null)}function Nx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U_(e){let t=b.useContext(el);return Ot(t,Nx(e)),t}function z_(e){let t=b.useContext(Nm);return Ot(t,Nx(e)),t}function V_(e){let t=b.useContext(ts);return Ot(t,Nx(e)),t}function jx(e){let t=V_(e),r=t.matches[t.matches.length-1];return Ot(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Y_(){return jx("useRouteId")}function q_(){var n;let e=b.useContext(wx),t=z_("useRouteError"),r=jx("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function K_(){let{router:e}=U_("useNavigate"),t=jx("useNavigate"),r=b.useRef(!1);return tS(()=>{r.current=!0}),b.useCallback(async(s,i={})=>{Kn(r.current,eS),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var xb={};function nS(e,t,r){!t&&!xb[e]&&(xb[e]=!0,Kn(!1,r))}b.memo(G_);function G_({routes:e,future:t,state:r,unstable_onError:n}){return rS(e,void 0,r,n,t)}function Sm({to:e,replace:t,state:r,relative:n}){Ot(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=b.useContext(es);Kn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=b.useContext(ts),{pathname:o}=ca(),l=jm(),c=bx(e,vx(i),o,n==="path"),u=JSON.stringify(c);return b.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function Q_(e){return I_(e.context)}function tr(e){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function X_({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Ot(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=Zo(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:m="default"}=r,y=b.useMemo(()=>{let j=na(c,o);return j==null?null:{location:{pathname:j,search:u,hash:d,state:f,key:m},navigationType:n}},[o,c,u,d,f,m,n]);return Kn(y!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:b.createElement(es.Provider,{value:l},b.createElement(lu.Provider,{children:t,value:y}))}function J_({children:e,location:t}){return L_(Cg(e),t)}function Cg(e,t=[]){let r=[];return b.Children.forEach(e,(n,s)=>{if(!b.isValidElement(n))return;let i=[...t,s];if(n.type===b.Fragment){r.push.apply(r,Cg(n.props.children,i));return}Ot(n.type===tr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Cg(n.props.children,i)),r.push(o)}),r}var Od="get",Id="application/x-www-form-urlencoded";function km(e){return e!=null&&typeof e.tagName=="string"}function Z_(e){return km(e)&&e.tagName.toLowerCase()==="button"}function eP(e){return km(e)&&e.tagName.toLowerCase()==="form"}function tP(e){return km(e)&&e.tagName.toLowerCase()==="input"}function rP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nP(e,t){return e.button===0&&(!t||t==="_self")&&!rP(e)}var nd=null;function sP(){if(nd===null)try{new FormData(document.createElement("form"),0),nd=!1}catch{nd=!0}return nd}var aP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xh(e){return e!=null&&!aP.has(e)?(Kn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Id}"`),null):e}function iP(e,t){let r,n,s,i,o;if(eP(e)){let l=e.getAttribute("action");n=l?na(l,t):null,r=e.getAttribute("method")||Od,s=Xh(e.getAttribute("enctype"))||Id,i=new FormData(e)}else if(Z_(e)||tP(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?na(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||Od,s=Xh(e.getAttribute("formenctype"))||Xh(l.getAttribute("enctype"))||Id,i=new FormData(l,e),!sP()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,f)}}else{if(km(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Od,n=null,s=Id,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oP(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&na(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function lP(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cP(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function uP(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await lP(i,r);return o.links?o.links():[]}return[]}));return hP(n.flat(1).filter(cP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function vb(e,t,r,n,s,i){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function dP(e,t,{includeHydrateFallback:r}={}){return fP(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function fP(e){return[...new Set(e)]}function mP(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function hP(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(mP(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function sS(){let e=b.useContext(el);return Sx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pP(){let e=b.useContext(Nm);return Sx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var kx=b.createContext(void 0);kx.displayName="FrameworkContext";function aS(){let e=b.useContext(kx);return Sx(e,"You must render this element inside a <HydratedRouter> element"),e}function gP(e,t){let r=b.useContext(kx),[n,s]=b.useState(!1),[i,o]=b.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=b.useRef(null);b.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let p=h=>{h.forEach(v=>{o(v.isIntersecting)})},k=new IntersectionObserver(p,{threshold:.5});return m.current&&k.observe(m.current),()=>{k.disconnect()}}},[e]),b.useEffect(()=>{if(n){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[n]);let y=()=>{s(!0)},j=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Tl(l,y),onBlur:Tl(c,j),onMouseEnter:Tl(u,y),onMouseLeave:Tl(d,j),onTouchStart:Tl(f,y)}]:[!1,m,{}]}function Tl(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function yP({page:e,...t}){let{router:r}=sS(),n=b.useMemo(()=>G2(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?b.createElement(vP,{page:e,matches:n,...t}):null}function xP(e){let{manifest:t,routeModules:r}=aS(),[n,s]=b.useState([]);return b.useEffect(()=>{let i=!1;return uP(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function vP({page:e,matches:t,...r}){let n=ca(),{manifest:s,routeModules:i}=aS(),{basename:o}=sS(),{loaderData:l,matches:c}=pP(),u=b.useMemo(()=>vb(e,t,c,s,n,"data"),[e,t,c,s,n]),d=b.useMemo(()=>vb(e,t,c,s,n,"assets"),[e,t,c,s,n]),f=b.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,p=!1;if(t.forEach(h=>{var S;let v=s.routes[h.route.id];!v||!v.hasLoader||(!u.some(x=>x.route.id===h.route.id)&&h.route.id in l&&((S=i[h.route.id])!=null&&S.shouldRevalidate)||v.hasClientLoader?p=!0:j.add(h.route.id))}),j.size===0)return[];let k=oP(e,o,"data");return p&&j.size>0&&k.searchParams.set("_routes",t.filter(h=>j.has(h.route.id)).map(h=>h.route.id).join(",")),[k.pathname+k.search]},[o,l,n,s,u,t,e,i]),m=b.useMemo(()=>dP(d,s),[d,s]),y=xP(d);return b.createElement(b.Fragment,null,f.map(j=>b.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),m.map(j=>b.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),y.map(({key:j,link:p})=>b.createElement("link",{key:j,nonce:r.nonce,...p})))}function bP(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var iS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iS&&(window.__reactRouterVersion="7.9.4")}catch{}function wP({basename:e,children:t,window:r}){let n=b.useRef();n.current==null&&(n.current=i_({window:r,v5Compat:!0}));let s=n.current,[i,o]=b.useState({action:s.action,location:s.location}),l=b.useCallback(c=>{b.startTransition(()=>o(c))},[o]);return b.useLayoutEffect(()=>s.listen(l),[s,l]),b.createElement(X_,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var oS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lS=b.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...m},y){let{basename:j}=b.useContext(es),p=typeof u=="string"&&oS.test(u),k,h=!1;if(typeof u=="string"&&p&&(k=u,iS))try{let O=new URL(window.location.href),R=u.startsWith("//")?new URL(O.protocol+u):new URL(u),K=na(R.pathname,j);R.origin===O.origin&&K!=null?u=K+R.search+R.hash:h=!0}catch{Kn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=M_(u,{relative:s}),[S,x,T]=gP(n,m),E=SP(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function _(O){t&&t(O),O.defaultPrevented||E(O)}let M=b.createElement("a",{...m,...T,href:k||v,onClick:h||i?t:_,ref:bP(y,x),target:c,"data-discover":!p&&r==="render"?"true":void 0});return S&&!p?b.createElement(b.Fragment,null,M,b.createElement(yP,{page:v})):M});lS.displayName="Link";var Eg=b.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let f=cu(o,{relative:u.relative}),m=ca(),y=b.useContext(Nm),{navigator:j,basename:p}=b.useContext(es),k=y!=null&&TP(f)&&l===!0,h=j.encodeLocation?j.encodeLocation(f).pathname:f.pathname,v=m.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(v=v.toLowerCase(),S=S?S.toLowerCase():null,h=h.toLowerCase()),S&&p&&(S=na(S,p)||S);const x=h!=="/"&&h.endsWith("/")?h.length-1:h.length;let T=v===h||!s&&v.startsWith(h)&&v.charAt(x)==="/",E=S!=null&&(S===h||!s&&S.startsWith(h)&&S.charAt(h.length)==="/"),_={isActive:T,isPending:E,isTransitioning:k},M=T?t:void 0,O;typeof n=="function"?O=n(_):O=[n,T?"active":null,E?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(_):i;return b.createElement(lS,{...u,"aria-current":M,className:O,ref:d,style:R,to:o,viewTransition:l},typeof c=="function"?c(_):c)});Eg.displayName="NavLink";var NP=b.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=Od,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...m},y)=>{let j=CP(),p=EP(l,{relative:u}),k=o.toLowerCase()==="get"?"get":"post",h=typeof l=="string"&&oS.test(l),v=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let x=S.nativeEvent.submitter,T=(x==null?void 0:x.getAttribute("formmethod"))||o;j(x||S.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:f})};return b.createElement("form",{ref:y,method:k,action:p,onSubmit:n?c:v,...m,"data-discover":!h&&e==="render"?"true":void 0})});NP.displayName="Form";function jP(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cS(e){let t=b.useContext(el);return Ot(t,jP(e)),t}function SP(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=jm(),c=ca(),u=cu(e,{relative:i});return b.useCallback(d=>{if(nP(d,t)){d.preventDefault();let f=r!==void 0?r:Tc(c)===Tc(u);l(e,{replace:f,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,u,r,n,t,e,s,i,o])}var kP=0,DP=()=>`__${String(++kP)}__`;function CP(){let{router:e}=cS("useSubmit"),{basename:t}=b.useContext(es),r=Y_();return b.useCallback(async(n,s={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=iP(n,t);if(s.navigate===!1){let d=s.fetcherKey||DP();await e.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function EP(e,{relative:t}={}){let{basename:r}=b.useContext(es),n=b.useContext(ts);Ot(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...cu(e||".",{relative:t})},o=ca();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Qs([r,i.pathname])),Tc(i)}function TP(e,{relative:t}={}){let r=b.useContext(Z2);Ot(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=cS("useViewTransitionState"),s=cu(e,{relative:t});if(!r.isTransitioning)return!1;let i=na(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=na(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ef(s.pathname,o)!=null||Ef(s.pathname,i)!=null}var Dm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},AP={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Da,Sy,Dj,_P=(Dj=class{constructor(){nt(this,Da,AP);nt(this,Sy,!1)}setTimeoutProvider(e){Ue(this,Da,e)}setTimeout(e,t){return be(this,Da).setTimeout(e,t)}clearTimeout(e){be(this,Da).clearTimeout(e)}setInterval(e,t){return be(this,Da).setInterval(e,t)}clearInterval(e){be(this,Da).clearInterval(e)}},Da=new WeakMap,Sy=new WeakMap,Dj),Tg=new _P;function PP(e){setTimeout(e,0)}var Cm=typeof window>"u"||"Deno"in globalThis;function On(){}function MP(e,t){return typeof e=="function"?e(t):e}function RP(e){return typeof e=="number"&&e>=0&&e!==1/0}function OP(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ag(e,t){return typeof e=="function"?e(t):e}function IP(e,t){return typeof e=="function"?e(t):e}function bb(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Dx(o,t.options))return!1}else if(!_c(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function wb(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ac(t.options.mutationKey)!==Ac(i))return!1}else if(!_c(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function Dx(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ac)(e)}function Ac(e){return JSON.stringify(e,(t,r)=>_g(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function _c(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>_c(e[r],t[r])):!1}var LP=Object.prototype.hasOwnProperty;function uS(e,t){if(e===t)return e;const r=Nb(e)&&Nb(t);if(!r&&!(_g(e)&&_g(t)))return t;const s=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=r?u:i[u],f=e[d],m=t[d];if(f===m){l[d]=f,(r?u<s:LP.call(e,d))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[d]=m;continue}const y=uS(f,m);l[d]=y,y===f&&c++}return s===o&&c===s?e:l}function Nb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function _g(e){if(!jb(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!jb(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function jb(e){return Object.prototype.toString.call(e)==="[object Object]"}function $P(e){return new Promise(t=>{Tg.setTimeout(t,e)})}function FP(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?uS(e,t):t}function BP(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function WP(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Cx=Symbol();function dS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Cx?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var yi,Ca,Do,Cj,HP=(Cj=class extends Dm{constructor(){super();nt(this,yi);nt(this,Ca);nt(this,Do);Ue(this,Do,t=>{if(!Cm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){be(this,Ca)||this.setEventListener(be(this,Do))}onUnsubscribe(){var t;this.hasListeners()||((t=be(this,Ca))==null||t.call(this),Ue(this,Ca,void 0))}setEventListener(t){var r;Ue(this,Do,t),(r=be(this,Ca))==null||r.call(this),Ue(this,Ca,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){be(this,yi)!==t&&(Ue(this,yi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof be(this,yi)=="boolean"?be(this,yi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},yi=new WeakMap,Ca=new WeakMap,Do=new WeakMap,Cj),fS=new HP;function UP(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var zP=PP;function VP(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=zP;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Lr=VP(),Co,Ea,Eo,Ej,YP=(Ej=class extends Dm{constructor(){super();nt(this,Co,!0);nt(this,Ea);nt(this,Eo);Ue(this,Eo,t=>{if(!Cm&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){be(this,Ea)||this.setEventListener(be(this,Eo))}onUnsubscribe(){var t;this.hasListeners()||((t=be(this,Ea))==null||t.call(this),Ue(this,Ea,void 0))}setEventListener(t){var r;Ue(this,Eo,t),(r=be(this,Ea))==null||r.call(this),Ue(this,Ea,t(this.setOnline.bind(this)))}setOnline(t){be(this,Co)!==t&&(Ue(this,Co,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return be(this,Co)}},Co=new WeakMap,Ea=new WeakMap,Eo=new WeakMap,Ej),Tf=new YP;function qP(e){return Math.min(1e3*2**e,3e4)}function mS(e){return(e??"online")==="online"?Tf.isOnline():!0}var Pg=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function hS(e){let t=!1,r=0,n;const s=UP(),i=()=>s.status!=="pending",o=p=>{var k;if(!i()){const h=new Pg(p);m(h),(k=e.onCancel)==null||k.call(e,h)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>fS.isFocused()&&(e.networkMode==="always"||Tf.isOnline())&&e.canRun(),d=()=>mS(e.networkMode)&&e.canRun(),f=p=>{i()||(n==null||n(),s.resolve(p))},m=p=>{i()||(n==null||n(),s.reject(p))},y=()=>new Promise(p=>{var k;n=h=>{(i()||u())&&p(h)},(k=e.onPause)==null||k.call(e)}).then(()=>{var p;n=void 0,i()||(p=e.onContinue)==null||p.call(e)}),j=()=>{if(i())return;let p;const k=r===0?e.initialPromise:void 0;try{p=k??e.fn()}catch(h){p=Promise.reject(h)}Promise.resolve(p).then(f).catch(h=>{var E;if(i())return;const v=e.retry??(Cm?0:3),S=e.retryDelay??qP,x=typeof S=="function"?S(r,h):S,T=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,h);if(t||!T){m(h);return}r++,(E=e.onFail)==null||E.call(e,r,h),$P(x).then(()=>u()?void 0:y()).then(()=>{t?m(h):j()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?j():y().then(j),s)}}var xi,Tj,pS=(Tj=class{constructor(){nt(this,xi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),RP(this.gcTime)&&Ue(this,xi,Tg.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Cm?1/0:5*60*1e3))}clearGcTimeout(){be(this,xi)&&(Tg.clearTimeout(be(this,xi)),Ue(this,xi,void 0))}},xi=new WeakMap,Tj),vi,To,hn,bi,dr,eu,wi,In,Fs,Aj,KP=(Aj=class extends pS{constructor(t){super();nt(this,In);nt(this,vi);nt(this,To);nt(this,hn);nt(this,bi);nt(this,dr);nt(this,eu);nt(this,wi);Ue(this,wi,!1),Ue(this,eu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ue(this,bi,t.client),Ue(this,hn,be(this,bi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ue(this,vi,Sb(this.options)),this.state=t.state??be(this,vi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=be(this,dr))==null?void 0:t.promise}setOptions(t){if(this.options={...be(this,eu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Sb(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Ue(this,vi,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&be(this,hn).remove(this)}setData(t,r){const n=FP(this.state.data,t,this.options);return Nr(this,In,Fs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Nr(this,In,Fs).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=be(this,dr))==null?void 0:n.promise;return(s=be(this,dr))==null||s.cancel(t),r?r.then(On).catch(On):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(be(this,vi))}isActive(){return this.observers.some(t=>IP(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ag(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!OP(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=be(this,dr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=be(this,dr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),be(this,hn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(be(this,dr)&&(be(this,wi)?be(this,dr).cancel({revert:!0}):be(this,dr).cancelRetry()),this.scheduleGc()),be(this,hn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Nr(this,In,Fs).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,f,m,y,j,p,k,h,v,S;if(this.state.fetchStatus!=="idle"&&((c=be(this,dr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(be(this,dr))return be(this,dr).continueRetry(),be(this,dr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const x=this.observers.find(T=>T.options.queryFn);x&&this.setOptions(x.options)}const n=new AbortController,s=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(Ue(this,wi,!0),n.signal)})},i=()=>{const x=dS(this.options,r),E=(()=>{const _={client:be(this,bi),queryKey:this.queryKey,meta:this.meta};return s(_),_})();return Ue(this,wi,!1),this.options.persister?this.options.persister(x,E,this):x(E)},l=(()=>{const x={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:be(this,bi),state:this.state,fetchFn:i};return s(x),x})();(u=this.options.behavior)==null||u.onFetch(l,this),Ue(this,To,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Nr(this,In,Fs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),Ue(this,dr,hS({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:x=>{x instanceof Pg&&x.revert&&this.setState({...be(this,To),fetchStatus:"idle"}),n.abort()},onFail:(x,T)=>{Nr(this,In,Fs).call(this,{type:"failed",failureCount:x,error:T})},onPause:()=>{Nr(this,In,Fs).call(this,{type:"pause"})},onContinue:()=>{Nr(this,In,Fs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const x=await be(this,dr).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(y=(m=be(this,hn).config).onSuccess)==null||y.call(m,x,this),(p=(j=be(this,hn).config).onSettled)==null||p.call(j,x,this.state.error,this),x}catch(x){if(x instanceof Pg){if(x.silent)return be(this,dr).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Nr(this,In,Fs).call(this,{type:"error",error:x}),(h=(k=be(this,hn).config).onError)==null||h.call(k,x,this),(S=(v=be(this,hn).config).onSettled)==null||S.call(v,this.state.data,x,this),x}finally{this.scheduleGc()}}},vi=new WeakMap,To=new WeakMap,hn=new WeakMap,bi=new WeakMap,dr=new WeakMap,eu=new WeakMap,wi=new WeakMap,In=new WeakSet,Fs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...GP(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ue(this,To,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Lr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),be(this,hn).notify({query:this,type:"updated",action:t})})},Aj);function GP(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Sb(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function kb(e){return{onFetch:(t,r)=>{var d,f,m,y,j;const n=t.options,s=(m=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],o=((j=t.state.data)==null?void 0:j.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const k=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},h=dS(t.options,t.fetchOptions),v=async(S,x,T)=>{if(p)return Promise.reject();if(x==null&&S.pages.length)return Promise.resolve(S);const _=(()=>{const K={client:t.client,queryKey:t.queryKey,pageParam:x,direction:T?"backward":"forward",meta:t.options.meta};return k(K),K})(),M=await h(_),{maxPages:O}=t.options,R=T?WP:BP;return{pages:R(S.pages,M,O),pageParams:R(S.pageParams,x,O)}};if(s&&i.length){const S=s==="backward",x=S?QP:Db,T={pages:i,pageParams:o},E=x(n,T);l=await v(T,E,S)}else{const S=e??i.length;do{const x=c===0?o[0]??n.initialPageParam:Db(n,l);if(c>0&&x==null)break;l=await v(l,x),c++}while(c<S)}return l};t.options.persister?t.fetchFn=()=>{var p,k;return(k=(p=t.options).persister)==null?void 0:k.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Db(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function QP(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var tu,us,Rr,Ni,ds,ga,_j,XP=(_j=class extends pS{constructor(t){super();nt(this,ds);nt(this,tu);nt(this,us);nt(this,Rr);nt(this,Ni);Ue(this,tu,t.client),this.mutationId=t.mutationId,Ue(this,Rr,t.mutationCache),Ue(this,us,[]),this.state=t.state||JP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){be(this,us).includes(t)||(be(this,us).push(t),this.clearGcTimeout(),be(this,Rr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ue(this,us,be(this,us).filter(r=>r!==t)),this.scheduleGc(),be(this,Rr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){be(this,us).length||(this.state.status==="pending"?this.scheduleGc():be(this,Rr).remove(this))}continue(){var t;return((t=be(this,Ni))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,d,f,m,y,j,p,k,h,v,S,x,T,E,_,M,O;const r=()=>{Nr(this,ds,ga).call(this,{type:"continue"})},n={client:be(this,tu),meta:this.options.meta,mutationKey:this.options.mutationKey};Ue(this,Ni,hS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(R,K)=>{Nr(this,ds,ga).call(this,{type:"failed",failureCount:R,error:K})},onPause:()=>{Nr(this,ds,ga).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>be(this,Rr).canRun(this)}));const s=this.state.status==="pending",i=!be(this,Ni).canStart();try{if(s)r();else{Nr(this,ds,ga).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=be(this,Rr).config).onMutate)==null?void 0:l.call(o,t,this,n));const K=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));K!==this.state.context&&Nr(this,ds,ga).call(this,{type:"pending",context:K,variables:t,isPaused:i})}const R=await be(this,Ni).start();return await((f=(d=be(this,Rr).config).onSuccess)==null?void 0:f.call(d,R,t,this.state.context,this,n)),await((y=(m=this.options).onSuccess)==null?void 0:y.call(m,R,t,this.state.context,n)),await((p=(j=be(this,Rr).config).onSettled)==null?void 0:p.call(j,R,null,this.state.variables,this.state.context,this,n)),await((h=(k=this.options).onSettled)==null?void 0:h.call(k,R,null,t,this.state.context,n)),Nr(this,ds,ga).call(this,{type:"success",data:R}),R}catch(R){try{throw await((S=(v=be(this,Rr).config).onError)==null?void 0:S.call(v,R,t,this.state.context,this,n)),await((T=(x=this.options).onError)==null?void 0:T.call(x,R,t,this.state.context,n)),await((_=(E=be(this,Rr).config).onSettled)==null?void 0:_.call(E,void 0,R,this.state.variables,this.state.context,this,n)),await((O=(M=this.options).onSettled)==null?void 0:O.call(M,void 0,R,t,this.state.context,n)),R}finally{Nr(this,ds,ga).call(this,{type:"error",error:R})}}finally{be(this,Rr).runNext(this)}}},tu=new WeakMap,us=new WeakMap,Rr=new WeakMap,Ni=new WeakMap,ds=new WeakSet,ga=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Lr.batch(()=>{be(this,us).forEach(n=>{n.onMutationUpdate(t)}),be(this,Rr).notify({mutation:this,type:"updated",action:t})})},_j);function JP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Us,Ln,ru,Pj,ZP=(Pj=class extends Dm{constructor(t={}){super();nt(this,Us);nt(this,Ln);nt(this,ru);this.config=t,Ue(this,Us,new Set),Ue(this,Ln,new Map),Ue(this,ru,0)}build(t,r,n){const s=new XP({client:t,mutationCache:this,mutationId:++Fu(this,ru)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){be(this,Us).add(t);const r=sd(t);if(typeof r=="string"){const n=be(this,Ln).get(r);n?n.push(t):be(this,Ln).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(be(this,Us).delete(t)){const r=sd(t);if(typeof r=="string"){const n=be(this,Ln).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&be(this,Ln).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=sd(t);if(typeof r=="string"){const n=be(this,Ln).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=sd(t);if(typeof r=="string"){const s=(n=be(this,Ln).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Lr.batch(()=>{be(this,Us).forEach(t=>{this.notify({type:"removed",mutation:t})}),be(this,Us).clear(),be(this,Ln).clear()})}getAll(){return Array.from(be(this,Us))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>wb(r,n))}findAll(t={}){return this.getAll().filter(r=>wb(t,r))}notify(t){Lr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Lr.batch(()=>Promise.all(t.map(r=>r.continue().catch(On))))}},Us=new WeakMap,Ln=new WeakMap,ru=new WeakMap,Pj);function sd(e){var t;return(t=e.options.scope)==null?void 0:t.id}var fs,Mj,e3=(Mj=class extends Dm{constructor(t={}){super();nt(this,fs);this.config=t,Ue(this,fs,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??Dx(s,r);let o=this.get(i);return o||(o=new KP({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){be(this,fs).has(t.queryHash)||(be(this,fs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=be(this,fs).get(t.queryHash);r&&(t.destroy(),r===t&&be(this,fs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Lr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return be(this,fs).get(t)}getAll(){return[...be(this,fs).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>bb(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>bb(t,n)):r}notify(t){Lr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Lr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Lr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},fs=new WeakMap,Mj),Wt,Ta,Aa,Ao,_o,_a,Po,Mo,Rj,t3=(Rj=class{constructor(e={}){nt(this,Wt);nt(this,Ta);nt(this,Aa);nt(this,Ao);nt(this,_o);nt(this,_a);nt(this,Po);nt(this,Mo);Ue(this,Wt,e.queryCache||new e3),Ue(this,Ta,e.mutationCache||new ZP),Ue(this,Aa,e.defaultOptions||{}),Ue(this,Ao,new Map),Ue(this,_o,new Map),Ue(this,_a,0)}mount(){Fu(this,_a)._++,be(this,_a)===1&&(Ue(this,Po,fS.subscribe(async e=>{e&&(await this.resumePausedMutations(),be(this,Wt).onFocus())})),Ue(this,Mo,Tf.subscribe(async e=>{e&&(await this.resumePausedMutations(),be(this,Wt).onOnline())})))}unmount(){var e,t;Fu(this,_a)._--,be(this,_a)===0&&((e=be(this,Po))==null||e.call(this),Ue(this,Po,void 0),(t=be(this,Mo))==null||t.call(this),Ue(this,Mo,void 0))}isFetching(e){return be(this,Wt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return be(this,Ta).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=be(this,Wt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=be(this,Wt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ag(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return be(this,Wt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=be(this,Wt).get(n.queryHash),i=s==null?void 0:s.state.data,o=MP(t,i);if(o!==void 0)return be(this,Wt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Lr.batch(()=>be(this,Wt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=be(this,Wt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=be(this,Wt);Lr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=be(this,Wt);return Lr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Lr.batch(()=>be(this,Wt).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(On).catch(On)}invalidateQueries(e,t={}){return Lr.batch(()=>(be(this,Wt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Lr.batch(()=>be(this,Wt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(On)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(On)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=be(this,Wt).build(this,t);return r.isStaleByTime(Ag(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(On).catch(On)}fetchInfiniteQuery(e){return e.behavior=kb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(On).catch(On)}ensureInfiniteQueryData(e){return e.behavior=kb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Tf.isOnline()?be(this,Ta).resumePausedMutations():Promise.resolve()}getQueryCache(){return be(this,Wt)}getMutationCache(){return be(this,Ta)}getDefaultOptions(){return be(this,Aa)}setDefaultOptions(e){Ue(this,Aa,e)}setQueryDefaults(e,t){be(this,Ao).set(Ac(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...be(this,Ao).values()],r={};return t.forEach(n=>{_c(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){be(this,_o).set(Ac(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...be(this,_o).values()],r={};return t.forEach(n=>{_c(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...be(this,Aa).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Dx(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Cx&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...be(this,Aa).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){be(this,Wt).clear(),be(this,Ta).clear()}},Wt=new WeakMap,Ta=new WeakMap,Aa=new WeakMap,Ao=new WeakMap,_o=new WeakMap,_a=new WeakMap,Po=new WeakMap,Mo=new WeakMap,Rj),r3=b.createContext(void 0),n3=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(r3.Provider,{value:e,children:t}));let s3={data:""},a3=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||s3},i3=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,o3=/\/\*[^]*?\*\/|  +/g,Cb=/\n+/g,Sa=(e,t)=>{let r="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Sa(o,i):i+"{"+Sa(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=Sa(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Sa.p?Sa.p(i,o):i+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+n},Rs={},gS=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+gS(e[r]);return t}return e},l3=(e,t,r,n,s)=>{let i=gS(e),o=Rs[i]||(Rs[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!Rs[o]){let c=i!==e?e:(u=>{let d,f,m=[{}];for(;d=i3.exec(u.replace(o3,""));)d[4]?m.shift():d[3]?(f=d[3].replace(Cb," ").trim(),m.unshift(m[0][f]=m[0][f]||{})):m[0][d[1]]=d[2].replace(Cb," ").trim();return m[0]})(e);Rs[o]=Sa(s?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Rs.g?Rs.g:null;return r&&(Rs.g=Rs[o]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Rs[o],t,n,l),o},c3=(e,t,r)=>e.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Sa(l,""):l===!1?"":l}return n+s+(o??"")},"");function Em(e){let t=this||{},r=e.call?e(t.p):e;return l3(r.unshift?r.raw?c3(r,[].slice.call(arguments,1),t.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):r,a3(t.target),t.g,t.o,t.k)}let yS,Mg,Rg;Em.bind({g:1});let sa=Em.bind({k:1});function u3(e,t,r,n){Sa.p=t,yS=e,Mg=r,Rg=n}function ei(e,t){let r=this||{};return function(){let n=arguments;function s(i,o){let l=Object.assign({},i),c=l.className||s.className;r.p=Object.assign({theme:Mg&&Mg()},l),r.o=/ *go\d+/.test(c),l.className=Em.apply(r,n)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Rg&&u[0]&&Rg(l),yS(u,l)}return s}}var d3=e=>typeof e=="function",Af=(e,t)=>d3(e)?e(t):e,f3=(()=>{let e=0;return()=>(++e).toString()})(),xS=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),m3=20,Ex="default",vS=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return vS(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Ld=[],bS={toasts:[],pausedAt:void 0,settings:{toastLimit:m3}},xs={},wS=(e,t=Ex)=>{xs[t]=vS(xs[t]||bS,e),Ld.forEach(([r,n])=>{r===t&&n(xs[t])})},NS=e=>Object.keys(xs).forEach(t=>wS(e,t)),h3=e=>Object.keys(xs).find(t=>xs[t].toasts.some(r=>r.id===e)),Tm=(e=Ex)=>t=>{wS(t,e)},p3={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},g3=(e={},t=Ex)=>{let[r,n]=b.useState(xs[t]||bS),s=b.useRef(xs[t]);b.useEffect(()=>(s.current!==xs[t]&&n(xs[t]),Ld.push([t,n]),()=>{let o=Ld.findIndex(([l])=>l===t);o>-1&&Ld.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var l,c,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||p3[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...r,toasts:i}},y3=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||f3()}),uu=e=>(t,r)=>{let n=y3(t,e,r);return Tm(n.toasterId||h3(n.id))({type:2,toast:n}),n.id},sr=(e,t)=>uu("blank")(e,t);sr.error=uu("error");sr.success=uu("success");sr.loading=uu("loading");sr.custom=uu("custom");sr.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Tm(t)(r):NS(r)};sr.dismissAll=e=>sr.dismiss(void 0,e);sr.remove=(e,t)=>{let r={type:4,toastId:e};t?Tm(t)(r):NS(r)};sr.removeAll=e=>sr.remove(void 0,e);sr.promise=(e,t,r)=>{let n=sr.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?Af(t.success,s):void 0;return i?sr.success(i,{id:n,...r,...r==null?void 0:r.success}):sr.dismiss(n),s}).catch(s=>{let i=t.error?Af(t.error,s):void 0;i?sr.error(i,{id:n,...r,...r==null?void 0:r.error}):sr.dismiss(n)}),e};var x3=1e3,v3=(e,t="default")=>{let{toasts:r,pausedAt:n}=g3(e,t),s=b.useRef(new Map).current,i=b.useCallback((f,m=x3)=>{if(s.has(f))return;let y=setTimeout(()=>{s.delete(f),o({type:4,toastId:f})},m);s.set(f,y)},[]);b.useEffect(()=>{if(n)return;let f=Date.now(),m=r.map(y=>{if(y.duration===1/0)return;let j=(y.duration||0)+y.pauseDuration-(f-y.createdAt);if(j<0){y.visible&&sr.dismiss(y.id);return}return setTimeout(()=>sr.dismiss(y.id,t),j)});return()=>{m.forEach(y=>y&&clearTimeout(y))}},[r,n,t]);let o=b.useCallback(Tm(t),[t]),l=b.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=b.useCallback((f,m)=>{o({type:1,toast:{id:f,height:m}})},[o]),u=b.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),d=b.useCallback((f,m)=>{let{reverseOrder:y=!1,gutter:j=8,defaultPosition:p}=m||{},k=r.filter(S=>(S.position||p)===(f.position||p)&&S.height),h=k.findIndex(S=>S.id===f.id),v=k.filter((S,x)=>x<h&&S.visible).length;return k.filter(S=>S.visible).slice(...y?[v+1]:[0,v]).reduce((S,x)=>S+(x.height||0)+j,0)},[r]);return b.useEffect(()=>{r.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let m=s.get(f.id);m&&(clearTimeout(m),s.delete(f.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},b3=sa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,w3=sa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,N3=sa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,j3=ei("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${b3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${w3} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${N3} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,S3=sa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,k3=ei("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${S3} 1s linear infinite;
`,D3=sa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,C3=sa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,E3=ei("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${D3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${C3} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,T3=ei("div")`
  position: absolute;
`,A3=ei("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,_3=sa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,P3=ei("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${_3} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,M3=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?b.createElement(P3,null,t):t:r==="blank"?null:b.createElement(A3,null,b.createElement(k3,{...n}),r!=="loading"&&b.createElement(T3,null,r==="error"?b.createElement(j3,{...n}):b.createElement(E3,{...n})))},R3=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,O3=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,I3="0%{opacity:0;} 100%{opacity:1;}",L3="0%{opacity:1;} 100%{opacity:0;}",$3=ei("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,F3=ei("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,B3=(e,t)=>{let r=e.includes("top")?1:-1,[n,s]=xS()?[I3,L3]:[R3(r),O3(r)];return{animation:t?`${sa(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sa(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},W3=b.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?B3(e.position||t||"top-center",e.visible):{opacity:0},i=b.createElement(M3,{toast:e}),o=b.createElement(F3,{...e.ariaProps},Af(e.message,e));return b.createElement($3,{className:e.className,style:{...s,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):b.createElement(b.Fragment,null,i,o))});u3(b.createElement);var H3=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let i=b.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return b.createElement("div",{ref:i,className:t,style:r},s)},U3=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}},z3=Em`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ad=16,V3=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:u}=v3(r,i);return b.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:ad,left:ad,right:ad,bottom:ad,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||t,m=u.calculateOffset(d,{reverseOrder:e,gutter:n,defaultPosition:t}),y=U3(f,m);return b.createElement(H3,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?z3:"",style:y},d.type==="custom"?Af(d.message,d):s?s(d):b.createElement(W3,{toast:d,position:f}))}))},H=sr;const Ss=Object.create(null);Ss.open="0";Ss.close="1";Ss.ping="2";Ss.pong="3";Ss.message="4";Ss.upgrade="5";Ss.noop="6";const $d=Object.create(null);Object.keys(Ss).forEach(e=>{$d[Ss[e]]=e});const Og={type:"error",data:"parser error"},jS=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",SS=typeof ArrayBuffer=="function",kS=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Tx=({type:e,data:t},r,n)=>jS&&t instanceof Blob?r?n(t):Eb(t,n):SS&&(t instanceof ArrayBuffer||kS(t))?r?n(t):Eb(new Blob([t]),n):n(Ss[e]+(t||"")),Eb=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function Tb(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Jh;function Y3(e,t){if(jS&&e.data instanceof Blob)return e.data.arrayBuffer().then(Tb).then(t);if(SS&&(e.data instanceof ArrayBuffer||kS(e.data)))return t(Tb(e.data));Tx(e,!1,r=>{Jh||(Jh=new TextEncoder),t(Jh.encode(r))})}const Ab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ul=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Ab.length;e++)Ul[Ab.charCodeAt(e)]=e;const q3=e=>{let t=e.length*.75,r=e.length,n,s=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(n=0;n<r;n+=4)i=Ul[e.charCodeAt(n)],o=Ul[e.charCodeAt(n+1)],l=Ul[e.charCodeAt(n+2)],c=Ul[e.charCodeAt(n+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},K3=typeof ArrayBuffer=="function",Ax=(e,t)=>{if(typeof e!="string")return{type:"message",data:DS(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:G3(e.substring(1),t)}:$d[r]?e.length>1?{type:$d[r],data:e.substring(1)}:{type:$d[r]}:Og},G3=(e,t)=>{if(K3){const r=q3(e);return DS(r,t)}else return{base64:!0,data:e}},DS=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},CS="",Q3=(e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach((i,o)=>{Tx(i,!1,l=>{n[o]=l,++s===r&&t(n.join(CS))})})},X3=(e,t)=>{const r=e.split(CS),n=[];for(let s=0;s<r.length;s++){const i=Ax(r[s],t);if(n.push(i),i.type==="error")break}return n};function J3(){return new TransformStream({transform(e,t){Y3(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let Zh;function id(e){return e.reduce((t,r)=>t+r.length,0)}function od(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function Z3(e,t){Zh||(Zh=new TextDecoder);const r=[];let n=0,s=-1,i=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(n===0){if(id(r)<1)break;const c=od(r,1);i=(c[0]&128)===128,s=c[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(id(r)<2)break;const c=od(r,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(id(r)<8)break;const c=od(r,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Og);break}s=d*Math.pow(2,32)+u.getUint32(4),n=3}else{if(id(r)<s)break;const c=od(r,s);l.enqueue(Ax(i?c:Zh.decode(c),t)),n=0}if(s===0||s>e){l.enqueue(Og);break}}}})}const ES=4;function Zt(e){if(e)return eM(e)}function eM(e){for(var t in Zt.prototype)e[t]=Zt.prototype[t];return e}Zt.prototype.on=Zt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Zt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Zt.prototype.off=Zt.prototype.removeListener=Zt.prototype.removeAllListeners=Zt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===t||n.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Zt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,t)}return this};Zt.prototype.emitReserved=Zt.prototype.emit;Zt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Zt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Am=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),vn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),tM="arraybuffer";function TS(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const rM=vn.setTimeout,nM=vn.clearTimeout;function _m(e,t){t.useNativeTimers?(e.setTimeoutFn=rM.bind(vn),e.clearTimeoutFn=nM.bind(vn)):(e.setTimeoutFn=vn.setTimeout.bind(vn),e.clearTimeoutFn=vn.clearTimeout.bind(vn))}const sM=1.33;function aM(e){return typeof e=="string"?iM(e):Math.ceil((e.byteLength||e.size)*sM)}function iM(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function AS(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function oM(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function lM(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class cM extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class _x extends Zt{constructor(t){super(),this.writable=!1,_m(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new cM(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Ax(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=oM(t);return r.length?"?"+r:""}}class uM extends _x{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};X3(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Q3(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=AS()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let _S=!1;try{_S=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dM=_S;function fM(){}class mM extends uM{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class ws extends Zt{constructor(t,r,n){super(),this.createRequest=t,_m(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=TS(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=ws.requestsCount++,ws.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=fM,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ws.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ws.requestsCount=0;ws.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_b);else if(typeof addEventListener=="function"){const e="onpagehide"in vn?"pagehide":"unload";addEventListener(e,_b,!1)}}function _b(){for(let e in ws.requests)ws.requests.hasOwnProperty(e)&&ws.requests[e].abort()}const hM=function(){const e=PS({xdomain:!1});return e&&e.responseType!==null}();class pM extends mM{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=hM&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new ws(PS,this.uri(),t)}}function PS(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||dM))return new XMLHttpRequest}catch{}if(!t)try{return new vn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const MS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class gM extends _x{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=MS?{}:TS(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;Tx(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&Am(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=AS()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const ep=vn.WebSocket||vn.MozWebSocket;class yM extends gM{createSocket(t,r,n){return MS?new ep(t,r,n):r?new ep(t,r):new ep(t)}doWrite(t,r){this.ws.send(r)}}class xM extends _x{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=Z3(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),s=J3();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;this._writer.write(n).then(()=>{s&&Am(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const vM={websocket:yM,webtransport:xM,polling:pM},bM=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,wM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ig(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=bM.exec(e||""),i={},o=14;for(;o--;)i[wM[o]]=s[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=NM(i,i.path),i.queryKey=jM(i,i.query),i}function NM(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function jM(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(r[s]=i)}),r}const Lg=typeof addEventListener=="function"&&typeof removeEventListener=="function",Fd=[];Lg&&addEventListener("offline",()=>{Fd.forEach(e=>e())},!1);class za extends Zt{constructor(t,r){if(super(),this.binaryType=tM,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Ig(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Ig(r.host).host);_m(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=lM(this.opts.query)),Lg&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Fd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=ES,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&za.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",za.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=aM(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Am(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(za.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Lg&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Fd.indexOf(this._offlineEventListener);n!==-1&&Fd.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}za.protocol=ES;class SM extends za{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;za.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;za.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function i(){n||(n=!0,d(),r.close(),r=null)}const o=f=>{const m=new Error("probe error: "+f);m.transport=r.name,i(),this.emitReserved("upgradeError",m)};function l(){o("transport closed")}function c(){o("socket closed")}function u(f){r&&f.name!==r.name&&i()}const d=()=>{r.removeListener("open",s),r.removeListener("error",o),r.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};r.once("open",s),r.once("error",o),r.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let kM=class extends SM{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>vM[s]).filter(s=>!!s)),super(t,n)}};function DM(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Ig(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const CM=typeof ArrayBuffer=="function",EM=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,RS=Object.prototype.toString,TM=typeof Blob=="function"||typeof Blob<"u"&&RS.call(Blob)==="[object BlobConstructor]",AM=typeof File=="function"||typeof File<"u"&&RS.call(File)==="[object FileConstructor]";function Px(e){return CM&&(e instanceof ArrayBuffer||EM(e))||TM&&e instanceof Blob||AM&&e instanceof File}function Bd(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Bd(e[r]))return!0;return!1}if(Px(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Bd(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Bd(e[r]))return!0;return!1}function _M(e){const t=[],r=e.data,n=e;return n.data=$g(r,t),n.attachments=t.length,{packet:n,buffers:t}}function $g(e,t){if(!e)return e;if(Px(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=$g(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=$g(e[n],t));return r}return e}function PM(e,t){return e.data=Fg(e.data,t),delete e.attachments,e}function Fg(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Fg(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Fg(e[r],t));return e}const MM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],RM=5;var st;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(st||(st={}));class OM{constructor(t){this.replacer=t}encode(t){return(t.type===st.EVENT||t.type===st.ACK)&&Bd(t)?this.encodeAsBinary({type:t.type===st.EVENT?st.BINARY_EVENT:st.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===st.BINARY_EVENT||t.type===st.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=_M(t),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function Pb(e){return Object.prototype.toString.call(e)==="[object Object]"}class Mx extends Zt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===st.BINARY_EVENT;n||r.type===st.BINARY_ACK?(r.type=n?st.EVENT:st.ACK,this.reconstructor=new IM(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Px(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(st[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===st.BINARY_EVENT||n.type===st.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Mx.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case st.CONNECT:return Pb(r);case st.DISCONNECT:return r===void 0;case st.CONNECT_ERROR:return typeof r=="string"||Pb(r);case st.EVENT:case st.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&MM.indexOf(r[0])===-1);case st.ACK:case st.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class IM{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=PM(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const LM=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Mx,Encoder:OM,get PacketType(){return st},protocol:RM},Symbol.toStringTag,{value:"Module"}));function Fn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const $M=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class OS extends Zt{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Fn(t,"open",this.onopen.bind(this)),Fn(t,"packet",this.onpacket.bind(this)),Fn(t,"error",this.onerror.bind(this)),Fn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,s,i;if($M.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:st.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,f=r.pop();this._registerAckCallback(d,f),o.id=d}const l=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},s),o=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,s)=>{const i=(o,l)=>o?s(o):n(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:st.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case st.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case st.EVENT:case st.BINARY_EVENT:this.onevent(t);break;case st.ACK:case st.BINARY_ACK:this.onack(t);break;case st.DISCONNECT:this.ondisconnect();break;case st.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:st.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:st.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function rl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}rl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};rl.prototype.reset=function(){this.attempts=0};rl.prototype.setMin=function(e){this.ms=e};rl.prototype.setMax=function(e){this.max=e};rl.prototype.setJitter=function(e){this.jitter=e};class Bg extends Zt{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,_m(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new rl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||LM;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new kM(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Fn(r,"open",function(){n.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=Fn(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Fn(t,"ping",this.onping.bind(this)),Fn(t,"data",this.ondata.bind(this)),Fn(t,"error",this.onerror.bind(this)),Fn(t,"close",this.onclose.bind(this)),Fn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Am(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new OS(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Al={};function Wd(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=DM(e,t.path||"/socket.io"),n=r.source,s=r.id,i=r.path,o=Al[s]&&i in Al[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new Bg(n,t):(Al[s]||(Al[s]=new Bg(n,t)),c=Al[s]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Wd,{Manager:Bg,Socket:OS,io:Wd,connect:Wd});const FM="modulepreload",BM=function(e){return"/"+e},Mb={},WM=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=BM(c),c in Mb)return;Mb[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":FM,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function HM(e={}){const{immediate:t=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let l,c,u;const d=async(m=!0)=>{await c,await(u==null?void 0:u())};async function f(){if("serviceWorker"in navigator){if(l=await WM(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{o==null||o(m)}),!l)return;u=async()=>{await(l==null?void 0:l.messageSkipWaiting())};{let m=!1;const y=()=>{m=!0,l==null||l.addEventListener("controlling",j=>{j.isUpdate&&window.location.reload()}),r==null||r()};l.addEventListener("installed",j=>{typeof j.isUpdate>"u"?typeof j.isExternal<"u"?j.isExternal?y():!m&&(n==null||n()):j.isExternal?window.location.reload():!m&&(n==null||n()):j.isUpdate||n==null||n()}),l.addEventListener("waiting",y),l.addEventListener("externalwaiting",y)}l.register({immediate:t}).then(m=>{i?i("/sw.js",m):s==null||s(m)}).catch(m=>{o==null||o(m)})}}return c=f(),d}function IS(e,t){return function(){return e.apply(t,arguments)}}const{toString:UM}=Object.prototype,{getPrototypeOf:Rx}=Object,{iterator:Pm,toStringTag:LS}=Symbol,Mm=(e=>t=>{const r=UM.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),rs=e=>(e=e.toLowerCase(),t=>Mm(t)===e),Rm=e=>t=>typeof t===e,{isArray:nl}=Array,Wo=Rm("undefined");function du(e){return e!==null&&!Wo(e)&&e.constructor!==null&&!Wo(e.constructor)&&Xr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $S=rs("ArrayBuffer");function zM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&$S(e.buffer),t}const VM=Rm("string"),Xr=Rm("function"),FS=Rm("number"),fu=e=>e!==null&&typeof e=="object",YM=e=>e===!0||e===!1,Hd=e=>{if(Mm(e)!=="object")return!1;const t=Rx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(LS in e)&&!(Pm in e)},qM=e=>{if(!fu(e)||du(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},KM=rs("Date"),GM=rs("File"),QM=rs("Blob"),XM=rs("FileList"),JM=e=>fu(e)&&Xr(e.pipe),ZM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Xr(e.append)&&((t=Mm(e))==="formdata"||t==="object"&&Xr(e.toString)&&e.toString()==="[object FormData]"))},eR=rs("URLSearchParams"),[tR,rR,nR,sR]=["ReadableStream","Request","Response","Headers"].map(rs),aR=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mu(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),nl(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(du(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function BS(e,t){if(du(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const hi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,WS=e=>!Wo(e)&&e!==hi;function Wg(){const{caseless:e,skipUndefined:t}=WS(this)&&this||{},r={},n=(s,i)=>{const o=e&&BS(r,i)||i;Hd(r[o])&&Hd(s)?r[o]=Wg(r[o],s):Hd(s)?r[o]=Wg({},s):nl(s)?r[o]=s.slice():(!t||!Wo(s))&&(r[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&mu(arguments[s],n);return r}const iR=(e,t,r,{allOwnKeys:n}={})=>(mu(t,(s,i)=>{r&&Xr(s)?e[i]=IS(s,r):e[i]=s},{allOwnKeys:n}),e),oR=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),lR=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},cR=(e,t,r,n)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&Rx(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},uR=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},dR=e=>{if(!e)return null;if(nl(e))return e;let t=e.length;if(!FS(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},fR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Rx(Uint8Array)),mR=(e,t)=>{const n=(e&&e[Pm]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},hR=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},pR=rs("HTMLFormElement"),gR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Rb=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),yR=rs("RegExp"),HS=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};mu(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},xR=e=>{HS(e,(t,r)=>{if(Xr(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Xr(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},vR=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return nl(e)?n(e):n(String(e).split(t)),r},bR=()=>{},wR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function NR(e){return!!(e&&Xr(e.append)&&e[LS]==="FormData"&&e[Pm])}const jR=e=>{const t=new Array(10),r=(n,s)=>{if(fu(n)){if(t.indexOf(n)>=0)return;if(du(n))return n;if(!("toJSON"in n)){t[s]=n;const i=nl(n)?[]:{};return mu(n,(o,l)=>{const c=r(o,s+1);!Wo(c)&&(i[l]=c)}),t[s]=void 0,i}}return n};return r(e,0)},SR=rs("AsyncFunction"),kR=e=>e&&(fu(e)||Xr(e))&&Xr(e.then)&&Xr(e.catch),US=((e,t)=>e?setImmediate:t?((r,n)=>(hi.addEventListener("message",({source:s,data:i})=>{s===hi&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),hi.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Xr(hi.postMessage)),DR=typeof queueMicrotask<"u"?queueMicrotask.bind(hi):typeof process<"u"&&process.nextTick||US,CR=e=>e!=null&&Xr(e[Pm]),he={isArray:nl,isArrayBuffer:$S,isBuffer:du,isFormData:ZM,isArrayBufferView:zM,isString:VM,isNumber:FS,isBoolean:YM,isObject:fu,isPlainObject:Hd,isEmptyObject:qM,isReadableStream:tR,isRequest:rR,isResponse:nR,isHeaders:sR,isUndefined:Wo,isDate:KM,isFile:GM,isBlob:QM,isRegExp:yR,isFunction:Xr,isStream:JM,isURLSearchParams:eR,isTypedArray:fR,isFileList:XM,forEach:mu,merge:Wg,extend:iR,trim:aR,stripBOM:oR,inherits:lR,toFlatObject:cR,kindOf:Mm,kindOfTest:rs,endsWith:uR,toArray:dR,forEachEntry:mR,matchAll:hR,isHTMLForm:pR,hasOwnProperty:Rb,hasOwnProp:Rb,reduceDescriptors:HS,freezeMethods:xR,toObjectSet:vR,toCamelCase:gR,noop:bR,toFiniteNumber:wR,findKey:BS,global:hi,isContextDefined:WS,isSpecCompliantForm:NR,toJSONObject:jR,isAsyncFn:SR,isThenable:kR,setImmediate:US,asap:DR,isIterable:CR};function Ve(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}he.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.status}}});const zS=Ve.prototype,VS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{VS[e]={value:e}});Object.defineProperties(Ve,VS);Object.defineProperty(zS,"isAxiosError",{value:!0});Ve.from=(e,t,r,n,s,i)=>{const o=Object.create(zS);he.toFlatObject(e,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Ve.call(o,l,c,r,n,s),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const ER=null;function Hg(e){return he.isPlainObject(e)||he.isArray(e)}function YS(e){return he.endsWith(e,"[]")?e.slice(0,-2):e}function Ob(e,t,r){return e?e.concat(t).map(function(s,i){return s=YS(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function TR(e){return he.isArray(e)&&!e.some(Hg)}const AR=he.toFlatObject(he,{},null,function(t){return/^is[A-Z]/.test(t)});function Om(e,t,r){if(!he.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=he.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,k){return!he.isUndefined(k[p])});const n=r.metaTokens,s=r.visitor||d,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(t);if(!he.isFunction(s))throw new TypeError("visitor must be a function");function u(j){if(j===null)return"";if(he.isDate(j))return j.toISOString();if(he.isBoolean(j))return j.toString();if(!c&&he.isBlob(j))throw new Ve("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(j)||he.isTypedArray(j)?c&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function d(j,p,k){let h=j;if(j&&!k&&typeof j=="object"){if(he.endsWith(p,"{}"))p=n?p:p.slice(0,-2),j=JSON.stringify(j);else if(he.isArray(j)&&TR(j)||(he.isFileList(j)||he.endsWith(p,"[]"))&&(h=he.toArray(j)))return p=YS(p),h.forEach(function(S,x){!(he.isUndefined(S)||S===null)&&t.append(o===!0?Ob([p],x,i):o===null?p:p+"[]",u(S))}),!1}return Hg(j)?!0:(t.append(Ob(k,p,i),u(j)),!1)}const f=[],m=Object.assign(AR,{defaultVisitor:d,convertValue:u,isVisitable:Hg});function y(j,p){if(!he.isUndefined(j)){if(f.indexOf(j)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(j),he.forEach(j,function(h,v){(!(he.isUndefined(h)||h===null)&&s.call(t,h,he.isString(v)?v.trim():v,p,m))===!0&&y(h,p?p.concat(v):[v])}),f.pop()}}if(!he.isObject(e))throw new TypeError("data must be an object");return y(e),t}function Ib(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Ox(e,t){this._pairs=[],e&&Om(e,this,t)}const qS=Ox.prototype;qS.append=function(t,r){this._pairs.push([t,r])};qS.toString=function(t){const r=t?function(n){return t.call(this,n,Ib)}:Ib;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function _R(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function KS(e,t,r){if(!t)return e;const n=r&&r.encode||_R;he.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=he.isURLSearchParams(t)?t.toString():new Ox(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Lb{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){he.forEach(this.handlers,function(n){n!==null&&t(n)})}}const GS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PR=typeof URLSearchParams<"u"?URLSearchParams:Ox,MR=typeof FormData<"u"?FormData:null,RR=typeof Blob<"u"?Blob:null,OR={isBrowser:!0,classes:{URLSearchParams:PR,FormData:MR,Blob:RR},protocols:["http","https","file","blob","url","data"]},Ix=typeof window<"u"&&typeof document<"u",Ug=typeof navigator=="object"&&navigator||void 0,IR=Ix&&(!Ug||["ReactNative","NativeScript","NS"].indexOf(Ug.product)<0),LR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$R=Ix&&window.location.href||"http://localhost",FR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ix,hasStandardBrowserEnv:IR,hasStandardBrowserWebWorkerEnv:LR,navigator:Ug,origin:$R},Symbol.toStringTag,{value:"Module"})),Cr={...FR,...OR};function BR(e,t){return Om(e,new Cr.classes.URLSearchParams,{visitor:function(r,n,s,i){return Cr.isNode&&he.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function WR(e){return he.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function HR(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function QS(e){function t(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&he.isArray(s)?s.length:o,c?(he.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!he.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],i)&&he.isArray(s[o])&&(s[o]=HR(s[o])),!l)}if(he.isFormData(e)&&he.isFunction(e.entries)){const r={};return he.forEachEntry(e,(n,s)=>{t(WR(n),s,r,0)}),r}return null}function UR(e,t,r){if(he.isString(e))try{return(t||JSON.parse)(e),he.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const hu={transitional:GS,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=he.isObject(t);if(i&&he.isHTMLForm(t)&&(t=new FormData(t)),he.isFormData(t))return s?JSON.stringify(QS(t)):t;if(he.isArrayBuffer(t)||he.isBuffer(t)||he.isStream(t)||he.isFile(t)||he.isBlob(t)||he.isReadableStream(t))return t;if(he.isArrayBufferView(t))return t.buffer;if(he.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return BR(t,this.formSerializer).toString();if((l=he.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Om(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),UR(t)):t}],transformResponse:[function(t){const r=this.transitional||hu.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(he.isResponse(t)||he.isReadableStream(t))return t;if(t&&he.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?Ve.from(l,Ve.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Cr.classes.FormData,Blob:Cr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],e=>{hu.headers[e]={}});const zR=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VR=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&zR[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},$b=Symbol("internals");function _l(e){return e&&String(e).trim().toLowerCase()}function Ud(e){return e===!1||e==null?e:he.isArray(e)?e.map(Ud):String(e)}function YR(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const qR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function tp(e,t,r,n,s){if(he.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!he.isString(t)){if(he.isString(n))return t.indexOf(n)!==-1;if(he.isRegExp(n))return n.test(t)}}function KR(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function GR(e,t){const r=he.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let Jr=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(l,c,u){const d=_l(c);if(!d)throw new Error("header name must be a non-empty string");const f=he.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=Ud(l))}const o=(l,c)=>he.forEach(l,(u,d)=>i(u,d,c));if(he.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(he.isString(t)&&(t=t.trim())&&!qR(t))o(VR(t),r);else if(he.isObject(t)&&he.isIterable(t)){let l={},c,u;for(const d of t){if(!he.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?he.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=_l(t),t){const n=he.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return YR(s);if(he.isFunction(r))return r.call(this,s,n);if(he.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=_l(t),t){const n=he.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||tp(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(o){if(o=_l(o),o){const l=he.findKey(n,o);l&&(!r||tp(n,n[l],l,r))&&(delete n[l],s=!0)}}return he.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||tp(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return he.forEach(this,(s,i)=>{const o=he.findKey(n,i);if(o){r[o]=Ud(s),delete r[i];return}const l=t?KR(i):String(i).trim();l!==i&&delete r[i],r[l]=Ud(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return he.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&he.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[$b]=this[$b]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=_l(o);n[l]||(GR(s,o),n[l]=!0)}return he.isArray(t)?t.forEach(i):i(t),this}};Jr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(Jr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});he.freezeMethods(Jr);function rp(e,t){const r=this||hu,n=t||r,s=Jr.from(n.headers);let i=n.data;return he.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function XS(e){return!!(e&&e.__CANCEL__)}function sl(e,t,r){Ve.call(this,e??"canceled",Ve.ERR_CANCELED,t,r),this.name="CanceledError"}he.inherits(sl,Ve,{__CANCEL__:!0});function JS(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Ve("Request failed with status code "+r.status,[Ve.ERR_BAD_REQUEST,Ve.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function QR(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function XR(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=n[i];o||(o=u),r[s]=c,n[s]=u;let f=i,m=0;for(;f!==s;)m+=r[f++],f=f%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-o<t)return;const y=d&&u-d;return y?Math.round(m*1e3/y):void 0}}function JR(e,t){let r=0,n=1e3/t,s,i;const o=(u,d=Date.now())=>{r=d,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-r;f>=n?o(u,d):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},n-f)))},()=>s&&o(s)]}const _f=(e,t,r=3)=>{let n=0;const s=XR(50,250);return JR(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,u=s(c),d=o<=l;n=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},r)},Fb=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Bb=e=>(...t)=>he.asap(()=>e(...t)),ZR=Cr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Cr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Cr.origin),Cr.navigator&&/(msie|trident)/i.test(Cr.navigator.userAgent)):()=>!0,e4=Cr.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];he.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),he.isString(n)&&o.push("path="+n),he.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function t4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function r4(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ZS(e,t,r){let n=!t4(t);return e&&(n||r==!1)?r4(e,t):t}const Wb=e=>e instanceof Jr?{...e}:e;function Ri(e,t){t=t||{};const r={};function n(u,d,f,m){return he.isPlainObject(u)&&he.isPlainObject(d)?he.merge.call({caseless:m},u,d):he.isPlainObject(d)?he.merge({},d):he.isArray(d)?d.slice():d}function s(u,d,f,m){if(he.isUndefined(d)){if(!he.isUndefined(u))return n(void 0,u,f,m)}else return n(u,d,f,m)}function i(u,d){if(!he.isUndefined(d))return n(void 0,d)}function o(u,d){if(he.isUndefined(d)){if(!he.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,f){if(f in t)return n(u,d);if(f in e)return n(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,f)=>s(Wb(u),Wb(d),f,!0)};return he.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||s,m=f(e[d],t[d],d);he.isUndefined(m)&&f!==l||(r[d]=m)}),r}const ek=e=>{const t=Ri({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Jr.from(o),t.url=KS(ZS(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),he.isFormData(r)){if(Cr.hasStandardBrowserEnv||Cr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(he.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{u.includes(d.toLowerCase())&&o.set(d,f)})}}if(Cr.hasStandardBrowserEnv&&(n&&he.isFunction(n)&&(n=n(t)),n||n!==!1&&ZR(t.url))){const c=s&&i&&e4.read(i);c&&o.set(s,c)}return t},n4=typeof XMLHttpRequest<"u",s4=n4&&function(e){return new Promise(function(r,n){const s=ek(e);let i=s.data;const o=Jr.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,f,m,y,j;function p(){y&&y(),j&&j(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function h(){if(!k)return;const S=Jr.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),T={data:!l||l==="text"||l==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:S,config:e,request:k};JS(function(_){r(_),p()},function(_){n(_),p()},T),k=null}"onloadend"in k?k.onloadend=h:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(h)},k.onabort=function(){k&&(n(new Ve("Request aborted",Ve.ECONNABORTED,e,k)),k=null)},k.onerror=function(x){const T=x&&x.message?x.message:"Network Error",E=new Ve(T,Ve.ERR_NETWORK,e,k);E.event=x||null,n(E),k=null},k.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||GS;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),n(new Ve(x,T.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,e,k)),k=null},i===void 0&&o.setContentType(null),"setRequestHeader"in k&&he.forEach(o.toJSON(),function(x,T){k.setRequestHeader(T,x)}),he.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),l&&l!=="json"&&(k.responseType=s.responseType),u&&([m,j]=_f(u,!0),k.addEventListener("progress",m)),c&&k.upload&&([f,y]=_f(c),k.upload.addEventListener("progress",f),k.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(d=S=>{k&&(n(!S||S.type?new sl(null,e,k):S),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const v=QR(s.url);if(v&&Cr.protocols.indexOf(v)===-1){n(new Ve("Unsupported protocol "+v+":",Ve.ERR_BAD_REQUEST,e));return}k.send(i||null)})},a4=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Ve?d:new sl(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,i(new Ve(`timeout ${t} of ms exceeded`,Ve.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>he.asap(l),c}},i4=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},o4=async function*(e,t){for await(const r of l4(e))yield*i4(r,t)},l4=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Hb=(e,t,r,n)=>{const s=o4(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let f=d.byteLength;if(r){let m=i+=f;r(m)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},Ub=64*1024,{isFunction:ld}=he,c4=(({Request:e,Response:t})=>({Request:e,Response:t}))(he.global),{ReadableStream:zb,TextEncoder:Vb}=he.global,Yb=(e,...t)=>{try{return!!e(...t)}catch{return!1}},u4=e=>{e=he.merge.call({skipUndefined:!0},c4,e);const{fetch:t,Request:r,Response:n}=e,s=t?ld(t):typeof fetch=="function",i=ld(r),o=ld(n);if(!s)return!1;const l=s&&ld(zb),c=s&&(typeof Vb=="function"?(j=>p=>j.encode(p))(new Vb):async j=>new Uint8Array(await new r(j).arrayBuffer())),u=i&&l&&Yb(()=>{let j=!1;const p=new r(Cr.origin,{body:new zb,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!p}),d=o&&l&&Yb(()=>he.isReadableStream(new n("").body)),f={stream:d&&(j=>j.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!f[j]&&(f[j]=(p,k)=>{let h=p&&p[j];if(h)return h.call(p);throw new Ve(`Response type '${j}' is not supported`,Ve.ERR_NOT_SUPPORT,k)})});const m=async j=>{if(j==null)return 0;if(he.isBlob(j))return j.size;if(he.isSpecCompliantForm(j))return(await new r(Cr.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(he.isArrayBufferView(j)||he.isArrayBuffer(j))return j.byteLength;if(he.isURLSearchParams(j)&&(j=j+""),he.isString(j))return(await c(j)).byteLength},y=async(j,p)=>{const k=he.toFiniteNumber(j.getContentLength());return k??m(p)};return async j=>{let{url:p,method:k,data:h,signal:v,cancelToken:S,timeout:x,onDownloadProgress:T,onUploadProgress:E,responseType:_,headers:M,withCredentials:O="same-origin",fetchOptions:R}=ek(j),K=t||fetch;_=_?(_+"").toLowerCase():"text";let Q=a4([v,S&&S.toAbortSignal()],x),ne=null;const Z=Q&&Q.unsubscribe&&(()=>{Q.unsubscribe()});let fe;try{if(E&&u&&k!=="get"&&k!=="head"&&(fe=await y(M,h))!==0){let G=new r(p,{method:"POST",body:h,duplex:"half"}),U;if(he.isFormData(h)&&(U=G.headers.get("content-type"))&&M.setContentType(U),G.body){const[L,Y]=Fb(fe,_f(Bb(E)));h=Hb(G.body,Ub,L,Y)}}he.isString(O)||(O=O?"include":"omit");const te=i&&"credentials"in r.prototype,xe={...R,signal:Q,method:k.toUpperCase(),headers:M.normalize().toJSON(),body:h,duplex:"half",credentials:te?O:void 0};ne=i&&new r(p,xe);let ie=await(i?K(ne,R):K(p,xe));const V=d&&(_==="stream"||_==="response");if(d&&(T||V&&Z)){const G={};["status","statusText","headers"].forEach(ue=>{G[ue]=ie[ue]});const U=he.toFiniteNumber(ie.headers.get("content-length")),[L,Y]=T&&Fb(U,_f(Bb(T),!0))||[];ie=new n(Hb(ie.body,Ub,L,()=>{Y&&Y(),Z&&Z()}),G)}_=_||"text";let ge=await f[he.findKey(f,_)||"text"](ie,j);return!V&&Z&&Z(),await new Promise((G,U)=>{JS(G,U,{data:ge,headers:Jr.from(ie.headers),status:ie.status,statusText:ie.statusText,config:j,request:ne})})}catch(te){throw Z&&Z(),te&&te.name==="TypeError"&&/Load failed|fetch/i.test(te.message)?Object.assign(new Ve("Network Error",Ve.ERR_NETWORK,j,ne),{cause:te.cause||te}):Ve.from(te,te&&te.code,j,ne)}}},d4=new Map,tk=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:s}=t,i=[n,s,r];let o=i.length,l=o,c,u,d=d4;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:u4(t)),d=u;return u};tk();const zg={http:ER,xhr:s4,fetch:{get:tk}};he.forEach(zg,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const qb=e=>`- ${e}`,f4=e=>he.isFunction(e)||e===null||e===!1,rk={getAdapter:(e,t)=>{e=he.isArray(e)?e:[e];const{length:r}=e;let n,s;const i={};for(let o=0;o<r;o++){n=e[o];let l;if(s=n,!f4(n)&&(s=zg[(l=String(n)).toLowerCase()],s===void 0))throw new Ve(`Unknown adapter '${l}'`);if(s&&(he.isFunction(s)||(s=s.get(t))))break;i[l||"#"+o]=s}if(!s){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(qb).join(`
`):" "+qb(o[0]):"as no adapter specified";throw new Ve("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:zg};function np(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sl(null,e)}function Kb(e){return np(e),e.headers=Jr.from(e.headers),e.data=rp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),rk.getAdapter(e.adapter||hu.adapter,e)(e).then(function(n){return np(e),n.data=rp.call(e,e.transformResponse,n),n.headers=Jr.from(n.headers),n},function(n){return XS(n)||(np(e),n&&n.response&&(n.response.data=rp.call(e,e.transformResponse,n.response),n.response.headers=Jr.from(n.response.headers))),Promise.reject(n)})}const nk="1.12.2",Im={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Im[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Gb={};Im.transitional=function(t,r,n){function s(i,o){return"[Axios v"+nk+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new Ve(s(o," has been removed"+(r?" in "+r:"")),Ve.ERR_DEPRECATED);return r&&!Gb[o]&&(Gb[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};Im.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function m4(e,t,r){if(typeof e!="object")throw new Ve("options must be an object",Ve.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Ve("option "+i+" must be "+c,Ve.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ve("Unknown option "+i,Ve.ERR_BAD_OPTION)}}const zd={assertOptions:m4,validators:Im},is=zd.validators;let ki=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Lb,response:new Lb}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ri(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&zd.assertOptions(n,{silentJSONParsing:is.transitional(is.boolean),forcedJSONParsing:is.transitional(is.boolean),clarifyTimeoutError:is.transitional(is.boolean)},!1),s!=null&&(he.isFunction(s)?r.paramsSerializer={serialize:s}:zd.assertOptions(s,{encode:is.function,serialize:is.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),zd.assertOptions(r,{baseUrl:is.spelling("baseURL"),withXsrfToken:is.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&he.merge(i.common,i[r.method]);i&&he.forEach(["delete","get","head","post","put","patch","common"],j=>{delete i[j]}),r.headers=Jr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,l.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let d,f=0,m;if(!c){const j=[Kb.bind(this),void 0];for(j.unshift(...l),j.push(...u),m=j.length,d=Promise.resolve(r);f<m;)d=d.then(j[f++],j[f++]);return d}m=l.length;let y=r;for(;f<m;){const j=l[f++],p=l[f++];try{y=j(y)}catch(k){p.call(this,k);break}}try{d=Kb.call(this,y)}catch(j){return Promise.reject(j)}for(f=0,m=u.length;f<m;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=Ri(this.defaults,t);const r=ZS(t.baseURL,t.url,t.allowAbsoluteUrls);return KS(r,t.params,t.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(t){ki.prototype[t]=function(r,n){return this.request(Ri(n||{},{method:t,url:r,data:(n||{}).data}))}});he.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(Ri(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ki.prototype[t]=r(),ki.prototype[t+"Form"]=r(!0)});let h4=class sk{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new sl(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new sk(function(s){t=s}),cancel:t}}};function p4(e){return function(r){return e.apply(null,r)}}function g4(e){return he.isObject(e)&&e.isAxiosError===!0}const Vg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vg).forEach(([e,t])=>{Vg[t]=e});function ak(e){const t=new ki(e),r=IS(ki.prototype.request,t);return he.extend(r,ki.prototype,t,{allOwnKeys:!0}),he.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return ak(Ri(e,s))},r}const qt=ak(hu);qt.Axios=ki;qt.CanceledError=sl;qt.CancelToken=h4;qt.isCancel=XS;qt.VERSION=nk;qt.toFormData=Om;qt.AxiosError=Ve;qt.Cancel=qt.CanceledError;qt.all=function(t){return Promise.all(t)};qt.spread=p4;qt.isAxiosError=g4;qt.mergeConfig=Ri;qt.AxiosHeaders=Jr;qt.formToJSON=e=>QS(he.isHTMLForm(e)?new FormData(e):e);qt.getAdapter=rk.getAdapter;qt.HttpStatusCode=Vg;qt.default=qt;const{Axios:Jne,AxiosError:Zne,CanceledError:ese,isCancel:tse,CancelToken:rse,VERSION:nse,all:sse,Cancel:ase,isAxiosError:ise,spread:ose,toFormData:lse,AxiosHeaders:cse,HttpStatusCode:use,formToJSON:dse,getAdapter:fse,mergeConfig:mse}=qt,y4="/api",Te=qt.create({baseURL:y4,headers:{"Content-Type":"application/json"}});Te.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Te.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const ik=b.createContext(void 0);function x4({children:e}){const[t,r]=b.useState(null),[n,s]=b.useState(!0),i=jm();b.useEffect(()=>{o()},[]);const o=async()=>{try{const d=localStorage.getItem("token");if(!d){s(!1);return}Te.defaults.headers.common.Authorization=`Bearer ${d}`;const f=await Te.get("/auth/me");f.data.success&&r(f.data.user)}catch{localStorage.removeItem("token"),delete Te.defaults.headers.common.Authorization}finally{s(!1)}},l=async(d,f)=>{var m,y;try{const j=await Te.post("/auth/login",{username:d,password:f}),{token:p,user:k}=j.data;localStorage.setItem("token",p),Te.defaults.headers.common.Authorization=`Bearer ${p}`,r(k),H.success(`${k.name}, !`),i("/")}catch(j){const p=j;throw H.error(((y=(m=p.response)==null?void 0:m.data)==null?void 0:y.message)||" "),j}},c=()=>{localStorage.removeItem("token"),delete Te.defaults.headers.common.Authorization,r(null),i("/login"),H.success("")},u=d=>{r(d)};return a.jsx(ik.Provider,{value:{user:t,loading:n,login:l,logout:c,updateUser:u},children:e})}function Ar(){const e=b.useContext(ik);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function ok(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=ok(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Fr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=ok(e))&&(n&&(n+=" "),n+=t);return n}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xe=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>b.createElement("svg",{ref:d,...v4,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${b4(e)}`,l].join(" "),...u},[...t.map(([f,m])=>b.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Xe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=Xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Xe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Xe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Xe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=Xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=Xe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=Xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=Xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=Xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=Xe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=Xe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=Xe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=Xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=Xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=Xe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Xe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Xe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=Xe("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=Xe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=Xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=Xe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Xe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),L4={},rw=e=>{let t;const r=new Set,n=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const y=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),r.forEach(j=>j(t,y))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(L4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,s,c);return c},$4=e=>e?rw(e):rw;var dk={exports:{}},fk={},mk={exports:{}},hk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=b;function F4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var B4=typeof Object.is=="function"?Object.is:F4,W4=Ho.useState,H4=Ho.useEffect,U4=Ho.useLayoutEffect,z4=Ho.useDebugValue;function V4(e,t){var r=t(),n=W4({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return U4(function(){s.value=r,s.getSnapshot=t,ap(s)&&i({inst:s})},[e,r,t]),H4(function(){return ap(s)&&i({inst:s}),e(function(){ap(s)&&i({inst:s})})},[e]),z4(r),r}function ap(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!B4(e,r)}catch{return!0}}function Y4(e,t){return t()}var q4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Y4:V4;hk.useSyncExternalStore=Ho.useSyncExternalStore!==void 0?Ho.useSyncExternalStore:q4;mk.exports=hk;var K4=mk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=b,G4=K4;function Q4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var X4=typeof Object.is=="function"?Object.is:Q4,J4=G4.useSyncExternalStore,Z4=Lm.useRef,eO=Lm.useEffect,tO=Lm.useMemo,rO=Lm.useDebugValue;fk.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=Z4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=tO(function(){function c(y){if(!u){if(u=!0,d=y,y=n(y),s!==void 0&&o.hasValue){var j=o.value;if(s(j,y))return f=j}return f=y}if(j=f,X4(d,y))return j;var p=n(y);return s!==void 0&&s(j,p)?(d=y,j):(d=y,f=p)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,s]);var l=J4(e,i[0],i[1]);return eO(function(){o.hasValue=!0,o.value=l},[l]),rO(l),l};dk.exports=fk;var nO=dk.exports;const sO=Wr(nO),pk={},{useDebugValue:aO}=z,{useSyncExternalStoreWithSelector:iO}=sO;let nw=!1;const oO=e=>e;function lO(e,t=oO,r){(pk?"production":void 0)!=="production"&&r&&!nw&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),nw=!0);const n=iO(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return aO(n),n}const cO=e=>{(pk?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?$4(e):e,r=(n,s)=>lO(t,n,s);return Object.assign(r,t),r},gk=e=>cO,uO={};function dO(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=r.getItem(s))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const Pc=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return Pc(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Pc(n)(r)}}}},fO=(e,t)=>(r,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:k=>k,version:0,merge:(k,h)=>({...h,...k}),...t},o=!1;const l=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...k)},n,s);const d=Pc(i.serialize),f=()=>{const k=i.partialize({...n()});let h;const v=d({state:k,version:i.version}).then(S=>u.setItem(i.name,S)).catch(S=>{h=S});if(h)throw h;return v},m=s.setState;s.setState=(k,h)=>{m(k,h),f()};const y=e((...k)=>{r(...k),f()},n,s);let j;const p=()=>{var k;if(!u)return;o=!1,l.forEach(v=>v(n()));const h=((k=i.onRehydrateStorage)==null?void 0:k.call(i,n()))||void 0;return Pc(u.getItem.bind(u))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var S;return j=i.merge(v,(S=n())!=null?S:y),r(j,!0),f()}).then(()=>{h==null||h(j,void 0),o=!0,c.forEach(v=>v(j))}).catch(v=>{h==null||h(void 0,v)})};return s.persist={setOptions:k=>{i={...i,...k},k.getStorage&&(u=k.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:k=>(l.add(k),()=>{l.delete(k)}),onFinishHydration:k=>(c.add(k),()=>{c.delete(k)})},p(),j||y},mO=(e,t)=>(r,n,s)=>{let i={storage:dO(()=>localStorage),partialize:p=>p,version:0,merge:(p,k)=>({...k,...p}),...t},o=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return e((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...p)},n,s);const d=()=>{const p=i.partialize({...n()});return u.setItem(i.name,{state:p,version:i.version})},f=s.setState;s.setState=(p,k)=>{f(p,k),d()};const m=e((...p)=>{r(...p),d()},n,s);s.getInitialState=()=>m;let y;const j=()=>{var p,k;if(!u)return;o=!1,l.forEach(v=>{var S;return v((S=n())!=null?S:m)});const h=((k=i.onRehydrateStorage)==null?void 0:k.call(i,(p=n())!=null?p:m))||void 0;return Pc(u.getItem.bind(u))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var S;const[x,T]=v;if(y=i.merge(T,(S=n())!=null?S:m),r(y,!0),x)return d()}).then(()=>{h==null||h(y,void 0),y=n(),o=!0,c.forEach(v=>v(y))}).catch(v=>{h==null||h(void 0,v)})};return s.persist={setOptions:p=>{i={...i,...p},p.storage&&(u=p.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:p=>(l.add(p),()=>{l.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},i.skipHydration||j(),y||m},hO=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((uO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),fO(e,t)):mO(e,t),yk=hO,xk=gk()(yk((e,t)=>({notifications:[],unreadCount:0,addNotification:r=>{const n={...r,id:Date.now().toString()+Math.random().toString(36).substr(2,9),read:!1,createdAt:new Date};e(s=>({notifications:[n,...s.notifications].slice(0,50),unreadCount:s.unreadCount+1}))},markAsRead:r=>{e(n=>({notifications:n.notifications.map(s=>s.id===r?{...s,read:!0}:s),unreadCount:Math.max(0,n.unreadCount-1)}))},markAllAsRead:()=>{e(r=>({notifications:r.notifications.map(n=>({...n,read:!0})),unreadCount:0}))},deleteNotification:r=>{e(n=>{const s=n.notifications.find(o=>o.id===r),i=s&&!s.read;return{notifications:n.notifications.filter(o=>o.id!==r),unreadCount:i?Math.max(0,n.unreadCount-1):n.unreadCount}})},clearAll:()=>{e({notifications:[],unreadCount:0})},getUnreadCount:()=>t().unreadCount}),{name:"notification-storage",partialize:e=>({notifications:e.notifications,unreadCount:e.unreadCount})}));function Gn(e){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(e)}function Ka(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ft(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function gt(e){ft(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Gn(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function pO(e,t){ft(2,arguments);var r=gt(e),n=Ka(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function gO(e,t){ft(2,arguments);var r=gt(e).getTime(),n=Ka(t);return new Date(r+n)}var yO={};function pu(){return yO}function Yg(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function sw(e){ft(1,arguments);var t=gt(e);return t.setHours(0,0,0,0),t}function Yd(e,t){ft(2,arguments);var r=gt(e),n=gt(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function vk(e,t){ft(2,arguments);var r=sw(e),n=sw(t);return r.getTime()===n.getTime()}function xO(e){return ft(1,arguments),e instanceof Date||Gn(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function vO(e){if(ft(1,arguments),!xO(e)&&typeof e!="number")return!1;var t=gt(e);return!isNaN(Number(t))}function bO(e,t){ft(2,arguments);var r=gt(e),n=gt(t),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function wO(e,t){return ft(2,arguments),gt(e).getTime()-gt(t).getTime()}var NO={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},jO="trunc";function SO(e){return NO[jO]}function kO(e){ft(1,arguments);var t=gt(e);return t.setHours(23,59,59,999),t}function DO(e){ft(1,arguments);var t=gt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function CO(e){ft(1,arguments);var t=gt(e);return kO(t).getTime()===DO(t).getTime()}function EO(e,t){ft(2,arguments);var r=gt(e),n=gt(t),s=Yd(r,n),i=Math.abs(bO(r,n)),o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);var l=Yd(r,n)===-s;CO(gt(e))&&i===1&&Yd(e,n)===1&&(l=!1),o=s*(i-Number(l))}return o===0?0:o}function TO(e,t,r){ft(2,arguments);var n=wO(e,t)/1e3;return SO()(n)}function AO(e,t){ft(2,arguments);var r=Ka(t);return gO(e,-r)}var _O=864e5;function PO(e){ft(1,arguments);var t=gt(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),s=r-n;return Math.floor(s/_O)+1}function Rf(e){ft(1,arguments);var t=1,r=gt(e),n=r.getUTCDay(),s=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-s),r.setUTCHours(0,0,0,0),r}function bk(e){ft(1,arguments);var t=gt(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var s=Rf(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var o=Rf(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function MO(e){ft(1,arguments);var t=bk(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=Rf(r);return n}var RO=6048e5;function OO(e){ft(1,arguments);var t=gt(e),r=Rf(t).getTime()-MO(t).getTime();return Math.round(r/RO)+1}function Of(e,t){var r,n,s,i,o,l,c,u;ft(1,arguments);var d=pu(),f=Ka((r=(n=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=gt(e),y=m.getUTCDay(),j=(y<f?7:0)+y-f;return m.setUTCDate(m.getUTCDate()-j),m.setUTCHours(0,0,0,0),m}function wk(e,t){var r,n,s,i,o,l,c,u;ft(1,arguments);var d=gt(e),f=d.getUTCFullYear(),m=pu(),y=Ka((r=(n=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&n!==void 0?n:(c=m.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=new Date(0);j.setUTCFullYear(f+1,0,y),j.setUTCHours(0,0,0,0);var p=Of(j,t),k=new Date(0);k.setUTCFullYear(f,0,y),k.setUTCHours(0,0,0,0);var h=Of(k,t);return d.getTime()>=p.getTime()?f+1:d.getTime()>=h.getTime()?f:f-1}function IO(e,t){var r,n,s,i,o,l,c,u;ft(1,arguments);var d=pu(),f=Ka((r=(n=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),m=wk(e,t),y=new Date(0);y.setUTCFullYear(m,0,f),y.setUTCHours(0,0,0,0);var j=Of(y,t);return j}var LO=6048e5;function $O(e,t){ft(1,arguments);var r=gt(e),n=Of(r,t).getTime()-IO(r,t).getTime();return Math.round(n/LO)+1}function pt(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var ha={y:function(t,r){var n=t.getUTCFullYear(),s=n>0?n:1-n;return pt(r==="yy"?s%100:s,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):pt(n+1,2)},d:function(t,r){return pt(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return pt(t.getUTCHours()%12||12,r.length)},H:function(t,r){return pt(t.getUTCHours(),r.length)},m:function(t,r){return pt(t.getUTCMinutes(),r.length)},s:function(t,r){return pt(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,n-3));return pt(i,r.length)}},qi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},FO={G:function(t,r,n){var s=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return ha.y(t,r)},Y:function(t,r,n,s){var i=wk(t,s),o=i>0?i:1-i;if(r==="YY"){var l=o%100;return pt(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):pt(o,r.length)},R:function(t,r){var n=bk(t);return pt(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return pt(n,r.length)},Q:function(t,r,n){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return pt(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,r,n){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return pt(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,r,n){var s=t.getUTCMonth();switch(r){case"M":case"MM":return ha.M(t,r);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,r,n){var s=t.getUTCMonth();switch(r){case"L":return String(s+1);case"LL":return pt(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,r,n,s){var i=$O(t,s);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):pt(i,r.length)},I:function(t,r,n){var s=OO(t);return r==="Io"?n.ordinalNumber(s,{unit:"week"}):pt(s,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):ha.d(t,r)},D:function(t,r,n){var s=PO(t);return r==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):pt(s,r.length)},E:function(t,r,n){var s=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,r,n,s){var i=t.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return pt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,s){var i=t.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return pt(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var s=t.getUTCDay(),i=s===0?7:s;switch(r){case"i":return String(i);case"ii":return pt(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,r,n){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var s=t.getUTCHours(),i;switch(s===12?i=qi.noon:s===0?i=qi.midnight:i=s/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var s=t.getUTCHours(),i;switch(s>=17?i=qi.evening:s>=12?i=qi.afternoon:s>=4?i=qi.morning:i=qi.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return ha.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):ha.H(t,r)},K:function(t,r,n){var s=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(s,{unit:"hour"}):pt(s,r.length)},k:function(t,r,n){var s=t.getUTCHours();return s===0&&(s=24),r==="ko"?n.ordinalNumber(s,{unit:"hour"}):pt(s,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):ha.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):ha.s(t,r)},S:function(t,r){return ha.S(t,r)},X:function(t,r,n,s){var i=s._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return iw(o);case"XXXX":case"XX":return oi(o);case"XXXXX":case"XXX":default:return oi(o,":")}},x:function(t,r,n,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(r){case"x":return iw(o);case"xxxx":case"xx":return oi(o);case"xxxxx":case"xxx":default:return oi(o,":")}},O:function(t,r,n,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+aw(o,":");case"OOOO":default:return"GMT"+oi(o,":")}},z:function(t,r,n,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+aw(o,":");case"zzzz":default:return"GMT"+oi(o,":")}},t:function(t,r,n,s){var i=s._originalDate||t,o=Math.floor(i.getTime()/1e3);return pt(o,r.length)},T:function(t,r,n,s){var i=s._originalDate||t,o=i.getTime();return pt(o,r.length)}};function aw(e,t){var r=e>0?"-":"+",n=Math.abs(e),s=Math.floor(n/60),i=n%60;if(i===0)return r+String(s);var o=t;return r+String(s)+o+pt(i,2)}function iw(e,t){if(e%60===0){var r=e>0?"-":"+";return r+pt(Math.abs(e)/60,2)}return oi(e,t)}function oi(e,t){var r=t||"",n=e>0?"-":"+",s=Math.abs(e),i=pt(Math.floor(s/60),2),o=pt(s%60,2);return n+i+r+o}var ow=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Nk=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},BO=function(t,r){var n=t.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return ow(t,r);var o;switch(s){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",ow(s,r)).replace("{{time}}",Nk(i,r))},WO={p:Nk,P:BO},HO=["D","DD"],UO=["YY","YYYY"];function zO(e){return HO.indexOf(e)!==-1}function VO(e){return UO.indexOf(e)!==-1}function lw(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var YO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qO=function(t,r,n){var s,i=YO[t];return typeof i=="string"?s=i:r===1?s=i.one:s=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function wo(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var KO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},QO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XO={date:wo({formats:KO,defaultWidth:"full"}),time:wo({formats:GO,defaultWidth:"full"}),dateTime:wo({formats:QO,defaultWidth:"full"})},JO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZO=function(t,r,n,s){return JO[t]};function ps(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",s;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;s=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var eI={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tI={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rI={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nI={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},iI=function(t,r){var n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},oI={ordinalNumber:iI,era:ps({values:eI,defaultWidth:"wide"}),quarter:ps({values:tI,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ps({values:rI,defaultWidth:"wide"}),day:ps({values:nI,defaultWidth:"wide"}),dayPeriod:ps({values:sI,defaultWidth:"wide",formattingValues:aI,defaultFormattingWidth:"wide"})};function gs(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?cI(l,function(f){return f.test(o)}):lI(l,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function lI(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function cI(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function jk(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var s=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var l=t.slice(s.length);return{value:o,rest:l}}}var uI=/^(\d+)(th|st|nd|rd)?/i,dI=/\d+/i,fI={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mI={any:[/^b/i,/^(a|c)/i]},hI={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pI={any:[/1/i,/2/i,/3/i,/4/i]},gI={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yI={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xI={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vI={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bI={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wI={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},NI={ordinalNumber:jk({matchPattern:uI,parsePattern:dI,valueCallback:function(t){return parseInt(t,10)}}),era:gs({matchPatterns:fI,defaultMatchWidth:"wide",parsePatterns:mI,defaultParseWidth:"any"}),quarter:gs({matchPatterns:hI,defaultMatchWidth:"wide",parsePatterns:pI,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:gs({matchPatterns:gI,defaultMatchWidth:"wide",parsePatterns:yI,defaultParseWidth:"any"}),day:gs({matchPatterns:xI,defaultMatchWidth:"wide",parsePatterns:vI,defaultParseWidth:"any"}),dayPeriod:gs({matchPatterns:bI,defaultMatchWidth:"any",parsePatterns:wI,defaultParseWidth:"any"})},Sk={code:"en-US",formatDistance:qO,formatLong:XO,formatRelative:ZO,localize:oI,match:NI,options:{weekStartsOn:0,firstWeekContainsDate:1}},jI=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kI=/^'([^]*?)'?$/,DI=/''/g,CI=/[a-zA-Z]/;function Se(e,t,r){var n,s,i,o,l,c,u,d,f,m,y,j,p,k,h,v,S,x;ft(2,arguments);var T=String(t),E=pu(),_=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:E.locale)!==null&&n!==void 0?n:Sk,M=Ka((i=(o=(l=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:E.firstWeekContainsDate)!==null&&o!==void 0?o:(f=E.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=Ka((y=(j=(p=(k=r==null?void 0:r.weekStartsOn)!==null&&k!==void 0?k:r==null||(h=r.locale)===null||h===void 0||(v=h.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&p!==void 0?p:E.weekStartsOn)!==null&&j!==void 0?j:(S=E.locale)===null||S===void 0||(x=S.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&y!==void 0?y:0);if(!(O>=0&&O<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!_.localize)throw new RangeError("locale must contain localize property");if(!_.formatLong)throw new RangeError("locale must contain formatLong property");var R=gt(e);if(!vO(R))throw new RangeError("Invalid time value");var K=Yg(R),Q=AO(R,K),ne={firstWeekContainsDate:M,weekStartsOn:O,locale:_,_originalDate:R},Z=T.match(SI).map(function(fe){var te=fe[0];if(te==="p"||te==="P"){var xe=WO[te];return xe(fe,_.formatLong)}return fe}).join("").match(jI).map(function(fe){if(fe==="''")return"'";var te=fe[0];if(te==="'")return EI(fe);var xe=FO[te];if(xe)return!(r!=null&&r.useAdditionalWeekYearTokens)&&VO(fe)&&lw(fe,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&zO(fe)&&lw(fe,t,String(e)),xe(Q,fe,_.localize,ne);if(te.match(CI))throw new RangeError("Format string contains an unescaped latin alphabet character `"+te+"`");return fe}).join("");return Z}function EI(e){var t=e.match(kI);return t?t[1].replace(DI,"'"):e}function kk(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function TI(e){return kk({},e)}var cw=1440,AI=2520,ip=43200,_I=86400;function PI(e,t,r){var n,s;ft(2,arguments);var i=pu(),o=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:i.locale)!==null&&n!==void 0?n:Sk;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=Yd(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var c=kk(TI(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:l}),u,d;l>0?(u=gt(t),d=gt(e)):(u=gt(e),d=gt(t));var f=TO(d,u),m=(Yg(d)-Yg(u))/1e3,y=Math.round((f-m)/60),j;if(y<2)return r!=null&&r.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,c):f<10?o.formatDistance("lessThanXSeconds",10,c):f<20?o.formatDistance("lessThanXSeconds",20,c):f<40?o.formatDistance("halfAMinute",0,c):f<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):y===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",y,c);if(y<45)return o.formatDistance("xMinutes",y,c);if(y<90)return o.formatDistance("aboutXHours",1,c);if(y<cw){var p=Math.round(y/60);return o.formatDistance("aboutXHours",p,c)}else{if(y<AI)return o.formatDistance("xDays",1,c);if(y<ip){var k=Math.round(y/cw);return o.formatDistance("xDays",k,c)}else if(y<_I)return j=Math.round(y/ip),o.formatDistance("aboutXMonths",j,c)}if(j=EO(d,u),j<12){var h=Math.round(y/ip);return o.formatDistance("xMonths",h,c)}else{var v=j%12,S=Math.floor(j/12);return v<3?o.formatDistance("aboutXYears",S,c):v<9?o.formatDistance("overXYears",S,c):o.formatDistance("almostXYears",S+1,c)}}function MI(e,t){return ft(1,arguments),PI(e,Date.now(),t)}function RI(e){return ft(1,arguments),gt(e).getTime()>Date.now()}function qg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Lx(e,t){if(e){if(typeof e=="string")return qg(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qg(e,t):void 0}}function OI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function If(e,t){return If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},If(e,t)}function _r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&If(e,t)}function Lf(e){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lf(e)}function Dk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dk=function(){return!!e})()}function II(e,t){if(t&&(Gn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OI(e)}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LI(e,t){if(Gn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ck(e){var t=LI(e,"string");return Gn(t)=="symbol"?t:t+""}function uw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ck(n.key),n)}}function lr(e,t,r){return t&&uw(e.prototype,t),r&&uw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ci(e,t,r){return(t=Ck(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dw(e){return ft(1,arguments),vk(e,Date.now())}function $I(e){return ft(1,arguments),vk(e,pO(Date.now(),1))}var FI={lessThanXSeconds:{one:"1 ",other:"{{count}} "},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1 ",other:"{{count}} "},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:" 1",other:" {{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:" 1",other:" {{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:" 1",other:" {{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:" 1",other:" {{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1 ",other:"{{count}} "},almostXYears:{one:" 1",other:" {{count}}"}},BI=function(t,r,n){var s,i=FI[t];return typeof i=="string"?s=i:r===1?s=i.one:s=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?s+" ":s+" ":s},WI={full:"y M d EEEE",long:"y M d",medium:"y.MM.dd",short:"y.MM.dd"},HI={full:"a H mm ss zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},UI={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},zI={date:wo({formats:WI,defaultWidth:"full"}),time:wo({formats:HI,defaultWidth:"full"}),dateTime:wo({formats:UI,defaultWidth:"full"})},VI={lastWeek:"'' eeee p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"'' eeee p",other:"P"},YI=function(t,r,n,s){return VI[t]},qI={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["",""]},KI={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},GI={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},QI={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},XI={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},JI={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},ZI=function(t,r){var n=Number(t),s=String(r==null?void 0:r.unit);switch(s){case"minute":case"second":return String(n);case"date":return n+"";default:return n+""}},e5={ordinalNumber:ZI,era:ps({values:qI,defaultWidth:"wide"}),quarter:ps({values:KI,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ps({values:GI,defaultWidth:"wide"}),day:ps({values:QI,defaultWidth:"wide"}),dayPeriod:ps({values:XI,defaultWidth:"wide",formattingValues:JI,defaultFormattingWidth:"wide"})},t5=/^(\d+)(|)?/i,r5=/\d+/i,n5={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(|)/i},s5={any:[/^(bc|)/i,/^(ad|)/i]},a5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]?/i},i5={any:[/1/i,/2/i,/3/i,/4/i]},o5={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])/i,wide:/^(1[012]|[123456789])/i},l5={any:[/^1?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},c5={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},u5={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},d5={any:/^(am|pm|||||||)/i},f5={any:{am:/^(am|)/i,pm:/^(pm|)/i,midnight:/^/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},m5={ordinalNumber:jk({matchPattern:t5,parsePattern:r5,valueCallback:function(t){return parseInt(t,10)}}),era:gs({matchPatterns:n5,defaultMatchWidth:"wide",parsePatterns:s5,defaultParseWidth:"any"}),quarter:gs({matchPatterns:a5,defaultMatchWidth:"wide",parsePatterns:i5,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:gs({matchPatterns:o5,defaultMatchWidth:"wide",parsePatterns:l5,defaultParseWidth:"any"}),day:gs({matchPatterns:c5,defaultMatchWidth:"wide",parsePatterns:u5,defaultParseWidth:"any"}),dayPeriod:gs({matchPatterns:d5,defaultMatchWidth:"any",parsePatterns:f5,defaultParseWidth:"any"})},it={code:"ko",formatDistance:BI,formatLong:zI,formatRelative:YI,localize:e5,match:m5,options:{weekStartsOn:0,firstWeekContainsDate:1}};const h5=({isOpen:e,onClose:t})=>{const r=jm(),{notifications:n,unreadCount:s,markAsRead:i,markAllAsRead:o,deleteNotification:l,clearAll:c}=xk();if(!e)return null;const u=m=>{switch(m){case"payment":return a.jsx(D4,{className:"h-5 w-5"});case"as_request":return a.jsx(I4,{className:"h-5 w-5"});case"schedule":return a.jsx(ms,{className:"h-5 w-5"});case"work_request":return a.jsx(w4,{className:"h-5 w-5"});default:return a.jsx(sp,{className:"h-5 w-5"})}},d=m=>{switch(m){case"payment":return"text-green-600 bg-green-50";case"as_request":return"text-yellow-600 bg-yellow-50";case"schedule":return"text-blue-600 bg-blue-50";case"work_request":return"text-purple-600 bg-purple-50";default:return"text-gray-600 bg-gray-50"}},f=m=>{i(m.id),m.link&&(r(m.link),t())};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 z-40",onClick:t}),a.jsxs("div",{className:"fixed right-0 top-16 h-[calc(100vh-4rem)] w-full sm:w-96 bg-white shadow-2xl z-50 flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sp,{className:"h-5 w-5 text-gray-900"}),a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:""}),s>0&&a.jsx("span",{className:"px-2 py-0.5 bg-gray-900 text-white text-xs font-bold rounded-full",children:s})]}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(et,{className:"h-5 w-5 text-gray-600"})})]}),n.length>0&&a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 border-b border-gray-200",children:[s>0&&a.jsxs("button",{onClick:o,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-gray-900",children:[a.jsx(Vd,{className:"h-3 w-3"})," "]}),a.jsxs("button",{onClick:c,className:"flex items-center gap-1 text-xs text-gray-600 hover:text-red-600 ml-auto",children:[a.jsx(Et,{className:"h-3 w-3"})," "]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:n.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[a.jsx(sp,{className:"h-12 w-12 text-gray-300 mb-3"}),a.jsx("p",{className:"text-sm text-gray-500",children:" "})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:n.map(m=>a.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${m.read?"":"bg-blue-50"}`,onClick:()=>f(m),children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${d(m.type)}`,children:u(m.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("p",{className:`text-sm font-semibold ${m.read?"text-gray-700":"text-gray-900"}`,children:m.title}),!m.read&&a.jsx("span",{className:"flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full mt-1"})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:m.message}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:MI(new Date(m.createdAt),{addSuffix:!0,locale:it})})]}),a.jsx("button",{onClick:y=>{y.stopPropagation(),l(m.id)},className:"flex-shrink-0 p-1 hover:bg-gray-200 rounded transition-colors",children:a.jsx(et,{className:"h-4 w-4 text-gray-400"})})]})},m.id))})})]})]})},ya={getAllWorkRequests:async()=>(await Te.get("/workrequests")).data,getWorkRequestById:async e=>(await Te.get(`/workrequests/${e}`)).data,createWorkRequest:async e=>{console.log("[workRequestService.createWorkRequest] Input data:",e);const t={project:e.project,requestType:e.requestType,description:e.description,requestDate:e.requestDate instanceof Date?e.requestDate.toISOString():e.requestDate,dueDate:e.dueDate instanceof Date?e.dueDate.toISOString():e.dueDate,requestedBy:e.requestedBy,assignedTo:e.assignedTo,priority:e.priority||"medium",status:e.status||"pending",notes:e.notes||""};return console.log("[workRequestService.createWorkRequest] Sending to backend:",t),(await Te.post("/workrequests",t)).data},updateWorkRequest:async(e,t)=>{console.log("[workRequestService.updateWorkRequest] Input data:",t);const r={};return t.project!==void 0&&(r.project=t.project),t.requestType!==void 0&&(r.requestType=t.requestType),t.description!==void 0&&(r.description=t.description),t.requestDate!==void 0&&(r.requestDate=t.requestDate instanceof Date?t.requestDate.toISOString():t.requestDate),t.dueDate!==void 0&&(r.dueDate=t.dueDate instanceof Date?t.dueDate.toISOString():t.dueDate),t.requestedBy!==void 0&&(r.requestedBy=t.requestedBy),t.assignedTo!==void 0&&(r.assignedTo=t.assignedTo),t.priority!==void 0&&(r.priority=t.priority),t.status!==void 0&&(r.status=t.status),t.notes!==void 0&&(r.notes=t.notes),t.completedDate!==void 0&&(r.completedDate=t.completedDate instanceof Date?t.completedDate.toISOString():t.completedDate),console.log("[workRequestService.updateWorkRequest] Sending to backend:",r),(await Te.put(`/workrequests/${e}`,r)).data},deleteWorkRequest:async e=>{await Te.delete(`/workrequests/${e}`)}},xa={getAllPayments:async()=>(await Te.get("/payments")).data,getPaymentById:async e=>(await Te.get(`/payments/${e}`)).data,createPayment:async e=>{var n,s,i;const t={project_id:e.projectId,request_type:e.category,vendor_name:e.process||"",description:e.purpose||"",amount:e.amount,account_holder:((n=e.bankInfo)==null?void 0:n.accountHolder)||"",bank_name:((s=e.bankInfo)==null?void 0:s.bankName)||"",account_number:((i=e.bankInfo)==null?void 0:i.accountNumber)||"",notes:e.notes||"",itemName:e.itemName||"",materialAmount:e.materialAmount||0,laborAmount:e.laborAmount||0,originalLaborAmount:e.originalLaborAmount||0,applyTaxDeduction:e.applyTaxDeduction||!1,includesVAT:e.includesVAT||!1,quickText:e.quickText||""};return console.log("[paymentService.createPayment] Sending to backend:",t),(await Te.post("/payments",t)).data},updatePayment:async(e,t)=>{const r={};return t.purpose!==void 0&&(r.description=t.purpose),t.amount!==void 0&&(r.amount=t.amount),t.process!==void 0&&(r.vendor_name=t.process),t.category!==void 0&&(r.request_type=t.category),t.itemName!==void 0&&(r.itemName=t.itemName),t.materialAmount!==void 0&&(r.materialAmount=t.materialAmount),t.laborAmount!==void 0&&(r.laborAmount=t.laborAmount),t.originalLaborAmount!==void 0&&(r.originalLaborAmount=t.originalLaborAmount),t.applyTaxDeduction!==void 0&&(r.applyTaxDeduction=t.applyTaxDeduction),t.includesVAT!==void 0&&(r.includesVAT=t.includesVAT),t.notes!==void 0&&(r.notes=t.notes),t.bankInfo!==void 0&&(t.bankInfo.accountHolder&&(r.account_holder=t.bankInfo.accountHolder),t.bankInfo.bankName&&(r.bank_name=t.bankInfo.bankName),t.bankInfo.accountNumber&&(r.account_number=t.bankInfo.accountNumber)),(await Te.put(`/payments/${e}`,r)).data},updatePaymentStatus:async(e,t)=>(await Te.put(`/payments/${e}/status`,{status:t})).data,deletePayment:async e=>{await Te.delete(`/payments/${e}`)}},zl={getAllASRequests:async()=>(await Te.get("/as-requests")).data,getASRequestById:async e=>(await Te.get(`/as-requests/${e}`)).data,createASRequest:async e=>(await Te.post("/as-requests",e)).data,updateASRequest:async(e,t)=>(await Te.put(`/as-requests/${e}`,t)).data,deleteASRequest:async e=>{await Te.delete(`/as-requests/${e}`)}},p5=()=>{var x,T;const{user:e,logout:t,loading:r}=Ar(),[n,s]=b.useState(!1),[i,o]=b.useState(!1),l=ca(),{unreadCount:c}=xk(),[u,d]=b.useState(0),[f,m]=b.useState(0),[y,j]=b.useState(0);if(b.useEffect(()=>{const E=async()=>{if(e)try{const O=(await ya.getAllWorkRequests()).filter(R=>R.assignedTo===e.name&&R.status==="pending").length;d(O)}catch(M){console.error("Failed to load pending work requests:",M)}};E();const _=setInterval(E,3e4);return()=>clearInterval(_)},[e]),b.useEffect(()=>{const E=async()=>{if(e)try{const O=(await xa.getAllPayments()).filter(R=>R.status==="pending").length;m(O)}catch(M){console.error("Failed to load pending payments:",M)}};E();const _=setInterval(E,3e4);return()=>clearInterval(_)},[e]),b.useEffect(()=>{const E=async()=>{if(e)try{const O=(await zl.getAllASRequests()).filter(R=>R.status==="in-progress").length;j(O)}catch(M){console.error("Failed to load in-progress AS requests:",M)}};E();const _=setInterval(E,3e4);return()=>clearInterval(_)},[e]),r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"}),a.jsx("p",{className:"mt-4 text-gray-600",children:" ..."})]})});if(!e)return a.jsx(Sm,{to:"/login",replace:!0});const p=[{name:"",href:"/dashboard"},{name:"",href:"/projects"},{name:"",href:"/schedule"},{name:"",href:"/site-log"},{name:"",href:"/additional-work"},{name:"",href:"/construction-payment",roles:["admin","manager"]},{name:"",href:"/work-request",...u>0&&{badge:u}},{name:"",href:"/specbook"},{name:"",href:"/finish-check"},{name:"",href:"/execution-history"},{name:"AS ",href:"/after-service",...y>0&&{badge:y}},{name:"",href:"/estimate-preview",roles:["admin","manager"]},{name:"",href:"/payments",...f>0&&{badge:f}},{name:"",href:"/quote-inquiry",roles:["admin","manager"]},{name:"",href:"/contractors"}],k=p.filter(E=>!E.roles||E.roles.includes((e==null?void 0:e.role)||"")),h=((x=p.find(E=>E.href===l.pathname))==null?void 0:x.name)||"",S=(()=>{const E=l.pathname;return["/projects","/schedule","/after-service","/additional-work","/construction-payment","/contractors","/work-request"].includes(E)?()=>{const M=new CustomEvent("headerAddButtonClick");window.dispatchEvent(M)}:null})();return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsxs("div",{className:Fr("fixed inset-0 z-40 lg:hidden",n?"block":"hidden"),children:[a.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50",onClick:()=>s(!1)}),a.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[a.jsxs("div",{className:"flex h-16 items-center justify-between px-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"HV LAB"}),a.jsx("button",{onClick:()=>s(!1),className:"text-sm text-gray-600 hover:text-gray-900",children:""})]}),a.jsx("nav",{className:"flex-1 space-y-1 px-4 py-4",children:k.map(E=>a.jsx(Eg,{to:E.href,className:({isActive:_})=>Fr("block px-4 py-3 text-sm font-medium border-l-2 transition-colors relative",_?"border-gray-900 bg-gray-50 text-gray-900":"border-transparent text-gray-600 hover:border-gray-400 hover:bg-gray-50"),onClick:()=>s(!1),children:a.jsxs("span",{className:"flex items-center justify-between",children:[a.jsx("span",{children:E.name}),E.badge&&E.badge>0&&a.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:E.badge>99?"99+":E.badge})]})},E.name))}),a.jsx("div",{className:"border-t border-gray-200 px-4 py-4",children:a.jsx("button",{onClick:t,className:"w-full px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 text-left",children:""})})]})]}),a.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:a.jsxs("div",{className:"flex flex-col bg-white border-r border-gray-200",children:[a.jsx("div",{className:"flex h-16 items-center px-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"HV LAB"})}),a.jsx("nav",{className:"flex-1 space-y-1 px-4 py-4",children:k.map(E=>a.jsx(Eg,{to:E.href,className:({isActive:_})=>Fr("block px-4 py-3 text-sm font-medium border-l-2 transition-colors relative",_?"border-gray-900 bg-gray-50 text-gray-900":"border-transparent text-gray-600 hover:border-gray-400 hover:bg-gray-50"),children:a.jsxs("span",{className:"flex items-center justify-between",children:[a.jsx("span",{children:E.name}),E.badge&&E.badge>0&&a.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:E.badge>99?"99+":E.badge})]})},E.name))}),a.jsx("div",{className:"border-t border-gray-200 px-4 py-4",children:a.jsx("button",{onClick:t,className:"w-full px-4 py-3 text-sm font-medium text-gray-600 hover:bg-gray-50 text-left",children:""})})]})}),a.jsxs("div",{className:"lg:pl-64",children:[a.jsx("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>s(!0),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 -ml-2","aria-label":" ",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),h&&a.jsx("h1",{className:"text-lg font-bold text-gray-900",children:h})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-6 ml-auto",children:[S&&a.jsx("button",{onClick:S,className:"lg:hidden p-2 text-gray-900 hover:text-gray-700","aria-label":"",children:a.jsx(aa,{className:"h-6 w-6"})}),a.jsxs("button",{onClick:()=>o(!i),className:"hidden sm:block relative p-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"",children:[a.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),c>0&&a.jsx("span",{className:"absolute top-1 right-1 flex items-center justify-center h-4 w-4 bg-red-600 text-white text-[10px] font-bold rounded-full",children:c>9?"9+":c})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e==null?void 0:e.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e==null?void 0:e.role})]}),a.jsx("div",{className:"h-8 w-8 sm:h-9 sm:w-9 bg-gray-900 text-white flex items-center justify-center text-xs font-bold rounded-full",children:(T=e==null?void 0:e.name)==null?void 0:T.substring(0,1)})]})]})]})}),a.jsx("main",{className:"py-[10px] md:py-6 lg:py-8",children:a.jsx("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8",children:a.jsx(Q_,{})})})]}),a.jsx(h5,{isOpen:i,onClose:()=>o(!1)})]})},ud={getAllSchedules:async()=>(await Te.get("/schedules")).data,getScheduleById:async e=>(await Te.get(`/schedules/${e}`)).data,createSchedule:async e=>(await Te.post("/schedules",{project:e.project,title:e.title,type:e.type||"other",phase:e.phase||"",startDate:e.startDate,endDate:e.endDate,allDay:e.allDay!==void 0?e.allDay:!0,assignedTo:e.assignedTo||[],description:e.description,location:e.location,priority:e.priority||"medium",progress:e.progress||0,isCompleted:e.isCompleted||!1,asRequestId:e.asRequestId,time:e.time})).data,updateSchedule:async(e,t)=>(await Te.put(`/schedules/${e}`,t)).data,deleteSchedule:async e=>{await Te.delete(`/schedules/${e}`)}},dd={getAllProjects:async()=>(await Te.get("/projects")).data,getProjectById:async e=>(await Te.get(`/projects/${e}`)).data,createProject:async e=>{const t={name:e.name,client:typeof e.client=="string"?e.client:e.client.name,location:typeof e.location=="string"?e.location:e.location.address,status:e.status||"planning",manager:e.manager,description:e.description||""};if(e.startDate){const n=typeof e.startDate=="string"?new Date(e.startDate):e.startDate;t.startDate=n.toISOString().split("T")[0]}if(e.endDate){const n=typeof e.endDate=="string"?new Date(e.endDate):e.endDate;t.endDate=n.toISOString().split("T")[0]}return console.log("[projectService.createProject] Sending to backend:",t),(await Te.post("/projects",t)).data},updateProject:async(e,t)=>{var n;const r={};if(t.name!==void 0&&(r.name=t.name),t.client!==void 0&&(r.client=typeof t.client=="string"?t.client:t.client.name),t.location!==void 0&&(r.location=typeof t.location=="string"?t.location:t.location.address),t.startDate!==void 0)if(typeof t.startDate=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t.startDate))r.startDate=t.startDate;else{const s=typeof t.startDate=="string"?new Date(t.startDate):t.startDate;r.startDate=s.toISOString().split("T")[0]}if(t.endDate!==void 0)if(typeof t.endDate=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t.endDate))r.endDate=t.endDate;else{const s=typeof t.endDate=="string"?new Date(t.endDate):t.endDate;r.endDate=s.toISOString().split("T")[0]}t.status!==void 0&&(r.status=t.status),t.manager!==void 0&&(r.manager=t.manager),t.description!==void 0&&(r.description=t.description),t.meetingNotes!==void 0&&(r.meetingNotes=t.meetingNotes),t.customerRequests!==void 0&&(r.customerRequests=t.customerRequests),t.entrancePassword!==void 0&&(r.entrancePassword=t.entrancePassword),t.sitePassword!==void 0&&(r.sitePassword=t.sitePassword),console.log("[projectService.updateProject] Sending to backend:",r);try{return(await Te.put(`/projects/${e}`,r)).data}catch(s){const i=s;throw console.error("[projectService.updateProject] Error:",s),console.error("[projectService.updateProject] Error response:",(n=i.response)==null?void 0:n.data),s}},deleteProject:async e=>{await Te.delete(`/projects/${e}`)}},Ys={getAllContractors:async()=>(await Te.get("/contractors")).data,getContractorById:async e=>(await Te.get(`/contractors/${e}`)).data,createContractor:async e=>(await Te.post("/contractors",e)).data,updateContractor:async(e,t)=>(await Te.put(`/contractors/${e}`,t)).data,deleteContractor:async e=>{await Te.delete(`/contractors/${e}`)}},fd={getAllConstructionPayments:async()=>(await Te.get("/construction-payments")).data,getConstructionPaymentById:async e=>(await Te.get(`/construction-payments/${e}`)).data,createConstructionPayment:async e=>(await Te.post("/construction-payments",e)).data,updateConstructionPayment:async(e,t)=>(await Te.put(`/construction-payments/${e}`,t)).data,deleteConstructionPayment:async e=>{await Te.delete(`/construction-payments/${e}`)}},Ts=gk()(yk(e=>({projects:[],schedules:[],payments:[],contractors:[],constructionPayments:[],asRequests:[],executionRecords:[],setProjects:t=>e({projects:t}),addProject:t=>e(r=>{const n={id:t.id,project:t.name,client:t.client,totalAmount:t.contractAmount,vatType:"percentage",vatPercentage:100,vatAmount:0,payments:[]};return{projects:[t,...r.projects],constructionPayments:[n,...r.constructionPayments]}}),updateProject:(t,r)=>e(n=>({projects:n.projects.map(s=>s.id===t?{...s,...r}:s)})),deleteProject:t=>e(r=>({projects:r.projects.filter(n=>n.id!==t),constructionPayments:r.constructionPayments.filter(n=>n.id!==t)})),setSchedules:t=>e({schedules:t}),addSchedule:t=>e(r=>({schedules:[t,...r.schedules]})),updateSchedule:(t,r)=>e(n=>({schedules:n.schedules.map(s=>s.id===t?{...s,...r}:s)})),deleteSchedule:t=>e(r=>({schedules:r.schedules.filter(n=>n.id!==t)})),setPayments:t=>e({payments:t}),addPayment:t=>e(r=>({payments:[t,...r.payments]})),updatePayment:(t,r)=>e(n=>({payments:n.payments.map(s=>s.id===t?{...s,...r}:s)})),deletePayment:t=>e(r=>({payments:r.payments.filter(n=>n.id!==t)})),setContractors:t=>e({contractors:t}),addContractor:t=>e(r=>({contractors:[t,...r.contractors]})),updateContractor:(t,r)=>e(n=>({contractors:n.contractors.map(s=>s.id===t?{...s,...r}:s)})),deleteContractor:t=>e(r=>({contractors:r.contractors.filter(n=>n.id!==t)})),setConstructionPayments:t=>e({constructionPayments:t}),addConstructionPayment:t=>e(r=>({constructionPayments:[t,...r.constructionPayments]})),updateConstructionPayment:(t,r)=>e(n=>({constructionPayments:n.constructionPayments.map(s=>s.id===t?{...s,...r}:s)})),deleteConstructionPayment:t=>e(r=>({constructionPayments:r.constructionPayments.filter(n=>n.id!==t)})),setASRequests:t=>e({asRequests:t}),addASRequest:t=>e(r=>({asRequests:[t,...r.asRequests]})),updateASRequest:(t,r)=>e(n=>({asRequests:n.asRequests.map(s=>s.id===t?{...s,...r}:s)})),deleteASRequest:t=>e(r=>({asRequests:r.asRequests.filter(n=>n.id!==t)})),setExecutionRecords:t=>e({executionRecords:t}),addExecutionRecord:t=>e(r=>({executionRecords:[t,...r.executionRecords]})),updateExecutionRecord:(t,r)=>e(n=>({executionRecords:n.executionRecords.map(s=>s.id===t?{...s,...r}:s)})),deleteExecutionRecord:t=>e(r=>({executionRecords:r.executionRecords.filter(n=>n.id!==t)})),loadPaymentsFromAPI:async()=>{try{const r=(await xa.getAllPayments()).map(n=>({id:String(n.id),project:n.project_name,purpose:n.description,process:n.vendor_name,itemName:n.item_name||"",amount:n.amount,materialAmount:n.material_amount||0,laborAmount:n.labor_amount||0,originalLaborAmount:n.original_labor_amount||0,applyTaxDeduction:n.apply_tax_deduction===1,includesVAT:n.includes_vat===1,category:n.request_type,status:n.status,urgency:"normal",requestedBy:n.requester_name,requestDate:new Date(n.created_at),approvalDate:n.approved_at?new Date(n.approved_at):void 0,bankInfo:{accountHolder:n.account_holder||"",bankName:n.bank_name||"",accountNumber:n.account_number||""},attachments:[],notes:n.notes||""}));e({payments:r})}catch(t){throw console.error("Failed to load payments from API:",t),t}},addPaymentToAPI:async t=>{try{const r={projectId:t.project,purpose:t.purpose,process:t.process,itemName:t.itemName,amount:t.amount,category:t.category,urgency:t.urgency,requestedBy:t.requestedBy,bankInfo:t.bankInfo,notes:t.notes,attachments:[],materialAmount:t.materialAmount||0,laborAmount:t.laborAmount||0,originalLaborAmount:t.originalLaborAmount||0,applyTaxDeduction:t.applyTaxDeduction||!1,includesVAT:t.includesVAT||!1,quickText:t.quickText||""};console.log("[addPaymentToAPI] Sending payment data:",r),await xa.createPayment(r);const s=(await xa.getAllPayments()).map(i=>({id:String(i.id),project:i.project_name,purpose:i.description,process:i.vendor_name,itemName:i.item_name||"",amount:i.amount,materialAmount:i.material_amount||0,laborAmount:i.labor_amount||0,originalLaborAmount:i.original_labor_amount||0,applyTaxDeduction:i.apply_tax_deduction===1,includesVAT:i.includes_vat===1,category:i.request_type,status:i.status,urgency:"normal",requestedBy:i.requester_name,requestDate:new Date(i.created_at),approvalDate:i.approved_at?new Date(i.approved_at):void 0,bankInfo:{accountHolder:i.account_holder||"",bankName:i.bank_name||"",accountNumber:i.account_number||""},attachments:[],notes:i.notes||""}));e({payments:s})}catch(r){throw console.error("Failed to add payment to API:",r),r}},updatePaymentInAPI:async(t,r)=>{try{r.status&&Object.keys(r).length===1?await xa.updatePaymentStatus(t,r.status):await xa.updatePayment(t,{projectId:r.project,purpose:r.purpose,process:r.process,itemName:r.itemName,amount:r.amount,category:r.category,urgency:r.urgency,bankInfo:r.bankInfo,notes:r.notes});const s=(await xa.getAllPayments()).map(i=>({id:String(i.id),project:i.project_name,purpose:i.description,process:i.vendor_name,itemName:i.item_name||"",amount:i.amount,materialAmount:i.material_amount||0,laborAmount:i.labor_amount||0,originalLaborAmount:i.original_labor_amount||0,applyTaxDeduction:i.apply_tax_deduction===1,includesVAT:i.includes_vat===1,category:i.request_type,status:i.status,urgency:"normal",requestedBy:i.requester_name,requestDate:new Date(i.created_at),approvalDate:i.approved_at?new Date(i.approved_at):void 0,bankInfo:{accountHolder:i.account_holder||"",bankName:i.bank_name||"",accountNumber:i.account_number||""},attachments:[],notes:i.notes||""}));e({payments:s})}catch(n){throw console.error("Failed to update payment in API:",n),n}},deletePaymentFromAPI:async t=>{try{await xa.deletePayment(t),e(r=>({payments:r.payments.filter(n=>n.id!==t)}))}catch(r){throw console.error("Failed to delete payment from API:",r),r}},loadSchedulesFromAPI:async()=>{try{const t=await ud.getAllSchedules();console.log(" LOAD SCHEDULES - Raw API response sample:",t[0]);const r=t.map(n=>{var i;console.log(" Processing schedule:",{id:n._id,title:n.title,assigneeNames:n.assigneeNames,assignedTo:n.assignedTo,assignedToType:typeof n.assignedTo,assignedToLength:Array.isArray(n.assignedTo)?n.assignedTo.length:"not array"});const s=Array.isArray(n.assigneeNames)?n.assigneeNames:n.assigneeNames?typeof n.assigneeNames=="string"?n.assigneeNames.split(",").map(o=>o.trim()):[n.assigneeNames]:((i=n.assignedTo)==null?void 0:i.map(o=>typeof o=="object"?o.name:o))||[];return console.log(" Final attendees:",s),{id:n._id,title:n.title,start:new Date(n.startDate),end:new Date(n.endDate),type:n.type,project:typeof n.project=="object"?n.project.name:n.project,location:n.location,attendees:s,description:n.description,time:n.time}});e({schedules:r})}catch(t){throw console.error("Failed to load schedules from API:",t),t}},addScheduleToAPI:async t=>{var r;try{console.log(" addScheduleToAPI - Input schedule:",{project:t.project,attendees:t.attendees,title:t.title});const n=await ud.createSchedule({project:t.project||"",title:t.title,type:t.type,startDate:t.start,endDate:t.end,allDay:!t.time||t.time==="-",location:t.location,assignedTo:t.attendees||[],description:t.description,asRequestId:t.asRequestId,time:t.time});console.log(" addScheduleToAPI - API Response:",{id:n._id,assigneeNames:n.assigneeNames,assignedTo:n.assignedTo,project:n.project});const s=t.attendees||[];let i=n.assigneeNames||((r=n.assignedTo)==null?void 0:r.map(l=>typeof l=="object"?l.name:l))||[];s.length>0&&i.length>s.length&&(console.log(" Server added extra attendees, filtering to match request:",{requested:s,serverReturned:i}),i=s);const o={id:n._id,title:n.title,start:new Date(n.startDate),end:new Date(n.endDate),type:n.type,project:typeof n.project=="object"?n.project.name:n.project,location:n.location,attendees:i,description:n.description,time:n.time};console.log(" addScheduleToAPI - Final schedule attendees:",o.attendees),e(l=>({schedules:[o,...l.schedules]}))}catch(n){throw console.error("Failed to add schedule to API:",n),n}},updateScheduleInAPI:async(t,r)=>{var n,s,i;try{console.log(" updateScheduleInAPI called with:",{id:t,updatedSchedule:r});const o=await ud.updateSchedule(t,{project:r.project,title:r.title,type:r.type,startDate:r.start,endDate:r.end,location:r.location,description:r.description,assignedTo:r.attendees||[],time:r.time});console.log(" updateScheduleInAPI response:",o);const l={id:o._id,title:o.title,start:new Date(o.startDate),end:new Date(o.endDate),type:o.type,project:typeof o.project=="object"?o.project.name:o.project,location:o.location,attendees:o.assigneeNames||((n=o.assignedTo)==null?void 0:n.map(c=>typeof c=="object"?c.name:c))||[],description:o.description,time:o.time};e(c=>({schedules:c.schedules.map(u=>u.id===t?l:u)}))}catch(o){throw console.error("Failed to update schedule in API:",o),console.error("Error details:",{message:o instanceof Error?o.message:"Unknown error",response:o&&typeof o=="object"&&"response"in o?(s=o.response)==null?void 0:s.data:void 0,status:o&&typeof o=="object"&&"response"in o?(i=o.response)==null?void 0:i.status:void 0}),o}},deleteScheduleFromAPI:async t=>{try{await ud.deleteSchedule(t),e(r=>({schedules:r.schedules.filter(n=>n.id!==t)}))}catch(r){throw console.error("Failed to delete schedule from API:",r),r}},loadProjectsFromAPI:async()=>{try{const r=(await dd.getAllProjects()).map(n=>{var s,i;return{id:n._id||n.id,name:n.name,client:typeof n.client=="object"?n.client.name:n.client||"",location:typeof n.location=="object"?n.location.address:n.location||n.address||"",status:n.status==="inProgress"?"in-progress":n.status==="onHold"?"on-hold":n.status,progress:n.progress||0,startDate:n.startDate||n.start_date?new Date(n.startDate||n.start_date):void 0,endDate:n.endDate||n.end_date?new Date(n.endDate||n.end_date):void 0,contractAmount:n.budget||n.contractAmount||0,spent:n.actualCost||n.spent||0,manager:n.manager||"",team:[],description:n.description||"",meetingNotes:((s=n.meetingNotes)==null?void 0:s.map(o=>({id:o.id,content:o.content,date:new Date(o.date)})))||[],customerRequests:((i=n.customerRequests)==null?void 0:i.map(o=>({id:o.id,content:o.content,completed:o.completed,createdAt:new Date(o.createdAt)})))||[],entrancePassword:n.entrancePassword||"",sitePassword:n.sitePassword||""}});e({projects:r})}catch(t){throw console.error("Failed to load projects from API:",t),t}},addProjectToAPI:async t=>{var r,n;try{const s=await dd.createProject({name:t.name,client:t.client,location:t.location,startDate:t.startDate,endDate:t.endDate,status:t.status,contractAmount:t.contractAmount,spent:t.spent,manager:t.manager,team:t.team,progress:t.progress,description:t.description}),i={id:s._id||s.id,name:s.name,client:typeof s.client=="object"?s.client.name:s.client||"",location:typeof s.location=="object"?s.location.address:s.location||s.address||"",status:s.status==="inProgress"?"in-progress":s.status==="onHold"?"on-hold":s.status,progress:s.progress||0,startDate:s.startDate||s.start_date?new Date(s.startDate||s.start_date):void 0,endDate:s.endDate||s.end_date?new Date(s.endDate||s.end_date):void 0,contractAmount:s.budget||s.contractAmount||0,spent:s.actualCost||s.spent||0,manager:s.manager||"",team:[],description:s.description||"",meetingNotes:((r=s.meetingNotes)==null?void 0:r.map(o=>({id:o.id,content:o.content,date:new Date(o.date)})))||[],customerRequests:((n=s.customerRequests)==null?void 0:n.map(o=>({id:o.id,content:o.content,completed:o.completed,createdAt:new Date(o.createdAt)})))||[],entrancePassword:s.entrancePassword||"",sitePassword:s.sitePassword||""};e(o=>({projects:[i,...o.projects]}))}catch(s){throw console.error("Failed to add project to API:",s),s}},updateProjectInAPI:async(t,r)=>{var n,s;try{const i=await dd.updateProject(t,r),o={id:i._id||i.id,name:i.name,client:typeof i.client=="object"?i.client.name:i.client||"",location:typeof i.location=="object"?i.location.address:i.location||i.address||"",status:i.status==="inProgress"?"in-progress":i.status==="onHold"?"on-hold":i.status,progress:i.progress||0,startDate:i.startDate||i.start_date?new Date(i.startDate||i.start_date):void 0,endDate:i.endDate||i.end_date?new Date(i.endDate||i.end_date):void 0,contractAmount:i.budget||i.contractAmount||0,spent:i.actualCost||i.spent||0,manager:i.manager||"",team:[],description:i.description||"",meetingNotes:((n=i.meetingNotes)==null?void 0:n.map(l=>({id:l.id,content:l.content,date:new Date(l.date)})))||[],customerRequests:((s=i.customerRequests)==null?void 0:s.map(l=>({id:l.id,content:l.content,completed:l.completed,createdAt:new Date(l.createdAt)})))||[],entrancePassword:i.entrancePassword||"",sitePassword:i.sitePassword||""};e(l=>({projects:l.projects.map(c=>c.id===t?o:c)}))}catch(i){throw console.error("Failed to update project in API:",i),i}},deleteProjectFromAPI:async t=>{try{await dd.deleteProject(t),e(r=>({projects:r.projects.filter(n=>n.id!==t)}))}catch(r){throw console.error("Failed to delete project from API:",r),r}},loadContractorsFromAPI:async()=>{try{const r=(await Ys.getAllContractors()).map(n=>({id:n._id,rank:n.rank,companyName:n.companyName,name:n.name,process:n.process,contact:n.contact,accountNumber:n.accountNumber,notes:n.notes,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)}));e({contractors:r})}catch(t){throw console.error("Failed to load contractors from API:",t),t}},addContractorToAPI:async t=>{try{const r=await Ys.createContractor({rank:t.rank,companyName:t.companyName,name:t.name,process:t.process,contact:t.contact,accountNumber:t.accountNumber,notes:t.notes}),n={id:r._id,rank:r.rank,companyName:r.companyName,name:r.name,process:r.process,contact:r.contact,accountNumber:r.accountNumber,notes:r.notes,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt)};e(s=>({contractors:[n,...s.contractors]}))}catch(r){throw console.error("Failed to add contractor to API:",r),r}},updateContractorInAPI:async(t,r)=>{try{const n=await Ys.updateContractor(t,{rank:r.rank,companyName:r.companyName,name:r.name,process:r.process,contact:r.contact,accountNumber:r.accountNumber,notes:r.notes}),s={id:n._id,rank:n.rank,companyName:n.companyName,name:n.name,process:n.process,contact:n.contact,accountNumber:n.accountNumber,notes:n.notes,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)};e(i=>({contractors:i.contractors.map(o=>o.id===t?s:o)}))}catch(n){throw console.error("Failed to update contractor in API:",n),n}},deleteContractorFromAPI:async t=>{try{await Ys.deleteContractor(t),e(r=>({contractors:r.contractors.filter(n=>n.id!==t)}))}catch(r){throw console.error("Failed to delete contractor from API:",r),r}},loadConstructionPaymentsFromAPI:async()=>{try{const r=(await fd.getAllConstructionPayments()).map(n=>{var i;let s;return n.expectedPaymentDates&&(s={contract:n.expectedPaymentDates.contract?new Date(n.expectedPaymentDates.contract):void 0,start:n.expectedPaymentDates.start?new Date(n.expectedPaymentDates.start):void 0,middle:n.expectedPaymentDates.middle?new Date(n.expectedPaymentDates.middle):void 0,final:n.expectedPaymentDates.final?new Date(n.expectedPaymentDates.final):void 0}),{id:n._id,project:n.project,client:n.client,totalAmount:n.totalAmount,vatType:n.vatType,vatPercentage:n.vatPercentage,vatAmount:n.vatAmount,expectedPaymentDates:s,payments:((i=n.payments)==null?void 0:i.map(o=>{var u;const l=o.date?new Date(o.date):new Date,c=isNaN(l.getTime())?new Date:l;return{type:o.type||((u=o.types)==null?void 0:u[0])||"",amount:o.amount,date:c,method:o.method,notes:o.notes}}))||[]}});e({constructionPayments:r})}catch(t){throw console.error("Failed to load construction payments from API:",t),t}},addConstructionPaymentToAPI:async t=>{var r;try{const n=await fd.createConstructionPayment(t),s={id:n._id,project:n.project,client:n.client,totalAmount:n.totalAmount,vatType:n.vatType,vatPercentage:n.vatPercentage,vatAmount:n.vatAmount,payments:((r=n.payments)==null?void 0:r.map(i=>{var c;const o=i.date?new Date(i.date):new Date,l=isNaN(o.getTime())?new Date:o;return{type:i.type||((c=i.types)==null?void 0:c[0])||"",amount:i.amount,date:l,method:i.method,notes:i.notes}}))||[]};e(i=>({constructionPayments:[s,...i.constructionPayments]}))}catch(n){throw console.error("Failed to add construction payment to API:",n),n}},updateConstructionPaymentInAPI:async(t,r)=>{var n;try{const s=await fd.updateConstructionPayment(t,r);let i;s.expectedPaymentDates&&(i={contract:s.expectedPaymentDates.contract?new Date(s.expectedPaymentDates.contract):void 0,start:s.expectedPaymentDates.start?new Date(s.expectedPaymentDates.start):void 0,middle:s.expectedPaymentDates.middle?new Date(s.expectedPaymentDates.middle):void 0,final:s.expectedPaymentDates.final?new Date(s.expectedPaymentDates.final):void 0});const o={id:s._id,project:s.project,client:s.client,totalAmount:s.totalAmount,vatType:s.vatType,vatPercentage:s.vatPercentage,vatAmount:s.vatAmount,expectedPaymentDates:i,payments:((n=s.payments)==null?void 0:n.map(l=>{var c;return{type:l.type||((c=l.types)==null?void 0:c[0])||"",amount:l.amount,date:new Date(l.date),method:l.method,notes:l.notes}}))||[]};e(l=>({constructionPayments:l.constructionPayments.map(c=>c.id===t?o:c)}))}catch(s){throw console.error("Failed to update construction payment in API:",s),s}},deleteConstructionPaymentFromAPI:async t=>{try{await fd.deleteConstructionPayment(t),e(r=>({constructionPayments:r.constructionPayments.filter(n=>n.id!==t)}))}catch(r){throw console.error("Failed to delete construction payment from API:",r),r}},loadASRequestsFromAPI:async()=>{try{const r=(await zl.getAllASRequests()).map(n=>({id:n._id,project:n.project,client:n.client,requestDate:new Date(n.requestDate),siteAddress:n.siteAddress,entrancePassword:n.entrancePassword,description:n.description,scheduledVisitDate:n.scheduledVisitDate?new Date(n.scheduledVisitDate):void 0,scheduledVisitTime:n.scheduledVisitTime,assignedTo:n.assignedTo?Array.isArray(n.assignedTo)?n.assignedTo:[n.assignedTo]:[],completionDate:n.completionDate?new Date(n.completionDate):void 0,notes:n.notes,status:n.status||"pending"}));e({asRequests:r})}catch(t){throw console.error("Failed to load AS requests from API:",t),t}},addASRequestToAPI:async t=>{try{const r=await zl.createASRequest(t),n={id:r._id,project:r.project,client:r.client,requestDate:new Date(r.requestDate),siteAddress:r.siteAddress,entrancePassword:r.entrancePassword,description:r.description,scheduledVisitDate:r.scheduledVisitDate?new Date(r.scheduledVisitDate):void 0,scheduledVisitTime:r.scheduledVisitTime,assignedTo:Array.isArray(r.assignedTo)?r.assignedTo:[],completionDate:r.completionDate?new Date(r.completionDate):void 0,notes:r.notes};return e(s=>({asRequests:[n,...s.asRequests]})),n}catch(r){throw console.error("Failed to add AS request to API:",r),r}},updateASRequestInAPI:async(t,r)=>{try{const n=await zl.updateASRequest(t,r),s={id:n._id,project:n.project,client:n.client,requestDate:new Date(n.requestDate),siteAddress:n.siteAddress,entrancePassword:n.entrancePassword,description:n.description,scheduledVisitDate:n.scheduledVisitDate?new Date(n.scheduledVisitDate):void 0,scheduledVisitTime:n.scheduledVisitTime,assignedTo:Array.isArray(n.assignedTo)?n.assignedTo:[],completionDate:n.completionDate?new Date(n.completionDate):void 0,notes:n.notes,status:n.status||"pending"};e(i=>({asRequests:i.asRequests.map(o=>o.id===t?s:o)}))}catch(n){throw console.error("Failed to update AS request in API:",n),n}},deleteASRequestFromAPI:async t=>{try{await zl.deleteASRequest(t),e(r=>({asRequests:r.asRequests.filter(n=>n.id!==t)}))}catch(r){throw console.error("Failed to delete AS request from API:",r),r}}}),{name:"interior-management-storage",storage:{getItem:e=>{var c,u,d,f,m,y,j;const t=localStorage.getItem(e);if(!t)return null;const{state:r}=JSON.parse(t),n=((c=r.projects)==null?void 0:c.map(p=>({...p,startDate:p.startDate?new Date(p.startDate):void 0,endDate:p.endDate?new Date(p.endDate):void 0,contractAmount:p.contractAmount!==void 0?p.contractAmount:p.budget||0})))||[],s=((u=r.constructionPayments)==null?void 0:u.map(p=>{var k;return{...p,vatType:p.vatType||"percentage",vatPercentage:p.vatPercentage??100,vatAmount:p.vatAmount??0,payments:((k=p.payments)==null?void 0:k.map(h=>({...h,date:new Date(h.date)})))||[]}}))||[],i=new Set(s.map(p=>p.id)),o=n.filter(p=>!i.has(p.id)).map(p=>({id:p.id,project:p.name,client:p.client,totalAmount:p.contractAmount||0,vatType:"percentage",vatPercentage:100,vatAmount:0,payments:[]})),l=[...s,...o];return{state:{...r,projects:n,schedules:((d=r.schedules)==null?void 0:d.map(p=>({...p,start:new Date(p.start),end:new Date(p.end)})))||[],payments:((f=r.payments)==null?void 0:f.map(p=>({...p,requestDate:new Date(p.requestDate),approvalDate:p.approvalDate?new Date(p.approvalDate):void 0})))||[],contractors:((m=r.contractors)==null?void 0:m.map(p=>({...p,createdAt:new Date(p.createdAt),updatedAt:new Date(p.updatedAt)})))||[],constructionPayments:l,asRequests:((y=r.asRequests)==null?void 0:y.map(p=>({...p,requestDate:new Date(p.requestDate),scheduledVisitDate:p.scheduledVisitDate?new Date(p.scheduledVisitDate):void 0,completionDate:p.completionDate?new Date(p.completionDate):void 0})))||[],executionRecords:((j=r.executionRecords)==null?void 0:j.map(p=>({...p,date:new Date(p.date),createdAt:new Date(p.createdAt),updatedAt:new Date(p.updatedAt)})))||[]}}},setItem:(e,t)=>{const r=JSON.stringify(t);localStorage.setItem(e,r)},removeItem:e=>localStorage.removeItem(e)}}));var gu=e=>e.type==="checkbox",pi=e=>e instanceof Date,Ir=e=>e==null;const Ek=e=>typeof e=="object";var er=e=>!Ir(e)&&!Array.isArray(e)&&Ek(e)&&!pi(e),g5=e=>er(e)&&e.target?gu(e.target)?e.target.checked:e.target.value:e,y5=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,x5=(e,t)=>e.has(y5(t)),v5=e=>{const t=e.constructor&&e.constructor.prototype;return er(t)&&t.hasOwnProperty("isPrototypeOf")},$x=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ur(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!($x&&(e instanceof Blob||n))&&(r||er(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!v5(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=ur(e[s]));else return e;return t}var $m=e=>/^\w*$/.test(e),Xt=e=>e===void 0,Fx=e=>Array.isArray(e)?e.filter(Boolean):[],Bx=e=>Fx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Fe=(e,t,r)=>{if(!t||!er(e))return r;const n=($m(t)?[t]:Bx(t)).reduce((s,i)=>Ir(s)?s:s[i],e);return Xt(n)||n===e?Xt(e[t])?r:e[t]:n},cs=e=>typeof e=="boolean",Pt=(e,t,r)=>{let n=-1;const s=$m(t)?[t]:Bx(t),i=s.length,o=i-1;for(;++n<i;){const l=s[n];let c=r;if(n!==o){const u=e[l];c=er(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const fw={BLUR:"blur",FOCUS_OUT:"focusout"},Wn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Os={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},b5=z.createContext(null);b5.displayName="HookFormContext";var w5=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Wn.all&&(t._proxyFormState[o]=!n||Wn.all),e[o]}});return s};const N5=typeof window<"u"?z.useLayoutEffect:z.useEffect;var an=e=>typeof e=="string",j5=(e,t,r,n,s)=>an(e)?(n&&t.watch.add(e),Fe(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Fe(r,i))):(n&&(t.watchAll=!0),r),Kg=e=>Ir(e)||!Ek(e);function ka(e,t,r=new WeakSet){if(Kg(e)||Kg(t))return e===t;if(pi(e)&&pi(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const l=t[i];if(pi(o)&&pi(l)||er(o)&&er(l)||Array.isArray(o)&&Array.isArray(l)?!ka(o,l,r):o!==l)return!1}}return!0}var S5=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},nc=e=>Array.isArray(e)?e:[e],mw=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function Tk(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&er(s)&&i){const o=Tk(s,i);er(o)&&(r[n]=o)}else e[n]&&(r[n]=i)}return r}var Vr=e=>er(e)&&!Object.keys(e).length,Wx=e=>e.type==="file",Hn=e=>typeof e=="function",$f=e=>{if(!$x)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ak=e=>e.type==="select-multiple",Hx=e=>e.type==="radio",k5=e=>Hx(e)||gu(e),op=e=>$f(e)&&e.isConnected;function D5(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Xt(e)?n++:e[t[n++]];return e}function C5(e){for(const t in e)if(e.hasOwnProperty(t)&&!Xt(e[t]))return!1;return!0}function Qt(e,t){const r=Array.isArray(t)?t:$m(t)?[t]:Bx(t),n=r.length===1?e:D5(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(er(n)&&Vr(n)||Array.isArray(n)&&C5(n))&&Qt(e,r.slice(0,-1)),e}var E5=e=>{for(const t in e)if(Hn(e[t]))return!0;return!1};function _k(e){return Array.isArray(e)||er(e)&&!E5(e)}function Gg(e,t={}){for(const r in e)_k(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Gg(e[r],t[r])):Ir(e[r])||(t[r]=!0);return t}function Xi(e,t,r){r||(r=Gg(t));for(const n in e)_k(e[n])?Xt(t)||Kg(r[n])?r[n]=Gg(e[n],Array.isArray(e[n])?[]:{}):Xi(e[n],Ir(t)?{}:t[n],r[n]):r[n]=!ka(e[n],t[n]);return r}const hw={value:!1,isValid:!1},pw={value:!0,isValid:!0};var Pk=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Xt(e[0].attributes.value)?Xt(e[0].value)||e[0].value===""?pw:{value:e[0].value,isValid:!0}:pw:hw}return hw},Mk=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Xt(e)?e:t?e===""?NaN:e&&+e:r&&an(e)?new Date(e):n?n(e):e;const gw={isValid:!1,value:null};var Rk=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,gw):gw;function yw(e){const t=e.ref;return Wx(t)?t.files:Hx(t)?Rk(e.refs).value:Ak(t)?[...t.selectedOptions].map(({value:r})=>r):gu(t)?Pk(e.refs).value:Mk(Xt(t.value)?e.ref.value:t.value,e)}var T5=(e,t,r,n)=>{const s={};for(const i of e){const o=Fe(t,i);o&&Pt(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Ff=e=>e instanceof RegExp,Pl=e=>Xt(e)?e:Ff(e)?e.source:er(e)?Ff(e.value)?e.value.source:e.value:e,xw=e=>({isOnSubmit:!e||e===Wn.onSubmit,isOnBlur:e===Wn.onBlur,isOnChange:e===Wn.onChange,isOnAll:e===Wn.all,isOnTouch:e===Wn.onTouched});const vw="AsyncFunction";var A5=e=>!!e&&!!e.validate&&!!(Hn(e.validate)&&e.validate.constructor.name===vw||er(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===vw)),_5=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),bw=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const sc=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=Fe(e,s);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(sc(l,t))break}else if(er(l)&&sc(l,t))break}}};function ww(e,t,r){const n=Fe(e,r);if(n||$m(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=Fe(t,i),l=Fe(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:r}}var P5=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return Vr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||Wn.all))},M5=(e,t,r)=>!e||!t||e===t||nc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),R5=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,O5=(e,t)=>!Fx(Fe(e,t)).length&&Qt(e,t),I5=(e,t,r)=>{const n=nc(Fe(e,r));return Pt(n,"root",t[r]),Pt(e,r,n),e};function Nw(e,t,r="validate"){if(an(e)||Array.isArray(e)&&e.every(an)||cs(e)&&!e)return{type:r,message:an(e)?e:"",ref:t}}var Ki=e=>er(e)&&!Ff(e)?e:{value:e,message:""},jw=async(e,t,r,n,s,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:m,pattern:y,validate:j,name:p,valueAsNumber:k,mount:h}=e._f,v=Fe(r,p);if(!h||t.has(p))return{};const S=l?l[0]:o,x=Q=>{s&&S.reportValidity&&(S.setCustomValidity(cs(Q)?"":Q||""),S.reportValidity())},T={},E=Hx(o),_=gu(o),M=E||_,O=(k||Wx(o))&&Xt(o.value)&&Xt(v)||$f(o)&&o.value===""||v===""||Array.isArray(v)&&!v.length,R=S5.bind(null,p,n,T),K=(Q,ne,Z,fe=Os.maxLength,te=Os.minLength)=>{const xe=Q?ne:Z;T[p]={type:Q?fe:te,message:xe,ref:o,...R(Q?fe:te,xe)}};if(i?!Array.isArray(v)||!v.length:c&&(!M&&(O||Ir(v))||cs(v)&&!v||_&&!Pk(l).isValid||E&&!Rk(l).isValid)){const{value:Q,message:ne}=an(c)?{value:!!c,message:c}:Ki(c);if(Q&&(T[p]={type:Os.required,message:ne,ref:S,...R(Os.required,ne)},!n))return x(ne),T}if(!O&&(!Ir(f)||!Ir(m))){let Q,ne;const Z=Ki(m),fe=Ki(f);if(!Ir(v)&&!isNaN(v)){const te=o.valueAsNumber||v&&+v;Ir(Z.value)||(Q=te>Z.value),Ir(fe.value)||(ne=te<fe.value)}else{const te=o.valueAsDate||new Date(v),xe=ge=>new Date(new Date().toDateString()+" "+ge),ie=o.type=="time",V=o.type=="week";an(Z.value)&&v&&(Q=ie?xe(v)>xe(Z.value):V?v>Z.value:te>new Date(Z.value)),an(fe.value)&&v&&(ne=ie?xe(v)<xe(fe.value):V?v<fe.value:te<new Date(fe.value))}if((Q||ne)&&(K(!!Q,Z.message,fe.message,Os.max,Os.min),!n))return x(T[p].message),T}if((u||d)&&!O&&(an(v)||i&&Array.isArray(v))){const Q=Ki(u),ne=Ki(d),Z=!Ir(Q.value)&&v.length>+Q.value,fe=!Ir(ne.value)&&v.length<+ne.value;if((Z||fe)&&(K(Z,Q.message,ne.message),!n))return x(T[p].message),T}if(y&&!O&&an(v)){const{value:Q,message:ne}=Ki(y);if(Ff(Q)&&!v.match(Q)&&(T[p]={type:Os.pattern,message:ne,ref:o,...R(Os.pattern,ne)},!n))return x(ne),T}if(j){if(Hn(j)){const Q=await j(v,r),ne=Nw(Q,S);if(ne&&(T[p]={...ne,...R(Os.validate,ne.message)},!n))return x(ne.message),T}else if(er(j)){let Q={};for(const ne in j){if(!Vr(Q)&&!n)break;const Z=Nw(await j[ne](v,r),S,ne);Z&&(Q={...Z,...R(ne,Z.message)},x(Z.message),n&&(T[p]=Q))}if(!Vr(Q)&&(T[p]={ref:S,...Q},!n))return T}}return x(!0),T};const L5={mode:Wn.onSubmit,reValidateMode:Wn.onChange,shouldFocusError:!0};function $5(e={}){let t={...L5,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Hn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=er(t.defaultValues)||er(t.values)?ur(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:ur(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const m={array:mw(),state:mw()},y=t.criteriaMode===Wn.all,j=g=>N=>{clearTimeout(u),u=setTimeout(g,N)},p=async g=>{if(!t.disabled&&(d.isValid||f.isValid||g)){const N=t.resolver?Vr((await _()).errors):await O(n,!0);N!==r.isValid&&m.state.next({isValid:N})}},k=(g,N)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((g||Array.from(l.mount)).forEach(D=>{D&&(N?Pt(r.validatingFields,D,N):Qt(r.validatingFields,D))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Vr(r.validatingFields)}))},h=(g,N=[],D,P,F=!0,q=!0)=>{if(P&&D&&!t.disabled){if(o.action=!0,q&&Array.isArray(Fe(n,g))){const A=D(Fe(n,g),P.argA,P.argB);F&&Pt(n,g,A)}if(q&&Array.isArray(Fe(r.errors,g))){const A=D(Fe(r.errors,g),P.argA,P.argB);F&&Pt(r.errors,g,A),O5(r.errors,g)}if((d.touchedFields||f.touchedFields)&&q&&Array.isArray(Fe(r.touchedFields,g))){const A=D(Fe(r.touchedFields,g),P.argA,P.argB);F&&Pt(r.touchedFields,g,A)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Xi(s,i)),m.state.next({name:g,isDirty:K(g,N),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Pt(i,g,N)},v=(g,N)=>{Pt(r.errors,g,N),m.state.next({errors:r.errors})},S=g=>{r.errors=g,m.state.next({errors:r.errors,isValid:!1})},x=(g,N,D,P)=>{const F=Fe(n,g);if(F){const q=Fe(i,g,Xt(D)?Fe(s,g):D);Xt(q)||P&&P.defaultChecked||N?Pt(i,g,N?q:yw(F._f)):Z(g,q),o.mount&&p()}},T=(g,N,D,P,F)=>{let q=!1,A=!1;const J={name:g};if(!t.disabled){if(!D||P){(d.isDirty||f.isDirty)&&(A=r.isDirty,r.isDirty=J.isDirty=K(),q=A!==J.isDirty);const W=ka(Fe(s,g),N);A=!!Fe(r.dirtyFields,g),W?Qt(r.dirtyFields,g):Pt(r.dirtyFields,g,!0),J.dirtyFields=r.dirtyFields,q=q||(d.dirtyFields||f.dirtyFields)&&A!==!W}if(D){const W=Fe(r.touchedFields,g);W||(Pt(r.touchedFields,g,D),J.touchedFields=r.touchedFields,q=q||(d.touchedFields||f.touchedFields)&&W!==D)}q&&F&&m.state.next(J)}return q?J:{}},E=(g,N,D,P)=>{const F=Fe(r.errors,g),q=(d.isValid||f.isValid)&&cs(N)&&r.isValid!==N;if(t.delayError&&D?(c=j(()=>v(g,D)),c(t.delayError)):(clearTimeout(u),c=null,D?Pt(r.errors,g,D):Qt(r.errors,g)),(D?!ka(F,D):F)||!Vr(P)||q){const A={...P,...q&&cs(N)?{isValid:N}:{},errors:r.errors,name:g};r={...r,...A},m.state.next(A)}},_=async g=>{k(g,!0);const N=await t.resolver(i,t.context,T5(g||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return k(g),N},M=async g=>{const{errors:N}=await _(g);if(g)for(const D of g){const P=Fe(N,D);P?Pt(r.errors,D,P):Qt(r.errors,D)}else r.errors=N;return N},O=async(g,N,D={valid:!0})=>{for(const P in g){const F=g[P];if(F){const{_f:q,...A}=F;if(q){const J=l.array.has(q.name),W=F._f&&A5(F._f);W&&d.validatingFields&&k([q.name],!0);const le=await jw(F,l.disabled,i,y,t.shouldUseNativeValidation&&!N,J);if(W&&d.validatingFields&&k([q.name]),le[q.name]&&(D.valid=!1,N))break;!N&&(Fe(le,q.name)?J?I5(r.errors,le,q.name):Pt(r.errors,q.name,le[q.name]):Qt(r.errors,q.name))}!Vr(A)&&await O(A,N,D)}}return D.valid},R=()=>{for(const g of l.unMount){const N=Fe(n,g);N&&(N._f.refs?N._f.refs.every(D=>!op(D)):!op(N._f.ref))&&Ne(g)}l.unMount=new Set},K=(g,N)=>!t.disabled&&(g&&N&&Pt(i,g,N),!ka(ge(),s)),Q=(g,N,D)=>j5(g,l,{...o.mount?i:Xt(N)?s:an(g)?{[g]:N}:N},D,N),ne=g=>Fx(Fe(o.mount?i:s,g,t.shouldUnregister?Fe(s,g,[]):[])),Z=(g,N,D={})=>{const P=Fe(n,g);let F=N;if(P){const q=P._f;q&&(!q.disabled&&Pt(i,g,Mk(N,q)),F=$f(q.ref)&&Ir(N)?"":N,Ak(q.ref)?[...q.ref.options].forEach(A=>A.selected=F.includes(A.value)):q.refs?gu(q.ref)?q.refs.forEach(A=>{(!A.defaultChecked||!A.disabled)&&(Array.isArray(F)?A.checked=!!F.find(J=>J===A.value):A.checked=F===A.value||!!F)}):q.refs.forEach(A=>A.checked=A.value===F):Wx(q.ref)?q.ref.value="":(q.ref.value=F,q.ref.type||m.state.next({name:g,values:ur(i)})))}(D.shouldDirty||D.shouldTouch)&&T(g,F,D.shouldTouch,D.shouldDirty,!0),D.shouldValidate&&V(g)},fe=(g,N,D)=>{for(const P in N){if(!N.hasOwnProperty(P))return;const F=N[P],q=g+"."+P,A=Fe(n,q);(l.array.has(g)||er(F)||A&&!A._f)&&!pi(F)?fe(q,F,D):Z(q,F,D)}},te=(g,N,D={})=>{const P=Fe(n,g),F=l.array.has(g),q=ur(N);Pt(i,g,q),F?(m.array.next({name:g,values:ur(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&D.shouldDirty&&m.state.next({name:g,dirtyFields:Xi(s,i),isDirty:K(g,q)})):P&&!P._f&&!Ir(q)?fe(g,q,D):Z(g,q,D),bw(g,l)&&m.state.next({...r,name:g}),m.state.next({name:o.mount?g:void 0,values:ur(i)})},xe=async g=>{o.mount=!0;const N=g.target;let D=N.name,P=!0;const F=Fe(n,D),q=W=>{P=Number.isNaN(W)||pi(W)&&isNaN(W.getTime())||ka(W,Fe(i,D,W))},A=xw(t.mode),J=xw(t.reValidateMode);if(F){let W,le;const Me=N.type?yw(F._f):g5(g),Ce=g.type===fw.BLUR||g.type===fw.FOCUS_OUT,ze=!_5(F._f)&&!t.resolver&&!Fe(r.errors,D)&&!F._f.deps||R5(Ce,Fe(r.touchedFields,D),r.isSubmitted,J,A),rt=bw(D,l,Ce);Pt(i,D,Me),Ce?(!N||!N.readOnly)&&(F._f.onBlur&&F._f.onBlur(g),c&&c(0)):F._f.onChange&&F._f.onChange(g);const Ye=T(D,Me,Ce),Qe=!Vr(Ye)||rt;if(!Ce&&m.state.next({name:D,type:g.type,values:ur(i)}),ze)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Ce&&p():Ce||p()),Qe&&m.state.next({name:D,...rt?{}:Ye});if(!Ce&&rt&&m.state.next({...r}),t.resolver){const{errors:xt}=await _([D]);if(q(Me),P){const dt=ww(r.errors,n,D),Ft=ww(xt,n,dt.name||D);W=Ft.error,D=Ft.name,le=Vr(xt)}}else k([D],!0),W=(await jw(F,l.disabled,i,y,t.shouldUseNativeValidation))[D],k([D]),q(Me),P&&(W?le=!1:(d.isValid||f.isValid)&&(le=await O(n,!0)));P&&(F._f.deps&&(!Array.isArray(F._f.deps)||F._f.deps.length>0)&&V(F._f.deps),E(D,le,W,Ye))}},ie=(g,N)=>{if(Fe(r.errors,N)&&g.focus)return g.focus(),1},V=async(g,N={})=>{let D,P;const F=nc(g);if(t.resolver){const q=await M(Xt(g)?g:F);D=Vr(q),P=g?!F.some(A=>Fe(q,A)):D}else g?(P=(await Promise.all(F.map(async q=>{const A=Fe(n,q);return await O(A&&A._f?{[q]:A}:A)}))).every(Boolean),!(!P&&!r.isValid)&&p()):P=D=await O(n);return m.state.next({...!an(g)||(d.isValid||f.isValid)&&D!==r.isValid?{}:{name:g},...t.resolver||!g?{isValid:D}:{},errors:r.errors}),N.shouldFocus&&!P&&sc(n,ie,g?F:l.mount),P},ge=(g,N)=>{let D={...o.mount?i:s};return N&&(D=Tk(N.dirtyFields?r.dirtyFields:r.touchedFields,D)),Xt(g)?D:an(g)?Fe(D,g):g.map(P=>Fe(D,P))},G=(g,N)=>({invalid:!!Fe((N||r).errors,g),isDirty:!!Fe((N||r).dirtyFields,g),error:Fe((N||r).errors,g),isValidating:!!Fe(r.validatingFields,g),isTouched:!!Fe((N||r).touchedFields,g)}),U=g=>{g&&nc(g).forEach(N=>Qt(r.errors,N)),m.state.next({errors:g?r.errors:{}})},L=(g,N,D)=>{const P=(Fe(n,g,{_f:{}})._f||{}).ref,F=Fe(r.errors,g)||{},{ref:q,message:A,type:J,...W}=F;Pt(r.errors,g,{...W,...N,ref:P}),m.state.next({name:g,errors:r.errors,isValid:!1}),D&&D.shouldFocus&&P&&P.focus&&P.focus()},Y=(g,N)=>Hn(g)?m.state.subscribe({next:D=>"values"in D&&g(Q(void 0,N),D)}):Q(g,N,!0),ue=g=>m.state.subscribe({next:N=>{M5(g.name,N.name,g.exact)&&P5(N,g.formState||d,de,g.reRenderRoot)&&g.callback({values:{...i},...r,...N,defaultValues:s})}}).unsubscribe,ye=g=>(o.mount=!0,f={...f,...g.formState},ue({...g,formState:f})),Ne=(g,N={})=>{for(const D of g?nc(g):l.mount)l.mount.delete(D),l.array.delete(D),N.keepValue||(Qt(n,D),Qt(i,D)),!N.keepError&&Qt(r.errors,D),!N.keepDirty&&Qt(r.dirtyFields,D),!N.keepTouched&&Qt(r.touchedFields,D),!N.keepIsValidating&&Qt(r.validatingFields,D),!t.shouldUnregister&&!N.keepDefaultValue&&Qt(s,D);m.state.next({values:ur(i)}),m.state.next({...r,...N.keepDirty?{isDirty:K()}:{}}),!N.keepIsValid&&p()},Re=({disabled:g,name:N})=>{(cs(g)&&o.mount||g||l.disabled.has(N))&&(g?l.disabled.add(N):l.disabled.delete(N))},ee=(g,N={})=>{let D=Fe(n,g);const P=cs(N.disabled)||cs(t.disabled);return Pt(n,g,{...D||{},_f:{...D&&D._f?D._f:{ref:{name:g}},name:g,mount:!0,...N}}),l.mount.add(g),D?Re({disabled:cs(N.disabled)?N.disabled:t.disabled,name:g}):x(g,!0,N.value),{...P?{disabled:N.disabled||t.disabled}:{},...t.progressive?{required:!!N.required,min:Pl(N.min),max:Pl(N.max),minLength:Pl(N.minLength),maxLength:Pl(N.maxLength),pattern:Pl(N.pattern)}:{},name:g,onChange:xe,onBlur:xe,ref:F=>{if(F){ee(g,N),D=Fe(n,g);const q=Xt(F.value)&&F.querySelectorAll&&F.querySelectorAll("input,select,textarea")[0]||F,A=k5(q),J=D._f.refs||[];if(A?J.find(W=>W===q):q===D._f.ref)return;Pt(n,g,{_f:{...D._f,...A?{refs:[...J.filter(op),q,...Array.isArray(Fe(s,g))?[{}]:[]],ref:{type:q.type,name:g}}:{ref:q}}}),x(g,!1,void 0,q)}else D=Fe(n,g,{}),D._f&&(D._f.mount=!1),(t.shouldUnregister||N.shouldUnregister)&&!(x5(l.array,g)&&o.action)&&l.unMount.add(g)}}},me=()=>t.shouldFocusError&&sc(n,ie,l.mount),I=g=>{cs(g)&&(m.state.next({disabled:g}),sc(n,(N,D)=>{const P=Fe(n,D);P&&(N.disabled=P._f.disabled||g,Array.isArray(P._f.refs)&&P._f.refs.forEach(F=>{F.disabled=P._f.disabled||g}))},0,!1))},se=(g,N)=>async D=>{let P;D&&(D.preventDefault&&D.preventDefault(),D.persist&&D.persist());let F=ur(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:q,values:A}=await _();r.errors=q,F=ur(A)}else await O(n);if(l.disabled.size)for(const q of l.disabled)Qt(F,q);if(Qt(r.errors,"root"),Vr(r.errors)){m.state.next({errors:{}});try{await g(F,D)}catch(q){P=q}}else N&&await N({...r.errors},D),me(),setTimeout(me);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Vr(r.errors)&&!P,submitCount:r.submitCount+1,errors:r.errors}),P)throw P},ae=(g,N={})=>{Fe(n,g)&&(Xt(N.defaultValue)?te(g,ur(Fe(s,g))):(te(g,N.defaultValue),Pt(s,g,ur(N.defaultValue))),N.keepTouched||Qt(r.touchedFields,g),N.keepDirty||(Qt(r.dirtyFields,g),r.isDirty=N.defaultValue?K(g,ur(Fe(s,g))):K()),N.keepError||(Qt(r.errors,g),d.isValid&&p()),m.state.next({...r}))},X=(g,N={})=>{const D=g?ur(g):s,P=ur(D),F=Vr(g),q=F?s:P;if(N.keepDefaultValues||(s=D),!N.keepValues){if(N.keepDirtyValues){const A=new Set([...l.mount,...Object.keys(Xi(s,i))]);for(const J of Array.from(A))Fe(r.dirtyFields,J)?Pt(q,J,Fe(i,J)):te(J,Fe(q,J))}else{if($x&&Xt(g))for(const A of l.mount){const J=Fe(n,A);if(J&&J._f){const W=Array.isArray(J._f.refs)?J._f.refs[0]:J._f.ref;if($f(W)){const le=W.closest("form");if(le){le.reset();break}}}}if(N.keepFieldsRef)for(const A of l.mount)te(A,Fe(q,A));else n={}}i=t.shouldUnregister?N.keepDefaultValues?ur(s):{}:ur(q),m.array.next({values:{...q}}),m.state.next({values:{...q}})}l={mount:N.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!N.keepIsValid||!!N.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:N.keepSubmitCount?r.submitCount:0,isDirty:F?!1:N.keepDirty?r.isDirty:!!(N.keepDefaultValues&&!ka(g,s)),isSubmitted:N.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:F?{}:N.keepDirtyValues?N.keepDefaultValues&&i?Xi(s,i):r.dirtyFields:N.keepDefaultValues&&g?Xi(s,g):N.keepDirty?r.dirtyFields:{},touchedFields:N.keepTouched?r.touchedFields:{},errors:N.keepErrors?r.errors:{},isSubmitSuccessful:N.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},we=(g,N)=>X(Hn(g)?g(i):g,N),Ee=(g,N={})=>{const D=Fe(n,g),P=D&&D._f;if(P){const F=P.refs?P.refs[0]:P.ref;F.focus&&(F.focus(),N.shouldSelect&&Hn(F.select)&&F.select())}},de=g=>{r={...r,...g}},w={control:{register:ee,unregister:Ne,getFieldState:G,handleSubmit:se,setError:L,_subscribe:ue,_runSchema:_,_focusError:me,_getWatch:Q,_getDirty:K,_setValid:p,_setFieldArray:h,_setDisabledField:Re,_setErrors:S,_getFieldArray:ne,_reset:X,_resetDefaultValues:()=>Hn(t.defaultValues)&&t.defaultValues().then(g=>{we(g,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:I,_subjects:m,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(g){o=g},get _defaultValues(){return s},get _names(){return l},set _names(g){l=g},get _formState(){return r},get _options(){return t},set _options(g){t={...t,...g}}},subscribe:ye,trigger:V,register:ee,handleSubmit:se,watch:Y,setValue:te,getValues:ge,reset:we,resetField:ae,clearErrors:U,unregister:Ne,setError:L,setFocus:Ee,getFieldState:G};return{...w,formControl:w}}function yu(e={}){const t=z.useRef(void 0),r=z.useRef(void 0),[n,s]=z.useState({isDirty:!1,isValidating:!1,isLoading:Hn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Hn(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Hn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=$5(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,N5(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),z.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),z.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),z.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),z.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),z.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),z.useEffect(()=>{e.values&&!ka(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),z.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=w5(n,i),t.current}const Sw=["","","","","","",""],Ok=({event:e,slotInfo:t,defaultProjectName:r,onClose:n,onSave:s,onDelete:i})=>{const{register:o,handleSubmit:l,setValue:c,watch:u,formState:{errors:d},reset:f}=yu({defaultValues:{projectId:"",title:"",date:"",description:""}}),{projects:m}=Ts(),[y,j]=b.useState([]),[p,k]=b.useState(""),[h,v]=b.useState(!1),[S,x]=b.useState(""),[T,E]=b.useState(9),[_,M]=b.useState(0),[O,R]=b.useState(""),K=u("projectId");b.useEffect(()=>{if(K){const V=m.find(ge=>ge.id===K||ge.id===parseInt(K)||ge.id.toString()===K.toString());console.log(" Selected project:",V==null?void 0:V.name),console.log(" Project team:",V==null?void 0:V.team),console.log(" Current selectedMembers:",y)}},[K,m,y]),b.useEffect(()=>{console.log(" Modal mount - initializing states"),j([]),R(""),k("")},[]),b.useEffect(()=>{if(console.log(" ScheduleModal useEffect triggered:",{hasEvent:!!e,eventId:e==null?void 0:e.id,hasSlotInfo:!!t,hasMergedEvents:!!(e!=null&&e.mergedEventIds)}),e&&e.id){console.log(" ScheduleModal processing event:",{title:e.title,projectId:e.projectId,projectName:e.projectName,start:e.start,assignedTo:e.assignedTo,time:e.time});const V=e.originalTitle||e.title,ge=/ - (|) \d{1,2}$/,G=V.replace(ge,"");if(c("title",G,{shouldValidate:!1,shouldDirty:!1}),c("date",Se(e.start,"yyyy-MM-dd"),{shouldValidate:!1,shouldDirty:!1}),c("description",e.description||"",{shouldValidate:!1,shouldDirty:!1}),e.projectId&&e.projectId!==""&&e.projectId!=="undefined")console.log(" Setting projectId from event:",e.projectId),c("projectId",e.projectId,{shouldValidate:!1,shouldDirty:!1}),R("");else if(e.projectName){const L=m.find(Y=>Y.name===e.projectName);console.log(" Finding project by name:",e.projectName,"found:",L),L?(console.log(" Setting projectId from found project:",L.id),c("projectId",L.id,{shouldValidate:!1,shouldDirty:!1}),R("")):(console.log(" Project not found, leaving empty"),c("projectId","",{shouldValidate:!1,shouldDirty:!1}),R(""))}else console.log(" No project info, leaving empty"),c("projectId","",{shouldValidate:!1,shouldDirty:!1}),R("");const U=e.assignedTo||e.attendees||[];if(console.log(" Setting selectedMembers to:",U),j(Array.isArray(U)?U:[]),e.time&&e.time!=="-"){console.log(" Setting time from event:",{eventTime:e.time,parsedHours:e.time.split(":")[0],parsedMinutes:e.time.split(":")[1]}),v(!0);const[L,Y]=e.time.split(":"),ue=parseInt(L,10),ye=parseInt(Y,10);ue>=12?(x(""),E(ue===12?12:ue-12)):(x(""),E(ue===0?12:ue)),M(ye),console.log(" Time state set:",{hasTime:!0,period:ue>=12?"":"",hour:ue>=12?ue===12?12:ue-12:ue===0?12:ue,minute:ye})}else console.log(" No time in event, setting hasTime to false"),v(!1),x(""),E(9),M(0)}else if(t&&!e&&(console.log(" New schedule from slot:",t),f({projectId:"",title:"",date:Se(t.start,"yyyy-MM-dd"),description:""}),console.log(" New schedule - resetting selectedMembers to empty array"),j([]),R(""),r)){const V=m.find(ge=>ge.name===r);V&&c("projectId",V.id,{shouldValidate:!1,shouldDirty:!1})}},[e==null?void 0:e.id]);const Q=V=>{console.log(" toggleMember called with:",V),console.log(" Current selectedMembers before toggle:",y),j(ge=>{console.log(" Previous members in setState:",ge);const G=ge.includes(V)?ge.filter(U=>U!==V):[...ge,V];return console.log(" Updated members after toggle:",G),G})},ne=()=>{const V="HV LAB";y.includes(V)?j(ge=>ge.filter(G=>G!==V)):j(ge=>[...ge,V])},Z=()=>{const V="";y.includes(V)?j(ge=>ge.filter(G=>G!==V)):j(ge=>[...ge,V])},fe=()=>{const V="";y.includes(V)?j(ge=>ge.filter(G=>G!==V)):j(ge=>[...ge,V])},te=()=>{p.trim()&&!y.includes(p.trim())&&(j(V=>[...V,p.trim()]),k(""))},xe=V=>{j(ge=>ge.filter(G=>G!==V))},ie=async V=>{console.log(" Form onSubmit called with data:",V),console.log(" selectedMembers:",y),console.log(" hasTime state:",h),console.log(" timePeriod:",S,"timeHour:",T,"timeMinute:",_),console.log(" Available projects:",m.map(Ne=>({id:Ne.id,name:Ne.name,idType:typeof Ne.id}))),console.log(" Merged event IDs:",e==null?void 0:e.mergedEventIds);const ge=/ - (|) \d{1,2}$/,G=V.title.replace(ge,"").trim();let U="",L="";if(V.projectId){const Ne=m.find(Re=>Re.id===V.projectId||Re.id===parseInt(V.projectId)||Re.id.toString()===V.projectId.toString());console.log(" Looking for project with id:",V.projectId,"type:",typeof V.projectId),console.log(" Found project:",Ne),U=(Ne==null?void 0:Ne.name)||"",L=V.projectId}else U="",L="";console.log(" Final projectId:",L,"projectName:",U,"cleanedTitle:",G);const Y=new Date(V.date);let ue="-";if(h){let Ne=T;S===""&&T!==12?Ne=T+12:S===""&&T===12&&(Ne=0),ue=`${Ne.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`,console.log(" Time calculated:",ue)}else console.log(" No time set (hasTime is false)");const ye={...e,title:G,start:Y,end:Y,projectId:L,projectName:U,assignedTo:y,description:V.description||"",time:ue,mergedEventIds:e==null?void 0:e.mergedEventIds};console.log(" Calling onSave with newEvent:",ye);try{await s(ye),console.log(" onSave completed successfully")}catch(Ne){throw console.error(" onSave failed:",Ne),Ne}};return console.log(" Rendering ScheduleModal with selectedMembers:",y),a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 md:p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b",children:[a.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:e?" ":"  "}),a.jsx("button",{onClick:n,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(et,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:l(ie),className:"p-4 md:p-6 space-y-3 md:space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsxs("select",{...o("projectId"),className:"input w-full",children:[a.jsx("option",{value:""}),m.filter(V=>e!=null&&e.isASVisit?!0:V.status!=="completed").map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),a.jsx("input",{...o("title",{required:" "}),type:"text",className:"input w-full"}),d.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(d.title.message)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{...o("date",{required:" "}),type:"date",className:"input w-full"}),d.date&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(d.date.message)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("div",{className:"mb-2",children:a.jsx("button",{type:"button",onClick:()=>v(!h),className:`px-3 py-1.5 text-xs rounded border transition-colors ${h?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:h?" ":"  (-)"})}),h&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>x(""),className:`px-3 py-1.5 text-xs rounded border transition-colors ${S===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>x(""),className:`px-3 py-1.5 text-xs rounded border transition-colors ${S===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""})]}),a.jsx("select",{value:T,onChange:V=>E(parseInt(V.target.value)),className:"flex-1 min-w-[80px] max-w-[120px] px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(V=>a.jsxs("option",{value:V,children:[V,""]},V))}),a.jsx("select",{value:_,onChange:V=>M(parseInt(V.target.value)),className:"flex-1 min-w-[80px] max-w-[120px] px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(V=>a.jsxs("option",{value:V,children:[V,""]},V))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (  )"}),a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[a.jsx("button",{type:"button",onClick:ne,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${y.includes("HV LAB")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"HV LAB"}),a.jsx("button",{type:"button",onClick:Z,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${y.includes("")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""}),a.jsx("button",{type:"button",onClick:fe,className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${y.includes("")?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""}),Sw.map(V=>a.jsx("button",{type:"button",onClick:()=>Q(V),className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${y.includes(V)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:V},V)),y.filter(V=>!Sw.includes(V)&&V!=="HV LAB"&&V!==""&&V!=="").map(V=>a.jsxs("button",{type:"button",onClick:()=>xe(V),className:"px-2.5 py-1.5 rounded border transition-colors text-sm bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[V," "]},V))]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:p,onChange:V=>k(V.target.value),onKeyPress:V=>{V.key==="Enter"&&(V.preventDefault(),te())},className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("button",{type:"button",onClick:te,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("textarea",{...o("description"),rows:4,className:"input w-full text-sm md:text-base"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-2 sm:gap-0 pt-4 border-t",children:[a.jsx("div",{children:e&&a.jsxs("button",{type:"button",onClick:()=>{window.confirm("  ?")&&i(e.id)},className:"btn btn-outline text-red-600 hover:bg-red-50 flex items-center w-full sm:w-auto justify-center text-sm md:text-base",children:[a.jsx(Et,{className:"h-4 w-4 mr-2"}),""]})}),a.jsxs("div",{className:"flex gap-2 sm:space-x-3",children:[a.jsx("button",{type:"button",onClick:n,className:"btn btn-outline flex-1 sm:flex-none text-sm md:text-base",children:""}),a.jsx("button",{type:"submit",className:"btn btn-primary flex-1 sm:flex-none text-sm md:text-base",children:e?"":""})]})]})]})]})})},kw=["","","","","","",""],F5=()=>{const{schedules:e,loadSchedulesFromAPI:t,addScheduleToAPI:r,deleteScheduleFromAPI:n}=Ts(),{user:s}=Ar(),[i,o]=b.useState(!1),l=s!=null&&s.name?s.name.slice(-2):null,c=f=>{if(!f||f==="-")return"";const[m,y]=f.split(":"),j=parseInt(m,10),p=parseInt(y,10),k=j>=12?"":"",h=j%12||12;return p>0?`${k} ${h} ${p}`:`${k} ${h}`},u=(s==null?void 0:s.name)===""?[""]:l?[l,...kw.filter(f=>f!==l)]:kw,d=f=>{const m=e.filter(p=>p.attendees?!!(p.attendees.includes(f)||p.attendees.includes("HV LAB")||p.attendees.includes("")&&["",""].includes(f)||p.attendees.includes("")&&["","",""].includes(f)):!1),y=m.filter(p=>dw(new Date(p.start))),j=m.filter(p=>RI(new Date(p.start))&&!dw(new Date(p.start))).sort((p,k)=>new Date(p.start).getTime()-new Date(k.start).getTime()).slice(0,3);return{todaySchedules:y,upcomingSchedules:j,member:f}};return a.jsxs("div",{className:"space-y-3 md:space-y-5 lg:space-y-4",children:[a.jsx("div",{children:a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 ipad:grid-cols-2 ipad-lg:grid-cols-2 ipad-xl:grid-cols-3 ipad-2xl:grid-cols-3 2xl:grid-cols-4 gap-3 md:gap-4 lg:gap-4",children:u.map(f=>{const{todaySchedules:m,upcomingSchedules:y}=d(f),j=m.length+y.length,p=f===l;return a.jsxs("div",{className:`card p-3 sm:p-4 md:p-5 lg:p-4 ${p?"ring-1 md:ring-2 ring-gray-400":""}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-bold text-lg md:text-lg text-gray-900",children:f}),p&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100/50 text-gray-900 rounded font-medium",children:""})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[p&&a.jsx("button",{onClick:()=>o(!0),className:"p-1.5 hover:bg-gray-100 rounded-full transition-colors",title:" ",children:a.jsx(aa,{className:"h-4 w-4 text-gray-700"})}),a.jsxs("span",{className:`text-xs px-2.5 py-1 ${p&&m.length>0?"bg-amber-100 text-gray-900":"bg-gray-100 text-gray-900"} rounded-full font-semibold whitespace-nowrap`,children:[m.length," "]}),a.jsxs("span",{className:"text-xs px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full font-semibold whitespace-nowrap",children:[y.length," "]})]})]}),m.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[a.jsx(ms,{className:"h-4 w-4 text-gray-900"}),a.jsx("p",{className:"text-xs font-semibold text-gray-900 uppercase",children:""})]}),a.jsx("div",{className:"space-y-2",children:(()=>{const k=m.reduce((h,v)=>{const S=v.project||"-";return h[S]||(h[S]=[]),h[S].push(v),h},{});return Object.entries(k).map(([h,v])=>{const S=f===l;return a.jsxs("div",{className:`border-l-3 ${S?"border-gray-400":"border-gray-900"} ${S?"bg-amber-50":"bg-gray-50"} rounded-r overflow-hidden`,children:[a.jsx("div",{className:`px-3 py-1.5 ${S?"bg-amber-100":"bg-gray-100"} border-b ${S?"border-amber-200":"border-gray-200"}`,children:a.jsx("span",{className:"text-xs font-semibold text-gray-900",children:h})}),a.jsx("div",{className:"px-3 py-2 space-y-1",children:v.map(x=>{const T=x.time&&x.time!=="-"?` - ${c(x.time)}`:"";return a.jsxs("p",{className:"font-medium text-gray-900 text-sm leading-relaxed",children:[" ",x.title,T]},x.id)})})]},h)})})()})]}),y.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[a.jsx(lk,{className:"h-4 w-4 text-gray-600"}),a.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:""})]}),a.jsx("div",{className:"space-y-2",children:(()=>{const k=y.reduce((h,v)=>{const S=Se(new Date(v.start),"MM.dd",{locale:it}),x=v.project||"-",T=`${S}|${x}`;return h[T]||(h[T]={date:S,project:x,schedules:[]}),h[T].schedules.push(v),h},{});return Object.values(k).map(({date:h,project:v,schedules:S})=>{const T=S.length>0&&$I(new Date(S[0].start))?`${h} ()`:h;return a.jsxs("div",{className:"border-l-3 border-gray-400 bg-gray-50 rounded-r overflow-hidden",children:[a.jsxs("div",{className:"px-3 py-1.5 bg-gray-100 border-b border-gray-200 flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:v}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:T})]}),a.jsx("div",{className:"px-3 py-2 space-y-1",children:S.map(E=>{const _=E.time&&E.time!=="-"?` - ${c(E.time)}`:"";return a.jsxs("p",{className:"font-medium text-gray-900 text-sm leading-relaxed",children:[" ",E.title,_]},E.id)})})]},`${h}-${v}`)})})()})]}),j===0&&a.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"  "})]},f)})})}),i&&a.jsx(Ok,{event:null,slotInfo:{start:new Date,end:new Date},onClose:()=>o(!1),onSave:async f=>{try{console.log("Dashboard: Adding schedule...",f),await r({id:Date.now().toString(),title:f.title||"",start:f.start||new Date,end:f.end||new Date,type:"other",project:f.projectId||f.projectName||"",location:"",attendees:f.assignedTo||[],description:f.description||"",time:f.time}),console.log("Dashboard: Schedule added successfully"),await t(),console.log("Dashboard: Schedules fetched, closing modal"),o(!1)}catch(m){console.error("Failed to add schedule:",m),alert("  : "+(m instanceof Error?m.message:"   "))}},onDelete:async f=>{try{await n(f),await t(),o(!1)}catch(m){console.error("Failed to delete schedule:",m),alert("  : "+(m instanceof Error?m.message:"   "))}}})]})},Tn=()=>{const{user:e}=Ar(),{projects:t}=Ts();return b.useMemo(()=>{if(console.log("[useFilteredProjects] Current user:",e),console.log("[useFilteredProjects] User name:",e==null?void 0:e.name),console.log("[useFilteredProjects] Total projects:",t.length),!e)return console.log("[useFilteredProjects] No user, returning empty array"),[];if(e.name===""){console.log("[useFilteredProjects]  user detected, applying filter");const n=t.filter(s=>{const i=s.manager?s.manager.split(",").map(c=>c.trim()):[],o=i.includes(""),l=s.team&&Array.isArray(s.team)&&s.team.includes("");return console.log(`[useFilteredProjects] Project: ${s.name}`),console.log(`  - Manager: ${s.manager}`),console.log(`  - Managers array: ${JSON.stringify(i)}`),console.log(`  - Team: ${JSON.stringify(s.team)}`),console.log(`  - Is Manager: ${o}`),console.log(`  - Is Team Member: ${l}`),console.log(`  - Include: ${o||l}`),o||l});return console.log("[useFilteredProjects] Filtered projects count:",n.length),n}return console.log("[useFilteredProjects] Other user, returning all projects"),t},[e,t])},B5=({value:e,detailValue:t="",onChange:r,onDetailChange:n,placeholder:s=" ",error:i})=>{const[o,l]=b.useState(!1),[c,u]=b.useState(e),[d,f]=b.useState(t),m=b.useRef(null);b.useEffect(()=>{const h=v=>{m.current&&!m.current.contains(v.target)&&l(!1)};return o&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[o]),b.useEffect(()=>{u(e)},[e]),b.useEffect(()=>{f(t)},[t]);const y=()=>new Promise((h,v)=>{if(window.daum&&window.daum.Postcode){h(!0);return}const S=document.createElement("script");S.src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",S.async=!0,S.onload=()=>h(!0),S.onerror=()=>v(new Error("Kakao Postcode   ")),document.head.appendChild(S)}),j=h=>{const v=h.roadAddr||h.jibunAddr;u(v),r(v,d),l(!1)},p=h=>{const v=h.target.value;f(v),n&&n(v),c&&r(c,v)},k=async()=>{try{(!window.daum||!window.daum.Postcode)&&await y(),window.daum&&new window.daum.Postcode({oncomplete:function(h){const v={roadAddr:h.roadAddress,jibunAddr:h.jibunAddress||h.autoJibunAddress||"",zipNo:h.zonecode,bdNm:h.buildingName,siNm:h.sido,sggNm:h.sigungu,emdNm:h.bname,rn:h.roadname};j(v)}}).open()}catch(h){console.error("  :",h),alert("     .  .")}};return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:c,onClick:()=>k(),onChange:h=>{u(h.target.value),r(h.target.value,d)},placeholder:s,className:`input pr-8 cursor-pointer ${i?"border-red-500":""}`,readOnly:!0}),a.jsx(Mf,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),a.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors",children:" "})]}),i&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i})]}),a.jsx("div",{children:a.jsx("input",{type:"text",value:d,onChange:p,placeholder:" (/ )",className:"input",disabled:!c})}),c&&a.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:" :"})," ",c,d&&`, ${d}`]})}),a.jsx("div",{id:"address-search-container",style:{display:"none",width:"100%",height:"400px"}})]})},Dw=["","","","","","",""],W5=({project:e,onClose:t,onSave:r})=>{const{register:n,handleSubmit:s,setValue:i,reset:o,formState:{errors:l}}=yu({defaultValues:{name:"",client:"",location:"",detailLocation:"",startDate:"",endDate:""}}),[c,u]=b.useState([]),[d,f]=b.useState(""),[m,y]=b.useState(""),[j,p]=b.useState("");b.useEffect(()=>{var x;if(e){const T=e.location?e.location.split(","):["",""],E=((x=T[0])==null?void 0:x.trim())||e.location||"",_=T.length>1?T.slice(1).join(",").trim():"";o({name:e.name,client:e.client||"",location:E,detailLocation:_,startDate:e.startDate?new Date(e.startDate).toISOString().split("T")[0]:"",endDate:e.endDate?new Date(e.endDate).toISOString().split("T")[0]:""}),y(E),p(_);const M=e.manager?e.manager.split(",").map(O=>O.trim()).filter(O=>O&&O!==""):[];u(M)}else o({name:"",client:"",location:"",detailLocation:"",startDate:"",endDate:""}),y(""),p(""),u([])},[e,o]);const k=x=>{u(T=>T.includes(x)?T.filter(E=>E!==x):[...T,x])},h=()=>{d.trim()&&!c.includes(d.trim())&&(u(x=>[...x,d.trim()]),f(""))},v=x=>{u(T=>T.filter(E=>E!==x))},S=x=>{console.log(" ProjectModal onSubmit - Raw form data:",x);const T=m&&j?`${m}, ${j}`:m||x.location,E={name:x.name,client:x.client,location:T,manager:c.join(", "),contractAmount:(e==null?void 0:e.contractAmount)??0,spent:(e==null?void 0:e.spent)??0,status:(e==null?void 0:e.status)??"planning",progress:(e==null?void 0:e.progress)??0,description:(e==null?void 0:e.description)??"",meetingNotes:(e==null?void 0:e.meetingNotes)??[],customerRequests:(e==null?void 0:e.customerRequests)??[],entrancePassword:(e==null?void 0:e.entrancePassword)??"",sitePassword:(e==null?void 0:e.sitePassword)??""};if(x.startDate&&x.startDate!=="")E.startDate=x.startDate,console.log(" Setting startDate from form:",x.startDate);else if(e!=null&&e.startDate){const _=typeof e.startDate=="string"&&e.startDate.includes("T")?e.startDate.split("T")[0]:e.startDate;E.startDate=_,console.log(" Keeping existing startDate:",E.startDate)}if(x.endDate&&x.endDate!=="")E.endDate=x.endDate,console.log(" Setting endDate from form:",x.endDate);else if(e!=null&&e.endDate){const _=typeof e.endDate=="string"&&e.endDate.includes("T")?e.endDate.split("T")[0]:e.endDate;E.endDate=_,console.log(" Keeping existing endDate:",E.endDate)}console.log(" ProjectModal onSubmit - Final formData:",E),r(E)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-3 md:p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b sticky top-0 bg-white z-10",children:[a.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:e?" ":" "}),a.jsx("button",{onClick:t,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(et,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:s(S),className:"p-4 md:p-6 space-y-4 md:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{...n("name",{required:" "}),type:"text",className:"input"}),l.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(l.name.message)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("input",{...n("client"),type:"text",className:"input"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx(B5,{value:m,detailValue:j,onChange:(x,T)=>{y(x),p(T||""),i("location",x),i("detailLocation",T||"")},onDetailChange:x=>{p(x),i("detailLocation",x)},placeholder:"  ",required:!0,error:l.location?String(l.location.message):void 0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("input",{...n("startDate"),type:"date",className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("input",{...n("endDate"),type:"date",className:"input"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (  )"}),a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[Dw.map(x=>a.jsx("button",{type:"button",onClick:()=>k(x),className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${c.includes(x)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:x},x)),c.filter(x=>!Dw.includes(x)).map(x=>a.jsxs("button",{type:"button",onClick:()=>v(x),className:"px-2.5 py-1.5 rounded border transition-colors text-sm bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[x," "]},x))]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:d,onChange:x=>f(x.target.value),onKeyPress:x=>{x.key==="Enter"&&(x.preventDefault(),h())},placeholder:"   ",className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("button",{type:"button",onClick:h,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:""})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 md:space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"btn btn-outline text-sm md:text-base",children:""}),a.jsx("button",{type:"submit",className:"btn btn-primary text-sm md:text-base",children:e?"":""})]})]})]})})},H5=({projectName:e,meetingNotes:t,onClose:r,onSave:n,onDelete:s})=>{const[i,o]=b.useState(""),[l,c]=b.useState(new Date().toISOString().split("T")[0]),[u,d]=b.useState(!1),f=()=>{d(!0),o(""),c(new Date().toISOString().split("T")[0])},m=()=>{if(!i.trim()){alert(" ");return}if(!l){alert(" ");return}n(i.trim(),new Date(l)),o(""),c(new Date().toISOString().split("T")[0]),d(!1)},y=()=>{o(""),c(new Date().toISOString().split("T")[0]),d(!1)},j=p=>{window.confirm("   ?")&&s(p)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:r,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col shadow-xl",onClick:p=>p.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:" "}),a.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:e})]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(et,{className:"h-5 w-5 text-gray-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!u&&a.jsx("button",{onClick:f,className:"w-full mb-4 px-4 py-2.5 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"+ "}),u&&a.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded border border-gray-200",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{type:"date",value:l,onChange:p=>c(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),a.jsx("textarea",{value:i,onChange:p=>o(p.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900 resize-none",rows:4})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:m,className:"px-4 py-1.5 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors",children:""}),a.jsx("button",{onClick:y,className:"px-4 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors",children:""})]})]}),a.jsx("div",{className:"space-y-3",children:t.length===0?a.jsx("div",{className:"text-center py-12 text-gray-400 text-sm",children:"   "}):t.map(p=>a.jsx("div",{className:"p-4 bg-white border border-gray-200 rounded hover:border-gray-300 transition-colors group",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Se(new Date(p.date),"yyyy.MM.dd (eee)",{locale:it})}),a.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:p.content})]}),a.jsx("button",{onClick:()=>j(p.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""})]})},p.id))})]})]})})},U5=({projectName:e,customerRequests:t,onClose:r,onSave:n,onToggleComplete:s,onDelete:i})=>{const[o,l]=b.useState(""),[c,u]=b.useState(new Date().toISOString().split("T")[0]),[d,f]=b.useState(!1),m=()=>{f(!0),l(""),u(new Date().toISOString().split("T")[0])},y=()=>{if(!o.trim()){alert(" ");return}if(!c){alert(" ");return}n(o.trim(),new Date(c)),l(""),u(new Date().toISOString().split("T")[0]),f(!1)},j=()=>{l(""),u(new Date().toISOString().split("T")[0]),f(!1)},p=S=>{window.confirm("  ?")&&i(S)},k=S=>{s(S)},h=t.filter(S=>!S.completed),v=t.filter(S=>S.completed);return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:r,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col shadow-xl",onClick:S=>S.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:" "}),a.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:e})]}),a.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(et,{className:"h-5 w-5 text-gray-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!d&&a.jsx("button",{onClick:m,className:"w-full mb-4 px-4 py-2.5 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"+ "}),d&&a.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded border border-gray-200",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{type:"date",value:c,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),a.jsx("textarea",{value:o,onChange:S=>l(S.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900 resize-none",rows:3})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:y,className:"px-4 py-1.5 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors",children:""}),a.jsx("button",{onClick:j,className:"px-4 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors",children:""})]})]}),a.jsx("div",{className:"space-y-2",children:t.length===0?a.jsx("div",{className:"text-center py-12 text-gray-400 text-sm",children:"  "}):a.jsxs(a.Fragment,{children:[h.map(S=>a.jsx("div",{className:"p-3 bg-white border border-gray-300 rounded hover:border-gray-400 transition-colors group",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:()=>k(S.id),className:"mt-0.5 flex-shrink-0",children:a.jsx(k4,{className:"h-4 w-4 text-gray-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap break-words",children:S.content}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Se(new Date(S.createdAt),"yyyy.MM.dd",{locale:it})})]}),a.jsx("button",{onClick:()=>p(S.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""})]})},S.id)),v.map(S=>a.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded hover:border-gray-300 transition-colors group",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:()=>k(S.id),className:"mt-0.5 flex-shrink-0",children:a.jsx(S4,{className:"h-4 w-4 text-gray-900"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-gray-500 line-through whitespace-pre-wrap break-words",children:S.content}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Se(new Date(S.createdAt),"yyyy.MM.dd",{locale:it})})]}),a.jsx("button",{onClick:()=>p(S.id),className:"opacity-0 group-hover:opacity-100 px-2 py-1 text-xs text-gray-500 hover:text-red-600 transition-all",children:""})]})},S.id))]})})]})]})})},z5=({projectName:e,entrancePassword:t,sitePassword:r,onClose:n,onSave:s})=>{const[i,o]=b.useState(t||""),[l,c]=b.useState(r||""),[u,d]=b.useState(!1),f=()=>{d(!0)},m=()=>{s(i,l),d(!1)},y=()=>{o(t||""),c(r||""),d(!1)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:n,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl",onClick:j=>j.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:""}),a.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:e})]}),a.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(et,{className:"h-5 w-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),u?a.jsx("input",{type:"text",value:i,onChange:j=>o(j.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"}):a.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded",children:i?a.jsx("span",{className:"text-sm font-mono text-gray-900",children:i}):a.jsx("span",{className:"text-sm text-gray-400",children:""})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),u?a.jsx("input",{type:"text",value:l,onChange:j=>c(j.target.value),placeholder:"  ",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-gray-900"}):a.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded",children:l?a.jsx("span",{className:"text-sm font-mono text-gray-900",children:l}):a.jsx("span",{className:"text-sm text-gray-400",children:""})})]})]}),a.jsx("div",{className:"border-t border-gray-200 px-6 py-4 flex gap-2",children:u?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:m,className:"flex-1 px-4 py-2 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors",children:""}),a.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:f,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors",children:""}),a.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 bg-gray-900 text-white text-sm rounded hover:bg-gray-800 transition-colors",children:""})]})})]})})},V5=()=>{const{loadProjectsFromAPI:e,addProjectToAPI:t,updateProjectInAPI:r,deleteProjectFromAPI:n}=Ts(),{user:s}=Ar(),i=Tn(),[o,l]=b.useState("in-progress"),[c,u]=b.useState("grid"),[d,f]=b.useState(!1),[m,y]=b.useState(null),[j,p]=b.useState(!1),[k,h]=b.useState(!1),[v,S]=b.useState(!1),[x,T]=b.useState(null),E=(ee,me)=>`lastViewed_${s==null?void 0:s.id}_${ee}_${me}`,_=(ee,me)=>{const I=E(ee,me),se=localStorage.getItem(I);return se?parseInt(se,10):0},M=(ee,me)=>{const I=E(ee,me);localStorage.setItem(I,Date.now().toString())},O=(ee,me)=>{const I=_(ee.id,me);return me==="meeting"?(ee.meetingNotes||[]).some(ae=>(ae.createdAt?new Date(ae.createdAt).getTime():new Date(ae.date).getTime())>I):(ee.customerRequests||[]).some(ae=>!ae.completed)};b.useEffect(()=>{e().catch(ee=>{console.error("Failed to load projects:",ee),H.error("   ")})},[e]),b.useEffect(()=>{const ee=()=>{y(null),f(!0)};return window.addEventListener("headerAddButtonClick",ee),()=>window.removeEventListener("headerAddButtonClick",ee)},[]);const R=(ee,me)=>{if(!ee||!me)return 0;const I=new Date,se=new Date(ee),ae=new Date(me);if(I<se)return 0;if(I>ae)return 100;const X=Math.ceil((ae.getTime()-se.getTime())/(1e3*60*60*24)),we=Math.ceil((I.getTime()-se.getTime())/(1e3*60*60*24)),Ee=Math.round(we/X*100);return Math.min(100,Math.max(0,Ee))},K=ee=>{y(ee),f(!0)},Q=async(ee,me)=>{if(window.confirm(`"${me}"  ?

    .`))try{await n(ee),H.success(" ")}catch(I){console.error("Failed to delete project:",I),H.error("  ")}},ne=async ee=>{try{if(m)await r(m.id,ee),H.success(" ");else{const me={id:"",...ee,team:ee.team||[]};await t(me),H.success(" "),l(ee.status||"planning")}f(!1),y(null)}catch(me){console.error("Failed to save project:",me),H.error("  ")}},Z=async(ee,me)=>{try{await r(ee,{status:me}),H.success(" ")}catch(I){console.error("Failed to update project status:",I),H.error("  ")}},fe=ee=>{T(ee),p(!0),M(ee.id,"meeting")},te=ee=>{T(ee),h(!0),M(ee.id,"request")},xe=ee=>{T(ee),S(!0)},ie=async(ee,me)=>{if(!x)return;const I=x.entrancePassword,se=x.sitePassword;T({...x,entrancePassword:ee,sitePassword:me});try{await r(x.id,{entrancePassword:ee,sitePassword:me}),H.success(" ")}catch(ae){console.error("Failed to save passwords:",ae),H.error("  "),T({...x,entrancePassword:I,sitePassword:se})}},V=async(ee,me)=>{if(!x)return;const I={id:Date.now().toString(),content:ee,date:me,createdAt:new Date},se=[...x.meetingNotes||[],I];T({...x,meetingNotes:se});try{await r(x.id,{meetingNotes:se}),H.success("  ")}catch(ae){console.error("Failed to save meeting note:",ae),H.error("   "),T({...x,meetingNotes:x.meetingNotes||[]})}},ge=async(ee,me)=>{if(!x)return;const I={id:Date.now().toString(),content:ee,completed:!1,createdAt:me},se=[...x.customerRequests||[],I];T({...x,customerRequests:se});try{await r(x.id,{customerRequests:se}),H.success("  ")}catch(ae){console.error("Failed to save customer request:",ae),H.error("   "),T({...x,customerRequests:x.customerRequests||[]})}},G=async ee=>{if(!x)return;const me=x.customerRequests||[],I=me.map(se=>se.id===ee?{...se,completed:!se.completed}:se);T({...x,customerRequests:I});try{await r(x.id,{customerRequests:I}),H.success("  ")}catch(se){console.error("Failed to toggle request:",se),H.error("  "),T({...x,customerRequests:me})}},U=async ee=>{if(!x)return;const me=x.meetingNotes||[],I=me.filter(se=>se.id!==ee);T({...x,meetingNotes:I});try{await r(x.id,{meetingNotes:I}),H.success("  ")}catch(se){console.error("Failed to delete meeting note:",se),H.error(" "),T({...x,meetingNotes:me})}},L=async ee=>{if(!x)return;const me=x.customerRequests||[],I=me.filter(se=>se.id!==ee);T({...x,customerRequests:I});try{await r(x.id,{customerRequests:I}),H.success("  ")}catch(se){console.error("Failed to delete customer request:",se),H.error(" "),T({...x,customerRequests:me})}},Y=({project:ee})=>{const I={planning:{label:"",color:"bg-white text-gray-700 border-gray-300"},"in-progress":{label:"",color:"bg-white text-gray-900 border-gray-300"},completed:{label:"",color:"bg-gray-900 text-white border-gray-900"},"on-hold":{label:"",color:"bg-white text-gray-600 border-gray-300"}}[ee.status];return a.jsxs("select",{value:ee.status,onChange:se=>Z(ee.id,se.target.value),className:Fr("px-2 py-1 text-xs font-medium border rounded cursor-pointer","focus:outline-none focus:ring-2 focus:ring-gray-500",I.color),onClick:se=>se.stopPropagation(),children:[a.jsx("option",{value:"planning",children:""}),a.jsx("option",{value:"in-progress",children:""}),a.jsx("option",{value:"completed",children:""}),a.jsx("option",{value:"on-hold",children:""})]})},ye=(()=>{let ee=i;return o!=="all"&&(ee=ee.filter(me=>me.status===o)),ee})(),Ne={planning:i.filter(ee=>ee.status==="planning").length,inProgress:i.filter(ee=>ee.status==="in-progress").length,completed:i.filter(ee=>ee.status==="completed").length,onHold:i.filter(ee=>ee.status==="on-hold").length},Re=({project:ee})=>{var I,se,ae,X;const me=R(ee.startDate,ee.endDate);return a.jsxs("div",{className:"card p-3 md:p-4 hover:border-gray-400 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3 md:mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-base md:text-lg text-gray-900",children:ee.name}),a.jsxs("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:[ee.client,""]})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx(Y,{project:ee}),a.jsx("button",{onClick:()=>K(ee),className:"text-xs text-gray-600 hover:text-gray-900 mt-2",children:""})]})]}),a.jsxs("div",{className:"space-y-1.5 md:space-y-2 mb-3 md:mb-4 text-xs md:text-sm",children:[a.jsxs("div",{className:"text-gray-600",children:[": ",ee.location]}),a.jsxs("div",{className:"text-gray-600",children:[": ",ee.startDate&&ee.endDate?`${Se(ee.startDate,"MM.dd (eee)",{locale:it})} - ${Se(ee.endDate,"MM.dd (eee)",{locale:it})}`:""]}),a.jsxs("div",{className:"text-gray-600",children:[": ",ee.manager]})]}),a.jsxs("div",{className:"mb-3 md:mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5 md:mb-2",children:[a.jsx("span",{className:"text-[10px] md:text-xs text-gray-600",children:" ( )"}),a.jsxs("span",{className:"text-xs md:text-sm font-medium text-gray-900",children:[me,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 h-1",children:a.jsx("div",{className:"bg-gray-900 h-1 transition-all",style:{width:`${me}%`}})})]}),a.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("button",{onClick:()=>fe(ee),className:"relative px-2 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["",(((I=ee.meetingNotes)==null?void 0:I.length)||0)>0&&a.jsxs("span",{className:"ml-1 text-[10px] text-gray-500",children:["(",((se=ee.meetingNotes)==null?void 0:se.length)||0,")"]}),O(ee,"meeting")&&a.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full",children:"N"})]}),a.jsxs("button",{onClick:()=>te(ee),className:"relative px-2 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["",(((ae=ee.customerRequests)==null?void 0:ae.length)||0)>0&&a.jsxs("span",{className:"ml-1 text-[10px] text-gray-500",children:["(",((X=ee.customerRequests)==null?void 0:X.length)||0,")"]}),O(ee,"request")&&a.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full",children:"N"})]}),a.jsx("button",{onClick:()=>xe(ee),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:""})]}),((s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="manager")&&a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>Q(ee.id,ee.name),className:"text-xs text-rose-600 hover:text-rose-700",children:""})})]})]})};return a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("nav",{className:"flex space-x-4 md:space-x-8 overflow-x-auto",children:[{id:"planning",label:"",count:Ne.planning,color:"text-gray-700"},{id:"in-progress",label:"",count:Ne.inProgress,color:"text-gray-700"},{id:"completed",label:"",count:Ne.completed,color:"text-gray-700"},{id:"all",label:"",count:i.length,color:"text-gray-600"}].map(ee=>a.jsxs("button",{onClick:()=>l(ee.id),className:Fr("py-3 md:py-4 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap",o===ee.id?`border-gray-700 ${ee.color}`:"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),children:[ee.label,a.jsx("span",{className:Fr("ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold",o===ee.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"),children:ee.count})]},ee.id))}),a.jsxs("div",{className:"flex items-center gap-6 mb-3 md:mb-4",children:[a.jsxs("div",{className:"hidden sm:flex border border-gray-300 overflow-hidden rounded",children:[a.jsx("button",{onClick:()=>u("grid"),className:Fr("px-3 md:px-4 py-2 text-xs md:text-sm",c==="grid"?"bg-gray-100":"hover:bg-gray-50"),children:""}),a.jsx("button",{onClick:()=>u("list"),className:Fr("px-3 md:px-4 py-2 text-xs md:text-sm border-l border-gray-300",c==="list"?"bg-gray-100":"hover:bg-gray-50"),children:""})]}),a.jsxs("button",{onClick:()=>{y(null),f(!0)},className:"hidden lg:inline-flex btn btn-primary portrait:px-2 landscape:px-4 py-2 items-center gap-1",children:[a.jsx(aa,{className:"h-4 w-4"}),a.jsx("span",{className:"portrait:hidden landscape:inline",children:" "})]})]})]})}),c==="grid"||window.innerWidth<768?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 ipad:grid-cols-2 ipad-lg:grid-cols-2 ipad-xl:grid-cols-3 ipad-2xl:grid-cols-3 2xl:grid-cols-4 gap-3 md:gap-6",children:ye.map(ee=>a.jsx(Re,{project:ee},ee.id))}):a.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ye.map(ee=>{var I,se,ae,X;const me=R(ee.startDate,ee.endDate);return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:ee.name}),a.jsx("p",{className:"text-sm text-gray-500",children:ee.location})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("p",{className:"text-sm",children:[ee.client,""]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ee.startDate&&ee.endDate?a.jsxs(a.Fragment,{children:[Se(ee.startDate,"yyyy.MM.dd (eee)",{locale:it})," -",a.jsx("br",{}),Se(ee.endDate,"yyyy.MM.dd (eee)",{locale:it})]}):""}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Y,{project:ee})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-24 bg-gray-200 h-1 mr-2",children:a.jsx("div",{className:"bg-gray-900 h-1",style:{width:`${me}%`}})}),a.jsxs("span",{className:"text-sm",children:[me,"%"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>fe(ee),className:"relative px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["",(((I=ee.meetingNotes)==null?void 0:I.length)||0)>0&&a.jsxs("span",{className:"ml-1 text-[10px] text-gray-500",children:["(",((se=ee.meetingNotes)==null?void 0:se.length)||0,")"]}),O(ee,"meeting")&&a.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full",children:"N"})]}),a.jsxs("button",{onClick:()=>te(ee),className:"relative px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:["",(((ae=ee.customerRequests)==null?void 0:ae.length)||0)>0&&a.jsxs("span",{className:"ml-1 text-[10px] text-gray-500",children:["(",((X=ee.customerRequests)==null?void 0:X.length)||0,")"]}),O(ee,"request")&&a.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full",children:"N"})]}),a.jsx("button",{onClick:()=>xe(ee),className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:""})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>K(ee),className:"text-xs text-gray-600 hover:text-gray-900",children:""}),((s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="manager")&&a.jsx("button",{onClick:()=>Q(ee.id,ee.name),className:"text-xs text-rose-600 hover:text-rose-700",children:""})]})]})})]},ee.id)})})]})}),d&&a.jsx(W5,{project:m,onClose:()=>{f(!1),y(null)},onSave:ne}),j&&x&&a.jsx(H5,{projectName:x.name,meetingNotes:x.meetingNotes||[],onClose:()=>{p(!1),T(null)},onSave:V,onDelete:U}),k&&x&&a.jsx(U5,{projectName:x.name,customerRequests:x.customerRequests||[],onClose:()=>{h(!1),T(null)},onSave:ge,onToggleComplete:G,onDelete:L}),v&&x&&a.jsx(z5,{projectName:x.name,entrancePassword:x.entrancePassword||"",sitePassword:x.sitePassword||"",onClose:()=>{S(!1),T(null)},onSave:ie})]})};function Cw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(r),!0).forEach(function(n){ci(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fm(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ds(e,t){if(e==null)return{};var r,n,s=Fm(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Pr(e,t,r){return t=Lf(t),II(e,Dk()?Reflect.construct(t,r||[],Lf(e).constructor):t.apply(e,r))}function Ik(e){if(Array.isArray(e))return e}function Y5(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Lk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wn(e,t){return Ik(e)||Y5(e,t)||Lx(e,t)||Lk()}function $k(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=$k(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function zt(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=$k(e))&&(n&&(n+=" "),n+=t);return n}function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ut.apply(null,arguments)}var q5=function(e,t,r,n,s,i,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,s,i,o,l],d=0;c=new Error(t.replace(/%s/g,function(){return u[d++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},K5=q5;const Mc=Wr(K5);var G5=function(){};function Q5(e,t){var r={};return Object.keys(e).forEach(function(n){r[qd(n)]=G5}),r}function Ew(e,t){return e[t]!==void 0}function qd(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function X5(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function J5(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,If(e,t)}function Fk(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function Bk(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function Wk(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}Fk.__suppressDeprecationWarning=!0;Bk.__suppressDeprecationWarning=!0;Wk.__suppressDeprecationWarning=!0;function Z5(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,s=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?s="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),r!==null||n!==null||s!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=Fk,t.componentWillReceiveProps=Bk),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Wk;var l=t.componentDidUpdate;t.componentDidUpdate=function(u,d,f){var m=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;l.call(this,u,d,m)}}return e}var eL="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function Hk(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",s=X5(e),i=Object.keys(t),o=i.map(qd);s||!r.length||Mc(!1);var l=function(u){J5(d,u);function d(){for(var m,y=arguments.length,j=new Array(y),p=0;p<y;p++)j[p]=arguments[p];m=u.call.apply(u,[this].concat(j))||this,m.handlers=Object.create(null),i.forEach(function(h){var v=t[h],S=function(T){if(m.props[v]){var E;m._notifying=!0;for(var _=arguments.length,M=new Array(_>1?_-1:0),O=1;O<_;O++)M[O-1]=arguments[O];(E=m.props)[v].apply(E,[T].concat(M)),m._notifying=!1}m.unmounted||m.setState(function(R){var K,Q=R.values;return{values:Ut(Object.create(null),Q,(K={},K[h]=T,K))}})};m.handlers[v]=S}),r.length&&(m.attachRef=function(h){m.inner=h});var k=Object.create(null);return i.forEach(function(h){k[h]=m.props[qd(h)]}),m.state={values:k,prevProps:{}},m}var f=d.prototype;return f.shouldComponentUpdate=function(){return!this._notifying},d.getDerivedStateFromProps=function(y,j){var p=j.values,k=j.prevProps,h={values:Ut(Object.create(null),p),prevProps:{}};return i.forEach(function(v){h.prevProps[v]=y[v],!Ew(y,v)&&Ew(k,v)&&(h.values[v]=y[qd(v)])}),h},f.componentWillUnmount=function(){this.unmounted=!0},f.render=function(){var y=this,j=this.props,p=j.innerRef,k=Fm(j,["innerRef"]);o.forEach(function(v){delete k[v]});var h={};return i.forEach(function(v){var S=y.props[v];h[v]=S!==void 0?S:y.state.values[v]}),z.createElement(e,Ut({},k,h,this.handlers,{ref:p||this.attachRef}))},d}(z.Component);Z5(l),l.displayName="Uncontrolled("+n+")",l.propTypes=Ut({innerRef:function(){}},Q5(t)),r.forEach(function(u){l.prototype[u]=function(){var f;return(f=this.inner)[u].apply(f,arguments)}});var c=l;return z.forwardRef&&(c=z.forwardRef(function(u,d){return z.createElement(l,Ut({},u,{innerRef:d,__source:{fileName:eL,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(u,d,f){return d===void 0&&(d={}),Hk(u,Ut({},t,d),f)},c}var Uk={exports:{}},tL="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rL=tL,nL=rL;function zk(){}function Vk(){}Vk.resetWarningCache=zk;var sL=function(){function e(n,s,i,o,l,c){if(c!==nL){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Vk,resetWarningCache:zk};return r.PropTypes=r,r};Uk.exports=sL();var aL=Uk.exports;const Pe=Wr(aL);var Bf="milliseconds",Rc="seconds",Oc="minutes",Ic="hours",Oi="day",Uo="week",Lc="month",Ii="year",Li="decade",$i="century",Yk={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},iL={month:1,year:12,decade:10*12,century:100*12};function oL(e){return[31,lL(e),31,30,31,30,31,31,30,31,30,31]}function lL(e){return e%4===0&&e%100!==0||e%400===0?29:28}function Qn(e,t,r){switch(e=new Date(e),r){case Bf:case Rc:case Oc:case Ic:case Oi:case Uo:return cL(e,t*Yk[r]);case Lc:case Ii:case Li:case $i:return uL(e,t*iL[r])}throw new TypeError('Invalid units: "'+r+'"')}function cL(e,t){var r=new Date(+e+t);return dL(e,r)}function uL(e,t){var r=e.getFullYear(),n=e.getMonth(),s=e.getDate(),i=r*12+n+t,o=Math.trunc(i/12),l=i%12,c=Math.min(s,oL(o)[l]),u=new Date(e);return u.setFullYear(o),u.setDate(1),u.setMonth(l),u.setDate(c),u}function dL(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset(),s=n-r;return new Date(+t+s*Yk.minutes)}function $c(e,t,r){return Qn(e,-t,r)}function br(e,t,r){switch(e=new Date(e),t){case $i:case Li:case Ii:e=Hf(e,0);case Lc:e=Xk(e,1);case Uo:case Oi:e=Wc(e,0);case Ic:e=zo(e,0);case Oc:e=Bc(e,0);case Rc:e=Fc(e,0)}return t===Li&&(e=$c(e,Fi(e)%10,"year")),t===$i&&(e=$c(e,Fi(e)%100,"year")),t===Uo&&(e=Jk(e,0,r)),e}function Wf(e,t,r){switch(e=new Date(e),e=br(e,t,r),t){case $i:case Li:case Ii:case Lc:case Uo:e=Qn(e,1,t),e=$c(e,1,Oi),e.setHours(23,59,59,999);break;case Oi:e.setHours(23,59,59,999);break;case Ic:case Oc:case Rc:e=Qn(e,1,t),e=$c(e,1,Bf)}return e}var xu=il(function(e,t){return e===t}),Ux=il(function(e,t){return e!==t}),Bm=il(function(e,t){return e>t}),vu=il(function(e,t){return e>=t}),zx=il(function(e,t){return e<t}),al=il(function(e,t){return e<=t});function qk(){return new Date(Math.min.apply(Math,arguments))}function Kk(){return new Date(Math.max.apply(Math,arguments))}function Gk(e,t,r,n){return n=n||"day",(!t||vu(e,t,n))&&(!r||al(e,r,n))}var Fc=ti("Milliseconds"),Bc=ti("Seconds"),zo=ti("Minutes"),Wc=ti("Hours"),Qk=ti("Day"),Xk=ti("Date"),Hf=ti("Month"),Fi=ti("FullYear");function fL(e,t){return t===void 0?Fi(br(e,Li)):Qn(e,t+10,Ii)}function mL(e,t){return t===void 0?Fi(br(e,$i)):Qn(e,t+100,Ii)}function Jk(e,t,r){var n=(Qk(e)+7-(r||0))%7;return t===void 0?n:Qn(e,t-n,Oi)}function hL(e,t,r,n){var s,i,o;switch(r){case Bf:case Rc:case Oc:case Ic:case Oi:case Uo:s=t.getTime()-e.getTime();break;case Lc:case Ii:case Li:case $i:s=(Fi(t)-Fi(e))*12+Hf(t)-Hf(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case Bf:i=1;break;case Rc:i=1e3;break;case Oc:i=1e3*60;break;case Ic:i=1e3*60*60;break;case Oi:i=1e3*60*60*24;break;case Uo:i=1e3*60*60*24*7;break;case Lc:i=1;break;case Ii:i=12;break;case Li:i=120;break;case $i:i=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=s/i,n?o:Math.round(o)}function ti(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(n===void 0)return r["get"+e]();var s=new Date(r);return s["set"+e](n),t&&s["get"+e]()!=n&&(e==="Hours"||n>=t&&s.getHours()-r.getHours()<Math.floor(n/t))&&s["set"+e](n+t),s}}function il(e){return function(t,r,n){return e(+br(t,n),+br(r,n))}}const Tw=Object.freeze(Object.defineProperty({__proto__:null,add:Qn,century:mL,date:Xk,day:Qk,decade:fL,diff:hL,endOf:Wf,eq:xu,gt:Bm,gte:vu,hours:Wc,inRange:Gk,lt:zx,lte:al,max:Kk,milliseconds:Fc,min:qk,minutes:zo,month:Hf,neq:Ux,seconds:Bc,startOf:br,subtract:$c,weekday:Jk,year:Fi},Symbol.toStringTag,{value:"Module"}));function pL(e){if(Array.isArray(e))return qg(e)}function Zk(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kd(e){return pL(e)||Zk(e)||Lx(e)||gL()}function yL(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}var eD=yL;function xL(e,t){return e===t||e!==e&&t!==t}var bu=xL,vL=typeof Nn=="object"&&Nn&&Nn.Object===Object&&Nn,tD=vL,bL=tD,wL=typeof self=="object"&&self&&self.Object===Object&&self,NL=bL||wL||Function("return this")(),As=NL,jL=As,SL=jL.Symbol,ol=SL,Aw=ol,rD=Object.prototype,kL=rD.hasOwnProperty,DL=rD.toString,Ml=Aw?Aw.toStringTag:void 0;function CL(e){var t=kL.call(e,Ml),r=e[Ml];try{e[Ml]=void 0;var n=!0}catch{}var s=DL.call(e);return n&&(t?e[Ml]=r:delete e[Ml]),s}var EL=CL,TL=Object.prototype,AL=TL.toString;function _L(e){return AL.call(e)}var PL=_L,_w=ol,ML=EL,RL=PL,OL="[object Null]",IL="[object Undefined]",Pw=_w?_w.toStringTag:void 0;function LL(e){return e==null?e===void 0?IL:OL:Pw&&Pw in Object(e)?ML(e):RL(e)}var ll=LL;function $L(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ua=$L,FL=ll,BL=ua,WL="[object AsyncFunction]",HL="[object Function]",UL="[object GeneratorFunction]",zL="[object Proxy]";function VL(e){if(!BL(e))return!1;var t=FL(e);return t==HL||t==UL||t==WL||t==zL}var Vx=VL,YL=9007199254740991;function qL(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=YL}var Yx=qL,KL=Vx,GL=Yx;function QL(e){return e!=null&&GL(e.length)&&!KL(e)}var wu=QL,XL=9007199254740991,JL=/^(?:0|[1-9]\d*)$/;function ZL(e,t){var r=typeof e;return t=t??XL,!!t&&(r=="number"||r!="symbol"&&JL.test(e))&&e>-1&&e%1==0&&e<t}var qx=ZL,e$=bu,t$=wu,r$=qx,n$=ua;function s$(e,t,r){if(!n$(r))return!1;var n=typeof t;return(n=="number"?t$(r)&&r$(t,r.length):n=="string"&&t in r)?e$(r[t],e):!1}var Wm=s$,a$=/\s/;function i$(e){for(var t=e.length;t--&&a$.test(e.charAt(t)););return t}var o$=i$,l$=o$,c$=/^\s+/;function u$(e){return e&&e.slice(0,l$(e)+1).replace(c$,"")}var d$=u$;function f$(e){return e!=null&&typeof e=="object"}var ri=f$,m$=ll,h$=ri,p$="[object Symbol]";function g$(e){return typeof e=="symbol"||h$(e)&&m$(e)==p$}var Nu=g$,y$=d$,Mw=ua,x$=Nu,Rw=NaN,v$=/^[-+]0x[0-9a-f]+$/i,b$=/^0b[01]+$/i,w$=/^0o[0-7]+$/i,N$=parseInt;function j$(e){if(typeof e=="number")return e;if(x$(e))return Rw;if(Mw(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Mw(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=y$(e);var r=b$.test(e);return r||w$.test(e)?N$(e.slice(2),r?2:8):v$.test(e)?Rw:+e}var S$=j$,k$=S$,Ow=1/0,D$=17976931348623157e292;function C$(e){if(!e)return e===0?e:0;if(e=k$(e),e===Ow||e===-Ow){var t=e<0?-1:1;return t*D$}return e===e?e:0}var nD=C$,E$=nD;function T$(e){var t=E$(e),r=t%1;return t===t?r?t-r:t:0}var sD=T$,A$=eD,_$=Wm,P$=sD,M$=Math.ceil,R$=Math.max;function O$(e,t,r){(r?_$(e,t,r):t===void 0)?t=1:t=R$(P$(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var s=0,i=0,o=Array(M$(n/t));s<n;)o[i++]=A$(e,s,s+=t);return o}var I$=O$;const L$=Wr(I$);function ju(e){return e&&e.ownerDocument||document}function $$(e){var t=ju(e);return t&&t.defaultView||window}function F$(e,t){return $$(e).getComputedStyle(e,t)}var B$=/([A-Z])/g;function W$(e){return e.replace(B$,"-$1").toLowerCase()}var H$=/^ms-/;function md(e){return W$(e).replace(H$,"-ms-")}var U$=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function z$(e){return!!(e&&U$.test(e))}function Ji(e,t){var r="",n="";if(typeof t=="string")return e.style.getPropertyValue(md(t))||F$(e).getPropertyValue(md(t));Object.keys(t).forEach(function(s){var i=t[s];!i&&i!==0?e.style.removeProperty(md(s)):z$(s)?n+=s+"("+i+") ":r+=md(s)+": "+i+";"}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r}function Hc(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function V$(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function Kx(e){return"window"in e&&e.window===e?e:V$(e)&&e.defaultView||!1}function aD(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(n,s){var i=Kx(n);if(s===void 0)return i?i[e]:n[t];i?i.scrollTo(i[e],s):n[t]=s}return r}const iD=aD("pageXOffset"),oD=aD("pageYOffset");function Di(e){var t=ju(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return!n||!Hc(n,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+oD(n)-(n.clientTop||0),left:r.left+iD(n)-(n.clientLeft||0),width:r.width,height:r.height}),r}var Y$=function(t){return!!t&&"offsetParent"in t};function q$(e){for(var t=ju(e),r=e&&e.offsetParent;Y$(r)&&r.nodeName!=="HTML"&&Ji(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var K$=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function lD(e,t){var r={top:0,left:0},n;if(Ji(e,"position")==="fixed")n=e.getBoundingClientRect();else{var s=t||q$(e);n=Di(e),K$(s)!=="html"&&(r=Di(s));var i=String(Ji(s,"borderTopWidth")||0);r.top+=parseInt(i,10)-oD(s)||0;var o=String(Ji(s,"borderLeftWidth")||0);r.left+=parseInt(o,10)-iD(s)||0}var l=String(Ji(e,"marginTop")||0),c=String(Ji(e,"marginLeft")||0);return Ut({},n,{top:n.top-r.top-(parseInt(l,10)||0),left:n.left-r.left-(parseInt(c,10)||0)})}const Gx=!!(typeof window<"u"&&window.document&&window.document.createElement);var Iw=new Date().getTime();function G$(e){var t=new Date().getTime(),r=Math.max(0,16-(t-Iw)),n=setTimeout(e,r);return Iw=t,n}var Q$=["","webkit","moz","o","ms"],Qg="clearTimeout",Xg=G$,Lw=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};Gx&&Q$.some(function(e){var t=Lw(e,"request");return t in window&&(Qg=Lw(e,"cancel"),Xg=function(n){return window[t](n)}),!!Xg});var $w=function(t){typeof window[Qg]=="function"&&window[Qg](t)},cD=Xg,lp;function X$(e,t){if(!lp){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;lp=function(i,o){return n.call(i,o)}}return lp(e,t)}var J$=Function.prototype.bind.call(Function.prototype.call,[].slice);function Z$(e,t){return J$(e.querySelectorAll(t))}var Jg=!1,Zg=!1;try{var cp={get passive(){return Jg=!0},get once(){return Zg=Jg=!0}};Gx&&(window.addEventListener("test",cp,cp),window.removeEventListener("test",cp,!0))}catch{}function eF(e,t,r,n){if(n&&typeof n!="boolean"&&!Zg){var s=n.once,i=n.capture,o=r;!Zg&&s&&(o=r.__once||function l(c){this.removeEventListener(t,l,i),r.call(this,c)},r.__once=o),e.addEventListener(t,o,Jg?n:i)}e.addEventListener(t,r,n)}function tF(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e},[e]),t}function Fw(e){const t=tF(e);return b.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function Bw(){return b.useState(null)}function rF(){const e=b.useRef(!0),t=b.useRef(()=>e.current);return b.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function nF(e){const t=rF();return[e[0],b.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var Zr="top",Cn="bottom",En="right",en="left",Qx="auto",Su=[Zr,Cn,En,en],Vo="start",Uc="end",sF="clippingParents",uD="viewport",Rl="popper",aF="reference",Ww=Su.reduce(function(e,t){return e.concat([t+"-"+Vo,t+"-"+Uc])},[]),Xx=[].concat(Su,[Qx]).reduce(function(e,t){return e.concat([t,t+"-"+Vo,t+"-"+Uc])},[]),iF="beforeRead",oF="read",lF="afterRead",cF="beforeMain",uF="main",dF="afterMain",fF="beforeWrite",mF="write",hF="afterWrite",pF=[iF,oF,lF,cF,uF,dF,fF,mF,hF];function Ns(e){return e.split("-")[0]}function un(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Bi(e){var t=un(e).Element;return e instanceof t||e instanceof Element}function js(e){var t=un(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Jx(e){if(typeof ShadowRoot>"u")return!1;var t=un(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Ci=Math.max,Uf=Math.min,Yo=Math.round;function ey(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function dD(){return!/^((?!chrome|android).)*safari/i.test(ey())}function qo(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),s=1,i=1;t&&js(e)&&(s=e.offsetWidth>0&&Yo(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Yo(n.height)/e.offsetHeight||1);var o=Bi(e)?un(e):window,l=o.visualViewport,c=!dD()&&r,u=(n.left+(c&&l?l.offsetLeft:0))/s,d=(n.top+(c&&l?l.offsetTop:0))/i,f=n.width/s,m=n.height/i;return{width:f,height:m,top:d,right:u+f,bottom:d+m,left:u,x:u,y:d}}function Zx(e){var t=qo(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function fD(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Jx(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Ga(e){return e?(e.nodeName||"").toLowerCase():null}function ia(e){return un(e).getComputedStyle(e)}function gF(e){return["table","td","th"].indexOf(Ga(e))>=0}function ni(e){return((Bi(e)?e.ownerDocument:e.document)||window.document).documentElement}function Hm(e){return Ga(e)==="html"?e:e.assignedSlot||e.parentNode||(Jx(e)?e.host:null)||ni(e)}function Hw(e){return!js(e)||ia(e).position==="fixed"?null:e.offsetParent}function yF(e){var t=/firefox/i.test(ey()),r=/Trident/i.test(ey());if(r&&js(e)){var n=ia(e);if(n.position==="fixed")return null}var s=Hm(e);for(Jx(s)&&(s=s.host);js(s)&&["html","body"].indexOf(Ga(s))<0;){var i=ia(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function ku(e){for(var t=un(e),r=Hw(e);r&&gF(r)&&ia(r).position==="static";)r=Hw(r);return r&&(Ga(r)==="html"||Ga(r)==="body"&&ia(r).position==="static")?t:r||yF(e)||t}function e0(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ac(e,t,r){return Ci(e,Uf(t,r))}function xF(e,t,r){var n=ac(e,t,r);return n>r?r:n}function mD(){return{top:0,right:0,bottom:0,left:0}}function hD(e){return Object.assign({},mD(),e)}function pD(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var vF=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,hD(typeof t!="number"?t:pD(t,Su))};function bF(e){var t,r=e.state,n=e.name,s=e.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,l=Ns(r.placement),c=e0(l),u=[en,En].indexOf(l)>=0,d=u?"height":"width";if(!(!i||!o)){var f=vF(s.padding,r),m=Zx(i),y=c==="y"?Zr:en,j=c==="y"?Cn:En,p=r.rects.reference[d]+r.rects.reference[c]-o[c]-r.rects.popper[d],k=o[c]-r.rects.reference[c],h=ku(i),v=h?c==="y"?h.clientHeight||0:h.clientWidth||0:0,S=p/2-k/2,x=f[y],T=v-m[d]-f[j],E=v/2-m[d]/2+S,_=ac(x,E,T),M=c;r.modifiersData[n]=(t={},t[M]=_,t.centerOffset=_-E,t)}}function wF(e){var t=e.state,r=e.options,n=r.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||fD(t.elements.popper,s)&&(t.elements.arrow=s))}const NF={name:"arrow",enabled:!0,phase:"main",fn:bF,effect:wF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ko(e){return e.split("-")[1]}var jF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function SF(e,t){var r=e.x,n=e.y,s=t.devicePixelRatio||1;return{x:Yo(r*s)/s||0,y:Yo(n*s)/s||0}}function Uw(e){var t,r=e.popper,n=e.popperRect,s=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,f=e.isFixed,m=o.x,y=m===void 0?0:m,j=o.y,p=j===void 0?0:j,k=typeof d=="function"?d({x:y,y:p}):{x:y,y:p};y=k.x,p=k.y;var h=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),S=en,x=Zr,T=window;if(u){var E=ku(r),_="clientHeight",M="clientWidth";if(E===un(r)&&(E=ni(r),ia(E).position!=="static"&&l==="absolute"&&(_="scrollHeight",M="scrollWidth")),E=E,s===Zr||(s===en||s===En)&&i===Uc){x=Cn;var O=f&&E===T&&T.visualViewport?T.visualViewport.height:E[_];p-=O-n.height,p*=c?1:-1}if(s===en||(s===Zr||s===Cn)&&i===Uc){S=En;var R=f&&E===T&&T.visualViewport?T.visualViewport.width:E[M];y-=R-n.width,y*=c?1:-1}}var K=Object.assign({position:l},u&&jF),Q=d===!0?SF({x:y,y:p},un(r)):{x:y,y:p};if(y=Q.x,p=Q.y,c){var ne;return Object.assign({},K,(ne={},ne[x]=v?"0":"",ne[S]=h?"0":"",ne.transform=(T.devicePixelRatio||1)<=1?"translate("+y+"px, "+p+"px)":"translate3d("+y+"px, "+p+"px, 0)",ne))}return Object.assign({},K,(t={},t[x]=v?p+"px":"",t[S]=h?y+"px":"",t.transform="",t))}function kF(e){var t=e.state,r=e.options,n=r.gpuAcceleration,s=n===void 0?!0:n,i=r.adaptive,o=i===void 0?!0:i,l=r.roundOffsets,c=l===void 0?!0:l,u={placement:Ns(t.placement),variation:Ko(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Uw(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Uw(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const DF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kF,data:{}};var hd={passive:!0};function CF(e){var t=e.state,r=e.instance,n=e.options,s=n.scroll,i=s===void 0?!0:s,o=n.resize,l=o===void 0?!0:o,c=un(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(d){d.addEventListener("scroll",r.update,hd)}),l&&c.addEventListener("resize",r.update,hd),function(){i&&u.forEach(function(d){d.removeEventListener("scroll",r.update,hd)}),l&&c.removeEventListener("resize",r.update,hd)}}const EF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:CF,data:{}};var TF={left:"right",right:"left",bottom:"top",top:"bottom"};function Gd(e){return e.replace(/left|right|bottom|top/g,function(t){return TF[t]})}var AF={start:"end",end:"start"};function zw(e){return e.replace(/start|end/g,function(t){return AF[t]})}function t0(e){var t=un(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function r0(e){return qo(ni(e)).left+t0(e).scrollLeft}function _F(e,t){var r=un(e),n=ni(e),s=r.visualViewport,i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;var u=dD();(u||!u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l+r0(e),y:c}}function PF(e){var t,r=ni(e),n=t0(e),s=(t=e.ownerDocument)==null?void 0:t.body,i=Ci(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Ci(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-n.scrollLeft+r0(e),c=-n.scrollTop;return ia(s||r).direction==="rtl"&&(l+=Ci(r.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function n0(e){var t=ia(e),r=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+n)}function gD(e){return["html","body","#document"].indexOf(Ga(e))>=0?e.ownerDocument.body:js(e)&&n0(e)?e:gD(Hm(e))}function ic(e,t){var r;t===void 0&&(t=[]);var n=gD(e),s=n===((r=e.ownerDocument)==null?void 0:r.body),i=un(n),o=s?[i].concat(i.visualViewport||[],n0(n)?n:[]):n,l=t.concat(o);return s?l:l.concat(ic(Hm(o)))}function ty(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function MF(e,t){var r=qo(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Vw(e,t,r){return t===uD?ty(_F(e,r)):Bi(t)?MF(t,r):ty(PF(ni(e)))}function RF(e){var t=ic(Hm(e)),r=["absolute","fixed"].indexOf(ia(e).position)>=0,n=r&&js(e)?ku(e):e;return Bi(n)?t.filter(function(s){return Bi(s)&&fD(s,n)&&Ga(s)!=="body"}):[]}function OF(e,t,r,n){var s=t==="clippingParents"?RF(e):[].concat(t),i=[].concat(s,[r]),o=i[0],l=i.reduce(function(c,u){var d=Vw(e,u,n);return c.top=Ci(d.top,c.top),c.right=Uf(d.right,c.right),c.bottom=Uf(d.bottom,c.bottom),c.left=Ci(d.left,c.left),c},Vw(e,o,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function yD(e){var t=e.reference,r=e.element,n=e.placement,s=n?Ns(n):null,i=n?Ko(n):null,o=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(s){case Zr:c={x:o,y:t.y-r.height};break;case Cn:c={x:o,y:t.y+t.height};break;case En:c={x:t.x+t.width,y:l};break;case en:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var u=s?e0(s):null;if(u!=null){var d=u==="y"?"height":"width";switch(i){case Vo:c[u]=c[u]-(t[d]/2-r[d]/2);break;case Uc:c[u]=c[u]+(t[d]/2-r[d]/2);break}}return c}function zc(e,t){t===void 0&&(t={});var r=t,n=r.placement,s=n===void 0?e.placement:n,i=r.strategy,o=i===void 0?e.strategy:i,l=r.boundary,c=l===void 0?sF:l,u=r.rootBoundary,d=u===void 0?uD:u,f=r.elementContext,m=f===void 0?Rl:f,y=r.altBoundary,j=y===void 0?!1:y,p=r.padding,k=p===void 0?0:p,h=hD(typeof k!="number"?k:pD(k,Su)),v=m===Rl?aF:Rl,S=e.rects.popper,x=e.elements[j?v:m],T=OF(Bi(x)?x:x.contextElement||ni(e.elements.popper),c,d,o),E=qo(e.elements.reference),_=yD({reference:E,element:S,placement:s}),M=ty(Object.assign({},S,_)),O=m===Rl?M:E,R={top:T.top-O.top+h.top,bottom:O.bottom-T.bottom+h.bottom,left:T.left-O.left+h.left,right:O.right-T.right+h.right},K=e.modifiersData.offset;if(m===Rl&&K){var Q=K[s];Object.keys(R).forEach(function(ne){var Z=[En,Cn].indexOf(ne)>=0?1:-1,fe=[Zr,Cn].indexOf(ne)>=0?"y":"x";R[ne]+=Q[fe]*Z})}return R}function IF(e,t){t===void 0&&(t={});var r=t,n=r.placement,s=r.boundary,i=r.rootBoundary,o=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,u=c===void 0?Xx:c,d=Ko(n),f=d?l?Ww:Ww.filter(function(j){return Ko(j)===d}):Su,m=f.filter(function(j){return u.indexOf(j)>=0});m.length===0&&(m=f);var y=m.reduce(function(j,p){return j[p]=zc(e,{placement:p,boundary:s,rootBoundary:i,padding:o})[Ns(p)],j},{});return Object.keys(y).sort(function(j,p){return y[j]-y[p]})}function LF(e){if(Ns(e)===Qx)return[];var t=Gd(e);return[zw(e),t,zw(t)]}function $F(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var s=r.mainAxis,i=s===void 0?!0:s,o=r.altAxis,l=o===void 0?!0:o,c=r.fallbackPlacements,u=r.padding,d=r.boundary,f=r.rootBoundary,m=r.altBoundary,y=r.flipVariations,j=y===void 0?!0:y,p=r.allowedAutoPlacements,k=t.options.placement,h=Ns(k),v=h===k,S=c||(v||!j?[Gd(k)]:LF(k)),x=[k].concat(S).reduce(function(Y,ue){return Y.concat(Ns(ue)===Qx?IF(t,{placement:ue,boundary:d,rootBoundary:f,padding:u,flipVariations:j,allowedAutoPlacements:p}):ue)},[]),T=t.rects.reference,E=t.rects.popper,_=new Map,M=!0,O=x[0],R=0;R<x.length;R++){var K=x[R],Q=Ns(K),ne=Ko(K)===Vo,Z=[Zr,Cn].indexOf(Q)>=0,fe=Z?"width":"height",te=zc(t,{placement:K,boundary:d,rootBoundary:f,altBoundary:m,padding:u}),xe=Z?ne?En:en:ne?Cn:Zr;T[fe]>E[fe]&&(xe=Gd(xe));var ie=Gd(xe),V=[];if(i&&V.push(te[Q]<=0),l&&V.push(te[xe]<=0,te[ie]<=0),V.every(function(Y){return Y})){O=K,M=!1;break}_.set(K,V)}if(M)for(var ge=j?3:1,G=function(ue){var ye=x.find(function(Ne){var Re=_.get(Ne);if(Re)return Re.slice(0,ue).every(function(ee){return ee})});if(ye)return O=ye,"break"},U=ge;U>0;U--){var L=G(U);if(L==="break")break}t.placement!==O&&(t.modifiersData[n]._skip=!0,t.placement=O,t.reset=!0)}}const FF={name:"flip",enabled:!0,phase:"main",fn:$F,requiresIfExists:["offset"],data:{_skip:!1}};function Yw(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function qw(e){return[Zr,En,Cn,en].some(function(t){return e[t]>=0})}function BF(e){var t=e.state,r=e.name,n=t.rects.reference,s=t.rects.popper,i=t.modifiersData.preventOverflow,o=zc(t,{elementContext:"reference"}),l=zc(t,{altBoundary:!0}),c=Yw(o,n),u=Yw(l,s,i),d=qw(c),f=qw(u);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const WF={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:BF};function HF(e,t,r){var n=Ns(e),s=[en,Zr].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=i[0],l=i[1];return o=o||0,l=(l||0)*s,[en,En].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}function UF(e){var t=e.state,r=e.options,n=e.name,s=r.offset,i=s===void 0?[0,0]:s,o=Xx.reduce(function(d,f){return d[f]=HF(f,t.rects,i),d},{}),l=o[t.placement],c=l.x,u=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=o}const zF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:UF};function VF(e){var t=e.state,r=e.name;t.modifiersData[r]=yD({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const YF={name:"popperOffsets",enabled:!0,phase:"read",fn:VF,data:{}};function qF(e){return e==="x"?"y":"x"}function KF(e){var t=e.state,r=e.options,n=e.name,s=r.mainAxis,i=s===void 0?!0:s,o=r.altAxis,l=o===void 0?!1:o,c=r.boundary,u=r.rootBoundary,d=r.altBoundary,f=r.padding,m=r.tether,y=m===void 0?!0:m,j=r.tetherOffset,p=j===void 0?0:j,k=zc(t,{boundary:c,rootBoundary:u,padding:f,altBoundary:d}),h=Ns(t.placement),v=Ko(t.placement),S=!v,x=e0(h),T=qF(x),E=t.modifiersData.popperOffsets,_=t.rects.reference,M=t.rects.popper,O=typeof p=="function"?p(Object.assign({},t.rects,{placement:t.placement})):p,R=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),K=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Q={x:0,y:0};if(E){if(i){var ne,Z=x==="y"?Zr:en,fe=x==="y"?Cn:En,te=x==="y"?"height":"width",xe=E[x],ie=xe+k[Z],V=xe-k[fe],ge=y?-M[te]/2:0,G=v===Vo?_[te]:M[te],U=v===Vo?-M[te]:-_[te],L=t.elements.arrow,Y=y&&L?Zx(L):{width:0,height:0},ue=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:mD(),ye=ue[Z],Ne=ue[fe],Re=ac(0,_[te],Y[te]),ee=S?_[te]/2-ge-Re-ye-R.mainAxis:G-Re-ye-R.mainAxis,me=S?-_[te]/2+ge+Re+Ne+R.mainAxis:U+Re+Ne+R.mainAxis,I=t.elements.arrow&&ku(t.elements.arrow),se=I?x==="y"?I.clientTop||0:I.clientLeft||0:0,ae=(ne=K==null?void 0:K[x])!=null?ne:0,X=xe+ee-ae-se,we=xe+me-ae,Ee=ac(y?Uf(ie,X):ie,xe,y?Ci(V,we):V);E[x]=Ee,Q[x]=Ee-xe}if(l){var de,C=x==="x"?Zr:en,w=x==="x"?Cn:En,g=E[T],N=T==="y"?"height":"width",D=g+k[C],P=g-k[w],F=[Zr,en].indexOf(h)!==-1,q=(de=K==null?void 0:K[T])!=null?de:0,A=F?D:g-_[N]-M[N]-q+R.altAxis,J=F?g+_[N]+M[N]-q-R.altAxis:P,W=y&&F?xF(A,g,J):ac(y?A:D,g,y?J:P);E[T]=W,Q[T]=W-g}t.modifiersData[n]=Q}}const GF={name:"preventOverflow",enabled:!0,phase:"main",fn:KF,requiresIfExists:["offset"]};function QF(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function XF(e){return e===un(e)||!js(e)?t0(e):QF(e)}function JF(e){var t=e.getBoundingClientRect(),r=Yo(t.width)/e.offsetWidth||1,n=Yo(t.height)/e.offsetHeight||1;return r!==1||n!==1}function ZF(e,t,r){r===void 0&&(r=!1);var n=js(t),s=js(t)&&JF(t),i=ni(t),o=qo(e,s,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Ga(t)!=="body"||n0(i))&&(l=XF(t)),js(t)?(c=qo(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=r0(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function e6(e){var t=new Map,r=new Set,n=[];e.forEach(function(i){t.set(i.name,i)});function s(i){r.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&s(c)}}),n.push(i)}return e.forEach(function(i){r.has(i.name)||s(i)}),n}function t6(e){var t=e6(e);return pF.reduce(function(r,n){return r.concat(t.filter(function(s){return s.phase===n}))},[])}function r6(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function n6(e){var t=e.reduce(function(r,n){var s=r[n.name];return r[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var Kw={placement:"bottom",modifiers:[],strategy:"absolute"};function Gw(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function s6(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,s=t.defaultOptions,i=s===void 0?Kw:s;return function(l,c,u){u===void 0&&(u=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Kw,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],m=!1,y={state:d,setOptions:function(h){var v=typeof h=="function"?h(d.options):h;p(),d.options=Object.assign({},i,d.options,v),d.scrollParents={reference:Bi(l)?ic(l):l.contextElement?ic(l.contextElement):[],popper:ic(c)};var S=t6(n6([].concat(n,d.options.modifiers)));return d.orderedModifiers=S.filter(function(x){return x.enabled}),j(),y.update()},forceUpdate:function(){if(!m){var h=d.elements,v=h.reference,S=h.popper;if(Gw(v,S)){d.rects={reference:ZF(v,ku(S),d.options.strategy==="fixed"),popper:Zx(S)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(R){return d.modifiersData[R.name]=Object.assign({},R.data)});for(var x=0;x<d.orderedModifiers.length;x++){if(d.reset===!0){d.reset=!1,x=-1;continue}var T=d.orderedModifiers[x],E=T.fn,_=T.options,M=_===void 0?{}:_,O=T.name;typeof E=="function"&&(d=E({state:d,options:M,name:O,instance:y})||d)}}}},update:r6(function(){return new Promise(function(k){y.forceUpdate(),k(d)})}),destroy:function(){p(),m=!0}};if(!Gw(l,c))return y;y.setOptions(u).then(function(k){!m&&u.onFirstUpdate&&u.onFirstUpdate(k)});function j(){d.orderedModifiers.forEach(function(k){var h=k.name,v=k.options,S=v===void 0?{}:v,x=k.effect;if(typeof x=="function"){var T=x({state:d,name:h,instance:y,options:S}),E=function(){};f.push(T||E)}})}function p(){f.forEach(function(k){return k()}),f=[]}return y}}var a6=s6({defaultModifiers:[WF,YF,DF,EF,zF,FF,GF,NF]}),Qw=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},i6={name:"applyStyles",enabled:!1},o6={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var n=r.elements,s=n.reference,i=n.popper;if("removeAttribute"in s){var o=(s.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==i.id});o.length?s.setAttribute("aria-describedby",o.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(t){var r,n=t.state,s=n.elements,i=s.popper,o=s.reference,l=(r=i.getAttribute("role"))==null?void 0:r.toLowerCase();if(i.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},l6=[];function c6(e,t,r){var n=r===void 0?{}:r,s=n.enabled,i=s===void 0?!0:s,o=n.placement,l=o===void 0?"bottom":o,c=n.strategy,u=c===void 0?"absolute":c,d=n.modifiers,f=d===void 0?l6:d,m=Fm(n,["enabled","placement","strategy","modifiers"]),y=b.useRef(),j=b.useCallback(function(){var x;(x=y.current)==null||x.update()},[]),p=b.useCallback(function(){var x;(x=y.current)==null||x.forceUpdate()},[]),k=nF(b.useState({placement:l,update:j,forceUpdate:p,attributes:{},styles:{popper:Qw(u),arrow:{}}})),h=k[0],v=k[1],S=b.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(T){var E=T.state,_={},M={};Object.keys(E.elements).forEach(function(O){_[O]=E.styles[O],M[O]=E.attributes[O]}),v({state:E,styles:_,attributes:M,update:j,forceUpdate:p,placement:E.placement})}}},[j,p,v]);return b.useEffect(function(){!y.current||!i||y.current.setOptions({placement:l,strategy:u,modifiers:[].concat(f,[S,i6])})},[u,l,S,i]),b.useEffect(function(){if(!(!i||e==null||t==null))return y.current=a6(e,t,Ut({},m,{placement:l,strategy:u,modifiers:[].concat(f,[o6,S])})),function(){y.current!=null&&(y.current.destroy(),y.current=void 0,v(function(x){return Ut({},x,{attributes:{},styles:{popper:Qw(u)}})}))}},[i,e,t]),h}function u6(e,t,r,n){var s=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,r,s),r.__once&&e.removeEventListener(t,r.__once,s)}function Vl(e,t,r,n){return eF(e,t,r,n),function(){u6(e,t,r,n)}}var d6=function(){},f6=d6;const m6=Wr(f6);function h6(e){return e&&"setState"in e?q2.findDOMNode(e):e??null}const p6=function(e){return ju(h6(e))};var g6=27,Xw=function(){};function y6(e){return e.button===0}function x6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Jw=function(t){return t&&("current"in t?t.current:t)};function v6(e,t,r){var n=r===void 0?{}:r,s=n.disabled,i=n.clickTrigger,o=i===void 0?"click":i,l=b.useRef(!1),c=t||Xw,u=b.useCallback(function(m){var y,j=Jw(e);m6(!!j,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!j||x6(m)||!y6(m)||!!Hc(j,(y=m.composedPath==null?void 0:m.composedPath()[0])!=null?y:m.target)},[e]),d=Fw(function(m){l.current||c(m)}),f=Fw(function(m){m.keyCode===g6&&c(m)});b.useEffect(function(){if(!(s||e==null)){var m=window.event,y=p6(Jw(e)),j=Vl(y,o,u,!0),p=Vl(y,o,function(v){if(v===m){m=void 0;return}d(v)}),k=Vl(y,"keyup",function(v){if(v===m){m=void 0;return}f(v)}),h=[];return"ontouchstart"in y.documentElement&&(h=[].slice.call(y.body.children).map(function(v){return Vl(v,"mousemove",Xw)})),function(){j(),p(),k(),h.forEach(function(v){return v()})}}},[e,s,o,u,d,f])}function b6(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function w6(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function N6(e){var t,r,n,s,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,u=e.offset,d=e.fixed,f=e.containerPadding,m=e.arrowElement,y=e.popperConfig,j=y===void 0?{}:y,p=b6(j.modifiers);return Ut({},j,{placement:l,enabled:i,strategy:d?"fixed":j.strategy,modifiers:w6(Ut({},p,{eventListeners:{enabled:o},preventOverflow:Ut({},p.preventOverflow,{options:f?Ut({padding:f},(t=p.preventOverflow)==null?void 0:t.options):(r=p.preventOverflow)==null?void 0:r.options}),offset:{options:Ut({offset:u},(n=p.offset)==null?void 0:n.options)},arrow:Ut({},p.arrow,{enabled:!!m,options:Ut({},(s=p.arrow)==null?void 0:s.options,{element:m})}),flip:Ut({enabled:!!c},p.flip)}))})}function j6(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function S6(e,t){e.classList?e.classList.add(t):j6(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Zw(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function k6(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Zw(e.className,t):e.setAttribute("class",Zw(e.className&&e.className.baseVal||"",t))}var pd;function s0(e){if((!pd&&pd!==0||e)&&Gx){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),pd=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return pd}var up=function(t){var r;return typeof document>"u"?null:t==null?ju().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function eN(e,t){var r=b.useState(function(){return up(e)}),n=r[0],s=r[1];if(!n){var i=up(e);i&&s(i)}return b.useEffect(function(){},[t,n]),b.useEffect(function(){var o=up(e);o!==n&&s(o)},[e,n]),n}const tN=e=>!e||typeof e=="function"?e:t=>{e.current=t};function D6(e,t){const r=tN(e),n=tN(t);return s=>{r&&r(s),n&&n(s)}}function C6(e,t){return b.useMemo(()=>D6(e,t),[e,t])}var a0=z.forwardRef(function(e,t){var r=e.flip,n=e.offset,s=e.placement,i=e.containerPadding,o=i===void 0?5:i,l=e.popperConfig,c=l===void 0?{}:l,u=e.transition,d=Bw(),f=d[0],m=d[1],y=Bw(),j=y[0],p=y[1],k=C6(m,t),h=eN(e.container),v=eN(e.target),S=b.useState(!e.show),x=S[0],T=S[1],E=c6(v,f,N6({placement:s,enableEvents:!!e.show,containerPadding:o||5,flip:r,offset:n,arrowElement:j,popperConfig:c})),_=E.styles,M=E.attributes,O=Fm(E,["styles","attributes"]);e.show?x&&T(!1):!e.transition&&!x&&T(!0);var R=function(){T(!0),e.onExited&&e.onExited.apply(e,arguments)},K=e.show||u&&!x;if(v6(f,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!K)return null;var Q=e.children(Ut({},O,{show:!!e.show,props:Ut({},M.popper,{style:_.popper,ref:k}),arrowProps:Ut({},M.arrow,{style:_.arrow,ref:p})}));if(u){var ne=e.onExit,Z=e.onExiting,fe=e.onEnter,te=e.onEntering,xe=e.onEntered;Q=z.createElement(u,{in:e.show,appear:!0,onExit:ne,onExiting:Z,onExited:R,onEnter:fe,onEntering:te,onEntered:xe},Q)}return h?q2.createPortal(Q,h):null});a0.displayName="Overlay";a0.propTypes={show:Pe.bool,placement:Pe.oneOf(Xx),target:Pe.any,container:Pe.any,flip:Pe.bool,children:Pe.func.isRequired,containerPadding:Pe.number,popperConfig:Pe.object,rootClose:Pe.bool,rootCloseEvent:Pe.oneOf(["click","mousedown"]),rootCloseDisabled:Pe.bool,onHide:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];if(t.rootClose){var i;return(i=Pe.func).isRequired.apply(i,[t].concat(n))}return Pe.func.apply(Pe,[t].concat(n))},transition:Pe.elementType,onEnter:Pe.func,onEntering:Pe.func,onEntered:Pe.func,onExit:Pe.func,onExiting:Pe.func,onExited:Pe.func};function E6(){this.__data__=[],this.size=0}var T6=E6,A6=bu;function _6(e,t){for(var r=e.length;r--;)if(A6(e[r][0],t))return r;return-1}var Um=_6,P6=Um,M6=Array.prototype,R6=M6.splice;function O6(e){var t=this.__data__,r=P6(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():R6.call(t,r,1),--this.size,!0}var I6=O6,L6=Um;function $6(e){var t=this.__data__,r=L6(t,e);return r<0?void 0:t[r][1]}var F6=$6,B6=Um;function W6(e){return B6(this.__data__,e)>-1}var H6=W6,U6=Um;function z6(e,t){var r=this.__data__,n=U6(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var V6=z6,Y6=T6,q6=I6,K6=F6,G6=H6,Q6=V6;function cl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}cl.prototype.clear=Y6;cl.prototype.delete=q6;cl.prototype.get=K6;cl.prototype.has=G6;cl.prototype.set=Q6;var zm=cl,X6=zm;function J6(){this.__data__=new X6,this.size=0}var Z6=J6;function eB(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var tB=eB;function rB(e){return this.__data__.get(e)}var nB=rB;function sB(e){return this.__data__.has(e)}var aB=sB,iB=As,oB=iB["__core-js_shared__"],lB=oB,dp=lB,rN=function(){var e=/[^.]+$/.exec(dp&&dp.keys&&dp.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function cB(e){return!!rN&&rN in e}var uB=cB,dB=Function.prototype,fB=dB.toString;function mB(e){if(e!=null){try{return fB.call(e)}catch{}try{return e+""}catch{}}return""}var xD=mB,hB=Vx,pB=uB,gB=ua,yB=xD,xB=/[\\^$.*+?()[\]{}|]/g,vB=/^\[object .+?Constructor\]$/,bB=Function.prototype,wB=Object.prototype,NB=bB.toString,jB=wB.hasOwnProperty,SB=RegExp("^"+NB.call(jB).replace(xB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kB(e){if(!gB(e)||pB(e))return!1;var t=hB(e)?SB:vB;return t.test(yB(e))}var DB=kB;function CB(e,t){return e==null?void 0:e[t]}var EB=CB,TB=DB,AB=EB;function _B(e,t){var r=AB(e,t);return TB(r)?r:void 0}var zi=_B,PB=zi,MB=As,RB=PB(MB,"Map"),i0=RB,OB=zi,IB=OB(Object,"create"),Vm=IB,nN=Vm;function LB(){this.__data__=nN?nN(null):{},this.size=0}var $B=LB;function FB(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var BB=FB,WB=Vm,HB="__lodash_hash_undefined__",UB=Object.prototype,zB=UB.hasOwnProperty;function VB(e){var t=this.__data__;if(WB){var r=t[e];return r===HB?void 0:r}return zB.call(t,e)?t[e]:void 0}var YB=VB,qB=Vm,KB=Object.prototype,GB=KB.hasOwnProperty;function QB(e){var t=this.__data__;return qB?t[e]!==void 0:GB.call(t,e)}var XB=QB,JB=Vm,ZB="__lodash_hash_undefined__";function e7(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=JB&&t===void 0?ZB:t,this}var t7=e7,r7=$B,n7=BB,s7=YB,a7=XB,i7=t7;function ul(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ul.prototype.clear=r7;ul.prototype.delete=n7;ul.prototype.get=s7;ul.prototype.has=a7;ul.prototype.set=i7;var o7=ul,sN=o7,l7=zm,c7=i0;function u7(){this.size=0,this.__data__={hash:new sN,map:new(c7||l7),string:new sN}}var d7=u7;function f7(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var m7=f7,h7=m7;function p7(e,t){var r=e.__data__;return h7(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ym=p7,g7=Ym;function y7(e){var t=g7(this,e).delete(e);return this.size-=t?1:0,t}var x7=y7,v7=Ym;function b7(e){return v7(this,e).get(e)}var w7=b7,N7=Ym;function j7(e){return N7(this,e).has(e)}var S7=j7,k7=Ym;function D7(e,t){var r=k7(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var C7=D7,E7=d7,T7=x7,A7=w7,_7=S7,P7=C7;function dl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dl.prototype.clear=E7;dl.prototype.delete=T7;dl.prototype.get=A7;dl.prototype.has=_7;dl.prototype.set=P7;var o0=dl,M7=zm,R7=i0,O7=o0,I7=200;function L7(e,t){var r=this.__data__;if(r instanceof M7){var n=r.__data__;if(!R7||n.length<I7-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new O7(n)}return r.set(e,t),this.size=r.size,this}var $7=L7,F7=zm,B7=Z6,W7=tB,H7=nB,U7=aB,z7=$7;function fl(e){var t=this.__data__=new F7(e);this.size=t.size}fl.prototype.clear=B7;fl.prototype.delete=W7;fl.prototype.get=H7;fl.prototype.has=U7;fl.prototype.set=z7;var l0=fl,V7="__lodash_hash_undefined__";function Y7(e){return this.__data__.set(e,V7),this}var q7=Y7;function K7(e){return this.__data__.has(e)}var G7=K7,Q7=o0,X7=q7,J7=G7;function zf(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Q7;++t<r;)this.add(e[t])}zf.prototype.add=zf.prototype.push=X7;zf.prototype.has=J7;var Z7=zf;function eW(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var tW=eW;function rW(e,t){return e.has(t)}var nW=rW,sW=Z7,aW=tW,iW=nW,oW=1,lW=2;function cW(e,t,r,n,s,i){var o=r&oW,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,m=!0,y=r&lW?new sW:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var j=e[f],p=t[f];if(n)var k=o?n(p,j,f,t,e,i):n(j,p,f,e,t,i);if(k!==void 0){if(k)continue;m=!1;break}if(y){if(!aW(t,function(h,v){if(!iW(y,v)&&(j===h||s(j,h,r,n,i)))return y.push(v)})){m=!1;break}}else if(!(j===p||s(j,p,r,n,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var vD=cW,uW=As,dW=uW.Uint8Array,bD=dW;function fW(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var mW=fW;function hW(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var pW=hW,aN=ol,iN=bD,gW=bu,yW=vD,xW=mW,vW=pW,bW=1,wW=2,NW="[object Boolean]",jW="[object Date]",SW="[object Error]",kW="[object Map]",DW="[object Number]",CW="[object RegExp]",EW="[object Set]",TW="[object String]",AW="[object Symbol]",_W="[object ArrayBuffer]",PW="[object DataView]",oN=aN?aN.prototype:void 0,fp=oN?oN.valueOf:void 0;function MW(e,t,r,n,s,i,o){switch(r){case PW:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _W:return!(e.byteLength!=t.byteLength||!i(new iN(e),new iN(t)));case NW:case jW:case DW:return gW(+e,+t);case SW:return e.name==t.name&&e.message==t.message;case CW:case TW:return e==t+"";case kW:var l=xW;case EW:var c=n&bW;if(l||(l=vW),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=wW,o.set(e,t);var d=yW(l(e),l(t),n,s,i,o);return o.delete(e),d;case AW:if(fp)return fp.call(e)==fp.call(t)}return!1}var RW=MW;function OW(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var c0=OW,IW=Array.isArray,An=IW,LW=c0,$W=An;function FW(e,t,r){var n=t(e);return $W(e)?n:LW(n,r(e))}var wD=FW;function BW(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}var WW=BW;function HW(){return[]}var ND=HW,UW=WW,zW=ND,VW=Object.prototype,YW=VW.propertyIsEnumerable,lN=Object.getOwnPropertySymbols,qW=lN?function(e){return e==null?[]:(e=Object(e),UW(lN(e),function(t){return YW.call(e,t)}))}:zW,u0=qW;function KW(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var GW=KW,QW=ll,XW=ri,JW="[object Arguments]";function ZW(e){return XW(e)&&QW(e)==JW}var e9=ZW,cN=e9,t9=ri,jD=Object.prototype,r9=jD.hasOwnProperty,n9=jD.propertyIsEnumerable,s9=cN(function(){return arguments}())?cN:function(e){return t9(e)&&r9.call(e,"callee")&&!n9.call(e,"callee")},d0=s9,Vf={exports:{}};function a9(){return!1}var i9=a9;Vf.exports;(function(e,t){var r=As,n=i9,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Vf,Vf.exports);var qm=Vf.exports,o9=ll,l9=Yx,c9=ri,u9="[object Arguments]",d9="[object Array]",f9="[object Boolean]",m9="[object Date]",h9="[object Error]",p9="[object Function]",g9="[object Map]",y9="[object Number]",x9="[object Object]",v9="[object RegExp]",b9="[object Set]",w9="[object String]",N9="[object WeakMap]",j9="[object ArrayBuffer]",S9="[object DataView]",k9="[object Float32Array]",D9="[object Float64Array]",C9="[object Int8Array]",E9="[object Int16Array]",T9="[object Int32Array]",A9="[object Uint8Array]",_9="[object Uint8ClampedArray]",P9="[object Uint16Array]",M9="[object Uint32Array]",kt={};kt[k9]=kt[D9]=kt[C9]=kt[E9]=kt[T9]=kt[A9]=kt[_9]=kt[P9]=kt[M9]=!0;kt[u9]=kt[d9]=kt[j9]=kt[f9]=kt[S9]=kt[m9]=kt[h9]=kt[p9]=kt[g9]=kt[y9]=kt[x9]=kt[v9]=kt[b9]=kt[w9]=kt[N9]=!1;function R9(e){return c9(e)&&l9(e.length)&&!!kt[o9(e)]}var O9=R9;function I9(e){return function(t){return e(t)}}var Km=I9,Yf={exports:{}};Yf.exports;(function(e,t){var r=tD,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Yf,Yf.exports);var f0=Yf.exports,L9=O9,$9=Km,uN=f0,dN=uN&&uN.isTypedArray,F9=dN?$9(dN):L9,m0=F9,B9=GW,W9=d0,H9=An,U9=qm,z9=qx,V9=m0,Y9=Object.prototype,q9=Y9.hasOwnProperty;function K9(e,t){var r=H9(e),n=!r&&W9(e),s=!r&&!n&&U9(e),i=!r&&!n&&!s&&V9(e),o=r||n||s||i,l=o?B9(e.length,String):[],c=l.length;for(var u in e)(t||q9.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||z9(u,c)))&&l.push(u);return l}var SD=K9,G9=Object.prototype;function Q9(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||G9;return e===r}var h0=Q9;function X9(e,t){return function(r){return e(t(r))}}var kD=X9,J9=kD,Z9=J9(Object.keys,Object),eH=Z9,tH=h0,rH=eH,nH=Object.prototype,sH=nH.hasOwnProperty;function aH(e){if(!tH(e))return rH(e);var t=[];for(var r in Object(e))sH.call(e,r)&&r!="constructor"&&t.push(r);return t}var iH=aH,oH=SD,lH=iH,cH=wu;function uH(e){return cH(e)?oH(e):lH(e)}var Du=uH,dH=wD,fH=u0,mH=Du;function hH(e){return dH(e,mH,fH)}var DD=hH,fN=DD,pH=1,gH=Object.prototype,yH=gH.hasOwnProperty;function xH(e,t,r,n,s,i){var o=r&pH,l=fN(e),c=l.length,u=fN(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var m=l[f];if(!(o?m in t:yH.call(t,m)))return!1}var y=i.get(e),j=i.get(t);if(y&&j)return y==t&&j==e;var p=!0;i.set(e,t),i.set(t,e);for(var k=o;++f<c;){m=l[f];var h=e[m],v=t[m];if(n)var S=o?n(v,h,m,t,e,i):n(h,v,m,e,t,i);if(!(S===void 0?h===v||s(h,v,r,n,i):S)){p=!1;break}k||(k=m=="constructor")}if(p&&!k){var x=e.constructor,T=t.constructor;x!=T&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof T=="function"&&T instanceof T)&&(p=!1)}return i.delete(e),i.delete(t),p}var vH=xH,bH=zi,wH=As,NH=bH(wH,"DataView"),jH=NH,SH=zi,kH=As,DH=SH(kH,"Promise"),CH=DH,EH=zi,TH=As,AH=EH(TH,"Set"),_H=AH,PH=zi,MH=As,RH=PH(MH,"WeakMap"),OH=RH,ry=jH,ny=i0,sy=CH,ay=_H,iy=OH,CD=ll,ml=xD,mN="[object Map]",IH="[object Object]",hN="[object Promise]",pN="[object Set]",gN="[object WeakMap]",yN="[object DataView]",LH=ml(ry),$H=ml(ny),FH=ml(sy),BH=ml(ay),WH=ml(iy),li=CD;(ry&&li(new ry(new ArrayBuffer(1)))!=yN||ny&&li(new ny)!=mN||sy&&li(sy.resolve())!=hN||ay&&li(new ay)!=pN||iy&&li(new iy)!=gN)&&(li=function(e){var t=CD(e),r=t==IH?e.constructor:void 0,n=r?ml(r):"";if(n)switch(n){case LH:return yN;case $H:return mN;case FH:return hN;case BH:return pN;case WH:return gN}return t});var Gm=li,mp=l0,HH=vD,UH=RW,zH=vH,xN=Gm,vN=An,bN=qm,VH=m0,YH=1,wN="[object Arguments]",NN="[object Array]",gd="[object Object]",qH=Object.prototype,jN=qH.hasOwnProperty;function KH(e,t,r,n,s,i){var o=vN(e),l=vN(t),c=o?NN:xN(e),u=l?NN:xN(t);c=c==wN?gd:c,u=u==wN?gd:u;var d=c==gd,f=u==gd,m=c==u;if(m&&bN(e)){if(!bN(t))return!1;o=!0,d=!1}if(m&&!d)return i||(i=new mp),o||VH(e)?HH(e,t,r,n,s,i):UH(e,t,c,r,n,s,i);if(!(r&YH)){var y=d&&jN.call(e,"__wrapped__"),j=f&&jN.call(t,"__wrapped__");if(y||j){var p=y?e.value():e,k=j?t.value():t;return i||(i=new mp),s(p,k,r,n,i)}}return m?(i||(i=new mp),zH(e,t,r,n,s,i)):!1}var GH=KH,QH=GH,SN=ri;function ED(e,t,r,n,s){return e===t?!0:e==null||t==null||!SN(e)&&!SN(t)?e!==e&&t!==t:QH(e,t,r,n,ED,s)}var p0=ED,XH=p0;function JH(e,t){return XH(e,t)}var ZH=JH;const eU=Wr(ZH);function hp(e,t){var r=Kx(e);return r?r.innerHeight:Di(e).height}function TD(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(X$(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}function tU(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var rU=tU,nU=l0,sU=p0,aU=1,iU=2;function oU(e,t,r,n){var s=r.length,i=s,o=!n;if(e==null)return!i;for(e=Object(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=r[s];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new nU;if(n)var m=n(u,d,c,e,t,f);if(!(m===void 0?sU(d,u,aU|iU,n,f):m))return!1}}return!0}var lU=oU,cU=ua;function uU(e){return e===e&&!cU(e)}var AD=uU,dU=AD,fU=Du;function mU(e){for(var t=fU(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,dU(s)]}return t}var hU=mU;function pU(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var _D=pU,gU=lU,yU=hU,xU=_D;function vU(e){var t=yU(e);return t.length==1&&t[0][2]?xU(t[0][0],t[0][1]):function(r){return r===e||gU(r,e,t)}}var bU=vU,wU=An,NU=Nu,jU=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,SU=/^\w*$/;function kU(e,t){if(wU(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||NU(e)?!0:SU.test(e)||!jU.test(e)||t!=null&&e in Object(t)}var g0=kU,PD=o0,DU="Expected a function";function y0(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(DU);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(y0.Cache||PD),r}y0.Cache=PD;var CU=y0,EU=CU,TU=500;function AU(e){var t=EU(e,function(n){return r.size===TU&&r.clear(),n}),r=t.cache;return t}var _U=AU,PU=_U,MU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,RU=/\\(\\)?/g,OU=PU(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(MU,function(r,n,s,i){t.push(s?i.replace(RU,"$1"):n||r)}),t}),IU=OU;function LU(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var x0=LU,kN=ol,$U=x0,FU=An,BU=Nu,DN=kN?kN.prototype:void 0,CN=DN?DN.toString:void 0;function MD(e){if(typeof e=="string")return e;if(FU(e))return $U(e,MD)+"";if(BU(e))return CN?CN.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var WU=MD,HU=WU;function UU(e){return e==null?"":HU(e)}var zU=UU,VU=An,YU=g0,qU=IU,KU=zU;function GU(e,t){return VU(e)?e:YU(e,t)?[e]:qU(KU(e))}var Qm=GU,QU=Nu;function XU(e){if(typeof e=="string"||QU(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Cu=XU,JU=Qm,ZU=Cu;function e8(e,t){t=JU(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ZU(t[r++])];return r&&r==n?e:void 0}var Xm=e8,t8=Xm;function r8(e,t,r){var n=e==null?void 0:t8(e,t);return n===void 0?r:n}var n8=r8;function s8(e,t){return e!=null&&t in Object(e)}var a8=s8,i8=Qm,o8=d0,l8=An,c8=qx,u8=Yx,d8=Cu;function f8(e,t,r){t=i8(t,e);for(var n=-1,s=t.length,i=!1;++n<s;){var o=d8(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=s?i:(s=e==null?0:e.length,!!s&&u8(s)&&c8(o,s)&&(l8(e)||o8(e)))}var m8=f8,h8=a8,p8=m8;function g8(e,t){return e!=null&&p8(e,t,h8)}var y8=g8,x8=p0,v8=n8,b8=y8,w8=g0,N8=AD,j8=_D,S8=Cu,k8=1,D8=2;function C8(e,t){return w8(e)&&N8(t)?j8(S8(e),t):function(r){var n=v8(r,e);return n===void 0&&n===t?b8(r,e):x8(t,n,k8|D8)}}var E8=C8;function T8(e){return e}var Jm=T8;function A8(e){return function(t){return t==null?void 0:t[e]}}var _8=A8,P8=Xm;function M8(e){return function(t){return P8(t,e)}}var R8=M8,O8=_8,I8=R8,L8=g0,$8=Cu;function F8(e){return L8(e)?O8($8(e)):I8(e)}var B8=F8,W8=bU,H8=E8,U8=Jm,z8=An,V8=B8;function Y8(e){return typeof e=="function"?e:e==null?U8:typeof e=="object"?z8(e)?H8(e[0],e[1]):W8(e):V8(e)}var Zm=Y8,q8=rU,K8=Zm,G8=sD,Q8=Math.max;function X8(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:G8(r);return s<0&&(s=Q8(n+s,0)),q8(e,K8(t),s)}var J8=X8;const Z8=Wr(J8);var ez=Math.ceil,tz=Math.max;function rz(e,t,r,n){for(var s=-1,i=tz(ez((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++s]=e,e+=r;return o}var nz=rz,sz=nz,az=Wm,pp=nD;function iz(e){return function(t,r,n){return n&&typeof n!="number"&&az(t,r,n)&&(r=n=void 0),t=pp(t),r===void 0?(r=t,t=0):r=pp(r),n=n===void 0?t<r?1:-1:pp(n),sz(t,r,n,e)}}var oz=iz,lz=oz,cz=lz(),uz=cz;const dz=Wr(uz);var EN=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function fz(e,t){return!!(e===t||EN(e)&&EN(t))}function mz(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!fz(e[r],t[r]))return!1;return!0}function RD(e,t){t===void 0&&(t=mz);var r=null;function n(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return n.clear=function(){r=null},n}function oy(e,t){var r=Kx(e);return r?r.innerWidth:Di(e).width}var TN=ol,hz=d0,pz=An,AN=TN?TN.isConcatSpreadable:void 0;function gz(e){return pz(e)||hz(e)||!!(AN&&e&&e[AN])}var yz=gz,xz=c0,vz=yz;function OD(e,t,r,n,s){var i=-1,o=e.length;for(r||(r=vz),s||(s=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?OD(l,t-1,r,n,s):xz(s,l):n||(s[s.length]=l)}return s}var ID=OD;function bz(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++s];if(r(i[c],c,i)===!1)break}return t}}var wz=bz,Nz=wz,jz=Nz(),Sz=jz,kz=Sz,Dz=Du;function Cz(e,t){return e&&kz(e,t,Dz)}var v0=Cz,Ez=wu;function Tz(e,t){return function(r,n){if(r==null)return r;if(!Ez(r))return e(r,n);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&n(o[i],i,o)!==!1;);return r}}var Az=Tz,_z=v0,Pz=Az,Mz=Pz(_z),Rz=Mz,Oz=Rz,Iz=wu;function Lz(e,t){var r=-1,n=Iz(e)?Array(e.length):[];return Oz(e,function(s,i,o){n[++r]=t(s,i,o)}),n}var $z=Lz;function Fz(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Bz=Fz,_N=Nu;function Wz(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,i=_N(e),o=t!==void 0,l=t===null,c=t===t,u=_N(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!u&&e<t||u&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var Hz=Wz,Uz=Hz;function zz(e,t,r){for(var n=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++n<o;){var c=Uz(s[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Vz=zz,gp=x0,Yz=Xm,qz=Zm,Kz=$z,Gz=Bz,Qz=Km,Xz=Vz,Jz=Jm,Zz=An;function eV(e,t,r){t.length?t=gp(t,function(i){return Zz(i)?function(o){return Yz(o,i.length===1?i[0]:i)}:i}):t=[Jz];var n=-1;t=gp(t,Qz(qz));var s=Kz(e,function(i,o,l){var c=gp(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return Gz(s,function(i,o){return Xz(i,o,r)})}var tV=eV;function rV(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var nV=rV,sV=nV,PN=Math.max;function aV(e,t,r){return t=PN(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=PN(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=n[s];return l[t]=r(o),sV(e,this,l)}}var LD=aV;function iV(e){return function(){return e}}var oV=iV,lV=zi,cV=function(){try{var e=lV(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$D=cV,uV=oV,MN=$D,dV=Jm,fV=MN?function(e,t){return MN(e,"toString",{configurable:!0,enumerable:!1,value:uV(t),writable:!0})}:dV,mV=fV,hV=800,pV=16,gV=Date.now;function yV(e){var t=0,r=0;return function(){var n=gV(),s=pV-(n-r);if(r=n,s>0){if(++t>=hV)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var xV=yV,vV=mV,bV=xV,wV=bV(vV),FD=wV,NV=Jm,jV=LD,SV=FD;function kV(e,t){return SV(jV(e,t,NV),e+"")}var BD=kV,DV=ID,CV=tV,EV=BD,RN=Wm,TV=EV(function(e,t){if(e==null)return[];var r=t.length;return r>1&&RN(e,t[0],t[1])?t=[]:r>2&&RN(t[0],t[1],t[2])&&(t=[t[0]]),CV(e,DV(t,1),[])}),AV=TV;const _V=Wr(AV);function WD(e){return Ik(e)||Zk(e)||Lx(e)||Lk()}function PV(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var MV=PV,RV=ua,OV=h0,IV=MV,LV=Object.prototype,$V=LV.hasOwnProperty;function FV(e){if(!RV(e))return IV(e);var t=OV(e),r=[];for(var n in e)n=="constructor"&&(t||!$V.call(e,n))||r.push(n);return r}var BV=FV,WV=SD,HV=BV,UV=wu;function zV(e){return UV(e)?WV(e,!0):HV(e)}var eh=zV,VV=BD,YV=bu,qV=Wm,KV=eh,HD=Object.prototype,GV=HD.hasOwnProperty,QV=VV(function(e,t){e=Object(e);var r=-1,n=t.length,s=n>2?t[2]:void 0;for(s&&qV(t[0],t[1],s)&&(n=1);++r<n;)for(var i=t[r],o=KV(i),l=-1,c=o.length;++l<c;){var u=o[l],d=e[u];(d===void 0||YV(d,HD[u])&&!GV.call(e,u))&&(e[u]=i[u])}return e}),XV=QV;const JV=Wr(XV);var ON=$D;function ZV(e,t,r){t=="__proto__"&&ON?ON(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var b0=ZV,eY=b0,tY=v0,rY=Zm;function nY(e,t){var r={};return t=rY(t),tY(e,function(n,s,i){eY(r,s,t(n,s,i))}),r}var sY=nY;const aY=Wr(sY);function iY(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var UD=iY,oY=b0,lY=bu,cY=Object.prototype,uY=cY.hasOwnProperty;function dY(e,t,r){var n=e[t];(!(uY.call(e,t)&&lY(n,r))||r===void 0&&!(t in e))&&oY(e,t,r)}var zD=dY,fY=zD,mY=b0;function hY(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var l=t[i],c=n?n(r[l],e[l],l,r,e):void 0;c===void 0&&(c=e[l]),s?mY(r,l,c):fY(r,l,c)}return r}var Eu=hY,pY=Eu,gY=Du;function yY(e,t){return e&&pY(t,gY(t),e)}var xY=yY,vY=Eu,bY=eh;function wY(e,t){return e&&vY(t,bY(t),e)}var NY=wY,qf={exports:{}};qf.exports;(function(e,t){var r=As,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(u,d){if(d)return u.slice();var f=u.length,m=l?l(f):new u.constructor(f);return u.copy(m),m}e.exports=c})(qf,qf.exports);var jY=qf.exports;function SY(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var kY=SY,DY=Eu,CY=u0;function EY(e,t){return DY(e,CY(e),t)}var TY=EY,AY=kD,_Y=AY(Object.getPrototypeOf,Object),th=_Y,PY=c0,MY=th,RY=u0,OY=ND,IY=Object.getOwnPropertySymbols,LY=IY?function(e){for(var t=[];e;)PY(t,RY(e)),e=MY(e);return t}:OY,VD=LY,$Y=Eu,FY=VD;function BY(e,t){return $Y(e,FY(e),t)}var WY=BY,HY=wD,UY=VD,zY=eh;function VY(e){return HY(e,zY,UY)}var YD=VY,YY=Object.prototype,qY=YY.hasOwnProperty;function KY(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&qY.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var GY=KY,IN=bD;function QY(e){var t=new e.constructor(e.byteLength);return new IN(t).set(new IN(e)),t}var w0=QY,XY=w0;function JY(e,t){var r=t?XY(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ZY=JY,eq=/\w*$/;function tq(e){var t=new e.constructor(e.source,eq.exec(e));return t.lastIndex=e.lastIndex,t}var rq=tq,LN=ol,$N=LN?LN.prototype:void 0,FN=$N?$N.valueOf:void 0;function nq(e){return FN?Object(FN.call(e)):{}}var sq=nq,aq=w0;function iq(e,t){var r=t?aq(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var oq=iq,lq=w0,cq=ZY,uq=rq,dq=sq,fq=oq,mq="[object Boolean]",hq="[object Date]",pq="[object Map]",gq="[object Number]",yq="[object RegExp]",xq="[object Set]",vq="[object String]",bq="[object Symbol]",wq="[object ArrayBuffer]",Nq="[object DataView]",jq="[object Float32Array]",Sq="[object Float64Array]",kq="[object Int8Array]",Dq="[object Int16Array]",Cq="[object Int32Array]",Eq="[object Uint8Array]",Tq="[object Uint8ClampedArray]",Aq="[object Uint16Array]",_q="[object Uint32Array]";function Pq(e,t,r){var n=e.constructor;switch(t){case wq:return lq(e);case mq:case hq:return new n(+e);case Nq:return cq(e,r);case jq:case Sq:case kq:case Dq:case Cq:case Eq:case Tq:case Aq:case _q:return fq(e,r);case pq:return new n;case gq:case vq:return new n(e);case yq:return uq(e);case xq:return new n;case bq:return dq(e)}}var Mq=Pq,Rq=ua,BN=Object.create,Oq=function(){function e(){}return function(t){if(!Rq(t))return{};if(BN)return BN(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),qD=Oq,Iq=qD,Lq=th,$q=h0;function Fq(e){return typeof e.constructor=="function"&&!$q(e)?Iq(Lq(e)):{}}var Bq=Fq,Wq=Gm,Hq=ri,Uq="[object Map]";function zq(e){return Hq(e)&&Wq(e)==Uq}var Vq=zq,Yq=Vq,qq=Km,WN=f0,HN=WN&&WN.isMap,Kq=HN?qq(HN):Yq,Gq=Kq,Qq=Gm,Xq=ri,Jq="[object Set]";function Zq(e){return Xq(e)&&Qq(e)==Jq}var eK=Zq,tK=eK,rK=Km,UN=f0,zN=UN&&UN.isSet,nK=zN?rK(zN):tK,sK=nK,aK=l0,iK=UD,oK=zD,lK=xY,cK=NY,uK=jY,dK=kY,fK=TY,mK=WY,hK=DD,pK=YD,gK=Gm,yK=GY,xK=Mq,vK=Bq,bK=An,wK=qm,NK=Gq,jK=ua,SK=sK,kK=Du,DK=eh,CK=1,EK=2,TK=4,KD="[object Arguments]",AK="[object Array]",_K="[object Boolean]",PK="[object Date]",MK="[object Error]",GD="[object Function]",RK="[object GeneratorFunction]",OK="[object Map]",IK="[object Number]",QD="[object Object]",LK="[object RegExp]",$K="[object Set]",FK="[object String]",BK="[object Symbol]",WK="[object WeakMap]",HK="[object ArrayBuffer]",UK="[object DataView]",zK="[object Float32Array]",VK="[object Float64Array]",YK="[object Int8Array]",qK="[object Int16Array]",KK="[object Int32Array]",GK="[object Uint8Array]",QK="[object Uint8ClampedArray]",XK="[object Uint16Array]",JK="[object Uint32Array]",Nt={};Nt[KD]=Nt[AK]=Nt[HK]=Nt[UK]=Nt[_K]=Nt[PK]=Nt[zK]=Nt[VK]=Nt[YK]=Nt[qK]=Nt[KK]=Nt[OK]=Nt[IK]=Nt[QD]=Nt[LK]=Nt[$K]=Nt[FK]=Nt[BK]=Nt[GK]=Nt[QK]=Nt[XK]=Nt[JK]=!0;Nt[MK]=Nt[GD]=Nt[WK]=!1;function Qd(e,t,r,n,s,i){var o,l=t&CK,c=t&EK,u=t&TK;if(r&&(o=s?r(e,n,s,i):r(e)),o!==void 0)return o;if(!jK(e))return e;var d=bK(e);if(d){if(o=yK(e),!l)return dK(e,o)}else{var f=gK(e),m=f==GD||f==RK;if(wK(e))return uK(e,l);if(f==QD||f==KD||m&&!s){if(o=c||m?{}:vK(e),!l)return c?mK(e,cK(o,e)):fK(e,lK(o,e))}else{if(!Nt[f])return s?e:{};o=xK(e,f,l)}}i||(i=new aK);var y=i.get(e);if(y)return y;i.set(e,o),SK(e)?e.forEach(function(k){o.add(Qd(k,t,r,k,e,i))}):NK(e)&&e.forEach(function(k,h){o.set(h,Qd(k,t,r,h,e,i))});var j=u?c?pK:hK:c?DK:kK,p=d?void 0:j(e);return iK(p||e,function(k,h){p&&(h=k,k=e[h]),oK(o,h,Qd(k,t,r,h,e,i))}),o}var ZK=Qd;function eG(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var tG=eG,rG=Xm,nG=eD;function sG(e,t){return t.length<2?e:rG(e,nG(t,0,-1))}var aG=sG,iG=Qm,oG=tG,lG=aG,cG=Cu;function uG(e,t){return t=iG(t,e),e=lG(e,t),e==null||delete e[cG(oG(t))]}var dG=uG,fG=ll,mG=th,hG=ri,pG="[object Object]",gG=Function.prototype,yG=Object.prototype,XD=gG.toString,xG=yG.hasOwnProperty,vG=XD.call(Object);function bG(e){if(!hG(e)||fG(e)!=pG)return!1;var t=mG(e);if(t===null)return!0;var r=xG.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&XD.call(r)==vG}var wG=bG,NG=wG;function jG(e){return NG(e)?void 0:e}var SG=jG,kG=ID;function DG(e){var t=e==null?0:e.length;return t?kG(e,1):[]}var CG=DG,EG=CG,TG=LD,AG=FD;function _G(e){return AG(TG(e,void 0,EG),e+"")}var PG=_G,MG=x0,RG=ZK,OG=dG,IG=Qm,LG=Eu,$G=SG,FG=PG,BG=YD,WG=1,HG=2,UG=4,zG=FG(function(e,t){var r={};if(e==null)return r;var n=!1;t=MG(t,function(i){return i=IG(i,e),n||(n=i.length>1),i}),LG(e,BG(e),r),n&&(r=RG(r,WG|HG|UG,$G));for(var s=t.length;s--;)OG(r,t[s]);return r}),VG=zG;const YG=Wr(VG);var qG=UD,KG=qD,GG=v0,QG=Zm,XG=th,JG=An,ZG=qm,eQ=Vx,tQ=ua,rQ=m0;function nQ(e,t,r){var n=JG(e),s=n||ZG(e)||rQ(e);if(t=QG(t),r==null){var i=e&&e.constructor;s?r=n?new i:[]:tQ(e)?r=eQ(i)?KG(XG(e)):{}:r={}}return(s?qG:GG)(e,function(o,l,c){return t(r,o,l,c)}),r}var sQ=nQ;const aQ=Wr(sQ);var iQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nn,function(){return function(r,n,s){n.prototype.isBetween=function(i,o,l,c){var u=s(i),d=s(o),f=(c=c||"()")[0]==="(",m=c[1]===")";return(f?this.isAfter(u,l):!this.isBefore(u,l))&&(m?this.isBefore(d,l):!this.isAfter(d,l))||(f?this.isBefore(u,l):!this.isAfter(u,l))&&(m?this.isAfter(d,l):!this.isBefore(d,l))}}})})(iQ);var oQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nn,function(){return function(r,n){n.prototype.isSameOrAfter=function(s,i){return this.isSame(s,i)||this.isAfter(s,i)}}})})(oQ);var lQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nn,function(){return function(r,n){n.prototype.isSameOrBefore=function(s,i){return this.isSame(s,i)||this.isBefore(s,i)}}})})(lQ);var cQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nn,function(){return function(r,n,s){var i=n.prototype,o=function(f){return f&&(f.indexOf?f:f.s)},l=function(f,m,y,j,p){var k=f.name?f:f.$locale(),h=o(k[m]),v=o(k[y]),S=h||v.map(function(T){return T.slice(0,j)});if(!p)return S;var x=k.weekStart;return S.map(function(T,E){return S[(E+(x||0))%7]})},c=function(){return s.Ls[s.locale()]},u=function(f,m){return f.formats[m]||function(y){return y.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(j,p,k){return p||k.slice(1)})}(f.formats[m.toUpperCase()])},d=function(){var f=this;return{months:function(m){return m?m.format("MMMM"):l(f,"months")},monthsShort:function(m){return m?m.format("MMM"):l(f,"monthsShort","months",3)},firstDayOfWeek:function(){return f.$locale().weekStart||0},weekdays:function(m){return m?m.format("dddd"):l(f,"weekdays")},weekdaysMin:function(m){return m?m.format("dd"):l(f,"weekdaysMin","weekdays",2)},weekdaysShort:function(m){return m?m.format("ddd"):l(f,"weekdaysShort","weekdays",3)},longDateFormat:function(m){return u(f.$locale(),m)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return d.bind(this)()},s.localeData=function(){var f=c();return{firstDayOfWeek:function(){return f.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(m){return u(f,m)},meridiem:f.meridiem,ordinal:f.ordinal}},s.months=function(){return l(c(),"months")},s.monthsShort=function(){return l(c(),"monthsShort","months",3)},s.weekdays=function(f){return l(c(),"weekdays",null,null,f)},s.weekdaysShort=function(f){return l(c(),"weekdaysShort","weekdays",3,f)},s.weekdaysMin=function(f){return l(c(),"weekdaysMin","weekdays",2,f)}}})})(cQ);var uQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nn,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,s,i){var o=s.prototype,l=o.format;i.en.formats=r,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var u=this.$locale().formats,d=function(f,m){return f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(y,j,p){var k=p&&p.toUpperCase();return j||m[p]||r[p]||m[k].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(h,v,S){return v||S.slice(1)})})}(c,u===void 0?{}:u);return l.call(this,d)}}})})(uQ);var dQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nn,function(){return function(r,n,s){var i=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(d){return d}))[0];for(var u=1;u<l.length;u+=1)l[u].isValid()&&!l[u][o](c)||(c=l[u]);return c};s.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},s.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(dQ);var fQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nn,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(p){var k={date:p,utc:!0,args:arguments};return new o(k)},c.utc=function(p){var k=l(this.toDate(),{locale:this.$L,utc:!0});return p?k.add(this.utcOffset(),r):k},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),u.call(this,p)};var d=c.init;c.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else d.call(this)};var f=c.utcOffset;c.utcOffset=function(p,k){var h=this.$utils().u;if(h(p))return this.$u?0:h(this.$offset)?f.call(this):this.$offset;if(typeof p=="string"&&(p=function(T){T===void 0&&(T="");var E=T.match(n);if(!E)return null;var _=(""+E[0]).match(s)||["-",0,0],M=_[0],O=60*+_[1]+ +_[2];return O===0?0:M==="+"?O:-O}(p),p===null))return this;var v=Math.abs(p)<=16?60*p:p;if(v===0)return this.utc(k);var S=this.clone();if(k)return S.$offset=v,S.$u=!1,S;var x=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(S=this.local().add(v+x,r)).$offset=v,S.$x.$localOffset=x,S};var m=c.format;c.format=function(p){var k=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return m.call(this,k)},c.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var y=c.toDate;c.toDate=function(p){return p==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():y.call(this)};var j=c.diff;c.diff=function(p,k,h){if(p&&this.$u===p.$u)return j.call(this,p,k,h);var v=this.local(),S=l(p).local();return j.call(v,S,k,h)}}})})(fQ);var mQ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Nn,function(){return function(r,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(mQ);function ls(e){return e.children}var tn={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},$r={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},VN=Object.keys($r).map(function(e){return $r[e]});Pe.oneOfType([Pe.string,Pe.func]);Pe.any;Pe.func;Pe.oneOfType([Pe.arrayOf(Pe.oneOf(VN)),Pe.objectOf(function(e,t){var r=VN.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return Pe.elementType.apply(Pe,[e,t].concat(s))})]);Pe.oneOfType([Pe.oneOf(["overlap","no-overlap"]),Pe.func]);var YN={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function JD(e,t){var r=br(e,"month");return br(r,"week",t.startOfWeek())}function ZD(e,t){var r=Wf(e,"month");return Wf(r,"week",t.startOfWeek())}function hQ(e,t){for(var r=JD(e,t),n=ZD(e,t),s=[];al(r,n,"day");)s.push(r),r=Qn(r,1,"day");return s}function pQ(e,t){var r=br(e,t);return xu(r,e)?r:Qn(r,1,t)}function gQ(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=e,s=[];al(n,t,r);)s.push(n),n=Qn(n,1,r);return s}function yQ(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=br(e,"day"),e=Wc(e,Wc(t)),e=zo(e,zo(t)),e=Bc(e,Bc(t)),Fc(e,Fc(t)))}function qN(e){return Wc(e)===0&&zo(e)===0&&Bc(e)===0&&Fc(e)===0}function xQ(e,t,r,n){return r==="day"&&(r="date"),Math.abs(Tw[r](e,void 0,n)-Tw[r](t,void 0,n))}function N0(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+br(e,r)/YN[r]-+br(t,r)/YN[r]))}var vQ=Pe.oneOfType([Pe.string,Pe.func]);function bQ(e,t,r,n,s){var i=typeof n=="function"?n(r,s,e):t.call(e,r,n,s);return Mc(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function wQ(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function j0(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function NQ(e,t){return N0(e,t,"minutes")+j0(e,t)}function jQ(e){var t=br(e,"day");return N0(t,e,"minutes")+j0(t,e)}function SQ(e,t){return zx(e,t,"day")}function kQ(e,t,r){var n=xu(e,t,"minutes");return n?vu(t,r,"minutes"):Bm(t,r,"minutes")}function ly(e,t){return xQ(e,t,"day")}function DQ(e){var t=e.evtA,r=t.start,n=t.end,s=t.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,u=+br(r,"day")-+br(o,"day"),d=ly(r,n),f=ly(o,l);return u||f-d||!!c-!!s||+r-+o||+n-+l}function CQ(e){var t=e.event,r=t.start,n=t.end,s=e.range,i=s.start,o=s.end,l=br(r,"day"),c=al(l,o,"day"),u=Ux(l,n,"minutes"),d=u?Bm(n,i,"minutes"):vu(n,i,"minutes");return c&&d}function EQ(e,t){return xu(e,t,"day")}function TQ(e,t){return qN(e)&&qN(t)}var AQ=lr(function e(t){var r=this;or(this,e),Mc(typeof t.format=="function","date localizer `format(..)` must be a function"),Mc(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||vQ,this.formats=t.formats,this.format=function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return bQ.apply(void 0,[r,t.format].concat(s))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||yQ,this.inRange=t.inRange||Gk,this.lt=t.lt||zx,this.lte=t.lte||al,this.gt=t.gt||Bm,this.gte=t.gte||vu,this.eq=t.eq||xu,this.neq=t.neq||Ux,this.startOf=t.startOf||br,this.endOf=t.endOf||Wf,this.add=t.add||Qn,this.range=t.range||gQ,this.diff=t.diff||N0,this.ceil=t.ceil||pQ,this.min=t.min||qk,this.max=t.max||Kk,this.minutes=t.minutes||zo,this.daySpan=t.daySpan||ly,this.firstVisibleDay=t.firstVisibleDay||JD,this.lastVisibleDay=t.lastVisibleDay||ZD,this.visibleDays=t.visibleDays||hQ,this.getSlotDate=t.getSlotDate||wQ,this.getTimezoneOffset=t.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||j0,this.getTotalMin=t.getTotalMin||NQ,this.getMinutesFromMidnight=t.getMinutesFromMidnight||jQ,this.continuesPrior=t.continuesPrior||SQ,this.continuesAfter=t.continuesAfter||kQ,this.sortEvents=t.sortEvents||DQ,this.inEventRange=t.inEventRange||CQ,this.isSameDate=t.isSameDate||EQ,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||TQ,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function _Q(e,t,r,n){var s=wt(wt({},e.formats),r);return wt(wt({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,l){return e.format(o,s[l]||l,t)}})}var PQ=function(e){function t(){var r;or(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Pr(this,t,[].concat(s)),r.navigate=function(o){r.props.onNavigate(o)},r.view=function(o){r.props.onView(o)},r}return _r(t,e),lr(t,[{key:"render",value:function(){var n=this.props,s=n.localizer.messages,i=n.label;return z.createElement("div",{className:"rbc-toolbar"},z.createElement("span",{className:"rbc-btn-group"},z.createElement("button",{type:"button",onClick:this.navigate.bind(null,tn.TODAY)},s.today),z.createElement("button",{type:"button",onClick:this.navigate.bind(null,tn.PREVIOUS)},s.previous),z.createElement("button",{type:"button",onClick:this.navigate.bind(null,tn.NEXT)},s.next)),z.createElement("span",{className:"rbc-toolbar-label"},i),z.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(n){var s=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(l){return z.createElement("button",{type:"button",key:l,className:zt({"rbc-active":o===l}),onClick:s.view.bind(null,l)},n[l])})}}])}(z.Component);function Dt(e,t){e&&e.apply(null,[].concat(t))}var MQ={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function RQ(e){return wt(wt({},MQ),e)}function OQ(e){var t=e.ref,r=e.callback;b.useEffect(function(){var n=function(i){t.current&&!t.current.contains(i.target)&&r()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[t,r])}var IQ=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],eC=function(e){function t(){return or(this,t),Pr(this,t,arguments)}return _r(t,e),lr(t,[{key:"render",value:function(){var n=this.props,s=n.style,i=n.className,o=n.event,l=n.selected,c=n.isAllDay,u=n.onSelect,d=n.onDoubleClick,f=n.onKeyPress,m=n.localizer,y=n.continuesPrior,j=n.continuesAfter,p=n.accessors,k=n.getters,h=n.children,v=n.components,S=v.event,x=v.eventWrapper,T=n.slotStart,E=n.slotEnd,_=Ds(n,IQ);delete _.resizable;var M=p.title(o),O=p.tooltip(o),R=p.end(o),K=p.start(o),Q=p.allDay(o),ne=c||Q||m.diff(K,m.ceil(R,"day"),"day")>1,Z=k.eventProp(o,K,R,l),fe=z.createElement("div",{className:"rbc-event-content",title:O||void 0},S?z.createElement(S,{event:o,continuesPrior:y,continuesAfter:j,title:M,isAllDay:Q,localizer:m,slotStart:T,slotEnd:E}):M);return z.createElement(x,Object.assign({},this.props,{type:"date"}),z.createElement("div",Object.assign({},_,{style:wt(wt({},Z.style),s),className:zt("rbc-event",i,Z.className,{"rbc-selected":l,"rbc-event-allday":ne,"rbc-event-continues-prior":y,"rbc-event-continues-after":j}),onClick:function(xe){return u&&u(o,xe)},onDoubleClick:function(xe){return d&&d(o,xe)},onKeyDown:function(xe){return f&&f(o,xe)}}),typeof h=="function"?h(fe):fe))}}])}(z.Component);function rh(e,t){return!e||t==null?!1:eU(e,t)}function tC(e,t){var r=e.right-e.left,n=r/t;return n}function rC(e,t,r,n){var s=tC(e,n);return r?n-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function LQ(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}function $Q(e,t,r,n,s){var i=-1,o=-1,l=n-1,c=tC(t,n),u=rC(t,r.x,s,n),d=t.top<r.y&&t.bottom>r.y,f=t.top<e.y&&t.bottom>e.y,m=e.y>t.bottom,y=t.top>e.y,j=r.top<t.top&&r.bottom>t.bottom;return j&&(i=0,o=l),d&&(y?(i=0,o=u):m&&(i=u,o=l)),f&&(i=o=s?l-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),d?u<i?i=u:o=u:e.y<r.y?o=l:i=0),{startIdx:i,endIdx:o}}function FQ(e){var t=e.target,r=e.offset,n=e.container,s=e.box,i=Di(t),o=i.top,l=i.left,c=i.width,u=i.height,d=Di(n),f=d.top,m=d.left,y=d.width,j=d.height,p=Di(s),k=p.width,h=p.height,v=f+j,S=m+y,x=o+h,T=l+k,E=r.x,_=r.y,M=x>v?o-h-_:o+_+u,O=T>S?l+E-k+c:l+E;return{topOffset:M,leftOffset:O}}function BQ(e){var t=e.containerRef,r=e.accessors,n=e.getters,s=e.selected,i=e.components,o=e.localizer,l=e.position,c=e.show,u=e.events,d=e.slotStart,f=e.slotEnd,m=e.onSelect,y=e.onDoubleClick,j=e.onKeyPress,p=e.handleDragStart,k=e.popperRef,h=e.target,v=e.offset;OQ({ref:k,callback:c}),b.useLayoutEffect(function(){var T=FQ({target:h,offset:v,container:t.current,box:k.current}),E=T.topOffset,_=T.leftOffset;k.current.style.top="".concat(E,"px"),k.current.style.left="".concat(_,"px")},[v.x,v.y,h]);var S=l.width,x={minWidth:S+S/2};return z.createElement("div",{style:x,className:"rbc-overlay",ref:k},z.createElement("div",{className:"rbc-overlay-header"},o.format(d,"dayHeaderFormat")),u.map(function(T,E){return z.createElement(eC,{key:E,type:"popup",localizer:o,event:T,getters:n,onSelect:m,accessors:r,components:i,onDoubleClick:y,onKeyPress:j,continuesPrior:o.lt(r.end(T),d,"day"),continuesAfter:o.gte(r.start(T),f,"day"),slotStart:d,slotEnd:f,selected:rh(T,s),draggable:!0,onDragStart:function(){return p(T)},onDragEnd:function(){return c()}})}))}var nC=z.forwardRef(function(e,t){return z.createElement(BQ,Object.assign({},e,{popperRef:t}))});nC.propTypes={accessors:Pe.object.isRequired,getters:Pe.object.isRequired,selected:Pe.object,components:Pe.object.isRequired,localizer:Pe.object.isRequired,position:Pe.object.isRequired,show:Pe.func.isRequired,events:Pe.array.isRequired,slotStart:Pe.instanceOf(Date).isRequired,slotEnd:Pe.instanceOf(Date),onSelect:Pe.func,onDoubleClick:Pe.func,onKeyPress:Pe.func,handleDragStart:Pe.func,style:Pe.object,offset:Pe.shape({x:Pe.number,y:Pe.number})};function WQ(e){var t=e.containerRef,r=e.popupOffset,n=r===void 0?5:r,s=e.overlay,i=e.accessors,o=e.localizer,l=e.components,c=e.getters,u=e.selected,d=e.handleSelectEvent,f=e.handleDoubleClickEvent,m=e.handleKeyPressEvent,y=e.handleDragStart,j=e.onHide,p=e.overlayDisplay,k=b.useRef(null);if(!s.position)return null;var h=n;isNaN(n)||(h={x:n,y:n});var v=s.position,S=s.events,x=s.date,T=s.end;return z.createElement(a0,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:j,target:s.target},function(E){var _=E.props;return z.createElement(nC,Object.assign({},_,{containerRef:t,ref:k,target:s.target,offset:h,accessors:i,getters:c,selected:u,components:l,localizer:o,position:v,show:p,events:S,slotStart:x,slotEnd:T,onSelect:d,onDoubleClick:f,onKeyPress:m,handleDragStart:y}))})}var S0=z.forwardRef(function(e,t){return z.createElement(WQ,Object.assign({},e,{containerRef:t}))});S0.propTypes={popupOffset:Pe.oneOfType([Pe.number,Pe.shape({x:Pe.number,y:Pe.number})]),overlay:Pe.shape({position:Pe.object,events:Pe.array,date:Pe.instanceOf(Date),end:Pe.instanceOf(Date)}),accessors:Pe.object.isRequired,localizer:Pe.object.isRequired,components:Pe.object.isRequired,getters:Pe.object.isRequired,selected:Pe.object,handleSelectEvent:Pe.func,handleDoubleClickEvent:Pe.func,handleKeyPressEvent:Pe.func,handleDragStart:Pe.func,onHide:Pe.func,overlayDisplay:Pe.func};function kr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Vl(r,e,t,{passive:!1})}function HQ(e,t,r){return!e||Hc(e,document.elementFromPoint(t,r))}function UQ(e,t){var r=t.clientX,n=t.clientY,s=document.elementFromPoint(r,n);return TD(s,".rbc-event",e)}function zQ(e,t){var r=t.clientX,n=t.clientY,s=document.elementFromPoint(r,n);return TD(s,".rbc-show-more",e)}function Kf(e,t){return!!UQ(e,t)}function VQ(e,t){return!!zQ(e,t)}function Ol(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var KN=5,YQ=250,sC=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.global,s=n===void 0?!1:n,i=r.longPressThreshold,o=i===void 0?250:i,l=r.validContainers,c=l===void 0?[]:l;or(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=kr("touchmove",function(){},window),this._removeKeyDownListener=kr("keydown",this._keyListener),this._removeKeyUpListener=kr("keyup",this._keyListener),this._removeDropFromOutsideListener=kr("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=kr("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return lr(e,[{key:"on",value:function(r,n){var s=this._listeners[r]||(this._listeners[r]=[]);return s.push(n),{remove:function(){var o=s.indexOf(n);o!==-1&&s.splice(o,1)}}}},{key:"emit",value:function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];var o,l=this._listeners[r]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,s))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var n=this._selectRect;return!n||!this.selecting?!1:GN(n,Wi(r))}},{key:"filter",value:function(r){var n=this._selectRect;return!n||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,n){var s=this,i=null,o=null,l=null,c=function(m){i=setTimeout(function(){d(),r(m)},s.longPressThreshold),o=kr("touchmove",function(){return d()}),l=kr("touchend",function(){return d()})},u=kr("touchstart",c),d=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return n&&c(n),function(){d(),u()}}},{key:"_addInitialEventListener",value:function(){var r=this,n=kr("mousedown",function(i){r._removeInitialEventListener(),r._handleInitialEvent(i),r._removeInitialEventListener=kr("mousedown",r._handleInitialEvent)}),s=kr("touchstart",function(i){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,i)});this._removeInitialEventListener=function(){n(),s()}}},{key:"_dropFromOutsideListener",value:function(r){var n=Ol(r),s=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY;this.emit("dropFromOutside",{x:s,y:i,clientX:o,clientY:l}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var n=Ol(r),s=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY;this.emit("dragOverFromOutside",{x:s,y:i,clientX:o,clientY:l}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var n=Ol(r),s=n.clientX,i=n.clientY,o=n.pageX,l=n.pageY,c=this.container(),u,d;if(!(r.which===3||r.button===2||!HQ(c,s,i))){if(!this.globalMouse&&c&&!Hc(c,r.target)){var f=qQ(0),m=f.top,y=f.left,j=f.bottom,p=f.right;if(d=Wi(c),u=GN({top:d.top-m,left:d.left-y,bottom:d.bottom+j,right:d.right+p},{top:l,left:o}),!u)return}var k=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:o,y:l,clientX:s,clientY:i});if(k!==!1)switch(r.type){case"mousedown":this._removeEndListener=kr("mouseup",this._handleTerminatingEvent),this._onEscListener=kr("keydown",this._handleTerminatingEvent),this._removeMoveListener=kr("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=kr("touchend",this._handleTerminatingEvent),this._removeMoveListener=kr("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var n=r.target,s=this.validContainers;return!s||!s.length||!n?!0:s.some(function(i){return!!n.closest(i)})}},{key:"_handleTerminatingEvent",value:function(r){var n=this.selecting,s=this._selectRect;if(!n&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var i=!this.container||Hc(this.container(),r.target),o=this._isWithinValidContainer(r);return r.key==="Escape"||!o?this.emit("reset"):!n&&i?this._handleClickEvent(r):n?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var n=Ol(r),s=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<YQ?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:s,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,s=n.x,i=n.y,o=Ol(r),l=o.pageX,c=o.pageY,u=Math.abs(s-l),d=Math.abs(i-c),f=Math.min(l,s),m=Math.min(c,i),y=this.selecting,j=this.isClick(l,c);j&&!y&&!(u||d)||(!y&&!j&&this.emit("selectStart",this._initialEventData),j||(this.selecting=!0,this._selectRect={top:m,left:f,x:l,y:c,right:f+u,bottom:m+d},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,n){var s=this._initialEventData,i=s.x,o=s.y,l=s.isTouch;return!l&&Math.abs(r-i)<=KN&&Math.abs(n-o)<=KN}}])}();function qQ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Gn(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function GN(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Wi(e),s=n.top,i=n.left,o=n.right,l=o===void 0?i:o,c=n.bottom,u=c===void 0?s:c,d=Wi(t),f=d.top,m=d.left,y=d.right,j=y===void 0?m:y,p=d.bottom,k=p===void 0?f:p;return!(u-r<f||s+r>k||l-r<m||i+r>j)}function Wi(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+QN("left"),n=t.top+QN("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function QN(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var KQ=function(e){function t(r,n){var s;return or(this,t),s=Pr(this,t,[r,n]),s.state={selecting:!1},s.containerRef=b.createRef(),s}return _r(t,e),lr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,s=n.range,i=n.getNow,o=n.getters,l=n.date,c=n.components.dateCellWrapper,u=n.localizer,d=this.state,f=d.selecting,m=d.startIdx,y=d.endIdx,j=i();return z.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(p,k){var h=f&&k>=m&&k<=y,v=o.dayProp(p),S=v.className,x=v.style;return z.createElement(c,{key:k,value:p,range:s},z.createElement("div",{style:x,className:zt("rbc-day-bg",S,h&&"rbc-selected-cell",u.isSameDate(p,j)&&"rbc-today",l&&u.neq(l,p,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,s=this.containerRef.current,i=this._selector=new sC(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,u){if(!Kf(s,c)&&!VQ(s,c)){var d=Wi(s),f=n.props,m=f.range,y=f.rtl;if(LQ(d,c)){var j=rC(d,c.x,y,m.length);n._selectSlot({startIdx:j,endIdx:j,action:u,box:c})}}n._initial={},n.setState({selecting:!1})};i.on("selecting",function(l){var c=n.props,u=c.range,d=c.rtl,f=-1,m=-1;if(n.state.selecting||(Dt(n.props.onSelectStart,[l]),n._initial={x:l.x,y:l.y}),i.isSelected(s)){var y=Wi(s),j=$Q(n._initial,y,l,u.length,d);f=j.startIdx,m=j.endIdx}n.setState({selecting:!0,startIdx:f,endIdx:m})}),i.on("beforeSelect",function(l){if(n.props.selectable==="ignoreEvents")return!Kf(n.containerRef.current,l)}),i.on("click",function(l){return o(l,"click")}),i.on("doubleClick",function(l){return o(l,"doubleClick")}),i.on("select",function(l){n._selectSlot(wt(wt({},n.state),{},{action:"select",bounds:l})),n._initial={},n.setState({selecting:!1}),Dt(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var s=n.endIdx,i=n.startIdx,o=n.action,l=n.bounds,c=n.box;s!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:s,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(z.Component),pn={propTypes:{slotMetrics:Pe.object.isRequired,selected:Pe.object,isAllDay:Pe.bool,accessors:Pe.object.isRequired,localizer:Pe.object.isRequired,components:Pe.object.isRequired,getters:Pe.object.isRequired,onSelect:Pe.func,onDoubleClick:Pe.func,onKeyPress:Pe.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var n=t.selected;t.isAllDay;var s=t.accessors,i=t.getters,o=t.onSelect,l=t.onDoubleClick,c=t.onKeyPress,u=t.localizer,d=t.slotMetrics,f=t.components,m=t.resizable,y=d.continuesPrior(r),j=d.continuesAfter(r);return z.createElement(eC,{event:r,getters:i,localizer:u,accessors:s,components:f,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:y,continuesAfter:j,slotStart:d.first,slotEnd:d.last,selected:rh(r,n),resizable:m})},renderSpan:function(t,r,n){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(r)/t*100+"%";return z.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},s)}},aC=function(e){function t(){return or(this,t),Pr(this,t,arguments)}return _r(t,e),lr(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.segments,o=s.slotMetrics.slots,l=s.className,c=1;return z.createElement("div",{className:zt(l,"rbc-row")},i.reduce(function(u,d,f){var m=d.event,y=d.left,j=d.right,p=d.span,k="_lvl_"+f,h=y-c,v=pn.renderEvent(n.props,m);return h&&u.push(pn.renderSpan(o,h,"".concat(k,"_gap"))),u.push(pn.renderSpan(o,p,k,v)),c=j+1,u},[]))}}])}(z.Component);aC.defaultProps=wt({},pn.defaultProps);function iC(e){var t=e.dateRange,r=e.unit,n=r===void 0?"day":r,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,n)}}function GQ(e,t,r,n){var s=iC({dateRange:t,localizer:n}),i=s.first,o=s.last,l=n.diff(i,o,"day"),c=n.max(n.startOf(r.start(e),"day"),i),u=n.min(n.ceil(r.end(e),"day"),o),d=Z8(t,function(m){return n.isSameDate(m,c)}),f=n.diff(c,u,"day");return f=Math.min(f,l),f=Math.max(f-n.segmentOffset,1),{event:e,span:f,left:d+1,right:Math.max(d+f,1)}}function cy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,n,s,i=[],o=[];for(r=0;r<e.length;r++){for(s=e[r],n=0;n<i.length&&QQ(s,i[n]);n++);n>=t?o.push(s):(i[n]||(i[n]=[])).push(s)}for(r=0;r<i.length;r++)i[r].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function Vc(e,t,r,n,s){var i={start:n.start(e),end:n.end(e)},o={start:t,end:r};return s.inEventRange({event:i,range:o})}function QQ(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function XQ(e,t,r){var n=Kd(e),s=[],i=[];n.forEach(function(c){var u=t.start(c),d=t.end(c);r.daySpan(u,d)>1?s.push(c):i.push(c)});var o=s.sort(function(c,u){return uy(c,u,t,r)}),l=i.sort(function(c,u){return uy(c,u,t,r)});return[].concat(Kd(o),Kd(l))}function uy(e,t,r,n){var s={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},i={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:s,evtB:i})}var dy=function(t,r){return t.left<=r&&t.right>=r},yp=function(t,r){return t.filter(function(n){return dy(n,r)}).map(function(n){return n.event})},oC=function(e){function t(){return or(this,t),Pr(this,t,arguments)}return _r(t,e),lr(t,[{key:"render",value:function(){for(var n=this.props,s=n.segments,i=n.slotMetrics.slots,o=cy(s).levels[0],l=1,c=1,u=[];l<=i;){var d="_lvl_"+l,f=o.filter(function(x){return dy(x,l)})[0]||{},m=f.event,y=f.left,j=f.right,p=f.span;if(!m){var k=this.getHiddenEventsForSlot(s,l);if(k.length>0){var h=l-c;h&&u.push(pn.renderSpan(i,h,d+"_gap")),u.push(pn.renderSpan(i,1,d,this.renderShowMore(s,l))),c=l=l+1;continue}l++;continue}var v=Math.max(0,y-c);if(this.canRenderSlotEvent(y,p)){var S=pn.renderEvent(this.props,m);v&&u.push(pn.renderSpan(i,v,d+"_gap")),u.push(pn.renderSpan(i,p,d,S)),c=l=j+1}else v&&u.push(pn.renderSpan(i,v,d+"_gap")),u.push(pn.renderSpan(i,1,d,this.renderShowMore(s,l))),c=l=l+1}return z.createElement("div",{className:"rbc-row"},u)}},{key:"getHiddenEventsForSlot",value:function(n,s){var i=yp(n,s),o=cy(n).levels[0],l=o.filter(function(c){return dy(c,s)}).map(function(c){return c.event});return i.filter(function(c){return!l.some(function(u){return u===c})})}},{key:"canRenderSlotEvent",value:function(n,s){var i=this.props.segments;return dz(n,n+s).every(function(o){var l=yp(i,o).length;return l===1})}},{key:"renderShowMore",value:function(n,s){var i=this,o=this.props,l=o.localizer,c=o.slotMetrics,u=o.components,d=c.getEventsForSlot(s),f=yp(n,s),m=f.length;if(u!=null&&u.showMore){var y=u.showMore,j=c.getDateForSlot(s-1);return m?z.createElement(y,{localizer:l,slotDate:j,slot:s,count:m,events:d,remainingEvents:f}):!1}return m?z.createElement("button",{type:"button",key:"sm_"+s,className:zt("rbc-button-link","rbc-show-more"),onClick:function(k){return i.showMore(s,k)}},l.messages.showMore(m,f,d)):!1}},{key:"showMore",value:function(n,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(n,s.target)}}])}(z.Component);oC.defaultProps=wt({},pn.defaultProps);var JQ=function(t){var r=t.children;return z.createElement("div",{className:"rbc-row-content-scroll-container"},r)},ZQ=function(t,r){return t.left<=r&&t.right>=r},eX=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function lC(){return RD(function(e){for(var t=e.range,r=e.events,n=e.maxRows,s=e.minRows,i=e.accessors,o=e.localizer,l=iC({dateRange:t,localizer:o}),c=l.first,u=l.last,d=r.map(function(p){return GQ(p,t,i,o)}),f=cy(d,Math.max(n-1,1)),m=f.levels,y=f.extra,j=y.length>0?s-1:s;m.length<j;)m.push([]);return{first:c,last:u,levels:m,extra:y,range:t,slots:t.length,clone:function(k){var h=lC();return h(wt(wt({},e),k))},getDateForSlot:function(k){return t[k]},getSlotForDate:function(k){return t.find(function(h){return o.isSameDate(h,k)})},getEventsForSlot:function(k){return d.filter(function(h){return ZQ(h,k)}).map(function(h){return h.event})},continuesPrior:function(k){return o.continuesPrior(i.start(k),c)},continuesAfter:function(k){var h=i.start(k),v=i.end(k);return o.continuesAfter(h,v,u)}}},eX)}var Yc=function(e){function t(){var r;or(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Pr(this,t,[].concat(s)),r.handleSelectSlot=function(o){var l=r.props,c=l.range,u=l.onSelectSlot;u(c.slice(o.start,o.end+1),o)},r.handleShowMore=function(o,l){var c=r.props,u=c.range,d=c.onShowMore,f=r.slotMetrics(r.props),m=Z$(r.containerRef.current,".rbc-row-bg")[0],y;m&&(y=m.children[o-1]);var j=f.getEventsForSlot(o);d(j,u[o-1],y,o,l)},r.getContainer=function(){var o=r.props.container;return o?o():r.containerRef.current},r.renderHeadingCell=function(o,l){var c=r.props,u=c.renderHeader,d=c.getNow,f=c.localizer;return u({date:o,key:"header_".concat(l),className:zt("rbc-date-cell",f.isSameDate(o,d())&&"rbc-now")})},r.renderDummy=function(){var o=r.props,l=o.className,c=o.range,u=o.renderHeader,d=o.showAllEvents;return z.createElement("div",{className:l,ref:r.containerRef},z.createElement("div",{className:zt("rbc-row-content",d&&"rbc-row-content-scrollable")},u&&z.createElement("div",{className:"rbc-row",ref:r.headingRowRef},c.map(r.renderHeadingCell)),z.createElement("div",{className:"rbc-row",ref:r.eventRowRef},z.createElement("div",{className:"rbc-row-segment"},z.createElement("div",{className:"rbc-event"},z.createElement("div",{className:"rbc-event-content"},""))))))},r.containerRef=b.createRef(),r.headingRowRef=b.createRef(),r.eventRowRef=b.createRef(),r.slotMetrics=lC(),r}return _r(t,e),lr(t,[{key:"getRowLimit",value:function(){var n,s=hp(this.eventRowRef.current),i=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?hp(this.headingRowRef.current):0,o=hp(this.containerRef.current)-i;return Math.max(Math.floor(o/s),1)}},{key:"render",value:function(){var n=this.props,s=n.date,i=n.rtl,o=n.range,l=n.className,c=n.selected,u=n.selectable,d=n.renderForMeasure,f=n.accessors,m=n.getters,y=n.components,j=n.getNow,p=n.renderHeader,k=n.onSelect,h=n.localizer,v=n.onSelectStart,S=n.onSelectEnd,x=n.onDoubleClick,T=n.onKeyPress,E=n.resourceId,_=n.longPressThreshold,M=n.isAllDay,O=n.resizable,R=n.showAllEvents;if(d)return this.renderDummy();var K=this.slotMetrics(this.props),Q=K.levels,ne=K.extra,Z=R?JQ:ls,fe=y.weekWrapper,te={selected:c,accessors:f,getters:m,localizer:h,components:y,onSelect:k,onDoubleClick:x,onKeyPress:T,resourceId:E,slotMetrics:K,resizable:O};return z.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},z.createElement(KQ,{localizer:h,date:s,getNow:j,rtl:i,range:o,selectable:u,container:this.getContainer,getters:m,onSelectStart:v,onSelectEnd:S,onSelectSlot:this.handleSelectSlot,components:y,longPressThreshold:_,resourceId:E}),z.createElement("div",{className:zt("rbc-row-content",R&&"rbc-row-content-scrollable"),role:"row"},p&&z.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),z.createElement(Z,null,z.createElement(fe,Object.assign({isAllDay:M},te,{rtl:this.props.rtl}),Q.map(function(xe,ie){return z.createElement(aC,Object.assign({key:ie,segments:xe},te))}),!!ne.length&&z.createElement(oC,Object.assign({segments:ne,onShowMore:this.handleShowMore},te))))))}}])}(z.Component);Yc.defaultProps={minRows:0,maxRows:1/0};var k0=function(t){var r=t.label;return z.createElement("span",{role:"columnheader","aria-sort":"none"},r)},tX=function(t){var r=t.label,n=t.drilldownView,s=t.onDrillDown;return n?z.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},r):z.createElement("span",null,r)},rX=["date","className"],nX=function(t,r,n,s,i){return t.filter(function(o){return Vc(o,r,n,s,i)})},nh=function(e){function t(){var r;or(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Pr(this,t,[].concat(s)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(o,l){var c=r.props,u=c.events,d=c.components,f=c.selectable,m=c.getNow,y=c.selected,j=c.date,p=c.localizer,k=c.longPressThreshold,h=c.accessors,v=c.getters,S=c.showAllEvents,x=r.state,T=x.needLimitMeasure,E=x.rowLimit,_=nX(Kd(u),o[0],o[o.length-1],h,p),M=XQ(_,h,p);return z.createElement(Yc,{key:l,ref:l===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:m,date:j,range:o,events:M,maxRows:S?1/0:E,selected:y,selectable:f,components:d,accessors:h,getters:v,localizer:p,renderHeader:r.readerDateHeading,renderForMeasure:T,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:k,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:S})},r.readerDateHeading=function(o){var l=o.date,c=o.className,u=Ds(o,rX),d=r.props,f=d.date,m=d.getDrilldownView,y=d.localizer,j=y.neq(f,l,"month"),p=y.isSameDate(l,f),k=m(l),h=y.format(l,"dateFormat"),v=r.props.components.dateHeader||tX;return z.createElement("div",Object.assign({},u,{className:zt(c,j&&"rbc-off-range",p&&"rbc-current"),role:"cell"}),z.createElement(v,{label:h,date:l,drilldownView:k,isOffRange:j,onDrillDown:function(x){return r.handleHeadingClick(l,k,x)}}))},r.handleSelectSlot=function(o,l){r._pendingSelection=r._pendingSelection.concat(o),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(l)})},r.handleHeadingClick=function(o,l,c){c.preventDefault(),r.clearSelection(),Dt(r.props.onDrillDown,[o,l])},r.handleSelectEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onKeyPressEvent,l)},r.handleShowMore=function(o,l,c,u,d){var f=r.props,m=f.popup,y=f.onDrillDown,j=f.onShowMore,p=f.getDrilldownView,k=f.doShowMoreDrillDown;if(r.clearSelection(),m){var h=lD(c,r.containerRef.current);r.setState({overlay:{date:l,events:o,position:h,target:d}})}else k&&Dt(y,[l,p(l)||$r.DAY]);Dt(j,[o,l,u])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=b.createRef(),r.slotRowRef=b.createRef(),r._bgRows=[],r._pendingSelection=[],r}return _r(t,e),lr(t,[{key:"componentDidMount",value:function(){var n=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||cD(function(){s=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,s=n.date,i=n.localizer,o=n.className,l=i.visibleDays(s,i),c=L$(l,7);return this._weekCount=c.length,z.createElement("div",{className:zt("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},z.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var s=this.props,i=s.localizer,o=s.components,l=n[0],c=n[n.length-1],u=o.header||k0;return i.range(l,c,"day").map(function(d,f){return z.createElement("div",{key:"header_"+f,className:"rbc-header"},z.createElement(u,{date:d,localizer:i,label:i.format(d,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,s,i=this,o=(n=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,u=l.localizer,d=l.components,f=l.getters,m=l.selected,y=l.popupOffset,j=l.handleDragStart,p=function(){return i.setState({overlay:null})};return z.createElement(S0,{overlay:o,accessors:c,localizer:u,components:d,getters:f,selected:m,popupOffset:y,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:j,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:p})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(l,c){return+l-+c});var i=new Date(s[0]),o=new Date(s[s.length-1]);o.setDate(s[s.length-1].getDate()+1),Dt(this.props.onSelectSlot,{slots:s,start:i,end:o,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,s){var i=n.date,o=n.localizer;return{date:i,needLimitMeasure:o.neq(i,s.date,"month")}}}])}(z.Component);nh.range=function(e,t){var r=t.localizer,n=r.firstVisibleDay(e,r),s=r.lastVisibleDay(e,r);return{start:n,end:s}};nh.navigate=function(e,t,r){var n=r.localizer;switch(t){case tn.PREVIOUS:return n.add(e,-1,"month");case tn.NEXT:return n.add(e,1,"month");default:return e}};nh.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var XN=function(t){var r=t.min,n=t.max,s=t.step,i=t.slots,o=t.localizer;return"".concat(+o.startOf(r,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(s,"-").concat(i)};function D0(e){for(var t=e.min,r=e.max,n=e.step,s=e.timeslots,i=e.localizer,o=XN({step:n,localizer:i}),l=1+i.getTotalMin(t,r),c=i.getMinutesFromMidnight(t),u=Math.ceil((l-1)/(n*s)),d=u*s,f=new Array(u),m=new Array(d),y=0;y<u;y++){f[y]=new Array(s);for(var j=0;j<s;j++){var p=y*s+j,k=p*n;m[p]=f[y][j]=i.getSlotDate(t,c,k)}}var h=m.length*n;m.push(i.getSlotDate(t,c,h));function v(S){var x=i.diff(t,S,"minutes")+i.getDstOffset(t,S);return Math.min(x,l)}return{groups:f,update:function(x){return XN(x)!==o?D0(x):this},dateIsInGroup:function(x,T){var E=f[T+1];return i.inRange(x,f[T][0],E?E[0]:r,"minutes")},nextSlot:function(x){var T=m[Math.min(m.findIndex(function(E){return E===x||i.eq(E,x)})+1,m.length-1)];return i.eq(T,x)&&(T=i.add(x,n,"minutes")),T},closestSlotToPosition:function(x){var T=Math.min(m.length-1,Math.max(0,Math.floor(x*d)));return m[T]},closestSlotFromPoint:function(x,T){var E=Math.abs(T.top-T.bottom);return this.closestSlotToPosition((x.y-T.top)/E)},closestSlotFromDate:function(x){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(x,t,"minutes"))return m[0];if(i.gt(x,r,"minutes"))return m[m.length-1];var E=i.diff(t,x,"minutes");return m[(E-E%n)/n+T]},startsBeforeDay:function(x){return i.lt(x,t,"day")},startsAfterDay:function(x){return i.gt(x,r,"day")},startsBefore:function(x){return i.lt(i.merge(t,x),t,"minutes")},startsAfter:function(x){return i.gt(i.merge(r,x),r,"minutes")},getRange:function(x,T,E,_){E||(x=i.min(r,i.max(t,x))),_||(T=i.min(r,i.max(t,T)));var M=v(x),O=v(T),R=O>n*d&&!i.eq(r,T)?(M-n)/(n*d)*100:M/(n*d)*100;return{top:R,height:O/(n*d)*100-R,start:v(x),startDate:x,end:v(T),endDate:T}},getCurrentTimePosition:function(x){var T=v(x),E=T/(n*d)*100;return E}}}var sX=function(){function e(t,r){var n=r.accessors,s=r.slotMetrics;or(this,e);var i=s.getRange(n.start(t),n.end(t)),o=i.start,l=i.startDate,c=i.end,u=i.endDate,d=i.top,f=i.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+u,this.top=d,this.height=f,this.data=t}return lr(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(s,i){return Math.max(s,i.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:r;var s=this.row.leaves,i=s.indexOf(this);return i===s.length-1?r:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,n=r.leaves,s=r.xOffset,i=r._width,o=n.indexOf(this)+1;return s+o*i}}])}();function aX(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function iX(e){for(var t=_V(e,["startMs",function(l){return-l.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var s=0;s<t.length;s++){var i=t[s];if(!(n.endMs>i.startMs)){if(s>0){var o=t.splice(s,1)[0];r.push(o)}break}}}return r}function cC(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,s=e.accessors,i=t.map(function(d){return new sX(d,{slotMetrics:n,accessors:s})}),o=iX(i),l=[],c=function(){var f=o[u],m=l.find(function(p){return p.end>f.start||Math.abs(f.start-p.start)<r});if(!m)return f.rows=[],l.push(f),1;f.container=m;for(var y=null,j=m.rows.length-1;!y&&j>=0;j--)aX(m.rows[j],f,r)&&(y=m.rows[j]);y?(y.leaves.push(f),f.row=y):(f.leaves=[],m.rows.push(f))},u=0;u<o.length;u++)c();return o.map(function(d){return{event:d.data,style:{top:d.top,height:d.height,width:d.width,xOffset:Math.max(0,d.xOffset)}}})}function uC(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var s=uC(e.friends[n],t,r);t=t>s?t:s}return t}function oX(e){var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,s=e.accessors,i=cC({events:t,minimumStartDifference:r,slotMetrics:n,accessors:s});i.sort(function(fe,te){return fe=fe.style,te=te.style,fe.top!==te.top?fe.top>te.top?1:-1:fe.height!==te.height?fe.top+fe.height<te.top+te.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var l=0;l<i.length-1;++l)for(var c=i[l],u=c.style.top,d=c.style.top+c.style.height,f=l+1;f<i.length;++f){var m=i[f],y=m.style.top,j=m.style.top+m.style.height;(y>=u&&j<=d||j>u&&j<=d||y>=u&&y<d)&&(c.friends.push(m),m.friends.push(c))}for(var p=0;p<i.length;++p){for(var k=i[p],h=[],v=0;v<100;++v)h.push(1);for(var S=0;S<k.friends.length;++S)k.friends[S].idx!==void 0&&(h[k.friends[S].idx]=0);k.idx=h.indexOf(1)}for(var x=0;x<i.length;++x){var T=0;if(!i[x].size){var E=[],_=uC(i[x],0,E);T=100/(_+1),i[x].size=T;for(var M=0;M<E.length;++M)E[M].size=T}}for(var O=0;O<i.length;++O){var R=i[O];R.style.left=R.idx*R.size;for(var K=0,Q=0;Q<R.friends.length;++Q){var ne=R.friends[Q].idx;K=K>ne?K:ne}K<=R.idx&&(R.size=100-R.idx*R.size);var Z=R.idx===0?0:3;R.style.width="calc(".concat(R.size,"% - ").concat(Z,"px)"),R.style.height="calc(".concat(R.style.height,"% - 2px)"),R.style.xOffset="calc(".concat(R.style.left,"% + ").concat(Z,"px)")}return i}var JN={overlap:cC,"no-overlap":oX};function lX(e){return!!(e&&e.constructor&&e.call&&e.apply)}function cX(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in JN&&(r=JN[t]),lX(r)?r.apply(this,arguments):[]}var dC=function(e){function t(){return or(this,t),Pr(this,t,arguments)}return _r(t,e),lr(t,[{key:"render",value:function(){var n=this.props,s=n.renderSlot,i=n.resource,o=n.group,l=n.getters,c=n.components,u=c===void 0?{}:c,d=u.timeSlotWrapper,f=d===void 0?ls:d,m=l?l.slotGroupProp(o):{};return z.createElement("div",Object.assign({className:"rbc-timeslot-group"},m),o.map(function(y,j){var p=l?l.slotProp(y,i):{};return z.createElement(f,{key:j,value:y,resource:i},z.createElement("div",Object.assign({},p,{className:zt("rbc-time-slot",p.className)}),s&&s(y,j)))}))}}])}(b.Component);function yd(e){return typeof e=="string"?e:e+"%"}function uX(e){var t=e.style,r=e.className,n=e.event,s=e.accessors,i=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,u=e.continuesAfter,d=e.getters,f=e.onClick,m=e.onDoubleClick,y=e.isBackgroundEvent,j=e.onKeyPress,p=e.components,k=p.event,h=p.eventWrapper,v=s.title(n),S=s.tooltip(n),x=s.end(n),T=s.start(n),E=d.eventProp(n,T,x,o),_=[z.createElement("div",{key:"1",className:"rbc-event-label"},l),z.createElement("div",{key:"2",className:"rbc-event-content"},k?z.createElement(k,{event:n,title:v}):v)],M=t.height,O=t.top,R=t.width,K=t.xOffset,Q=wt(wt({},E.style),{},ci({top:yd(O),height:yd(M),width:yd(R)},i?"right":"left",yd(K)));return z.createElement(h,Object.assign({type:"time"},e),z.createElement("div",{role:"button",tabIndex:0,onClick:f,onDoubleClick:m,style:Q,onKeyDown:j,title:S?(typeof l=="string"?l+": ":"")+S:void 0,className:zt(y?"rbc-background-event":"rbc-event",r,E.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":u})},_))}var dX=function(t){var r=t.children,n=t.className,s=t.style,i=t.innerRef;return z.createElement("div",{className:n,style:s,ref:i},r)},fX=z.forwardRef(function(e,t){return z.createElement(dX,Object.assign({},e,{innerRef:t}))}),mX=["dayProp"],hX=["eventContainerWrapper","timeIndicatorWrapper"],fC=function(e){function t(){var r;or(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Pr(this,t,[].concat(s)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,u=r.props,d=u.rtl,f=u.selected,m=u.accessors,y=u.localizer,j=u.getters,p=u.components,k=u.step,h=u.timeslots,v=u.dayLayoutAlgorithm,S=u.resizable,x=r,T=x.slotMetrics,E=y.messages,_=cX({events:l,accessors:m,slotMetrics:T,minimumStartDifference:Math.ceil(k*h/2),dayLayoutAlgorithm:v});return _.map(function(M,O){var R,K=M.event,Q=M.style,ne=m.end(K),Z=m.start(K),fe=(R=m.eventId(K))!==null&&R!==void 0?R:"evt_"+O,te="eventTimeRangeFormat",xe,ie=T.startsBeforeDay(Z),V=T.startsAfterDay(ne);ie?te="eventTimeRangeEndFormat":V&&(te="eventTimeRangeStartFormat"),ie&&V?xe=E.allDay:xe=y.format({start:Z,end:ne},te);var ge=ie||T.startsBefore(Z),G=V||T.startsAfter(ne);return z.createElement(uX,{style:Q,event:K,label:xe,key:fe,getters:j,rtl:d,components:p,continuesPrior:ge,continuesAfter:G,accessors:m,resource:r.props.resource,selected:rh(K,f),onClick:function(L){return r._select(wt(wt(wt({},K),r.props.resource&&{sourceResource:r.props.resource}),c&&{isBackgroundEvent:!0}),L)},onDoubleClick:function(L){return r._doubleClick(K,L)},isBackgroundEvent:c,onKeyPress:function(L){return r._keyPress(K,L)},resizable:S})})},r._selectable=function(){var o=r.containerRef.current,l=r.props,c=l.longPressThreshold,u=l.localizer,d=r._selector=new sC(function(){return o},{longPressThreshold:c}),f=function(p){var k=r.props.onSelecting,h=r.state||{},v=m(p),S=v.startDate,x=v.endDate;k&&(u.eq(h.startDate,S,"minutes")&&u.eq(h.endDate,x,"minutes")||k({start:S,end:x,resourceId:r.props.resource})===!1)||(r.state.start!==v.start||r.state.end!==v.end||r.state.selecting!==v.selecting)&&r.setState(v)},m=function(p){var k=r.slotMetrics.closestSlotFromPoint(p,Wi(o));r.state.selecting||(r._initialSlot=k);var h=r._initialSlot;u.lte(h,k)?k=r.slotMetrics.nextSlot(k):u.gt(h,k)&&(h=r.slotMetrics.nextSlot(h));var v=r.slotMetrics.getRange(u.min(h,k),u.max(h,k));return wt(wt({},v),{},{selecting:!0,top:"".concat(v.top,"%"),height:"".concat(v.height,"%")})},y=function(p,k){if(!Kf(r.containerRef.current,p)){var h=m(p),v=h.startDate,S=h.endDate;r._selectSlot({startDate:v,endDate:S,action:k,box:p})}r.setState({selecting:!1})};d.on("selecting",f),d.on("selectStart",f),d.on("beforeSelect",function(j){if(r.props.selectable==="ignoreEvents")return!Kf(r.containerRef.current,j)}),d.on("click",function(j){return y(j,"click")}),d.on("doubleClick",function(j){return y(j,"doubleClick")}),d.on("select",function(j){r.state.selecting&&(r._selectSlot(wt(wt({},r.state),{},{action:"select",bounds:j})),r.setState({selecting:!1}))}),d.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,u=o.action,d=o.bounds,f=o.box,m=l,y=[];r.props.localizer.lte(m,c);)y.push(m),m=new Date(+m+r.props.step*60*1e3);Dt(r.props.onSelectSlot,{slots:y,start:l,end:c,resourceId:r.props.resource,action:u,bounds:d,box:f})},r._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onSelectEvent,l)},r._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onDoubleClickEvent,l)},r._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onKeyPressEvent,l)},r.slotMetrics=D0(r.props),r.containerRef=b.createRef(),r}return _r(t,e),lr(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,s){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,l=i.isNow,c=i.localizer,u=i.date,d=i.min,f=i.max,m=c.neq(n.getNow(),o(),"minutes");if(n.isNow!==l||m){if(this.clearTimeIndicatorInterval(),l){var y=!m&&c.eq(n.date,u,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(y)}}else l&&(c.neq(n.min,d,"minutes")||c.neq(n.max,f,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,s=n.min,i=n.max,o=n.getNow,l=o();if(l>=s&&l<=i){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,s=n.date,i=n.max,o=n.rtl,l=n.isNow,c=n.resource,u=n.accessors,d=n.localizer,f=n.getters,m=f.dayProp,y=Ds(f,mX),j=n.components,p=j.eventContainerWrapper,k=j.timeIndicatorWrapper,h=Ds(j,hX);this.slotMetrics=this.slotMetrics.update(this.props);var v=this.slotMetrics,S=this.state,x=S.selecting,T=S.top,E=S.height,_=S.startDate,M=S.endDate,O={start:_,end:M},R=m(i,c),K=R.className,Q=R.style,ne={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},Z=h.dayColumnWrapper||fX;return z.createElement(Z,{ref:this.containerRef,date:s,style:Q,className:zt(K,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",x&&"rbc-slot-selecting"),slotMetrics:v,resource:c},v.groups.map(function(fe,te){return z.createElement(dC,{key:te,group:fe,resource:c,getters:y,components:h})}),z.createElement(p,{localizer:d,resource:c,accessors:u,getters:y,components:h,slotMetrics:v},z.createElement("div",{className:zt("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),x&&z.createElement("div",{className:"rbc-slot-selection",style:{top:T,height:E}},z.createElement("span",null,d.format(O,"selectRangeFormat"))),l&&this.intervalTriggered&&z.createElement(k,ne,z.createElement("div",ne)))}}])}(z.Component);fC.defaultProps={dragThroughEvents:!0,timeslots:2};var mC=function(t){var r=t.label;return z.createElement(z.Fragment,null,r)},pX=function(e){function t(){var r;or(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Pr(this,t,[].concat(s)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),Dt(r.props.onDrillDown,[o,l])},r.renderRow=function(o){var l=r.props,c=l.events,u=l.rtl,d=l.selectable,f=l.getNow,m=l.range,y=l.getters,j=l.localizer,p=l.accessors,k=l.components,h=l.resizable,v=p.resourceId(o),S=o?c.filter(function(x){return p.resource(x)===v}):c;return z.createElement(Yc,{isAllDay:!0,rtl:u,getNow:f,minRows:2,maxRows:r.props.allDayMaxRows+1,range:m,events:S,resourceId:v,className:"rbc-allday-cell",selectable:d,selected:r.props.selected,components:k,accessors:p,getters:y,localizer:j,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:h})},r}return _r(t,e),lr(t,[{key:"renderHeaderCells",value:function(n){var s=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,u=i.getters.dayProp,d=i.components.header,f=d===void 0?k0:d,m=c();return n.map(function(y,j){var p=l(y),k=o.format(y,"dayFormat"),h=u(y),v=h.className,S=h.style,x=z.createElement(f,{date:y,label:k,localizer:o});return z.createElement("div",{key:j,style:S,className:zt("rbc-header",v,o.isSameDate(y,m)&&"rbc-today")},p?z.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(E){return s.handleHeaderClick(y,p,E)}},x):z.createElement("span",null,x))})}},{key:"render",value:function(){var n=this,s=this.props,i=s.width,o=s.rtl,l=s.resources,c=s.range,u=s.events,d=s.getNow,f=s.accessors,m=s.selectable,y=s.components,j=s.getters,p=s.scrollRef,k=s.localizer,h=s.isOverflowing,v=s.components,S=v.timeGutterHeader,x=v.resourceHeader,T=x===void 0?mC:x,E=s.resizable,_={};h&&(_[o?"marginLeft":"marginRight"]="".concat(s0()-1,"px"));var M=l.groupEvents(u);return z.createElement("div",{style:_,ref:p,className:zt("rbc-time-header",h&&"rbc-overflowing")},z.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},S&&z.createElement(S,null)),l.map(function(O,R){var K=wn(O,2),Q=K[0],ne=K[1];return z.createElement("div",{className:"rbc-time-header-content",key:Q||R},ne&&z.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(R)},z.createElement("div",{className:"rbc-header"},z.createElement(T,{index:R,label:f.resourceTitle(ne),resource:ne}))),z.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(c)),z.createElement(Yc,{isAllDay:!0,rtl:o,getNow:d,minRows:2,maxRows:n.props.allDayMaxRows+1,range:c,events:M.get(Q)||[],resourceId:ne&&Q,className:"rbc-allday-cell",selectable:m,selected:n.props.selected,components:y,accessors:f,getters:j,localizer:k,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:E}))}))}}])}(z.Component),gX=function(e){function t(){var r;or(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Pr(this,t,[].concat(s)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),Dt(r.props.onDrillDown,[o,l])},r}return _r(t,e),lr(t,[{key:"renderHeaderCells",value:function(n){var s=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,u=i.getters.dayProp,d=i.components,f=d.header,m=f===void 0?k0:f,y=d.resourceHeader,j=y===void 0?mC:y,p=i.resources,k=i.accessors,h=i.events,v=i.rtl,S=i.selectable,x=i.components,T=i.getters,E=i.resizable,_=c(),M=p.groupEvents(h);return n.map(function(O,R){var K=l(O),Q=o.format(O,"dayFormat"),ne=u(O),Z=ne.className,fe=ne.style,te=z.createElement(m,{date:O,label:Q,localizer:o});return z.createElement("div",{key:R,className:"rbc-time-header-content rbc-resource-grouping"},z.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},z.createElement("div",{style:fe,className:zt("rbc-header",Z,o.isSameDate(O,_)&&"rbc-today")},K?z.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(ie){return s.handleHeaderClick(O,K,ie)}},te):z.createElement("span",null,te))),z.createElement("div",{className:"rbc-row"},p.map(function(xe,ie){var V=wn(xe,2),ge=V[0],G=V[1];return z.createElement("div",{key:"resource_".concat(ge,"_").concat(ie),className:zt("rbc-header",Z,o.isSameDate(O,_)&&"rbc-today")},z.createElement(j,{index:ie,label:k.resourceTitle(G),resource:G}))})),z.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},p.map(function(xe,ie){var V=wn(xe,2),ge=V[0],G=V[1],U=(M.get(ge)||[]).filter(function(L){return o.isSameDate(L.start,O)||o.isSameDate(L.end,O)});return z.createElement(Yc,{key:"resource_".concat(ge,"_").concat(ie),isAllDay:!0,rtl:v,getNow:c,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[O],events:U,resourceId:G&&ge,className:"rbc-allday-cell",selectable:S,selected:s.props.selected,components:x,accessors:k,getters:T,localizer:o,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:E})})))})}},{key:"render",value:function(){var n=this.props,s=n.width,i=n.rtl,o=n.range,l=n.scrollRef,c=n.isOverflowing,u=n.components.timeGutterHeader,d={};return c&&(d[i?"marginLeft":"marginRight"]="".concat(s0()-1,"px")),z.createElement("div",{style:d,ref:l,className:zt("rbc-time-header",c&&"rbc-overflowing")},z.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},u&&z.createElement(u,null)),this.renderHeaderCells(o))}}])}(z.Component);function yX(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}var xX=function(t){var r=t.min,n=t.max,s=t.timeslots,i=t.step,o=t.localizer,l=t.getNow,c=t.resource,u=t.components,d=t.getters,f=t.gutterRef,m=u.timeGutterWrapper,y=b.useMemo(function(){return yX({min:r,max:n,localizer:o})},[r==null?void 0:r.toISOString(),n==null?void 0:n.toISOString(),o]),j=y.start,p=y.end,k=b.useState(D0({min:j,max:p,timeslots:s,step:i,localizer:o})),h=wn(k,2),v=h[0],S=h[1];b.useEffect(function(){v&&S(v.update({min:j,max:p,timeslots:s,step:i,localizer:o}))},[j==null?void 0:j.toISOString(),p==null?void 0:p.toISOString(),s,i]);var x=b.useCallback(function(T,E){if(E)return null;var _=v.dateIsInGroup(l(),E);return z.createElement("span",{className:zt("rbc-label",_&&"rbc-now")},o.format(T,"timeGutterFormat"))},[v,o,l]);return z.createElement(m,{slotMetrics:v},z.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:f},v.groups.map(function(T,E){return z.createElement(dC,{key:E,group:T,resource:c,components:u,renderSlot:x,getters:d})})))},vX=z.forwardRef(function(e,t){return z.createElement(xX,Object.assign({gutterRef:t},e))}),xp={};function bX(e,t){return{map:function(n){return e?e.map(function(s,i){return n([t.resourceId(s),s],i)}):[n([xp,null],0)]},groupEvents:function(n){var s=new Map;return e?(n.forEach(function(i){var o=t.resource(i)||xp;if(Array.isArray(o))o.forEach(function(c){var u=s.get(c)||[];u.push(i),s.set(c,u)});else{var l=s.get(o)||[];l.push(i),s.set(o,l)}}),s):(s.set(xp,n),s)}}}var hl=function(e){function t(r){var n;return or(this,t),n=Pr(this,t,[r]),n.handleScroll=function(s){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=s.target.scrollLeft)},n.handleResize=function(){$w(n.rafHandle),n.rafHandle=cD(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];Dt(n.props.onKeyPressEvent,i)},n.handleSelectEvent=function(){n.clearSelection();for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];Dt(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];Dt(n.props.onDoubleClickEvent,i)},n.handleShowMore=function(s,i,o,l,c){var u=n.props,d=u.popup,f=u.onDrillDown,m=u.onShowMore,y=u.getDrilldownView,j=u.doShowMoreDrillDown;if(n.clearSelection(),d){var p=lD(o,n.containerRef.current);n.setState({overlay:{date:i,events:s,position:wt(wt({},p),{},{width:"200px"}),target:c}})}else j&&Dt(f,[i,y(i)||$r.DAY]);Dt(m,[s,i,l])},n.handleSelectAllDaySlot=function(s,i){var o=n.props.onSelectSlot,l=new Date(s[0]),c=new Date(s[s.length-1]);c.setDate(s[s.length-1].getDate()+1),Dt(o,{slots:s,start:l,end:c,action:i.action,resourceId:i.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var s=n.contentRef.current;if(s!=null&&s.scrollHeight){var i=s.scrollHeight>s.clientHeight;n.state.isOverflowing!==i&&(n._updatingOverflow=!0,n.setState({isOverflowing:i},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=RD(function(s,i){return bX(s,i)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=z.createRef(),n.contentRef=z.createRef(),n.containerRef=z.createRef(),n._scrollRatio=null,n.gutterRef=b.createRef(),n}return _r(t,e),lr(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),$w(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,s,i,o,l,c,u,d,f,m){var y=this.props,j=y.min,p=y.max,k=(o.get(s)||[]).filter(function(v){return c.inRange(n,u.start(v),u.end(v),"day")}),h=(l.get(s)||[]).filter(function(v){return c.inRange(n,u.start(v),u.end(v),"day")});return z.createElement(fC,Object.assign({},this.props,{localizer:c,min:c.merge(n,j),max:c.merge(n,p),resource:i&&s,components:d,isNow:c.isSameDate(n,m),key:"".concat(s,"-").concat(n),date:n,events:k,backgroundEvents:h,dayLayoutAlgorithm:f}))}},{key:"renderResourcesFirst",value:function(n,s,i,o,l,c,u,d,f){var m=this;return s.map(function(y){var j=wn(y,2),p=j[0],k=j[1];return n.map(function(h){return m.renderDayColumn(h,p,k,i,o,l,c,d,f,u)})})}},{key:"renderRangeFirst",value:function(n,s,i,o,l,c,u,d,f){var m=this;return n.map(function(y){return z.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:y},s.map(function(j){var p=wn(j,2),k=p[0],h=p[1];return z.createElement("div",{style:{flex:1},key:c.resourceId(h)},m.renderDayColumn(y,k,h,i,o,l,c,d,f,u))}))})}},{key:"renderEvents",value:function(n,s,i,o){var l=this.props,c=l.accessors,u=l.localizer,d=l.resourceGroupingLayout,f=l.components,m=l.dayLayoutAlgorithm,y=this.memoizedResources(this.props.resources,c),j=y.groupEvents(s),p=y.groupEvents(i);return d?this.renderRangeFirst(n,y,j,p,u,c,o,f,m):this.renderResourcesFirst(n,y,j,p,u,c,o,f,m)}},{key:"render",value:function(){var n,s=this.props,i=s.events,o=s.backgroundEvents,l=s.range,c=s.width,u=s.rtl,d=s.selected,f=s.getNow,m=s.resources,y=s.components,j=s.accessors,p=s.getters,k=s.localizer,h=s.min,v=s.max,S=s.showMultiDayTimes,x=s.longPressThreshold,T=s.resizable,E=s.resourceGroupingLayout;c=c||this.state.gutterWidth;var _=l[0],M=l[l.length-1];this.slots=l.length;var O=[],R=[],K=[];i.forEach(function(ne){if(Vc(ne,_,M,j,k)){var Z=j.start(ne),fe=j.end(ne);j.allDay(ne)||k.startAndEndAreDateOnly(Z,fe)||!S&&!k.isSameDate(Z,fe)?O.push(ne):R.push(ne)}}),o.forEach(function(ne){Vc(ne,_,M,j,k)&&K.push(ne)}),O.sort(function(ne,Z){return uy(ne,Z,j,k)});var Q={range:l,events:O,width:c,rtl:u,getNow:f,localizer:k,selected:d,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(m,j),selectable:this.props.selectable,accessors:j,getters:p,components:y,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:x,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:T};return z.createElement("div",{className:zt("rbc-time-view",m&&"rbc-time-view-resources"),ref:this.containerRef},m&&m.length>1&&E?z.createElement(gX,Q):z.createElement(pX,Q),this.props.popup&&this.renderOverlay(),z.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},z.createElement(vX,{date:_,ref:this.gutterRef,localizer:k,min:k.merge(_,h),max:k.merge(_,v),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:y,className:"rbc-time-gutter",getters:p}),this.renderEvents(l,R,K,f())))}},{key:"renderOverlay",value:function(){var n,s,i=this,o=(n=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,u=l.localizer,d=l.components,f=l.getters,m=l.selected,y=l.popupOffset,j=l.handleDragStart,p=function(){return i.setState({overlay:null})};return z.createElement(S0,{overlay:o,accessors:c,localizer:u,components:d,getters:f,selected:m,popupOffset:y,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:j,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:p})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,i=(s=n.gutterRef)!==null&&s!==void 0&&s.current?oy(n.gutterRef.current):void 0;i&&n.state.gutterWidth!==i&&n.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=n.min,i=n.max,o=n.scrollToTime,l=n.localizer,c=l.diff(l.merge(o,s),o,"milliseconds"),u=l.diff(s,i,"milliseconds");this._scrollRatio=c/u}}])}(b.Component);hl.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var wX=["date","localizer","min","max","scrollToTime","enableAutoScroll"],sh=function(e){function t(){return or(this,t),Pr(this,t,arguments)}return _r(t,e),lr(t,[{key:"render",value:function(){var n=this.props,s=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,u=c===void 0?i.endOf(new Date,"day"):c,d=n.scrollToTime,f=d===void 0?i.startOf(new Date,"day"):d,m=n.enableAutoScroll,y=m===void 0?!0:m,j=Ds(n,wX),p=t.range(s,{localizer:i});return z.createElement(hl,Object.assign({},j,{range:p,eventOffset:10,localizer:i,min:l,max:u,scrollToTime:f,enableAutoScroll:y}))}}])}(z.Component);sh.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};sh.navigate=function(e,t,r){var n=r.localizer;switch(t){case tn.PREVIOUS:return n.add(e,-1,"day");case tn.NEXT:return n.add(e,1,"day");default:return e}};sh.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var NX=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Qa=function(e){function t(){return or(this,t),Pr(this,t,arguments)}return _r(t,e),lr(t,[{key:"render",value:function(){var n=this.props,s=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,u=c===void 0?i.endOf(new Date,"day"):c,d=n.scrollToTime,f=d===void 0?i.startOf(new Date,"day"):d,m=n.enableAutoScroll,y=m===void 0?!0:m,j=Ds(n,NX),p=t.range(s,this.props);return z.createElement(hl,Object.assign({},j,{range:p,eventOffset:15,localizer:i,min:l,max:u,scrollToTime:f,enableAutoScroll:y}))}}])}(z.Component);Qa.defaultProps=hl.defaultProps;Qa.navigate=function(e,t,r){var n=r.localizer;switch(t){case tn.PREVIOUS:return n.add(e,-1,"week");case tn.NEXT:return n.add(e,1,"week");default:return e}};Qa.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),s=r.startOf(e,"week",n),i=r.endOf(e,"week",n);return r.range(s,i)};Qa.title=function(e,t){var r=t.localizer,n=Qa.range(e,{localizer:r}),s=WD(n),i=s[0],o=s.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var jX=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function C0(e,t){return Qa.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var Tu=function(e){function t(){return or(this,t),Pr(this,t,arguments)}return _r(t,e),lr(t,[{key:"render",value:function(){var n=this.props,s=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,u=c===void 0?i.endOf(new Date,"day"):c,d=n.scrollToTime,f=d===void 0?i.startOf(new Date,"day"):d,m=n.enableAutoScroll,y=m===void 0?!0:m,j=Ds(n,jX),p=C0(s,this.props);return z.createElement(hl,Object.assign({},j,{range:p,eventOffset:15,localizer:i,min:l,max:u,scrollToTime:f,enableAutoScroll:y}))}}])}(z.Component);Tu.defaultProps=hl.defaultProps;Tu.range=C0;Tu.navigate=Qa.navigate;Tu.title=function(e,t){var r=t.localizer,n=C0(e,{localizer:r}),s=WD(n),i=s[0],o=s.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var ah=30;function ih(e){var t=e.accessors,r=e.components,n=e.date,s=e.events,i=e.getters,o=e.length,l=o===void 0?ah:o,c=e.localizer,u=e.onDoubleClickEvent,d=e.onSelectEvent,f=e.selected,m=b.useRef(null),y=b.useRef(null),j=b.useRef(null),p=b.useRef(null),k=b.useRef(null);b.useEffect(function(){S()});var h=function(M,O,R){var K=r.event,Q=r.date;return O=O.filter(function(ne){return Vc(ne,c.startOf(M,"day"),c.endOf(M,"day"),t,c)}),O.map(function(ne,Z){var fe=t.title(ne),te=t.end(ne),xe=t.start(ne),ie=i.eventProp(ne,xe,te,rh(ne,f)),V=Z===0&&c.format(M,"agendaDateFormat"),ge=Z===0?z.createElement("td",{rowSpan:O.length,className:"rbc-agenda-date-cell"},Q?z.createElement(Q,{day:M,label:V}):V):!1;return z.createElement("tr",{key:R+"_"+Z,className:ie.className,style:ie.style},ge,z.createElement("td",{className:"rbc-agenda-time-cell"},v(M,ne)),z.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(U){return d&&d(ne,U)},onDoubleClick:function(U){return u&&u(ne,U)}},K?z.createElement(K,{event:ne,title:fe}):fe))},[])},v=function(M,O){var R="",K=r.time,Q=c.messages.allDay,ne=t.end(O),Z=t.start(O);return t.allDay(O)||(c.eq(Z,ne)?Q=c.format(Z,"agendaTimeFormat"):c.isSameDate(Z,ne)?Q=c.format({start:Z,end:ne},"agendaTimeRangeFormat"):c.isSameDate(M,Z)?Q=c.format(Z,"agendaTimeFormat"):c.isSameDate(M,ne)&&(Q=c.format(ne,"agendaTimeFormat"))),c.gt(M,Z,"day")&&(R="rbc-continues-prior"),c.lt(M,ne,"day")&&(R+=" rbc-continues-after"),z.createElement("span",{className:R.trim()},K?z.createElement(K,{event:O,day:M,label:Q}):Q)},S=function(){if(k.current){var M=m.current,O=k.current.firstChild;if(O){var R=p.current.scrollHeight>p.current.clientHeight,K=[],Q=K;K=[oy(O.children[0]),oy(O.children[1])],(Q[0]!==K[0]||Q[1]!==K[1])&&(y.current.style.width=K[0]+"px",j.current.style.width=K[1]+"px"),R?(S6(M,"rbc-header-overflowing"),M.style.marginRight=s0()+"px"):k6(M,"rbc-header-overflowing")}}},x=c.messages,T=c.add(n,l,"day"),E=c.range(n,T,"day");return s=s.filter(function(_){return Vc(_,c.startOf(n,"day"),c.endOf(T,"day"),t,c)}),s.sort(function(_,M){return+t.start(_)-+t.start(M)}),z.createElement("div",{className:"rbc-agenda-view"},s.length!==0?z.createElement(z.Fragment,null,z.createElement("table",{ref:m,className:"rbc-agenda-table"},z.createElement("thead",null,z.createElement("tr",null,z.createElement("th",{className:"rbc-header",ref:y},x.date),z.createElement("th",{className:"rbc-header",ref:j},x.time),z.createElement("th",{className:"rbc-header"},x.event)))),z.createElement("div",{className:"rbc-agenda-content",ref:p},z.createElement("table",{className:"rbc-agenda-table"},z.createElement("tbody",{ref:k},E.map(function(_,M){return h(_,s,M)}))))):z.createElement("span",{className:"rbc-agenda-empty"},x.noEventsInRange))}ih.range=function(e,t){var r=t.length,n=r===void 0?ah:r,s=t.localizer,i=s.add(e,n,"day");return{start:e,end:i}};ih.navigate=function(e,t,r){var n=r.length,s=n===void 0?ah:n,i=r.localizer;switch(t){case tn.PREVIOUS:return i.add(e,-s,"day");case tn.NEXT:return i.add(e,s,"day");default:return e}};ih.title=function(e,t){var r=t.length,n=r===void 0?ah:r,s=t.localizer,i=s.add(e,n,"day");return s.format({start:e,end:i},"agendaHeaderFormat")};var Xd=ci(ci(ci(ci(ci({},$r.MONTH,nh),$r.WEEK,Qa),$r.WORK_WEEK,Tu),$r.DAY,sh),$r.AGENDA,ih),SX=["action","date","today"];function kX(e,t){var r=t.action,n=t.date,s=t.today,i=Ds(t,SX);switch(e=typeof e=="string"?Xd[e]:e,r){case tn.TODAY:n=s||new Date;break;case tn.DATE:break;default:Mc(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,i)}return n}function DX(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&Gn(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var Is=function(t){return function(r){return DX(r,t)}},CX=["view","date","getNow","onNavigate"],EX=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function hC(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var s=wn(n[r],2),i=s[0],o=s[1];o&&t.push(i)}return t}function TX(e,t){var r=t.views,n=hC(r);return n.indexOf(e)!==-1}var pC=function(e){function t(){var r;or(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Pr(this,t,[].concat(s)),r.getViews=function(){var o=r.props.views;return Array.isArray(o)?aQ(o,function(l,c){return l[c]=Xd[c]},{}):Gn(o)==="object"?aY(o,function(l,c){return l===!0?Xd[c]:l}):Xd},r.getView=function(){var o=r.getViews();return o[r.props.view]},r.getDrilldownView=function(o){var l=r.props,c=l.view,u=l.drilldownView,d=l.getDrilldownView;return d?d(o,c,Object.keys(r.getViews())):u},r.handleRangeChange=function(o,l,c){var u=r.props,d=u.onRangeChange,f=u.localizer;d&&l.range&&d(l.range(o,{localizer:f}),c)},r.handleNavigate=function(o,l){var c=r.props,u=c.view,d=c.date,f=c.getNow,m=c.onNavigate,y=Ds(c,CX),j=r.getView(),p=f();d=kX(j,wt(wt({},y),{},{action:o,date:l||d||p,today:p})),m(d,u,o),r.handleRangeChange(d,j)},r.handleViewChange=function(o){o!==r.props.view&&TX(o,r.props)&&r.props.onView(o);var l=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),l[o],o)},r.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Dt(r.props.onKeyPressEvent,l)},r.handleSelectSlot=function(o){Dt(r.props.onSelectSlot,o)},r.handleDrillDown=function(o,l){var c=r.props.onDrillDown;if(c){c(o,l,r.drilldownView);return}l&&r.handleViewChange(l),r.handleNavigate(tn.DATE,o)},r.state={context:t.getContext(r.props)},r}return _r(t,e),lr(t,[{key:"render",value:function(){var n=this.props,s=n.view,i=n.toolbar,o=n.events,l=n.backgroundEvents,c=n.resourceGroupingLayout,u=n.style,d=n.className,f=n.elementProps,m=n.date,y=n.getNow,j=n.length,p=n.showMultiDayTimes,k=n.onShowMore,h=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var v=Ds(n,EX);m=m||y();var S=this.getView(),x=this.state.context,T=x.accessors,E=x.components,_=x.getters,M=x.localizer,O=x.viewNames,R=E.toolbar||PQ,K=S.title(m,{localizer:M,length:j});return z.createElement("div",Object.assign({},f,{className:zt(d,"rbc-calendar",v.rtl&&"rbc-rtl"),style:u}),i&&z.createElement(R,{date:m,view:s,views:O,label:K,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:M}),z.createElement(S,Object.assign({},v,{events:o,backgroundEvents:l,date:m,getNow:y,length:j,localizer:M,getters:_,components:E,accessors:T,showMultiDayTimes:p,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:k,doShowMoreDrillDown:h,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:t.getContext(n)}}},{key:"getContext",value:function(n){var s=n.startAccessor,i=n.endAccessor,o=n.allDayAccessor,l=n.tooltipAccessor,c=n.titleAccessor,u=n.resourceAccessor,d=n.resourceIdAccessor,f=n.resourceTitleAccessor,m=n.eventIdAccessor,y=n.eventPropGetter,j=n.backgroundEventPropGetter,p=n.slotPropGetter,k=n.slotGroupPropGetter,h=n.dayPropGetter,v=n.view,S=n.views,x=n.localizer,T=n.culture,E=n.messages,_=E===void 0?{}:E,M=n.components,O=M===void 0?{}:M,R=n.formats,K=R===void 0?{}:R,Q=hC(S),ne=RQ(_);return{viewNames:Q,localizer:_Q(x,T,K,ne),getters:{eventProp:function(){return y&&y.apply(void 0,arguments)||{}},backgroundEventProp:function(){return j&&j.apply(void 0,arguments)||{}},slotProp:function(){return p&&p.apply(void 0,arguments)||{}},slotGroupProp:function(){return k&&k.apply(void 0,arguments)||{}},dayProp:function(){return h&&h.apply(void 0,arguments)||{}}},components:JV(O[v]||{},YG(O,Q),{eventWrapper:ls,backgroundEventWrapper:ls,eventContainerWrapper:ls,dateCellWrapper:ls,weekWrapper:ls,timeSlotWrapper:ls,timeGutterWrapper:ls,timeIndicatorWrapper:ls}),accessors:{start:Is(s),end:Is(i),allDay:Is(o),tooltip:Is(l),title:Is(c),resource:Is(u),resourceId:Is(d),resourceTitle:Is(f),eventId:Is(m)}}}}])}(z.Component);pC.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:$r.MONTH,views:[$r.MONTH,$r.WEEK,$r.DAY,$r.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:$r.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var AX=Hk(pC,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),_X=function(t,r,n){var s=t.start,i=t.end;return n.format(s,"MMMM DD",r)+"  "+n.format(i,n.eq(s,i,"month")?"DD":"MMMM DD",r)},PX=function(t,r,n){var s=t.start,i=t.end;return n.format(s,"L",r)+"  "+n.format(i,"L",r)},vp=function(t,r,n){var s=t.start,i=t.end;return n.format(s,"LT",r)+"  "+n.format(i,"LT",r)},MX=function(t,r,n){var s=t.start;return n.format(s,"LT",r)+"  "},RX=function(t,r,n){var s=t.end;return"  "+n.format(s,"LT",r)},OX={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:vp,eventTimeRangeFormat:vp,eventTimeRangeStartFormat:MX,eventTimeRangeEndFormat:RX,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:_X,agendaHeaderFormat:PX,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:vp};function pa(e){var t=e&&e.toLowerCase();return t==="FullYear"?t="year":t||(t=void 0),t}function IX(e){var t=function(U,L){return L?U.locale(L):U};function r(G){return e(G).toDate().getTimezoneOffset()}function n(G,U){var L,Y,ue=e(G).local(),ye=e(U).local();if(!e.tz)return ue.toDate().getTimezoneOffset()-ye.toDate().getTimezoneOffset();var Ne=(L=ue==null||(Y=ue._z)===null||Y===void 0?void 0:Y.name)!==null&&L!==void 0?L:e.tz.guess(),Re=e.tz.zone(Ne).utcOffset(+ue),ee=e.tz.zone(Ne).utcOffset(+ye);return Re-ee}function s(G){var U=e(G).startOf("day");return n(U,G)}function i(G,U,L){var Y=pa(L),ue=Y?e(G).startOf(Y):e(G),ye=Y?e(U).startOf(Y):e(U);return[ue,ye,Y]}function o(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,U=arguments.length>1?arguments[1]:void 0,L=pa(U);return L?e(G).startOf(L).toDate():e(G).toDate()}function l(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,U=arguments.length>1?arguments[1]:void 0,L=pa(U);return L?e(G).endOf(L).toDate():e(G).toDate()}function c(G,U,L){var Y=i(G,U,L),ue=wn(Y,3),ye=ue[0],Ne=ue[1],Re=ue[2];return ye.isSame(Ne,Re)}function u(G,U,L){return!c(G,U,L)}function d(G,U,L){var Y=i(G,U,L),ue=wn(Y,3),ye=ue[0],Ne=ue[1],Re=ue[2];return ye.isAfter(Ne,Re)}function f(G,U,L){var Y=i(G,U,L),ue=wn(Y,3),ye=ue[0],Ne=ue[1],Re=ue[2];return ye.isBefore(Ne,Re)}function m(G,U,L){var Y=i(G,U,L),ue=wn(Y,3),ye=ue[0],Ne=ue[1],Re=ue[2];return ye.isSameOrBefore(Ne,Re)}function y(G,U,L){var Y=i(G,U,L),ue=wn(Y,3),ye=ue[0],Ne=ue[1],Re=ue[2];return ye.isSameOrBefore(Ne,Re)}function j(G,U,L){var Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",ue=pa(Y),ye=e(G),Ne=e(U),Re=e(L);return ye.isBetween(Ne,Re,ue,"[]")}function p(G,U){var L=e(G),Y=e(U),ue=e.min(L,Y);return ue.toDate()}function k(G,U){var L=e(G),Y=e(U),ue=e.max(L,Y);return ue.toDate()}function h(G,U){if(!G&&!U)return null;var L=e(U).format("HH:mm:ss"),Y=e(G).startOf("day").format("MM/DD/YYYY");return e("".concat(Y," ").concat(L),"MM/DD/YYYY HH:mm:ss").toDate()}function v(G,U,L){var Y=pa(L);return e(G).add(U,Y).toDate()}function S(G,U){for(var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",Y=pa(L),ue=e(G).toDate(),ye=[];y(ue,U);)ye.push(ue),ue=v(ue,1,Y);return ye}function x(G,U){var L=pa(U),Y=o(G,L);return c(Y,G)?Y:v(Y,1,L)}function T(G,U){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",Y=pa(L),ue=e(G),ye=e(U);return ye.diff(ue,Y)}function E(G){var U=e(G);return U.minutes()}function _(G){var U=G?e.localeData(G):e.localeData();return U?U.firstDayOfWeek():0}function M(G){return e(G).startOf("month").startOf("week").toDate()}function O(G){return e(G).endOf("month").endOf("week").toDate()}function R(G){for(var U=M(G),L=O(G),Y=[];y(U,L);)Y.push(U),U=v(U,1,"d");return Y}function K(G,U,L){return e(G).startOf("day").minute(U+L).toDate()}function Q(G,U){return T(G,U,"minutes")}function ne(G){var U=e(G).startOf("day"),L=e(G);return L.diff(U,"minutes")+s(G)}function Z(G,U){var L=e(G),Y=e(U);return L.isBefore(Y,"day")}function fe(G,U,L){var Y=e(U),ue=e(L);return Y.isSameOrAfter(ue,"minutes")}function te(G,U){var L=e(G),Y=e(U),ue=e.duration(Y.diff(L));return ue.days()}function xe(G){var U=G.evtA,L=U.start,Y=U.end,ue=U.allDay,ye=G.evtB,Ne=ye.start,Re=ye.end,ee=ye.allDay,me=+o(L,"day")-+o(Ne,"day"),I=te(L,Y),se=te(Ne,Re);return me||se-I||!!ee-!!ue||+L-+Ne||+Y-+Re}function ie(G){var U=G.event,L=U.start,Y=U.end,ue=G.range,ye=ue.start,Ne=ue.end,Re=e(L).startOf("day"),ee=e(Y),me=e(ye),I=e(Ne),se=Re.isSameOrBefore(I,"day"),ae=!Re.isSame(ee,"minutes"),X=ae?ee.isAfter(me,"minutes"):ee.isSameOrAfter(me,"minutes");return se&&X}function V(G,U){var L=e(G),Y=e(U);return L.isSame(Y,"day")}function ge(){var G=new Date,U=/-/.test(G.toString())?"-":"",L=G.getTimezoneOffset(),Y=Number("".concat(U).concat(Math.abs(L))),ue=e().utcOffset();return ue>Y?1:0}return new AQ({formats:OX,firstOfWeek:_,firstVisibleDay:M,lastVisibleDay:O,visibleDays:R,format:function(U,L,Y){return t(e(U),Y).format(L)},lt:f,lte:y,gt:d,gte:m,eq:c,neq:u,merge:h,inRange:j,startOf:o,endOf:l,range:S,add:v,diff:T,ceil:x,min:p,max:k,minutes:E,getSlotDate:K,getTimezoneOffset:r,getDstOffset:n,getTotalMin:Q,getMinutesFromMidnight:ne,continuesPrior:Z,continuesAfter:fe,sortEvents:xe,inEventRange:ie,isSameDate:V,daySpan:te,browserTZOffset:ge})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var gC;function De(){return gC.apply(null,arguments)}function LX(e){gC=e}function Xn(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Ei(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function E0(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ct(e,t))return!1;return!0}function zr(e){return e===void 0}function oa(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Au(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function yC(e,t){var r=[],n,s=e.length;for(n=0;n<s;++n)r.push(t(e[n],n));return r}function Ra(e,t){for(var r in t)ct(t,r)&&(e[r]=t[r]);return ct(t,"toString")&&(e.toString=t.toString),ct(t,"valueOf")&&(e.valueOf=t.valueOf),e}function _s(e,t,r,n){return BC(e,t,r,n,!0).utc()}function $X(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ke(e){return e._pf==null&&(e._pf=$X()),e._pf}var fy;Array.prototype.some?fy=Array.prototype.some:fy=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function T0(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=Ke(e),r=fy.call(t.parsedDateParts,function(s){return s!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function oh(e){var t=_s(NaN);return e!=null?Ra(Ke(t),e):Ke(t).userInvalidated=!0,t}var ZN=De.momentProperties=[],bp=!1;function A0(e,t){var r,n,s,i=ZN.length;if(zr(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),zr(t._i)||(e._i=t._i),zr(t._f)||(e._f=t._f),zr(t._l)||(e._l=t._l),zr(t._strict)||(e._strict=t._strict),zr(t._tzm)||(e._tzm=t._tzm),zr(t._isUTC)||(e._isUTC=t._isUTC),zr(t._offset)||(e._offset=t._offset),zr(t._pf)||(e._pf=Ke(t)),zr(t._locale)||(e._locale=t._locale),i>0)for(r=0;r<i;r++)n=ZN[r],s=t[n],zr(s)||(e[n]=s);return e}function _u(e){A0(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),bp===!1&&(bp=!0,De.updateOffset(this),bp=!1)}function Jn(e){return e instanceof _u||e!=null&&e._isAMomentObject!=null}function xC(e){De.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function _n(e,t){var r=!0;return Ra(function(){if(De.deprecationHandler!=null&&De.deprecationHandler(null,e),r){var n=[],s,i,o,l=arguments.length;for(i=0;i<l;i++){if(s="",typeof arguments[i]=="object"){s+=`
[`+i+"] ";for(o in arguments[0])ct(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[i];n.push(s)}xC(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var ej={};function vC(e,t){De.deprecationHandler!=null&&De.deprecationHandler(e,t),ej[e]||(xC(t),ej[e]=!0)}De.suppressDeprecationWarnings=!1;De.deprecationHandler=null;function Ps(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function FX(e){var t,r;for(r in e)ct(e,r)&&(t=e[r],Ps(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function my(e,t){var r=Ra({},e),n;for(n in t)ct(t,n)&&(Ei(e[n])&&Ei(t[n])?(r[n]={},Ra(r[n],e[n]),Ra(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)ct(e,n)&&!ct(t,n)&&Ei(e[n])&&(r[n]=Ra({},r[n]));return r}function _0(e){e!=null&&this.set(e)}var hy;Object.keys?hy=Object.keys:hy=function(e){var t,r=[];for(t in e)ct(e,t)&&r.push(t);return r};var BX={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function WX(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return Ps(n)?n.call(t,r):n}function Cs(e,t,r){var n=""+Math.abs(e),s=t-n.length,i=e>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var P0=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,xd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,wp={},No={};function We(e,t,r,n){var s=n;typeof n=="string"&&(s=function(){return this[n]()}),e&&(No[e]=s),t&&(No[t[0]]=function(){return Cs(s.apply(this,arguments),t[1],t[2])}),r&&(No[r]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function HX(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function UX(e){var t=e.match(P0),r,n;for(r=0,n=t.length;r<n;r++)No[t[r]]?t[r]=No[t[r]]:t[r]=HX(t[r]);return function(s){var i="",o;for(o=0;o<n;o++)i+=Ps(t[o])?t[o].call(s,e):t[o];return i}}function Jd(e,t){return e.isValid()?(t=bC(t,e.localeData()),wp[t]=wp[t]||UX(t),wp[t](e)):e.localeData().invalidDate()}function bC(e,t){var r=5;function n(s){return t.longDateFormat(s)||s}for(xd.lastIndex=0;r>=0&&xd.test(e);)e=e.replace(xd,n),xd.lastIndex=0,r-=1;return e}var zX={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function VX(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(P0).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var YX="Invalid date";function qX(){return this._invalidDate}var KX="%d",GX=/\d{1,2}/;function QX(e){return this._ordinal.replace("%d",e)}var XX={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function JX(e,t,r,n){var s=this._relativeTime[r];return Ps(s)?s(e,t,r,n):s.replace(/%d/i,e)}function ZX(e,t){var r=this._relativeTime[e>0?"future":"past"];return Ps(r)?r(t):r.replace(/%s/i,t)}var tj={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Pn(e){return typeof e=="string"?tj[e]||tj[e.toLowerCase()]:void 0}function M0(e){var t={},r,n;for(n in e)ct(e,n)&&(r=Pn(n),r&&(t[r]=e[n]));return t}var eJ={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function tJ(e){var t=[],r;for(r in e)ct(e,r)&&t.push({unit:r,priority:eJ[r]});return t.sort(function(n,s){return n.priority-s.priority}),t}var wC=/\d/,mn=/\d\d/,NC=/\d{3}/,R0=/\d{4}/,lh=/[+-]?\d{6}/,At=/\d\d?/,jC=/\d\d\d\d?/,SC=/\d\d\d\d\d\d?/,ch=/\d{1,3}/,O0=/\d{1,4}/,uh=/[+-]?\d{1,6}/,pl=/\d+/,dh=/[+-]?\d+/,rJ=/Z|[+-]\d\d:?\d\d/gi,fh=/Z|[+-]\d\d(?::?\d\d)?/gi,nJ=/[+-]?\d+(\.\d{1,3})?/,Pu=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,gl=/^[1-9]\d?/,I0=/^([1-9]\d|\d)/,Gf;Gf={};function Le(e,t,r){Gf[e]=Ps(t)?t:function(n,s){return n&&r?r:t}}function sJ(e,t){return ct(Gf,e)?Gf[e](t._strict,t._locale):new RegExp(aJ(e))}function aJ(e){return Xs(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,s,i){return r||n||s||i}))}function Xs(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function bn(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function tt(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=bn(t)),r}var py={};function bt(e,t){var r,n=t,s;for(typeof e=="string"&&(e=[e]),oa(t)&&(n=function(i,o){o[t]=tt(i)}),s=e.length,r=0;r<s;r++)py[e[r]]=n}function Mu(e,t){bt(e,function(r,n,s,i){s._w=s._w||{},t(r,s._w,s,i)})}function iJ(e,t,r){t!=null&&ct(py,e)&&py[e](t,r._a,r,e)}function mh(e){return e%4===0&&e%100!==0||e%400===0}var Er=0,qs=1,ys=2,ir=3,zn=4,Ks=5,gi=6,oJ=7,lJ=8;We("Y",0,0,function(){var e=this.year();return e<=9999?Cs(e,4):"+"+e});We(0,["YY",2],0,function(){return this.year()%100});We(0,["YYYY",4],0,"year");We(0,["YYYYY",5],0,"year");We(0,["YYYYYY",6,!0],0,"year");Le("Y",dh);Le("YY",At,mn);Le("YYYY",O0,R0);Le("YYYYY",uh,lh);Le("YYYYYY",uh,lh);bt(["YYYYY","YYYYYY"],Er);bt("YYYY",function(e,t){t[Er]=e.length===2?De.parseTwoDigitYear(e):tt(e)});bt("YY",function(e,t){t[Er]=De.parseTwoDigitYear(e)});bt("Y",function(e,t){t[Er]=parseInt(e,10)});function oc(e){return mh(e)?366:365}De.parseTwoDigitYear=function(e){return tt(e)+(tt(e)>68?1900:2e3)};var kC=yl("FullYear",!0);function cJ(){return mh(this.year())}function yl(e,t){return function(r){return r!=null?(DC(this,e,r),De.updateOffset(this,t),this):qc(this,e)}}function qc(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function DC(e,t,r){var n,s,i,o,l;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(s?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(s?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(s?n.setUTCHours(r):n.setHours(r));case"Date":return void(s?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}i=r,o=e.month(),l=e.date(),l=l===29&&o===1&&!mh(i)?28:l,s?n.setUTCFullYear(i,o,l):n.setFullYear(i,o,l)}}function uJ(e){return e=Pn(e),Ps(this[e])?this[e]():this}function dJ(e,t){if(typeof e=="object"){e=M0(e);var r=tJ(e),n,s=r.length;for(n=0;n<s;n++)this[r[n].unit](e[r[n].unit])}else if(e=Pn(e),Ps(this[e]))return this[e](t);return this}function fJ(e,t){return(e%t+t)%t}var Vt;Array.prototype.indexOf?Vt=Array.prototype.indexOf:Vt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function L0(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=fJ(t,12);return e+=(t-r)/12,r===1?mh(e)?29:28:31-r%7%2}We("M",["MM",2],"Mo",function(){return this.month()+1});We("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});We("MMMM",0,0,function(e){return this.localeData().months(this,e)});Le("M",At,gl);Le("MM",At,mn);Le("MMM",function(e,t){return t.monthsShortRegex(e)});Le("MMMM",function(e,t){return t.monthsRegex(e)});bt(["M","MM"],function(e,t){t[qs]=tt(e)-1});bt(["MMM","MMMM"],function(e,t,r,n){var s=r._locale.monthsParse(e,n,r._strict);s!=null?t[qs]=s:Ke(r).invalidMonth=e});var mJ="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),CC="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),EC=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,hJ=Pu,pJ=Pu;function gJ(e,t){return e?Xn(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||EC).test(t)?"format":"standalone"][e.month()]:Xn(this._months)?this._months:this._months.standalone}function yJ(e,t){return e?Xn(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[EC.test(t)?"format":"standalone"][e.month()]:Xn(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function xJ(e,t,r){var n,s,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=_s([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return r?t==="MMM"?(s=Vt.call(this._shortMonthsParse,o),s!==-1?s:null):(s=Vt.call(this._longMonthsParse,o),s!==-1?s:null):t==="MMM"?(s=Vt.call(this._shortMonthsParse,o),s!==-1?s:(s=Vt.call(this._longMonthsParse,o),s!==-1?s:null)):(s=Vt.call(this._longMonthsParse,o),s!==-1?s:(s=Vt.call(this._shortMonthsParse,o),s!==-1?s:null))}function vJ(e,t,r){var n,s,i;if(this._monthsParseExact)return xJ.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=_s([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function TC(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=tt(t);else if(t=e.localeData().monthsParse(t),!oa(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,L0(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function AC(e){return e!=null?(TC(this,e),De.updateOffset(this,!0),this):qc(this,"Month")}function bJ(){return L0(this.year(),this.month())}function wJ(e){return this._monthsParseExact?(ct(this,"_monthsRegex")||_C.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ct(this,"_monthsShortRegex")||(this._monthsShortRegex=hJ),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function NJ(e){return this._monthsParseExact?(ct(this,"_monthsRegex")||_C.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ct(this,"_monthsRegex")||(this._monthsRegex=pJ),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _C(){function e(c,u){return u.length-c.length}var t=[],r=[],n=[],s,i,o,l;for(s=0;s<12;s++)i=_s([2e3,s]),o=Xs(this.monthsShort(i,"")),l=Xs(this.months(i,"")),t.push(o),r.push(l),n.push(l),n.push(o);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function jJ(e,t,r,n,s,i,o){var l;return e<100&&e>=0?(l=new Date(e+400,t,r,n,s,i,o),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,r,n,s,i,o),l}function Kc(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Qf(e,t,r){var n=7+t-r,s=(7+Kc(e,0,n).getUTCDay()-t)%7;return-s+n-1}function PC(e,t,r,n,s){var i=(7+r-n)%7,o=Qf(e,n,s),l=1+7*(t-1)+i+o,c,u;return l<=0?(c=e-1,u=oc(c)+l):l>oc(e)?(c=e+1,u=l-oc(e)):(c=e,u=l),{year:c,dayOfYear:u}}function Gc(e,t,r){var n=Qf(e.year(),t,r),s=Math.floor((e.dayOfYear()-n-1)/7)+1,i,o;return s<1?(o=e.year()-1,i=s+Js(o,t,r)):s>Js(e.year(),t,r)?(i=s-Js(e.year(),t,r),o=e.year()+1):(o=e.year(),i=s),{week:i,year:o}}function Js(e,t,r){var n=Qf(e,t,r),s=Qf(e+1,t,r);return(oc(e)-n+s)/7}We("w",["ww",2],"wo","week");We("W",["WW",2],"Wo","isoWeek");Le("w",At,gl);Le("ww",At,mn);Le("W",At,gl);Le("WW",At,mn);Mu(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=tt(e)});function SJ(e){return Gc(e,this._week.dow,this._week.doy).week}var kJ={dow:0,doy:6};function DJ(){return this._week.dow}function CJ(){return this._week.doy}function EJ(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function TJ(e){var t=Gc(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}We("d",0,"do","day");We("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});We("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});We("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});We("e",0,0,"weekday");We("E",0,0,"isoWeekday");Le("d",At);Le("e",At);Le("E",At);Le("dd",function(e,t){return t.weekdaysMinRegex(e)});Le("ddd",function(e,t){return t.weekdaysShortRegex(e)});Le("dddd",function(e,t){return t.weekdaysRegex(e)});Mu(["dd","ddd","dddd"],function(e,t,r,n){var s=r._locale.weekdaysParse(e,n,r._strict);s!=null?t.d=s:Ke(r).invalidWeekday=e});Mu(["d","e","E"],function(e,t,r,n){t[n]=tt(e)});function AJ(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function _J(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function $0(e,t){return e.slice(t,7).concat(e.slice(0,t))}var PJ="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),MC="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),MJ="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),RJ=Pu,OJ=Pu,IJ=Pu;function LJ(e,t){var r=Xn(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?$0(r,this._week.dow):e?r[e.day()]:r}function $J(e){return e===!0?$0(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function FJ(e){return e===!0?$0(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function BJ(e,t,r){var n,s,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=_s([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return r?t==="dddd"?(s=Vt.call(this._weekdaysParse,o),s!==-1?s:null):t==="ddd"?(s=Vt.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=Vt.call(this._minWeekdaysParse,o),s!==-1?s:null):t==="dddd"?(s=Vt.call(this._weekdaysParse,o),s!==-1||(s=Vt.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=Vt.call(this._minWeekdaysParse,o),s!==-1?s:null)):t==="ddd"?(s=Vt.call(this._shortWeekdaysParse,o),s!==-1||(s=Vt.call(this._weekdaysParse,o),s!==-1)?s:(s=Vt.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=Vt.call(this._minWeekdaysParse,o),s!==-1||(s=Vt.call(this._weekdaysParse,o),s!==-1)?s:(s=Vt.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function WJ(e,t,r){var n,s,i;if(this._weekdaysParseExact)return BJ.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=_s([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function HJ(e){if(!this.isValid())return e!=null?this:NaN;var t=qc(this,"Day");return e!=null?(e=AJ(e,this.localeData()),this.add(e-t,"d")):t}function UJ(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function zJ(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=_J(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function VJ(e){return this._weekdaysParseExact?(ct(this,"_weekdaysRegex")||F0.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ct(this,"_weekdaysRegex")||(this._weekdaysRegex=RJ),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function YJ(e){return this._weekdaysParseExact?(ct(this,"_weekdaysRegex")||F0.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ct(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=OJ),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function qJ(e){return this._weekdaysParseExact?(ct(this,"_weekdaysRegex")||F0.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ct(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=IJ),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function F0(){function e(d,f){return f.length-d.length}var t=[],r=[],n=[],s=[],i,o,l,c,u;for(i=0;i<7;i++)o=_s([2e3,1]).day(i),l=Xs(this.weekdaysMin(o,"")),c=Xs(this.weekdaysShort(o,"")),u=Xs(this.weekdays(o,"")),t.push(l),r.push(c),n.push(u),s.push(l),s.push(c),s.push(u);t.sort(e),r.sort(e),n.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function B0(){return this.hours()%12||12}function KJ(){return this.hours()||24}We("H",["HH",2],0,"hour");We("h",["hh",2],0,B0);We("k",["kk",2],0,KJ);We("hmm",0,0,function(){return""+B0.apply(this)+Cs(this.minutes(),2)});We("hmmss",0,0,function(){return""+B0.apply(this)+Cs(this.minutes(),2)+Cs(this.seconds(),2)});We("Hmm",0,0,function(){return""+this.hours()+Cs(this.minutes(),2)});We("Hmmss",0,0,function(){return""+this.hours()+Cs(this.minutes(),2)+Cs(this.seconds(),2)});function RC(e,t){We(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}RC("a",!0);RC("A",!1);function OC(e,t){return t._meridiemParse}Le("a",OC);Le("A",OC);Le("H",At,I0);Le("h",At,gl);Le("k",At,gl);Le("HH",At,mn);Le("hh",At,mn);Le("kk",At,mn);Le("hmm",jC);Le("hmmss",SC);Le("Hmm",jC);Le("Hmmss",SC);bt(["H","HH"],ir);bt(["k","kk"],function(e,t,r){var n=tt(e);t[ir]=n===24?0:n});bt(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});bt(["h","hh"],function(e,t,r){t[ir]=tt(e),Ke(r).bigHour=!0});bt("hmm",function(e,t,r){var n=e.length-2;t[ir]=tt(e.substr(0,n)),t[zn]=tt(e.substr(n)),Ke(r).bigHour=!0});bt("hmmss",function(e,t,r){var n=e.length-4,s=e.length-2;t[ir]=tt(e.substr(0,n)),t[zn]=tt(e.substr(n,2)),t[Ks]=tt(e.substr(s)),Ke(r).bigHour=!0});bt("Hmm",function(e,t,r){var n=e.length-2;t[ir]=tt(e.substr(0,n)),t[zn]=tt(e.substr(n))});bt("Hmmss",function(e,t,r){var n=e.length-4,s=e.length-2;t[ir]=tt(e.substr(0,n)),t[zn]=tt(e.substr(n,2)),t[Ks]=tt(e.substr(s))});function GJ(e){return(e+"").toLowerCase().charAt(0)==="p"}var QJ=/[ap]\.?m?\.?/i,XJ=yl("Hours",!0);function JJ(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var IC={calendar:BX,longDateFormat:zX,invalidDate:YX,ordinal:KX,dayOfMonthOrdinalParse:GX,relativeTime:XX,months:mJ,monthsShort:CC,week:kJ,weekdays:PJ,weekdaysMin:MJ,weekdaysShort:MC,meridiemParse:QJ},Mt={},Il={},Qc;function ZJ(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function rj(e){return e&&e.toLowerCase().replace("_","-")}function eZ(e){for(var t=0,r,n,s,i;t<e.length;){for(i=rj(e[t]).split("-"),r=i.length,n=rj(e[t+1]),n=n?n.split("-"):null;r>0;){if(s=hh(i.slice(0,r).join("-")),s)return s;if(n&&n.length>=r&&ZJ(i,n)>=r-1)break;r--}t++}return Qc}function tZ(e){return!!(e&&e.match("^[^/\\\\]*$"))}function hh(e){var t=null,r;if(Mt[e]===void 0&&typeof rf<"u"&&rf&&rf.exports&&tZ(e))try{t=Qc._abbr,r=require,r("./locale/"+e),Va(t)}catch{Mt[e]=null}return Mt[e]}function Va(e,t){var r;return e&&(zr(t)?r=da(e):r=W0(e,t),r?Qc=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Qc._abbr}function W0(e,t){if(t!==null){var r,n=IC;if(t.abbr=e,Mt[e]!=null)vC("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Mt[e]._config;else if(t.parentLocale!=null)if(Mt[t.parentLocale]!=null)n=Mt[t.parentLocale]._config;else if(r=hh(t.parentLocale),r!=null)n=r._config;else return Il[t.parentLocale]||(Il[t.parentLocale]=[]),Il[t.parentLocale].push({name:e,config:t}),null;return Mt[e]=new _0(my(n,t)),Il[e]&&Il[e].forEach(function(s){W0(s.name,s.config)}),Va(e),Mt[e]}else return delete Mt[e],null}function rZ(e,t){if(t!=null){var r,n,s=IC;Mt[e]!=null&&Mt[e].parentLocale!=null?Mt[e].set(my(Mt[e]._config,t)):(n=hh(e),n!=null&&(s=n._config),t=my(s,t),n==null&&(t.abbr=e),r=new _0(t),r.parentLocale=Mt[e],Mt[e]=r),Va(e)}else Mt[e]!=null&&(Mt[e].parentLocale!=null?(Mt[e]=Mt[e].parentLocale,e===Va()&&Va(e)):Mt[e]!=null&&delete Mt[e]);return Mt[e]}function da(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Qc;if(!Xn(e)){if(t=hh(e),t)return t;e=[e]}return eZ(e)}function nZ(){return hy(Mt)}function H0(e){var t,r=e._a;return r&&Ke(e).overflow===-2&&(t=r[qs]<0||r[qs]>11?qs:r[ys]<1||r[ys]>L0(r[Er],r[qs])?ys:r[ir]<0||r[ir]>24||r[ir]===24&&(r[zn]!==0||r[Ks]!==0||r[gi]!==0)?ir:r[zn]<0||r[zn]>59?zn:r[Ks]<0||r[Ks]>59?Ks:r[gi]<0||r[gi]>999?gi:-1,Ke(e)._overflowDayOfYear&&(t<Er||t>ys)&&(t=ys),Ke(e)._overflowWeeks&&t===-1&&(t=oJ),Ke(e)._overflowWeekday&&t===-1&&(t=lJ),Ke(e).overflow=t),e}var sZ=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,aZ=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,iZ=/Z|[+-]\d\d(?::?\d\d)?/,vd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Np=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],oZ=/^\/?Date\((-?\d+)/i,lZ=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,cZ={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function LC(e){var t,r,n=e._i,s=sZ.exec(n)||aZ.exec(n),i,o,l,c,u=vd.length,d=Np.length;if(s){for(Ke(e).iso=!0,t=0,r=u;t<r;t++)if(vd[t][1].exec(s[1])){o=vd[t][0],i=vd[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(s[3]){for(t=0,r=d;t<r;t++)if(Np[t][1].exec(s[3])){l=(s[2]||" ")+Np[t][0];break}if(l==null){e._isValid=!1;return}}if(!i&&l!=null){e._isValid=!1;return}if(s[4])if(iZ.exec(s[4]))c="Z";else{e._isValid=!1;return}e._f=o+(l||"")+(c||""),z0(e)}else e._isValid=!1}function uZ(e,t,r,n,s,i){var o=[dZ(e),CC.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(s,10)];return i&&o.push(parseInt(i,10)),o}function dZ(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function fZ(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function mZ(e,t,r){if(e){var n=MC.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(n!==s)return Ke(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function hZ(e,t,r){if(e)return cZ[e];if(t)return 0;var n=parseInt(r,10),s=n%100,i=(n-s)/100;return i*60+s}function $C(e){var t=lZ.exec(fZ(e._i)),r;if(t){if(r=uZ(t[4],t[3],t[2],t[5],t[6],t[7]),!mZ(t[1],r,e))return;e._a=r,e._tzm=hZ(t[8],t[9],t[10]),e._d=Kc.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Ke(e).rfc2822=!0}else e._isValid=!1}function pZ(e){var t=oZ.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(LC(e),e._isValid===!1)delete e._isValid;else return;if($C(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:De.createFromInputFallback(e)}De.createFromInputFallback=_n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Zi(e,t,r){return e??t??r}function gZ(e){var t=new Date(De.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function U0(e){var t,r,n=[],s,i,o;if(!e._d){for(s=gZ(e),e._w&&e._a[ys]==null&&e._a[qs]==null&&yZ(e),e._dayOfYear!=null&&(o=Zi(e._a[Er],s[Er]),(e._dayOfYear>oc(o)||e._dayOfYear===0)&&(Ke(e)._overflowDayOfYear=!0),r=Kc(o,0,e._dayOfYear),e._a[qs]=r.getUTCMonth(),e._a[ys]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=s[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ir]===24&&e._a[zn]===0&&e._a[Ks]===0&&e._a[gi]===0&&(e._nextDay=!0,e._a[ir]=0),e._d=(e._useUTC?Kc:jJ).apply(null,n),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ir]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(Ke(e).weekdayMismatch=!0)}}function yZ(e){var t,r,n,s,i,o,l,c,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,r=Zi(t.GG,e._a[Er],Gc(Tt(),1,4).year),n=Zi(t.W,1),s=Zi(t.E,1),(s<1||s>7)&&(c=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,u=Gc(Tt(),i,o),r=Zi(t.gg,e._a[Er],u.year),n=Zi(t.w,u.week),t.d!=null?(s=t.d,(s<0||s>6)&&(c=!0)):t.e!=null?(s=t.e+i,(t.e<0||t.e>6)&&(c=!0)):s=i),n<1||n>Js(r,i,o)?Ke(e)._overflowWeeks=!0:c!=null?Ke(e)._overflowWeekday=!0:(l=PC(r,n,s,i,o),e._a[Er]=l.year,e._dayOfYear=l.dayOfYear)}De.ISO_8601=function(){};De.RFC_2822=function(){};function z0(e){if(e._f===De.ISO_8601){LC(e);return}if(e._f===De.RFC_2822){$C(e);return}e._a=[],Ke(e).empty=!0;var t=""+e._i,r,n,s,i,o,l=t.length,c=0,u,d;for(s=bC(e._f,e._locale).match(P0)||[],d=s.length,r=0;r<d;r++)i=s[r],n=(t.match(sJ(i,e))||[])[0],n&&(o=t.substr(0,t.indexOf(n)),o.length>0&&Ke(e).unusedInput.push(o),t=t.slice(t.indexOf(n)+n.length),c+=n.length),No[i]?(n?Ke(e).empty=!1:Ke(e).unusedTokens.push(i),iJ(i,n,e)):e._strict&&!n&&Ke(e).unusedTokens.push(i);Ke(e).charsLeftOver=l-c,t.length>0&&Ke(e).unusedInput.push(t),e._a[ir]<=12&&Ke(e).bigHour===!0&&e._a[ir]>0&&(Ke(e).bigHour=void 0),Ke(e).parsedDateParts=e._a.slice(0),Ke(e).meridiem=e._meridiem,e._a[ir]=xZ(e._locale,e._a[ir],e._meridiem),u=Ke(e).era,u!==null&&(e._a[Er]=e._locale.erasConvertYear(u,e._a[Er])),U0(e),H0(e)}function xZ(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function vZ(e){var t,r,n,s,i,o,l=!1,c=e._f.length;if(c===0){Ke(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<c;s++)i=0,o=!1,t=A0({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],z0(t),T0(t)&&(o=!0),i+=Ke(t).charsLeftOver,i+=Ke(t).unusedTokens.length*10,Ke(t).score=i,l?i<n&&(n=i,r=t):(n==null||i<n||o)&&(n=i,r=t,o&&(l=!0));Ra(e,r||t)}function bZ(e){if(!e._d){var t=M0(e._i),r=t.day===void 0?t.date:t.day;e._a=yC([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),U0(e)}}function wZ(e){var t=new _u(H0(FC(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function FC(e){var t=e._i,r=e._f;return e._locale=e._locale||da(e._l),t===null||r===void 0&&t===""?oh({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Jn(t)?new _u(H0(t)):(Au(t)?e._d=t:Xn(r)?vZ(e):r?z0(e):NZ(e),T0(e)||(e._d=null),e))}function NZ(e){var t=e._i;zr(t)?e._d=new Date(De.now()):Au(t)?e._d=new Date(t.valueOf()):typeof t=="string"?pZ(e):Xn(t)?(e._a=yC(t.slice(0),function(r){return parseInt(r,10)}),U0(e)):Ei(t)?bZ(e):oa(t)?e._d=new Date(t):De.createFromInputFallback(e)}function BC(e,t,r,n,s){var i={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(Ei(e)&&E0(e)||Xn(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=s,i._l=r,i._i=e,i._f=t,i._strict=n,wZ(i)}function Tt(e,t,r,n){return BC(e,t,r,n,!1)}var jZ=_n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:oh()}),SZ=_n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:oh()});function WC(e,t){var r,n;if(t.length===1&&Xn(t[0])&&(t=t[0]),!t.length)return Tt();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function kZ(){var e=[].slice.call(arguments,0);return WC("isBefore",e)}function DZ(){var e=[].slice.call(arguments,0);return WC("isAfter",e)}var CZ=function(){return Date.now?Date.now():+new Date},Ll=["year","quarter","month","week","day","hour","minute","second","millisecond"];function EZ(e){var t,r=!1,n,s=Ll.length;for(t in e)if(ct(e,t)&&!(Vt.call(Ll,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<s;++n)if(e[Ll[n]]){if(r)return!1;parseFloat(e[Ll[n]])!==tt(e[Ll[n]])&&(r=!0)}return!0}function TZ(){return this._isValid}function AZ(){return ns(NaN)}function ph(e){var t=M0(e),r=t.year||0,n=t.quarter||0,s=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,d=t.millisecond||0;this._isValid=EZ(t),this._milliseconds=+d+u*1e3+c*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+s+n*3+r*12,this._data={},this._locale=da(),this._bubble()}function Zd(e){return e instanceof ph}function gy(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function _Z(e,t,r){var n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),i=0,o;for(o=0;o<n;o++)tt(e[o])!==tt(t[o])&&i++;return i+s}function HC(e,t){We(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+Cs(~~(r/60),2)+t+Cs(~~r%60,2)})}HC("Z",":");HC("ZZ","");Le("Z",fh);Le("ZZ",fh);bt(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=V0(fh,e)});var PZ=/([\+\-]|\d\d)/gi;function V0(e,t){var r=(t||"").match(e),n,s,i;return r===null?null:(n=r[r.length-1]||[],s=(n+"").match(PZ)||["-",0,0],i=+(s[1]*60)+tt(s[2]),i===0?0:s[0]==="+"?i:-i)}function Y0(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(Jn(e)||Au(e)?e.valueOf():Tt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),De.updateOffset(r,!1),r):Tt(e).local()}function yy(e){return-Math.round(e._d.getTimezoneOffset())}De.updateOffset=function(){};function MZ(e,t,r){var n=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=V0(fh,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(s=yy(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),n!==e&&(!t||this._changeInProgress?VC(this,ns(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,De.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:yy(this)}function RZ(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function OZ(e){return this.utcOffset(0,e)}function IZ(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(yy(this),"m")),this}function LZ(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=V0(rJ,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function $Z(e){return this.isValid()?(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function FZ(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function BZ(){if(!zr(this._isDSTShifted))return this._isDSTShifted;var e={},t;return A0(e,this),e=FC(e),e._a?(t=e._isUTC?_s(e._a):Tt(e._a),this._isDSTShifted=this.isValid()&&_Z(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function WZ(){return this.isValid()?!this._isUTC:!1}function HZ(){return this.isValid()?this._isUTC:!1}function UC(){return this.isValid()?this._isUTC&&this._offset===0:!1}var UZ=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,zZ=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ns(e,t){var r=e,n=null,s,i,o;return Zd(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:oa(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=UZ.exec(e))?(s=n[1]==="-"?-1:1,r={y:0,d:tt(n[ys])*s,h:tt(n[ir])*s,m:tt(n[zn])*s,s:tt(n[Ks])*s,ms:tt(gy(n[gi]*1e3))*s}):(n=zZ.exec(e))?(s=n[1]==="-"?-1:1,r={y:si(n[2],s),M:si(n[3],s),w:si(n[4],s),d:si(n[5],s),h:si(n[6],s),m:si(n[7],s),s:si(n[8],s)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=VZ(Tt(r.from),Tt(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new ph(r),Zd(e)&&ct(e,"_locale")&&(i._locale=e._locale),Zd(e)&&ct(e,"_isValid")&&(i._isValid=e._isValid),i}ns.fn=ph.prototype;ns.invalid=AZ;function si(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function nj(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function VZ(e,t){var r;return e.isValid()&&t.isValid()?(t=Y0(t,e),e.isBefore(t)?r=nj(e,t):(r=nj(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function zC(e,t){return function(r,n){var s,i;return n!==null&&!isNaN(+n)&&(vC(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),s=ns(r,n),VC(this,s,e),this}}function VC(e,t,r,n){var s=t._milliseconds,i=gy(t._days),o=gy(t._months);e.isValid()&&(n=n??!0,o&&TC(e,qc(e,"Month")+o*r),i&&DC(e,"Date",qc(e,"Date")+i*r),s&&e._d.setTime(e._d.valueOf()+s*r),n&&De.updateOffset(e,i||o))}var YZ=zC(1,"add"),qZ=zC(-1,"subtract");function YC(e){return typeof e=="string"||e instanceof String}function KZ(e){return Jn(e)||Au(e)||YC(e)||oa(e)||QZ(e)||GZ(e)||e===null||e===void 0}function GZ(e){var t=Ei(e)&&!E0(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,i,o=n.length;for(s=0;s<o;s+=1)i=n[s],r=r||ct(e,i);return t&&r}function QZ(e){var t=Xn(e),r=!1;return t&&(r=e.filter(function(n){return!oa(n)&&YC(e)}).length===0),t&&r}function XZ(e){var t=Ei(e)&&!E0(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,i;for(s=0;s<n.length;s+=1)i=n[s],r=r||ct(e,i);return t&&r}function JZ(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function ZZ(e,t){arguments.length===1&&(arguments[0]?KZ(arguments[0])?(e=arguments[0],t=void 0):XZ(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||Tt(),n=Y0(r,this).startOf("day"),s=De.calendarFormat(this,n)||"sameElse",i=t&&(Ps(t[s])?t[s].call(this,r):t[s]);return this.format(i||this.localeData().calendar(s,this,Tt(r)))}function eee(){return new _u(this)}function tee(e,t){var r=Jn(e)?e:Tt(e);return this.isValid()&&r.isValid()?(t=Pn(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function ree(e,t){var r=Jn(e)?e:Tt(e);return this.isValid()&&r.isValid()?(t=Pn(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function nee(e,t,r,n){var s=Jn(e)?e:Tt(e),i=Jn(t)?t:Tt(t);return this.isValid()&&s.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(s,r):!this.isBefore(s,r))&&(n[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function see(e,t){var r=Jn(e)?e:Tt(e),n;return this.isValid()&&r.isValid()?(t=Pn(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function aee(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function iee(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function oee(e,t,r){var n,s,i;if(!this.isValid())return NaN;if(n=Y0(e,this),!n.isValid())return NaN;switch(s=(n.utcOffset()-this.utcOffset())*6e4,t=Pn(t),t){case"year":i=ef(this,n)/12;break;case"month":i=ef(this,n);break;case"quarter":i=ef(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-s)/864e5;break;case"week":i=(this-n-s)/6048e5;break;default:i=this-n}return r?i:bn(i)}function ef(e,t){if(e.date()<t.date())return-ef(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),s,i;return t-n<0?(s=e.clone().add(r-1,"months"),i=(t-n)/(n-s)):(s=e.clone().add(r+1,"months"),i=(t-n)/(s-n)),-(r+i)||0}De.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";De.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function lee(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function cee(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?Jd(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ps(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Jd(r,"Z")):Jd(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function uee(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,s,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(r+n+s+i)}function dee(e){e||(e=this.isUtc()?De.defaultFormatUtc:De.defaultFormat);var t=Jd(this,e);return this.localeData().postformat(t)}function fee(e,t){return this.isValid()&&(Jn(e)&&e.isValid()||Tt(e).isValid())?ns({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mee(e){return this.from(Tt(),e)}function hee(e,t){return this.isValid()&&(Jn(e)&&e.isValid()||Tt(e).isValid())?ns({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pee(e){return this.to(Tt(),e)}function qC(e){var t;return e===void 0?this._locale._abbr:(t=da(e),t!=null&&(this._locale=t),this)}var KC=_n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function GC(){return this._locale}var Xf=1e3,jo=60*Xf,Jf=60*jo,QC=(365*400+97)*24*Jf;function So(e,t){return(e%t+t)%t}function XC(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-QC:new Date(e,t,r).valueOf()}function JC(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-QC:Date.UTC(e,t,r)}function gee(e){var t,r;if(e=Pn(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?JC:XC,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=So(t+(this._isUTC?0:this.utcOffset()*jo),Jf);break;case"minute":t=this._d.valueOf(),t-=So(t,jo);break;case"second":t=this._d.valueOf(),t-=So(t,Xf);break}return this._d.setTime(t),De.updateOffset(this,!0),this}function yee(e){var t,r;if(e=Pn(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?JC:XC,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Jf-So(t+(this._isUTC?0:this.utcOffset()*jo),Jf)-1;break;case"minute":t=this._d.valueOf(),t+=jo-So(t,jo)-1;break;case"second":t=this._d.valueOf(),t+=Xf-So(t,Xf)-1;break}return this._d.setTime(t),De.updateOffset(this,!0),this}function xee(){return this._d.valueOf()-(this._offset||0)*6e4}function vee(){return Math.floor(this.valueOf()/1e3)}function bee(){return new Date(this.valueOf())}function wee(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Nee(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function jee(){return this.isValid()?this.toISOString():null}function See(){return T0(this)}function kee(){return Ra({},Ke(this))}function Dee(){return Ke(this).overflow}function Cee(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}We("N",0,0,"eraAbbr");We("NN",0,0,"eraAbbr");We("NNN",0,0,"eraAbbr");We("NNNN",0,0,"eraName");We("NNNNN",0,0,"eraNarrow");We("y",["y",1],"yo","eraYear");We("y",["yy",2],0,"eraYear");We("y",["yyy",3],0,"eraYear");We("y",["yyyy",4],0,"eraYear");Le("N",q0);Le("NN",q0);Le("NNN",q0);Le("NNNN",$ee);Le("NNNNN",Fee);bt(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var s=r._locale.erasParse(e,n,r._strict);s?Ke(r).era=s:Ke(r).invalidEra=e});Le("y",pl);Le("yy",pl);Le("yyy",pl);Le("yyyy",pl);Le("yo",Bee);bt(["y","yy","yyy","yyyy"],Er);bt(["yo"],function(e,t,r,n){var s;r._locale._eraYearOrdinalRegex&&(s=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[Er]=r._locale.eraYearOrdinalParse(e,s):t[Er]=parseInt(e,10)});function Eee(e,t){var r,n,s,i=this._eras||da("en")._eras;for(r=0,n=i.length;r<n;++r){switch(typeof i[r].since){case"string":s=De(i[r].since).startOf("day"),i[r].since=s.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":s=De(i[r].until).startOf("day").valueOf(),i[r].until=s.valueOf();break}}return i}function Tee(e,t,r){var n,s,i=this.eras(),o,l,c;for(e=e.toUpperCase(),n=0,s=i.length;n<s;++n)if(o=i[n].name.toUpperCase(),l=i[n].abbr.toUpperCase(),c=i[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(l===e)return i[n];break;case"NNNN":if(o===e)return i[n];break;case"NNNNN":if(c===e)return i[n];break}else if([o,l,c].indexOf(e)>=0)return i[n]}function Aee(e,t){var r=e.since<=e.until?1:-1;return t===void 0?De(e.since).year():De(e.since).year()+(t-e.offset)*r}function _ee(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function Pee(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function Mee(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function Ree(){var e,t,r,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=s[e].since<=s[e].until?1:-1,n=this.clone().startOf("day").valueOf(),s[e].since<=n&&n<=s[e].until||s[e].until<=n&&n<=s[e].since)return(this.year()-De(s[e].since).year())*r+s[e].offset;return this.year()}function Oee(e){return ct(this,"_erasNameRegex")||K0.call(this),e?this._erasNameRegex:this._erasRegex}function Iee(e){return ct(this,"_erasAbbrRegex")||K0.call(this),e?this._erasAbbrRegex:this._erasRegex}function Lee(e){return ct(this,"_erasNarrowRegex")||K0.call(this),e?this._erasNarrowRegex:this._erasRegex}function q0(e,t){return t.erasAbbrRegex(e)}function $ee(e,t){return t.erasNameRegex(e)}function Fee(e,t){return t.erasNarrowRegex(e)}function Bee(e,t){return t._eraYearOrdinalRegex||pl}function K0(){var e=[],t=[],r=[],n=[],s,i,o,l,c,u=this.eras();for(s=0,i=u.length;s<i;++s)o=Xs(u[s].name),l=Xs(u[s].abbr),c=Xs(u[s].narrow),t.push(o),e.push(l),r.push(c),n.push(o),n.push(l),n.push(c);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}We(0,["gg",2],0,function(){return this.weekYear()%100});We(0,["GG",2],0,function(){return this.isoWeekYear()%100});function gh(e,t){We(0,[e,e.length],0,t)}gh("gggg","weekYear");gh("ggggg","weekYear");gh("GGGG","isoWeekYear");gh("GGGGG","isoWeekYear");Le("G",dh);Le("g",dh);Le("GG",At,mn);Le("gg",At,mn);Le("GGGG",O0,R0);Le("gggg",O0,R0);Le("GGGGG",uh,lh);Le("ggggg",uh,lh);Mu(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=tt(e)});Mu(["gg","GG"],function(e,t,r,n){t[n]=De.parseTwoDigitYear(e)});function Wee(e){return ZC.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Hee(e){return ZC.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Uee(){return Js(this.year(),1,4)}function zee(){return Js(this.isoWeekYear(),1,4)}function Vee(){var e=this.localeData()._week;return Js(this.year(),e.dow,e.doy)}function Yee(){var e=this.localeData()._week;return Js(this.weekYear(),e.dow,e.doy)}function ZC(e,t,r,n,s){var i;return e==null?Gc(this,n,s).year:(i=Js(e,n,s),t>i&&(t=i),qee.call(this,e,t,r,n,s))}function qee(e,t,r,n,s){var i=PC(e,t,r,n,s),o=Kc(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}We("Q",0,"Qo","quarter");Le("Q",wC);bt("Q",function(e,t){t[qs]=(tt(e)-1)*3});function Kee(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}We("D",["DD",2],"Do","date");Le("D",At,gl);Le("DD",At,mn);Le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});bt(["D","DD"],ys);bt("Do",function(e,t){t[ys]=tt(e.match(At)[0])});var eE=yl("Date",!0);We("DDD",["DDDD",3],"DDDo","dayOfYear");Le("DDD",ch);Le("DDDD",NC);bt(["DDD","DDDD"],function(e,t,r){r._dayOfYear=tt(e)});function Gee(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}We("m",["mm",2],0,"minute");Le("m",At,I0);Le("mm",At,mn);bt(["m","mm"],zn);var Qee=yl("Minutes",!1);We("s",["ss",2],0,"second");Le("s",At,I0);Le("ss",At,mn);bt(["s","ss"],Ks);var Xee=yl("Seconds",!1);We("S",0,0,function(){return~~(this.millisecond()/100)});We(0,["SS",2],0,function(){return~~(this.millisecond()/10)});We(0,["SSS",3],0,"millisecond");We(0,["SSSS",4],0,function(){return this.millisecond()*10});We(0,["SSSSS",5],0,function(){return this.millisecond()*100});We(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});We(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});We(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});We(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Le("S",ch,wC);Le("SS",ch,mn);Le("SSS",ch,NC);var Oa,tE;for(Oa="SSSS";Oa.length<=9;Oa+="S")Le(Oa,pl);function Jee(e,t){t[gi]=tt(("0."+e)*1e3)}for(Oa="S";Oa.length<=9;Oa+="S")bt(Oa,Jee);tE=yl("Milliseconds",!1);We("z",0,0,"zoneAbbr");We("zz",0,0,"zoneName");function Zee(){return this._isUTC?"UTC":""}function ete(){return this._isUTC?"Coordinated Universal Time":""}var _e=_u.prototype;_e.add=YZ;_e.calendar=ZZ;_e.clone=eee;_e.diff=oee;_e.endOf=yee;_e.format=dee;_e.from=fee;_e.fromNow=mee;_e.to=hee;_e.toNow=pee;_e.get=uJ;_e.invalidAt=Dee;_e.isAfter=tee;_e.isBefore=ree;_e.isBetween=nee;_e.isSame=see;_e.isSameOrAfter=aee;_e.isSameOrBefore=iee;_e.isValid=See;_e.lang=KC;_e.locale=qC;_e.localeData=GC;_e.max=SZ;_e.min=jZ;_e.parsingFlags=kee;_e.set=dJ;_e.startOf=gee;_e.subtract=qZ;_e.toArray=wee;_e.toObject=Nee;_e.toDate=bee;_e.toISOString=cee;_e.inspect=uee;typeof Symbol<"u"&&Symbol.for!=null&&(_e[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});_e.toJSON=jee;_e.toString=lee;_e.unix=vee;_e.valueOf=xee;_e.creationData=Cee;_e.eraName=_ee;_e.eraNarrow=Pee;_e.eraAbbr=Mee;_e.eraYear=Ree;_e.year=kC;_e.isLeapYear=cJ;_e.weekYear=Wee;_e.isoWeekYear=Hee;_e.quarter=_e.quarters=Kee;_e.month=AC;_e.daysInMonth=bJ;_e.week=_e.weeks=EJ;_e.isoWeek=_e.isoWeeks=TJ;_e.weeksInYear=Vee;_e.weeksInWeekYear=Yee;_e.isoWeeksInYear=Uee;_e.isoWeeksInISOWeekYear=zee;_e.date=eE;_e.day=_e.days=HJ;_e.weekday=UJ;_e.isoWeekday=zJ;_e.dayOfYear=Gee;_e.hour=_e.hours=XJ;_e.minute=_e.minutes=Qee;_e.second=_e.seconds=Xee;_e.millisecond=_e.milliseconds=tE;_e.utcOffset=MZ;_e.utc=OZ;_e.local=IZ;_e.parseZone=LZ;_e.hasAlignedHourOffset=$Z;_e.isDST=FZ;_e.isLocal=WZ;_e.isUtcOffset=HZ;_e.isUtc=UC;_e.isUTC=UC;_e.zoneAbbr=Zee;_e.zoneName=ete;_e.dates=_n("dates accessor is deprecated. Use date instead.",eE);_e.months=_n("months accessor is deprecated. Use month instead",AC);_e.years=_n("years accessor is deprecated. Use year instead",kC);_e.zone=_n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",RZ);_e.isDSTShifted=_n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",BZ);function tte(e){return Tt(e*1e3)}function rte(){return Tt.apply(null,arguments).parseZone()}function rE(e){return e}var ut=_0.prototype;ut.calendar=WX;ut.longDateFormat=VX;ut.invalidDate=qX;ut.ordinal=QX;ut.preparse=rE;ut.postformat=rE;ut.relativeTime=JX;ut.pastFuture=ZX;ut.set=FX;ut.eras=Eee;ut.erasParse=Tee;ut.erasConvertYear=Aee;ut.erasAbbrRegex=Iee;ut.erasNameRegex=Oee;ut.erasNarrowRegex=Lee;ut.months=gJ;ut.monthsShort=yJ;ut.monthsParse=vJ;ut.monthsRegex=NJ;ut.monthsShortRegex=wJ;ut.week=SJ;ut.firstDayOfYear=CJ;ut.firstDayOfWeek=DJ;ut.weekdays=LJ;ut.weekdaysMin=FJ;ut.weekdaysShort=$J;ut.weekdaysParse=WJ;ut.weekdaysRegex=VJ;ut.weekdaysShortRegex=YJ;ut.weekdaysMinRegex=qJ;ut.isPM=GJ;ut.meridiem=JJ;function Zf(e,t,r,n){var s=da(),i=_s().set(n,t);return s[r](i,e)}function nE(e,t,r){if(oa(e)&&(t=e,e=void 0),e=e||"",t!=null)return Zf(e,t,r,"month");var n,s=[];for(n=0;n<12;n++)s[n]=Zf(e,n,r,"month");return s}function G0(e,t,r,n){typeof e=="boolean"?(oa(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,oa(t)&&(r=t,t=void 0),t=t||"");var s=da(),i=e?s._week.dow:0,o,l=[];if(r!=null)return Zf(t,(r+i)%7,n,"day");for(o=0;o<7;o++)l[o]=Zf(t,(o+i)%7,n,"day");return l}function nte(e,t){return nE(e,t,"months")}function ste(e,t){return nE(e,t,"monthsShort")}function ate(e,t,r){return G0(e,t,r,"weekdays")}function ite(e,t,r){return G0(e,t,r,"weekdaysShort")}function ote(e,t,r){return G0(e,t,r,"weekdaysMin")}Va("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=tt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});De.lang=_n("moment.lang is deprecated. Use moment.locale instead.",Va);De.langData=_n("moment.langData is deprecated. Use moment.localeData instead.",da);var Ls=Math.abs;function lte(){var e=this._data;return this._milliseconds=Ls(this._milliseconds),this._days=Ls(this._days),this._months=Ls(this._months),e.milliseconds=Ls(e.milliseconds),e.seconds=Ls(e.seconds),e.minutes=Ls(e.minutes),e.hours=Ls(e.hours),e.months=Ls(e.months),e.years=Ls(e.years),this}function sE(e,t,r,n){var s=ns(t,r);return e._milliseconds+=n*s._milliseconds,e._days+=n*s._days,e._months+=n*s._months,e._bubble()}function cte(e,t){return sE(this,e,t,1)}function ute(e,t){return sE(this,e,t,-1)}function sj(e){return e<0?Math.floor(e):Math.ceil(e)}function dte(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,s,i,o,l,c;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=sj(xy(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,s=bn(e/1e3),n.seconds=s%60,i=bn(s/60),n.minutes=i%60,o=bn(i/60),n.hours=o%24,t+=bn(o/24),c=bn(aE(t)),r+=c,t-=sj(xy(c)),l=bn(r/12),r%=12,n.days=t,n.months=r,n.years=l,this}function aE(e){return e*4800/146097}function xy(e){return e*146097/4800}function fte(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=Pn(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+aE(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(xy(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function fa(e){return function(){return this.as(e)}}var iE=fa("ms"),mte=fa("s"),hte=fa("m"),pte=fa("h"),gte=fa("d"),yte=fa("w"),xte=fa("M"),vte=fa("Q"),bte=fa("y"),wte=iE;function Nte(){return ns(this)}function jte(e){return e=Pn(e),this.isValid()?this[e+"s"]():NaN}function Vi(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ste=Vi("milliseconds"),kte=Vi("seconds"),Dte=Vi("minutes"),Cte=Vi("hours"),Ete=Vi("days"),Tte=Vi("months"),Ate=Vi("years");function _te(){return bn(this.days()/7)}var Ws=Math.round,mo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Pte(e,t,r,n,s){return s.relativeTime(t||1,!!r,e,n)}function Mte(e,t,r,n){var s=ns(e).abs(),i=Ws(s.as("s")),o=Ws(s.as("m")),l=Ws(s.as("h")),c=Ws(s.as("d")),u=Ws(s.as("M")),d=Ws(s.as("w")),f=Ws(s.as("y")),m=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||l<=1&&["h"]||l<r.h&&["hh",l]||c<=1&&["d"]||c<r.d&&["dd",c];return r.w!=null&&(m=m||d<=1&&["w"]||d<r.w&&["ww",d]),m=m||u<=1&&["M"]||u<r.M&&["MM",u]||f<=1&&["y"]||["yy",f],m[2]=t,m[3]=+e>0,m[4]=n,Pte.apply(null,m)}function Rte(e){return e===void 0?Ws:typeof e=="function"?(Ws=e,!0):!1}function Ote(e,t){return mo[e]===void 0?!1:t===void 0?mo[e]:(mo[e]=t,e==="s"&&(mo.ss=t-1),!0)}function Ite(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=mo,s,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},mo,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),s=this.localeData(),i=Mte(this,!r,n,s),r&&(i=s.pastFuture(+this,i)),s.postformat(i)}var jp=Math.abs;function Gi(e){return(e>0)-(e<0)||+e}function yh(){if(!this.isValid())return this.localeData().invalidDate();var e=jp(this._milliseconds)/1e3,t=jp(this._days),r=jp(this._months),n,s,i,o,l=this.asSeconds(),c,u,d,f;return l?(n=bn(e/60),s=bn(n/60),e%=60,n%=60,i=bn(r/12),r%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=l<0?"-":"",u=Gi(this._months)!==Gi(l)?"-":"",d=Gi(this._days)!==Gi(l)?"-":"",f=Gi(this._milliseconds)!==Gi(l)?"-":"",c+"P"+(i?u+i+"Y":"")+(r?u+r+"M":"")+(t?d+t+"D":"")+(s||n||e?"T":"")+(s?f+s+"H":"")+(n?f+n+"M":"")+(e?f+o+"S":"")):"P0D"}var ot=ph.prototype;ot.isValid=TZ;ot.abs=lte;ot.add=cte;ot.subtract=ute;ot.as=fte;ot.asMilliseconds=iE;ot.asSeconds=mte;ot.asMinutes=hte;ot.asHours=pte;ot.asDays=gte;ot.asWeeks=yte;ot.asMonths=xte;ot.asQuarters=vte;ot.asYears=bte;ot.valueOf=wte;ot._bubble=dte;ot.clone=Nte;ot.get=jte;ot.milliseconds=Ste;ot.seconds=kte;ot.minutes=Dte;ot.hours=Cte;ot.days=Ete;ot.weeks=_te;ot.months=Tte;ot.years=Ate;ot.humanize=Ite;ot.toISOString=yh;ot.toString=yh;ot.toJSON=yh;ot.locale=qC;ot.localeData=GC;ot.toIsoString=_n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",yh);ot.lang=KC;We("X",0,0,"unix");We("x",0,0,"valueOf");Le("x",dh);Le("X",nJ);bt("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});bt("x",function(e,t,r){r._d=new Date(tt(e))});//! moment.js
De.version="2.30.1";LX(Tt);De.fn=_e;De.min=kZ;De.max=DZ;De.now=CZ;De.utc=_s;De.unix=tte;De.months=nte;De.isDate=Au;De.locale=Va;De.invalid=oh;De.duration=ns;De.isMoment=Jn;De.weekdays=ate;De.parseZone=rte;De.localeData=da;De.isDuration=Zd;De.monthsShort=ste;De.weekdaysMin=ote;De.defineLocale=W0;De.updateLocale=rZ;De.locales=nZ;De.weekdaysShort=ite;De.normalizeUnits=Pn;De.relativeTimeRounding=Rte;De.relativeTimeThreshold=Ote;De.calendarFormat=JZ;De.prototype=_e;De.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};De.updateLocale("ko",{months:["1","2","3","4","5","6","7","8","9","10","11","12"],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],weekdays:["","","","","","",""],weekdaysShort:["","","","","","",""],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm"},meridiem:e=>e<12?"":"",week:{dow:0,doy:1}});De.locale("ko");const Lte=IX(De),aj=["#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6","#F3F4F6"],ij=e=>{if(!e)return e;const t=e.split("_");return t.length>1&&t[0].length>2?t[0].substring(0,2)+"_"+t.slice(1).join("_"):e},lc={"2025-01-01":"","2025-01-28":" ","2025-01-29":"","2025-01-30":" ","2025-03-01":"","2025-03-03":"","2025-05-05":"","2025-05-06":"","2025-06-06":"","2025-08-15":"","2025-10-03":"","2025-10-05":" ","2025-10-06":"","2025-10-07":" ","2025-10-08":"","2025-10-09":"","2025-12-25":""},$te=z.memo(({date:e,label:t,filteredEvents:r,selectedDate:n,user:s,isMobileView:i})=>{const o=De(e).format("YYYY-MM-DD"),l=lc[o],c=!!lc[o],u=n&&De(e).isSame(n,"day"),d=r.filter(T=>De(T.start).isSame(e,"day")),f=d.length,m=d.filter(T=>T.assignedTo&&T.assignedTo.includes((s==null?void 0:s.name)||"")).length,y=f-m,j=t.replace(/^0/,""),p=e.getDay()===0,k=e.getDay()===6;let h="#000000";c||p?h="#dc2626":k&&(h="#3b82f6");const v=De(e).isSame(De(),"day"),S=j.length===2,x=i?{backgroundColor:"transparent",color:h,borderRadius:"50%",width:"30px",height:"30px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:v?"700":"400",border:u?"1px solid #1f2937":"1px solid transparent",boxSizing:"border-box",gap:"1px"}:{color:h,fontWeight:v?"700":"400",paddingLeft:S?"0px":"4px"};return a.jsx("div",{className:i?"flex flex-col items-center":"flex items-center gap-2",style:{overflow:"visible",position:"relative",zIndex:10},children:i?a.jsxs("span",{style:x,children:[a.jsx("span",{style:{fontSize:"13px",lineHeight:"1"},children:j}),f>0&&a.jsxs("div",{className:"flex gap-0.5",style:{minHeight:"4px",marginTop:"1px"},children:[Array.from({length:m}).map((T,E)=>a.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#66BB6A",flexShrink:0}},`user-${E}`)),Array.from({length:y}).map((T,E)=>a.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"#757575",flexShrink:0}},`other-${E}`))]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{style:x,children:j}),l&&a.jsx("span",{className:"text-xs font-medium",style:{color:"#ef4444"},children:l})]})})}),Fte=z.memo(({event:e,user:t})=>{const r=e.assignedTo||[],[n,s]=b.useState(window.innerWidth>=768&&window.innerWidth<1024),[i,o]=b.useState(!1),l=t!=null&&t.name?t.name.slice(-2):null,c=l&&["",""].includes(l),u=l&&["","",""].includes(l);return b.useEffect(()=>{const d=()=>{s(window.innerWidth>=768&&window.innerWidth<1024)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),n?a.jsxs("div",{className:"w-full relative block",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),style:{padding:"2px 4px",minHeight:"40px",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[a.jsxs("div",{className:"flex items-center justify-between w-full",style:{fontSize:"11px",opacity:.8,marginBottom:"2px"},children:[!e.isASVisit&&e.projectName&&a.jsxs("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"60%",flexShrink:0},children:["[",ij(e.projectName),"]"]}),r.length>0&&a.jsx("span",{style:{flexShrink:0,fontSize:"11px"},children:r.map((d,f)=>{const m=d==="HV LAB"||d===""&&c||d===""&&u||d===(t==null?void 0:t.name);return a.jsxs(z.Fragment,{children:[a.jsx("span",{style:{fontWeight:m?"bold":"normal"},children:d}),f<r.length-1&&""]},d)})})]}),a.jsx("div",{style:{fontWeight:500,fontSize:"12px",lineHeight:"1.4",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",wordBreak:"keep-all",textOverflow:"ellipsis"},title:e.title,children:e.title}),i&&a.jsxs("div",{className:"absolute z-50 bg-gray-900 text-white text-xs rounded p-2 shadow-lg",style:{bottom:"100%",left:"0",marginBottom:"4px",minWidth:"200px",maxWidth:"300px"},children:[a.jsx("div",{className:"font-semibold mb-1",children:e.title}),e.projectName&&a.jsxs("div",{className:"opacity-90",children:[": ",e.projectName]}),r.length>0&&a.jsxs("div",{className:"opacity-90 mt-1",children:[": ",r.join(", ")]})]})]}):a.jsxs("div",{className:"flex items-center justify-between w-full gap-1.5 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden flex-1",children:[!e.isASVisit&&e.projectName&&a.jsxs("span",{className:"text-xs opacity-70 flex-shrink-0",children:["[",ij(e.projectName),"]"]}),a.jsx("span",{className:"font-medium truncate",children:e.title})]}),r.length>0&&a.jsx("span",{className:"text-xs opacity-80 flex-shrink-0 ml-auto",children:r.map((d,f)=>{const m=d==="HV LAB"||d===""&&c||d===""&&u||d===(t==null?void 0:t.name);return a.jsxs(z.Fragment,{children:[a.jsx("span",{className:m?"font-bold":"",children:d}),f<r.length-1&&""]},d)})})]})}),Bte=()=>{const{schedules:e,loadSchedulesFromAPI:t,addScheduleToAPI:r,updateScheduleInAPI:n,deleteScheduleFromAPI:s,asRequests:i,updateASRequestInAPI:o,loadASRequestsFromAPI:l,constructionPayments:c,updateConstructionPaymentInAPI:u}=Ts(),{user:d}=Ar(),f=Tn(),m=d!=null&&d.name?d.name.slice(-2):null;console.log(" Current user:",d==null?void 0:d.name,"Short name:",m),b.useEffect(()=>{t().catch(C=>{console.error("Failed to load schedules:",C),H.error("  ")})},[t]);const y=C=>{const w=f.findIndex(g=>g.name===C);return w>=0?aj[w%aj.length]:"#e8e2ea"},j=C=>{if(!C||C==="-")return"";const[w,g]=C.split(":"),N=parseInt(w,10),D=parseInt(g,10),P=N>=12?"":"",F=N>12?N-12:N===0?12:N;return D===0?`${P} ${F}`:`${P} ${F} ${D}`},p=f.map(C=>C.name),k=e.filter(C=>!C.asRequestId).filter(C=>(d==null?void 0:d.name)===""?C.project===""||p.includes(C.project):!0).map(C=>{const w=C.project===""?"[]":C.project,g=f.find(A=>A.name===C.project),N=C.time,D=N&&N!=="-"?` - ${j(N)}`:"",P=C.attendees||[],F=P.includes("")||P.includes((d==null?void 0:d.name)||"")||m&&P.includes(m),q=F?new Date(C.start.getTime()-216e5):C.start;return F&&console.log(` User schedule found: ${C.title}, attendees:`,P),{id:C.id,title:C.title+D,originalTitle:C.title,start:q,end:C.end,projectId:(g==null?void 0:g.id)||"",projectName:w||"",type:C.type||"other",phase:"",assignedTo:P,priority:"medium",allDay:!N||N==="-",color:y(C.project||""),isASVisit:!1,time:N,description:C.description}}),h=i.filter(C=>C.scheduledVisitDate).filter(C=>(d==null?void 0:d.name)===""?p.includes(C.project):!0).map(C=>{const w=C.scheduledVisitTime,g=w&&w!=="-"?` - ${j(w)}`:"",N=f.find(P=>P.name===C.project),D=`[AS] ${C.project}`;return{id:`as-${C.id}`,title:D+g,originalTitle:D,start:C.scheduledVisitDate,end:C.scheduledVisitDate,projectId:(N==null?void 0:N.id)||"",projectName:C.project,type:"as_visit",phase:"",assignedTo:C.assignedTo?Array.isArray(C.assignedTo)?C.assignedTo:C.assignedTo.split(",").map(P=>P.trim()):[],priority:"high",allDay:!w||w==="-",color:"#FEF3C7",isASVisit:!0,time:w,description:C.description}}),v=(d==null?void 0:d.role)==="manager"?c.flatMap(C=>{var P,F,q,A,J,W,le,Me;const w=f.find(Ce=>Ce.name===C.project);if(!w){const Ce=[],ze=C.totalAmount+(C.vatType==="percentage"?C.totalAmount*(C.vatPercentage/100):C.vatAmount),rt=new Set(C.payments.flatMap(Ye=>{var Qe;return((Qe=Ye.type)==null?void 0:Qe.split(", ").map(xt=>xt.trim()))||[]}));return!rt.has("")&&((P=C.expectedPaymentDates)!=null&&P.contract)&&Ce.push({id:`payment-${C.id}-contract`,title:"[] ",originalTitle:"[] ",start:new Date(C.expectedPaymentDates.contract),end:new Date(C.expectedPaymentDates.contract),projectId:"",projectName:C.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(ze*.1).toLocaleString()}`}),!rt.has("")&&((F=C.expectedPaymentDates)!=null&&F.start)&&Ce.push({id:`payment-${C.id}-start`,title:"[] ",originalTitle:"[] ",start:new Date(C.expectedPaymentDates.start),end:new Date(C.expectedPaymentDates.start),projectId:"",projectName:C.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(ze*.4).toLocaleString()}`}),!rt.has("")&&((q=C.expectedPaymentDates)!=null&&q.middle)&&Ce.push({id:`payment-${C.id}-middle`,title:"[] ",originalTitle:"[] ",start:new Date(C.expectedPaymentDates.middle),end:new Date(C.expectedPaymentDates.middle),projectId:"",projectName:C.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(ze*.4).toLocaleString()}`}),!rt.has("")&&((A=C.expectedPaymentDates)!=null&&A.final)&&Ce.push({id:`payment-${C.id}-final`,title:"[] ",originalTitle:"[] ",start:new Date(C.expectedPaymentDates.final),end:new Date(C.expectedPaymentDates.final),projectId:"",projectName:C.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(ze*.1).toLocaleString()}`}),Ce}if(!w.startDate||!w.endDate)return[];const g=C.totalAmount+(C.vatType==="percentage"?C.totalAmount*(C.vatPercentage/100):C.vatAmount),N=new Set(C.payments.flatMap(Ce=>{var ze;return((ze=Ce.type)==null?void 0:ze.split(", ").map(rt=>rt.trim()))||[]})),D=[];return!N.has("")&&((J=C.expectedPaymentDates)!=null&&J.contract)&&D.push({id:`payment-${C.id}-contract`,title:"[] ",originalTitle:"[] ",start:new Date(C.expectedPaymentDates.contract),end:new Date(C.expectedPaymentDates.contract),projectId:w.id||"",projectName:C.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(g*.1).toLocaleString()}`}),!N.has("")&&((W=C.expectedPaymentDates)!=null&&W.start)&&D.push({id:`payment-${C.id}-start`,title:"[] ",originalTitle:"[] ",start:new Date(C.expectedPaymentDates.start),end:new Date(C.expectedPaymentDates.start),projectId:w.id||"",projectName:C.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(g*.4).toLocaleString()}`}),!N.has("")&&((le=C.expectedPaymentDates)!=null&&le.middle)&&D.push({id:`payment-${C.id}-middle`,title:"[] ",originalTitle:"[] ",start:new Date(C.expectedPaymentDates.middle),end:new Date(C.expectedPaymentDates.middle),projectId:w.id||"",projectName:C.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (40%): ${Math.round(g*.4).toLocaleString()}`}),!N.has("")&&((Me=C.expectedPaymentDates)!=null&&Me.final)&&D.push({id:`payment-${C.id}-final`,title:"[] ",originalTitle:"[] ",start:new Date(C.expectedPaymentDates.final),end:new Date(C.expectedPaymentDates.final),projectId:w.id||"",projectName:C.project,type:"expected_payment",phase:"",assignedTo:[],priority:"medium",allDay:!0,color:"#DBEAFE",isExpectedPayment:!0,description:` (10%): ${Math.round(g*.1).toLocaleString()}`}),D}):[],S=[...k,...h,...v],T=(C=>{const w=new Map;C.forEach(N=>{if(N.isASVisit||N.isExpectedPayment){const D=`single_${N.id}`;w.set(D,[N])}else{const D=N.start.toISOString().split("T")[0],P=[...N.assignedTo].sort().join(","),F=`${D}_${N.projectName}_${P}`;w.has(F)||w.set(F,[]),w.get(F).push(N)}});const g=[];return w.forEach(N=>{if(N.length===1)g.push(N[0]);else{const D=N[0],P=N.map(Me=>Me.originalTitle||Me.title),F=[...new Set(P)],q=N.filter(Me=>Me.time&&Me.time!=="-").map(Me=>Me.time),A=q.length>0?` - ${q.join(", ")}`:"",J=N.map(Me=>{const Ce=Me.originalTitle||Me.title;return Ce.startsWith(D.projectName+" - ")?Ce.substring(D.projectName.length+3):Ce}),W=[...new Set(J)],le={...D,id:N[0].id,title:`${W.join(", ")}${A}`,originalTitle:F.join(", "),description:N.map(Me=>Me.description||Me.originalTitle||Me.title).join(`
`),assignedTo:[...new Set(N.flatMap(Me=>Me.assignedTo))],mergedEventIds:N.map(Me=>Me.id)};g.push(le)}}),g.sort((N,D)=>N.start.getTime()-D.start.getTime())})(S),[E,_]=b.useState("month"),[M,O]=b.useState(new Date),[R,K]=b.useState(!1),[Q,ne]=b.useState(null),[Z,fe]=b.useState(null),[te,xe]=b.useState(()=>(d==null?void 0:d.name)===""&&f.length>0?f[0].name:"all"),[ie,V]=b.useState(window.innerWidth<768?new Date:null),ge=te==="all"?T:T.filter(C=>C.projectName===te);b.useEffect(()=>{(d==null?void 0:d.name)===""&&f.length>0&&(te==="all"||!f.find(C=>C.name===te))&&xe(f[0].name)},[f,d]),b.useEffect(()=>{const C=()=>{document.querySelectorAll(".rbc-show-more, .rbc-button-link").forEach(F=>{F.style.display="none",F.style.visibility="hidden",F.style.pointerEvents="none"}),document.querySelectorAll('.rbc-overlay, .rbc-overlay-header, .rbc-popup, [class*="rbc-overlay"]').forEach(F=>{F.style.display="none",F.style.visibility="hidden",F.style.opacity="0",F.style.pointerEvents="none",F.style.position="absolute",F.style.left="-9999px",F.style.top="-9999px",F.style.zIndex="-1"})};C();const w=new MutationObserver(C),g=document.querySelector(".rbc-calendar");g&&w.observe(g,{childList:!0,subtree:!0});const N=new MutationObserver(C);return N.observe(document.body,{childList:!0,subtree:!0}),()=>{w.disconnect(),N.disconnect()}},[E,M]);const[G,U]=b.useState({date:null,projectId:"",title:""}),L=z.useRef(!1),Y=z.useRef(null),ue=C=>{L.current=!0,Y.current&&clearTimeout(Y.current);const w={...C,title:C.originalTitle||C.title};fe(null),ne(w),K(!0),Y.current=setTimeout(()=>{L.current=!1,Y.current=null},1500)},ye=C=>{if(L.current)return;const w=window.innerWidth,g=w<768,N=w>=768&&w<1024;if(g){if(C.start){V(C.start);const P=document.querySelector(".md\\:hidden.mt-3.bg-white");P&&P.scrollIntoView({behavior:"smooth",block:"nearest"})}return}const D=C.action==="click"||C.action==="select";N&&!D||g||(fe(C),ne(null),K(!0))},Ne=async()=>{if(!G.projectId||!G.title.trim()){alert("  ");return}const C=f.find(w=>w.id===G.projectId);if(!(!C||!G.date))try{await r({id:Date.now().toString(),title:G.title,start:G.date,end:G.date,type:"other",project:C.name,location:"",attendees:[],description:""}),U({date:null,projectId:"",title:""}),V(null),H.success(" ")}catch(w){console.error("Failed to add schedule:",w),H.error("  ")}},Re=C=>{let w=C.color||"#E0E7FF",g="#1f2937";if(C.isASVisit)w="#E8F5E9",g="#1f2937";else{const N=C.assignedTo&&C.assignedTo.includes("HV LAB"),D=C.assignedTo&&C.assignedTo.includes("")&&m&&["",""].includes(m),P=C.assignedTo&&C.assignedTo.includes("")&&m&&["","",""].includes(m);C.assignedTo&&C.assignedTo.includes((d==null?void 0:d.name)||"")||N||D||P?(w="#FEF3C7",g="#1f2937"):C.color||(w="#e8e2ea")}return{style:{backgroundColor:w,"--event-bg-color":w,borderRadius:"6px",color:g,border:"none",display:"block",fontSize:"0.8125rem",padding:"4px 8px",fontWeight:"500",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",overflow:"hidden"}}},ee=z.useCallback(C=>{const w=De(C).format("YYYY-MM-DD"),g=!!lc[w],N=ie&&De(C).isSame(ie,"day");let D="";return N&&(D+="selected-date "),g&&(D+="holiday-date "),{className:D.trim(),style:{}}},[ie]),[me,I]=b.useState(window.innerWidth<768);b.useEffect(()=>{const C=()=>{I(window.innerWidth<768)};return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]),b.useEffect(()=>{const C=()=>{const w=ie||new Date;fe({start:w,end:w}),ne(null),K(!0)};return window.addEventListener("headerAddButtonClick",C),()=>window.removeEventListener("headerAddButtonClick",C)},[ie]);const se=z.useCallback(({date:C,label:w})=>a.jsx($te,{date:C,label:w,filteredEvents:ge,selectedDate:ie,user:d,isMobileView:me}),[ge,ie,d,me]),ae=z.useCallback(({event:C})=>a.jsx(Fte,{event:C,user:d}),[d]),X=({onNavigate:C})=>{const[w,g]=z.useState(!1),[N,D]=z.useState(De(M).year()),[P,F]=z.useState(De(M).month()),q=window.innerWidth<768,A=()=>{D(De(M).year()),F(De(M).month()),g(!0)},J=()=>{O(De().year(N).month(P).toDate()),g(!1)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`flex flex-col bg-white border-b border-gray-200 ${q?"px-2 py-1":"px-3 md:px-5 py-2"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>C("PREV"),className:"px-2 py-1.5 text-2xl md:text-3xl text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-bold",children:""}),a.jsx("div",{className:"text-base md:text-lg font-bold text-gray-900 hover:bg-gray-50 px-2 md:px-3 py-1 rounded-lg transition-colors cursor-pointer",onClick:A,children:a.jsx("span",{children:De(M).format("YYYY MM")})}),a.jsx("button",{onClick:()=>C("NEXT"),className:"px-2 py-1.5 text-2xl md:text-3xl text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-bold",children:""})]}),a.jsxs("select",{className:"px-3 md:px-4 py-1.5 md:py-2 bg-white text-gray-700 rounded-lg text-xs md:text-sm font-medium focus:outline-none focus:ring-2 focus:ring-gray-300 border border-gray-300",value:te,onChange:W=>xe(W.target.value),style:{appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",backgroundSize:"1.25rem",paddingRight:"2.5rem"},children:[(d==null?void 0:d.name)!==""&&a.jsx("option",{value:"all",children:" "}),f.filter(W=>W.status!=="completed").map(W=>a.jsx("option",{value:W.name,children:W.name},W.id))]})]})}),w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-sm shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:" "}),a.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:()=>D(N-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsxs("span",{className:"text-xl font-bold text-gray-900",children:[N,""]}),a.jsx("button",{onClick:()=>D(N+1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),a.jsx("div",{className:"p-4",children:a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(W=>{const le=P===W-1,Me=De().year()===N&&De().month()===W-1;return a.jsxs("button",{onClick:()=>F(W-1),className:`py-3 px-4 rounded-lg text-sm font-medium transition-colors ${le?"bg-gray-900 text-white":Me?"bg-gray-100 text-gray-900 border-2 border-gray-900":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[W,""]},W)})})}),a.jsxs("div",{className:"p-4 border-t border-gray-200 flex gap-2",children:[a.jsx("button",{onClick:()=>{O(new Date),g(!1)},className:"flex-1 py-2 px-4 bg-gray-100 text-gray-900 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:""}),a.jsx("button",{onClick:J,className:"flex-1 py-2 px-4 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:""})]})]})})]})},we=()=>null,Ee=b.useMemo(()=>({toolbar:X,event:ae,month:{dateHeader:se,showMore:we}}),[se,ae]),de=z.useMemo(()=>{if(!ie)return[];const w=[...ge.filter(g=>De(g.start).isSame(ie,"day"))].sort((g,N)=>{const D=g.assignedTo&&g.assignedTo.includes("HV LAB"),P=g.assignedTo&&g.assignedTo.includes("")&&m&&["",""].includes(m),F=g.assignedTo&&g.assignedTo.includes("")&&m&&["","",""].includes(m),q=g.assignedTo&&m&&g.assignedTo.includes(m)||g.assignedTo&&(d==null?void 0:d.name)&&g.assignedTo.includes(d.name)||D||P||F,A=N.assignedTo&&N.assignedTo.includes("HV LAB"),J=N.assignedTo&&N.assignedTo.includes("")&&m&&["",""].includes(m),W=N.assignedTo&&N.assignedTo.includes("")&&m&&["","",""].includes(m),le=N.assignedTo&&m&&N.assignedTo.includes(m)||N.assignedTo&&(d==null?void 0:d.name)&&N.assignedTo.includes(d.name)||A||J||W;return q&&!le?-1:!q&&le?1:new Date(g.start).getTime()-new Date(N.start).getTime()});return console.log("Sorted events:",w.map(g=>({title:g.title,assignedTo:g.assignedTo,user:d==null?void 0:d.name,userShort:m}))),w},[ie,ge,d,m]);return b.useEffect(()=>{const w=setTimeout(()=>{const g=me?document.querySelectorAll(".rbc-month-view td.rbc-date-cell"):document.querySelectorAll(".rbc-date-cell"),N=document.querySelectorAll(".rbc-month-row"),D=[];N.forEach((Ce,ze)=>{const rt=Ce.querySelectorAll(".rbc-date-cell");let Ye=0;rt.forEach(Qe=>{const xt=Qe.querySelector("button");let dt=xt==null?void 0:xt.textContent;if(!dt){const Ft=Qe.querySelector("span");dt=Ft==null?void 0:Ft.textContent}if(dt&&!isNaN(parseInt(dt))){const Ft=De(M).date(parseInt(dt)),pr=ge.filter($=>De($.start).isSame(Ft,"day"));Ye=Math.max(Ye,pr.length)}}),D.push(Ye)});const P=100,F=18,q=25,A=Math.floor((P-q)/F),J=D.length,W=P*J,le=D.map(Ce=>Ce<=A?P:q+Ce*F+10),Me=le.reduce((Ce,ze)=>Ce+ze,0);if(Me>W){const Ce=le.map((Ye,Qe)=>({index:Qe,height:Ye,overflow:Ye>P})),ze=Ce.filter(Ye=>Ye.overflow).reduce((Ye,Qe)=>Ye+(Qe.height-P),0),rt=Ce.filter(Ye=>!Ye.overflow);if(rt.length>0){const Ye=W-ze-rt.length*P,Qe=Math.max(50,P+Ye/rt.length);N.forEach((xt,dt)=>{const pr=le[dt]>P?le[dt]:Qe;xt.style.height=`${pr}px`,xt.style.minHeight=`${pr}px`})}else{const Ye=W/Me;N.forEach((Qe,xt)=>{const dt=Math.max(80,le[xt]*Ye);Qe.style.height=`${dt}px`,Qe.style.minHeight=`${dt}px`})}}else{const Ce=le.reduce((Qe,xt)=>Qe+(xt>P?xt:0),0),ze=le.filter(Qe=>Qe<=P).length,rt=W-Ce,Ye=ze>0?rt/ze:P;N.forEach((Qe,xt)=>{const dt=le[xt]>P?le[xt]:Ye;Qe.style.height=`${dt}px`,Qe.style.minHeight=`${dt}px`})}g.forEach(Ce=>{const ze=Ce.querySelector("button");let rt=ze==null?void 0:ze.textContent;if(!rt){const dt=Ce.querySelector("span");rt=dt==null?void 0:dt.textContent}if(!rt||isNaN(parseInt(rt)))return;const Ye=De(M).date(parseInt(rt)),Qe=ge.filter(dt=>De(dt.start).isSame(Ye,"day"));Qe.length>0?Ce.setAttribute("data-event-count",Qe.length.toString()):Ce.removeAttribute("data-event-count");const xt=Ye.clone().toDate();if(ie&&De(xt).isSame(ie,"day")?Ce.classList.add("selected-date"):Ce.classList.remove("selected-date"),me){const dt=Ce,Ft=dt._mobileClickHandler;Ft&&Ce.removeEventListener("click",Ft);const pr=$=>{if($.target.closest(".rbc-event"))return;const re=Ye.clone().toDate();V(re);const je=document.querySelector(".md\\:hidden.mt-3.bg-white");je&&je.scrollIntoView({behavior:"smooth",block:"nearest"})};dt._mobileClickHandler=pr,Ce.addEventListener("click",pr,!0),Ce.style.cursor="pointer",Ce.style.touchAction="manipulation"}})},200);return()=>{clearTimeout(w),me&&document.querySelectorAll(".rbc-month-view td.rbc-date-cell").forEach(N=>{const D=N,P=D._mobileClickHandler;P&&(N.removeEventListener("click",P),delete D._mobileClickHandler)})}},[ge,M,me,ie]),a.jsxs("div",{className:"space-y-3 md:space-y-2",children:[G.date&&a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 md:p-4 shadow-sm",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"text-xs md:text-sm font-semibold text-gray-900 md:min-w-[80px]",children:De(G.date).format("MM DD")}),a.jsx("select",{value:G.projectId,onChange:C=>U({...G,projectId:C.target.value}),className:"px-3 md:px-4 py-2 border border-gray-300 rounded-lg text-xs md:text-sm focus:outline-none focus:ring-2 focus:ring-gray-500",children:f.filter(C=>C.status!=="completed").map(C=>a.jsx("option",{value:C.id,children:C.name},C.id))}),a.jsx("input",{type:"text",value:G.title,onChange:C=>U({...G,title:C.target.value}),onKeyPress:C=>{C.key==="Enter"&&Ne()},placeholder:"  ...",className:"flex-1 px-3 md:px-4 py-2 border border-gray-300 rounded-lg text-xs md:text-sm focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:Ne,className:"flex-1 md:flex-none px-4 md:px-5 py-2 bg-gray-900 text-white text-xs md:text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors",children:""}),a.jsx("button",{onClick:()=>{U({date:null,projectId:"",title:""}),V(null)},className:"flex-1 md:flex-none px-4 md:px-5 py-2 bg-white border border-gray-300 text-gray-700 text-xs md:text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:""})]})]})}),a.jsxs("div",{className:"flex flex-col md:block",children:[a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm calendar-container",style:{paddingBottom:0},children:a.jsx(AX,{localizer:Lte,events:ge,startAccessor:"start",endAccessor:"end",view:E,onView:_,date:M,onNavigate:O,onSelectEvent:ue,onSelectSlot:ye,selectable:!0,longPressThreshold:0,eventPropGetter:Re,dayPropGetter:ee,components:Ee,popup:!1,doShowMoreDrillDown:!1,onShowMore:()=>{},showAllEvents:!0,messages:{today:"",previous:"",next:"",month:"",week:"",day:"",agenda:"",date:"",time:"",event:"",noEventsInRange:"   ",showMore:C=>`+${C} `}},`calendar-${(ie==null?void 0:ie.getTime())||"no-selection"}`)}),ie&&a.jsxs("div",{className:"md:hidden mt-3 bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:De(ie).format("MM DD dddd")}),lc[De(ie).format("YYYY-MM-DD")]&&a.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-red-50 text-red-600",children:lc[De(ie).format("YYYY-MM-DD")]})]}),a.jsx("button",{onClick:()=>V(null),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"max-h-[35vh] overflow-y-auto",children:de.length===0?a.jsx("div",{className:"p-4 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:" "})}):a.jsx("div",{className:"divide-y divide-gray-100",children:de.map(C=>{const w=C.assignedTo&&C.assignedTo.includes("HV LAB"),g=C.assignedTo&&C.assignedTo.includes("")&&m&&["",""].includes(m),N=C.assignedTo&&C.assignedTo.includes("")&&m&&["","",""].includes(m),P=C.assignedTo&&(C.assignedTo.includes((d==null?void 0:d.name)||"")||m&&C.assignedTo.includes(m))||w||g||N,F=!C.color&&!P;return a.jsx("div",{onClick:()=>{const q={...C,title:C.originalTitle||C.title};ue(q)},className:`p-3 transition-colors cursor-pointer ${P?"bg-yellow-50 hover:bg-yellow-100 active:bg-yellow-200":F?"hover:bg-purple-50 active:bg-purple-100":"hover:bg-gray-50 active:bg-gray-100"}`,style:F?{backgroundColor:"#f3f0f5"}:void 0,children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("div",{className:"w-1 h-full rounded-full flex-shrink-0",style:{backgroundColor:P?"#FEF3C7":C.color||"#e8e2ea",minHeight:"28px"}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:C.title}),C.projectName&&a.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:C.projectName}),C.assignedTo&&C.assignedTo.length>0&&a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:["","",""].every(J=>C.assignedTo.includes(J))?"":C.assignedTo.join(", ")})]}),a.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},C.id)})})})]})]}),R&&a.jsx(Ok,{event:Q,slotInfo:Z,defaultProjectName:te!=="all"?te:void 0,onClose:()=>{K(!1),ne(null),fe(null)},onSave:async C=>{console.log(" Schedule.tsx onSave called with newEvent:",C);try{if(Q)if(Q.id.startsWith("as-")){const w=Q.id.replace("as-","");let g="";C.assignedTo&&Array.isArray(C.assignedTo)&&C.assignedTo.length>0?g=C.assignedTo.join(", "):Q.assignedTo&&Array.isArray(Q.assignedTo)?g=Q.assignedTo.join(", "):typeof Q.assignedTo=="string"&&(g=Q.assignedTo),await o(w,{project:C.title||Q.title,assignedTo:g,scheduledVisitDate:C.start,scheduledVisitTime:C.time||Q.time}),H.success("AS   "),await l(),K(!1)}else if(Q.id.startsWith("payment-")){const w=Q.id.split("-"),g=w[1],N=w[2],D=c.find(P=>P.id===g);if(D){const P={...D.expectedPaymentDates};P[N]=C.start,await u(g,{expectedPaymentDates:P}),H.success("  ")}}else{console.log(" Updating schedule with projectId:",C.projectId,"projectName:",C.projectName);let w=C.title;const g=/ - (|) \d{1,2}( \d{1,2})?$/;if(w=w.replace(g,""),Q.mergedEventIds&&Q.mergedEventIds.length>0){console.log(" Updating merged schedules:",Q.mergedEventIds);const N=(Q.originalTitle||Q.title).split(", "),D=w.split(", ");for(let P=0;P<Q.mergedEventIds.length;P++){const F=Q.mergedEventIds[P],q=D[P]||N[P]||w;await n(F,{title:q.trim(),start:C.start,end:C.end,type:"other",project:C.projectId||C.projectName,location:"",attendees:C.assignedTo||[],description:C.description,time:C.time})}H.success(`${Q.mergedEventIds.length}  `)}else await n(Q.id,{title:w,start:C.start,end:C.end,type:"other",project:C.projectId||C.projectName,location:"",attendees:C.assignedTo||[],description:C.description,time:C.time}),H.success(" ");await t()}else console.log(" Adding schedule with projectId:",C.projectId,"projectName:",C.projectName),await r({id:Date.now().toString(),title:C.title,start:C.start,end:C.end,type:"other",project:C.projectId||C.projectName,location:"",attendees:C.assignedTo||[],description:C.description,time:C.time}),H.success(" ");K(!1)}catch(w){console.error("Failed to save schedule:",w),H.error("  ")}},onDelete:async C=>{try{if(C.startsWith("payment-")){const w=C.split("-"),g=w[1],N=w[2],D=c.find(P=>P.id===g);if(D){const P={...D.expectedPaymentDates};delete P[N],await u(g,{expectedPaymentDates:P}),H.success("  ")}}else if(C.startsWith("as-")){const w=C.replace("as-","");await o(w,{scheduledVisitDate:null,scheduledVisitTime:null}),H.success("AS   ")}else{const w=T.find(g=>g.id===C);if(w!=null&&w.mergedEventIds&&w.mergedEventIds.length>0){console.log("Deleting merged schedules:",w.mergedEventIds);for(const g of w.mergedEventIds)await s(g);H.success(`${w.mergedEventIds.length}  `)}else await s(C),H.success(" ")}K(!1)}catch(w){console.error("Failed to delete schedule:",w),H.error("  ")}}})]})},$s={async getProjectLogs(e){try{return(await Te.get(`/site-logs/project/${encodeURIComponent(e)}`)).data}catch(t){return console.error("Failed to get project logs:",t),[]}},async getAllLogs(){try{return(await Te.get("/site-logs")).data}catch(e){return console.error("Failed to get all logs:",e),[]}},async createLog(e){try{return(await Te.post("/site-logs",e)).data}catch(t){throw console.error("Failed to create log:",t),t}},async updateLog(e,t){try{return(await Te.put(`/site-logs/${e}`,t)).data}catch(r){throw console.error("Failed to update log:",r),r}},async deleteLog(e){try{return(await Te.delete(`/site-logs/${e}`)).data}catch(t){throw console.error("Failed to delete log:",t),t}},async getLogsByDateRange(e,t,r){try{return(await Te.get("/site-logs/range",{params:{project:e,startDate:t.toISOString(),endDate:r.toISOString()}})).data}catch(n){return console.error("Failed to get logs by date range:",n),[]}}},Wte=()=>{const{user:e}=Ar(),t=Tn(),[r,n]=b.useState([]),[s,i]=b.useState(""),o=b.useRef(null),[l,c]=b.useState(new Date),[u,d]=b.useState(!1),[f,m]=b.useState({show:!1,url:null}),[y,j]=b.useState(!1),[p,k]=b.useState(0),[h,v]=b.useState(new Date),[S,x]=b.useState(1),[T,E]=b.useState({x:0,y:0}),[_,M]=b.useState(!1),[O,R]=b.useState({x:0,y:0}),[K,Q]=b.useState(null),[ne,Z]=b.useState(null),[fe,te]=b.useState(!1),[xe,ie]=b.useState(0),[V,ge]=b.useState(null),[G,U]=b.useState({notes:"",images:[]});b.useRef(null);const[L,Y]=b.useState(null);b.useRef(null),b.useEffect(()=>{if(t.length>0&&!s){const g=`siteLog_lastProject_${(e==null?void 0:e.id)||(e==null?void 0:e.name)}`,N=localStorage.getItem(g);N&&t.find(D=>D.name===N)?i(N):i(t[0].name)}},[t,e]),b.useEffect(()=>{if(s&&e){const g=`siteLog_lastProject_${e.id||e.name}`;localStorage.setItem(g,s)}},[s,e]),b.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]),b.useEffect(()=>{ue()},[s]),b.useEffect(()=>{const g=Se(l,"yyyy-MM-dd"),N=r.find(D=>{try{const P=D.date?new Date(D.date):null;return P&&!isNaN(P.getTime())&&Se(P,"yyyy-MM-dd")===g&&D.project===s}catch{return!1}});N&&N.notes?U(D=>({...D,notes:N.notes||""})):U(D=>({...D,notes:""}))},[l,s,r]);const ue=async()=>{if(s)try{const g=await $s.getProjectLogs(s);n(g.map(N=>({...N,id:N._id||N.id,date:N.date?new Date(N.date):new Date,createdAt:N.created_at?new Date(N.created_at):new Date})))}catch(g){console.error("Failed to load site logs:",g),n([])}},ye=(g,N=1920,D=1080,P=.8)=>new Promise((F,q)=>{const A=new FileReader;A.onload=J=>{var le;const W=new Image;W.onload=()=>{const Me=document.createElement("canvas");let Ce=W.width,ze=W.height;if(Ce>N||ze>D){const Ye=Math.min(N/Ce,D/ze);Ce*=Ye,ze*=Ye}Me.width=Ce,Me.height=ze;const rt=Me.getContext("2d");if(!rt){q(new Error("Canvas context not available"));return}rt.drawImage(W,0,0,Ce,ze),Me.toBlob(Ye=>{if(!Ye){q(new Error("Failed to compress image"));return}const Qe=new FileReader;Qe.onload=()=>F(Qe.result),Qe.readAsDataURL(Ye)},g.type,P)},W.src=(le=J.target)==null?void 0:le.result},A.readAsDataURL(g)}),Ne=b.useCallback(async g=>{const D=Array.from(g).filter(F=>F.type.startsWith("image/"));if(D.length===0){H.error("   ");return}if(D.length>100){H.error("  100  ");return}if(!s){H.error(" ");return}j(!0),H.loading(`${D.length}  ...`);const P=D.map(F=>ye(F));try{const F=await Promise.all(P),q=Se(l,"yyyy-MM-dd"),A=r.find(le=>{try{const Me=le.date?new Date(le.date):null;return Me&&!isNaN(Me.getTime())&&Se(Me,"yyyy-MM-dd")===q&&le.project===s}catch{return!1}}),J=20,W=[];for(let le=0;le<F.length;le+=J)W.push(F.slice(le,le+J));if(H.dismiss(),A){let le=[...A.images];for(let Me=0;Me<W.length;Me++)H.loading(`  ... (${Me+1}/${W.length})`),le=[...le,...W[Me]],await $s.updateLog(A.id,{project:A.project,date:A.date,images:le,notes:A.notes||""}),H.dismiss();H.success(`${F.length}  `)}else{H.loading(`  ... (1/${W.length})`);const le={project:s,date:l,images:W[0],notes:"",createdBy:(e==null?void 0:e.name)||""},Me=await $s.createLog(le);if(H.dismiss(),W.length>1){let Ce=[...W[0]];for(let ze=1;ze<W.length;ze++)H.loading(`  ... (${ze+1}/${W.length})`),Ce=[...Ce,...W[ze]],await $s.updateLog(Me._id||Me.id,{project:s,date:l,images:Ce,notes:""}),H.dismiss()}H.success(`${F.length}  `)}await ue()}catch(F){console.error("Failed to save images:",F),H.error("  ")}finally{j(!1)}},[s,l,e,r,ue]),Re=b.useCallback(g=>{g.preventDefault(),Ne(g.dataTransfer.files)},[Ne]);b.useEffect(()=>{const g=N=>{var q;const D=(q=N.clipboardData)==null?void 0:q.items;if(!D)return;const P=Array.from(D).filter(A=>A.type.startsWith("image/"));if(P.length===0)return;N.preventDefault();const F=P.map(A=>A.getAsFile()).filter(Boolean);Ne(F)};return document.addEventListener("paste",g),()=>document.removeEventListener("paste",g)},[Ne]);const ee=b.useCallback(async g=>{if(!(!s||!g))try{const N=Se(l,"yyyy-MM-dd"),D=r.find(P=>{try{const F=P.date?new Date(P.date):null;return F&&!isNaN(F.getTime())&&Se(F,"yyyy-MM-dd")===N&&P.project===s}catch{return!1}});if(D)await $s.updateLog(D.id,{project:D.project,date:D.date,images:D.images,notes:g});else{const P={project:s,date:l,images:G.images,notes:g,createdBy:(e==null?void 0:e.name)||""};await $s.createLog(P)}await ue()}catch(N){console.error("Failed to auto-save site log:",N)}},[s,l,r,G.images,e,ue]),me=async g=>{if(window.confirm("  ?"))try{await $s.deleteLog(g),H.success(" "),await ue()}catch(N){console.error("Failed to delete site log:",N),H.error("  ")}},I=async(g,N)=>{if(!window.confirm("  ?"))return;const D=r.find(P=>P.id===g);if(D)try{const P=D.images.filter((F,q)=>q!==N);P.length===0&&!D.notes?await me(g):(await $s.updateLog(g,{project:D.project,date:D.date,images:P,notes:D.notes}),n(F=>F.map(q=>q.id===g?{...q,images:P}:q)),H.success(" "))}catch(P){console.error("Failed to delete image:",P),H.error("  ")}},se=()=>{const g=h.getFullYear(),N=h.getMonth(),D=new Date(g,N,1),P=new Date(D);P.setDate(P.getDate()-D.getDay());const F=[],q=new Date(P);for(let A=0;A<42;A++){const J=r.filter(W=>{try{const le=W.date?new Date(W.date):null;return le&&!isNaN(le.getTime())&&Se(le,"yyyy-MM-dd")===Se(q,"yyyy-MM-dd")}catch{return!1}});F.push({date:new Date(q),logs:J,hasImages:J.some(W=>W.images&&W.images.length>0)}),q.setDate(q.getDate()+1)}return F},ae=g=>{const N=new Date(h);N.setMonth(N.getMonth()+g),v(N)},X=r.reduce((g,N)=>{try{const D=N.date?new Date(N.date):null;if(D&&!isNaN(D.getTime())){const P=Se(D,"yyyy-MM-dd");g[P]||(g[P]=[]),g[P].push(N)}}catch{}return g},{});Object.keys(X).sort((g,N)=>N.localeCompare(g));const we=(g,N)=>{const D=g.clientX-N.clientX,P=g.clientY-N.clientY;return Math.sqrt(D*D+P*P)},Ee=(g,N)=>({x:(g.clientX+N.clientX)/2,y:(g.clientY+N.clientY)/2}),de=(g,N=0)=>{m({show:!0,url:g[N],images:g}),k(N),x(1),E({x:0,y:0}),Q(null),Z(null),te(!1)},C=g=>{if(!f.images)return;const N=(p+g+f.images.length)%f.images.length;k(N),m(D=>({...D,url:f.images[N]}))},w=async(g,N)=>{const D=r.find(P=>P.id===g);if(D)try{const P={...D,images:[...D.images,...N]};await $s.updateLog(g,{project:D.project,date:D.date,images:P.images,notes:D.notes}),n(F=>F.map(q=>q.id===g?P:q)),H.success(`${N.length}  `),Y(null)}catch(P){console.error("Failed to add images to log:",P),H.error("  ")}};return b.useCallback((g,N)=>{const P=Array.from(N).filter(q=>q.type.startsWith("image/"));if(P.length===0){H.error("   ");return}const F=P.map(q=>new Promise(A=>{const J=new FileReader;J.onload=W=>{var le;A((le=W.target)==null?void 0:le.result)},J.readAsDataURL(q)}));Promise.all(F).then(q=>{w(g,q)})},[r]),b.useEffect(()=>{const g=N=>{if(f.show)switch(N.key){case"ArrowLeft":N.preventDefault(),f.images&&f.images.length>1&&C(-1);break;case"ArrowRight":N.preventDefault(),f.images&&f.images.length>1&&C(1);break;case"Escape":N.preventDefault(),m({show:!1,url:null});break}};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[f.show,f.images,p]),a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 portrait:grid-cols-1 landscape:md:grid-cols-12 landscape:lg:grid-cols-12 gap-3 md:gap-4",children:[a.jsxs("div",{className:"portrait:col-span-1 landscape:md:col-span-4 landscape:lg:col-span-3 space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 md:p-4",children:[a.jsx("div",{className:"mb-4",children:a.jsx("select",{value:s,onChange:g=>i(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:t.map(g=>a.jsx("option",{value:g.name,children:g.name},g.id))})}),a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("button",{onClick:()=>ae(-1),className:"p-1.5 hover:bg-gray-100 rounded transition-colors",children:a.jsx(Pf,{className:"h-4 w-4"})}),a.jsx("h3",{className:"text-sm font-semibold",children:Se(h,"yyyy M")}),a.jsx("button",{onClick:()=>ae(1),className:"p-1.5 hover:bg-gray-100 rounded transition-colors",children:a.jsx(Jb,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-0.5",children:[["","","","","","",""].map(g=>a.jsx("div",{className:"text-center text-xs font-medium text-gray-600 py-1",children:g},g)),se().map((g,N)=>{const D=g.date.getMonth()===h.getMonth(),P=Se(g.date,"yyyy-MM-dd")===Se(new Date,"yyyy-MM-dd"),F=Se(g.date,"yyyy-MM-dd")===Se(l,"yyyy-MM-dd");return a.jsxs("div",{onClick:()=>c(g.date),className:`text-center p-2 text-xs cursor-pointer rounded transition-colors min-h-[48px] flex flex-col items-center justify-center ${D?"text-gray-700":"text-gray-300"} ${P?"bg-blue-100":""} ${F?"bg-gray-900 text-white":"hover:bg-gray-100"} ${g.hasImages?"font-bold":""}`,children:[a.jsx("span",{children:Se(g.date,"d")}),g.hasImages&&a.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-0.5"})]},N)})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 md:p-4",children:[a.jsxs("h2",{className:"text-lg font-semibold mb-4",children:[Se(l,"M d"),"  "]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),a.jsx("textarea",{value:G.notes,onChange:g=>{const N=g.target.value;U(D=>({...D,notes:N})),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{ee(N)},1500)},rows:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 resize-none",placeholder:"     ( )"})]})})]})]}),a.jsxs("div",{className:`portrait:col-span-1 landscape:md:col-span-8 landscape:lg:col-span-9 bg-white rounded-lg shadow-sm border border-gray-200 p-3 md:p-4 transition-all ${u?"ring-2 ring-blue-400 bg-blue-50":""}`,onDragOver:g=>{g.preventDefault(),d(!0)},onDragLeave:g=>{g.currentTarget.contains(g.relatedTarget)||d(!1)},onDrop:g=>{g.preventDefault(),d(!1),Re(g)},children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-4",children:[a.jsxs("span",{children:[Se(l,"yyyy M d",{locale:it})," "]}),a.jsxs("span",{className:"text-sm font-normal text-gray-600",children:[": ",(e==null?void 0:e.name)||"  "]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{const g=document.createElement("input");g.type="file",g.multiple=!0,g.accept="image/*",g.onchange=N=>{const D=N.target;D.files&&Ne(D.files)},g.click()},className:"p-1.5 hover:bg-gray-200 rounded transition-colors",title:" ",children:a.jsx(aa,{className:"h-5 w-5 text-gray-600"})}),a.jsx("button",{onClick:()=>{const g=Se(l,"yyyy-MM-dd"),N=r.filter(D=>{try{const P=D.date?new Date(D.date):null;return P&&!isNaN(P.getTime())&&Se(P,"yyyy-MM-dd")===g}catch{return!1}});N.length>0&&window.confirm(`${Se(l,"M d")}   ?`)&&N.forEach(D=>me(D.id))},className:"p-1.5 hover:bg-gray-200 rounded transition-colors",title:" ",children:a.jsx(Et,{className:"h-5 w-5 text-red-500"})})]})]}),a.jsx("div",{className:"space-y-6 max-h-[990px] overflow-y-auto",children:(()=>{const g=Se(l,"yyyy-MM-dd"),N=r.filter(D=>{try{const P=D.date?new Date(D.date):null;return P&&!isNaN(P.getTime())&&Se(P,"yyyy-MM-dd")===g}catch{return!1}});return N.length>0?a.jsx("div",{className:"space-y-4",children:N.map(D=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[D.notes&&a.jsx("div",{className:"mb-3",children:a.jsx("p",{className:"text-sm text-gray-700",children:D.notes})}),a.jsx("div",{className:"min-h-[600px]",children:D.images&&D.images.length>0?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3",children:D.images.map((P,F)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:P,alt:` ${F+1}`,className:"w-full aspect-[4/3] object-cover rounded-lg cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>de(D.images,F)}),a.jsx("button",{onClick:()=>de(D.images,F),className:"absolute top-2 right-2 p-1.5 bg-black bg-opacity-50 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(M4,{className:"h-4 w-4"})}),a.jsx("button",{onClick:q=>{q.stopPropagation(),I(D.id,F)},className:"absolute top-2 left-2 p-1.5 bg-red-600 bg-opacity-80 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity hover:bg-opacity-100",children:a.jsx(Et,{className:"h-4 w-4"})}),a.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:[F+1," / ",D.images.length]})]},F))}):a.jsx("div",{className:"flex items-center justify-center h-[600px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ks,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-400",children:"  +  "})]})})})]},D.id))}):a.jsxs("div",{children:[a.jsxs("div",{className:"rounded-lg p-12 text-center",children:[a.jsx(j4,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),a.jsxs("p",{className:"text-lg font-medium text-gray-700 mb-2",children:[Se(l,"M d"),"   "]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"    "}),a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Ctrl+V    "}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:D=>D.target.files&&Ne(D.target.files),className:"hidden",id:"main-image-upload"}),a.jsxs("label",{htmlFor:"main-image-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[a.jsx(ks,{className:"h-4 w-4 mr-2"})," "]})]}),N.length===0&&G.images.length===0&&a.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"       "})]})})()})]})]}),f.show&&f.url&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center overflow-hidden",onClick:()=>{m({show:!1,url:null}),x(1),E({x:0,y:0})},onWheel:g=>{g.preventDefault();const N=g.deltaY>0?-.1:.1;x(D=>Math.max(.5,Math.min(5,D+N)))},children:a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:[a.jsx("button",{onClick:g=>{g.stopPropagation(),m({show:!1,url:null}),x(1),E({x:0,y:0})},className:"absolute top-4 right-4 p-2 bg-white bg-opacity-20 backdrop-blur rounded-full hover:bg-opacity-30 z-10",children:a.jsx(et,{className:"h-6 w-6 text-white"})}),S!==1&&a.jsxs("div",{className:"absolute top-4 left-4 bg-white bg-opacity-20 text-white px-3 py-2 rounded-lg text-sm backdrop-blur",children:[Math.round(S*100),"%"]}),f.images&&f.images.length>1&&a.jsx("button",{onClick:g=>{g.stopPropagation(),C(-1),x(1),E({x:0,y:0})},className:"absolute left-4 p-3 bg-white bg-opacity-20 backdrop-blur rounded-full hover:bg-opacity-30",children:a.jsx(Pf,{className:"h-6 w-6 text-white"})}),a.jsx("div",{className:"w-full h-full flex items-center justify-center",onMouseDown:g=>{S>1&&(M(!0),R({x:g.clientX-T.x,y:g.clientY-T.y}))},onMouseMove:g=>{_&&S>1&&E({x:g.clientX-O.x,y:g.clientY-O.y})},onMouseUp:()=>M(!1),onMouseLeave:()=>M(!1),onTouchStart:g=>{if(g.touches.length===2){g.preventDefault(),te(!0);const N=we(g.touches[0],g.touches[1]),D=Ee(g.touches[0],g.touches[1]);Q(N),Z(D)}else if(g.touches.length===1&&S>1&&!fe){const N=g.touches[0];R({x:N.clientX-T.x,y:N.clientY-T.y})}},onTouchMove:g=>{if(g.touches.length===2){g.preventDefault(),te(!0);const N=we(g.touches[0],g.touches[1]),D=Ee(g.touches[0],g.touches[1]);if(K&&ne){const P=N/K,F=Math.max(.5,Math.min(5,S*P)),q=D.x-ne.x,A=D.y-ne.y,J=F/S,W=T.x*J+q,le=T.y*J+A;x(F),E({x:W,y:le})}Q(N),Z(D)}else if(g.touches.length===1&&S>1&&!fe){g.preventDefault();const N=g.touches[0];E({x:N.clientX-O.x,y:N.clientY-O.y})}},onTouchEnd:g=>{if(g.touches.length===0){const N=Date.now(),D=g.changedTouches[0],P={x:D.clientX,y:D.clientY};if(N-xe<300&&V&&Math.abs(P.x-V.x)<30&&Math.abs(P.y-V.y)<30&&!fe){if(S===1){const A=g.currentTarget.getBoundingClientRect(),J=P.x-A.left-A.width/2,W=P.y-A.top-A.height/2;x(2.5),E({x:-J*1.5,y:-W*1.5})}else x(1),E({x:0,y:0});ie(0),ge(null)}else ie(N),ge(P);Q(null),Z(null),te(!1)}else if(g.touches.length===1&&fe){Q(null),Z(null),te(!1);const N=g.touches[0];R({x:N.clientX-T.x,y:N.clientY-T.y})}},onDoubleClick:g=>{g.stopPropagation();const N=g.currentTarget.getBoundingClientRect(),D=g.clientX-N.left-N.width/2,P=g.clientY-N.top-N.height/2;S===1?(x(2.5),E({x:-D*1.5,y:-P*1.5})):(x(1),E({x:0,y:0}))},children:a.jsx("img",{src:f.url,alt:" ",style:{transform:`scale(${S}) translate(${T.x/S}px, ${T.y/S}px)`,transformOrigin:"center center",transition:_||K!==null?"none":"transform 0.25s cubic-bezier(0.2, 0, 0, 1)",maxWidth:"100%",maxHeight:"100%",objectFit:"contain",cursor:S>1?_?"grabbing":"grab":"pointer",userSelect:"none",touchAction:"none"},draggable:!1,onClick:g=>g.stopPropagation()})}),f.images&&f.images.length>1&&a.jsx("button",{onClick:g=>{g.stopPropagation(),C(1),x(1),E({x:0,y:0})},className:"absolute right-4 p-3 bg-white bg-opacity-20 backdrop-blur rounded-full hover:bg-opacity-30",children:a.jsx(Jb,{className:"h-6 w-6 text-white"})}),f.images&&f.images.length>1&&a.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full",children:[p+1," / ",f.images.length]}),a.jsx("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-10 text-white px-3 py-2 rounded-lg text-xs text-center backdrop-blur",children:"     /"})]})})]})},oj=["","","","","","",""],Hte=({request:e,onClose:t,onSave:r})=>{const{register:n,handleSubmit:s,setValue:i,formState:{errors:o}}=yu(),l=Tn(),[c,u]=b.useState([]),[d,f]=b.useState(""),[m,y]=b.useState(""),[j,p]=b.useState(9),[k,h]=b.useState(0),v=l.filter(_=>_.status==="completed");b.useEffect(()=>{if(e){if(i("project",e.project),i("client",e.client),i("siteAddress",e.siteAddress),i("entrancePassword",e.entrancePassword),i("description",e.description),e.requestDate&&i("requestDate",e.requestDate.toISOString().split("T")[0]),e.scheduledVisitDate&&i("scheduledVisitDate",e.scheduledVisitDate.toISOString().split("T")[0]),e.scheduledVisitTime){const[_,M]=e.scheduledVisitTime.split(":"),O=parseInt(_,10),R=parseInt(M,10);O>=12?(y(""),p(O===12?12:O-12)):(y(""),p(O===0?12:O)),h(R)}u(e.assignedTo||[])}else u([]),y(""),p(9),h(0)},[e,i]);const S=_=>{u(M=>M.includes(_)?M.filter(O=>O!==_):[...M,_])},x=()=>{d.trim()&&!c.includes(d.trim())&&(u(_=>[..._,d.trim()]),f(""))},T=_=>{u(M=>M.filter(O=>O!==_))},E=_=>{let M=j;m===""&&j!==12?M=j+12:m===""&&j===12&&(M=0);const O=`${M.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`,R={..._,requestDate:new Date(_.requestDate),scheduledVisitDate:_.scheduledVisitDate?new Date(_.scheduledVisitDate):void 0,scheduledVisitTime:O,assignedTo:c};r(R)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[a.jsx("h2",{className:"text-xl font-semibold",children:e?"AS  ":"AS  "}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(et,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:s(E),className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" * ( )"}),a.jsxs("select",{...n("project",{required:" "}),className:"input",onChange:_=>{const M=v.find(O=>O.name===_.target.value);M&&(i("client",M.client),i("siteAddress",M.location),i("entrancePassword",M.entrancePassword||""))},children:[a.jsx("option",{value:"",children:""}),v.map(_=>a.jsx("option",{value:_.name,children:_.name},_.id))]}),o.project&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(o.project.message)}),v.length===0&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"  "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{...n("client",{required:" "}),type:"text",className:"input"}),o.client&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(o.client.message)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{...n("siteAddress",{required:" "}),type:"text",className:"input"}),o.siteAddress&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(o.siteAddress.message)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),a.jsx("input",{...n("entrancePassword"),type:"text",className:"input"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("textarea",{...n("description"),rows:3,className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (  )"}),a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[oj.map(_=>a.jsx("button",{type:"button",onClick:()=>S(_),className:`px-2.5 py-1.5 rounded border transition-colors text-sm ${c.includes(_)?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:_},_)),c.filter(_=>!oj.includes(_)).map(_=>a.jsxs("button",{type:"button",onClick:()=>T(_),className:"px-2.5 py-1.5 rounded border transition-colors text-sm bg-gray-900 text-white border-gray-900 hover:bg-gray-800",children:[_," "]},_))]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),onKeyPress:_=>{_.key==="Enter"&&(_.preventDefault(),x())},className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("button",{type:"button",onClick:x,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-xs font-medium hover:bg-gray-200 transition-colors",children:""})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("input",{...n("requestDate"),type:"date",className:"input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("input",{...n("scheduledVisitDate"),type:"date",className:"input"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>y(""),className:`px-3 py-1.5 text-xs rounded border transition-colors ${m===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>y(""),className:`px-3 py-1.5 text-xs rounded border transition-colors ${m===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""})]}),a.jsx("select",{value:j,onChange:_=>p(parseInt(_.target.value)),className:"px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(_=>a.jsxs("option",{value:_,children:[_,""]},_))}),a.jsx("select",{value:k,onChange:_=>h(parseInt(_.target.value)),className:"px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(_=>a.jsxs("option",{value:_,children:[_,""]},_))})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"btn btn-outline",children:""}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:e?"":""})]})]})]})})},Sp=e=>{if(!e)return"";const[t]=e.split(":"),r=parseInt(t,10),n=r>=12?"":"",s=r>12?r-12:r===0?12:r;return`${n} ${s}`},Ute=()=>{var ye,Ne,Re,ee,me,I,se,ae;const{user:e}=Ar(),t=Tn(),{asRequests:r,loadASRequestsFromAPI:n,addASRequestToAPI:s,updateASRequestInAPI:i,deleteASRequestFromAPI:o}=Ts(),l=t.map(X=>X.name),c=(e==null?void 0:e.name)===""?r.filter(X=>l.includes(X.project)):r,[u,d]=b.useState(""),[f,m]=b.useState(!1),[y,j]=b.useState(null),[p,k]=b.useState("active"),[h,v]=b.useState(null),S=b.useRef(null),[x,T]=b.useState(null),[E,_]=b.useState(!1),[M,O]=b.useState(!1),[R,K]=b.useState("");b.useEffect(()=>{n().catch(X=>{console.error("Failed to load AS requests:",X),H.error("AS    ")})},[n]),b.useEffect(()=>{const X=()=>{Q()};return window.addEventListener("headerAddButtonClick",X),()=>window.removeEventListener("headerAddButtonClick",X)},[]),b.useEffect(()=>{var X,we;h&&S.current&&((we=(X=S.current).showPicker)==null||we.call(X))},[h]);const Q=()=>{j(null),m(!0)},ne=async X=>{try{if(y)await i(y.id,X),H.success("AS  ");else{const we={id:"",...X};await s(we),H.success("AS  ")}m(!1)}catch(we){console.error("Failed to save AS request:",we),H.error("AS   ")}},Z=X=>{j(X),m(!0)},fe=async(X,we)=>{if(window.confirm(`"${we}" AS  ?

    .`))try{await o(X),H.success("AS  ")}catch(Ee){console.error("Failed to delete AS request:",Ee),H.error("AS   ")}},te=(X,we)=>{if(we==="scheduledVisitDate"){const Ee=r.find(C=>C.id===X);let de={period:"",hour:9,minute:0};if(Ee!=null&&Ee.scheduledVisitTime){const[C,w]=Ee.scheduledVisitTime.split(":"),g=parseInt(C,10),N=parseInt(w,10);de={period:g>=12?"":"",hour:g===0?12:g>12?g-12:g,minute:N}}v({requestId:X,field:we,time:de})}else v({requestId:X,field:we})},xe=async(X,we)=>{if(!h)return;const Ee=new Date(X);if(!isNaN(Ee.getTime()))try{const de={[h.field]:Ee};if(h.field==="scheduledVisitDate"&&we){let C=we.hour;we.period===""&&we.hour!==12?C=we.hour+12:we.period===""&&we.hour===12&&(C=0),de.scheduledVisitTime=`${C.toString().padStart(2,"0")}:${we.minute.toString().padStart(2,"0")}`}await i(h.requestId,de),v(null)}catch(de){console.error("Failed to update date:",de),H.error("  "),v(null)}},ie=b.useCallback(X=>{var Ee;const we=(Ee=X.clipboardData)==null?void 0:Ee.items;if(we){for(let de=0;de<we.length;de++)if(we[de].type.indexOf("image")!==-1){X.preventDefault();const C=we[de].getAsFile();if(C){const w=new FileReader;w.onload=g=>{var P,F;const N=(P=g.target)==null?void 0:P.result,D=x||((F=X.target.closest("[data-request-id]"))==null?void 0:F.getAttribute("data-request-id"));if(D){const q=c.find(A=>A.id===D);if(q){const A=[...q.images||[],N];i(D,{images:A}),H.success(" ")}}else H.error("AS     ")},w.readAsDataURL(C)}}}},[x,c,i]);b.useEffect(()=>(document.addEventListener("paste",ie),()=>document.removeEventListener("paste",ie)),[ie]);const V=X=>{K(X),O(!0)},ge=(X,we)=>{X.preventDefault(),X.stopPropagation(),we&&_(!0)},G=X=>{X.preventDefault(),X.stopPropagation(),_(!1)},U=(X,we)=>{X.preventDefault(),X.stopPropagation(),_(!1);const Ee=Array.from(X.dataTransfer.files),de=[],C=Ee.filter(w=>w.type.startsWith("image/"));if(C.length===0){H.error("   ");return}C.forEach(w=>{const g=new FileReader;g.onload=N=>{var P;const D=(P=N.target)==null?void 0:P.result;if(de.push(D),de.length===C.length){const F=c.find(q=>q.id===we);if(F){const q=[...F.images||[],...de];i(we,{images:q}),H.success(`${de.length}  `)}}},g.readAsDataURL(w)})},L=async(X,we)=>{try{const Ee={status:we};we==="completed"?Ee.completionDate=new Date:we==="pending"?Ee.completionDate=void 0:we==="revisit"&&(Ee.scheduledVisitDate=void 0,Ee.completionDate=void 0),await i(X,Ee);const de=we==="completed"?"AS ":we==="revisit"?" ":"";H.success(` "${de}" `)}catch(Ee){console.error("Failed to update status:",Ee),H.error("  ")}},Y=X=>{const we={pending:{label:"",color:"bg-gray-100 text-gray-700 border-gray-300"},completed:{label:"AS ",color:"bg-green-100 text-green-700 border-green-300"},revisit:{label:"",color:"bg-orange-100 text-orange-700 border-orange-300"}},Ee=we[X]||we.pending;return a.jsx("span",{className:`px-2 py-1 text-xs font-medium border rounded ${Ee.color}`,children:Ee.label})},ue=c.filter(X=>{const we=X.project.toLowerCase().includes(u.toLowerCase())||X.client.toLowerCase().includes(u.toLowerCase())||X.description.toLowerCase().includes(u.toLowerCase());return p==="completed"?we&&X.status==="completed":we&&X.status!=="completed"});return a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"border-b border-gray-200 flex items-center justify-between",children:[a.jsxs("nav",{className:"flex space-x-4 md:space-x-8",children:[a.jsxs("button",{onClick:()=>k("active"),className:`py-2 md:py-3 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap ${p==="active"?"border-gray-700 text-gray-700":"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"}`,children:["",a.jsx("span",{className:`ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold ${p==="active"?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"}`,children:c.filter(X=>X.status!=="completed").length})]}),a.jsxs("button",{onClick:()=>k("completed"),className:`py-2 md:py-3 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap ${p==="completed"?"border-gray-700 text-gray-700":"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"}`,children:["AS ",a.jsx("span",{className:`ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold ${p==="completed"?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"}`,children:c.filter(X=>X.status==="completed").length})]})]}),a.jsx("button",{onClick:Q,className:"hidden md:block btn btn-primary px-4 py-2",children:"+AS "})]}),a.jsx("div",{children:a.jsx("input",{type:"text",placeholder:"...",value:u,onChange:X=>d(X.target.value),className:"w-full px-3 md:px-4 py-2 text-sm md:text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent"})}),a.jsx("div",{className:"lg:hidden grid grid-cols-1 md:grid-cols-2 gap-3",children:ue.map(X=>{var we,Ee,de,C;return a.jsxs("div",{"data-request-id":X.id,className:"card p-3 md:p-4 hover:border-gray-400 transition-colors",onDragOver:w=>ge(w,X.id),onDragLeave:G,onDrop:w=>U(w,X.id),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center gap-2 mb-1",children:Y(X.status)}),a.jsx("h3",{className:"font-bold text-base text-gray-900",children:X.project}),a.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:[X.client,""]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>Z(X),className:"text-gray-600 hover:text-gray-700 p-1 -mt-1",children:a.jsx(bo,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>fe(X.id,X.project),className:"text-rose-600 hover:text-rose-700 p-1 -mt-1",children:a.jsx(Et,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:X.siteAddress})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"AS "}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:X.description})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:X.assignedTo&&X.assignedTo.length>0?X.assignedTo.join(", "):""})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("div",{className:"relative inline-block",children:[(h==null?void 0:h.requestId)===X.id&&(h==null?void 0:h.field)==="requestDate"&&a.jsx("input",{ref:S,type:"date",defaultValue:Se(X.requestDate,"yyyy-MM-dd"),onChange:w=>xe(w.target.value),onBlur:()=>v(null),className:"absolute left-0 top-0 w-auto h-auto opacity-0 z-50",style:{pointerEvents:"auto"}}),a.jsxs("button",{onClick:()=>te(X.id,"requestDate"),className:"flex items-center space-x-1 text-xs text-gray-900 hover:text-gray-600 transition-colors",children:[a.jsx(ms,{className:"h-3 w-3"}),a.jsx("span",{children:Se(X.requestDate,"MM.dd (eee)",{locale:it})})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("div",{className:"relative inline-block",children:[(h==null?void 0:h.requestId)===X.id&&(h==null?void 0:h.field)==="scheduledVisitDate"&&a.jsx("div",{className:"absolute left-0 top-0 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-3",style:{minWidth:"280px"},children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{ref:S,type:"date",defaultValue:X.scheduledVisitDate?Se(X.scheduledVisitDate,"yyyy-MM-dd"):"",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",onChange:w=>{const g=w.target.value,N=h.time||{period:"",hour:9,minute:0};xe(g,N)}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>v(w=>w?{...w,time:{...w.time,period:""}}:null),className:`px-2 py-1 text-xs rounded border transition-colors ${((we=h==null?void 0:h.time)==null?void 0:we.period)===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>v(w=>w?{...w,time:{...w.time,period:""}}:null),className:`px-2 py-1 text-xs rounded border transition-colors ${((Ee=h==null?void 0:h.time)==null?void 0:Ee.period)===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""})]}),a.jsx("select",{value:((de=h==null?void 0:h.time)==null?void 0:de.hour)||9,onChange:w=>v(g=>g?{...g,time:{...g.time,hour:parseInt(w.target.value)}}:null),className:"px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(w=>a.jsxs("option",{value:w,children:[w,""]},w))}),a.jsx("select",{value:((C=h==null?void 0:h.time)==null?void 0:C.minute)||0,onChange:w=>v(g=>g?{...g,time:{...g.time,minute:parseInt(w.target.value)}}:null),className:"px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(w=>a.jsxs("option",{value:w,children:[w,""]},w))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[a.jsx("button",{type:"button",onClick:()=>v(null),className:"px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:""}),a.jsx("button",{type:"button",onClick:()=>{const w=S.current;w&&(h!=null&&h.time)&&xe(w.value,h.time)},className:"px-3 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800",children:""})]})]})}),a.jsxs("button",{onClick:()=>te(X.id,"scheduledVisitDate"),className:"flex items-center space-x-1 text-xs text-gray-900 hover:text-gray-600 transition-colors",children:[a.jsx(ms,{className:"h-3 w-3"}),a.jsxs("span",{children:[X.scheduledVisitDate?Se(X.scheduledVisitDate,"MM.dd (eee)",{locale:it}):"",X.scheduledVisitTime&&` ${Sp(X.scheduledVisitTime)}`]})]})]})]})]}),X.status!=="completed"&&a.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-100",children:[a.jsx("button",{onClick:()=>L(X.id,"completed"),className:"flex-1 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:"AS "}),a.jsx("button",{onClick:()=>L(X.id,"revisit"),className:"flex-1 px-3 py-2 text-xs font-medium bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:""})]}),X.status==="completed"&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[a.jsx("button",{onClick:()=>L(X.id,"pending"),className:"w-full px-3 py-2 text-xs font-medium bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors mb-2",children:" "}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:X.completionDate&&`: ${Se(X.completionDate,"yyyy.MM.dd",{locale:it})}`})]}),X.images&&X.images.length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[a.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["  (",X.images.length,")"]}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:X.images.map((w,g)=>a.jsx("img",{src:w,alt:`AS  ${g+1}`,className:"w-full h-20 object-cover rounded cursor-pointer hover:opacity-75",onClick:()=>V(w)},g))})]})]})]},X.id)})}),a.jsxs("div",{className:"hidden lg:grid lg:grid-cols-3 gap-4",children:[(()=>{const X=Math.ceil(ue.length/2),we=ue.slice(0,X),Ee=ue.slice(X);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:we.map(de=>{var C,w,g,N;return a.jsxs("div",{"data-request-id":de.id,onClick:()=>T(de.id),className:`card p-4 cursor-pointer transition-all ${x===de.id?"ring-2 ring-blue-500 bg-blue-50":"hover:border-gray-400"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center gap-2 mb-1",children:Y(de.status)}),a.jsx("h3",{className:"font-bold text-base text-gray-900",children:de.project}),a.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:[de.client,""]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:D=>{D.stopPropagation(),Z(de)},className:"text-gray-600 hover:text-gray-700 p-1",children:a.jsx(bo,{className:"h-4 w-4"})}),a.jsx("button",{onClick:D=>{D.stopPropagation(),fe(de.id,de.project)},className:"text-rose-600 hover:text-rose-700 p-1",children:a.jsx(Et,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:de.siteAddress})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"AS "}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:de.description})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:de.assignedTo&&de.assignedTo.length>0?de.assignedTo.join(", "):""})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("div",{className:"relative inline-block",children:[(h==null?void 0:h.requestId)===de.id&&(h==null?void 0:h.field)==="requestDate"&&a.jsx("input",{ref:S,type:"date",defaultValue:Se(de.requestDate,"yyyy-MM-dd"),onChange:D=>xe(D.target.value),onBlur:()=>v(null),className:"absolute left-0 top-0 w-auto h-auto opacity-0 z-50",style:{pointerEvents:"auto"}}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),te(de.id,"requestDate")},className:"flex items-center space-x-1 text-xs text-gray-900 hover:text-gray-600 transition-colors",children:[a.jsx(ms,{className:"h-3 w-3"}),a.jsx("span",{children:Se(de.requestDate,"MM.dd (eee)",{locale:it})})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("div",{className:"relative inline-block",children:[(h==null?void 0:h.requestId)===de.id&&(h==null?void 0:h.field)==="scheduledVisitDate"&&a.jsx("div",{className:"absolute left-0 top-0 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-3",style:{minWidth:"280px"},children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{ref:S,type:"date",defaultValue:de.scheduledVisitDate?Se(de.scheduledVisitDate,"yyyy-MM-dd"):"",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",onChange:D=>{const P=D.target.value,F=h.time||{period:"",hour:9,minute:0};xe(P,F)}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>v(D=>D?{...D,time:{...D.time,period:""}}:null),className:`px-2 py-1 text-xs rounded border transition-colors ${((C=h==null?void 0:h.time)==null?void 0:C.period)===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>v(D=>D?{...D,time:{...D.time,period:""}}:null),className:`px-2 py-1 text-xs rounded border transition-colors ${((w=h==null?void 0:h.time)==null?void 0:w.period)===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""})]}),a.jsx("select",{value:((g=h==null?void 0:h.time)==null?void 0:g.hour)||9,onChange:D=>v(P=>P?{...P,time:{...P.time,hour:parseInt(D.target.value)}}:null),className:"px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(D=>a.jsxs("option",{value:D,children:[D,""]},D))}),a.jsx("select",{value:((N=h==null?void 0:h.time)==null?void 0:N.minute)||0,onChange:D=>v(P=>P?{...P,time:{...P.time,minute:parseInt(D.target.value)}}:null),className:"px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(D=>a.jsxs("option",{value:D,children:[D,""]},D))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[a.jsx("button",{type:"button",onClick:()=>v(null),className:"px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:""}),a.jsx("button",{type:"button",onClick:()=>{const D=S.current;D&&(h!=null&&h.time)&&xe(D.value,h.time)},className:"px-3 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800",children:""})]})]})}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),te(de.id,"scheduledVisitDate")},className:"flex items-center space-x-1 text-xs text-gray-900 hover:text-gray-600 transition-colors",children:[a.jsx(ms,{className:"h-3 w-3"}),a.jsxs("span",{children:[de.scheduledVisitDate?Se(de.scheduledVisitDate,"MM.dd (eee)",{locale:it}):"",de.scheduledVisitTime&&` ${Sp(de.scheduledVisitTime)}`]})]})]})]})]}),de.status!=="completed"&&a.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-100",children:[a.jsx("button",{onClick:D=>{D.stopPropagation(),L(de.id,"completed")},className:"flex-1 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:"AS "}),a.jsx("button",{onClick:D=>{D.stopPropagation(),L(de.id,"revisit")},className:"flex-1 px-3 py-2 text-xs font-medium bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:""})]}),de.status==="completed"&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[a.jsx("button",{onClick:D=>{D.stopPropagation(),L(de.id,"pending")},className:"w-full px-3 py-2 text-xs font-medium bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors mb-2",children:" "}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:de.completionDate&&`: ${Se(de.completionDate,"yyyy.MM.dd",{locale:it})}`})]})]})]},de.id)})}),a.jsx("div",{className:"space-y-4",children:Ee.map(de=>{var C,w,g,N;return a.jsxs("div",{"data-request-id":de.id,onClick:()=>T(de.id),className:`card p-4 cursor-pointer transition-all ${x===de.id?"ring-2 ring-blue-500 bg-blue-50":"hover:border-gray-400"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center gap-2 mb-1",children:Y(de.status)}),a.jsx("h3",{className:"font-bold text-base text-gray-900",children:de.project}),a.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:[de.client,""]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:D=>{D.stopPropagation(),Z(de)},className:"text-gray-600 hover:text-gray-700 p-1",children:a.jsx(bo,{className:"h-4 w-4"})}),a.jsx("button",{onClick:D=>{D.stopPropagation(),fe(de.id,de.project)},className:"text-rose-600 hover:text-rose-700 p-1",children:a.jsx(Et,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:de.siteAddress})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"AS "}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:de.description})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:""}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:de.assignedTo&&de.assignedTo.length>0?de.assignedTo.join(", "):""})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("div",{className:"relative inline-block",children:[(h==null?void 0:h.requestId)===de.id&&(h==null?void 0:h.field)==="requestDate"&&a.jsx("input",{ref:S,type:"date",defaultValue:Se(de.requestDate,"yyyy-MM-dd"),onChange:D=>xe(D.target.value),onBlur:()=>v(null),className:"absolute left-0 top-0 w-auto h-auto opacity-0 z-50",style:{pointerEvents:"auto"}}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),te(de.id,"requestDate")},className:"flex items-center space-x-1 text-xs text-gray-900 hover:text-gray-600 transition-colors",children:[a.jsx(ms,{className:"h-3 w-3"}),a.jsx("span",{children:Se(de.requestDate,"MM.dd (eee)",{locale:it})})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsxs("div",{className:"relative inline-block",children:[(h==null?void 0:h.requestId)===de.id&&(h==null?void 0:h.field)==="scheduledVisitDate"&&a.jsx("div",{className:"absolute left-0 top-0 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-3",style:{minWidth:"280px"},children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{ref:S,type:"date",defaultValue:de.scheduledVisitDate?Se(de.scheduledVisitDate,"yyyy-MM-dd"):"",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",onChange:D=>{const P=D.target.value,F=h.time||{period:"",hour:9,minute:0};xe(P,F)}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>v(D=>D?{...D,time:{...D.time,period:""}}:null),className:`px-2 py-1 text-xs rounded border transition-colors ${((C=h==null?void 0:h.time)==null?void 0:C.period)===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>v(D=>D?{...D,time:{...D.time,period:""}}:null),className:`px-2 py-1 text-xs rounded border transition-colors ${((w=h==null?void 0:h.time)==null?void 0:w.period)===""?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:""})]}),a.jsx("select",{value:((g=h==null?void 0:h.time)==null?void 0:g.hour)||9,onChange:D=>v(P=>P?{...P,time:{...P.time,hour:parseInt(D.target.value)}}:null),className:"px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[12,1,2,3,4,5,6,7,8,9,10,11].map(D=>a.jsxs("option",{value:D,children:[D,""]},D))}),a.jsx("select",{value:((N=h==null?void 0:h.time)==null?void 0:N.minute)||0,onChange:D=>v(P=>P?{...P,time:{...P.time,minute:parseInt(D.target.value)}}:null),className:"px-1 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",children:[0,10,20,30,40,50].map(D=>a.jsxs("option",{value:D,children:[D,""]},D))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[a.jsx("button",{type:"button",onClick:()=>v(null),className:"px-3 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:""}),a.jsx("button",{type:"button",onClick:()=>{const D=S.current;D&&(h!=null&&h.time)&&xe(D.value,h.time)},className:"px-3 py-1 text-xs bg-gray-900 text-white rounded hover:bg-gray-800",children:""})]})]})}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),te(de.id,"scheduledVisitDate")},className:"flex items-center space-x-1 text-xs text-gray-900 hover:text-gray-600 transition-colors",children:[a.jsx(ms,{className:"h-3 w-3"}),a.jsxs("span",{children:[de.scheduledVisitDate?Se(de.scheduledVisitDate,"MM.dd (eee)",{locale:it}):"",de.scheduledVisitTime&&` ${Sp(de.scheduledVisitTime)}`]})]})]})]})]}),de.status!=="completed"&&a.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-100",children:[a.jsx("button",{onClick:D=>{D.stopPropagation(),L(de.id,"completed")},className:"flex-1 px-3 py-2 text-xs font-medium bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:"AS "}),a.jsx("button",{onClick:D=>{D.stopPropagation(),L(de.id,"revisit")},className:"flex-1 px-3 py-2 text-xs font-medium bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:""})]}),de.status==="completed"&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[a.jsx("button",{onClick:D=>{D.stopPropagation(),L(de.id,"pending")},className:"w-full px-3 py-2 text-xs font-medium bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors mb-2",children:" "}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:de.completionDate&&`: ${Se(de.completionDate,"yyyy.MM.dd",{locale:it})}`})]})]})]},de.id)})})]})})(),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:""}),x?a.jsx("div",{onDragOver:X=>ge(X,x),onDragLeave:G,onDrop:X=>U(X,x),children:a.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[(Ne=(ye=c.find(X=>X.id===x))==null?void 0:ye.images)==null?void 0:Ne.map((X,we)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:X,alt:`AS  ${we+1}`,onClick:()=>V(X),className:"w-full h-auto object-contain cursor-pointer rounded-lg border border-gray-200"}),a.jsx("button",{onClick:()=>{var de;const Ee=c.find(C=>C.id===x);if(Ee){const C=((de=Ee.images)==null?void 0:de.filter((w,g)=>g!==we))||[];i(x,{images:C}),H.success(" ")}},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors shadow-lg",children:a.jsx(et,{className:"h-4 w-4"})})]},we)),a.jsxs("div",{className:`w-full min-h-[200px] border-2 border-dashed rounded-lg p-6 text-center transition-colors flex flex-col items-center justify-center ${E?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx(ks,{className:"h-10 w-10 mx-auto text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:(ee=(Re=c.find(X=>X.id===x))==null?void 0:Re.images)!=null&&ee.length?" ":" "}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"  Ctrl+V "}),((I=(me=c.find(X=>X.id===x))==null?void 0:me.images)==null?void 0:I.length)>0&&a.jsxs("p",{className:"text-xs text-blue-600 mt-2 font-medium",children:[" ",(ae=(se=c.find(X=>X.id===x))==null?void 0:se.images)==null?void 0:ae.length,""]})]})]})}):a.jsx("div",{className:"h-full min-h-[400px] flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(Un,{className:"h-16 w-16 mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-medium",children:"AS  "}),a.jsx("p",{className:"text-sm mt-2",children:"    "})]})})]})]}),f&&a.jsx(Hte,{request:y,onClose:()=>m(!1),onSave:ne}),M&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>O(!1),children:a.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[a.jsx("button",{onClick:X=>{X.stopPropagation(),O(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:a.jsx(et,{className:"h-8 w-8"})}),a.jsx("img",{src:R,alt:" ",className:"max-w-full max-h-[90vh] object-contain",onClick:X=>X.stopPropagation()})]})})]})},zte=({work:e,onClose:t,onSave:r,initialProject:n})=>{const{register:s,handleSubmit:i,setValue:o,formState:{errors:l}}=yu(),{user:c}=Ar(),u=Tn(),[d,f]=b.useState(!1),[m,y]=b.useState([]),[j,p]=b.useState([]);b.useEffect(()=>{if(e)o("project",e.project),o("description",e.description),o("amount",e.amount),o("date",e.date.toISOString().split("T")[0]),o("notes",e.notes||""),p(e.images||[]),y(e.images||[]);else{const _=new Date().toISOString().split("T")[0];o("date",_),p([]),y([]),(c==null?void 0:c.name)===""&&u.length>0?o("project",u[0].name):n&&o("project",n)}},[e,o,n,c,u]);const k=b.useCallback(_=>{var O;const M=(O=_.clipboardData)==null?void 0:O.items;if(M){for(let R=0;R<M.length;R++)if(M[R].type.indexOf("image")!==-1){_.preventDefault();const K=M[R].getAsFile();if(K){const Q=new FileReader;Q.onload=ne=>{var fe;const Z=(fe=ne.target)==null?void 0:fe.result;y(te=>[...te,Z]),p(te=>[...te,Z]),H.success(" ")},Q.readAsDataURL(K)}}}},[]);b.useEffect(()=>(document.addEventListener("paste",k),()=>document.removeEventListener("paste",k)),[k]);const h=_=>{_.preventDefault(),f(!0)},v=_=>{_.preventDefault(),f(!1)},S=_=>{_.preventDefault(),f(!1);const M=Array.from(_.dataTransfer.files);M.forEach(O=>{if(O.type.startsWith("image/")){const R=new FileReader;R.onload=K=>{var ne;const Q=(ne=K.target)==null?void 0:ne.result;y(Z=>[...Z,Q]),p(Z=>[...Z,Q])},R.readAsDataURL(O)}}),M.length>0&&H.success(`${M.length}  `)},x=_=>{var O;const M=Array.from(((O=_.target)==null?void 0:O.files)||[]);M.forEach(R=>{if(R.type.startsWith("image/")){const K=new FileReader;K.onload=Q=>{var Z;const ne=(Z=Q.target)==null?void 0:Z.result;y(fe=>[...fe,ne]),p(fe=>[...fe,ne])},K.readAsDataURL(R)}}),M.length>0&&H.success(`${M.length}  `)},T=_=>{y(M=>M.filter((O,R)=>R!==_)),p(M=>M.filter((O,R)=>R!==_)),H.success(" ")},E=_=>{const M={..._,amount:Number(_.amount),date:new Date(_.date),images:j};r(M)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white z-10",children:[a.jsx("h2",{className:"text-xl font-semibold",children:e?" ":" "}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(et,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:i(E),className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsxs("select",{...s("project",{required:" "}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[(c==null?void 0:c.name)!==""&&a.jsx("option",{value:"",children:""}),u.map(_=>a.jsx("option",{value:_.name,children:_.name},_.id))]}),l.project&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(l.project.message)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("textarea",{...s("description",{required:"  "}),rows:3,className:"input",placeholder:"    (:    )"}),l.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(l.description.message)})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" () *"}),a.jsx("input",{...s("amount",{required:" ",min:{value:0,message:" 0  "}}),type:"number",className:"input",placeholder:": 500000"}),l.amount&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(l.amount.message)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{...s("date",{required:" "}),type:"date",className:"input"}),l.date&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:String(l.date.message)})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("textarea",{...s("notes"),rows:2,className:"input",placeholder:"  ()"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"  (Ctrl+V  )"}),a.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 transition-colors ${d?"border-gray-500 bg-gray-50":"border-gray-300"}`,onDragOver:h,onDragLeave:v,onDrop:S,children:a.jsxs("div",{className:"text-center",children:[a.jsx(Un,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"    "}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Ctrl+V   "}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:x,className:"hidden",id:"file-upload-additional"}),a.jsxs("label",{htmlFor:"file-upload-additional",className:"mt-4 inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[a.jsx(ks,{className:"h-4 w-4 mr-2"})," "]})]})}),m.length>0&&a.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:m.map((_,M)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:_,alt:` ${M+1}`,className:"w-full h-32 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>T(M),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Et,{className:"h-3 w-3"})})]},M))})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"btn btn-outline",children:""}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:e?"":""})]})]})]})})},Yl={getAllAdditionalWorks:async()=>(await Te.get("/additional-works")).data,getAdditionalWorkById:async e=>(await Te.get(`/additional-works/${e}`)).data,createAdditionalWork:async e=>{const t={project:e.project,description:e.description,amount:e.amount,work_date:e.date instanceof Date?e.date.toISOString().split("T")[0]:e.date,notes:e.notes||""};return console.log("[additionalWorkService.createAdditionalWork] Sending to backend:",t),(await Te.post("/additional-works",t)).data},updateAdditionalWork:async(e,t)=>{const r={};return t.project!==void 0&&(r.project=t.project),t.description!==void 0&&(r.description=t.description),t.amount!==void 0&&(r.amount=t.amount),t.date!==void 0&&(r.work_date=t.date instanceof Date?t.date.toISOString().split("T")[0]:t.date),t.notes!==void 0&&(r.notes=t.notes),console.log("[additionalWorkService.updateAdditionalWork] Sending to backend:",r),(await Te.put(`/additional-works/${e}`,r)).data},deleteAdditionalWork:async e=>{await Te.delete(`/additional-works/${e}`)}},Vte=()=>{var U;const{user:e}=Ar(),t=Tn(),[r,n]=b.useState([]),[s,i]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState(null),[d,f]=b.useState(""),[m,y]=b.useState(new Set),[j,p]=b.useState(void 0),[k,h]=b.useState(!1),[v,S]=b.useState(null),[x,T]=b.useState({});b.useRef(null);const[E,_]=b.useState({project:"",description:"",amount:"",date:Se(new Date,"yyyy-MM-dd"),notes:""});b.useEffect(()=>{var L;if(t.length>0&&!E.project){const Y=localStorage.getItem("lastSelectedProject"),ue=((L=t.find(ye=>ye.name===Y))==null?void 0:L.name)||t[0].name;_(ye=>({...ye,project:ue}))}},[t]);const M=b.useCallback(L=>{var ue;if(!c){H.error("  ");return}const Y=(ue=L.clipboardData)==null?void 0:ue.items;if(Y){for(let ye=0;ye<Y.length;ye++)if(Y[ye].type.indexOf("image")!==-1){L.preventDefault();const Ne=Y[ye].getAsFile();if(Ne){const Re=new FileReader;Re.onload=ee=>{var I;const me=(I=ee.target)==null?void 0:I.result;T(se=>({...se,[c]:[...se[c]||[],me]})),H.success(" "),O(c,[...x[c]||[],me])},Re.readAsDataURL(Ne)}}}},[c,x]);b.useEffect(()=>(document.addEventListener("paste",M),()=>document.removeEventListener("paste",M)),[M]),b.useEffect(()=>{const L=localStorage.getItem("additionalWorkImages");L&&T(JSON.parse(L))},[]),b.useEffect(()=>{localStorage.setItem("additionalWorkImages",JSON.stringify(x))},[x]);const O=async(L,Y)=>{try{await Yl.updateAdditionalWork(L,{images:Y})}catch(ue){console.error("Failed to save images:",ue)}},R=L=>{const Y=Array.from(L.target.files||[]);if(!c){H.error("  ");return}Y.forEach(ue=>{if(ue.type.startsWith("image/")){const ye=new FileReader;ye.onload=Ne=>{var ee;const Re=(ee=Ne.target)==null?void 0:ee.result;T(me=>({...me,[c]:[...me[c]||[],Re]}))},ye.readAsDataURL(ue)}}),Y.length>0&&H.success(" ")},K=(L,Y)=>{T(ye=>({...ye,[L]:(ye[L]||[]).filter((Ne,Re)=>Re!==Y)})),H.success(" ");const ue=(x[L]||[]).filter((ye,Ne)=>Ne!==Y);O(L,ue)},Q=L=>{S(L),h(!0)},ne=async()=>{try{const L=await Yl.getAllAdditionalWorks(),Y=t.map(Ne=>Ne.name),ue=(e==null?void 0:e.name)===""?L.filter(Ne=>Y.includes(Ne.project)):L;n(ue.map(Ne=>({id:Ne._id,project:Ne.project,description:Ne.description,amount:Ne.amount,date:new Date(Ne.date),notes:Ne.notes,images:Ne.images||[]})));const ye={};ue.forEach(Ne=>{Ne.images&&Ne.images.length>0&&(ye[Ne._id]=Ne.images)}),T(ye)}catch(L){console.error("Failed to load additional works:",L),n([])}};b.useEffect(()=>{ne()},[]);const Z=L=>{l(L),p(L.project),i(!0)},fe=async L=>{if(window.confirm("  ?"))try{await Yl.deleteAdditionalWork(L),await ne(),H.success(" "),c===L&&u(null)}catch(Y){console.error("Failed to delete additional work:",Y),H.error("  ")}},te=async L=>{i(!1),l(null),p(void 0),L&&await ne()},xe=async L=>{if(L.preventDefault(),!E.project||!E.description||!E.amount||!E.date){H.error("   ");return}try{await Yl.createAdditionalWork({project:E.project,description:E.description,amount:parseFloat(E.amount),date:new Date(E.date)}),H.success(" "),_(Y=>({...Y,description:"",amount:"",date:Se(new Date,"yyyy-MM-dd"),notes:""})),await ne(),localStorage.setItem("lastSelectedProject",E.project)}catch(Y){console.error("Failed to create additional work:",Y),H.error("  ")}},ie=r.filter(L=>{var ue,ye;return(((ue=L.project)==null?void 0:ue.toLowerCase())||"").includes(d.toLowerCase())||(((ye=L.description)==null?void 0:ye.toLowerCase())||"").includes(d.toLowerCase())}),V=ie.reduce((L,Y)=>{const ue=L.find(ye=>ye.projectName===Y.project);return ue?(ue.works.push(Y),ue.totalAmount+=Y.amount):L.push({projectName:Y.project,works:[Y],totalAmount:Y.amount}),L},[]);V.sort((L,Y)=>L.projectName.localeCompare(Y.projectName)),V.forEach(L=>{L.works.sort((Y,ue)=>ue.date.getTime()-Y.date.getTime())}),b.useEffect(()=>{const L=new Set(V.map(Y=>Y.projectName));y(L)},[ie.length]);const ge=L=>{const Y=new Set(m);Y.has(L)?Y.delete(L):Y.add(L),y(Y)},G=V.reduce((L,Y)=>L+Y.totalAmount,0);return a.jsxs("div",{className:"space-y-4 md:space-y-6",children:[a.jsxs("div",{className:"hidden md:grid md:gap-4 lg:gap-6 md:grid-cols-12",children:[a.jsx("div",{className:"md:col-span-4 lg:col-span-4 bg-white border border-gray-200 rounded-lg p-4 md:p-5 lg:p-6 h-fit sticky top-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),a.jsxs("select",{value:E.project,onChange:L=>_(Y=>({...Y,project:L.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white",children:[(e==null?void 0:e.name)!==""&&a.jsx("option",{value:"",children:""}),t.map(L=>a.jsx("option",{value:L.name,children:L.name},L.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),a.jsx("input",{type:"date",value:E.date,onChange:L=>_(Y=>({...Y,date:L.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),a.jsx("textarea",{value:E.description,onChange:L=>_(Y=>({...Y,description:L.target.value})),rows:5,className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 resize-none",placeholder:"  "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" *"}),a.jsx("input",{type:"number",value:E.amount,onChange:L=>_(Y=>({...Y,amount:L.target.value})),className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"0"})]}),a.jsx("button",{onClick:xe,className:"w-full py-3.5 bg-gray-900 text-white text-base font-semibold rounded-lg hover:bg-gray-800 transition-colors",children:" "})]})}),a.jsxs("div",{className:"md:col-span-4 lg:col-span-5 space-y-3 md:space-y-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"   ",className:"w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",value:d,onChange:L=>f(L.target.value)}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-base font-semibold text-gray-700",children:" :"}),a.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[G.toLocaleString(),""]})]})]})}),a.jsx("div",{className:"space-y-4 max-h-[calc(100vh-240px)] overflow-y-auto",children:V.map(L=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"px-4 py-3.5 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:bg-gray-50",onClick:()=>ge(L.projectName),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m.has(L.projectName)?a.jsx(Zb,{className:"h-5 w-5 text-gray-500"}):a.jsx(Xb,{className:"h-5 w-5 text-gray-500"}),a.jsx("h3",{className:"text-base font-semibold text-gray-900",children:L.projectName}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",L.works.length,")"]})]}),a.jsxs("span",{className:"text-base font-bold text-gray-900",children:[L.totalAmount.toLocaleString(),""]})]}),m.has(L.projectName)&&a.jsx("div",{className:"divide-y divide-gray-100",children:L.works.map(Y=>{var ue;return a.jsx("div",{className:`px-4 py-3.5 hover:bg-gray-50 cursor-pointer transition-colors ${c===Y.id?"bg-blue-50 border-l-4 border-blue-500":""}`,onClick:()=>u(Y.id),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-base text-gray-900 line-clamp-2",children:Y.description}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:Se(Y.date,"yyyy.MM.dd")}),((ue=x[Y.id])==null?void 0:ue.length)>0&&a.jsxs("span",{className:"text-sm text-blue-600 flex items-center gap-1",children:[a.jsx(Un,{className:"h-4 w-4"}),x[Y.id].length]})]}),Y.notes&&a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:Y.notes})]}),a.jsxs("div",{className:"flex items-center gap-3 ml-4",children:[a.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[Y.amount.toLocaleString(),""]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:ye=>{ye.stopPropagation(),Z(Y)},className:"p-1.5 text-gray-500 hover:text-gray-700",children:a.jsx(bo,{className:"h-4 w-4"})}),a.jsx("button",{onClick:ye=>{ye.stopPropagation(),fe(Y.id)},className:"p-1.5 text-red-500 hover:text-red-700",children:a.jsx(Et,{className:"h-4 w-4"})})]})]})]})},Y.id)})})]},L.projectName))})]}),a.jsx("div",{className:"md:col-span-4 lg:col-span-3 bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-5 lg:p-6",children:c?a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-5",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900",children:" "}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Ctrl+V  "}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:R,className:"hidden",id:"work-image-upload"}),a.jsxs("label",{htmlFor:"work-image-upload",className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 cursor-pointer flex items-center gap-2 font-medium",children:[a.jsx(ks,{className:"h-4 w-4"}),""]})]})]}),((U=x[c])==null?void 0:U.length)>0?a.jsx("div",{className:"grid grid-cols-2 xl:grid-cols-3 gap-4",children:x[c].map((L,Y)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:L,alt:` ${Y+1}`,className:"w-full h-40 object-cover rounded-lg cursor-pointer",onClick:()=>Q(L)}),a.jsx("button",{onClick:()=>K(c,Y),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(et,{className:"h-4 w-4"})})]},Y))}):a.jsxs("div",{className:"text-center py-16 text-gray-500",children:[a.jsx(Un,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),a.jsx("p",{className:"text-base",children:" "}),a.jsx("p",{className:"text-sm mt-2",children:"  Ctrl+V "})]})]}):a.jsxs("div",{className:"text-center py-16 text-gray-500",children:[a.jsx(Un,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),a.jsx("p",{className:"text-base",children:" "}),a.jsx("p",{className:"text-sm mt-2",children:"     "})]})})]}),a.jsxs("div",{className:"md:hidden space-y-3",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"   ",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",value:d,onChange:L=>f(L.target.value)}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-gray-700",children:" :"}),a.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[G.toLocaleString(),""]})]})]})}),V.map(L=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",onClick:()=>ge(L.projectName),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[m.has(L.projectName)?a.jsx(Zb,{className:"h-5 w-5 text-gray-500"}):a.jsx(Xb,{className:"h-5 w-5 text-gray-500"}),a.jsx("h3",{className:"font-semibold text-gray-900",children:L.projectName}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",L.works.length,")"]})]}),a.jsxs("span",{className:"font-bold text-gray-900",children:[L.totalAmount.toLocaleString(),""]})]}),m.has(L.projectName)&&a.jsx("div",{className:"divide-y divide-gray-100",children:L.works.map(Y=>a.jsx("div",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-900",children:Y.description}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Se(Y.date,"yyyy.MM.dd",{locale:it})}),Y.notes&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Y.notes})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsxs("span",{className:"font-semibold text-gray-900",children:[Y.amount.toLocaleString(),""]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>Z(Y),className:"p-1 text-gray-500 hover:text-gray-700",children:a.jsx(bo,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>fe(Y.id),className:"p-1 text-red-500 hover:text-red-700",children:a.jsx(Et,{className:"h-4 w-4"})})]})]})]})},Y.id))})]},L.projectName)),a.jsx("button",{onClick:()=>{l(null),i(!0)},className:"fixed bottom-6 right-6 w-14 h-14 bg-gray-900 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800",children:a.jsx(aa,{className:"h-6 w-6"})})]}),s&&a.jsx(zte,{isOpen:s,onClose:te,work:o,projects:t,initialProject:j}),k&&v&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",onClick:()=>h(!1),children:a.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[a.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 p-2 bg-white rounded-full hover:bg-gray-100 z-10",children:a.jsx(et,{className:"h-6 w-6"})}),a.jsx("img",{src:v,alt:" ",className:"max-w-full max-h-[90vh] object-contain",onClick:L=>L.stopPropagation()})]})})]})},Yte="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAgAElEQVR4nO3dedgdRZ328W8ZIECIIYmENYAiyBZkEWRfRBQcBQFFRVAZtkFlhFdBUGEURhgVFBdcYEZRQEZhZJNFFAVEERVZJUIgsgZIZEnYEkJS7x/VkQfyLFV9qrqq+9yf6zpXuEKd7t+TPs+5u6urq0BEREREREREREREREREREQAMIP9pYVRwGoN1yIiImV6yMCCV/7lEkM0Xg24L209IiLSEmsAD7zyL1+VoRAREekABYiIiNSiABERkVoUICIiUosCREREalGAiIhILQoQERGpRQEiIiK1KEBERKQWBYiIiNSiABERkVoUICIiUosCREREalGAiIhILQoQERGpRQEiIiK1DLWgVCx/AK5JvA8RERncjsCWqTaeOkCuMXBs4n2IiMggLJxMwgBRF5aIiNSiABERkVoUICIiUosCREREalGAiIhILQoQERGpJfUwXi8WJuOGmq0JjMlcTr+bC5xn4P5eN2RhK2Ad3PEt4rPWxx4GzjXwXC8bsbAM8BZgdWASYCLUJvVY3KMS1+YqIOsvtYWxwAnAR4GlctYiL3Oihc0M3FbnzRY2Br4FbBO3LOnR4RY2NfBinTdbOBD4IrBi3LKkFxY+beDLOfadrQvLwvLAb4AjUHiUZgngG3XeaGE74PcoPEo0BfjX0DdZMBa+Dfw3Co8SnWhhQo4d57wHcgWwWcb9y/C2sbB0yBssrAf8EtfNIWV6W433fAY4LHYhEs1SwA45dpwlQCzsR8LH6yWKJYANAt9zKjA6QS0Sz5SQxhZWxgWIlC3ouMbSeIBY9wWTpb9Ogk30bWhhe2C3hLVIHN7HtHIysGyKQiSq0OMaRY4rkL1xZzVSvpB+1aOTVSExTbCev/fVIJf9EtcjcfTNPZC9MuxT6vEaUl0N7dwlcS0Sh8G/m3FvYFTCWiSeLI8/5AiQOjfxJI/Znu22RyPp2sIaeN6z7U5JK5GYfH9Xo2o0QKx7qGxsk/uUnjzl2W6rpFVITP8IaKvj2h6+v6tRNX0Fog9ku9zr2U7HtT28jml1/2PtxLVIPL6/q1EpQGQojxr4u2dbHdf2uN6zXZbnCqQ23+MaVdMBojOa9viqTyPrnkxWt2Q7vICbYsaHflfb43oDt+TYcdMBsmrD+5Nw83BTVngFCDqmbTEDOCBgkkwd13a4Bvhwrp03PZniKgFtp+GmT/i1cbNOSplCjinAucBnY8z2K0mFHNf5wMeBc3qd7VfapbEAse5pVt+ujvnAHgamJixJ4gj5ovkj8JG6s8FKo0KO67EGzkhWiRSryS6skCclr1N4tMbyAW2/q/BoDd/jugD4TspCpFxNBkjIDK2XJ6tCYgs5rpcmq0Ji8z2u16rbqn81GSAhU4PfnqwKic33uM4yYQ+xSV6+x1W/q32s1ACZmawKic33uOqYtouOq4yoyQAJWSfisWRVSGy+x1XHtF10XGVETQbI/IC2LySrQmLzPa46pu2i4yojajJA5ga0DVpKVbLyPa46pu2i4yojajJA5gW01YeyPXyPq45pu+i4yohKvQJ5Q7IqJDbf46q5ldrF97jqd7WPlXoFoplA28P3uE60MCVpJRKT73HV72ofazJAZgW0PcTCCskqkZgeD2j7uWRVSGy+x3VDC3skrUSK1ViAVFNY+I4ZHw9cYGEb69ZwlnI9GNB2Hwsn2fAJGKV5Icf1B9YdW90P6TNNz8b7EDDJs+32VIukaCre5J4Ergb+nwn74gB3TEMcCxyrY5qcBe4BzgO+aMKH24Yc1/HATxbtVJKaB/wZON7Ar3MX0/R6IKFfTtKM8cB7gKkWtgl8r45pmQxu4MLxwG9t2KSXoONaqtG439GrLfxH7mKaDpA7Gt6fhBkD/MIGzJxcTaTnu/St5LEF4dOt63e1fJ+38O6cBTQdIDc2vD8JNwb4bOB7dFzL914LGwe0v4mw2SMkj5MsjMq1cwWIDOZgC0sGtNdxbYfDfRsaFx5Z1tmWIOsBO+baeaMBYtworJub3KfUMhZ4Z0D7n6cqRKJ6b+CJwZXJKpGY9s2146avQMCNCpHyeX8ojRvto7PV8oWeGPwoVSESVeiJQTQ5AuR/M+xTwoU+Yazj2g7ex7U6MbgtYS0Sx1hgkxw7bjxAqucM9GVTvhVs2HNCZ+CeJ5GyrR7Y/stJqpDYJufYaY4rEIBPEjY3luTxWt+GxoVH9nHpMqKgLxoD56JBEm0QemIQRZYAMTADeD9uehMpV+iH8nSqJ5KlWHW+aN6LHiwsXV9dgWDgItyN2udz1SAjCj1bXQh8EN18LdmkwK7JRd3OO6AHRkvWXwECYOB8XDfJdwmb1VWasUzoGwwsMPBhYFvcXD1a8rQ8Y0LfYFx4rAscAUyNXpH0Kvh3NYamJ1NcjIHHgMOAw6x7KGbFzCX1gy2Bk1PuwMDvgJ0tLIUbIZLlA95nPgu8NdXGqwkZvw583cJEYAMyn4T2id/kLmAo2QNkIOPObHR2k5itcQZaV/Wlo5uwDbBwcFP7Mq7H4Lqm9tfPSp7hWGcPIiJSiwJERERqUYCIiEgtChAREalFASIiIrUoQEREpBYFiIiI1KIAEemOkh8ZkPqKPa4KkP5U7AdSRNpDASIiIrUoQEREpBYFiIgMycKhFqZbsH3+mmnhA7mPR2kUICIyKAsH4ZZa8F6ZssNWAH5k4Q25CylJUbPxhrAwDrfmxJrAGtWfi/57Im620FnAzAF/3g9cYOC+HDX7srAj7oM6HjeT7Q0G5uatSvrQJ3IXUJglgLcDd+UupBStChALywN7APsAb2P4+idVrw1e8fdfsXAT8FPgxwYeSlFrHRZGA/8LvPsV/+spCx8ycGmGsqQPWXcytmHuOgq0Re4CStKKLiwLO1q4DHclcRbwDnoLv82ALwEPWri2WsiqBB9j8fAAF5yXWLesqEgT1s5dQKEm5i6gJEUHiIWxFr6DW5Gr19AYyvbAzRb+n83/73H4CP//vxqpQtoq5vM9a0TcVpeMzbDPYp/bKrYLy8JOwLnAyg3sbjRwKrC3hX2Nu1fSqKr7as0Rmm0Sb3flqoJ8BdyxHweYvBX90wLcvbQZBp7OXUxiOtMenJZmHqDIALGwP/BDmv/i2Bq4ycKbDdzb8L591oIfbWFlA48kr6YhFkbhThbejwvIlXH3rkblrGskFp4FZgB/By4BzjcuXLpiYe4CCjUndwElKS5ArLsHcBb5zjonAr+2sIWBxxrcr+/Pu2TSKhpiYTvcicLewITM5dQxBnefYG3cgI6vW9fV+mPgHAPzcxYXwYLcBRRqdu4CSpK7z/9lrLvPcT7561od+JXN09/ZaRaWs3AGcB1wMO0Mj8GMAt4KfB/4k4W1MtfTq7tzF1Coe3IXUJLcX9T/ZN3N7Asp56poQ+ByC0vlLqQrrOsivAMXHF32RuA2CwfmLqQHv0FXIYO5PncBJSkiQCxsCVxBeV/W2wKfy11EF1h3dn4t/TO6Z1ngvy0cm7uQOoy7x7MP7e+Ki+kvuMcJpJL9bL+6ifpT3C9ciY6ycHrD90M6pTpBuJQCPm8ZnGThQQPn5C4klIGfVTM+rI+6c58GbjXwYu5CSlLCL/QBwOTcRQxjaeAE4NDchbSRdQ9t/hL379ivzrLwDwNX5i4klIHncTM3iCwmaxdWdfVxfM4aPB2oSdTCVU/4Xw0sl7uWzEYBF9p4z/EMpejne6S2Yo9r7nsg/0rZVx+LjMJNfSKerBuWfAGuC0TcFdjFtvDnW0RCZAuQ6hfpuFz7r2EP626qd0ETZzQH4PrO5SWTgUNyFyESS84rkLfR+9XHXNzN2U8Be+KGT47B/VwTgNfjZs/8d2Baj/sCN9mhjKCalkXzdg3ueNvf94OkQ3LeRN+jh/f+CfcFdUV1k28wT1ave6v237SwM3AisFXN/e5mwZiC+yQLcRRuLitZ3ErAx4FTchci0qucVyDvqfEei5v0cGsDPxsmPAZl3A3d7YDPUG98+zjgzTXe1zesWwSrlc8+NOgY666URVotS4BY9yUcOtvnC8A7DXyql7HYBhYYOBl3FfJsjU3sWnfffeJQyn2mpxQTgf1yFyHSq1xdWKHdVwuAvQ1cHqsA42bd3RM3Nj8kSHcDPh+rjg7aq4f3TsNNpHk1bvGwWSVNm15NMz8RN3PyurhRhLtSb+LPdwHfi1ddGtZ1RR6ATgr+ilsOW93XA7QhQCywv4Gfxy7CwC+t64/+dsDbNrcwzmhWzsVY17+/eY233gccbOBXkUuKyrgpzmdVrzuACyy8Fvgf3JT0IXaxsKyB5yKXGY11YXk7fksN9INvo4E0L9N4F1bV9xsyvPM8A+elqse8tOJhwFvYJlE5bfe+Gu85A1i/9PAYinHrgewMfJaws9OlgF0ilxP77PggFB4DfdTCazLst9irnhz3QDYOaLuAZiYzPDmwvdaLHlxo99XpBg4NHQxRGgPWwEmEDx54V4p6Ito6dwEF0snjADkCJOTq43vVGV5Sxs3VdEfAW9ZJVUtDop/RWLfQVciDlpcw8hrwrWLcbAUhkyZul6qWSF6bu4ACtf13P6rSAyTk3kSvvhvQVlcgi9sI/8/TbOBDHb0h+VHgKc+2ry98vRlNQ7O4fp+V+GVKDpBpxo18aMrFAW0VIIvbNKDtV7s6CKEaNfZNz+avAqYkLKdX/T4J5mAUIAPkCJANPNudn7SKVzDwEDDVs/mamhRvMb4BMhv3MGiXfQ3/+zobpSykRy/kLqBAWg9kgEYDpBqBtapn8/9LWcsQQp4z0fTuL+c7VflPTL0HOFvDuCl0fIedl3wFMid3AQXq5JVzXU1fgfj+srxg3PKRTft9QFvdTKtUD9j5XoFckbKWgvgOSy45QO7PXUCBFKoDNB0gK3u2uz1pFUO7J6Ct78/SD9bHjcIayQLgqsS1lOJqz3YxAyT2oIRbI2+vC0JGa8ZS7GCTpgPEdwK5O5NWMbS7AtqOTlZF+6zu2e6vJT95HZNxs0A/7tF0RZt/Ybeh+IZgv3gOuDZ3ESVp+oPrO59OlgAxMA+Y4dlcAfIS36dzc50Y5OJ7QlLk1PfVGu6fw6270+9eAI4w7ipaKk3PhVX6FQi4AFnFo50C5CW+AeI7yq0r7sbvae7xwGOJa6nFwBdxr0ZY9xzN6SM0exZ4ZwPlDPQ3A482vM/ilRogM5NWMTzf2V/bHCCx+1QVIIO727Pd8kmr6J4XDVyTuwgp9x5Izn7yZzzbtTlAYvMNkH47g3vIs934pFWIJKIAWVw/XIHE5hsg/TYE0vdkRFcg0kqlBkjO2Vl1BRLON0CKWRyqIb4/r65ApJWaDpClPdu14QrE92fpBwqQwekKRDqt6QDxXfpzYdIqhuc7102xD/dk4Ds8u9/mEfId/up7ZT4SfSa7qdjjWuoDTG2g8eAv8Q2Gfuv2852qfV7SKkQSUYDUpwB5iW+A9Fu3n29gKkCklRQg9SlAXqIAGZzvz6tp06WVFCD1tbk/P3afqgJkcLoCkU5TgNSnK5CX+AbISkmrKI/v6DQFiLRS01OZdIkC5CW+AbI2boK+fuG79HHxXVjWLeX6fvwXhKtr88Tbl4gUIPUpQF4SEiD9xPfnLfoKxMK+wH8Dy+SupTLONje0dR7wC+BIA9Mb2mdrqAurPgXIS/7h2e71Sasoj+/P67NuSBbWheCZlBMeTRsN7A5caPtvGPqIdAVS3zYWPh9xe+MibqtpvmdmW1sY1Q9rKlj3hbuBZ/OQlTBH2G105+L/oGiXbQR8ADgrw76LfZBQAVLfttVL3Op7PsYB29EfU3G/A78HCReYQtcet+5LU/ckXvIO8gRIsdSFJTGE9A3vnqyKsvj+nNOSVtGb/XIXUJjNchdQGgWIxBASIPvbjvenW3eltbdn81jdV1FZN2/dB3LXUZjJuQsojQJEYvDtwgL3bMThqQopxLH4T5BYZIDglnVeLXcRhVnStvteZXQKkP4U9aacccN4fVffAziqq1chFiYCnwh4S6kBskLuAgqlABlAASKx/D6g7WuAH1v/6f1bwcIo4BzCpmz5U6JyejUpdwFSPgWIxHJpYPt3A6elKCSjs4BdA9o/TrkBMiF3AVI+DeOVWC7FdY2FXFX8u4U3AAcbeDBNWelZWAs4A3hL4FsvMuWO8R/l0eYWYHbqQhoyCVgvdxFtowCRKAzMtvBbYPvAt74duNvC94HvGrg9fnVpWPeMxEHAR/BfPGqgS+JW1HgYHW7g+ob3mYSFD+K6H0tU6kmGAkSiupTwAAF3z+CjwEct3Ia7sTyrepX01PoSuJvLK+DOVtftYVsvAL+MUZRILgoQieks4ER6W/djo+rVdecYeD53ESK90E10ica4SRW7dmM8hQXAF3IXIdIrBUh9XzJgYr2o1/VToi8Bz+QuonA/NPBA7iJEeqUAqc9nlEqpkt2UM/AUugoZjq4+pDMUIPW1OUBSO5XuDO+MTVcf0hkKkPoUIEOorkL2BRbmrqUw9wGfzl2ESCwKkPr0bzcMA5cDh+WuoyBzgLcZ/9UbRYqnL8H6dAUyAuOezj4ldx0FmA/sbtKv/VHsA2fSk2KPqwKkPgWIn6OBi3IXkdlHDFybuwiR2PQgYX0KEA8GrIX34KY4P5H+Wl/7IeBAA1flLqRtLIwFplBvipg6NA9WDQqQ+hQgnowbuvpVCz8FvgHsmbmk1BYC3wI+Y+DZ3MW0jYXX4aa08V2USzJpugvrxYb3V4fvbLIKkEAGHjKwF+7M8ivAzMwlxfYA8J/A6wx8QuFR25dQeLRC0wHi+4Ryzm6OsZ7t5ietosMM3GHcvZGVcbPxnkN754V6HvgxsAuwpoHjDNyfuabWsq7L6l9y1yF+mu7Cetqz3VjgkZSFDOPVnu2eS1pFWkWM6jCuq+cq4CoLH8KdOIwBlqv+HAOMppyVC1/EnQQ9W/35DPBMwWt6tNHr6Ohyx13UdID4XoH4fomn4LvmcZsDpDjVl/Cz1atrXVvib3zuAkagk4UBmu7CCrkCyaUfrkBESrV87gJGkKtnpEil3gNZI2kVw1vds51ukEppunB2XPKJ2SMmz0CgYo9rqVcgU5JWMQTruq/W9Gxe8gddpFc+gxpSDCR5MsE2Y9HDoK9Q6hVIlgABNg1oqwCRLvMZSTY9wX7vptxJOM/KXUBpmg4Q3+GNChCRvO5k+P7+m4xbsz4qA3OBm2JvN4IH0IwCi2k6QKbinkoeyUoW3pi6mEHsGtB2RrIqRDKr1ms/EDc1/yvdB3wk4e6/mXDbdTwNvFvDtRfX6DBeAwss3AWs79F8P+DWxCX9k3UPte0c8Ja/pKpFpAQGrrCwNvA+4G24qeivBC4yCR+kNXC2dd3dB5N/7rTpwGnGTa0ir5BjLqy/4hcgH7JwdIOpfyj+D6w9bNrdhaUzKfFSrV9yevVqcr8X4l5SsBzTuf/Vs90k4F9TFrKIdWPPPx7wljtS1SIi0hY5AiTky/dk28xDhacAEwPaK0CkRLqy7KZij2vJVyAAKwAnpSoEwMJWuJuFIRQgItL3cgTIXcCjAe0/Zt3NtOgsrEu91fIUICLS9xoPkOqm+E/C3sIZNuwexYgsbALcgLvXEuJJGhwdJiJSqlxrov+0xnu+aeFiC+v0smMLr7ZwMvAH6k3cdn7KIYwiIm2RJUAM/J6wbqxFdgfutPA9C9vYgHUiLKxp3SJG04FjqL/W8o9rvk9EpFNyrol+HnBkjfeNAg6pXjOtGys+DXiies3BPXw0Abe2wCrAbsBGEWqeCVwXYTsiIq2XM0B+Sr0AGWgS7gHApvxI0xkMzcLGuG7BRVeGRv/d6H9vRmTWrQi5Oe67opSfs9/+u25vSXLZAsTAHyz8EdgiVw2B5lHeHD11RQ1BC6sBV9Pj/Skpi4UP455AH5O7FilTrpvoixxKe87oTzFuRk5Z3KUoPDrFui7f/0HhIcPIGiAGbgHOzFmDp1kkfqCxraybAn/j3HVIEJ/VND+Mu98o7eC71lJUua9AwI2I8l2pMJejTLsnT0zpTbkLkCD3Gr9lWXVc2+WuHDvNHiDGPZh3fO46hnGLgR/mLqJgq+QuQIL8zbPdakmrkNh8j2tU2QOk8g3Cnk5vyixgn9xFFE4B0i5TPdutnrQKic33uEZVRIAYtwbyB6k3L1UqTwA7GPeMiQztNbkLkCDnj9TAuhvnOYf4S5jpZFrwqogAATBuqdv3ApfnrgWYDexkMqV6ywy25KmU6RfGDZ0flnE32V9ooB6J4/PVSXjjigkQgOrm3p7kDZFngJ2NlrD09VjuAsTbpwPa6ri2w3Tg3Fw7LypAAIw789kD+ATuSqBJFwIbGrip4f2Cu9/iI8YZ/0zPdk94tLmll0KkMZeasFmkb05WicR0bK6rDygwQMBdiRh3Y30t4Nu47q2U/grsaGAvA/cn3tdQpgFzR2gzy7i5vnrlO+RvukebK2nPw6D96rfABwLfc2WKQiSqI029mc2jKTJAFjHwuIGP4UaEHIGbxTeWR4BvATsAUwxcG3Hbwap7QKeO0CzKQ5fVvk4fodk9wF88tjUbtySwlOkKYBfj9/DgQD9EA0hKZYEDDZyWu5BBWVjDgo3wOjlBbZMtfNLCjTXqecTCtyxsHzIVfFMsLGvhVAtzX1H3XAunVBPbxdrX0tYt1DXYv9NsC9sFbGsJC9+w8ESkz41evb3mWPiBhbf08jm3sL6FKy28WMDPpBdMs3C8hTUCjuHJkfY96LDuQT9cVYH31fzcDfRfBo6NsJ1BWfeFugJuVt4VBrxGA//A3VeYWf05yzR/T6UWC0viDtgquNr/btxkjin2tQXwdmBr3NP204HTDDycYn8i0hzrTuKPibCpNQabC7DVY72rL9WHqldnGLfi4b3VK/W+/ojH0E4RkVcq+h6IiIiUSwEiIiK1KEBERKQWBYiIiNSiABERkVoUICIiUosCREREalGAiIhILQoQERGpRQEiIiK1KEBERKQWBYiIiNSiABERkVoUICIiUosCREREamn1eiAiIk2z8EZgfKbdzwNuq7FEcRLZAsTCGOBzwMbAFGDVXLUM4gngPw18LcXGLXwGOApYPsX2a5iPW//8SuAEAwt73aB1a81/BlgHmAyM6nWb0pMZwDEGzs5dSFtZ12PzC+CtuUuxbuXQLxs4I2chWQKkWjL3F8AbcuzfwwTgq9Yl/dUxN2xhV+CLMbcZwZLAm6vXasBBdTdk3WfqbOD9cUqTSFYBvm/hVgO3+bzBwvbAp4BXJ60svfnAncBNwMU9LG19OPnDA9xS5GsB37OwqoH/yFVI4wFiYRzubHdC0/uu4WAiBwhwSOTtxXaghXuNW0s5SBUelwC7xS9LIlgC2B939Tss63oErgSWSV1UQxZ98d9tYTfjzuBDvSNmQZEcZ+HbBh7LsfMcN9GPoh3hAfC2mBuz7swh6jYTOd7Ca2q87zAUHqV7i2e7g+lOeAy0DvBnC+uGvKnqvto6TUk9McA+uXbeaIBUVx9HNLnPHo23cW+WTcTd+ynd0sCxIW+wMBb4QppyJKL1PNttk7SKvMYDxwW+ZyKwXIJaYsh2rJq+AtmNdnyBDhTzQ9Omnz30HsZB5BuZIv58rypem7SK/N5vYc2A9iX/7q6Sa8dNB8jaDe8vhpgfnJI/hK+0ig27ebp/skokKuv3OWzTZ7WOVwF7BrQv+d8j2wjWpgPk9Q3vL4Z5hW6rCV6j5Kr+5E0S1yLxPOfRZunkVeS3YUDbucmq6N3kXDvWFcjInoq4rbrDB3OZ5Nnu7UmrkJieNmA92j2TvJL8QgJkTrIqerdkdQ+ycU0HSLa+uh7E/NJ/IuK2SvKm3AWIN98Toq5+VgfaIKBtyQECmaalanqnbZt76+4YT2UvUm3r3ljbK4gCpD2merbrhwAZU40MHZFx3c8zEtfTOm37Qm/aVQm2+asE28ymerYlaEy9ZHWFZ7tbklbRTtfkLqA0CpChzQVOS7DdU4AXEmw3l5LmMJPhTQXO9Gx7ecpCWuobuQsoTYmz8c4ApmWuYRbwNZOgu8nAPdbddP4E+Z6bGIebxDKG0BEgzwM/Ae6PtH/x8zBwrvEbgQXuSvl6YNt0JbWLgRutm0njs7gh7gur14Ih/vT9u6H+3wLcpKTFKjFALjbw0dxFpGTcpXC2y2EL2wHXRdrc6gFt5wNb+k7mJ/kYN+PrjsBGeN4nKMQ44GgSTTtiXA/CKSm2PRjrN2IumxIDRNol5CrqNIVHexh3Bnxz7jpCWTfT999ws35LQroHIr1aNqDtJcmqEKkYd//y57nriKToKxAFiPQqJEBuSlaFyMv1w4OQ2SlApFe+AfKkcTfQRaQjFCDSK98AeTBpFSLdpC4s6TTfgRiPJK1CRBqnAJFe+c4wPCppFSLdpCsQ6TTfaa77YXpwkb6iAJFe+V6BKEBEOkYBIr3yvQJZ38JSSSsR6R51YUmnPenZbllg55SFiEizFCDSq5A1Er5mYflklYhIozQXlvQqJEDeAEy3cEHg+yTcQuAe4ErTH4tDdVXRXVgKEOlVaBCMBw5OUYgM6gkLBxq4KHch0j0KEOmJgcesW2dbXVNlmgD8zMI+xl35SY+sm6hxuRGa3Wbg3+PsrlwKEInhz8BbcxchQzLAtyz83PiPmpOhbYdbUGo4ffHgrG6iSwx/yV2AjGhF4JDcRXSEyV1AKRQgEoOmaW+H/XIX0KCU321NBkjRXVgKEInhl7jlaqVsm1t4fe4iUrPue03PHDVA90CkZwaetHAx8J7ctciI9gVO6GUDFtYDdgImRakovu2ATRNuX1cgFQWIxPIlFCBtsG3dN1r4HHAEMDFeOa2keyAVdWFJFMaNxNIw0fKtEPoGC0tYOAc4EYWHDKAAkZiOBhbkLkKGFdTtZN3Z9i+BD6Ypp5XUhVVRgEg0Bv4O7I2eNSjZyoHtDwR2TFFIi6kLq6IAkaiMu5m+JfC73LXIoIyFsT4NrZtB+aTE9YQUR8sAAA/WSURBVMjwir4C0U10ic7ArcC2FrYC1gEmo89aE/YCpni08z1xPI4a90xaxndBtIF0BVLRL7UkY+AG3EsaYGFt/ALE1/sjbqtEj9Sc2kUBUul8F5aF3SzcYOFRC89buNvCWTHXpbDwbxZusmAjvR63cJGFI6w7exdpVLV65Jq560hsau4CPBTdhdXpALFwJHA5rk9+Rdy63GsDHwZu9+0LHmEfnwS+Q9wHlyYAewBfA262sEnEbYv42DB3AQ2oGyC6Aql0tgvLutEmXxymyWq4Pt6je9xVjCmbhzMR+K2Fdxn4TeJ9iSyyfu4CEnsROLPme30CZIqFa2puf6BlImwjmc4GCO6J25H+8XfpZQfWrbC3ei/b8DQGuMTCZOPW3hBJbbXcBSR2UjXYI5VxwA4Jt1+ELndh+Uwat3aP+wgdU9+L5ej9aknEV1e7aRYCX6hedXX13yZYl69Axnm0GdPjPsb3+P5QR1r4qoF/NLxfkeEswK0J81zuQoZgcevCPwT8n4HretyeAqTS5QBpQtOrji0NvAP4UcP7FRnKd4FPG5iTuxBpngKkNzMz7HO9DPuUdmh6yOc84HDjbkj3E12BVLp8D6QJChDpZ4/1YXiAAuSfFCC9mUbzl+4KEBEpggKkB8bdPPxZw7tdseH9iYgMSgHSu+OAR3MXISLpWXVfvYxuovfIwEPWrcF8CLA54R+wMbgJ8EbHrk1EJCUFSAQG7qGHh/ysWyXuD8BroxUlIinoCmQAdWEVwLjRXAfmrkNERqQAGUBXIIUw8BsL9wJr5a5FRHo2G7glwna2pfkHlr0pQMoyFQWI1Ff02hEd4XsFcquJsJa8dUH06l63k4q6sMrySO4CRGRYvgHSF2GuK5CyLMhdQC4WVsUtyrVy9Vqp+nMc5fQ7L8Ddr5qBC/sZwH3AH4yb5VVkkb74PChAJJsqNN5TvbahnKAI9ZiF84HzgBtMn5x9AkvmLiAD389oXwSIurCkcRZeZ+HXuOm1T8PdKGxreICbHeDjwO+A+y28O3M9TVnZunVq+om6sAZQgEijLBwG3A7slLuWRCYDF1o408KyuYtpwKG5CyiUrkBEYrGwkoVfAd+mP75YDwJus/DG3IUk9gXbXxN86gpkAN0DkeQsvAb3pP0auWtp2FrADRbeZODO3MUkMga42cKfaNcgkGnACQYeDHyf7oEMoACRpCwsA/yC/guPRZYBrrSwmYFZuYtJZDTuPlab7AC8ycKmiQY99EWAqAtLkrHu83UBbnhuP5sMXGbTj1rqi26TiDYm/F6curAGUIBISt/BreEubqbm7+cuIsDjuQtoSKoA0RWISF3W/WIekruOwuxn4V9yF+Hp7twFNCTVAAAFiEgP/it3AYU6IXcBnqblLqAh4wLbqwtrAAWIRGdhN2CL3HUUalMLO+cuYiQGHgbm5a6jAaETFaoLa4C+H4VlI8yYGdEquQuI5OTcBRTuOODq3EV4OA/4SO4iEks1A0JfXIH0fYAAv8ldQJdYd+XR9YfnerWDhfWMm76/ZMcD+1PwehQRzA5sryuQARQgEtv7enz/bOAG3DMTs4Cne64onlcBE3FzX60LbNDDtvak8AAx8KCFM3DTz3TVU4HtFSADKEAktg/WfN/vcMN+LzAt6Xu38GbgY7ifOfR+4l7ASdGLiu8E3M9X7KJGPbo30Xb7ogtLN9ElGuumZF8x8G3PAIcZ2NbAuW0JDwADNxr4EO6p5tDFwDazbr2TmKJ/aRl4FPcg6F2xt12I6wLb6wpkAAWIxBTaffUYsJGB76YopikGrgc2JHy+q30SlBOdcWfpmwE/y11LZHcBVwW+Zw7wnEe71pwI9UJdWBKFdWdmIV+ITwNvNfD3RCU1ysATFnYFbgXGe75tT+Dr6aqKx8CzwN7VVdMGwBTCn6EoyRzgIgMvhrzJwEILl+MWQRvOn2pX1iIKEIllPcK6rz5t4I5UxeRQ3XQ+EjjL8y3bWhhlWjSLrXFddY/gpubvVx/BTfWyD4OfLFwGnNloRZmoC0tiCRm6eydudE8XnQ38zbPtKGCdhLVIAgaeNfBvuBF5KwNb4abu2QlY28A723RS0AtdgUgsGwW0Payrv2BVF8cxwEWeb9mAwofzyuCqaeAfrV59SVcgEovvFchUEz7ypVUMXAzM8Gy+fspaRFJSgEgsvgFyYdIqynGxZ7teHkYUyUoBIj2zsDz+83j1S4D83LOdAkRaSwEiMWzm2e45A39OWkk5fLvp1rXx5prqi6efpRx9HyAGTCkv2vtAne9657cnraIgxj1h/7BH01HEfyJdpBF9HyASxUTPdrclraI8vk+mt/mBPOljChCJQQEyOAWIdJoCRGKY4NnOp0unS+7zbKcAkVZSgEgMvlcgoWsvtJ3vYkUKEGklBYjEoAAZnO/PqwCRVlKASAy+XVj9FiC6ApFO01xYEoPvanVzklZRHt8AibXaX/TnQCyMBd4LvAVYBrgG+ImBmbH3Je2jAJEYfCdG9F3Nrd8ErUnRFAuTcQsurTvgr/cCPmlhZ5NuOdjiWZgEfAA3A+983JLMPzPwQNbCGqYAkRh8vwCXTlpFeUZ7tit19bof8PLwWGQN3LT1WzdbThksrAVcC6w64K/fAxxvYU/j/l9f0D0QiUEBMrjWBkj1JbnzME22soOHSz/4AS8Pj0XGA5dX3X59QQEiMShABucbIC8kraKe4cJjkZ2SV1EYC68HthumybLAoQ2Vk50CRGLwDZBJSasoj+/otOKuQIDVPdoMdhbedW/xaPOO5FUUQgEiMfgGyGuTVlGe13m2KzFAJnu06ccA8fmZff7tOkEBIjH4BojvF2pX+AZmiV1YPg+HviZ5FeXxWfdGASIS4B+e7XQFMrjHk1ZRj8+Q634clj3Go43vva/W6/sAsX4fiKYslbuAmv7u2W7bpFUUxLov1008m0+Pt1uR5vR9gOCWYy1FW28y+wbIZAtvSFpJObbEb4qSBfjP2itSFAUITMldwAAr5S6gJt8AAdg1WRVl8f057zf+T/KLFEUBAvvkLgDAuqd6N85dR00KkMX5/px9Ox2ItJ+mMoEDLGwO3Ag8lGH/y+L6ynemvTcl7wlou4uFNU2Hu22sO55beDaPdf9DpHFdDpCQG4obVq82WJi7gFcy8Lx1I4l8hn6OAk4F9k5bVVbfCWirKxBprS53YZX4cFYMc3MXMIQbAtruZWHfZJVkZOFjwJsD3vKnVLWIpNblAHkudwGJlBqMPw9s/30LmyapJBML2wBfD3jLbOC3icoRSU4B0j5P5y5gCJcFth8N/NoWMoihVxYOwK2dMSrgbVdpBJa0WZcDpKs3aR/LXcBgjBuAcFvg28YBP7Fwtm3pEGYLq1q4BPg+bkBEiNCrNo9yRJrT5QAJ/TJriyIDpFL3C3E/4EELF1vY08IUCyvZsLP55CwsYWFlCxtZeJ91V10PAO+qtzkuj1uhSLM6OwrLwAPWnRWvlruWyEq+sroM+EzN9y4B7F69/qnDp9R/NP5ziIkUqctXIBDeL98Gt+QuYCgGfg/8OXcdLREy1FekSF0PkG9R4HMTPZgP/Cp3ESM4MncBLXA3bk1xkVbrbBcWgIE7LHwDOCJ3LZFcbOCp3EUMx8D11b2Bf8ldS8E+ZbpxYrOVhWtyF9Gw9XIXUJJOB0jlaNzMqFvmLqRHc4FP5S7C0yeB3ej+FW4dNxi4NHcRkUwAdshdhOTT+V9w47p93orrzmrrPdm/AlsauD93IT4M3AUck7uOAs0BPpy7CJFY+uEKBAPPAodbOBHXtbIRsDruDKrUCQwX4IaIXgf8sG1dHga+Yt3l/gG5aynEAmB3A9NyFyISS18EyCIGZgI/yF1HHzkYN4x6l9yFFOATBq5NvI+2XmFLS3W+C0vyqabp2BOYmruWzH5g4PTcRYjEpgCRpKruw62AM3PXksGigQ8H5S5EJAUFiCRnYLaBQ4Dt6Z8FlG4Ephg4tW33r0R8KUCkMcZNXb4h8BW6+6U6FzgK2NqErdQo0joKEGmUgeeNezZnZdwIrfNxw1vbbA7u5/gQsIqBU3TVIf2gr0ZhSTmqEXFnAWdZ9zncAjdia8XqNan689WUM9R6LvAobkbkR6vXg8CN1fNGIn1FASLZGXgRNxGjiLSIurBERKQWXYGIdEfTDxJOA37c8D5z2xs3EERQgIhIfXcb+HzuIppkYR0UIP+kLiwREalFASIiIrUoQEREpBYFiIiI1KIAERGRWhQgIiJSiwJERERqUYCIdIdWJJRGKUBERKQWBYiIiNSiABGRupbLXUAGY3IXUBIFiIjUtXzuAjJYMXcBJVGAiEhd61lYJncRTbFucbONc9dREgWIiNS1FHC87YNZvS0sCXwRGJ27lpKUeOA3t302RXQGq8feoIV9gH1x3RqLlqA1+u/G/7tpxwDHaPxwfyoxQN5UvaQlLBwFfDl3HRLVwtwFtNj83AU0RV1Y0hMLY4H/zF2HBPEJh+eTV9Fdc3MX0BQFiPRqD1xfuLTDswae9mj3XPJKumte7gKaogCRXmlUSrvc4dnu0aRVdNuc3AU0RQEiw/G5NzoxeRUS0988292btIpum5G7gKY0HSAvNLw/6c1Mjzbjk1chMU31bKcAqU8Bkojvh1fK8IBHm2eSVyGxzAf+17PtTcCChLV02d25C2hK0wFya8P7k/qmG78rkMeSVyKxnG7gfp+GBmYDv0pcT1fdEHFbvidoz0bcp7emA+S2hvcn9f3Qs50CpB2eBk4IfI+GZ4ebC/w64vZ8rmYeMPBixH16azpALgQubnifEm4BcK5n29+lLESieBHY38CTIW8ycD3wnTQlddbZJu5zIBd4tPm/iPsL0miAGNcHuxdwCnpQqVQW92XjdRPVuACZnrYk6cE8YHdT/8Tt48D3ItbTZfcDn4q5QQOn415DeZyMV4qND+M1sNC4qS/WAD4HXAo83HQdMqhrgd0MnBf4vj2BOxPUI715FtjFwBV1N1D9vv4b8E7glmiVdc/1wJYmwTMgxoX4jsDZuBO7F4H7cFceGxp4IvY+fWWbC8vALNzsltJyxt3b2sDCRsCE3PUIL+KGkj5oIs3LZOAy4DILmwDjYmyzQ2aYxCOvjDu5uzblPuoocTJFaSmjQRKdZ+Dm3DVIOfQkuoiI1KIAERGRWhQgIiJSiwJERERqUYCIiEgtChAREalFASIiIrUoQEREpJbUDxLuaOHkxPsQEZHB7Zhy46kDZMvqJSIiHaMuLBERqUUBIiIitShARESkFgWIiIjUogAREZFaFCAiIlKLAkRERGpRgIiISC0KEBERqUUBIiIitShARESkFgWIiIjUogAREZFaFCAiIlKLAkRERGpRgIiISC1msL+0MApYteFaRESkTA8bWJC7CBERERERERERERERERERkWL9f8GkA7e6iMNFAAAAAElFTkSuQmCC",qte=()=>{const{projects:e,constructionPayments:t,loadConstructionPaymentsFromAPI:r,addConstructionPaymentToAPI:n,updateConstructionPaymentInAPI:s,deleteConstructionPaymentFromAPI:i,executionRecords:o,payments:l}=Ts(),[c,u]=b.useState(t),[d,f]=b.useState([]),[m,y]=b.useState(!1),[j,p]=b.useState("cash"),[k,h]=b.useState({project:"",client:"",amount:"",date:Se(new Date,"yyyy-MM-dd"),clientSignature:"",totalContractAmount:0,previousAmount:0,remainingAmount:0,startDate:"",endDate:""});b.useEffect(()=>{console.log(" ConstructionPayment: Loading payments from API..."),r().then(()=>{console.log(" ConstructionPayment: Payments loaded successfully")}).catch(C=>{console.error(" ConstructionPayment: Failed to load construction payments:",C),H.error("   ")})},[r]),b.useEffect(()=>{console.log(" ConstructionPayment: Loading additional works from API..."),Yl.getAllAdditionalWorks().then(C=>{console.log(" ConstructionPayment: Additional works loaded:",C),f(C.map(w=>({_id:w._id,project:w.project,amount:w.amount})))}).catch(C=>{console.error(" ConstructionPayment: Failed to load additional works:",C)})},[]),b.useEffect(()=>{const C=()=>{Y()};return window.addEventListener("headerAddButtonClick",C),()=>window.removeEventListener("headerAddButtonClick",C)},[]),b.useEffect(()=>{console.log(" ConstructionPayment: Syncing with dataStore"),console.log(" constructionPayments:",t),console.log(" projects:",e);const C=t.map(w=>({...w,vatType:w.vatType||"percentage",vatPercentage:w.vatPercentage??100,vatAmount:w.vatAmount??0,payments:w.payments.map(g=>{var N;return{...g,type:g.type||((N=g.types)==null?void 0:N[0])||""}})}));console.log(" Normalized records:",C),u(C)},[t,e]);const[v,S]=b.useState(""),[x,T]=b.useState(null),[E,_]=b.useState(!1),[M,O]=b.useState(!1),[R,K]=b.useState(null),[Q,ne]=b.useState("remaining"),[Z,fe]=b.useState({projectId:"",totalAmount:0,vatType:"percentage",vatPercentage:100,vatAmount:0}),[te,xe]=b.useState({types:[],percentage:0,amount:0,date:"",method:"",notes:"",quickText:""}),ie={:10,:40,:40,:10,:0},V=C=>C.reduce((w,g)=>w+(ie[g]||0),0),ge=C=>{const w=C.match(/(\d+(?:,\d+)*)\s*\s*/);if(w)return parseInt(w[1].replace(/,/g,""))*1e4;const g=C.match(/(\d+(?:,\d+)*)\s*/);return g?parseInt(g[1].replace(/,/g,"")):0},G=()=>{const C=te.quickText;if(!C.trim())return;const w=ge(C);xe({...te,amount:w,notes:C.trim()})},U=(C,w)=>{const g=x?e.find(P=>P.name===x.project):null;if(!g||C.length===0||!g.startDate||!g.endDate)return"";const N=new Date(g.startDate),D=new Date(g.endDate);if(isNaN(N.getTime())||isNaN(D.getTime())||C.includes(""))return"";if(C.includes("")){const P=new Date(N);return P.setDate(P.getDate()-7),Se(P,"yyyy-MM-dd")}else if(C.includes("")){const P=N.getTime()+(D.getTime()-N.getTime())/2;return Se(new Date(P),"yyyy-MM-dd")}else if(C.includes("")||C.includes(""))return Se(D,"yyyy-MM-dd");return""},L=C=>{const w=e.find(J=>J.name===C.project);if(!w)return[];if(!w.startDate||!w.endDate)return[];const g=ee(C),N=new Date(w.startDate),D=new Date(w.endDate);if(isNaN(N.getTime())||isNaN(D.getTime()))return[];const P=[];P.push({type:"",date:null,amount:Math.round(g*.1),percentage:10,status:"pending"});const F=new Date(N);F.setDate(F.getDate()-7),P.push({type:"",date:F,amount:Math.round(g*.4),percentage:40,status:F<=new Date?"overdue":"pending"});const q=N.getTime()+(D.getTime()-N.getTime())/2,A=new Date(q);return P.push({type:"",date:A,amount:Math.round(g*.4),percentage:40,status:A<=new Date?"overdue":"pending"}),P.push({type:"",date:D,amount:Math.round(g*.1),percentage:10,status:D<=new Date?"overdue":"pending"}),C.payments.forEach(J=>{var le;(((le=J.type)==null?void 0:le.split(", "))||[]).forEach(Me=>{const Ce=P.find(ze=>ze.type===Me.trim());Ce&&(Ce.status="completed",Ce.actualDate=J.date,Ce.actualAmount=J.amount)})}),P},Y=()=>{_(!0)},ue=async()=>{console.log(" handleSaveProject called"),console.log(" newProject:",Z),console.log(" projects:",e);const C=e.find(w=>w.id===Z.projectId||w.id===parseInt(Z.projectId)||w.id.toString()===Z.projectId.toString());if(console.log(" selectedProject:",C),console.log(" totalAmount:",Z.totalAmount,"type:",typeof Z.totalAmount),!C){alert(" ");return}if(Z.totalAmount<=0){alert("   (0  )");return}try{const w={id:"",project_id:C.id,project:C.name,client:C.client,totalAmount:Z.totalAmount,vatType:Z.vatType,vatPercentage:Z.vatPercentage,vatAmount:Z.vatAmount,payments:[]};console.log(" Sending to API:",w),await n(w),H.success(" "),_(!1),fe({projectId:"",totalAmount:0,vatType:"percentage",vatPercentage:100,vatAmount:0})}catch(w){console.error("Failed to add construction payment:",w),H.error("  ")}},ye=()=>{K(null),xe({types:[],percentage:0,amount:0,date:"",method:"",notes:"",quickText:""}),O(!0)},Ne=C=>{const w=x==null?void 0:x.payments[C];if(!w)return;K(C);const g=w.type?w.type.split(",").map(N=>N.trim()):[];xe({types:g,percentage:V(g),amount:w.amount,date:Se(w.date,"yyyy-MM-dd"),method:w.method,notes:w.notes||""}),O(!0)},Re=async()=>{if(!x||!te.date||te.amount<=0||te.types.length===0){alert("  ");return}try{let C;R!==null?C=x.payments.map((N,D)=>D===R?{type:te.types.join(", "),amount:te.amount,date:new Date(te.date),method:te.method,notes:te.notes}:N):C=[...x.payments,{type:te.types.join(", "),amount:te.amount,date:new Date(te.date),method:te.method,notes:te.notes}];const w={...x,payments:C};await s(x.id,w),H.success(R!==null?" ":" ");const g=c.map(N=>N.id===x.id?w:N);u(g),T(w),O(!1),K(null),xe({types:[],percentage:0,amount:0,date:"",method:"",notes:""})}catch(C){console.error("Failed to save payment:",C),H.error("  ")}},ee=C=>{const w=C.totalAmount;if(C.vatType==="amount")return w+(C.vatAmount||0);{const g=w*((C.vatPercentage??100)/100)*.1;return w+g}},me=C=>{const w=Ee(C.project);if(C.vatType==="amount")return C.totalAmount+(C.vatAmount||0)+w;{const g=C.totalAmount*((C.vatPercentage??100)/100)*.1;return C.totalAmount+g+w}},I=C=>C.vatType==="amount"?C.vatAmount||0:C.totalAmount*((C.vatPercentage??100)/100)*.1,se=C=>{if(!x)return 0;const w=ee(x);return Math.round(w*C/100)},ae=C=>C.payments.reduce((w,g)=>w+g.amount,0),X=C=>me(C)-ae(C),we=C=>{const w=o.filter(N=>N.project===C).reduce((N,D)=>N+(D.totalAmount||0),0),g=l.filter(N=>(N.status==="approved"||N.status==="completed")&&N.project===C).reduce((N,D)=>N+D.amount,0);return w+g},Ee=C=>d.filter(w=>w.project===C).reduce((w,g)=>w+g.amount,0),de=c.filter(C=>(C.project||"").toLowerCase().includes(v.toLowerCase())||(C.client||"").toLowerCase().includes(v.toLowerCase())).filter(C=>{if(Q==="all")return!0;const w=X(C);return Q==="completed"?w===0:Q==="remaining"?w>0:!0});return a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"border-b border-gray-200 flex items-center justify-between",children:[a.jsx("nav",{className:"flex space-x-4 md:space-x-8 overflow-x-auto",children:[{id:"remaining",label:"",count:c.filter(C=>X(C)>0).length},{id:"completed",label:"",count:c.filter(C=>X(C)===0).length},{id:"all",label:"",count:c.length}].map(C=>a.jsxs("button",{onClick:()=>ne(C.id),className:`py-3 md:py-4 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap ${Q===C.id?"border-gray-700 text-gray-700":"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"}`,children:[C.label,a.jsx("span",{className:`ml-1 md:ml-2 py-0.5 px-1.5 md:px-2 rounded-full text-[10px] md:text-xs font-semibold ${Q===C.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"}`,children:C.count})]},C.id))}),a.jsx("button",{onClick:Y,className:"btn btn-primary px-4 py-2 whitespace-nowrap",children:"+"})]}),a.jsx("div",{children:a.jsx("input",{type:"text",placeholder:"   ...",value:v,onChange:C=>S(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent"})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 xl:grid-cols-3 gap-6",children:de.map(C=>{const w=ae(C),g=X(C),N=ee(C),D=w/N*100;return a.jsxs("div",{className:"card hover:border-gray-400 transition-colors",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 flex-shrink-0",children:C.project}),a.jsxs("div",{className:"flex gap-1.5 flex-wrap",children:[a.jsx("button",{onClick:()=>{const P=ae(C),F=ee(C),q=F-P,A=e.find(J=>J.name===C.project);h({project:C.project,client:C.client,amount:"",date:Se(new Date,"yyyy-MM-dd"),clientSignature:"",totalContractAmount:F,previousAmount:P,remainingAmount:q,startDate:A!=null&&A.startDate?Se(new Date(A.startDate),"yyyy-MM-dd"):"",endDate:A!=null&&A.endDate?Se(new Date(A.endDate),"yyyy-MM-dd"):""}),p("transfer"),y(!0)},className:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm bg-gray-800 text-white rounded hover:bg-gray-900 transition-colors whitespace-nowrap",children:""}),a.jsx("button",{onClick:()=>{const P=de[de.length-1],F=ae(P),q=ee(P),A=q-F,J=e.find(W=>W.name===P.project);h({project:P.project,client:P.client,amount:"",date:Se(new Date,"yyyy-MM-dd"),clientSignature:"",totalContractAmount:q,previousAmount:F,remainingAmount:A,startDate:J!=null&&J.startDate?Se(new Date(J.startDate),"yyyy-MM-dd"):"",endDate:J!=null&&J.endDate?Se(new Date(J.endDate),"yyyy-MM-dd"):""}),p("cash"),y(!0)},className:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm bg-gray-800 text-white rounded hover:bg-gray-900 transition-colors whitespace-nowrap",children:""}),a.jsx("button",{onClick:()=>T(C),className:"px-2 py-1 text-xs sm:text-sm text-gray-600 hover:text-gray-800 whitespace-nowrap",children:""})]})]})}),a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:""}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",C.totalAmount.toLocaleString()]})]}),a.jsxs("div",{className:"ml-4 text-right",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:" "}),a.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["",N.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["( ",C.vatType==="percentage"?`${C.vatPercentage??100}%`:`${(C.vatAmount||0).toLocaleString()}`," )"]})]})]})})}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:""}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[D.toFixed(1),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full",children:a.jsx("div",{className:"bg-gray-600 h-2 rounded-full transition-all",style:{width:`${D}%`}})})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:""}),a.jsxs("p",{className:"text-base font-bold text-gray-800",children:["",w.toLocaleString()]})]}),a.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:" "}),a.jsxs("p",{className:"text-base font-bold text-gray-800",children:["",we(C.project).toLocaleString()]})]}),a.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:" "}),a.jsxs("p",{className:"text-base font-bold text-gray-800",children:["",Ee(C.project).toLocaleString()]})]}),a.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:""}),a.jsxs("p",{className:"text-base font-bold text-gray-800",children:["",g.toLocaleString()]})]})]})}),C.payments.length>0&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:""}),C.payments.slice(-2).reverse().map((P,F)=>a.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[a.jsxs("span",{className:"text-gray-700",children:[P.type||""," - ",Se(P.date,"MM/dd")]}),a.jsxs("span",{className:"font-medium text-gray-900",children:["",P.amount.toLocaleString()]})]},F))]})]},C.id)})}),x&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:x.project}),a.jsx("button",{onClick:()=>T(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:""})]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:" "}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("div",{className:"space-y-3",children:L(x).map((C,w)=>{var D;const N={:"contract",:"start",:"middle",:"final"}[C.type];return a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${C.status==="completed"?"bg-green-100 text-green-800":C.status==="overdue"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:C.type}),C.status!=="completed"?a.jsx("input",{type:"date",value:(D=x.expectedPaymentDates)!=null&&D[N]?Se(new Date(x.expectedPaymentDates[N]),"yyyy-MM-dd"):C.date?Se(C.date,"yyyy-MM-dd"):"",onChange:async P=>{const F=P.target.value?new Date(P.target.value):null,q={...x.expectedPaymentDates,[N]:F},A={...x,expectedPaymentDates:q};T(A);try{await s(x.id,{expectedPaymentDates:q});const J=c.map(W=>W.id===x.id?A:W);u(J),H.success("  ")}catch(J){console.error("Failed to update payment date:",J),H.error("  ")}},className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-600"}):a.jsxs("span",{className:"text-sm text-gray-700",children:[C.date?Se(C.date,"yyyy MM dd"):" ",C.actualDate&&a.jsxs("span",{className:"text-green-600 ml-2",children:["(: ",Se(C.actualDate,"MM/dd"),")"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",C.amount.toLocaleString(),a.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",C.percentage,"%)"]})]}),C.status==="completed"&&C.actualAmount&&a.jsxs("p",{className:"text-xs text-green-600",children:[": ",C.actualAmount.toLocaleString()]})]})]},w)})}),a.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:" "}),a.jsxs("span",{className:"font-bold text-gray-900",children:["",ee(x).toLocaleString()]})]})})]})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-300 rounded-lg",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"  ()"}),a.jsx("input",{type:"number",value:x.totalAmount||"",onChange:async C=>{const w=C.target.value===""?0:Number(C.target.value),g={...x,totalAmount:w};T(g);try{await s(x.id,g);const N=c.map(D=>D.id===x.id?g:D);u(N)}catch(N){console.error("Failed to update total amount:",N),H.error("  ")}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-lg font-bold focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"50000000",min:"0"}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"   "})]}),a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("p",{className:"text-xs text-gray-700 mb-1",children:["  ( ",x.vatType==="percentage"?`${x.vatPercentage??100}%`:`${(x.vatAmount||0).toLocaleString()}`," )"]}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",ee(x).toLocaleString()]})]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-300 rounded-lg",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"  "}),a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("button",{type:"button",onClick:async()=>{const C={...x,vatType:"percentage"};T(C);try{await s(x.id,C);const w=c.map(g=>g.id===x.id?C:g);u(w)}catch(w){console.error("Failed to update VAT type:",w),H.error("   ")}},className:`flex-1 px-3 py-2 text-sm border rounded-lg font-medium transition-colors ${x.vatType==="percentage"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:" (%)"}),a.jsx("button",{type:"button",onClick:async()=>{const C={...x,vatType:"amount"};T(C);try{await s(x.id,C);const w=c.map(g=>g.id===x.id?C:g);u(w)}catch(w){console.error("Failed to update VAT type:",w),H.error("   ")}},className:`flex-1 px-3 py-2 text-sm border rounded-lg font-medium transition-colors ${x.vatType==="amount"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:" ()"})]}),x.vatType==="percentage"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"   (%)"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"number",value:x.vatPercentage,onChange:async C=>{const w=Number(C.target.value),g={...x,vatPercentage:w};T(g);try{await s(x.id,g);const N=c.map(D=>D.id===x.id?g:D);u(N)}catch(N){console.error("Failed to update VAT percentage:",N),H.error("   ")}},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"100",min:"0",max:"100"}),a.jsx("div",{className:"text-xs text-gray-600",children:a.jsxs("p",{children:[": ",I(x).toLocaleString()]})})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"0%:   | 100%:     | 50%:   "})]}),x.vatType==="amount"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"   ()"}),a.jsx("input",{type:"number",value:x.vatAmount,onChange:async C=>{const w=Number(C.target.value),g={...x,vatAmount:w};T(g);try{await s(x.id,g);const N=c.map(D=>D.id===x.id?g:D);u(N)}catch(N){console.error("Failed to update VAT amount:",N),H.error("   ")}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"5000000",min:"0"}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"    "})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:""}),a.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["",ae(x).toLocaleString()]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:" "}),a.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["",we(x.project).toLocaleString()]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:" "}),a.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["",Ee(x.project).toLocaleString()]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:""}),a.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["",X(x).toLocaleString()]})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:" "}),a.jsx("button",{onClick:ye,className:"btn btn-primary btn-sm",children:"+  "})]}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.payments.map((C,w)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:C.type||""})}),a.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900",children:["",C.amount.toLocaleString()]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Se(C.date,"yyyy MM dd")}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:C.method}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:C.notes||"-"}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("button",{onClick:()=>Ne(w),className:"text-gray-600 hover:text-gray-700 transition-colors",children:a.jsx(bo,{className:"h-4 w-4"})})})]},w))})]})})]})]}),a.jsxs("div",{className:"p-6 border-t flex justify-between",children:[a.jsx("button",{onClick:async()=>{if(x&&window.confirm(`   ?
    .`))try{await i(x.id),H.success(" "),T(null)}catch(C){console.error("Failed to delete construction payment:",C),H.error(" ")}},className:"btn btn-outline text-red-600 hover:bg-red-50 hover:border-red-300",children:""}),a.jsx("button",{onClick:()=>T(null),className:"btn btn-outline",children:""})]})]})}),E&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"  "}),a.jsx("button",{onClick:()=>_(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(et,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),a.jsxs("select",{value:Z.projectId,onChange:C=>fe({...Z,projectId:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",children:[a.jsx("option",{value:"",children:""}),e.map(C=>a.jsxs("option",{value:C.id,children:[C.name," - ",C.client]},C.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),a.jsx("input",{type:"number",value:Z.totalAmount||"",onChange:C=>fe({...Z,totalAmount:Number(C.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"50000000"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"  ( )"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   *"}),a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("button",{type:"button",onClick:()=>fe({...Z,vatType:"percentage"}),className:`flex-1 px-3 py-2 text-sm border rounded-lg font-medium transition-colors ${Z.vatType==="percentage"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:" (%)"}),a.jsx("button",{type:"button",onClick:()=>fe({...Z,vatType:"amount"}),className:`flex-1 px-3 py-2 text-sm border rounded-lg font-medium transition-colors ${Z.vatType==="amount"?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:" ()"})]}),Z.vatType==="percentage"&&a.jsxs("div",{children:[a.jsx("input",{type:"number",value:Z.vatPercentage??100,onChange:C=>{const w=C.target.value===""?100:Number(C.target.value);fe({...Z,vatPercentage:w})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"100",min:"0",max:"100"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"0%:   | 100%:     | 50%:   "})]}),Z.vatType==="amount"&&a.jsxs("div",{children:[a.jsx("input",{type:"number",value:Z.vatAmount??0,onChange:C=>{const w=C.target.value===""?0:Number(C.target.value);fe({...Z,vatAmount:w})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"5000000",min:"0"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"    "})]}),Z.totalAmount>0&&a.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:"  ( )"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",(Z.totalAmount+(Z.vatType==="percentage"?Z.totalAmount*((Z.vatPercentage??100)/100)*.1:Z.vatAmount??0)).toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["=  ",Z.totalAmount.toLocaleString()," +  ",(Z.vatType==="percentage"?Z.totalAmount*((Z.vatPercentage??100)/100)*.1:Z.vatAmount??0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"p-6 border-t flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>_(!1),className:"btn btn-outline",children:""}),a.jsx("button",{onClick:ue,className:"btn btn-primary",children:""})]})]})}),M&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:R!==null?" ":" "}),a.jsx("button",{onClick:()=>{O(!1),K(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(et,{className:"h-5 w-5"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   ( )"}),a.jsx("textarea",{value:te.quickText,onChange:C=>xe({...te,quickText:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`: [703 ]
 40.  110 432 160269 .  .`}),a.jsx("button",{type:"button",onClick:G,className:"mt-2 w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"  "}),a.jsx("p",{className:"mt-2 text-xs text-gray-600",children:'*      (: "40", "400000")'})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" * (  )"}),a.jsx("div",{className:"space-y-2",children:["","","","",""].map(C=>{const w=ie[C];return a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:te.types.includes(C),onChange:g=>{let N;g.target.checked?N=[...te.types,C]:N=te.types.filter(q=>q!==C);const D=V(N),P=se(D),F=U(N);xe({...te,types:N,percentage:D,amount:P,date:F||te.date})},className:"w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-600"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[C,a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",w,"%)"]}),C===""&&a.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(  )"}),C===""&&a.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"(  1 )"}),C===""&&a.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"( )"}),C===""&&a.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"( )"}),C===""&&a.jsx("span",{className:"text-xs text-gray-400 ml-1",children:"( )"})]})]},C)})}),te.types.length>0&&a.jsx("div",{className:"mt-2 p-2 bg-gray-50 border border-gray-200 rounded",children:a.jsxs("p",{className:"text-xs text-gray-700",children:[" : ",te.types.join(" + ")," =  ",te.percentage,"%"]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>xe({...te,method:""}),className:`flex-1 px-4 py-3 border-2 rounded-lg font-medium transition-colors ${te.method===""?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:""}),a.jsx("button",{type:"button",onClick:()=>xe({...te,method:""}),className:`flex-1 px-4 py-3 border-2 rounded-lg font-medium transition-colors ${te.method===""?"border-gray-900 bg-gray-900 text-white":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"   (%)"}),a.jsx("input",{type:"number",value:te.percentage||"",onChange:C=>{const w=Number(C.target.value),g=se(w);xe({...te,percentage:w,amount:g})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"10",min:"0",max:"100"}),x&&te.percentage>0&&a.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-700 mb-1",children:" "}),a.jsxs("p",{className:"text-xs text-gray-900",children:[" ( ",x.vatPercentage,"% ) ",ee(x).toLocaleString(),"  ",te.percentage,"%"]}),a.jsxs("p",{className:"text-sm font-bold text-gray-900 mt-1",children:["= ",se(te.percentage).toLocaleString()]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:te.amount||"",onChange:C=>xe({...te,amount:Number(C.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"5000000",min:"0"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:te.percentage>0?"       ":"   "})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{type:"date",value:te.date,onChange:C=>xe({...te,date:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"     ,   "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("textarea",{value:te.notes,onChange:C=>xe({...te,notes:C.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent",placeholder:"  "})]})]}),a.jsxs("div",{className:"p-6 border-t flex justify-between",children:[a.jsx("div",{children:R!==null&&a.jsx("button",{onClick:async()=>{if(x&&window.confirm("   ?"))try{const C=x.payments.filter((N,D)=>D!==R),w={...x,payments:C};await s(x.id,{payments:C}),T(w);const g=c.map(N=>N.id===x.id?w:N);u(g),O(!1),K(null),H.success("  ")}catch(C){console.error("Failed to delete payment:",C),H.error(" ")}},className:"btn btn-outline text-red-600 hover:bg-red-50 hover:border-red-300",children:""})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{O(!1),K(null)},className:"btn btn-outline",children:""}),a.jsx("button",{onClick:Re,className:"btn btn-primary",children:R!==null?"":""})]})]})]})}),m&&a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
            @media print {
              * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
              }
              /*       */
              img[alt=""] {
                display: inline-block !important;
                visibility: visible !important;
                opacity: 0.8 !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
              }
            }
            @page {
              size: A4;
              margin: 20mm;
            }
          `}),a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 print:bg-white print:relative print:p-0",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto print:shadow-none print:max-w-none print:max-h-none",children:a.jsxs("div",{className:"p-6 print:p-8",children:[a.jsx("div",{className:"flex items-center justify-end mb-6 print:hidden",children:a.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(et,{className:"w-5 h-5"})})}),a.jsxs("div",{className:"space-y-6 print:space-y-0",children:[a.jsxs("div",{className:"border border-black p-8 bg-white print:border print:p-12",children:[a.jsx("div",{className:"p-3 mb-8",children:a.jsx("h3",{className:"text-center text-2xl font-bold",children:j==="cash"?"":""})}),a.jsxs("table",{className:"w-full mb-8 border-collapse",children:[a.jsxs("colgroup",{children:[a.jsx("col",{style:{width:"30%"}}),a.jsx("col",{style:{width:"70%"}})]}),a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border border-black",children:[a.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:""}),a.jsxs("td",{className:"py-3 px-4 print:py-3 text-center",children:[a.jsx("span",{className:"print:hidden",children:k.project}),a.jsx("input",{type:"text",value:k.project,className:"hidden print:block w-full bg-transparent border-none outline-none p-0 text-center",readOnly:!0})]})]}),a.jsxs("tr",{className:"border border-t-0 border-black",children:[a.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:""}),a.jsx("td",{className:"py-3 px-4 text-center",children:k.startDate&&k.endDate?a.jsxs("span",{children:[Se(new Date(k.startDate),"yyyy.MM.dd")," ~ ",Se(new Date(k.endDate),"yyyy.MM.dd")]}):a.jsx("span",{className:"text-gray-400 print:hidden",children:"-"})})]}),a.jsxs("tr",{className:"border border-t-0 border-black",children:[a.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:""}),a.jsxs("td",{className:"py-3 px-4 text-right pr-4",children:[k.totalContractAmount.toLocaleString()," "]})]}),a.jsxs("tr",{className:"border border-t-0 border-black",children:[a.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:""}),a.jsxs("td",{className:"py-3 px-4 text-right pr-4",children:[k.previousAmount.toLocaleString()," "]})]}),a.jsxs("tr",{className:"border border-t-0 border-black",children:[a.jsx("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:""}),a.jsxs("td",{className:"py-3 px-4 text-right pr-4",children:[a.jsxs("span",{className:"print:hidden flex items-center justify-end gap-1",children:[a.jsx("input",{type:"text",value:k.amount,onChange:C=>{const w=C.target.value.replace(/[^0-9]/g,""),g=w?parseInt(w).toLocaleString():"";h({...k,amount:g})},placeholder:" ",className:"w-full text-right border border-gray-300 rounded px-2 py-1"}),a.jsx("span",{children:""})]}),a.jsxs("span",{className:"hidden print:inline",children:[k.amount," "]})]})]}),a.jsxs("tr",{className:"border border-t-0 border-black",children:[a.jsxs("td",{className:"border-r border-black py-3 px-4 bg-white font-medium whitespace-nowrap",children:[" ",a.jsx("span",{className:"text-xs",children:"( )"})]}),a.jsxs("td",{className:"py-3 px-4 text-right pr-4",children:[(()=>{const C=k.amount?parseInt(k.amount.replace(/,/g,"")):0;return(k.remainingAmount-C).toLocaleString()})()," "]})]})]})]}),a.jsx("div",{className:"text-center mb-12",children:a.jsxs("p",{className:"text-base",children:["* ",j==="cash"?"      .":"      ."]})}),a.jsx("div",{className:"text-center mb-12",children:a.jsxs("p",{className:"text-base",children:[a.jsx("span",{className:"print:hidden",children:a.jsx("input",{type:"date",value:k.date,onChange:C=>h({...k,date:C.target.value}),className:"border border-gray-300 rounded px-2 py-1"})}),a.jsx("span",{className:"hidden print:inline",children:Se(new Date(k.date),"yyyy MM dd")})]})}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-4 items-center border-b border-gray-300 pb-2",children:[a.jsx("span",{className:"font-medium",children:"[]"}),a.jsx("span",{children:" "}),a.jsx("span",{className:"text-xl font-bold text-right pr-4",children:"  "}),a.jsxs("div",{className:"flex items-center justify-end gap-1",children:[a.jsx("span",{className:"text-sm",style:{marginRight:"20px"},children:"()"}),a.jsx("img",{src:Yte,alt:"",style:{display:"inline-block",width:"56px",height:"56px",marginLeft:"-45px",marginRight:"10px",opacity:.8,printColorAdjust:"exact",WebkitPrintColorAdjust:"exact",colorAdjust:"exact"}})]})]}),a.jsxs("div",{className:"grid grid-cols-4 items-center border-b border-gray-300 pb-2",children:[a.jsx("span",{className:"font-medium",children:"[]"}),a.jsx("span",{children:k.project.split("_")[0]}),a.jsx("span",{className:"text-xl text-right pr-4",children:""}),a.jsxs("div",{className:"flex items-center justify-end gap-1",children:[a.jsx("span",{className:"text-sm",style:{marginRight:"20px"},children:"()"}),a.jsx("div",{style:{display:"inline-block",width:"56px",height:"56px",marginLeft:"-45px",marginRight:"10px",visibility:"hidden"}})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 print:hidden",children:[a.jsx("button",{onClick:()=>{if(!k.amount){H.error(" ");return}window.print(),H.success(" ")},className:"flex-1 px-4 py-3 bg-gray-800 text-white font-medium rounded-lg hover:bg-gray-900 transition-colors",children:""}),a.jsx("button",{onClick:()=>y(!1),className:"px-4 py-3 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition-colors",children:""})]})]})]})})})]})]})},em=["","","","","","","","","","","","","","","","","","","","","","","","","","",""],bd=e=>{const t=e.replace(/$/g,"").trim(),r=t.split(" ");if(r.length>=2){const n=r[r.length-1];for(const s of em)if(n===s)return s}for(const n of em)if(t.endsWith(n))return n;return""},kp=e=>{if(!e)return e;const t=e.replace(/$/g,"").trim(),r=t.split(" ");if(r.length>=2){const n=r[r.length-1];for(const s of em)if(n===s)return r.slice(0,-1).join(" ").trim()}for(const n of em)if(t.endsWith(n))return t.substring(0,t.length-n.length).trim();return t};function Kte(){const[e,t]=b.useState([]),[r,n]=b.useState(!0),[s,i]=b.useState(null),[o,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState(""),[m,y]=b.useState({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""});b.useEffect(()=>{j()},[]),b.useEffect(()=>{const E=()=>{p()};return window.addEventListener("headerAddButtonClick",E),()=>window.removeEventListener("headerAddButtonClick",E)},[]);const j=async()=>{var E,_;try{n(!0),i(null);const M=await Ys.getAllContractors();t(M.map(O=>({id:O._id,rank:O.rank,companyName:O.companyName,name:O.name,position:O.position,process:O.process,contact:O.contact,accountNumber:O.accountNumber,notes:O.notes,createdAt:new Date(O.createdAt),updatedAt:new Date(O.updatedAt)})))}catch(M){console.error("Failed to load contractors:",M);const O=M instanceof Error&&((_=(E=M.response)==null?void 0:E.data)==null?void 0:_.message);i(O||"   .")}finally{n(!1)}},p=E=>{if(E){u(E);let _="",M=E.accountNumber||"";if(E.accountNumber){const K=["KB","","","","NH","IBK","KEB","SC","","","","","","","","","","","","","","","","","NH","","","","","KB","",""];for(const Q of K)if(E.accountNumber.startsWith(Q)){_=Q,M=E.accountNumber.substring(Q.length).trim();break}}let O=E.name,R=E.position||"";R||(R=bd(E.name),O=kp(E.name)),y({rank:E.rank||"",companyName:E.companyName||"",name:O,position:R,process:E.process,contact:E.contact||"",bankName:_,accountNumber:M,notes:E.notes||""})}else u(null),y({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""});l(!0)},k=()=>{l(!1),u(null),y({rank:"",companyName:"",name:"",position:"",process:"",contact:"",bankName:"",accountNumber:"",notes:""})},h=async E=>{var M,O;E.preventDefault();const _=m.bankName&&m.accountNumber?`${m.bankName} ${m.accountNumber}`:m.accountNumber;try{const R={rank:m.rank,companyName:m.companyName,name:m.name,position:m.position,process:m.process,contact:m.contact,accountNumber:_,notes:m.notes};c?await Ys.updateContractor(c.id,R):await Ys.createContractor(R),await j(),k()}catch(R){console.error("Failed to save contractor:",R);const K=R instanceof Error&&((O=(M=R.response)==null?void 0:M.data)==null?void 0:O.message);alert(K||"  .")}},v=async E=>{var _,M;if(window.confirm("   ?"))try{await Ys.deleteContractor(E),await j()}catch(O){console.error("Failed to delete contractor:",O);const R=O instanceof Error&&((M=(_=O.response)==null?void 0:_.data)==null?void 0:M.message);alert(R||"  .")}},S=()=>"border-gray-200 text-gray-600 bg-gray-50",x=E=>E?E==="1"?1:E==="1()"?2:E==="2"?3:E==="2()"?4:E==="3"?5:E==="3()"?6:E===""?100:E===""?200:999:999,T=e.filter(E=>E.name.toLowerCase().includes(d.toLowerCase())||E.process.toLowerCase().includes(d.toLowerCase())||E.accountNumber.toLowerCase().includes(d.toLowerCase())||E.contact&&E.contact.toLowerCase().includes(d.toLowerCase())||E.rank&&E.rank.toLowerCase().includes(d.toLowerCase())||E.companyName&&E.companyName.toLowerCase().includes(d.toLowerCase())).sort((E,_)=>{const M=x(E.rank)-x(_.rank);if(M!==0)return M;const O=E.process.localeCompare(_.process,"ko");return O!==0?O:E.name.localeCompare(_.name,"ko")});return a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsx("div",{className:"flex items-center justify-end",children:a.jsx("button",{onClick:()=>p(),className:"hidden md:inline-flex btn btn-primary px-3 md:px-4 py-2",children:"+  "})}),a.jsxs("div",{className:"relative",children:[a.jsx(Mf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 md:w-5 md:h-5"}),a.jsx("input",{type:"text",placeholder:", ,  ...",value:d,onChange:E=>f(E.target.value),className:"w-full pl-9 md:pl-10 pr-4 py-2 text-sm md:text-base border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"})]}),a.jsx("div",{className:"hidden md:block bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" "}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?a.jsx("tr",{children:a.jsx("td",{colSpan:9,className:"px-6 py-12 text-center",children:a.jsx("p",{className:"text-gray-500",children:" ..."})})}):s?a.jsx("tr",{children:a.jsx("td",{colSpan:9,className:"px-6 py-12 text-center",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-red-500",children:s}),a.jsx("button",{onClick:j,className:"inline-block px-6 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:" "})]})})}):T.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:9,className:"px-6 py-12 text-center",children:a.jsx("p",{className:"text-gray-500",children:d?"  .":"  ."})})}):T.map(E=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium border rounded ${S(E.rank)}`,children:E.rank||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-xs font-medium text-gray-700",children:E.process})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:E.companyName||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:kp(E.name)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:E.position||bd(E.name)||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:E.contact||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:E.accountNumber})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:E.notes||"-"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx("button",{onClick:()=>p(E),className:"text-gray-600 hover:text-gray-900 mr-3",children:a.jsx(rc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>v(E.id),className:"text-red-600 hover:text-red-900",children:a.jsx(Et,{className:"w-4 h-4"})})]})]},E.id))})]})})}),a.jsx("div",{className:"md:hidden space-y-3",children:r?a.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:" ..."}):s?a.jsxs("div",{className:"text-center py-12 space-y-4",children:[a.jsx("p",{className:"text-red-500 text-sm",children:s}),a.jsx("button",{onClick:j,className:"inline-block px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm",children:" "})]}):T.length===0?a.jsx("div",{className:"text-center py-12 text-gray-500 text-sm",children:d?"  .":"  ."}):T.map(E=>a.jsxs("div",{className:"card p-3 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.rank&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium border rounded ${S(E.rank)}`,children:E.rank}),a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium text-gray-700 bg-gray-100 rounded",children:E.process})]}),E.companyName&&a.jsx("p",{className:"text-xs text-gray-600 mb-0.5",children:E.companyName}),a.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:kp(E.name)})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[a.jsx("button",{onClick:()=>p(E),className:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded",children:a.jsx(rc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>v(E.id),className:"p-1.5 text-red-600 hover:text-red-900 hover:bg-red-50 rounded",children:a.jsx(Et,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[(E.position||bd(E.name))&&a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"}),a.jsx("span",{className:"text-gray-900",children:E.position||bd(E.name)})]}),E.contact&&a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"}),a.jsx("span",{className:"text-gray-900",children:E.contact})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"}),a.jsx("span",{className:"text-gray-900 break-all",children:E.accountNumber})]}),E.notes&&a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-gray-500 w-14 flex-shrink-0",children:":"}),a.jsx("span",{className:"text-gray-600",children:E.notes})]})]})]},E.id))}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:c?" ":"  "}),a.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-600",children:a.jsx(et,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),a.jsxs("select",{value:m.rank,onChange:E=>y({...m,rank:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"1",children:"1"}),a.jsx("option",{value:"2",children:"2"}),a.jsx("option",{value:"3",children:"3"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),a.jsx("input",{type:"text",value:m.companyName,onChange:E=>y({...m,companyName:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:m.name,onChange:E=>y({...m,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:m.position,onChange:E=>y({...m,position:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",required:!0,value:m.process,onChange:E=>y({...m,process:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:m.contact,onChange:E=>y({...m,contact:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsxs("select",{value:m.bankName,onChange:E=>y({...m,bankName:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",children:[a.jsx("option",{value:"",children:""}),a.jsxs("optgroup",{label:"",children:[a.jsx("option",{value:"KB",children:"KB"}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"NH",children:"NH"}),a.jsx("option",{value:"IBK",children:"IBK"}),a.jsx("option",{value:"KEB",children:"KEB"}),a.jsx("option",{value:"SC",children:"SC"}),a.jsx("option",{value:"",children:""})]}),a.jsxs("optgroup",{label:"",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]}),a.jsxs("optgroup",{label:"",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]}),a.jsxs("optgroup",{label:"",children:[a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]}),a.jsxs("optgroup",{label:"",children:[a.jsx("option",{value:"NH",children:"NH"}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"KB",children:"KB"}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:m.accountNumber,onChange:E=>y({...m,accountNumber:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("textarea",{value:m.notes,onChange:E=>y({...m,notes:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-400 focus:border-transparent",rows:3})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:k,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:""}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors",children:c?"":""})]})]})]})})})]})}const Qi=["","","","","","","","",""],Gte=()=>{const{addScheduleToAPI:e,deleteScheduleFromAPI:t,updateScheduleInAPI:r,schedules:n,fetchSchedules:s}=Ts(),{user:i}=Ar(),o=Tn(),[l,c]=b.useState([]),[u,d]=b.useState(""),[f,m]=b.useState("pending"),[y,j]=b.useState("all"),[p,k]=b.useState(null),[h,v]=b.useState(null),S=b.useRef(null),[x,T]=b.useState({project:"",requestType:"",description:"",requestDate:Se(new Date,"yyyy-MM-dd"),dueDate:Se(new Date(Date.now()+3*24*60*60*1e3),"yyyy-MM-dd"),requestedBy:(i==null?void 0:i.name)||"",assignedTo:""}),[E,_]=b.useState(!1),[M,O]=b.useState(""),[R,K]=b.useState(null),[Q,ne]=b.useState(!0);b.useEffect(()=>{Z()},[]),b.useEffect(()=>{i!=null&&i.name&&T(I=>{const se={};return I.requestedBy||(se.requestedBy=i.name),i.name===""&&!I.project&&o.length>0&&(se.project=o[0].name),{...I,...se}})},[i,o]);const Z=async()=>{try{const se=(await ya.getAllWorkRequests()).map(ae=>({id:ae._id,project:ae.project,requestType:ae.requestType,description:ae.description,requestDate:new Date(ae.requestDate),dueDate:new Date(ae.dueDate),requestedBy:ae.requestedBy,assignedTo:ae.assignedTo,status:ae.status,priority:ae.priority,notes:ae.notes,completedDate:ae.completedDate?new Date(ae.completedDate):void 0}));c(se)}catch(I){console.error("Failed to load work requests:",I),H.error("  ")}};b.useEffect(()=>{var I,se;p&&S.current&&((se=(I=S.current).showPicker)==null||se.call(I))},[p]),b.useEffect(()=>{const I=()=>{h&&v(null)};if(h)return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[h]);const fe=async(I,se)=>{if(window.confirm(`"${se}"  ?

    .`))try{const ae=l.find(X=>X.id===I);if(await ya.deleteWorkRequest(I),c(l.filter(X=>X.id!==I)),H.success(" "),ae)try{let X="";ae.project?X=ae.requestType?`[] ${ae.requestType}`:`[] ${ae.description.substring(0,20)}`:X=ae.description;const we=n.filter(Ee=>{const de=Ee.start&&new Date(Ee.start).toDateString()===ae.dueDate.toDateString(),C=Ee.title===X;return de&&C});for(const Ee of we)try{await t(Ee.id)}catch(de){console.error("Failed to delete related schedule:",de)}await s()}catch(X){console.error("Failed to handle related schedules:",X)}}catch(ae){console.error("Failed to delete work request:",ae),H.error("  "),await Z()}},te=I=>{K(I),T({project:I.project,requestType:I.requestType,description:I.description,requestDate:Se(I.requestDate,"yyyy-MM-dd"),dueDate:Se(I.dueDate,"yyyy-MM-dd"),requestedBy:I.requestedBy,assignedTo:I.assignedTo}),_(I.priority==="high"),ne(!0)},xe=()=>{K(null),T({project:"",requestType:"",description:"",requestDate:Se(new Date,"yyyy-MM-dd"),dueDate:Se(new Date(Date.now()+3*24*60*60*1e3),"yyyy-MM-dd"),requestedBy:(i==null?void 0:i.name)||"",assignedTo:""}),_(!1),O("")},ie=async I=>{if(I.preventDefault(),!x.requestedBy||!x.assignedTo||!x.requestDate||!x.dueDate){H.error("   ");return}try{const se=x.requestType===""?M:x.requestType;if(R){const ae=await ya.updateWorkRequest(R.id,{project:x.project,requestType:se,description:x.description,requestDate:new Date(x.requestDate),dueDate:new Date(x.dueDate),requestedBy:x.requestedBy,assignedTo:x.assignedTo,status:R.status,priority:E?"high":"medium"}),X={id:ae._id,project:ae.project,requestType:ae.requestType,description:ae.description,requestDate:new Date(ae.requestDate),dueDate:new Date(ae.dueDate),requestedBy:ae.requestedBy,assignedTo:ae.assignedTo,status:ae.status,priority:ae.priority,notes:ae.notes,completedDate:ae.completedDate?new Date(ae.completedDate):void 0};let we="";ae.project?we=ae.requestType?`[] ${ae.requestType}`:`[] ${ae.description.substring(0,20)}`:we=ae.description;const Ee=n.find(de=>{const C=de.start&&new Date(de.start).toDateString()===new Date(ae.dueDate).toDateString(),w=de.title===we;return C&&w});if(Ee)try{let de=null,C="";if(ae.project){const g=o.find(N=>N.name===ae.project);de=g?g.id:Ee.project,C=ae.requestType?`[] ${ae.requestType}`:`[] ${ae.description.substring(0,20)}`}else C=ae.description,de=Ee.project;const w=ae.assignedTo===""?["","",""]:[ae.assignedTo];await r(Ee.id,{title:C,start:new Date(ae.dueDate),end:new Date(ae.dueDate),project:de,attendees:w,description:`${ae.description}

: ${ae.assignedTo}
: ${ae.requestedBy}
: ${ae.priority}
${ae.notes||""}`})}catch(de){console.error("Failed to update related schedule:",de)}c(l.map(de=>de.id===R.id?X:de)),H.success(" ")}else{const ae=await ya.createWorkRequest({project:x.project,requestType:se,description:x.description||"",requestDate:new Date(x.requestDate),dueDate:new Date(x.dueDate),requestedBy:x.requestedBy,assignedTo:x.assignedTo,status:"pending",priority:E?"high":"medium"}),X={id:ae._id,project:ae.project,requestType:ae.requestType,description:ae.description,requestDate:new Date(ae.requestDate),dueDate:new Date(ae.dueDate),requestedBy:ae.requestedBy,assignedTo:ae.assignedTo,status:ae.status,priority:ae.priority,notes:ae.notes,completedDate:ae.completedDate?new Date(ae.completedDate):void 0};try{let we=null,Ee="";if(ae.project){const C=o.find(w=>w.name===ae.project);if(we=C?C.id:null,!we)throw console.warn("Project not found for work request:",ae.project),new Error("Project not found");Ee=ae.requestType?`[] ${ae.requestType}`:`[] ${ae.description.substring(0,20)}`}else Ee=ae.description;const de=ae.assignedTo===""?["","",""]:[ae.assignedTo];await e({id:`workrequest-${ae._id}`,title:Ee,start:new Date(ae.dueDate),end:new Date(ae.dueDate),type:"other",project:we,location:"",attendees:de,description:`${ae.description}

: ${ae.assignedTo}
: ${ae.requestedBy}
: ${ae.priority}
${ae.notes||""}`})}catch(we){console.error("Failed to create schedule:",we)}c([X,...l]),H.success(" ")}xe()}catch(se){console.error("Failed to save work request:",se),H.error("  ")}},V=(I,se)=>{k({requestId:I,field:se})},ge=async I=>{if(!p)return;const se=new Date(I);if(!isNaN(se.getTime()))try{if(!l.find(X=>X.id===p.requestId))return;await ya.updateWorkRequest(p.requestId,{[p.field]:se}),c(l.map(X=>X.id===p.requestId?{...X,[p.field]:se}:X)),k(null),H.success(" ")}catch(ae){console.error("Failed to update date:",ae),H.error("  "),k(null)}},G=(I,se)=>{v({requestId:I,field:se})},U=async I=>{if(h)try{await ya.updateWorkRequest(h.requestId,{[h.field]:I}),c(l.map(se=>se.id===h.requestId?{...se,[h.field]:I}:se)),v(null),H.success(" ")}catch(se){console.error("Failed to update person:",se),H.error("  "),v(null)}},L=async(I,se)=>{try{const ae=se==="completed"?new Date:void 0;if(await ya.updateWorkRequest(I,{status:se,completedDate:ae}),c(l.map(we=>we.id===I?{...we,status:se,completedDate:ae}:we)),se==="completed"){const we=l.find(Ee=>Ee.id===I);if(we){const Ee=n.find(de=>de.id===`workrequest-${I}`||de.title.includes("[]")&&de.project===we.project);if(Ee)try{await t(Ee.id)}catch(de){console.error("Failed to delete related schedule:",de)}}}const X={pending:"","in-progress":"",completed:""};H.success(` ${X[se]} `)}catch(ae){console.error("Failed to update status:",ae),H.error("  ")}},Y=I=>{const ae={pending:{label:"",color:"bg-gray-100 text-gray-700 border-gray-300"},"in-progress":{label:"",color:"bg-gray-100 text-gray-800 border-gray-300"},completed:{label:"",color:"bg-gray-900 text-white border-gray-900"},cancelled:{label:"",color:"bg-gray-100 text-gray-500 border-gray-300"}}[I];return a.jsx("span",{className:`px-3 py-1 text-xs font-medium border ${ae.color}`,children:ae.label})},ue=I=>{const ae={low:{label:"",color:"text-gray-600",bg:"",border:""},medium:{label:"",color:"text-gray-600",bg:"",border:""},high:{label:"",color:"text-rose-700",bg:"bg-rose-50",border:"border border-rose-300"}}[I];return a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-semibold rounded ${ae.color} ${ae.bg} ${ae.border}`,children:ae.label})},ye=I=>{const se=new Date;se.setHours(0,0,0,0);const ae=new Date(I);ae.setHours(0,0,0,0);const X=ae.getTime()-se.getTime();return Math.ceil(X/(1e3*60*60*24))},Ne=I=>{const se=ye(I);return se<0?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-gray-100 text-gray-700 border border-gray-300 rounded",children:["D+",Math.abs(se)]}):se===0?a.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-gray-900 text-white border border-gray-900 rounded",children:"D-Day"}):se<=3?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-gray-100 text-gray-700 border border-gray-300 rounded",children:["D-",se]}):se<=7?a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-bold bg-gray-100 text-gray-700 border border-gray-300 rounded",children:["D-",se]}):a.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 border border-gray-300 rounded",children:["D-",se]})},ee=(()=>{let I=l;return f!=="all"&&(I=I.filter(se=>se.status===f)),u&&(I=I.filter(se=>se.project.toLowerCase().includes(u.toLowerCase())||se.requestType.toLowerCase().includes(u.toLowerCase())||se.description.toLowerCase().includes(u.toLowerCase()))),y!=="all"&&(I=I.filter(se=>se.priority===y)),I})(),me={pending:l.filter(I=>I.status==="pending").length,inProgress:l.filter(I=>I.status==="in-progress").length,completed:l.filter(I=>I.status==="completed").length,total:l.length};return a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"hidden md:grid md:grid-cols-[400px_1fr] gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 h-fit sticky top-4",children:[R&&a.jsx("h2",{className:"text-xl font-semibold mb-4",children:" "}),a.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsxs("select",{value:x.project,onChange:I=>T({...x,project:I.target.value}),className:"input w-full",children:[(i==null?void 0:i.name)!==""&&a.jsx("option",{value:"",children:""}),o.filter(I=>I.status!=="completed").map(I=>a.jsx("option",{value:I.name,children:I.name},I.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsxs("select",{value:x.requestType,onChange:I=>T({...x,requestType:I.target.value}),className:"input w-full",children:[a.jsx("option",{value:""}),a.jsx("option",{value:"3D",children:"3D"}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]}),x.requestType===""&&a.jsx("input",{type:"text",value:M,onChange:I=>O(I.target.value),placeholder:"  ",className:"input w-full mt-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("textarea",{value:x.description,onChange:I=>T({...x,description:I.target.value}),rows:4,className:"input w-full",placeholder:"   "})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{type:"date",value:x.requestDate,onChange:I=>T({...x,requestDate:I.target.value}),required:!0,className:"input w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("input",{type:"date",value:x.dueDate,onChange:I=>T({...x,dueDate:I.target.value}),required:!0,className:"input w-full"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsxs("select",{value:x.requestedBy,onChange:I=>T({...x,requestedBy:I.target.value}),required:!0,className:"input w-full",children:[a.jsx("option",{value:"",children:""}),Qi.map(I=>a.jsx("option",{value:I,children:I},I))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsxs("select",{value:x.assignedTo,onChange:I=>T({...x,assignedTo:I.target.value}),required:!0,className:"input w-full",children:[a.jsx("option",{value:"",children:""}),Qi.map(I=>a.jsx("option",{value:I,children:I},I))]})]})]}),a.jsx("div",{children:a.jsxs("button",{type:"button",onClick:()=>_(!E),className:`flex items-center gap-2 px-4 py-3 rounded-lg border-2 transition-all w-full ${E?"bg-rose-50 border-rose-500 text-rose-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Qb,{className:`h-5 w-5 ${E?"text-rose-600":"text-gray-400"}`}),a.jsx("span",{className:"font-medium",children:E?" ":"  "})]})}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[R&&a.jsx("button",{type:"button",onClick:xe,className:"flex-1 btn btn-outline",children:""}),a.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:R?"":""})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"pending",label:"",count:me.pending,color:"text-gray-700"},{id:"in-progress",label:"",count:me.inProgress,color:"text-gray-700"},{id:"completed",label:"",count:me.completed,color:"text-gray-700"},{id:"all",label:"",count:me.total,color:"text-gray-600"}].map(I=>a.jsxs("button",{onClick:()=>m(I.id),className:Fr("py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap",f===I.id?`border-gray-700 ${I.color}`:"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),children:[I.label,I.count>0&&a.jsx("span",{className:Fr("ml-2 py-0.5 px-2 rounded-full text-xs font-semibold",f===I.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"),children:I.count})]},I.id))})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("input",{type:"text",placeholder:"...",value:u,onChange:I=>d(I.target.value),className:"flex-1 px-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:border-gray-900"}),a.jsxs("select",{value:y,onChange:I=>j(I.target.value),className:"px-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:border-gray-900",children:[a.jsx("option",{value:"all",children:" "}),a.jsx("option",{value:"high",children:""}),a.jsx("option",{value:"medium",children:""}),a.jsx("option",{value:"low",children:""})]})]}),a.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"D-day"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:""})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",style:{overflow:"visible"},children:ee.map(I=>a.jsxs("tr",{className:`hover:bg-gray-50 ${I.priority==="high"?"bg-rose-50/30":""}`,style:{overflow:"visible"},children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("p",{className:"font-medium text-gray-900",children:I.project})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("p",{className:"text-sm text-gray-900",children:I.requestType})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("p",{className:"text-sm text-gray-900",children:I.description})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",style:{overflow:"visible"},children:a.jsxs("div",{className:"relative inline-block",children:[a.jsx("button",{onClick:se=>{se.stopPropagation(),G(I.id,"requestedBy")},className:"text-sm text-gray-900 hover:text-gray-600 hover:underline transition-colors",children:I.requestedBy}),(h==null?void 0:h.requestId)===I.id&&(h==null?void 0:h.field)==="requestedBy"&&a.jsx("div",{onClick:se=>se.stopPropagation(),className:"absolute left-0 top-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 min-w-[100px]",children:Qi.map(se=>a.jsx("button",{onClick:()=>U(se),className:`block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 transition-colors first:rounded-t-lg last:rounded-b-lg ${se===I.requestedBy?"bg-gray-50 font-medium":""}`,children:se},se))})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",style:{overflow:"visible"},children:a.jsxs("div",{className:"relative inline-block",children:[a.jsx("button",{onClick:se=>{se.stopPropagation(),G(I.id,"assignedTo")},className:"text-sm text-gray-900 hover:text-gray-600 hover:underline transition-colors",children:I.assignedTo}),(h==null?void 0:h.requestId)===I.id&&(h==null?void 0:h.field)==="assignedTo"&&a.jsx("div",{onClick:se=>se.stopPropagation(),className:"absolute left-0 top-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 min-w-[100px]",children:Qi.map(se=>a.jsx("button",{onClick:()=>U(se),className:`block w-full text-left px-4 py-2 text-sm hover:bg-gray-100 transition-colors first:rounded-t-lg last:rounded-b-lg ${se===I.assignedTo?"bg-gray-50 font-medium":""}`,children:se},se))})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"relative inline-block",children:[(p==null?void 0:p.requestId)===I.id&&(p==null?void 0:p.field)==="requestDate"&&a.jsx("input",{ref:S,type:"date",defaultValue:Se(I.requestDate,"yyyy-MM-dd"),onChange:se=>ge(se.target.value),onBlur:()=>k(null),className:"absolute left-0 top-0 w-auto h-auto opacity-0 z-50",style:{pointerEvents:"auto"}}),a.jsxs("button",{onClick:()=>V(I.id,"requestDate"),className:"flex items-center space-x-2 text-sm text-gray-900 hover:text-gray-600 transition-colors",children:[a.jsx(ms,{className:"h-4 w-4"}),a.jsx("span",{children:Se(I.requestDate,"yyyy.MM.dd (eee)",{locale:it})})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"relative inline-block",children:[(p==null?void 0:p.requestId)===I.id&&(p==null?void 0:p.field)==="dueDate"&&a.jsx("input",{ref:S,type:"date",defaultValue:Se(I.dueDate,"yyyy-MM-dd"),onChange:se=>ge(se.target.value),onBlur:()=>k(null),className:"absolute left-0 top-0 w-auto h-auto opacity-0 z-50",style:{pointerEvents:"auto"}}),a.jsxs("button",{onClick:()=>V(I.id,"dueDate"),className:"flex items-center space-x-2 text-sm text-gray-900 hover:text-gray-600 transition-colors",children:[a.jsx(ms,{className:"h-4 w-4"}),a.jsx("span",{children:Se(I.dueDate,"yyyy.MM.dd (eee)",{locale:it})})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ne(I.dueDate)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ue(I.priority)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Y(I.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[I.status==="pending"&&a.jsx("button",{onClick:()=>L(I.id,"in-progress"),className:"px-3 py-1 text-xs font-semibold text-white rounded transition-colors bg-gray-600 hover:bg-gray-700",children:""}),I.status==="in-progress"&&a.jsx("button",{onClick:()=>L(I.id,"completed"),className:"px-3 py-1 text-xs font-semibold bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors",children:""}),a.jsx("button",{onClick:()=>te(I),className:"text-xs text-gray-600 hover:text-gray-900",children:""}),a.jsx("button",{onClick:()=>fe(I.id,I.project),className:"text-gray-600 hover:text-gray-700",children:a.jsx(Et,{className:"h-4 w-4"})})]})})]},I.id))})]})})]})]}),a.jsxs("div",{className:"md:hidden space-y-3",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-4 overflow-x-auto",children:[{id:"pending",label:"",count:me.pending,color:"text-gray-700"},{id:"in-progress",label:"",count:me.inProgress,color:"text-gray-700"},{id:"completed",label:"",count:me.completed,color:"text-gray-700"},{id:"all",label:"",count:me.total,color:"text-gray-600"}].map(I=>a.jsxs("button",{onClick:()=>m(I.id),className:Fr("py-3 px-1 border-b-2 font-medium text-xs transition-colors whitespace-nowrap",f===I.id?`border-gray-700 ${I.color}`:"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),children:[I.label,I.count>0&&a.jsx("span",{className:Fr("ml-1 py-0.5 px-1.5 rounded-full text-[10px] font-semibold",f===I.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"),children:I.count})]},I.id))})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[R&&a.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-3",children:" "}),a.jsxs("form",{onSubmit:ie,className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsxs("select",{value:x.project,onChange:I=>T({...x,project:I.target.value}),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(i==null?void 0:i.name)!==""&&a.jsx("option",{value:"",children:""}),o.filter(I=>I.status!=="completed").map(I=>a.jsx("option",{value:I.name,children:I.name},I.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsxs("select",{value:x.requestType,onChange:I=>T({...x,requestType:I.target.value}),className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[a.jsx("option",{value:""}),a.jsx("option",{value:"3D",children:"3D"}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:" ",children:" "}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]}),x.requestType===""&&a.jsx("input",{type:"text",value:M,onChange:I=>O(I.target.value),placeholder:"  ",className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 mt-2 hover:border-gray-400 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("textarea",{value:x.description,onChange:I=>T({...x,description:I.target.value}),rows:3,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 hover:border-gray-400 transition-colors",placeholder:"   "})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),a.jsx("input",{type:"date",value:x.requestDate,onChange:I=>T({...x,requestDate:I.target.value}),required:!0,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 hover:border-gray-400 transition-colors"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),a.jsx("input",{type:"date",value:x.dueDate,onChange:I=>T({...x,dueDate:I.target.value}),required:!0,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 hover:border-gray-400 transition-colors"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),a.jsxs("select",{value:x.requestedBy,onChange:I=>T({...x,requestedBy:I.target.value}),required:!0,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[a.jsx("option",{value:"",children:""}),Qi.map(I=>a.jsx("option",{value:I,children:I},I))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" *"}),a.jsxs("select",{value:x.assignedTo,onChange:I=>T({...x,assignedTo:I.target.value}),required:!0,className:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[a.jsx("option",{value:"",children:""}),Qi.map(I=>a.jsx("option",{value:I,children:I},I))]})]})]}),a.jsx("div",{children:a.jsxs("button",{type:"button",onClick:()=>_(!E),className:`flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all w-full text-sm ${E?"bg-rose-50 border-rose-300 text-rose-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Qb,{className:`h-4 w-4 ${E?"text-rose-600":"text-gray-400"}`}),a.jsx("span",{className:"font-medium",children:E?" ":"  "})]})}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[R&&a.jsx("button",{type:"button",onClick:xe,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:""}),a.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-gray-900 rounded-lg hover:bg-gray-800 transition-colors",children:R?"":""})]})]})]}),ee.map(I=>a.jsxs("div",{className:`card p-3 hover:border-gray-400 transition-colors ${I.priority==="high"?"border-2 border-rose-200 bg-rose-50/30":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Y(I.status),Ne(I.dueDate),I.priority==="high"&&ue(I.priority)]}),a.jsx("h3",{className:"font-bold text-base text-gray-900",children:I.project}),a.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:I.requestType})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>te(I),className:"text-xs text-gray-600 hover:text-gray-900 px-2 py-1",children:""}),a.jsx("button",{onClick:()=>fe(I.id,I.project),className:"text-gray-600 hover:text-gray-700 p-1",children:a.jsx(Et,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm border-t border-gray-100 pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:" "}),a.jsx("p",{className:"text-gray-900 mt-0.5",children:I.description})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:""}),a.jsx("p",{className:"text-gray-900 font-medium mt-0.5",children:I.requestedBy})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:""}),a.jsx("p",{className:"text-gray-900 font-medium mt-0.5",children:I.assignedTo})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsx("p",{className:"text-xs text-gray-900",children:Se(I.requestDate,"MM.dd (eee)",{locale:it})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:""}),a.jsx("p",{className:"text-xs text-gray-900",children:Se(I.dueDate,"MM.dd (eee)",{locale:it})})]})]}),a.jsx("div",{className:"flex items-center justify-between pt-1",children:a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"text-gray-500",children:": "}),ue(I.priority)]})})]}),a.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-100",children:[I.status==="pending"&&a.jsx("button",{onClick:()=>L(I.id,"in-progress"),className:"flex-1 px-3 py-2 text-xs font-semibold text-white rounded-lg transition-colors bg-gray-600 hover:bg-gray-700",children:""}),I.status==="in-progress"&&a.jsx("button",{onClick:()=>L(I.id,"completed"),className:"flex-1 px-3 py-2 text-xs font-semibold bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:""}),I.status==="completed"&&a.jsx("div",{className:"flex-1 text-center text-xs text-gray-500 py-2",children:" "})]})]},I.id))]})]})},Qte=()=>{const{user:e}=Ar(),t=Tn(),[r,n]=b.useState([]),[s,i]=b.useState(null),[o,l]=b.useState([]),[c,u]=b.useState(null),[d,f]=b.useState(!0),[m,y]=b.useState(""),[j,p]=b.useState(""),[k,h]=b.useState(null),[v,S]=b.useState(""),[x,T]=b.useState(null),[E,_]=b.useState(""),[M,O]=b.useState(!1),[R,K]=b.useState(null),[Q,ne]=b.useState(new Set),Z=b.useRef(null),[fe,te]=b.useState(window.innerWidth<768),[xe,ie]=b.useState(!1);b.useEffect(()=>{const w=()=>{te(window.innerWidth<768)};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),b.useEffect(()=>{V()},[t]),b.useEffect(()=>{s!==null&&ge()},[s]),b.useEffect(()=>{s!==null&&(e!=null&&e.id)&&localStorage.setItem(`finishCheck_selectedProject_${e.id}`,s.toString())},[s,e==null?void 0:e.id]),b.useEffect(()=>{c!==null&&(e!=null&&e.id)&&localStorage.setItem(`finishCheck_selectedSpace_${e.id}`,c.toString())},[c,e==null?void 0:e.id]),b.useEffect(()=>{if(!fe&&R){const w=async g=>{var D;const N=(D=g.clipboardData)==null?void 0:D.items;if(N){for(let P=0;P<N.length;P++)if(N[P].type.indexOf("image")!==-1){g.preventDefault();const F=N[P].getAsFile();F&&await me(R,F)}}};return document.addEventListener("paste",w),()=>document.removeEventListener("paste",w)}},[R,fe]);const V=async()=>{try{const w=t.map(N=>({id:N.id,title:N.name}));n(w);const g=e!=null&&e.id?localStorage.getItem(`finishCheck_selectedProject_${e.id}`):null;g&&w.some(N=>N.id===Number(g))?i(Number(g)):w.length>0&&i(w[0].id)}catch(w){console.error("Failed to load projects:",w),H.error("   ")}},ge=async()=>{try{f(!0);const w=s?`/finish-check/spaces?project_id=${s}`:"/finish-check/spaces",N=(await Te.get(w)).data.map(P=>({...P,items:P.items.map(F=>({...F,images:F.images||[]}))}));l(N);const D=e!=null&&e.id?localStorage.getItem(`finishCheck_selectedSpace_${e.id}`):null;if(D){const P=Number(D);if(P===-1||N.some(F=>F.id===P)){u(P);return}}N.length>0&&c===null&&u(N[0].id)}catch(w){console.error("Failed to load spaces:",w),H.error("   ")}finally{f(!1)}},G=async()=>{if(!m.trim()){H.error("  ");return}if(!s){H.error(" ");return}try{const w=await Te.post("/finish-check/spaces",{name:m.trim(),project_id:s});l([...o,w.data]),y(""),H.success(" "),o.length===0&&u(w.data.id)}catch(w){console.error("Failed to add space:",w),H.error("  ")}},U=async(w,g)=>{if(!g.trim()){H.error("  ");return}try{await Te.put(`/finish-check/spaces/${w}`,{name:g.trim()}),l(o.map(N=>N.id===w?{...N,name:g.trim()}:N)),h(null),S(""),H.success("  ")}catch(N){console.error("Failed to update space:",N),H.error("  ")}},L=async(w,g)=>{if(confirm(`"${g}"  ?

        .`))try{await Te.delete(`/finish-check/spaces/${w}`);const N=o.filter(D=>D.id!==w);l(N),c===w&&u(N.length>0?N[0].id:null),H.success(" ")}catch(N){console.error("Failed to delete space:",N),H.error("  ")}},Y=async()=>{if(!c){H.error(" ");return}if(!j.trim()){H.error("  ");return}try{const w=await Te.post("/finish-check/items",{space_id:c,content:j.trim()});l(o.map(g=>g.id===c?{...g,items:[...g.items,{...w.data,images:[]}]}:g)),p(""),H.success(" ")}catch(w){console.error("Failed to add item:",w),H.error("  ")}},ue=async w=>{try{const g=await Te.put(`/finish-check/items/${w}/toggle`);l(o.map(N=>({...N,items:N.items.map(D=>D.id===w?{...D,...g.data}:D)})))}catch(g){console.error("Failed to toggle item:",g),H.error("   ")}},ye=async w=>{try{const g=await Te.put(`/finish-check/items/${w}/toggle-priority`);l(o.map(N=>({...N,items:N.items.map(D=>D.id===w?{...D,is_priority:g.data.is_priority}:D)})))}catch(g){console.error("Failed to toggle priority:",g),H.error("  ")}},Ne=async(w,g)=>{if(!g.trim()){H.error("  ");return}try{await Te.put(`/finish-check/items/${w}`,{content:g.trim()}),l(o.map(N=>({...N,items:N.items.map(D=>D.id===w?{...D,content:g.trim()}:D)}))),T(null),_(""),H.success(" ")}catch(N){console.error("Failed to update item:",N),H.error("  ")}},Re=async w=>{if(confirm("  ?"))try{await Te.delete(`/finish-check/items/${w}`),l(o.map(g=>({...g,items:g.items.filter(N=>N.id!==w)}))),R===w&&K(null),H.success(" ")}catch(g){console.error("Failed to delete item:",g),H.error("  ")}},ee=w=>new Promise((g,N)=>{const D=new FileReader;D.readAsDataURL(w),D.onload=()=>g(D.result),D.onerror=P=>N(P)}),me=async(w,g)=>{var P,F;if(!["image/jpeg","image/png","image/webp"].includes(g.type)){H.error("JPEG, PNG, WebP    ");return}const D=5*1024*1024;if(g.size>D){H.error("  5MB  ");return}try{ne(J=>new Set([...J,w]));const q=await ee(g),A=await Te.post(`/finish-check/items/${w}/images`,{image_data:q,filename:g.name});l(o.map(J=>({...J,items:J.items.map(W=>W.id===w?{...W,images:[...W.images,A.data]}:W)}))),H.success(" ")}catch(q){console.error("Failed to upload image:",q),H.error(((F=(P=q.response)==null?void 0:P.data)==null?void 0:F.error)||"  ")}finally{ne(q=>{const A=new Set(q);return A.delete(w),A})}},I=async(w,g)=>{const N=g.target.files;if(!(!N||N.length===0)){for(let D=0;D<N.length;D++)await me(w,N[D]);Z.current&&(Z.current.value="")}},se=async(w,g)=>{if(confirm("  ?"))try{await Te.delete(`/finish-check/images/${g}`),l(o.map(N=>({...N,items:N.items.map(D=>D.id===w?{...D,images:D.images.filter(P=>P.id!==g)}:D)}))),H.success(" ")}catch(N){console.error("Failed to delete image:",N),H.error("  ")}},ae=async(w,g)=>{w.preventDefault(),w.stopPropagation();const N=w.dataTransfer.files;if(!(!N||N.length===0))for(let D=0;D<N.length;D++)N[D].type.startsWith("image/")&&await me(g,N[D])},X=w=>{w.preventDefault(),w.stopPropagation()},we=o.find(w=>w.id===c),Ee=((we==null?void 0:we.items.filter(w=>!w.is_completed))||[]).sort((w,g)=>(g.is_priority||0)-(w.is_priority||0)),de=(we==null?void 0:we.items.filter(w=>w.is_completed))||[];if(d)return a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-120px)]",children:a.jsx("div",{className:"text-gray-500",children:" ..."})});const C=R?o.flatMap(w=>w.items).find(w=>w.id===R):null;return a.jsxs("div",{className:"h-[calc(100vh-120px)] flex flex-col md:flex-row gap-4 overflow-hidden",children:[a.jsx("input",{ref:Z,type:"file",accept:"image/jpeg,image/png,image/webp",multiple:!0,className:"hidden",onChange:w=>{R&&I(R,w)}}),a.jsxs("div",{className:`w-full md:w-64 lg:w-80 flex-shrink-0 bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col ${M?"hidden md:flex":"flex"}`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsxs("select",{value:s||"",onChange:w=>{const g=w.target.value?Number(w.target.value):null;i(g),u(null)},className:"w-full px-3 py-2.5 md:py-2 text-sm md:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(e==null?void 0:e.name)!==""&&a.jsx("option",{value:"",children:" "}),r.map(w=>a.jsx("option",{value:w.id,children:w.title},w.id))]})]}),a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:" "}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:m,onChange:w=>y(w.target.value),onKeyPress:w=>{w.key==="Enter"&&G()},placeholder:" ",className:"flex-1 px-3 py-2.5 md:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("button",{onClick:G,className:"px-3 py-2.5 md:p-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center justify-center min-w-[44px]",title:" ",children:a.jsx(aa,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:o.length===0?a.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:" "}):a.jsxs("div",{className:"divide-y divide-gray-200",children:[a.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${c===-1?"bg-gray-100 border-l-4 border-gray-800":""}`,onClick:()=>{u(-1),O(!0)},children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h3",{className:"font-medium text-gray-900",children:" "})})})}),o.map(w=>a.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${c===w.id?"bg-gray-100 border-l-4 border-gray-800":""}`,onClick:()=>{u(w.id),O(!0)},children:k===w.id?a.jsxs("div",{className:"flex gap-2",onClick:g=>g.stopPropagation(),children:[a.jsx("input",{type:"text",value:v,onChange:g=>S(g.target.value),onKeyPress:g=>{g.key==="Enter"?U(w.id,v):g.key==="Escape"&&(h(null),S(""))},className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0}),a.jsx("button",{onClick:()=>U(w.id,v),className:"p-1 text-green-600 hover:text-green-700",children:a.jsx(Vd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{h(null),S("")},className:"p-1 text-gray-600 hover:text-gray-700",children:a.jsx(et,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate",children:w.name}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[w.items.filter(g=>g.is_completed).length," / ",w.items.length," "]})]}),a.jsxs("div",{className:"flex items-center gap-1 ml-2",onClick:g=>g.stopPropagation(),children:[a.jsx("button",{onClick:()=>{h(w.id),S(w.name)},className:"p-1 text-gray-600 hover:text-gray-800 transition-colors",title:"",children:a.jsx(rc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>L(w.id,w.name),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"",children:a.jsx(Et,{className:"w-4 h-4"})})]})]})},w.id))]})})]}),a.jsx("div",{className:`flex-1 bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col ${M?"flex":"hidden md:flex"}`,children:c===-1?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>O(!1),className:"md:hidden p-2 -ml-2 text-gray-600 hover:text-gray-900 transition-colors",children:a.jsx(Pf,{className:"w-5 h-5"})}),a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:" "}),a.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm font-semibold rounded-full",children:[o.reduce((w,g)=>w+g.items.filter(N=>N.is_completed).length,0)," / ",o.reduce((w,g)=>w+g.items.length,0)," "]})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a.jsx("div",{className:"columns-1 md:columns-4 gap-4",children:o.map((w,g)=>{const N=w.items.filter(P=>!P.is_completed).sort((P,F)=>(F.is_priority||0)-(P.is_priority||0)),D=w.items.filter(P=>P.is_completed);return w.items.length===0?null:a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 mb-2 break-inside-avoid",children:[a.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-4 pb-2 border-b border-gray-300 flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-gray-800 text-white text-xs font-bold rounded-full",children:g+1}),w.name]}),N.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})," (",N.length,")"]}),a.jsx("div",{className:"space-y-2",children:N.map(P=>a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white border border-gray-200 rounded-lg",children:[a.jsx("input",{type:"checkbox",checked:!1,onChange:()=>ue(P.id),className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"}),a.jsx("span",{className:"flex-1 text-sm text-gray-900",children:P.content}),a.jsx("button",{onClick:()=>ye(P.id),className:`p-1 transition-colors ${P.is_priority?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"}`,title:"",children:a.jsx(cd,{className:`w-4 h-4 ${P.is_priority?"fill-current":""}`})})]},P.id))})]}),D.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," (",D.length,")"]}),a.jsx("div",{className:"space-y-2",children:D.map(P=>a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white border border-gray-200 rounded-lg opacity-40",children:[a.jsx("input",{type:"checkbox",checked:!0,onChange:()=>ue(P.id),className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"}),a.jsx("span",{className:"flex-1 text-sm text-gray-500 line-through",children:P.content}),a.jsx("button",{onClick:()=>ye(P.id),className:`p-1 transition-colors ${P.is_priority?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"}`,title:"",children:a.jsx(cd,{className:`w-4 h-4 ${P.is_priority?"fill-current":""}`})})]},P.id))})]})]},w.id)})}),o.every(w=>w.items.length===0)&&a.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:"   "})]})]}):we?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("button",{onClick:()=>O(!1),className:"md:hidden p-2 -ml-2 text-gray-600 hover:text-gray-900 transition-colors",children:a.jsx(Pf,{className:"w-5 h-5"})}),a.jsxs("h2",{className:"text-lg font-bold text-gray-900",children:[we.name," - "]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:j,onChange:w=>p(w.target.value),onKeyPress:w=>{w.key==="Enter"&&Y()},placeholder:"  ",className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("button",{onClick:Y,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium",children:""})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[Ee.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})," (",Ee.length,")"]}),a.jsx("div",{className:"space-y-2",children:Ee.map(w=>a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:!1,onChange:()=>ue(w.id),className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"}),x===w.id?a.jsxs("div",{className:"flex-1 flex gap-2",children:[a.jsx("input",{type:"text",value:E,onChange:g=>_(g.target.value),onKeyPress:g=>{g.key==="Enter"?Ne(w.id,E):g.key==="Escape"&&(T(null),_(""))},className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0}),a.jsx("button",{onClick:()=>Ne(w.id,E),className:"p-1 text-green-600 hover:text-green-700",children:a.jsx(Vd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{T(null),_("")},className:"p-1 text-gray-600 hover:text-gray-700",children:a.jsx(et,{className:"w-4 h-4"})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:`flex-1 text-sm text-gray-900 ${!fe&&R===w.id?"font-semibold":""}`,onClick:()=>!fe&&K(w.id),style:{cursor:fe?"default":"pointer"},children:[w.content,w.images.length>0&&a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",w.images.length,")"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>ye(w.id),className:`p-1 transition-colors ${w.is_priority?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"}`,title:"",children:a.jsx(cd,{className:`w-4 h-4 ${w.is_priority?"fill-current":""}`})}),a.jsx("button",{onClick:()=>{K(w.id),fe&&ie(!0)},className:`p-1 transition-colors ${w.images.length>0?"text-blue-600 hover:text-blue-800":"text-gray-300 hover:text-gray-400"}`,title:"",children:a.jsx(Un,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{T(w.id),_(w.content)},className:"p-1 text-gray-600 hover:text-gray-800 transition-colors",title:"",children:a.jsx(rc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Re(w.id),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"",children:a.jsx(Et,{className:"w-4 h-4"})})]})]})]},w.id))})]}),de.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," (",de.length,")"]}),a.jsx("div",{className:"space-y-2",children:de.map(w=>a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors opacity-40",children:[a.jsx("input",{type:"checkbox",checked:!0,onChange:()=>ue(w.id),className:"mt-1 w-5 h-5 rounded border-gray-300 text-gray-800 focus:ring-gray-500 cursor-pointer"}),x===w.id?a.jsxs("div",{className:"flex-1 flex gap-2",children:[a.jsx("input",{type:"text",value:E,onChange:g=>_(g.target.value),onKeyPress:g=>{g.key==="Enter"?Ne(w.id,E):g.key==="Escape"&&(T(null),_(""))},className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-gray-500",autoFocus:!0}),a.jsx("button",{onClick:()=>Ne(w.id,E),className:"p-1 text-green-600 hover:text-green-700",children:a.jsx(Vd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{T(null),_("")},className:"p-1 text-gray-600 hover:text-gray-700",children:a.jsx(et,{className:"w-4 h-4"})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:`flex-1 text-sm text-gray-500 line-through ${!fe&&R===w.id?"font-semibold":""}`,onClick:()=>!fe&&K(w.id),style:{cursor:fe?"default":"pointer"},children:[w.content,w.images.length>0&&a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",w.images.length,")"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>ye(w.id),className:`p-1 transition-colors ${w.is_priority?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"}`,title:"",children:a.jsx(cd,{className:`w-4 h-4 ${w.is_priority?"fill-current":""}`})}),a.jsx("button",{onClick:()=>{K(w.id),fe&&ie(!0)},className:`p-1 transition-colors ${w.images.length>0?"text-blue-600 hover:text-blue-800":"text-gray-300 hover:text-gray-400"}`,title:"",children:a.jsx(Un,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{T(w.id),_(w.content)},className:"p-1 text-gray-600 hover:text-gray-800 transition-colors",title:"",children:a.jsx(rc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Re(w.id),className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"",children:a.jsx(Et,{className:"w-4 h-4"})})]})]})]},w.id))})]}),Ee.length===0&&de.length===0&&a.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:"  "})]})]}):a.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:"  "})}),!fe&&R&&C&&a.jsxs("div",{className:"w-80 bg-white border border-gray-200 rounded-lg overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:""}),a.jsx("button",{onClick:()=>K(null),className:"p-1 text-gray-600 hover:text-gray-900 transition-colors",title:"",children:a.jsx(et,{className:"w-4 h-4"})})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:C.content}),a.jsxs("button",{onClick:()=>{var w;return(w=Z.current)==null?void 0:w.click()},disabled:Q.has(R),className:"w-full px-3 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(ks,{className:"w-4 h-4"}),Q.has(R)?" ...":" "]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"    , Ctrl+V "})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",onDrop:w=>ae(w,R),onDragOver:X,children:C.images.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm",children:[a.jsx(Un,{className:"w-12 h-12 mb-2"}),a.jsx("p",{children:" "})]}):a.jsx("div",{className:"grid grid-cols-2 gap-3",children:C.images.map(w=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:w.image_data,alt:w.filename||"",className:"w-full h-32 object-cover rounded-lg border border-gray-200"}),a.jsx("button",{onClick:()=>se(R,w.id),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"",children:a.jsx(tw,{className:"w-4 h-4"})}),w.filename&&a.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",title:w.filename,children:w.filename})]},w.id))})})]}),fe&&xe&&R&&C&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-t-2xl w-full max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:""}),a.jsx("button",{onClick:()=>{ie(!1),K(null)},className:"p-1 text-gray-600 hover:text-gray-900",children:a.jsx(et,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:C.content}),a.jsxs("button",{onClick:()=>{var w;return(w=Z.current)==null?void 0:w.click()},disabled:Q.has(R),className:"w-full px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors text-sm font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:[a.jsx(ks,{className:"w-4 h-4"}),Q.has(R)?" ...":" "]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:C.images.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[a.jsx(Un,{className:"w-16 h-16 mb-2"}),a.jsx("p",{className:"text-sm",children:" "})]}):a.jsx("div",{className:"grid grid-cols-2 gap-3",children:C.images.map(w=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:w.image_data,alt:w.filename||"",className:"w-full h-40 object-cover rounded-lg border border-gray-200"}),a.jsx("button",{onClick:()=>se(R,w.id),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600",children:a.jsx(tw,{className:"w-4 h-4"})}),w.filename&&a.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",title:w.filename,children:w.filename})]},w.id))})})]})})]})};function Xte(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return b.useMemo(()=>n=>{t.forEach(s=>s(n))},t)}const xh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xl(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Q0(e){return"nodeType"in e}function rn(e){var t,r;return e?xl(e)?e:Q0(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function X0(e){const{Document:t}=rn(e);return e instanceof t}function Ru(e){return xl(e)?!1:e instanceof rn(e).HTMLElement}function oE(e){return e instanceof rn(e).SVGElement}function vl(e){return e?xl(e)?e.document:Q0(e)?X0(e)?e:Ru(e)||oE(e)?e.ownerDocument:document:document:document}const Es=xh?b.useLayoutEffect:b.useEffect;function J0(e){const t=b.useRef(e);return Es(()=>{t.current=e}),b.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function Jte(){const e=b.useRef(null),t=b.useCallback((n,s)=>{e.current=setInterval(n,s)},[]),r=b.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Xc(e,t){t===void 0&&(t=[e]);const r=b.useRef(e);return Es(()=>{r.current!==e&&(r.current=e)},t),r}function Ou(e,t){const r=b.useRef();return b.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function tm(e){const t=J0(e),r=b.useRef(null),n=b.useCallback(s=>{s!==r.current&&(t==null||t(s,r.current)),r.current=s},[]);return[r,n]}function vy(e){const t=b.useRef();return b.useEffect(()=>{t.current=e},[e]),t.current}let Dp={};function Iu(e,t){return b.useMemo(()=>{if(t)return t;const r=Dp[e]==null?0:Dp[e]+1;return Dp[e]=r,e+"-"+r},[e,t])}function lE(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const ko=lE(1),Jc=lE(-1);function Zte(e){return"clientX"in e&&"clientY"in e}function Z0(e){if(!e)return!1;const{KeyboardEvent:t}=rn(e.target);return t&&e instanceof t}function ere(e){if(!e)return!1;const{TouchEvent:t}=rn(e.target);return t&&e instanceof t}function by(e){if(ere(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return Zte(e)?{x:e.clientX,y:e.clientY}:null}const Go=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Go.Translate.toString(e),Go.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),lj="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function tre(e){return e.matches(lj)?e:e.querySelector(lj)}const rre={display:"none"};function nre(e){let{id:t,value:r}=e;return z.createElement("div",{id:t,style:rre},r)}function sre(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return z.createElement("div",{id:t,style:s,role:"status","aria-live":n,"aria-atomic":!0},r)}function are(){const[e,t]=b.useState("");return{announce:b.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const cE=b.createContext(null);function ire(e){const t=b.useContext(cE);b.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ore(){const[e]=b.useState(()=>new Set),t=b.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[b.useCallback(n=>{let{type:s,event:i}=n;e.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[e]),t]}const lre={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},cre={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ure(e){let{announcements:t=cre,container:r,hiddenTextDescribedById:n,screenReaderInstructions:s=lre}=e;const{announce:i,announcement:o}=are(),l=Iu("DndLiveRegion"),[c,u]=b.useState(!1);if(b.useEffect(()=>{u(!0)},[]),ire(b.useMemo(()=>({onDragStart(f){let{active:m}=f;i(t.onDragStart({active:m}))},onDragMove(f){let{active:m,over:y}=f;t.onDragMove&&i(t.onDragMove({active:m,over:y}))},onDragOver(f){let{active:m,over:y}=f;i(t.onDragOver({active:m,over:y}))},onDragEnd(f){let{active:m,over:y}=f;i(t.onDragEnd({active:m,over:y}))},onDragCancel(f){let{active:m,over:y}=f;i(t.onDragCancel({active:m,over:y}))}}),[i,t])),!c)return null;const d=z.createElement(z.Fragment,null,z.createElement(nre,{id:n,value:s.draggable}),z.createElement(sre,{id:l,announcement:o}));return r?mi.createPortal(d,r):d}var nr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(nr||(nr={}));function rm(){}function cj(e,t){return b.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function dre(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return b.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const Zn=Object.freeze({x:0,y:0});function uE(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function dE(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function fre(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function uj(e){let{left:t,top:r,height:n,width:s}=e;return[{x:t,y:r},{x:t+s,y:r},{x:t,y:r+n},{x:t+s,y:r+n}]}function fE(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function dj(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const Cp=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=dj(t,t.left,t.top),i=[];for(const o of n){const{id:l}=o,c=r.get(l);if(c){const u=uE(dj(c),s);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(dE)},mre=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=uj(t),i=[];for(const o of n){const{id:l}=o,c=r.get(l);if(c){const u=uj(c),d=s.reduce((m,y,j)=>m+uE(u[j],y),0),f=Number((d/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(dE)};function hre(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=s-n,l=i-r;if(n<s&&r<i){const c=t.width*t.height,u=e.width*e.height,d=o*l,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const pre=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=[];for(const i of n){const{id:o}=i,l=r.get(o);if(l){const c=hre(l,t);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(fre)};function gre(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function mE(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Zn}function yre(e){return function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...r})}}const xre=yre(1);function vre(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function bre(e,t,r){const n=vre(t);if(!n)return e;const{scaleX:s,scaleY:i,x:o,y:l}=n,c=e.left-o-(1-s)*parseFloat(r),u=e.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=s?e.width/s:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const wre={ignoreTransform:!1};function bl(e,t){t===void 0&&(t=wre);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=rn(e).getComputedStyle(e);u&&(r=bre(r,u,d))}const{top:n,left:s,width:i,height:o,bottom:l,right:c}=r;return{top:n,left:s,width:i,height:o,bottom:l,right:c}}function fj(e){return bl(e,{ignoreTransform:!0})}function Nre(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function jre(e,t){return t===void 0&&(t=rn(e).getComputedStyle(e)),t.position==="fixed"}function Sre(e,t){t===void 0&&(t=rn(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?r.test(i):!1})}function vh(e,t){const r=[];function n(s){if(t!=null&&r.length>=t||!s)return r;if(X0(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!Ru(s)||oE(s)||r.includes(s))return r;const i=rn(e).getComputedStyle(s);return s!==e&&Sre(s,i)&&r.push(s),jre(s,i)?r:n(s.parentNode)}return e?n(e):r}function hE(e){const[t]=vh(e,1);return t??null}function Ep(e){return!xh||!e?null:xl(e)?e:Q0(e)?X0(e)||e===vl(e).scrollingElement?window:Ru(e)?e:null:null}function pE(e){return xl(e)?e.scrollX:e.scrollLeft}function gE(e){return xl(e)?e.scrollY:e.scrollTop}function wy(e){return{x:pE(e),y:gE(e)}}var mr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(mr||(mr={}));function yE(e){return!xh||!e?!1:e===document.scrollingElement}function xE(e){const t={x:0,y:0},r=yE(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=n.y,l=e.scrollLeft>=n.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:n,minScroll:t}}const kre={x:.2,y:.2};function Dre(e,t,r,n,s){let{top:i,left:o,right:l,bottom:c}=r;n===void 0&&(n=10),s===void 0&&(s=kre);const{isTop:u,isBottom:d,isLeft:f,isRight:m}=xE(e),y={x:0,y:0},j={x:0,y:0},p={height:t.height*s.y,width:t.width*s.x};return!u&&i<=t.top+p.height?(y.y=mr.Backward,j.y=n*Math.abs((t.top+p.height-i)/p.height)):!d&&c>=t.bottom-p.height&&(y.y=mr.Forward,j.y=n*Math.abs((t.bottom-p.height-c)/p.height)),!m&&l>=t.right-p.width?(y.x=mr.Forward,j.x=n*Math.abs((t.right-p.width-l)/p.width)):!f&&o<=t.left+p.width&&(y.x=mr.Backward,j.x=n*Math.abs((t.left+p.width-o)/p.width)),{direction:y,speed:j}}function Cre(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:r,right:n,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:s,width:e.clientWidth,height:e.clientHeight}}function vE(e){return e.reduce((t,r)=>ko(t,wy(r)),Zn)}function Ere(e){return e.reduce((t,r)=>t+pE(r),0)}function Tre(e){return e.reduce((t,r)=>t+gE(r),0)}function Are(e,t){if(t===void 0&&(t=bl),!e)return;const{top:r,left:n,bottom:s,right:i}=t(e);hE(e)&&(s<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const _re=[["x",["left","right"],Ere],["y",["top","bottom"],Tre]];class ev{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=vh(r),s=vE(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of _re)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(n),d=s[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class cc{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var s;(s=this.target)==null||s.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function Pre(e){const{EventTarget:t}=rn(e);return e instanceof t?e:vl(e)}function Tp(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var gn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(gn||(gn={}));function mj(e){e.preventDefault()}function Mre(e){e.stopPropagation()}var at;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(at||(at={}));const bE={start:[at.Space,at.Enter],cancel:[at.Esc],end:[at.Space,at.Enter,at.Tab]},Rre=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case at.Right:return{...r,x:r.x+25};case at.Left:return{...r,x:r.x-25};case at.Down:return{...r,y:r.y+25};case at.Up:return{...r,y:r.y-25}}};class tv{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new cc(vl(r)),this.windowListeners=new cc(rn(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(gn.Resize,this.handleCancel),this.windowListeners.add(gn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(gn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&Are(n),r(Zn)}handleKeyDown(t){if(Z0(t)){const{active:r,context:n,options:s}=this.props,{keyboardCodes:i=bE,coordinateGetter:o=Rre,scrollBehavior:l="smooth"}=s,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:Zn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(t,{active:r,context:n.current,currentCoordinates:d});if(f){const m=Jc(f,d),y={x:0,y:0},{scrollableAncestors:j}=n.current;for(const p of j){const k=t.code,{isTop:h,isRight:v,isLeft:S,isBottom:x,maxScroll:T,minScroll:E}=xE(p),_=Cre(p),M={x:Math.min(k===at.Right?_.right-_.width/2:_.right,Math.max(k===at.Right?_.left:_.left+_.width/2,f.x)),y:Math.min(k===at.Down?_.bottom-_.height/2:_.bottom,Math.max(k===at.Down?_.top:_.top+_.height/2,f.y))},O=k===at.Right&&!v||k===at.Left&&!S,R=k===at.Down&&!x||k===at.Up&&!h;if(O&&M.x!==f.x){const K=p.scrollLeft+m.x,Q=k===at.Right&&K<=T.x||k===at.Left&&K>=E.x;if(Q&&!m.y){p.scrollTo({left:K,behavior:l});return}Q?y.x=p.scrollLeft-K:y.x=k===at.Right?p.scrollLeft-T.x:p.scrollLeft-E.x,y.x&&p.scrollBy({left:-y.x,behavior:l});break}else if(R&&M.y!==f.y){const K=p.scrollTop+m.y,Q=k===at.Down&&K<=T.y||k===at.Up&&K>=E.y;if(Q&&!m.x){p.scrollTo({top:K,behavior:l});return}Q?y.y=p.scrollTop-K:y.y=k===at.Down?p.scrollTop-T.y:p.scrollTop-E.y,y.y&&p.scrollBy({top:-y.y,behavior:l});break}}this.handleMove(t,ko(Jc(f,this.referenceCoordinates),y))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}tv.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=bE,onActivation:s}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function hj(e){return!!(e&&"distance"in e)}function pj(e){return!!(e&&"delay"in e)}class rv{constructor(t,r,n){var s;n===void 0&&(n=Pre(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:o}=i;this.props=t,this.events=r,this.document=vl(o),this.documentListeners=new cc(this.document),this.listeners=new cc(n),this.windowListeners=new cc(rn(o)),this.initialCoordinates=(s=by(i))!=null?s:Zn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(gn.Resize,this.handleCancel),this.windowListeners.add(gn.DragStart,mj),this.windowListeners.add(gn.VisibilityChange,this.handleCancel),this.windowListeners.add(gn.ContextMenu,mj),this.documentListeners.add(gn.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(pj(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(hj(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:s}=this.props;s(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(gn.Click,Mre,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(gn.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const c=(r=by(t))!=null?r:Zn,u=Jc(s,c);if(!n&&l){if(hj(l)){if(l.tolerance!=null&&Tp(u,l.tolerance))return this.handleCancel();if(Tp(u,l.distance))return this.handleStart()}if(pj(l)&&Tp(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===at.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ore={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nv extends rv{constructor(t){const{event:r}=t,n=vl(r.target);super(t,Ore,n)}}nv.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const Ire={move:{name:"mousemove"},end:{name:"mouseup"}};var Ny;(function(e){e[e.RightClick=2]="RightClick"})(Ny||(Ny={}));class Lre extends rv{constructor(t){super(t,Ire,vl(t.event.target))}}Lre.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===Ny.RightClick?!1:(n==null||n({event:r}),!0)}}];const Ap={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $re extends rv{constructor(t){super(t,Ap)}static setup(){return window.addEventListener(Ap.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ap.move.name,t)};function t(){}}}$re.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:s}=r;return s.length>1?!1:(n==null||n({event:r}),!0)}}];var uc;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(uc||(uc={}));var nm;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(nm||(nm={}));function Fre(e){let{acceleration:t,activator:r=uc.Pointer,canScroll:n,draggingRect:s,enabled:i,interval:o=5,order:l=nm.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:m}=e;const y=Wre({delta:f,disabled:!i}),[j,p]=Jte(),k=b.useRef({x:0,y:0}),h=b.useRef({x:0,y:0}),v=b.useMemo(()=>{switch(r){case uc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case uc.DraggableRect:return s}},[r,s,c]),S=b.useRef(null),x=b.useCallback(()=>{const E=S.current;if(!E)return;const _=k.current.x*h.current.x,M=k.current.y*h.current.y;E.scrollBy(_,M)},[]),T=b.useMemo(()=>l===nm.TreeOrder?[...u].reverse():u,[l,u]);b.useEffect(()=>{if(!i||!u.length||!v){p();return}for(const E of T){if((n==null?void 0:n(E))===!1)continue;const _=u.indexOf(E),M=d[_];if(!M)continue;const{direction:O,speed:R}=Dre(E,M,v,t,m);for(const K of["x","y"])y[K][O[K]]||(R[K]=0,O[K]=0);if(R.x>0||R.y>0){p(),S.current=E,j(x,o),k.current=R,h.current=O;return}}k.current={x:0,y:0},h.current={x:0,y:0},p()},[t,x,n,p,i,o,JSON.stringify(v),JSON.stringify(y),j,u,T,d,JSON.stringify(m)])}const Bre={x:{[mr.Backward]:!1,[mr.Forward]:!1},y:{[mr.Backward]:!1,[mr.Forward]:!1}};function Wre(e){let{delta:t,disabled:r}=e;const n=vy(t);return Ou(s=>{if(r||!n||!s)return Bre;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[mr.Backward]:s.x[mr.Backward]||i.x===-1,[mr.Forward]:s.x[mr.Forward]||i.x===1},y:{[mr.Backward]:s.y[mr.Backward]||i.y===-1,[mr.Forward]:s.y[mr.Forward]||i.y===1}}},[r,t,n])}function Hre(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return Ou(s=>{var i;return t==null?null:(i=n??s)!=null?i:null},[n,t])}function Ure(e,t){return b.useMemo(()=>e.reduce((r,n)=>{const{sensor:s}=n,i=s.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,n)}));return[...r,...i]},[]),[e,t])}var Zc;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Zc||(Zc={}));var jy;(function(e){e.Optimized="optimized"})(jy||(jy={}));const gj=new Map;function zre(e,t){let{dragging:r,dependencies:n,config:s}=t;const[i,o]=b.useState(null),{frequency:l,measure:c,strategy:u}=s,d=b.useRef(e),f=k(),m=Xc(f),y=b.useCallback(function(h){h===void 0&&(h=[]),!m.current&&o(v=>v===null?h:v.concat(h.filter(S=>!v.includes(S))))},[m]),j=b.useRef(null),p=Ou(h=>{if(f&&!r)return gj;if(!h||h===gj||d.current!==e||i!=null){const v=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){v.set(S.id,S.rect.current);continue}const x=S.node.current,T=x?new ev(c(x),x):null;S.rect.current=T,T&&v.set(S.id,T)}return v}return h},[e,i,r,f,c]);return b.useEffect(()=>{d.current=e},[e]),b.useEffect(()=>{f||y()},[r,f]),b.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),b.useEffect(()=>{f||typeof l!="number"||j.current!==null||(j.current=setTimeout(()=>{y(),j.current=null},l))},[l,f,y,...n]),{droppableRects:p,measureDroppableContainers:y,measuringScheduled:i!=null};function k(){switch(u){case Zc.Always:return!1;case Zc.BeforeDragging:return r;default:return!r}}}function wE(e,t){return Ou(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function Vre(e,t){return wE(e,t)}function Yre(e){let{callback:t,disabled:r}=e;const n=J0(t),s=b.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return b.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function bh(e){let{callback:t,disabled:r}=e;const n=J0(t),s=b.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return b.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function qre(e){return new ev(bl(e),e)}function yj(e,t,r){t===void 0&&(t=qre);const[n,s]=b.useState(null);function i(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=Yre({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=bh({callback:i});return Es(()=>{i(),e?(l==null||l.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[e]),n}function Kre(e){const t=wE(e);return mE(e,t)}const xj=[];function Gre(e){const t=b.useRef(e),r=Ou(n=>e?n&&n!==xj&&e&&t.current&&e.parentNode===t.current.parentNode?n:vh(e):xj,[e]);return b.useEffect(()=>{t.current=e},[e]),r}function Qre(e){const[t,r]=b.useState(null),n=b.useRef(e),s=b.useCallback(i=>{const o=Ep(i.target);o&&r(l=>l?(l.set(o,wy(o)),new Map(l)):null)},[]);return b.useEffect(()=>{const i=n.current;if(e!==i){o(i);const l=e.map(c=>{const u=Ep(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,wy(u)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const u=Ep(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),b.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>ko(i,o),Zn):vE(e):Zn,[e,t])}function vj(e,t){t===void 0&&(t=[]);const r=b.useRef(null);return b.useEffect(()=>{r.current=null},t),b.useEffect(()=>{const n=e!==Zn;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?Jc(e,r.current):Zn}function Xre(e){b.useEffect(()=>{if(!xh)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function Jre(e,t){return b.useMemo(()=>e.reduce((r,n)=>{let{eventName:s,handler:i}=n;return r[s]=o=>{i(o,t)},r},{}),[e,t])}function NE(e){return b.useMemo(()=>e?Nre(e):null,[e])}const bj=[];function Zre(e,t){t===void 0&&(t=bl);const[r]=e,n=NE(r?rn(r):null),[s,i]=b.useState(bj);function o(){i(()=>e.length?e.map(c=>yE(c)?n:new ev(t(c),c)):bj)}const l=bh({callback:o});return Es(()=>{l==null||l.disconnect(),o(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),s}function ene(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ru(t)?t:e}function tne(e){let{measure:t}=e;const[r,n]=b.useState(null),s=b.useCallback(u=>{for(const{target:d}of u)if(Ru(d)){n(f=>{const m=t(d);return f?{...f,width:m.width,height:m.height}:m});break}},[t]),i=bh({callback:s}),o=b.useCallback(u=>{const d=ene(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?t(d):null)},[t,i]),[l,c]=tm(o);return b.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const rne=[{sensor:nv,options:{}},{sensor:tv,options:{}}],nne={current:{}},tf={draggable:{measure:fj},droppable:{measure:fj,strategy:Zc.WhileDragging,frequency:jy.Optimized},dragOverlay:{measure:bl}};class dc extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const sne={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new dc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:rm},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tf,measureDroppableContainers:rm,windowRect:null,measuringScheduled:!1},ane={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:rm,draggableNodes:new Map,over:null,measureDroppableContainers:rm},wh=b.createContext(ane),jE=b.createContext(sne);function ine(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new dc}}}function one(e,t){switch(t.type){case nr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case nr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case nr.DragEnd:case nr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case nr.RegisterDroppable:{const{element:r}=t,{id:n}=r,s=new dc(e.droppable.containers);return s.set(n,r),{...e,droppable:{...e.droppable,containers:s}}}case nr.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new dc(e.droppable.containers);return o.set(r,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:o}}}case nr.UnregisterDroppable:{const{id:r,key:n}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const i=new dc(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function lne(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:s}=b.useContext(wh),i=vy(n),o=vy(r==null?void 0:r.id);return b.useEffect(()=>{if(!t&&!n&&i&&o!=null){if(!Z0(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=tre(d);if(f){f.focus();break}}})}},[n,t,s,o,i]),null}function cne(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...n}),r):r}function une(e){return b.useMemo(()=>({draggable:{...tf.draggable,...e==null?void 0:e.draggable},droppable:{...tf.droppable,...e==null?void 0:e.droppable},dragOverlay:{...tf.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function dne(e){let{activeNode:t,measure:r,initialRect:n,config:s=!0}=e;const i=b.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Es(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=r(u),f=mE(d,n);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=hE(u);m&&m.scrollBy({top:f.y,left:f.x})}},[t,o,l,n,r])}const SE=b.createContext({...Zn,scaleX:1,scaleY:1});var wa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(wa||(wa={}));const _p=b.memo(function(t){var r,n,s,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=rne,collisionDetection:f=pre,measuring:m,modifiers:y,...j}=t;const p=b.useReducer(one,void 0,ine),[k,h]=p,[v,S]=ore(),[x,T]=b.useState(wa.Uninitialized),E=x===wa.Initialized,{draggable:{active:_,nodes:M,translate:O},droppable:{containers:R}}=k,K=_!=null?M.get(_):null,Q=b.useRef({initial:null,translated:null}),ne=b.useMemo(()=>{var re;return _!=null?{id:_,data:(re=K==null?void 0:K.data)!=null?re:nne,rect:Q}:null},[_,K]),Z=b.useRef(null),[fe,te]=b.useState(null),[xe,ie]=b.useState(null),V=Xc(j,Object.values(j)),ge=Iu("DndDescribedBy",o),G=b.useMemo(()=>R.getEnabled(),[R]),U=une(m),{droppableRects:L,measureDroppableContainers:Y,measuringScheduled:ue}=zre(G,{dragging:E,dependencies:[O.x,O.y],config:U.droppable}),ye=Hre(M,_),Ne=b.useMemo(()=>xe?by(xe):null,[xe]),Re=oe(),ee=Vre(ye,U.draggable.measure);dne({activeNode:_!=null?M.get(_):null,config:Re.layoutShiftCompensation,initialRect:ee,measure:U.draggable.measure});const me=yj(ye,U.draggable.measure,ee),I=yj(ye?ye.parentElement:null),se=b.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:L,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ae=R.getNodeFor((r=se.current.over)==null?void 0:r.id),X=tne({measure:U.dragOverlay.measure}),we=(n=X.nodeRef.current)!=null?n:ye,Ee=E?(s=X.rect)!=null?s:me:null,de=!!(X.nodeRef.current&&X.rect),C=Kre(de?null:me),w=NE(we?rn(we):null),g=Gre(E?ae??ye:null),N=Zre(g),D=cne(y,{transform:{x:O.x-C.x,y:O.y-C.y,scaleX:1,scaleY:1},activatorEvent:xe,active:ne,activeNodeRect:me,containerNodeRect:I,draggingNodeRect:Ee,over:se.current.over,overlayNodeRect:X.rect,scrollableAncestors:g,scrollableAncestorRects:N,windowRect:w}),P=Ne?ko(Ne,O):null,F=Qre(g),q=vj(F),A=vj(F,[me]),J=ko(D,q),W=Ee?xre(Ee,D):null,le=ne&&W?f({active:ne,collisionRect:W,droppableRects:L,droppableContainers:G,pointerCoordinates:P}):null,Me=fE(le,"id"),[Ce,ze]=b.useState(null),rt=de?D:ko(D,A),Ye=gre(rt,(i=Ce==null?void 0:Ce.rect)!=null?i:null,me),Qe=b.useRef(null),xt=b.useCallback((re,je)=>{let{sensor:ce,options:ke}=je;if(Z.current==null)return;const pe=M.get(Z.current);if(!pe)return;const Oe=re.nativeEvent,Be=new ce({active:Z.current,activeNode:pe,event:Oe,options:ke,context:se,onAbort(Ge){if(!M.get(Ge))return;const{onDragAbort:Bt}=V.current,Kt={id:Ge};Bt==null||Bt(Kt),v({type:"onDragAbort",event:Kt})},onPending(Ge,gr,Bt,Kt){if(!M.get(Ge))return;const{onDragPending:Mr}=V.current,qe={id:Ge,constraint:gr,initialCoordinates:Bt,offset:Kt};Mr==null||Mr(qe),v({type:"onDragPending",event:qe})},onStart(Ge){const gr=Z.current;if(gr==null)return;const Bt=M.get(gr);if(!Bt)return;const{onDragStart:Kt}=V.current,Gt={activatorEvent:Oe,active:{id:gr,data:Bt.data,rect:Q}};mi.unstable_batchedUpdates(()=>{Kt==null||Kt(Gt),T(wa.Initializing),h({type:nr.DragStart,initialCoordinates:Ge,active:gr}),v({type:"onDragStart",event:Gt}),te(Qe.current),ie(Oe)})},onMove(Ge){h({type:nr.DragMove,coordinates:Ge})},onEnd:Je(nr.DragEnd),onCancel:Je(nr.DragCancel)});Qe.current=Be;function Je(Ge){return async function(){const{active:Bt,collisions:Kt,over:Gt,scrollAdjustedTranslate:Mr}=se.current;let qe=null;if(Bt&&Mr){const{cancelDrop:ht}=V.current;qe={activatorEvent:Oe,active:Bt,collisions:Kt,delta:Mr,over:Gt},Ge===nr.DragEnd&&typeof ht=="function"&&await Promise.resolve(ht(qe))&&(Ge=nr.DragCancel)}Z.current=null,mi.unstable_batchedUpdates(()=>{h({type:Ge}),T(wa.Uninitialized),ze(null),te(null),ie(null),Qe.current=null;const ht=Ge===nr.DragEnd?"onDragEnd":"onDragCancel";if(qe){const _t=V.current[ht];_t==null||_t(qe),v({type:ht,event:qe})}})}}},[M]),dt=b.useCallback((re,je)=>(ce,ke)=>{const pe=ce.nativeEvent,Oe=M.get(ke);if(Z.current!==null||!Oe||pe.dndKit||pe.defaultPrevented)return;const Be={active:Oe};re(ce,je.options,Be)===!0&&(pe.dndKit={capturedBy:je.sensor},Z.current=ke,xt(ce,je))},[M,xt]),Ft=Ure(d,dt);Xre(d),Es(()=>{me&&x===wa.Initializing&&T(wa.Initialized)},[me,x]),b.useEffect(()=>{const{onDragMove:re}=V.current,{active:je,activatorEvent:ce,collisions:ke,over:pe}=se.current;if(!je||!ce)return;const Oe={active:je,activatorEvent:ce,collisions:ke,delta:{x:J.x,y:J.y},over:pe};mi.unstable_batchedUpdates(()=>{re==null||re(Oe),v({type:"onDragMove",event:Oe})})},[J.x,J.y]),b.useEffect(()=>{const{active:re,activatorEvent:je,collisions:ce,droppableContainers:ke,scrollAdjustedTranslate:pe}=se.current;if(!re||Z.current==null||!je||!pe)return;const{onDragOver:Oe}=V.current,Be=ke.get(Me),Je=Be&&Be.rect.current?{id:Be.id,rect:Be.rect.current,data:Be.data,disabled:Be.disabled}:null,Ge={active:re,activatorEvent:je,collisions:ce,delta:{x:pe.x,y:pe.y},over:Je};mi.unstable_batchedUpdates(()=>{ze(Je),Oe==null||Oe(Ge),v({type:"onDragOver",event:Ge})})},[Me]),Es(()=>{se.current={activatorEvent:xe,active:ne,activeNode:ye,collisionRect:W,collisions:le,droppableRects:L,draggableNodes:M,draggingNode:we,draggingNodeRect:Ee,droppableContainers:R,over:Ce,scrollableAncestors:g,scrollAdjustedTranslate:J},Q.current={initial:Ee,translated:W}},[ne,ye,le,W,M,we,Ee,L,R,Ce,g,J]),Fre({...Re,delta:O,draggingRect:W,pointerCoordinates:P,scrollableAncestors:g,scrollableAncestorRects:N});const pr=b.useMemo(()=>({active:ne,activeNode:ye,activeNodeRect:me,activatorEvent:xe,collisions:le,containerNodeRect:I,dragOverlay:X,draggableNodes:M,droppableContainers:R,droppableRects:L,over:Ce,measureDroppableContainers:Y,scrollableAncestors:g,scrollableAncestorRects:N,measuringConfiguration:U,measuringScheduled:ue,windowRect:w}),[ne,ye,me,xe,le,I,X,M,R,L,Ce,Y,g,N,U,ue,w]),$=b.useMemo(()=>({activatorEvent:xe,activators:Ft,active:ne,activeNodeRect:me,ariaDescribedById:{draggable:ge},dispatch:h,draggableNodes:M,over:Ce,measureDroppableContainers:Y}),[xe,Ft,ne,me,h,ge,M,Ce,Y]);return z.createElement(cE.Provider,{value:S},z.createElement(wh.Provider,{value:$},z.createElement(jE.Provider,{value:pr},z.createElement(SE.Provider,{value:Ye},u)),z.createElement(lne,{disabled:(l==null?void 0:l.restoreFocus)===!1})),z.createElement(ure,{...l,hiddenTextDescribedById:ge}));function oe(){const re=(fe==null?void 0:fe.autoScrollEnabled)===!1,je=typeof c=="object"?c.enabled===!1:c===!1,ce=E&&!re&&!je;return typeof c=="object"?{...c,enabled:ce}:{enabled:ce}}}),fne=b.createContext(null),wj="button",mne="Draggable";function hne(e){let{id:t,data:r,disabled:n=!1,attributes:s}=e;const i=Iu(mne),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:m}=b.useContext(wh),{role:y=wj,roleDescription:j="draggable",tabIndex:p=0}=s??{},k=(c==null?void 0:c.id)===t,h=b.useContext(k?SE:fne),[v,S]=tm(),[x,T]=tm(),E=Jre(o,t),_=Xc(r);Es(()=>(f.set(t,{id:t,key:i,node:v,activatorNode:x,data:_}),()=>{const O=f.get(t);O&&O.key===i&&f.delete(t)}),[f,t]);const M=b.useMemo(()=>({role:y,tabIndex:p,"aria-disabled":n,"aria-pressed":k&&y===wj?!0:void 0,"aria-roledescription":j,"aria-describedby":d.draggable}),[n,y,p,k,j,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:M,isDragging:k,listeners:n?void 0:E,node:v,over:m,setNodeRef:S,setActivatorNodeRef:T,transform:h}}function pne(){return b.useContext(jE)}const gne="Droppable",yne={timeout:25};function xne(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:s}=e;const i=Iu(gne),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=b.useContext(wh),d=b.useRef({disabled:r}),f=b.useRef(!1),m=b.useRef(null),y=b.useRef(null),{disabled:j,updateMeasurementsFor:p,timeout:k}={...yne,...s},h=Xc(p??n),v=b.useCallback(()=>{if(!f.current){f.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(h.current)?h.current:[h.current]),y.current=null},k)},[k]),S=bh({callback:v,disabled:j||!o}),x=b.useCallback((M,O)=>{S&&(O&&(S.unobserve(O),f.current=!1),M&&S.observe(M))},[S]),[T,E]=tm(x),_=Xc(t);return b.useEffect(()=>{!S||!T.current||(S.disconnect(),f.current=!1,S.observe(T.current))},[T,S]),b.useEffect(()=>(l({type:nr.RegisterDroppable,element:{id:n,key:i,disabled:r,node:T,rect:m,data:_}}),()=>l({type:nr.UnregisterDroppable,key:i,id:n})),[n]),b.useEffect(()=>{r!==d.current.disabled&&(l({type:nr.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,l]),{active:o,rect:m,isOver:(c==null?void 0:c.id)===n,node:T,over:c,setNodeRef:E}}function sm(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function vne(e,t){return e.reduce((r,n,s)=>{const i=t.get(n);return i&&(r[s]=i),r},Array(e.length))}function wd(e){return e!==null&&e>=0}function bne(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function wne(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const kE=e=>{let{rects:t,activeIndex:r,overIndex:n,index:s}=e;const i=sm(t,n,r),o=t[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Nd={scaleX:1,scaleY:1},Pp=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:s,rects:i,overIndex:o}=e;const l=(t=i[r])!=null?t:n;if(!l)return null;if(s===r){const u=i[o];return u?{x:0,y:r<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Nd}:null}const c=Nne(i,s,r);return s>r&&s<=o?{x:0,y:-l.height-c,...Nd}:s<r&&s>=o?{x:0,y:l.height+c,...Nd}:{x:0,y:0,...Nd}};function Nne(e,t,r){const n=e[t],s=e[t-1],i=e[t+1];return n?r<t?s?n.top-(s.top+s.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}const DE="Sortable",CE=z.createContext({activeIndex:-1,containerId:DE,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:kE,disabled:{draggable:!1,droppable:!1}});function Mp(e){let{children:t,id:r,items:n,strategy:s=kE,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=pne(),f=Iu(DE,r),m=l.rect!==null,y=b.useMemo(()=>n.map(E=>typeof E=="object"&&"id"in E?E.id:E),[n]),j=o!=null,p=o?y.indexOf(o.id):-1,k=u?y.indexOf(u.id):-1,h=b.useRef(y),v=!bne(y,h.current),S=k!==-1&&p===-1||v,x=wne(i);Es(()=>{v&&j&&d(y)},[v,y,j,d]),b.useEffect(()=>{h.current=y},[y]);const T=b.useMemo(()=>({activeIndex:p,containerId:f,disabled:x,disableTransforms:S,items:y,overIndex:k,useDragOverlay:m,sortedRects:vne(y,c),strategy:s}),[p,f,x.draggable,x.droppable,S,y,k,c,m,s]);return z.createElement(CE.Provider,{value:T},t)}const jne=e=>{let{id:t,items:r,activeIndex:n,overIndex:s}=e;return sm(r,n,s).indexOf(t)},Sne=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!n||l!==i&&s===o?!1:r?!0:o!==s&&t===c},kne={duration:200,easing:"ease"},EE="transform",Dne=Go.Transition.toString({property:EE,duration:0,easing:"linear"}),Cne={roleDescription:"sortable"};function Ene(e){let{disabled:t,index:r,node:n,rect:s}=e;const[i,o]=b.useState(null),l=b.useRef(r);return Es(()=>{if(!t&&r!==l.current&&n.current){const c=s.current;if(c){const u=bl(n.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}r!==l.current&&(l.current=r)},[t,r,n,s]),b.useEffect(()=>{i&&o(null)},[i]),i}function TE(e){let{animateLayoutChanges:t=Sne,attributes:r,disabled:n,data:s,getNewIndex:i=jne,id:o,strategy:l,resizeObserverConfig:c,transition:u=kne}=e;const{items:d,containerId:f,activeIndex:m,disabled:y,disableTransforms:j,sortedRects:p,overIndex:k,useDragOverlay:h,strategy:v}=b.useContext(CE),S=Tne(n,y),x=d.indexOf(o),T=b.useMemo(()=>({sortable:{containerId:f,index:x,items:d},...s}),[f,s,x,d]),E=b.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:_,node:M,isOver:O,setNodeRef:R}=xne({id:o,data:T,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...c}}),{active:K,activatorEvent:Q,activeNodeRect:ne,attributes:Z,setNodeRef:fe,listeners:te,isDragging:xe,over:ie,setActivatorNodeRef:V,transform:ge}=hne({id:o,data:T,attributes:{...Cne,...r},disabled:S.draggable}),G=Xte(R,fe),U=!!K,L=U&&!j&&wd(m)&&wd(k),Y=!h&&xe,ue=Y&&L?ge:null,Ne=L?ue??(l??v)({rects:p,activeNodeRect:ne,activeIndex:m,overIndex:k,index:x}):null,Re=wd(m)&&wd(k)?i({id:o,items:d,activeIndex:m,overIndex:k}):x,ee=K==null?void 0:K.id,me=b.useRef({activeId:ee,items:d,newIndex:Re,containerId:f}),I=d!==me.current.items,se=t({active:K,containerId:f,isDragging:xe,isSorting:U,id:o,index:x,items:d,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:u,wasDragging:me.current.activeId!=null}),ae=Ene({disabled:!se,index:x,node:M,rect:_});return b.useEffect(()=>{U&&me.current.newIndex!==Re&&(me.current.newIndex=Re),f!==me.current.containerId&&(me.current.containerId=f),d!==me.current.items&&(me.current.items=d)},[U,Re,f,d]),b.useEffect(()=>{if(ee===me.current.activeId)return;if(ee&&!me.current.activeId){me.current.activeId=ee;return}const we=setTimeout(()=>{me.current.activeId=ee},50);return()=>clearTimeout(we)},[ee]),{active:K,activeIndex:m,attributes:Z,data:T,rect:_,index:x,newIndex:Re,items:d,isOver:O,isSorting:U,isDragging:xe,listeners:te,node:M,overIndex:k,over:ie,setNodeRef:G,setActivatorNodeRef:V,setDroppableNodeRef:R,setDraggableNodeRef:fe,transform:ae??Ne,transition:X()};function X(){if(ae||I&&me.current.newIndex===x)return Dne;if(!(Y&&!Z0(Q)||!u)&&(U||se))return Go.Transition.toString({...u,property:EE})}}function Tne(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}function am(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Ane=[at.Down,at.Right,at.Up,at.Left],_ne=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(Ane.includes(e.code)){if(e.preventDefault(),!r||!n)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const m=s.get(f.id);if(m)switch(e.code){case at.Down:n.top<m.top&&c.push(f);break;case at.Up:n.top>m.top&&c.push(f);break;case at.Left:n.left>m.left&&c.push(f);break;case at.Right:n.left<m.left&&c.push(f);break}});const u=mre({collisionRect:n,droppableRects:s,droppableContainers:c});let d=fE(u,"id");if(d===(o==null?void 0:o.id)&&u.length>1&&(d=u[1].id),d!=null){const f=i.get(r.id),m=i.get(d),y=m?s.get(m.id):null,j=m==null?void 0:m.node.current;if(j&&y&&f&&m){const k=vh(j).some((E,_)=>l[_]!==E),h=AE(f,m),v=Pne(f,m),S=k||!h?{x:0,y:0}:{x:v?n.width-y.width:0,y:v?n.height-y.height:0},x={x:y.left,y:y.top};return S.x&&S.y?x:Jc(x,S)}}}};function AE(e,t){return!am(e)||!am(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Pne(e,t){return!am(e)||!am(t)||!AE(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const _E=e=>{if(!e)return"";const t=e.split(",").map(l=>l.trim());if(t.length===0)return"";if(t.length===1)return t[0]===""?"":t[0];const r=["","","",""],n=t.sort((l,c)=>r.indexOf(l)-r.indexOf(c)),s=n[0],i=n[n.length-1];return`${s}-${i===""?"":i}`},PE=e=>{if(!e)return"";const t=e.split(",").map(r=>r.trim());return t.includes("")?"bg-purple-100 text-purple-700":t.includes("")?"bg-blue-100 text-blue-700":t.includes("")?"bg-green-100 text-green-700":t.includes("")?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"},Nj=({item:e,onEdit:t,onDelete:r,onImageClick:n})=>{const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:u}=TE({id:e.id}),d={transform:Go.Transform.toString(l),transition:c,opacity:u?.5:1};return a.jsxs("div",{ref:o,style:d,...s,...i,className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 overflow-hidden flex flex-col group relative cursor-move",children:[a.jsxs("div",{className:"w-full aspect-square bg-gray-100 flex-shrink-0 relative",children:[e.image_url?a.jsx("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-contain block cursor-pointer",onClick:f=>{f.stopPropagation(),n(e)},onPointerDown:f=>f.stopPropagation()}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:" "}),a.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:f=>{f.stopPropagation(),t(e)},onPointerDown:f=>f.stopPropagation(),className:"p-1.5 bg-white text-gray-700 hover:bg-gray-100 rounded-md shadow-md transition-colors",title:"",children:a.jsx(ck,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:f=>{f.stopPropagation(),r(e.id)},onPointerDown:f=>f.stopPropagation(),className:"p-1.5 bg-white text-rose-600 hover:bg-rose-50 rounded-md shadow-md transition-colors",title:"",children:a.jsx(Et,{className:"w-3.5 h-3.5"})})]})]}),a.jsxs("div",{className:"p-2 pt-1.5 flex flex-col flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsx("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:e.category}),e.grade&&a.jsx("span",{className:`hidden md:inline-block px-1 py-0.5 text-[10px] rounded ${PE(e.grade)}`,children:_E(e.grade)})]}),a.jsxs("div",{className:"flex items-baseline justify-between gap-1 mt-auto",children:[a.jsxs("div",{className:"flex items-baseline gap-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-xs text-gray-900 truncate",children:e.name}),e.brand&&a.jsx("span",{className:"text-xs text-gray-600 flex-shrink-0",children:e.brand})]}),e.price&&a.jsxs("span",{className:"hidden md:inline text-xs text-gray-900 font-medium flex-shrink-0",children:[e.price,""]})]})]})]})},Mne=({category:e,onRemove:t,onEdit:r})=>{const{attributes:n,listeners:s,setNodeRef:i,transform:o,transition:l,isDragging:c}=TE({id:e}),u={transform:Go.Transform.toString(o),transition:l,opacity:c?.5:1};return a.jsxs("div",{ref:i,style:u,className:"flex items-center justify-between p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 bg-white",children:[a.jsx("div",{className:"flex items-center gap-2 flex-1 cursor-grab active:cursor-grabbing",...n,...s,children:a.jsx("span",{className:"text-sm text-gray-900",children:e})}),e!==""&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:d=>{d.stopPropagation(),d.preventDefault(),r(e)},className:"text-gray-600 hover:text-gray-800 transition-colors p-1",title:"",type:"button",children:a.jsx(ck,{className:"h-4 w-4"})}),a.jsx("button",{onClick:d=>{d.stopPropagation(),d.preventDefault(),t(e)},className:"text-red-500 hover:text-red-700 transition-colors p-1",title:"",type:"button",children:a.jsx(Et,{className:"h-4 w-4"})})]})]})},Rne=()=>{var sv;const{user:e}=Ar(),t=Tn(),r=(e==null?void 0:e.name)==="",[n,s]=b.useState(r?"project":"library"),[i,o]=b.useState([]),[l,c]=b.useState([]),[u,d]=b.useState([]),[f,m]=b.useState([]),[y,j]=b.useState(""),[p,k]=b.useState([]),[h,v]=b.useState(null),[S,x]=b.useState(!0),[T,E]=b.useState(null),[_,M]=b.useState({name:"",category:"",brand:"",price:"",grades:[""],imageData:null}),[O,R]=b.useState([]),[K,Q]=b.useState(!1),[ne,Z]=b.useState(!1),[fe,te]=b.useState([]),[xe,ie]=b.useState(""),[V,ge]=b.useState(!1),[G,U]=b.useState(null),[L,Y]=b.useState([]),[ue,ye]=b.useState(null),[Ne,Re]=b.useState(!1),[ee,me]=b.useState(!1),[I,se]=b.useState(1),[ae,X]=b.useState({x:0,y:0}),[we,Ee]=b.useState(!1),[de,C]=b.useState({x:0,y:0}),[w,g]=b.useState(null),[N,D]=b.useState(null),[P,F]=b.useState(!1),[q,A]=b.useState(0),[J,W]=b.useState(null),le=b.useRef(null),Me=b.useRef(null),Ce=b.useRef(null),ze=b.useRef([]),rt=dre(cj(nv),cj(tv,{coordinateGetter:_ne})),Ye=(B,ve)=>{const Ie=B.clientX-ve.clientX,He=B.clientY-ve.clientY;return Math.sqrt(Ie*Ie+He*He)},Qe=(B,ve)=>({x:(B.clientX+ve.clientX)/2,y:(B.clientY+ve.clientY)/2});b.useEffect(()=>{xt(),Ft()},[]),b.useEffect(()=>{dt()},[t]),b.useEffect(()=>{$()},[n,y,h,O]),b.useEffect(()=>{n==="project"&&h&&pr()},[n,h]);const xt=async()=>{try{const B=await Te.get("/specbook/categories");m(B.data)}catch(B){console.error("  :",B)}},dt=async()=>{try{const B=t.map(ve=>({id:ve.id,title:ve.name}));console.log("  :",B.length,"",B),k(B),r&&B.length>0&&!h&&(v(B[0].id),s("project"))}catch(B){console.error("  :",B)}},Ft=async()=>{try{const B=await Te.get("/specbook/library");c(B.data)}catch(B){console.error("    :",B)}},pr=async()=>{if(h)try{const B=await Te.get(`/specbook/project/${h}`);d(B.data)}catch(B){console.error("    :",B)}},$=async()=>{try{x(!0);const B={};y!==""&&(B.category=y),O.length>0&&(B.grades=O.join(","));let ve;if(n==="library")ve=await Te.get("/specbook/library",{params:B});else{if(!h){o([]),x(!1);return}ve=await Te.get(`/specbook/project/${h}`,{params:B})}o(ve.data)}catch(B){console.error("   :",B),H.error("   ")}finally{x(!1)}},oe=B=>n==="library"?B===""?l.length:l.filter(ve=>ve.category===B).length:B===""?u.length:u.filter(ve=>ve.category===B).length,re=B=>{B.preventDefault(),Q(!1);const ve=B.dataTransfer.files[0];if(ve&&ve.type.startsWith("image/")){const Ie=new FileReader;Ie.onload=He=>{var mt;M({..._,imageData:(mt=He.target)==null?void 0:mt.result})},Ie.readAsDataURL(ve)}},je=B=>{var Ie;const ve=(Ie=B.clipboardData)==null?void 0:Ie.items;if(ve){for(let He=0;He<ve.length;He++)if(ve[He].type.indexOf("image")!==-1){const mt=ve[He].getAsFile();if(mt){const vt=new FileReader;vt.onload=cr=>{var Ms;M({..._,imageData:(Ms=cr.target)==null?void 0:Ms.result})},vt.readAsDataURL(mt)}}}};b.useEffect(()=>(document.addEventListener("paste",je),()=>document.removeEventListener("paste",je)),[_]);const ce=B=>{const ve=B.replace(/[^\d]/g,"");return ve?ve.replace(/\B(?=(\d{3})+(?!\d))/g,","):""},ke=B=>{const ve=ce(B.target.value);M({..._,price:ve})},pe=async B=>{var ve,Ie;if(B.preventDefault(),!_.name||!_.category){H.error("  ");return}if(_.grades.length===0){H.error("   ");return}try{const He=_.grades.join(",");if(T){const mt={name:_.name,category:_.category,brand:_.brand,price:_.price,grade:He,description:"",imageData:_.imageData,projectId:n==="project"?h:null,isLibrary:n==="library"};await Te.put(`/specbook/base64/${T.id}`,mt),H.success("  ")}else if(n==="project"&&h){const mt={name:_.name,category:_.category,brand:_.brand,price:_.price,grade:He,description:"",imageData:_.imageData,projectId:null,isLibrary:!0};await Te.post("/specbook/base64",mt);const vt={name:_.name,category:_.category,brand:_.brand,price:_.price,grade:He,description:"",imageData:_.imageData,projectId:h,isLibrary:!1};await Te.post("/specbook/base64",vt),H.success("    ")}else{const mt={name:_.name,category:_.category,brand:_.brand,price:_.price,grade:He,description:"",imageData:_.imageData,projectId:null,isLibrary:!0};await Te.post("/specbook/base64",mt),H.success("  ")}E(null),M({name:"",category:y!==""?y:"",brand:"",price:"",grades:[""],imageData:null}),$(),(n==="library"||n==="project"&&!T)&&Ft(),n==="project"&&h&&pr()}catch(He){console.error("   :",He),H.error(((Ie=(ve=He.response)==null?void 0:ve.data)==null?void 0:Ie.error)||" ")}},Oe=B=>{E(B);const ve=B.grade?B.grade.includes(",")?B.grade.split(","):[B.grade]:[""];M({name:B.name,category:B.category,brand:B.brand,price:B.price,grades:ve,imageData:null}),window.scrollTo({top:0,behavior:"smooth"})},Be=async B=>{if(confirm(" ?"))try{await Te.delete(`/specbook/${B}`),H.success("  "),$(),n==="library"?Ft():n==="project"&&h&&pr()}catch(ve){console.error(" :",ve),H.error(" ")}},Je=()=>{E(null),M({name:"",category:y!==""?y:"",brand:"",price:"",grades:[""],imageData:null})},Ge=B=>{U(B);const ve=B.sub_images||[];Y(ve),ze.current=ve,ge(!0)},gr=B=>{const ve=Array.from(B.target.files||[]);Bt(ve)},Bt=B=>{B.forEach(ve=>{if(ve.type.startsWith("image/")||ve.type==="application/pdf"){const Ie=new FileReader;Ie.onload=He=>{var vt;const mt=(vt=He.target)==null?void 0:vt.result;Y(cr=>[...cr,mt])},Ie.readAsDataURL(ve)}else H.error(`   : ${ve.name}`)})},Kt=B=>{B.preventDefault(),B.stopPropagation(),Re(!1);const ve=Array.from(B.dataTransfer.files);Bt(ve)},Gt=B=>{var He;if(!V)return;const ve=(He=B.clipboardData)==null?void 0:He.items;if(!ve)return;const Ie=[];for(let mt=0;mt<ve.length;mt++)if(ve[mt].type.indexOf("image")!==-1){const vt=ve[mt].getAsFile();vt&&Ie.push(vt)}Ie.length>0&&(Bt(Ie),H.success(`${Ie.length}  `))};b.useEffect(()=>{if(V)return document.addEventListener("paste",Gt),()=>document.removeEventListener("paste",Gt)},[V]),b.useEffect(()=>{if(!(!G||!V||!(JSON.stringify(L)!==JSON.stringify(ze.current))))return Ce.current&&clearTimeout(Ce.current),Ce.current=setTimeout(async()=>{me(!0);try{await Te.put(`/specbook/${G.id}/sub-images`,{sub_images:L}),ze.current=L,$(),n==="library"?Ft():n==="project"&&h&&pr()}catch(ve){console.error("Sub    :",ve),H.error("   ")}finally{me(!1)}},1e3),()=>{Ce.current&&clearTimeout(Ce.current)}},[L,G,V]);const Mr=B=>{Y(ve=>ve.filter((Ie,He)=>He!==B))},qe=()=>{Ce.current&&clearTimeout(Ce.current),ge(!1),U(null),Y([]),me(!1)},ht=async B=>{const{active:ve,over:Ie}=B;if(!Ie||ve.id===Ie.id)return;const He=i.findIndex(vt=>vt.id===ve.id),mt=i.findIndex(vt=>vt.id===Ie.id);if(He!==-1&&mt!==-1){const vt=sm(i,He,mt);o(vt);try{await Te.put("/specbook/reorder",{items:vt.map((cr,Ms)=>({id:cr.id,display_order:Ms}))}),H.success("  ")}catch(cr){console.error("  :",cr),H.error("  "),$()}}},_t=()=>{te([...f]),Z(!0)},wr=()=>{Z(!1),ie("")},nn=async()=>{if(!xe.trim()){H.error("  ");return}if(fe.includes(xe.trim())){H.error("  ");return}const B=[...fe,xe.trim()];te(B),ie("");try{await Te.put("/specbook/categories",{categories:B}),m(B),H.success(" ")}catch(ve){console.error("   :",ve),H.error("   "),te(f)}},Lu=async B=>{if(B===""){H.error("    ");return}const ve=window.prompt("   ",B);if(!ve||!ve.trim()||ve.trim()===B)return;if(fe.includes(ve.trim())){H.error("  ");return}const Ie=fe.map(He=>He===B?ve.trim():He);te(Ie);try{await Te.put("/specbook/categories",{categories:Ie}),m(Ie),H.success("  ")}catch(He){console.error("   :",He),H.error("   "),te(f)}},ss=async B=>{if(B===""){H.error("    ");return}const ve=fe.filter(Ie=>Ie!==B);te(ve);try{await Te.put("/specbook/categories",{categories:ve}),m(ve),H.success(" ")}catch(Ie){console.error("   :",Ie),H.error("   "),te(f)}},$u=async B=>{const{active:ve,over:Ie}=B;if(Ie&&ve.id!==Ie.id){const He=fe.indexOf(ve.id),mt=fe.indexOf(Ie.id),vt=sm(fe,He,mt);te(vt);try{await Te.put("/specbook/categories",{categories:vt}),m(vt),H.success("  ")}catch(cr){console.error("   :",cr),H.error("   "),te(f)}}};return a.jsxs("div",{className:"flex flex-col h-[calc(100vh-120px)] bg-gray-50",onDragOver:B=>{B.preventDefault(),showModal&&Q(!0)},onDragLeave:()=>{showModal&&Q(!1)},onDrop:B=>{showModal&&re(B)},children:[a.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4 md:gap-6 overflow-hidden",children:[a.jsxs("div",{className:"hidden md:flex flex-col gap-4 w-80 lg:w-96 flex-shrink-0",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden flex flex-col",children:a.jsxs("form",{onSubmit:pe,className:"flex flex-col pt-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 px-3",children:[a.jsxs("div",{onDragOver:B=>{B.preventDefault(),Q(!0)},onDragLeave:()=>Q(!1),onDrop:re,className:`w-full sm:w-48 aspect-square flex-shrink-0 border-2 border-dashed rounded-lg flex items-center justify-center cursor-pointer transition-colors ${K?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"}`,onClick:()=>{var B;return(B=le.current)==null?void 0:B.click()},children:[_.imageData||T!=null&&T.image_url?a.jsx("img",{src:_.imageData||(T==null?void 0:T.image_url)||"",alt:"Preview",className:"w-full h-full object-contain rounded-lg"}):a.jsxs("div",{className:"text-center",children:[a.jsx(ks,{className:"w-8 h-8 mx-auto mb-1 text-gray-400"}),a.jsx("p",{className:"text-sm text-gray-500",children:""})]}),a.jsx("input",{ref:le,type:"file",accept:"image/*",onChange:B=>{var Ie;const ve=(Ie=B.target.files)==null?void 0:Ie[0];if(ve){const He=new FileReader;He.onload=mt=>{var vt;M({..._,imageData:(vt=mt.target)==null?void 0:vt.result})},He.readAsDataURL(ve)}},className:"hidden"})]}),a.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("select",{value:_.category,onChange:B=>M({..._,category:B.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",required:!0,children:[a.jsx("option",{value:"",children:""}),f.filter(B=>B!=="").map(B=>a.jsx("option",{value:B,children:B},B))]}),a.jsx("input",{type:"text",value:_.brand,onChange:B=>M({..._,brand:B.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",placeholder:""}),a.jsx("input",{type:"text",value:_.name,onChange:B=>M({..._,name:B.target.value}),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500",placeholder:"",required:!0}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:_.price,onChange:ke,className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500 pr-8",placeholder:""}),a.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:""})]})]}),a.jsx("div",{className:"flex gap-1",children:["","","",""].map((B,ve)=>{const Ie=ve===3?"":B;return a.jsx("button",{type:"button",onClick:()=>{_.grades.includes(Ie)?M({..._,grades:_.grades.filter(He=>He!==Ie)}):M({..._,grades:[..._.grades,Ie]})},className:`flex-1 px-1 py-1 text-xs font-medium rounded transition-colors ${_.grades.includes(Ie)?Ie===""?"bg-violet-500 text-white":Ie===""?"bg-sky-500 text-white":Ie===""?"bg-emerald-500 text-white":"bg-amber-400 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:B},Ie)})}),a.jsxs("div",{className:"flex gap-1.5 mt-3",children:[a.jsx("button",{type:"submit",className:"flex-1 px-3 py-1.5 text-xs bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:T?"":""}),T&&a.jsx("button",{type:"button",onClick:Je,className:"px-3 py-1.5 text-xs bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:""})]})]})]}),a.jsx("div",{className:"p-3 pt-0"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mr-3",children:" "}),a.jsxs("div",{className:"flex gap-2 flex-1",children:[["","","",""].map(B=>a.jsx("button",{onClick:()=>{O.includes(B)?R(O.filter(ve=>ve!==B)):R([...O,B])},className:`px-3 py-1.5 rounded text-xs font-medium transition-colors ${O.includes(B)?B===""?"bg-violet-500 text-white":B===""?"bg-sky-500 text-white":B===""?"bg-emerald-500 text-white":"bg-amber-400 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:B},B)),O.length>0&&a.jsx("button",{onClick:()=>R([]),className:"px-3 py-1.5 rounded text-xs font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:""})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:["",n==="project"&&h&&a.jsxs("span",{className:"ml-1 text-gray-600",children:["(",(sv=p.find(B=>B.id===h))==null?void 0:sv.title,")"]})]}),a.jsx("button",{onClick:_t,className:"p-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors",title:" ",children:a.jsx(uk,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:f.map(B=>{const ve=oe(B),Ie=(n==="library"||n==="project"&&h)&&ve>0;return a.jsxs("button",{onClick:()=>j(B),className:`px-2 py-1.5 rounded text-xs font-medium transition-colors ${y===B?"bg-gray-800 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[B,Ie&&a.jsxs("span",{className:`ml-1 ${y===B?"text-gray-300":"text-gray-400"}`,children:["(",ve,")"]})]},B)})})]})]}),n==="library"?a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden pr-4 pt-3",children:[a.jsx("div",{className:"mb-4 px-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 lg:gap-4",children:[!r&&a.jsx("button",{onClick:()=>{s("library"),v(null)},className:`col-span-1 lg:col-span-1 h-9 rounded-lg font-medium transition-colors text-xs md:text-sm flex items-center justify-center ${n==="library"?"bg-gray-800 text-white":"bg-gray-200 text-gray-700"}`,children:" "}),a.jsxs("select",{value:h||"",onChange:B=>{B.target.value?(s("project"),v(Number(B.target.value))):r||(s("library"),v(null))},className:`col-span-1 lg:col-span-1 ${r?"":"lg:col-start-4"} h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-xs md:text-sm px-1 md:px-2`,children:[!r&&a.jsx("option",{value:"",children:" "}),p.map(B=>a.jsx("option",{value:B.id,children:B.title},B.id))]})]})}),a.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[a.jsx("div",{className:"w-full md:w-1/2 flex flex-col overflow-hidden pb-4 md:pr-3",children:a.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",children:S?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"text-gray-500",children:" ..."})}):i.length===0?a.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:"   "}):a.jsx(_p,{sensors:rt,collisionDetection:Cp,onDragEnd:ht,children:a.jsx(Mp,{items:i.map(B=>B.id),strategy:Pp,children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:i.map(B=>a.jsx(Nj,{item:B,onEdit:Oe,onDelete:Be,onImageClick:Ge},B.id))})})})})}),a.jsx("div",{className:"hidden md:block w-px bg-gray-300 self-stretch"}),a.jsx("div",{className:"hidden md:flex w-1/2 flex-col overflow-hidden pl-3 pb-4",children:a.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",children:a.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"     "})})})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden pr-4 pt-3",children:[a.jsx("div",{className:"mb-4 px-4",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 lg:gap-4",children:[!r&&a.jsx("button",{onClick:()=>{s("library"),v(null)},className:"col-span-1 lg:col-span-1 h-9 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700 text-xs md:text-sm flex items-center justify-center",children:" "}),a.jsxs("select",{value:h||"",onChange:B=>{B.target.value?(s("project"),v(Number(B.target.value))):r||(s("library"),v(null))},className:`col-span-1 lg:col-span-1 ${r?"":"lg:col-start-4"} h-9 border border-gray-300 rounded-lg focus:outline-none bg-white text-xs md:text-sm px-1 md:px-2`,children:[!r&&a.jsx("option",{value:"",children:" "}),p.map(B=>a.jsx("option",{value:B.id,children:B.title},B.id))]})]})}),a.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden gap-4",children:[!r&&a.jsx("div",{className:"hidden md:flex md:w-1/2 flex-col overflow-hidden pb-4 md:pr-3",children:a.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",children:S?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"text-gray-500",children:" ..."})}):l.length===0?a.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-sm",children:"  "}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:l.filter(B=>y===""||B.category===y).map(B=>a.jsxs("div",{draggable:!0,onDragStart:ve=>{ve.dataTransfer.setData("itemId",B.id.toString()),ve.dataTransfer.effectAllowed="copy"},className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all border border-gray-200 overflow-hidden cursor-move flex flex-col",children:[a.jsx("div",{className:"w-full aspect-square bg-gray-100",children:B.image_url?a.jsx("img",{src:B.image_url,alt:B.name,className:"w-full h-full object-contain"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:" "})}),a.jsxs("div",{className:"p-2 pt-1.5 flex flex-col flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-1",children:[a.jsx("span",{className:"inline-block px-1.5 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:B.category}),B.grade&&a.jsx("span",{className:`inline-block px-1.5 py-0.5 text-xs rounded ${PE(B.grade)}`,children:_E(B.grade)})]}),a.jsxs("div",{className:"flex items-baseline justify-between gap-1 mt-auto",children:[a.jsxs("div",{className:"flex items-baseline gap-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-xs text-gray-900 truncate",children:B.name}),B.brand&&a.jsx("span",{className:"text-xs text-gray-600 flex-shrink-0",children:B.brand})]}),B.price&&a.jsxs("span",{className:"text-xs text-gray-900 font-medium flex-shrink-0",children:[B.price,""]})]})]})]},B.id))})})}),!r&&a.jsx("div",{className:"hidden md:block w-px bg-gray-300 self-stretch"}),a.jsx("div",{className:`w-full ${r?"":"md:w-1/2"} flex flex-col overflow-hidden ${r?"":"md:pl-3"} pb-4`,children:a.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded-lg p-4",onDragOver:B=>{B.preventDefault(),B.dataTransfer.dropEffect="copy"},onDrop:async B=>{B.preventDefault();const ve=B.dataTransfer.getData("itemId");if(ve&&h)try{const Ie=l.find(He=>He.id===Number(ve));if(Ie){const{id:He,created_at:mt,updated_at:vt,...cr}=Ie;await Te.post("/specbook/base64",{...cr,isLibrary:!1,projectId:h}),H.success("  "),$(),pr()}}catch(Ie){console.error("  :",Ie),H.error("  ")}},children:S?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"text-gray-500",children:" ..."})}):i.length===0?a.jsx("div",{className:"flex items-center justify-center h-full text-gray-600 text-sm",children:"   "}):a.jsx(_p,{sensors:rt,collisionDetection:Cp,onDragEnd:ht,children:a.jsx(Mp,{items:i.filter(B=>y===""||B.category===y).map(B=>B.id),strategy:Pp,children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:i.filter(B=>y===""||B.category===y).map(B=>a.jsx(Nj,{item:B,onEdit:Oe,onDelete:Be,onImageClick:Ge},B.id))})})})})})]})]})]}),ne&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:" "}),a.jsx("button",{onClick:wr,className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsx(et,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:xe,onChange:B=>ie(B.target.value),onKeyPress:B=>{B.key==="Enter"&&nn()},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:"  "}),a.jsxs("button",{onClick:nn,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors flex items-center gap-1",children:[a.jsx(aa,{className:"h-4 w-4"}),""]})]})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (  )"}),a.jsx("div",{className:"max-h-120 overflow-y-auto border border-gray-200 rounded-lg",children:a.jsx(_p,{sensors:rt,collisionDetection:Cp,onDragEnd:$u,children:a.jsx(Mp,{items:fe,strategy:Pp,children:fe.map(B=>a.jsx(Mne,{category:B,onRemove:ss,onEdit:Lu},B))})})})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:wr,className:"px-6 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 transition-colors",children:""})})]})]})}),V&&G&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:G.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"    Ctrl+V /PDF   "})]}),a.jsx("button",{onClick:qe,className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsx(et,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",onDragOver:B=>{B.preventDefault(),Re(!0)},onDragLeave:B=>{B.preventDefault(),Re(!1)},onDrop:Kt,children:[a.jsx("input",{ref:Me,type:"file",accept:"image/*,application/pdf",multiple:!0,onChange:gr,className:"hidden"}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[G.image_url&&a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-blue-500 cursor-pointer hover:border-blue-600 transition-colors",onClick:()=>ye(G.image_url),children:a.jsx("img",{src:G.image_url,alt:" ",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded",children:""})]}),L.map((B,ve)=>{const Ie=B.startsWith("data:application/pdf");return a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-gray-200 hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>!Ie&&ye(B),children:Ie?a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-red-600",children:[a.jsxs("svg",{className:"h-16 w-16 mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"}),a.jsx("path",{d:"M14 2v6h6M10 12h4M10 16h4"})]}),a.jsx("span",{className:"text-xs font-medium",children:"PDF"})]}):a.jsx("img",{src:B,alt:`  ${ve+1}`,className:"w-full h-full object-contain"})}),a.jsx("button",{onClick:()=>Mr(ve),className:"absolute top-2 right-2 p-1.5 bg-gray-700 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-gray-800",children:a.jsx(Et,{className:"h-4 w-4"})})]},ve)}),a.jsx("div",{onClick:()=>{var B;return(B=Me.current)==null?void 0:B.click()},className:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-gray-400 hover:bg-gray-50 transition-colors",children:a.jsx(aa,{className:"h-12 w-12 text-gray-400"})})]})]}),a.jsx("div",{className:"flex items-center justify-center p-4 border-t border-gray-200 bg-gray-50",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(G.image_url?1:0)+L.length," "]}),ee&&a.jsxs("p",{className:"text-sm text-blue-600 flex items-center gap-2",children:[a.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]})]})})]})}),ue&&a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60] overflow-hidden",onClick:B=>{B.target===B.currentTarget&&(ye(null),se(1),X({x:0,y:0}),g(null),D(null),F(!1))},onWheel:B=>{B.preventDefault();const ve=B.deltaY>0?-.1:.1;se(Ie=>Math.max(.5,Math.min(5,Ie+ve)))},children:[a.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[a.jsx("button",{onClick:()=>{ye(null),se(1),X({x:0,y:0}),g(null),D(null),F(!1)},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",children:a.jsx(et,{className:"h-6 w-6 text-white"})}),a.jsx("button",{onClick:B=>{B.stopPropagation(),se(ve=>Math.min(5,ve+.5))},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:" (+)",children:a.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"})})}),a.jsx("button",{onClick:B=>{B.stopPropagation(),se(ve=>Math.max(.5,ve-.5))},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:" (-)",children:a.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),a.jsx("button",{onClick:B=>{B.stopPropagation(),se(1),X({x:0,y:0})},className:"p-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-full transition-colors",title:"",children:a.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),a.jsxs("div",{className:"absolute top-4 left-4 bg-white bg-opacity-10 text-white px-3 py-2 rounded-lg text-sm",children:[Math.round(I*100),"%"]}),a.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",onMouseDown:B=>{I>1&&(Ee(!0),C({x:B.clientX-ae.x,y:B.clientY-ae.y}))},onMouseMove:B=>{we&&I>1&&X({x:B.clientX-de.x,y:B.clientY-de.y})},onMouseUp:()=>Ee(!1),onMouseLeave:()=>Ee(!1),onTouchStart:B=>{if(B.touches.length===2){B.preventDefault(),F(!0);const ve=Ye(B.touches[0],B.touches[1]),Ie=Qe(B.touches[0],B.touches[1]);g(ve),D(Ie)}else if(B.touches.length===1&&I>1&&!P){const ve=B.touches[0];C({x:ve.clientX-ae.x,y:ve.clientY-ae.y})}},onTouchMove:B=>{if(B.touches.length===2){B.preventDefault(),F(!0);const ve=Ye(B.touches[0],B.touches[1]),Ie=Qe(B.touches[0],B.touches[1]);if(w&&N){const He=ve/w,mt=Math.max(.5,Math.min(5,I*He)),vt=Ie.x-N.x,cr=Ie.y-N.y,Ms=mt/I,Nh=ae.x*Ms+vt,ME=ae.y*Ms+cr;se(mt),X({x:Nh,y:ME})}g(ve),D(Ie)}else if(B.touches.length===1&&I>1&&!P){B.preventDefault();const ve=B.touches[0];X({x:ve.clientX-de.x,y:ve.clientY-de.y})}},onTouchEnd:B=>{if(B.touches.length===0){const ve=Date.now(),Ie=B.changedTouches[0],He={x:Ie.clientX,y:Ie.clientY};if(ve-q<300&&J&&Math.abs(He.x-J.x)<30&&Math.abs(He.y-J.y)<30&&!P){if(I===1){const cr=B.currentTarget.getBoundingClientRect(),Ms=He.x-cr.left-cr.width/2,Nh=He.y-cr.top-cr.height/2;se(2.5),X({x:-Ms*1.5,y:-Nh*1.5})}else se(1),X({x:0,y:0});A(0),W(null)}else A(ve),W(He);g(null),D(null),F(!1)}else if(B.touches.length===1&&P){g(null),D(null),F(!1);const ve=B.touches[0];C({x:ve.clientX-ae.x,y:ve.clientY-ae.y})}},onDoubleClick:B=>{B.stopPropagation();const ve=B.currentTarget.getBoundingClientRect(),Ie=B.clientX-ve.left-ve.width/2,He=B.clientY-ve.top-ve.height/2;I===1?(se(2.5),X({x:-Ie*1.5,y:-He*1.5})):(se(1),X({x:0,y:0}))},children:a.jsx("img",{src:ue,alt:" ",style:{transform:`scale(${I}) translate(${ae.x/I}px, ${ae.y/I}px)`,transformOrigin:"center center",transition:we||w!==null?"none":"transform 0.25s cubic-bezier(0.2, 0, 0, 1)",maxWidth:"100%",maxHeight:"100%",objectFit:"contain",cursor:I>1?we?"grabbing":"grab":"pointer",userSelect:"none",touchAction:"none"},draggable:!1})}),a.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-white bg-opacity-10 text-white px-4 py-2 rounded-lg text-xs text-center",children:"     / |   |  2 /"})]})]})},One=()=>{var Z,fe,te,xe,ie,V,ge,G,U,L,Y,ue,ye,Ne,Re,ee,me,I,se,ae,X,we,Ee,de,C,w,g,N,D,P,F,q;const{user:e}=Ar();if(!e||e.role!=="admin"&&e.role!=="manager")return a.jsx(Sm,{to:"/dashboard",replace:!0});const[t,r]=b.useState({projectName:"",clientName:"",areaSize:0,residenceType:[],grade:[],finishType:"",bathroomCount:[],ceilingHeight:[],expansionWork:[],livingRoomExpansion:!1,roomExpansion:!1,roomExpansionCount:0,kitchenExpansion:!1,floorMaterial:[],wallMaterial:[],ceilingMaterial:[],furnitureWork:[],furnitureHardwareGrade:[],kitchenCountertop:[],switchPublic:[],switchRoom:[],lightingType:[],indirectLightingPublic:[],indirectLightingRoom:[],bathroomCeiling:[],bathroomTileGrade:[],bathroomFaucet:[],bathroomTile:[],bathroomGrout:[],moldingPublic:[],moldingRoom:[],includeSash:!1,includeGrooving:!1,includeBangtong:!1,includeAircon:!1,airconCount:1,airconType:[]}),[n,s]=b.useState(null),[i,o]=b.useState(!1),[l,c]=b.useState([]),[u,d]=b.useState("form"),[f,m]=b.useState(null),[y,j]=b.useState({floor:{},wall:{},furniture:{},countertop:{},switch:{},lighting:{},indirectLighting:{},molding:{},bathroom:{ceiling:{},faucet:{},tile:{},grout:{}},expansion:{}});b.useEffect(()=>{p(),k()},[]),b.useEffect(()=>{if(!t.areaSize||t.areaSize<=0||t.grade.length===0){s(null);return}const A=setTimeout(()=>{_()},500);return()=>clearTimeout(A)},[t]),b.useEffect(()=>{if(!y.floor||Object.keys(y.floor).length===0)return;const A=setTimeout(()=>{h()},500);return()=>clearTimeout(A)},[y]);const p=async()=>{try{const A=await Te.get("/estimate-preview/list");c(A.data)}catch(A){console.error("   :",A)}},k=async()=>{try{const A=await Te.get("/estimate-preview/settings/prices");A.data&&A.data.settings&&Object.keys(A.data.settings).length>0&&j(A.data.settings)}catch(A){console.error("   :",A)}},h=async()=>{try{await Te.post("/estimate-preview/settings/prices",{settings:y})}catch(A){console.error("   :",A)}},v=(A,J,W,le)=>{j(Me=>{const Ce={...Me};return Ce[A]||(Ce[A]={}),Ce[A][J]||(Ce[A][J]={min:"",max:""}),Ce[A][J][W]=le,Ce})},S=(A,J,W,le)=>{j(Me=>{const Ce={...Me};return Ce.bathroom[A]||(Ce.bathroom[A]={}),Ce.bathroom[A][J]||(Ce.bathroom[A][J]={min:"",max:""}),Ce.bathroom[A][J][W]=le,Ce})},x=A=>{const{name:J,value:W,type:le}=A.target;if(le==="checkbox"){const Me=A.target.checked;r(Ce=>({...Ce,[J]:Me}))}else r(J==="areaSize"||J==="bathroomCount"||J==="airconCount"||J==="roomExpansionCount"?Me=>({...Me,[J]:Number(W)||0}):Me=>({...Me,[J]:W}))},T=(A,J)=>{const W=t[A];if(Array.isArray(W)){const le=W.includes(J)?W.filter(Me=>Me!==J):[...W,J];r(Me=>({...Me,[A]:le}))}},E=async()=>{if(!t.projectName){H.error(" ");return}if(!t.areaSize||t.areaSize<=0){H.error("  ");return}if(t.grade.length===0){H.error(" ");return}o(!0);try{const A={...t,residenceType:JSON.stringify(t.residenceType),grade:JSON.stringify(t.grade),bathroomCount:JSON.stringify(t.bathroomCount),ceilingHeight:JSON.stringify(t.ceilingHeight),expansionWork:JSON.stringify(t.expansionWork),floorMaterial:JSON.stringify(t.floorMaterial),wallMaterial:JSON.stringify(t.wallMaterial),ceilingMaterial:JSON.stringify(t.ceilingMaterial),furnitureWork:JSON.stringify(t.furnitureWork),furnitureHardwareGrade:JSON.stringify(t.furnitureHardwareGrade),kitchenCountertop:JSON.stringify(t.kitchenCountertop),switchPublic:JSON.stringify(t.switchPublic),switchRoom:JSON.stringify(t.switchRoom),lightingType:JSON.stringify(t.lightingType),indirectLightingPublic:JSON.stringify(t.indirectLightingPublic),indirectLightingRoom:JSON.stringify(t.indirectLightingRoom),bathroomCeiling:JSON.stringify(t.bathroomCeiling),bathroomTileGrade:JSON.stringify(t.bathroomTileGrade),bathroomFaucet:JSON.stringify(t.bathroomFaucet),bathroomTile:JSON.stringify(t.bathroomTile),bathroomGrout:JSON.stringify(t.bathroomGrout),moldingPublic:JSON.stringify(t.moldingPublic),moldingRoom:JSON.stringify(t.moldingRoom)},J=await Te.post("/estimate-preview/create",A);s(J.data),H.success(" "),p()}catch(A){console.error("  :",A),H.error("  ")}finally{o(!1)}},_=async()=>{o(!0);try{const A={...t,projectName:t.projectName||"",clientName:t.clientName||"",residenceType:JSON.stringify(t.residenceType),grade:JSON.stringify(t.grade),bathroomCount:JSON.stringify(t.bathroomCount),ceilingHeight:JSON.stringify(t.ceilingHeight),expansionWork:JSON.stringify(t.expansionWork),floorMaterial:JSON.stringify(t.floorMaterial),wallMaterial:JSON.stringify(t.wallMaterial),ceilingMaterial:JSON.stringify(t.ceilingMaterial),furnitureWork:JSON.stringify(t.furnitureWork),furnitureHardwareGrade:JSON.stringify(t.furnitureHardwareGrade),kitchenCountertop:JSON.stringify(t.kitchenCountertop),switchPublic:JSON.stringify(t.switchPublic),switchRoom:JSON.stringify(t.switchRoom),lightingType:JSON.stringify(t.lightingType),indirectLightingPublic:JSON.stringify(t.indirectLightingPublic),indirectLightingRoom:JSON.stringify(t.indirectLightingRoom),bathroomCeiling:JSON.stringify(t.bathroomCeiling),bathroomTileGrade:JSON.stringify(t.bathroomTileGrade),bathroomFaucet:JSON.stringify(t.bathroomFaucet),bathroomTile:JSON.stringify(t.bathroomTile),bathroomGrout:JSON.stringify(t.bathroomGrout),moldingPublic:JSON.stringify(t.moldingPublic),moldingRoom:JSON.stringify(t.moldingRoom)},J=await Te.post("/estimate-preview/calculate",A);s(J.data)}catch(A){console.error("   :",A),s(null)}finally{o(!1)}},M=async A=>{try{const W=(await Te.get(`/estimate-preview/${A}`)).data;r({projectName:W.project_name,clientName:W.client_name,areaSize:W.area_size,residenceType:W.residence_type?JSON.parse(W.residence_type):[],grade:W.grade,finishType:W.finish_type||"",bathroomCount:W.bathroom_count?JSON.parse(W.bathroom_count):[],ceilingHeight:W.ceiling_height?JSON.parse(W.ceiling_height):[],includeSash:W.include_sash===1,includeGrooving:W.include_grooving===1,includeBangtong:W.include_bangtong===1,includeAircon:W.include_aircon===1,airconCount:W.aircon_count||1,airconType:W.aircon_type?JSON.parse(W.aircon_type):[],floorMaterial:W.floor_material?JSON.parse(W.floor_material):[],wallMaterial:W.wall_material?JSON.parse(W.wall_material):[],ceilingMaterial:W.ceiling_material?JSON.parse(W.ceiling_material):[],furnitureWork:W.furniture_work?JSON.parse(W.furniture_work):[],furnitureHardwareGrade:W.furniture_hardware_grade?JSON.parse(W.furniture_hardware_grade):[],kitchenCountertop:W.kitchen_countertop?JSON.parse(W.kitchen_countertop):[],switchPublic:W.switch_public?JSON.parse(W.switch_public):[],switchRoom:W.switch_room?JSON.parse(W.switch_room):[],lightingType:W.lighting_type?JSON.parse(W.lighting_type):[],indirectLightingPublic:W.indirect_lighting_public?JSON.parse(W.indirect_lighting_public):[],indirectLightingRoom:W.indirect_lighting_room?JSON.parse(W.indirect_lighting_room):[],bathroomCeiling:W.bathroom_ceiling?JSON.parse(W.bathroom_ceiling):[],bathroomTileGrade:W.bathroom_tile_grade?JSON.parse(W.bathroom_tile_grade):[],bathroomFaucet:W.bathroom_faucet?JSON.parse(W.bathroom_faucet):[],bathroomTile:W.bathroom_tile?JSON.parse(W.bathroom_tile):[],bathroomGrout:W.bathroom_grout?JSON.parse(W.bathroom_grout):[],moldingPublic:W.molding_public?JSON.parse(W.molding_public):[],moldingRoom:W.molding_room?JSON.parse(W.molding_room):[]}),s({baseConstructionCost:W.base_construction_cost,fixtureCost:W.fixture_cost,sashCost:W.sash_cost,heatingCost:W.heating_cost,airconCost:W.aircon_cost,totalMinCost:W.total_min_cost,totalMaxCost:W.total_max_cost,detailBreakdown:W.detail_breakdown}),m(W),d("form"),H.success(" ")}catch(J){console.error("  :",J),H.error("  ")}},O=async A=>{if(window.confirm("  ?"))try{await Te.delete(`/estimate-preview/${A}`),H.success(" "),p()}catch(J){console.error("  :",J),H.error("  ")}},R=A=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(A),K=()=>{r({projectName:"",clientName:"",areaSize:0,residenceType:[],grade:[],finishType:"",bathroomCount:[],ceilingHeight:[],includeSash:!1,includeGrooving:!1,includeBangtong:!1,includeAircon:!1,airconCount:1,airconType:[],livingRoomExpansion:!1,roomExpansion:!1,roomExpansionCount:0,kitchenExpansion:!1,floorMaterial:[],wallMaterial:[],ceilingMaterial:[],furnitureWork:[],furnitureHardwareGrade:[],kitchenCountertop:[],switchPublic:[],switchRoom:[],lightingType:[],indirectLightingPublic:[],indirectLightingRoom:[],bathroomCeiling:[],bathroomTileGrade:[],bathroomFaucet:[],bathroomTile:[],bathroomGrout:[],moldingPublic:[],moldingRoom:[]}),s(null),m(null)},Q=()=>{H.info("PDF    ")},ne={total:l.length,thisMonth:l.filter(A=>{const J=new Date(A.created_at),W=new Date;return J.getMonth()===W.getMonth()&&J.getFullYear()===W.getFullYear()}).length};return a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"border-b border-gray-200 flex items-center justify-between",children:[a.jsx("nav",{className:"flex space-x-4 md:space-x-8",children:[{id:"form",label:" "},{id:"history",label:" ",count:ne.total,icon:lk},{id:"settings",label:" ",icon:uk}].map(A=>a.jsxs("button",{onClick:()=>d(A.id),className:Fr("py-3 md:py-4 px-1 border-b-2 font-medium text-xs md:text-sm transition-colors whitespace-nowrap flex items-center gap-2",u===A.id?"border-gray-700 text-gray-700":"border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),children:[A.icon&&a.jsx(A.icon,{className:"h-4 w-4"}),A.label,A.count!==void 0&&A.count>0&&a.jsx("span",{className:Fr("ml-1 py-0.5 px-1.5 rounded-full text-[10px] md:text-xs font-semibold",u===A.id?"bg-gray-700 text-white":"bg-gray-200 text-gray-600"),children:A.count})]},A.id))}),a.jsxs("button",{onClick:K,className:"px-3 md:px-4 py-2 bg-gray-700 text-white text-xs md:text-sm rounded hover:bg-gray-800 transition-colors flex items-center gap-2",children:[a.jsx(aa,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:" "})]})]}),u==="form"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-1 xl:grid-cols-2 gap-4 md:gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 md:p-6",children:[a.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-800 mb-4",children:"  "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg md:col-span-2",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2 pb-1 border-b border-gray-200",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"projectName",value:t.projectName,onChange:x,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:":  "})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"areaSize",value:t.areaSize||"",onChange:x,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400",placeholder:": 25",min:"1"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),a.jsx("div",{className:"grid grid-cols-2 md:flex md:flex-wrap gap-2",children:["","","","",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.residenceType.includes(A),onChange:()=>T("residenceType",A),className:"mr-1 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:[" ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-2 md:flex gap-2 md:gap-3",children:["","","",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.grade.includes(A),onChange:()=>T("grade",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2 pb-1 border-b border-gray-200",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"grid grid-cols-2 md:flex gap-2 md:gap-4",children:["","","",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.floorMaterial.includes(A),onChange:()=>T("floorMaterial",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))}),a.jsx("div",{className:"grid grid-cols-2 md:flex gap-2 md:gap-4",children:["600 ","800-900 ","1200 "].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.floorMaterial.includes(A),onChange:()=>T("floorMaterial",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" / "}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["","()","()","()","","","",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.wallMaterial.includes(A),onChange:()=>T("wallMaterial",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))}),a.jsx("div",{className:"grid grid-cols-1",children:a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.wallMaterial.includes("()+()"),onChange:()=>T("wallMaterial","()+()"),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:"()+()"})]})})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2 pb-1 border-b border-gray-200",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),a.jsx("div",{className:"flex gap-2 md:gap-3",children:["0","1","2","3","4"].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomCount.includes(A),onChange:()=>T("bathroomCount",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:""}),a.jsx("div",{className:"flex gap-2 md:gap-3",children:["2400","2400~2600","2600"].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.ceilingHeight.includes(A),onChange:()=>T("ceilingHeight",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]})]}),a.jsxs("div",{className:"pt-2",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:flex gap-2 md:gap-4 md:flex-wrap",children:[a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",name:"livingRoomExpansion",checked:t.livingRoomExpansion,onChange:x,className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:" "})]}),a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",name:"kitchenExpansion",checked:t.kitchenExpansion,onChange:x,className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:" "})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",name:"roomExpansion",checked:t.roomExpansion,onChange:x,className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:" "})]}),t.roomExpansion&&a.jsxs("select",{name:"roomExpansionCount",value:t.roomExpansionCount,onChange:x,className:"ml-2 px-2 py-1 text-xs md:text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-400",children:[a.jsx("option",{value:0,children:""}),a.jsx("option",{value:1,children:"1"}),a.jsx("option",{value:2,children:"2"}),a.jsx("option",{value:3,children:"3"}),a.jsx("option",{value:4,children:"4"})]})]})]})]}),a.jsxs("div",{className:"pt-2",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" "}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",name:"includeSash",checked:t.includeSash,onChange:x,className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:" "})]}),a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",name:"includeGrooving",checked:t.includeGrooving,onChange:x,className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:"(+)"})]}),a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",name:"includeBangtong",checked:t.includeBangtong,onChange:x,className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:"(++)"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",name:"includeAircon",checked:t.includeAircon,onChange:x,className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:" "})]}),t.includeAircon&&a.jsx("select",{name:"airconCount",value:t.airconCount,onChange:x,className:"px-2 py-1 text-xs md:text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-400",children:[1,2,3,4,5,6,7,8,9,10].map(A=>a.jsxs("option",{value:A,children:[A,""]},A))})]}),t.includeAircon&&a.jsx("div",{className:"ml-0 md:ml-6 mt-2 flex gap-2 md:gap-3",children:["2 in 1"," "].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.airconType.includes(A),onChange:()=>T("airconType",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2 pb-1 border-b border-gray-200",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"  "}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.furnitureWork.includes(""),onChange:()=>T("furnitureWork",""),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:""})]}),a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.furnitureWork.includes(""),onChange:()=>T("furnitureWork",""),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:""})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.furnitureHardwareGrade.includes(" BLUM()"),onChange:()=>T("furnitureHardwareGrade"," BLUM()"),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:" BLUM()"})]}),a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.furnitureHardwareGrade.includes("()+()"),onChange:()=>T("furnitureHardwareGrade","()+()"),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:"()+()"})]})]}),a.jsx("div",{className:"grid grid-cols-1",children:a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.furnitureHardwareGrade.includes(" BLUM()+()"),onChange:()=>T("furnitureHardwareGrade"," BLUM()+()"),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:" BLUM()+()"})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["","","","",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.kitchenCountertop.includes(A),onChange:()=>T("kitchenCountertop",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2 pb-1 border-b border-gray-200",children:"/"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"/ ()"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:["()","()"," "," "].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.switchPublic.includes(A),onChange:()=>T("switchPublic",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 whitespace-nowrap",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"/ ()"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:["()","()"," "," "].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.switchRoom.includes(A),onChange:()=>T("switchRoom",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 whitespace-nowrap",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"grid grid-cols-2 gap-2",children:["",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.lightingType.includes(A),onChange:()=>T("lightingType",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:["()","()"].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.lightingType.includes(A),onChange:()=>T("lightingType",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.lightingType.includes("()"),onChange:()=>T("lightingType","()"),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:"()"})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" ()"}),a.jsx("div",{className:"flex gap-3",children:["LED","T3 "].map(A=>a.jsxs("label",{className:"flex items-center text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.indirectLightingPublic.includes(A),onChange:()=>T("indirectLightingPublic",A),className:"mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" ()"}),a.jsx("div",{className:"flex gap-3",children:["LED","T3 "].map(A=>a.jsxs("label",{className:"flex items-center text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.indirectLightingRoom.includes(A),onChange:()=>T("indirectLightingRoom",A),className:"mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2 pb-1 border-b border-gray-200",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" ()"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:["+","+","+","+"].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.moldingPublic.includes(A),onChange:()=>T("moldingPublic",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" ()"}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:["+","+","+","+"].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.moldingRoom.includes(A),onChange:()=>T("moldingRoom",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:A})]},A))})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-2 pb-1 border-b border-gray-200",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),a.jsx("div",{className:"grid grid-cols-2 md:flex gap-2 md:gap-3",children:["SMC","",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomCeiling.includes(A),onChange:()=>T("bathroomCeiling",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),a.jsx("div",{className:"grid grid-cols-2 md:flex gap-2 md:gap-3",children:["",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomFaucet.includes(A),onChange:()=>T("bathroomFaucet",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),a.jsx("div",{className:"grid grid-cols-2 md:flex gap-2 md:gap-3",children:["()","()","()"].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomTileGrade.includes(A),onChange:()=>T("bathroomTileGrade",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:" "}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"grid grid-cols-2 gap-2",children:["600()","600()","750x1500",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomTile.includes(A),onChange:()=>T("bathroomTile",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:["300x600()+300()","600x1200 or 800()"].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomTile.includes(A),onChange:()=>T("bathroomTile",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:A})]},A))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:""}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"grid grid-cols-1",children:a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomGrout.includes("( )"),onChange:()=>T("bathroomGrout","( )"),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:"( )"})]})}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:["()",""].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm whitespace-nowrap",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomGrout.includes(A),onChange:()=>T("bathroomGrout",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700",children:A})]},A))}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:["FG8(  )","FG4( )"].map(A=>a.jsxs("label",{className:"flex items-center text-xs md:text-sm",children:[a.jsx("input",{type:"checkbox",checked:t.bathroomGrout.includes(A),onChange:()=>T("bathroomGrout",A),className:"mr-1.5 md:mr-2 rounded border-gray-300 text-gray-600 focus:ring-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 break-keep",children:A})]},A))})]})]})]})]}),a.jsx("button",{onClick:E,disabled:i,className:"md:col-span-2 w-full py-3 bg-gray-700 text-white rounded hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base transition-colors",children:i?" ...":" "})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 md:p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-800",children:" "}),n&&a.jsxs("button",{onClick:Q,className:"px-3 py-1.5 border border-gray-300 text-gray-700 rounded hover:bg-gray-50 flex items-center gap-1 text-xs md:text-sm transition-colors",children:[a.jsx(C4,{className:"h-3 w-3 md:h-4 md:w-4"}),"PDF"]})]}),n?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-2",children:"  "}),a.jsxs("p",{className:"text-xl md:text-2xl font-bold text-gray-900",children:[R(n.totalMinCost)," ~ ",R(n.totalMaxCost)]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"(15% )"})]})}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs md:text-sm font-medium text-gray-700",children:""}),a.jsx("th",{className:"px-4 py-2 text-right text-xs md:text-sm font-medium text-gray-700",children:""})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-200",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.baseConstructionCost)})]}),a.jsxs("tr",{children:[a.jsxs("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:[" (",t.grade,")"]}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.fixtureCost)})]}),((fe=(Z=n.detailBreakdown)==null?void 0:Z.itemDetails)==null?void 0:fe.floor)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:""}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.floor)})]}),((xe=(te=n.detailBreakdown)==null?void 0:te.itemDetails)==null?void 0:xe.wall)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:""}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.wall)})]}),((V=(ie=n.detailBreakdown)==null?void 0:ie.itemDetails)==null?void 0:V.ceiling)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:""}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.ceiling)})]}),((G=(ge=n.detailBreakdown)==null?void 0:ge.itemDetails)==null?void 0:G.furniture)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.furniture)})]}),((L=(U=n.detailBreakdown)==null?void 0:U.itemDetails)==null?void 0:L.countertop)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.countertop)})]}),((ue=(Y=n.detailBreakdown)==null?void 0:Y.itemDetails)==null?void 0:ue.switchPublic)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:"/ ()"}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.switchPublic)})]}),((Ne=(ye=n.detailBreakdown)==null?void 0:ye.itemDetails)==null?void 0:Ne.switchRoom)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:"/ ()"}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.switchRoom)})]}),((ee=(Re=n.detailBreakdown)==null?void 0:Re.itemDetails)==null?void 0:ee.lighting)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:""}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.lighting)})]}),((I=(me=n.detailBreakdown)==null?void 0:me.itemDetails)==null?void 0:I.indirectPublic)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" ()"}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.indirectPublic)})]}),((ae=(se=n.detailBreakdown)==null?void 0:se.itemDetails)==null?void 0:ae.indirectRoom)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" ()"}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.indirectRoom)})]}),((we=(X=n.detailBreakdown)==null?void 0:X.itemDetails)==null?void 0:we.moldingPublic)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" ()"}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.moldingPublic)})]}),((de=(Ee=n.detailBreakdown)==null?void 0:Ee.itemDetails)==null?void 0:de.moldingRoom)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" ()"}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.moldingRoom)})]}),((w=(C=n.detailBreakdown)==null?void 0:C.itemDetails)==null?void 0:w.bathroomCeiling)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.bathroomCeiling)})]}),((N=(g=n.detailBreakdown)==null?void 0:g.itemDetails)==null?void 0:N.bathroomFaucet)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.bathroomFaucet)})]}),((P=(D=n.detailBreakdown)==null?void 0:D.itemDetails)==null?void 0:P.bathroomTile)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.bathroomTile)})]}),((q=(F=n.detailBreakdown)==null?void 0:F.itemDetails)==null?void 0:q.bathroomGrout)>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.detailBreakdown.itemDetails.bathroomGrout)})]}),n.sashCost>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.sashCost)})]}),n.heatingCost>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:""}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.heatingCost)})]}),n.airconCost>0&&a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900",children:" "}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm text-gray-900 text-right font-medium",children:R(n.airconCost)})]})]}),a.jsx("tfoot",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm font-semibold text-gray-900",children:""}),a.jsx("td",{className:"px-4 py-2 text-xs md:text-sm font-bold text-gray-900 text-right",children:R(n.baseConstructionCost+n.fixtureCost+(n.settingsBasedCost||0)+n.sashCost+n.heatingCost+n.airconCost)})]})})]})}),a.jsx("div",{className:"text-xs md:text-sm text-gray-500 text-center mt-4",children:"*        ."})]}):a.jsxs("div",{className:"text-center py-12 text-gray-400",children:[a.jsx(T4,{className:"h-10 w-10 md:h-12 md:w-12 mx-auto mb-3"}),a.jsx("p",{className:"text-sm md:text-base",children:"     "})]})]})]}),u==="history"&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsx("div",{className:"p-4 md:p-6 border-b border-gray-200",children:a.jsxs("h2",{className:"text-base md:text-lg font-semibold text-gray-800",children:["  (",ne.total,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-4 md:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-4 md:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" "}),a.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),a.jsx("th",{className:"px-4 md:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(A=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.project_name}),a.jsxs("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-center",children:[A.area_size,""]}),a.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-center",children:a.jsx("span",{className:Fr("inline-flex px-2 py-1 text-xs font-medium rounded border",A.grade===""&&"bg-gray-50 text-gray-700 border-gray-300",A.grade===""&&"bg-gray-100 text-gray-800 border-gray-400",A.grade===""&&"bg-gray-200 text-gray-900 border-gray-500",A.grade===""&&"bg-gray-800 text-white border-gray-800"),children:A.grade})}),a.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:R(A.total_min_cost)}),a.jsxs("div",{className:"text-xs text-gray-500",children:["~ ",R(A.total_max_cost)]})]})}),a.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:new Date(A.created_at).toLocaleDateString("ko-KR")}),a.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap text-sm text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>M(A.id),className:"text-gray-600 hover:text-gray-900 transition-colors",title:"",children:a.jsx(E4,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>O(A.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"",children:a.jsx(Et,{className:"h-4 w-4"})})]})})]},A.id))})]})})]}),u==="settings"&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 md:p-6",children:[a.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-800 mb-6",children:"   "}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:[a.jsx("strong",{children:" :"}),"   ~   .        ."]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 border-b pb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:" ()"}),a.jsx("div",{className:"space-y-3",children:["","","","","600 ","800-900 ","1200 "].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.floor[A])==null?void 0:J.min)||"",onChange:le=>v("floor",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.floor[A])==null?void 0:W.max)||"",onChange:le=>v("floor",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:"/ ()"}),a.jsx("div",{className:"space-y-3",children:["","()","()","()","","","","","()+()"].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.wall[A])==null?void 0:J.min)||"",onChange:le=>v("wall",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.wall[A])==null?void 0:W.max)||"",onChange:le=>v("wall",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:" "}),a.jsxs("div",{className:"space-y-3",children:[["",""].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["(",A,")"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.furniture[`(${A})`])==null?void 0:J.min)||"",onChange:le=>v("furniture",`(${A})`,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.furniture[`(${A})`])==null?void 0:W.max)||"",onChange:le=>v("furniture",`(${A})`,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)}),[" BLUM()","()+()"," BLUM()+()"].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.furniture[A])==null?void 0:J.min)||"",onChange:le=>v("furniture",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.furniture[A])==null?void 0:W.max)||"",onChange:le=>v("furniture",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:" "}),a.jsx("div",{className:"space-y-3",children:["","","","",""].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.countertop[A])==null?void 0:J.min)||"",onChange:le=>v("countertop",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.countertop[A])==null?void 0:W.max)||"",onChange:le=>v("countertop",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:"/ ()"}),a.jsx("div",{className:"space-y-3",children:["()","()"," "," "].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.switch[A])==null?void 0:J.min)||"",onChange:le=>v("switch",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.switch[A])==null?void 0:W.max)||"",onChange:le=>v("switch",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 border-b pb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:" ()"}),a.jsx("div",{className:"space-y-3",children:["","","()","()","()"].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.lighting[A])==null?void 0:J.min)||"",onChange:le=>v("lighting",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.lighting[A])==null?void 0:W.max)||"",onChange:le=>v("lighting",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:" ()"}),a.jsx("div",{className:"space-y-3",children:["LED","T3 "].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.indirectLighting[A])==null?void 0:J.min)||"",onChange:le=>v("indirectLighting",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.indirectLighting[A])==null?void 0:W.max)||"",onChange:le=>v("indirectLighting",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:" ()"}),a.jsx("div",{className:"space-y-3",children:["+","+","+","+"].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.molding[A])==null?void 0:J.min)||"",onChange:le=>v("molding",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.molding[A])==null?void 0:W.max)||"",onChange:le=>v("molding",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsx("div",{})," ",a.jsx("div",{})," "]}),a.jsxs("div",{className:"border-b pb-6",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:""}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:""}),a.jsx("div",{className:"space-y-3",children:["SMC","",""].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.bathroom.ceiling[A])==null?void 0:J.min)||"",onChange:le=>S("ceiling",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.bathroom.ceiling[A])==null?void 0:W.max)||"",onChange:le=>S("ceiling",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:""}),a.jsx("div",{className:"space-y-3",children:["",""].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.bathroom.faucet[A])==null?void 0:J.min)||"",onChange:le=>S("faucet",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.bathroom.faucet[A])==null?void 0:W.max)||"",onChange:le=>S("faucet",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:" "}),a.jsx("div",{className:"space-y-3",children:["()","()","()"].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.bathroom.tile[A])==null?void 0:J.min)||"",onChange:le=>S("tile",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.bathroom.tile[A])==null?void 0:W.max)||"",onChange:le=>S("tile",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:" "}),a.jsx("div",{className:"space-y-3",children:["600()","600()","750x1500","","300x600()+300()","600x1200 or 800()"].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.bathroom.tile[A])==null?void 0:J.min)||"",onChange:le=>S("tile",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.bathroom.tile[A])==null?void 0:W.max)||"",onChange:le=>S("tile",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-3",children:""}),a.jsx("div",{className:"space-y-3",children:["( )","()",""].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.bathroom.grout[A])==null?void 0:J.min)||"",onChange:le=>S("grout",A,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.bathroom.grout[A])==null?void 0:W.max)||"",onChange:le=>S("grout",A,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A)})})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:"   "}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-x-6 gap-y-3",children:[{label:"  ()",key:"livingRoom"},{label:"  ()",key:"kitchen"},{label:"  ()",key:"room"},{label:"  ()",key:"sash"},{label:"  ()",key:"grooving"},{label:"  ()",key:"bangtong"},{label:" (2 in 1) - 1",key:"aircon2in1"},{label:" () - 1",key:"airconSystem"}].map(A=>{var J,W;return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:A.label}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",placeholder:"",value:((J=y.expansion[A.key])==null?void 0:J.min)||"",onChange:le=>v("expansion",A.key,"min",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"~"}),a.jsx("input",{type:"number",placeholder:"",value:((W=y.expansion[A.key])==null?void 0:W.max)||"",onChange:le=>v("expansion",A.key,"max",le.target.value),className:"flex-1 px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"})]})]},A.key)})})]})]})]})]})},jj=["","","/","","","","","","","","","","","","",""],Ine=()=>{const{payments:e,executionRecords:t,loadPaymentsFromAPI:r,addExecutionRecord:n,deleteExecutionRecord:s,updateExecutionRecord:i}=Ts(),{user:o}=Ar(),l=Tn();if(!o)return a.jsx(Sm,{to:"/login",replace:!0});const[c,u]=b.useState(""),[d,f]=b.useState(null),[m,y]=b.useState(!1),[j,p]=b.useState(!1),[k,h]=b.useState(!1),[v,S]=b.useState(!1),[x,T]=b.useState(!1),[E,_]=b.useState(""),[M,O]=b.useState("form"),[R,K]=b.useState(!1),[Q,ne]=b.useState(!1),Z=b.useRef(null),[fe,te]=b.useState([]),[xe,ie]=b.useState(()=>{const w=localStorage.getItem("paymentRecordImages");return w?JSON.parse(w):{}}),[V,ge]=b.useState(()=>{const w=localStorage.getItem("hiddenPaymentIds");return w?JSON.parse(w):[]}),G=()=>{const w=localStorage.getItem("lastSelectedProject"),g=l.filter(N=>N.status!=="completed");return w&&g.some(N=>N.name===w)?w:g.length>0?g[0].name:""},[U,L]=b.useState({project:"",date:Se(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",images:[]});b.useEffect(()=>{r().catch(g=>{console.error("Failed to load payments:",g)});const w=()=>{K(window.innerWidth<768)};if(w(),window.addEventListener("resize",w),l.length>0&&!U.project){const g=G();g&&(L(N=>({...N,project:g})),localStorage.setItem("lastSelectedProject",g))}return()=>window.removeEventListener("resize",w)},[r,l]),b.useEffect(()=>{localStorage.setItem("paymentRecordImages",JSON.stringify(xe))},[xe]),b.useEffect(()=>{localStorage.setItem("hiddenPaymentIds",JSON.stringify(V))},[V]),b.useEffect(()=>{if(U.itemName&&U.itemName.trim().length>=1){const w=U.itemName.trim().toLowerCase(),g=[...t].sort((D,P)=>new Date(P.date).getTime()-new Date(D.date).getTime()).map(D=>D.itemName).filter(D=>D&&D.toLowerCase().includes(w)),N=Array.from(new Set(g));te(N.slice(0,10))}else te([])},[U.itemName,t]);const Y=b.useCallback(w=>{var N;if(!d){H.error("  ");return}const g=(N=w.clipboardData)==null?void 0:N.items;if(g){for(let D=0;D<g.length;D++)if(g[D].type.indexOf("image")!==-1){w.preventDefault();const P=g[D].getAsFile();if(P){const F=new FileReader;F.onload=q=>{var W;const A=(W=q.target)==null?void 0:W.result,J=t.find(le=>le.id===d);if(J){const le=[...J.images||[],A];i(d,{images:le})}else ie(le=>({...le,[d]:[...le[d]||[],A]}));H.success(" ")},F.readAsDataURL(P)}}}},[d,t,i]);b.useEffect(()=>(document.addEventListener("paste",Y),()=>document.removeEventListener("paste",Y)),[Y]);const ue=l.map(w=>w.name),ye=e.filter(w=>{const g=w.status==="approved"||w.status==="completed",N=!t.some(F=>F.paymentId===w.id),D=!V.includes(w.id),P=(o==null?void 0:o.name)!==""||ue.includes(w.project);return g&&N&&D&&P}).map(w=>{const g=w.materialAmount||0,N=w.laborAmount||0,D=w.amount||0;let P=g,F=N,q=0;return g===0&&N===0&&D>0?w.includesVAT?(P=Math.round(D/1.1),q=D-P):(P=D,q=0):w.includesVAT?(g>0&&(P=Math.round(g/1.1)),N>0&&(F=Math.round(N/1.1)),q=D-(P+F)):q=0,{id:w.id,type:"payment",project:w.project,author:w.requestedBy||"-",date:w.requestDate,process:w.process||"-",itemName:w.itemName||w.purpose||"-",materialCost:P,laborCost:F,vatAmount:q,totalAmount:D,images:xe[w.id]||[],notes:w.notes,quickText:w.quickText||""}}),Ne=t.filter(w=>(o==null?void 0:o.name)!==""||ue.includes(w.project)).map(w=>({...w,type:"manual"})),Re=[...ye,...Ne].sort((w,g)=>new Date(g.date).getTime()-new Date(w.date).getTime()),ee=Re.filter(w=>{var D,P;const g=U.project===""||w.project===U.project,N=c===""||((D=w.itemName)==null?void 0:D.toLowerCase().includes(c.toLowerCase()))||((P=w.process)==null?void 0:P.toLowerCase().includes(c.toLowerCase()));return g&&N}),me=ee.reduce((w,g)=>(w.material+=g.materialCost||0,w.labor+=g.laborCost||0,w.vat+=g.vatAmount||0,w.total+=g.totalAmount||0,w),{material:0,labor:0,vat:0,total:0}),I=()=>{if(!U.project){H.error(" ");return}const w=new Date;let g=Number(U.materialCost)||0,N=Number(U.laborCost)||0,D=0,P=0;if(j){const q=g+N,A=Math.round(q/1.1);if(D=q-A,q>0){const J=g/q,W=N/q;g=Math.round(A*J),N=Math.round(A*W)}P=q}else D=0,P=g+N;const F={id:`exec_${Date.now()}`,project:U.project,author:(o==null?void 0:o.name)||"  ",date:new Date(U.date),process:U.process,itemName:U.itemName,materialCost:g,laborCost:N,vatAmount:D,totalAmount:P,images:U.images,notes:"",createdAt:w,updatedAt:w};n(F),H.success(" "),L(q=>({project:q.project,date:Se(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",images:[]})),p(!1),h(!1)},se=()=>{const w={};return ee.forEach(g=>{const N=g.process||"";w[N]||(w[N]={materialCost:0,laborCost:0,vatAmount:0,totalAmount:0}),w[N].materialCost+=g.materialCost||0,w[N].laborCost+=g.laborCost||0,w[N].vatAmount+=g.vatAmount||0,w[N].totalAmount+=g.totalAmount||0}),Object.entries(w).sort((g,N)=>N[1].totalAmount-g[1].totalAmount)},ae=w=>{var P;if(!d){H.error("  ");return}const g=Array.from(((P=w.target)==null?void 0:P.files)||[]),N=[],D=g.filter(F=>F.type.startsWith("image/"));D.length!==0&&D.forEach(F=>{const q=new FileReader;q.onload=A=>{var W;const J=(W=A.target)==null?void 0:W.result;if(N.push(J),N.length===D.length){const le=t.find(Me=>Me.id===d);if(le){const Me=[...le.images||[],...N];i(d,{images:Me})}else ie(Me=>({...Me,[d]:[...Me[d]||[],...N]}));H.success(`${N.length}  `)}},q.readAsDataURL(F)})},X=w=>{var N;if(!d)return;const g=t.find(D=>D.id===d);if(g){const D=((N=g.images)==null?void 0:N.filter((P,F)=>F!==w))||[];i(d,{images:D})}else ie(D=>{var P;return{...D,[d]:((P=D[d])==null?void 0:P.filter((F,q)=>q!==w))||[]}})},we=w=>{_(w),T(!0)},Ee=w=>{w.preventDefault(),y(!0)},de=w=>{w.preventDefault(),y(!1)},C=w=>{if(w.preventDefault(),y(!1),!d){H.error("  ");return}const g=Array.from(w.dataTransfer.files),N=[],D=g.filter(P=>P.type.startsWith("image/"));D.length!==0&&D.forEach(P=>{const F=new FileReader;F.onload=q=>{var J;const A=(J=q.target)==null?void 0:J.result;if(N.push(A),N.length===D.length){const W=t.find(le=>le.id===d);if(W){const le=[...W.images||[],...N];i(d,{images:le})}else ie(le=>({...le,[d]:[...le[d]||[],...N]}));H.success(`${N.length}  `)}},F.readAsDataURL(P)})};return a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsxs("div",{className:"md:hidden mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("select",{value:U.project,onChange:w=>{L({...U,project:w.target.value}),w.target.value&&localStorage.setItem("lastSelectedProject",w.target.value)},className:"w-full px-3 py-2.5 md:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:l.filter(w=>w.status!=="completed").map(w=>a.jsx("option",{value:w.name,children:w.name},w.id))})]}),a.jsx("div",{className:"md:hidden border-b border-gray-200 mb-4",children:a.jsxs("nav",{className:"flex space-x-4",children:[a.jsx("button",{onClick:()=>O("form"),className:`py-2 px-1 border-b-2 font-medium text-sm ${M==="form"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""}),a.jsx("button",{onClick:()=>O("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${M==="list"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""}),a.jsx("button",{onClick:()=>O("image"),className:`py-2 px-1 border-b-2 font-medium text-sm ${M==="image"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""})]})}),a.jsxs("div",{className:"flex flex-col desktop:grid desktop:grid-cols-12 gap-3 md:gap-4",children:[a.jsx("div",{className:`bg-white rounded-lg border p-3 md:p-4 flex flex-col overflow-hidden w-full desktop:col-span-2 ${M!=="form"?"hidden md:flex":"flex"}`,children:a.jsxs("div",{className:"space-y-4 overflow-y-auto flex-shrink-0",children:[a.jsxs("div",{className:"hidden md:block",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),a.jsx("select",{value:U.project,onChange:w=>{L({...U,project:w.target.value}),w.target.value&&localStorage.setItem("lastSelectedProject",w.target.value)},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:l.filter(w=>w.status!=="completed").map(w=>a.jsx("option",{value:w.name,children:w.name},w.id))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",U.date&&`(${Se(new Date(U.date),"E",{locale:it})})`]}),a.jsx("input",{type:"date",value:U.date,onChange:w=>L({...U,date:w.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer text-gray-900",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundColor:"white",backgroundImage:"none"}})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("button",{ref:Z,type:"button",onClick:()=>ne(!0),className:"w-full px-3 py-2 border rounded-lg text-left bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:U.process||a.jsx("span",{className:"text-gray-400",children:""})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:U.itemName,onChange:w=>L({...U,itemName:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"}),fe.length>0&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:fe.map((w,g)=>a.jsx("button",{type:"button",onClick:()=>{L({...U,itemName:w}),te([])},className:"w-full px-3 py-2 text-left hover:bg-gray-50 text-sm",children:a.jsx("div",{className:"font-medium text-gray-900",children:w})},g))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"number",value:U.materialCost,onChange:w=>L({...U,materialCost:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"number",value:U.laborCost,onChange:w=>L({...U,laborCost:w.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"includeVat",checked:j,onChange:w=>{w.target.checked&&h(!1),p(w.target.checked)},className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"includeVat",className:"ml-2 block text-sm text-gray-700",children:"  (10%)"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"includeTaxDeduction",checked:k,onChange:w=>{w.target.checked&&p(!1),h(w.target.checked)},className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"includeTaxDeduction",className:"ml-2 block text-sm text-gray-700",children:"3.3% "})]})]}),a.jsx("div",{className:"pt-2 border-t",children:a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("span",{className:"font-medium",children:""}),a.jsxs("div",{className:"text-right",children:[(j||k)&&a.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["(",j&&" ",k&&"3.3% ",")"]}),a.jsxs("span",{className:"font-semibold",children:[(()=>{const w=(Number(U.materialCost)||0)+(Number(U.laborCost)||0);return(k?Math.round(w*.967):w).toLocaleString()})(),""]})]})]})}),a.jsx("div",{className:"my-6",style:{marginTop:"20px"},children:a.jsx("button",{onClick:I,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:""})})]}),a.jsxs("div",{className:"hidden md:block bg-gray-50 rounded-lg p-3 md:p-4 space-y-2 md:mt-8 lg:mt-[114.67px]",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:" :"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[me.material.toLocaleString(),""]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:" :"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[me.labor.toLocaleString(),""]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:" :"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[me.vat.toLocaleString(),""]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",style:{marginTop:"10px"},children:[a.jsx("span",{className:"text-sm font-bold text-gray-900",children:" :"}),a.jsxs("span",{className:"text-base font-bold text-gray-900",children:[me.total.toLocaleString(),""]})]})]})]})}),a.jsxs("div",{className:`bg-white rounded-lg border overflow-hidden flex flex-col w-full desktop:col-span-6 ${M!=="list"?"hidden md:flex":""}`,children:[a.jsx("div",{className:"flex-1 overflow-auto",children:ee.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:"hidden md:table w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{className:"text-left text-sm text-gray-700 border-b",children:[a.jsx("th",{className:"px-3 py-3 font-medium w-[6%]",children:""}),a.jsx("th",{className:"px-3 py-3 font-medium w-[10%]",children:""}),a.jsx("th",{className:"px-3 py-3 font-medium w-[10%]",children:""}),a.jsx("th",{className:"px-3 py-3 font-medium w-[22%]",children:""}),a.jsx("th",{className:"px-3 py-3 font-medium text-right w-[13%]",children:""}),a.jsx("th",{className:"px-3 py-3 font-medium text-right w-[13%]",children:""}),a.jsx("th",{className:"px-3 py-3 font-medium text-right w-[13%]",children:""}),a.jsx("th",{className:"px-3 py-3 font-medium text-right w-[13%]",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:ee.map(w=>a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer text-sm ${d===w.id?"bg-blue-50":""}`,onClick:()=>f(w.id),children:[a.jsx("td",{className:"px-3 py-3 text-gray-600",children:w.author||"-"}),a.jsxs("td",{className:"px-3 py-3 text-gray-600",children:[a.jsx("span",{className:"portrait:block landscape:hidden ipad-xl:hidden",children:Se(new Date(w.date),"MM-dd",{locale:it})}),a.jsx("span",{className:"portrait:hidden landscape:inline ipad-xl:!inline",children:Se(new Date(w.date),"yyyy-MM-dd (EEE)",{locale:it})})]}),a.jsx("td",{className:"px-3 py-3 text-gray-600",children:w.process||"-"}),a.jsx("td",{className:"px-3 py-3 font-medium",children:w.itemName}),a.jsx("td",{className:"px-3 py-3 text-right",children:(w.materialCost||0).toLocaleString()}),a.jsx("td",{className:"px-3 py-3 text-right",children:(w.laborCost||0).toLocaleString()}),a.jsx("td",{className:"px-3 py-3 text-right",children:(w.vatAmount||0).toLocaleString()}),a.jsxs("td",{className:"px-3 py-3 text-right font-semibold",children:[a.jsx("span",{className:"portrait:inline landscape:hidden ipad-xl:hidden",children:(w.totalAmount||0).toLocaleString()}),a.jsxs("span",{className:"portrait:hidden landscape:inline ipad-xl:!inline",children:[(w.totalAmount||0).toLocaleString(),""]})]})]},w.id))})]}),a.jsx("div",{className:"md:hidden space-y-3 p-3",children:ee.map(w=>a.jsxs("div",{className:`border rounded-lg p-4 ${d===w.id?"bg-blue-50 border-blue-300":"bg-white"}`,onClick:()=>f(w.id),children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:w.itemName}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[w.process||"-","  ",w.author||"-"]})]}),a.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["",(w.totalAmount||0).toLocaleString()]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:Se(new Date(w.date),"MM.dd (EEE)",{locale:it})}),a.jsxs("div",{className:"mt-2 pt-2 border-t grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsxs("p",{className:"font-medium",children:["",(w.materialCost||0).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsxs("p",{className:"font-medium",children:["",(w.laborCost||0).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:""}),a.jsxs("p",{className:"font-medium",children:["",(w.vatAmount||0).toLocaleString()]})]})]})]},w.id))})]}):a.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:" "})}),a.jsxs("div",{className:"border-t bg-gray-50 p-3",children:[M==="list"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden mb-3",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"...",value:c,onChange:w=>u(w.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 text-sm"}),a.jsx(Mf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})}),a.jsxs("div",{className:"md:hidden bg-white rounded-lg p-3 mb-3 space-y-2 border",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:" :"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[me.material.toLocaleString(),""]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:" :"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[me.labor.toLocaleString(),""]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:" :"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[me.vat.toLocaleString(),""]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[a.jsx("span",{className:"text-sm font-bold text-gray-900",children:" :"}),a.jsxs("span",{className:"text-base font-bold text-gray-900",children:[me.total.toLocaleString(),""]})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[a.jsx("div",{className:"hidden md:block flex-1 md:max-w-sm",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"...",value:c,onChange:w=>u(w.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 text-sm md:text-sm lg:text-base"}),a.jsx(Mf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})}),a.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-2",children:[d&&a.jsx("button",{onClick:()=>{const w=t.find(N=>N.id===d),g=Re.find(N=>N.id===d);w?confirm("  ?")&&(s(d),f(null),H.success(" ")):(g==null?void 0:g.type)==="payment"?confirm(`   ?
(   )`)&&(ge(N=>[...N,d]),f(null),H.success("  ")):H.error("   ")},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:a.jsx(Et,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>S(!0),className:"px-3 py-2 text-sm md:px-3 lg:px-4 lg:text-base border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 font-medium whitespace-nowrap",children:" "})]})]})]})]}),a.jsxs("div",{className:`bg-white rounded-lg border flex flex-col overflow-hidden w-full desktop:col-span-4 ${M!=="image"?"hidden md:flex":""}`,onDragOver:Ee,onDragLeave:de,onDrop:C,children:[a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ae,className:"hidden",id:"image-file-input"}),R&&d&&M==="image"&&(()=>{const w=Re.find(g=>g.id===d);return w?a.jsxs("div",{className:"border-b bg-gray-50 p-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900 text-sm",children:w.itemName}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[w.process||"-","  ",Se(new Date(w.date),"yyyy.MM.dd",{locale:it})]})]}),a.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["",(w.totalAmount||0).toLocaleString()]})]}),w.type==="payment"&&w.quickText&&a.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"  :"}),a.jsx("p",{className:"text-xs text-blue-800 whitespace-pre-wrap mb-2",children:w.quickText}),a.jsx("button",{onClick:()=>{const g=w.quickText||"",N=w.totalAmount||0,D=g.includes("")||g.includes(""),P=g.includes("")||g.includes("");let F=.7,q=.3;D&&!P?(F=1,q=0):!D&&P&&(F=0,q=1);const A=Math.round(N*F),J=Math.round(N*q);L(W=>({...W,project:w.project,date:Se(new Date(w.date),"yyyy-MM-dd"),process:w.process||"",itemName:w.itemName||"",materialCost:A,laborCost:J})),O("form"),H.success(`  :  ${A.toLocaleString()},  ${J.toLocaleString()}`)},className:"w-full px-2 py-1.5 text-xs font-medium text-blue-700 bg-white border border-blue-300 rounded hover:bg-blue-50 transition-colors",children:" "})]})]}):null})(),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 relative",onClick:w=>{var N;const g=w.target;!g.closest("img")&&!g.closest("button")&&d&&(()=>{const P=t.find(F=>F.id===d);return(P==null?void 0:P.images)||xe[d]||[]})().length>0&&((N=document.getElementById("image-file-input"))==null||N.click())},children:d?(()=>{const w=t.find(D=>D.id===d),g=Re.find(D=>D.id===d),N=(w==null?void 0:w.images)||xe[d]||[];return a.jsxs("div",{className:"h-full flex flex-col",children:[(g==null?void 0:g.type)==="payment"&&g.quickText&&a.jsx("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"  :"}),a.jsx("p",{className:"text-sm text-blue-800 whitespace-pre-wrap",children:g.quickText})]}),a.jsx("button",{onClick:()=>{const D=g.quickText||"",P=g.totalAmount||0,F=D.includes("")||D.includes(""),q=D.includes("")||D.includes("");let A=.7,J=.3;F&&!q?(A=1,J=0):!F&&q&&(A=0,J=1);const W=Math.round(P*A),le=Math.round(P*J);L(Me=>({...Me,project:g.project,date:Se(new Date(g.date),"yyyy-MM-dd"),process:g.process||"",itemName:g.itemName||"",materialCost:W,laborCost:le})),H.success(`  :  ${W.toLocaleString()},  ${le.toLocaleString()}`)},className:"ml-3 px-3 py-1.5 text-xs font-medium text-blue-700 bg-white border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors whitespace-nowrap",children:" "})]})}),N.length>0?a.jsx("div",{className:"grid grid-cols-1 gap-3 flex-1 overflow-y-auto",children:N.map((D,P)=>a.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[a.jsx("img",{src:D,alt:` ${P+1}`,className:"w-full h-auto cursor-pointer hover:opacity-90 transition-opacity",onClick:F=>{F.stopPropagation(),we(D)}}),a.jsx("button",{onClick:F=>{F.stopPropagation(),X(P)},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(et,{className:"h-4 w-4"})})]},P))}):a.jsx("label",{htmlFor:"image-file-input",className:"h-full flex items-center justify-center cursor-pointer flex-1",children:a.jsxs("div",{className:`w-full h-full min-h-[200px] border-2 border-dashed rounded-lg p-6 text-center transition-colors flex flex-col items-center justify-center ${m?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx(ks,{className:"h-10 w-10 mx-auto text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:" "}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"   Ctrl+V "})]})})]})})():a.jsx("div",{className:"h-full flex items-center justify-center min-h-[200px]",children:a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(Un,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:" "})]})})})]})]}),v&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-t-2xl md:rounded-lg w-full md:max-w-4xl max-h-[85vh] md:max-h-[80vh] overflow-hidden md:m-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 lg:p-6 border-b",children:[a.jsx("h2",{className:"text-lg md:text-lg lg:text-xl font-bold text-gray-900",children:" "}),a.jsx("button",{onClick:()=>S(!1),className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-full",children:a.jsx(et,{className:"h-5 w-5 text-gray-500"})})]}),a.jsx("div",{className:"p-4 md:p-5 lg:p-6 overflow-y-auto max-h-[calc(85vh-120px)] md:max-h-[calc(80vh-120px)]",children:se().length>0?a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:"hidden md:table w-full",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{className:"text-left text-sm text-gray-700",children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:""}),a.jsx("th",{className:"px-4 py-3 font-medium text-right",children:""}),a.jsx("th",{className:"px-4 py-3 font-medium text-right",children:""}),a.jsx("th",{className:"px-4 py-3 font-medium text-right",children:""}),a.jsx("th",{className:"px-4 py-3 font-medium text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:se().map(([w,g])=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 font-medium text-gray-700",children:w}),a.jsx("td",{className:"px-4 py-3 text-right",children:g.materialCost.toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-right",children:g.laborCost.toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-right",children:g.vatAmount.toLocaleString()}),a.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:[g.totalAmount.toLocaleString(),""]})]},w))}),a.jsx("tfoot",{className:"bg-gray-100 border-t-2 border-gray-300",children:a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-3 font-bold text-gray-700",children:""}),a.jsx("td",{className:"px-4 py-3 text-right font-bold",children:me.material.toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-right font-bold",children:me.labor.toLocaleString()}),a.jsx("td",{className:"px-4 py-3 text-right font-bold",children:me.vat.toLocaleString()}),a.jsxs("td",{className:"px-4 py-3 text-right font-bold text-gray-900",children:[me.total.toLocaleString(),""]})]})})]}),a.jsxs("div",{className:"md:hidden space-y-3",children:[se().map(([w,g])=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:w}),a.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["",g.totalAmount.toLocaleString()]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs",children:""}),a.jsxs("p",{className:"font-medium",children:["",g.materialCost.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs",children:""}),a.jsxs("p",{className:"font-medium",children:["",g.laborCost.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-xs",children:""}),a.jsxs("p",{className:"font-medium",children:["",g.vatAmount.toLocaleString()]})]})]})]},w)),a.jsxs("div",{className:"bg-gray-900 text-white rounded-lg p-4 mt-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("h3",{className:"font-bold text-white",children:""}),a.jsxs("span",{className:"text-xl font-bold",children:["",me.total.toLocaleString()]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-xs",children:""}),a.jsxs("p",{className:"font-semibold",children:["",me.material.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-xs",children:""}),a.jsxs("p",{className:"font-semibold",children:["",me.labor.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-xs",children:""}),a.jsxs("p",{className:"font-semibold",children:["",me.vat.toLocaleString()]})]})]})]})]})]}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"  ."})})]})}),Q&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[a.jsx("h2",{className:"text-base font-bold text-gray-900",children:" "}),a.jsx("button",{onClick:()=>ne(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(et,{className:"h-4 w-4 text-gray-500"})})]}),a.jsxs("div",{className:"p-3 overflow-y-auto max-h-[calc(80vh-100px)]",children:[a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:jj.map(w=>a.jsx("button",{onClick:()=>{L({...U,process:w}),ne(!1)},className:`p-2 text-sm text-center border rounded-lg transition-all ${U.process===w?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:w},w))}),a.jsx("button",{onClick:()=>{L({...U,process:""}),ne(!1)},className:"w-full p-2 text-sm text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:" "})]})]})}),a.jsx("div",{className:"hidden md:block fixed inset-0 z-40",onClick:()=>ne(!1),children:a.jsxs("div",{onClick:w=>w.stopPropagation(),className:"absolute bg-white rounded-lg shadow-xl border border-gray-200",style:{top:Z.current?`${Z.current.getBoundingClientRect().bottom+window.scrollY+4}px`:"50%",left:Z.current?`${Z.current.getBoundingClientRect().left+window.scrollX}px`:"50%"},children:[a.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[a.jsx("h2",{className:"text-sm font-bold text-gray-900",children:" "}),a.jsx("button",{onClick:()=>ne(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(et,{className:"h-3 w-3 text-gray-500"})})]}),a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"grid grid-cols-4 gap-1.5 mb-2",children:jj.map(w=>a.jsx("button",{onClick:()=>{L({...U,process:w}),ne(!1)},className:`p-1.5 text-xs text-center border rounded-lg transition-all whitespace-nowrap ${U.process===w?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:w},w))}),a.jsx("button",{onClick:()=>{L({...U,process:""}),ne(!1)},className:"w-full p-1.5 text-xs text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:" "})]})]})})]}),x&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>T(!1),children:a.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[a.jsx("button",{onClick:w=>{w.stopPropagation(),T(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:a.jsx(et,{className:"h-8 w-8"})}),a.jsx("img",{src:E,alt:" ",className:"max-w-full max-h-[90vh] object-contain",onClick:w=>w.stopPropagation()})]})})]})},Lne=({projectName:e,onClose:t,type:r="cash"})=>{const n=r==="cash",s=n?"":"",i=n?"      .":"      .",[o,l]=b.useState({receiptDate:Se(new Date,"yyyy-MM-dd"),customerName:"",amount:"",purpose:" ",receivedBy:""}),c=()=>{window.print()},u=f=>{const m=Number(f.replace(/,/g,""));return isNaN(m)?"":m.toLocaleString()},d=f=>{if(f===0)return"";const m=["","","",""],y=["","","",""],j=["","","","","","","","","",""];let p="",k=0;for(;f>0;){const h=f%1e4;if(h>0){let v="",S=h,x=0;for(;S>0;){const T=S%10;T>0&&(v=j[T]+y[x]+v),S=Math.floor(S/10),x++}p=v+m[k]+p}f=Math.floor(f/1e4),k++}return p+""};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 print:relative print:bg-white",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto print:max-h-none print:mx-0 print:rounded-none",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b print:hidden",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:s}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(et,{className:"h-5 w-5 text-gray-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4 print:hidden",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"date",value:o.receiptDate,onChange:f=>l({...o,receiptDate:f.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:o.customerName,onChange:f=>l({...o,customerName:f.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:u(o.amount),onChange:f=>{const m=f.target.value.replace(/,/g,"");/^\d*$/.test(m)&&l({...o,amount:m})},placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"}),o.amount&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d(Number(o.amount))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:o.purpose,onChange:f=>l({...o,purpose:f.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:o.receivedBy,onChange:f=>l({...o,receivedBy:f.target.value}),placeholder:" ",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"})]}),a.jsxs("button",{onClick:c,disabled:!o.customerName||!o.amount||!o.receivedBy,className:"w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[a.jsx(R4,{className:"h-4 w-4"}),""]})]}),a.jsx("div",{className:"hidden print:block p-12",children:a.jsxs("div",{className:"border-4 border-double border-gray-900 p-8",children:[a.jsx("h1",{className:"text-center text-3xl font-bold mb-8",children:n?"    ":"    "}),a.jsxs("div",{className:"space-y-6 text-lg",children:[a.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[a.jsx("span",{className:"font-medium w-32",children:":"}),a.jsx("span",{className:"flex-1 receipt-date",children:Se(new Date(o.receiptDate),"yyyy MM dd",{locale:it})})]}),a.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[a.jsx("span",{className:"font-medium w-32",children:":"}),a.jsx("span",{className:"flex-1",children:o.customerName})]}),a.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[a.jsx("span",{className:"font-medium w-32",children:":"}),a.jsx("span",{className:"flex-1",children:e})]}),a.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[a.jsx("span",{className:"font-medium w-32",children:":"}),a.jsxs("span",{className:"flex-1 font-bold receipt-amount",children:["",Number(o.amount).toLocaleString(),""]})]}),a.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[a.jsx("span",{className:"font-medium w-32",children:"():"}),a.jsx("span",{className:"flex-1",children:d(Number(o.amount))})]}),a.jsxs("div",{className:"flex items-baseline border-b border-gray-300 pb-2",children:[a.jsx("span",{className:"font-medium w-32",children:":"}),a.jsx("span",{className:"flex-1",children:o.purpose})]})]}),a.jsxs("div",{className:"mt-12 text-center",children:[a.jsx("p",{className:"text-lg mb-8",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-lg receipt-date",children:Se(new Date(o.receiptDate),"yyyy MM dd",{locale:it})}),a.jsxs("p",{className:"text-xl font-medium mt-8",children:[": ",o.receivedBy," ",a.jsx("span",{className:"ml-4",children:"()"})]})]})]})]})})]})}),a.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print\\:block, .print\\:block * {
            visibility: visible;
          }
          .print\\:hidden {
            display: none !important;
          }
        }
      `})]})},Sj=["","","","","","","","","","","","","","","","","","","","","","","","","","",""],$l=e=>{if(!e)return e;const t=e.replace(/$/g,"").trim(),r=t.split(" ");if(r.length>=2){const n=r[r.length-1];for(const s of Sj)if(n===s)return r.slice(0,-1).join(" ").trim()}for(const n of Sj)if(t.endsWith(n))return t.substring(0,t.length-n.length).trim();return t},kj=["","","/","","","","","","","","","","","","",""],$ne=()=>{const{payments:e,loadPaymentsFromAPI:t,addPaymentToAPI:r,deletePaymentFromAPI:n,updatePaymentInAPI:s}=Ts(),{user:i}=Ar(),o=Tn(),[l,c]=b.useState(""),[u,d]=b.useState(null),[f,m]=b.useState(null),[y,j]=b.useState(!1),[p,k]=b.useState(!1),[h,v]=b.useState(!1),[S,x]=b.useState(!1),[T,E]=b.useState(""),[_,M]=b.useState("form"),[O,R]=b.useState(!1),[K,Q]=b.useState(!1),ne=b.useRef(null),[Z,fe]=b.useState("pending"),[te,xe]=b.useState("all"),[ie,V]=b.useState(!1),[ge,G]=b.useState(null),[U,L]=b.useState(!1),[Y,ue]=b.useState(""),[ye,Ne]=b.useState([]),[Re,ee]=b.useState([]),[me,I]=b.useState(null),[se,ae]=b.useState([]),[X,we]=b.useState([]),[Ee,de]=b.useState(!1),[C,w]=b.useState(()=>{const $=localStorage.getItem("paymentRecordImages");return $?JSON.parse($):{}}),g=()=>{const $=localStorage.getItem("lastSelectedProject"),oe=o.filter(re=>re.status!=="completed");return $&&oe.some(re=>re.name===$)?$:oe.length>0?oe[0].name:""},[N,D]=b.useState({project:"",date:Se(new Date,"yyyy-MM-dd"),process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:""});b.useEffect(()=>{(async()=>{try{const oe=await Ys.getAllContractors();Ne(oe.map(re=>({id:re._id||re.id,rank:re.rank,companyName:re.companyName,name:re.name,process:re.process,contact:re.contact,accountNumber:re.accountNumber,bankName:re.bankName,notes:re.notes,createdAt:new Date(re.createdAt),updatedAt:new Date(re.updatedAt)})))}catch(oe){console.error("Failed to load contractors:",oe)}})()},[]),b.useEffect(()=>{t().catch(oe=>{console.error("Failed to load payments:",oe)});const $=()=>{R(window.innerWidth<1024)};if($(),window.addEventListener("resize",$),o.length>0&&!N.project){const oe=g();oe&&(D(re=>({...re,project:oe})),localStorage.setItem("lastSelectedProject",oe))}return()=>window.removeEventListener("resize",$)},[t,o]),b.useEffect(()=>{const $=setInterval(()=>{console.log("[ ]    ..."),t().catch(oe=>{console.error("[ ] :",oe)})},3e4);return()=>clearInterval($)},[t]),b.useEffect(()=>{(async()=>{var je,ce,ke,pe;const oe=new URLSearchParams(window.location.search),re=oe.get("complete")||oe.get("c");if(re){if(console.log("[ ] URL  :",re),!i){console.log("[ ]   -  ");return}M("list"),fe("pending");try{await t(),await s(String(re),{status:"completed"}),H.success(" "),fe("completed"),window.history.replaceState({},"","/payments"),await t()}catch(Oe){console.error("[ ]  :",Oe);let Be="  ";((je=Oe.response)==null?void 0:je.status)===401?Be=" .  ":((ce=Oe.response)==null?void 0:ce.status)===404?Be="     (ID: "+re+")":(pe=(ke=Oe.response)==null?void 0:ke.data)!=null&&pe.error?Be=Oe.response.data.error:Oe.message&&(Be+=": "+Oe.message),H.error(Be),window.history.replaceState({},"","/payments")}}})()},[t,s,i]),b.useEffect(()=>{if(N.process){const $=new Set(e.filter(je=>{var ce;return je.status==="completed"&&((ce=je.bankInfo)==null?void 0:ce.accountHolder)}).map(je=>je.bankInfo.accountHolder.trim().toLowerCase())),re=ye.filter(je=>{if(!(je.process.toLowerCase().includes(N.process.toLowerCase())||N.process.toLowerCase().includes(je.process.toLowerCase())))return!1;const ke=je.accountNumber&&je.accountNumber.trim()!=="",pe=je.name.trim().toLowerCase(),Oe=$.has(pe);return ke||Oe}).sort((je,ce)=>{const ke=je.accountNumber&&je.accountNumber.trim()!=="",pe=ce.accountNumber&&ce.accountNumber.trim()!=="";return ke&&!pe?-1:!ke&&pe?1:0});ee(re)}else ee([])},[N.process,ye,e]),b.useEffect(()=>{if(N.accountHolder&&N.accountHolder.trim().length>=1){const $=N.accountHolder.trim().toLowerCase(),oe=new Map;let re=null;if(me){const ce=ye.find(ke=>(ke.id||ke._id)===me);ce&&ce.accountNumber&&ce.bankName&&(re=`${$l(ce.name).trim()}_${ce.bankName}_${ce.accountNumber}`)}e.filter(ce=>{var ke,pe,Oe;return ce.status==="completed"&&((ke=ce.bankInfo)==null?void 0:ke.accountHolder)&&((pe=ce.bankInfo)==null?void 0:pe.bankName)&&((Oe=ce.bankInfo)==null?void 0:Oe.accountNumber)}).forEach(ce=>{const ke=ce.bankInfo.accountHolder.trim(),pe=ke.toLowerCase();if(pe.includes($)||$.includes(pe)){const Oe=`${ke}_${ce.bankInfo.bankName}_${ce.bankInfo.accountNumber}`;Oe!==re&&!oe.has(Oe)&&oe.set(Oe,{accountHolder:ke,bankName:ce.bankInfo.bankName,accountNumber:ce.bankInfo.accountNumber})}}),ye.forEach(ce=>{if((ce.id||ce._id)!==me&&ce.accountNumber&&ce.bankName){const ke=$l(ce.name).trim(),pe=ke.toLowerCase();if(pe.includes($)||$.includes(pe)){const Oe=`${ke}_${ce.bankName}_${ce.accountNumber}`;oe.has(Oe)||oe.set(Oe,{accountHolder:ke,bankName:ce.bankName,accountNumber:ce.accountNumber})}}}),ae(Array.from(oe.values()))}else ae([])},[N.accountHolder,e,ye,me]),b.useEffect(()=>{if(Ee&&N.itemName&&N.itemName.trim().length>=1){const $=N.itemName.trim().toLowerCase(),oe=[...e].sort((je,ce)=>new Date(ce.date).getTime()-new Date(je.date).getTime()).map(je=>je.itemName).filter(je=>je&&je.toLowerCase().includes($)),re=Array.from(new Set(oe));we(re.slice(0,10))}else we([])},[N.itemName,e,Ee]);const P=$=>{const oe=$.split(`
`).map(pe=>pe.trim()).filter(pe=>pe),re={amounts:{},bankInfo:{},vendor:null,itemName:void 0,includeVat:!1},je=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ce=pe=>{if(!pe||pe.length<2||pe.length>5||!/^[-]{2,5}$/.test(pe))return!1;if(pe.length>=2){const Oe=pe.charAt(0),Be=pe.substring(0,2);if(["","","","","","",""].includes(Be)||je.includes(Oe))return!0}return pe.length>=2&&pe.length<=4},ke=oe.some(pe=>pe.includes(" ")||pe.includes(""));return oe.forEach((pe,Oe)=>{if(pe.includes("")&&pe.includes(":")){const Be=pe.match(/\s*:\s*(.+)/);Be&&(re.itemName=Be[1].trim())}if(pe.includes("")&&pe.includes(":")){const Be=pe.match(/\s*:\s*(.+)/);Be&&(re.bankInfo.accountHolder=Be[1].trim())}if(pe.includes("")&&pe.includes(":")){const Be=pe.match(/\s*:\s*(.+)/);Be&&(re.bankInfo.bankName=Be[1].trim())}if(pe.includes("")&&pe.includes(":")){const Be=pe.match(/\s*:\s*(.+)/);Be&&(re.bankInfo.accountNumber=Be[1].trim())}if(pe.includes("")&&pe.includes(":")){const Be=pe.match(/\s*:\s*([\d,]+)?/);Be&&(re.amounts.total=parseInt(Be[1].replace(/,/g,"")))}}),ke||(oe.forEach(pe=>{const Oe=pe.match(/\[([^\]]+)\]/);Oe&&!re.itemName&&(re.itemName=Oe[1].trim())}),oe.forEach((pe,Oe)=>{(pe.includes("")||pe.includes(" ")||pe.includes("()"))&&(re.includeVat=!0);const Be=pe.match(/(\d+)\s*\s*/);if(Be){const qe=parseInt(Be[1])*1e4;pe.includes("")||pe.includes("")?re.amounts.material=qe:pe.includes("")||pe.includes("")?re.amounts.labor=qe:re.amounts.total||(re.amounts.total=qe),pe=pe.replace(/(\d+)\s*\s*/g,"")}pe.includes("/")&&pe.split("/").forEach(ht=>{const _t=ht.trim();_t.startsWith("[")||_t.endsWith("]")||(/^[\d\-]+$/.test(_t)&&_t.replace(/\-/g,"").length>=10?re.bankInfo.accountNumber||(re.bankInfo.accountNumber=_t):ce(_t)&&!re.bankInfo.accountHolder&&(re.bankInfo.accountHolder=_t))});const Je=[/\d{6}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{5,7}[\s\-]+\d{2}[\s\-]+\d{5,7}/,/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/,/\d{3}[\s\-]+\d{2}[\s\-]+\d{6}/,/\d{3}[\s\-]+\d{4}[\s\-]+\d{7}/,/\d{4}[\s\-]+\d{4}[\s\-]+\d{5}/,/\d{3,4}[\s\-]+\d{2,6}[\s\-]+\d{4,7}/,/\d{10,}/];let Ge="",gr=-1;for(const qe of Je){const ht=pe.match(qe);if(ht&&!re.bankInfo.accountNumber){Ge=ht[0],gr=ht.index||-1,re.bankInfo.accountNumber=ht[0].trim().replace(/\s+/g,"-");const wr=pe.substring(gr+Ge.length).trim().split(/\s+/);for(const nn of wr)if(!(nn.startsWith("[")||nn.endsWith("]"))&&ce(nn)){re.bankInfo.accountHolder=nn;break}if(!re.bankInfo.accountHolder&&Oe+1<oe.length){const nn=oe[Oe+1],Lu=nn.split(/\s+/);for(const ss of Lu)if(!(ss.startsWith("[")||ss.endsWith("]"))&&ce(ss)){re.bankInfo.accountHolder=ss;break}if(!re.bankInfo.accountHolder){const ss=nn.match(/^([-]{2,5})/);if(ss){const $u=ss[1].trim();ce($u)&&(re.bankInfo.accountHolder=$u)}}}break}}const Bt=pe.match(/[\d,]+/g);Bt&&Bt.forEach(qe=>{const ht=parseInt(qe.replace(/,/g,"")),_t=qe.replace(/,/g,""),wr=Ge&&Ge.includes(_t);!re.bankInfo.accountNumber&&_t.length>=10&&_t.length<=20?(re.bankInfo.accountNumber=_t,Ge=_t):ht>=1e3&&!Be&&!wr&&(pe.includes("")||pe.includes("")?re.amounts.material=ht:pe.includes("")||pe.includes("")?re.amounts.labor=ht:re.amounts.total||(re.amounts.total=ht))});const Kt={:"KB",KB:"KB",:"",:"",:"",:"IBK",IBK:"IBK",:"NH",NH:"NH",:"",:"",:"",:"",K:"",:"KDB",KDB:"KDB",:"",:"",:"",:"",:"",:"",:"SC",SC:"SC",:"",:"",:"",:""};for(const[qe,ht]of Object.entries(Kt))if(pe.includes(qe)){re.bankInfo.bankName=ht;const _t=new RegExp(`${qe}\\s+([-]{2,5})`),wr=pe.match(_t);wr&&(re.bankInfo.accountHolder=wr[1]);break}if(!re.bankInfo.bankName){const qe=pe.match(/([-]+)(|)/);qe&&(re.bankInfo.bankName=qe[0])}const Gt=pe.match(/\(([-]{2,5})\)/);if(Gt){const qe=Gt[1];ce(qe)&&(re.bankInfo.accountHolder=qe)}if(!Gt&&!re.bankInfo.accountHolder){const qe=/[-]{2,5}/g,ht=pe.match(qe);if(ht){const _t=pe.match(/\d{10,}/)||pe.match(/\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}[\s\-]+\d{3,4}/);ht.forEach(wr=>{const nn=$.split(`
`)[Oe];nn&&nn.includes(`[${wr}]`)||!ce(wr)||["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].includes(wr)||Gt&&wr===Gt[1]||(_t&&!Gt?re.bankInfo.accountHolder=wr:re.bankInfo.accountHolder||(Oe>0&&(oe[Oe-1].match(/\d{10,}/)||oe[Oe-1].match(/|/))||Oe<oe.length-1&&(oe[Oe+1].match(/\d{10,}/)||oe[Oe+1].match(/|/))||pe.match(/|/))&&(re.bankInfo.accountHolder=wr))})}}const Mr={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};for(const[qe,ht]of Object.entries(Mr))if(pe.includes(qe)){re.vendor=ht;break}if(Oe===0&&!re.itemName){const qe=pe.replace(/[\[\]{}()<>]/g,"").trim();qe&&!qe.includes(" ")&&(re.itemName=qe.substring(0,50))}})),re.itemName&&re.itemName.includes("")&&(re.vendor=""),re},F=()=>{const $=N.quickText;if(!$.trim())return;const oe=P($),re={project:N.project,date:N.date,quickText:N.quickText,process:"",itemName:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[]};I(null),k(!1),v(!1);let je=0;if(oe.amounts.material&&(je+=oe.amounts.material),oe.amounts.labor&&(je+=oe.amounts.labor),oe.amounts.total&&!oe.amounts.material&&!oe.amounts.labor&&(je=oe.amounts.total),je>0&&(re.amount=je),oe.bankInfo.bankName&&(re.bankName=oe.bankInfo.bankName),oe.bankInfo.accountNumber){re.accountNumber=oe.bankInfo.accountNumber;const ke=ye.find(pe=>{var Je,Ge;const Oe=(Je=oe.bankInfo.accountNumber)==null?void 0:Je.replace(/-/g,"");return((Ge=pe.accountNumber)==null?void 0:Ge.replace(/-/g,""))===Oe});ke?(re.accountHolder=ke.name||oe.bankInfo.accountHolder,re.bankName=ke.bankName||oe.bankInfo.bankName,re.accountNumber=ke.accountNumber||oe.bankInfo.accountNumber,I(ke.id||ke._id||null),ke.process&&(re.process=ke.process)):oe.bankInfo.accountHolder&&(re.accountHolder=oe.bankInfo.accountHolder)}else oe.bankInfo.accountHolder&&(re.accountHolder=oe.bankInfo.accountHolder);oe.vendor&&(re.process=oe.vendor),oe.itemName&&(re.itemName=oe.itemName),D(re),oe.includeVat&&(k(!0),v(!1));let ce=[];if(oe.amounts.material||oe.amounts.labor||oe.amounts.total){const ke=[];oe.amounts.material&&ke.push(`: ${oe.amounts.material.toLocaleString()}`),oe.amounts.labor&&ke.push(`: ${oe.amounts.labor.toLocaleString()}`),oe.amounts.total&&!oe.amounts.material&&!oe.amounts.labor&&ke.push(`: ${oe.amounts.total.toLocaleString()}`),ce.push(ke.join(", "))}if(oe.bankInfo.bankName||oe.bankInfo.accountHolder){const ke=[];oe.bankInfo.bankName&&ke.push(oe.bankInfo.bankName),oe.bankInfo.accountHolder&&ke.push(oe.bankInfo.accountHolder),oe.bankInfo.accountNumber&&ke.push(oe.bankInfo.accountNumber),ke.length>0&&ce.push(`: ${ke.join(" ")}`)}oe.vendor&&ce.push(`: ${oe.vendor}`),oe.includeVat&&ce.push("  "),ce.length>0?H.success(`  !
${ce.join(`
`)}`,{duration:4e3,style:{whiteSpace:"pre-line"}}):H.info("  ...    .")},q=b.useCallback(()=>{if(!me&&(!N.accountHolder||N.accountHolder.trim().length===0)){const $=new Map;e.filter(re=>{var je,ce,ke;return re.status==="completed"&&((je=re.bankInfo)==null?void 0:je.accountHolder)&&((ce=re.bankInfo)==null?void 0:ce.bankName)&&((ke=re.bankInfo)==null?void 0:ke.accountNumber)}).forEach(re=>{const je=re.bankInfo.accountHolder.trim(),ce=`${je}_${re.bankInfo.bankName}_${re.bankInfo.accountNumber}`;$.has(ce)||$.set(ce,{accountHolder:je,bankName:re.bankInfo.bankName,accountNumber:re.bankInfo.accountNumber})}),ye.forEach(re=>{if(re.accountNumber&&re.bankName){const je=$l(re.name).trim(),ce=`${je}_${re.bankName}_${re.accountNumber}`;$.has(ce)||$.set(ce,{accountHolder:je,bankName:re.bankName,accountNumber:re.accountNumber})}}),ae(Array.from($.values()))}},[N.accountHolder,e,ye,me]);b.useEffect(()=>{localStorage.setItem("paymentRecordImages",JSON.stringify(C))},[C]);const A=b.useCallback($=>{var je;const oe=(je=$.clipboardData)==null?void 0:je.items;if(!oe)return;let re=!1;for(let ce=0;ce<oe.length;ce++)if(oe[ce].type.indexOf("image")!==-1){re=!0;break}if(re){if(!u){const ce=document.activeElement;(ce==null?void 0:ce.tagName)==="INPUT"||(ce==null?void 0:ce.tagName)==="TEXTAREA"||(ce==null?void 0:ce.classList.contains("form-input"))||H.error("  ");return}for(let ce=0;ce<oe.length;ce++)if(oe[ce].type.indexOf("image")!==-1){$.preventDefault();const ke=oe[ce].getAsFile();if(ke){const pe=new FileReader;pe.onload=Oe=>{var Je;const Be=(Je=Oe.target)==null?void 0:Je.result;w(Ge=>({...Ge,[u]:[...Ge[u]||[],Be]})),H.success(" ")},pe.readAsDataURL(ke)}}}},[u]);b.useEffect(()=>(document.addEventListener("paste",A),()=>document.removeEventListener("paste",A)),[A]);const J=[...e].sort(($,oe)=>new Date(oe.requestDate).getTime()-new Date($.requestDate).getTime()),W=J.filter($=>{var ce,ke,pe;const oe=l===""||((ce=$.purpose)==null?void 0:ce.toLowerCase().includes(l.toLowerCase()))||((ke=$.itemName)==null?void 0:ke.toLowerCase().includes(l.toLowerCase()))||((pe=$.process)==null?void 0:pe.toLowerCase().includes(l.toLowerCase())),re=$.status===Z,je=te==="all"||$.project===te;return oe&&re&&je}),le=$=>{const oe=$.id||$._id||null;if(me===oe){I(null);const ke=document.querySelector('input[placeholder=" "]');ke&&setTimeout(()=>{ke.focus()},100);return}I(oe);const re=$l($.name);let je=$.bankName||"",ce=$.accountNumber||"";if(ce&&!je){const ke=ce.trim().split(/\s+/);if(ke.length>=2){const pe=ke[0];(pe.includes("")||pe.includes("")||pe.includes("")||pe.includes("")||pe.includes(""))&&(je=pe,ce=ke.slice(1).join(""))}}D(ke=>({...ke,accountHolder:re,bankName:je,accountNumber:ce}))};W.reduce(($,oe)=>{const re=oe.materialAmount||0,je=oe.laborAmount||0,ce=oe.amount||0;let ke=re,pe=je,Oe=0;return re===0&&je===0&&ce>0?oe.includesVAT?(ke=Math.round(ce/1.1),Oe=ce-ke):(ke=ce,Oe=0):oe.includesVAT?(re>0&&(ke=Math.round(re/1.1)),je>0&&(pe=Math.round(je/1.1)),Oe=ce-(ke+pe)):Oe=0,$.material+=ke,$.labor+=pe,$.vat+=Oe,$.total+=ce,$},{material:0,labor:0,vat:0,total:0});const Me=async()=>{if(console.log(" handleSave called"),console.log(" Current user:",i),console.log(" Form data:",N),!N.project){H.error(" ");return}if(!N.itemName){H.error(" ");return}const $=Number(N.amount)||0;if($===0){H.error(" ");return}try{const oe=h?Math.round($*.967):$,re=new Date;if(f){const je={project:N.project,requestDate:new Date(N.date),purpose:N.itemName,amount:oe,category:"material",urgency:"normal",process:N.process,itemName:N.itemName,includesVAT:p,applyTaxDeduction:h,materialAmount:oe,laborAmount:0,originalLaborAmount:0,accountHolder:N.accountHolder,bank:N.bankName,accountNumber:N.accountNumber,bankInfo:N.accountHolder||N.bankName||N.accountNumber?{accountHolder:N.accountHolder,bankName:N.bankName,accountNumber:N.accountNumber}:void 0,updatedAt:re};console.log(" Updating payment:",je),await s(f,je),H.success(" "),m(null)}else{const je={id:`payment_${Date.now()}`,project:N.project,requestDate:new Date(N.date),requestedBy:(i==null?void 0:i.name)||"  ",purpose:N.itemName,amount:oe,status:"pending",category:"material",urgency:"normal",process:N.process,itemName:N.itemName,includesVAT:p,applyTaxDeduction:h,materialAmount:oe,laborAmount:0,originalLaborAmount:0,accountHolder:N.accountHolder,bank:N.bankName,accountNumber:N.accountNumber,bankInfo:N.accountHolder||N.bankName||N.accountNumber?{accountHolder:N.accountHolder,bankName:N.bankName,accountNumber:N.accountNumber}:void 0,quickText:N.quickText||"",attachments:[],createdAt:re,updatedAt:re};console.log(" Creating payment:",je),await r(je),H.success(" ")}D(je=>({project:je.project,date:Se(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:""})),k(!1),v(!1),I(null),O&&M("list")}catch(oe){console.error(" Payment save error:",oe),H.error("  : "+oe.message)}},Ce=$=>{var je,ce,ke,pe;const oe=$.originalMaterialAmount!==void 0?$.originalMaterialAmount:$.materialAmount||0,re=$.originalLaborAmount!==void 0?$.originalLaborAmount:$.laborAmount||0;D({project:$.project,date:Se(new Date($.requestDate),"yyyy-MM-dd"),process:$.process||"",itemName:$.itemName||$.purpose||"",materialCost:oe>0?oe.toString():"",laborCost:re>0?re.toString():"",amount:((je=$.amount)==null?void 0:je.toString())||"",accountHolder:((ce=$.bankInfo)==null?void 0:ce.accountHolder)||"",bankName:((ke=$.bankInfo)==null?void 0:ke.bankName)||"",accountNumber:((pe=$.bankInfo)==null?void 0:pe.accountNumber)||"",images:$.attachments||[]}),k($.includesVAT||!1),v($.applyTaxDeduction||!1),d($.id),m($.id),O&&M("form"),H.success("  ")},ze=async $=>{var oe,re,je;try{const ce=((oe=$.bankInfo)==null?void 0:oe.accountHolder)||$.accountHolder,ke=((re=$.bankInfo)==null?void 0:re.bankName)||$.bank,pe=((je=$.bankInfo)==null?void 0:je.accountNumber)||$.accountNumber;if(!ce||!ke||!pe){H.error("  .    .");return}if(!window.confirm(`  ?

: 
: ${ke}
: ${pe}
: ${$.amount.toLocaleString()}`))return;const Be=pe.replace(/-/g,""),Ge={KB:"",:"",:"",:"",:"",NH:"",:"",IBK:"",:"",SC:"SC",:"",:"",:"",:"",:"",KDB:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""}[ke]||ke,Bt={KB:"004",:"004",:"088",:"020",:"081",NH:"011",:"011",IBK:"003",:"003",SC:"023",:"027",:"027",:"045",:"048",:"071",KDB:"002",:"002",:"007",:"031",:"032",:"039",:"034",:"037",:"035",:"090",:"089",:"092"}[ke]||"004",Kt="",Gt=`supertoss://send?amount=${$.amount}&bankCode=${Bt}&bank=${encodeURIComponent(Ge)}&accountNo=${Be}&receiverName=${encodeURIComponent(Kt)}&toName=${encodeURIComponent(Kt)}`;let Mr=!1;try{window.location.href=Gt,Mr=!0,H.success("  ...",{duration:3e3}),setTimeout(()=>{const qe=/iPhone|iPad|iPod/i.test(navigator.userAgent),ht=/Android/i.test(navigator.userAgent);(qe||ht)&&H(`      .

: 
: ${pe}
: ${$.amount.toLocaleString()}

    .`,{icon:"",duration:8e3})},2e3)}catch(qe){console.error("   :",qe),H(`   .

: 
: ${ke}
: ${pe}
: ${$.amount.toLocaleString()}

    .`,{icon:"",duration:1e4})}}catch(ce){console.error(" :",ce),H.error(`   : ${ce.message}`)}},rt=async $=>{try{await s($,{status:"completed"}),H.success(" "),V(!1)}catch{H.error("  ")}},Ye=$=>{var ce;if(!u){H.error("  ");return}const oe=Array.from(((ce=$.target)==null?void 0:ce.files)||[]),re=[],je=oe.filter(ke=>ke.type.startsWith("image/"));je.length!==0&&je.forEach(ke=>{const pe=new FileReader;pe.onload=Oe=>{var Je;const Be=(Je=Oe.target)==null?void 0:Je.result;re.push(Be),re.length===je.length&&(w(Ge=>({...Ge,[u]:[...Ge[u]||[],...re]})),H.success(`${re.length}  `))},pe.readAsDataURL(ke)})},Qe=$=>{u&&w(oe=>{var re;return{...oe,[u]:((re=oe[u])==null?void 0:re.filter((je,ce)=>ce!==$))||[]}})},xt=$=>{E($),x(!0)},dt=$=>{$.preventDefault(),j(!0)},Ft=$=>{$.preventDefault(),j(!1)},pr=$=>{if($.preventDefault(),j(!1),!u){H.error("  ");return}const oe=Array.from($.dataTransfer.files),re=[],je=oe.filter(ce=>ce.type.startsWith("image/"));je.length!==0&&je.forEach(ce=>{const ke=new FileReader;ke.onload=pe=>{var Be;const Oe=(Be=pe.target)==null?void 0:Be.result;re.push(Oe),re.length===je.length&&(w(Je=>({...Je,[u]:[...Je[u]||[],...re]})),H.success(`${re.length}  `))},ke.readAsDataURL(ce)})};return a.jsxs("div",{className:"space-y-3 md:space-y-4",children:[a.jsx("div",{className:"lg:hidden mb-4",children:a.jsxs("select",{value:N.project,onChange:$=>{D({...N,project:$.target.value}),$.target.value&&localStorage.setItem("lastSelectedProject",$.target.value)},className:"w-full px-3 py-2.5 md:py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(i==null?void 0:i.name)!==""&&a.jsx("option",{value:"",children:" "}),o.filter($=>$.status!=="completed").map($=>a.jsx("option",{value:$.name,children:$.name},$.id))]})}),a.jsx("div",{className:"lg:hidden border-b border-gray-200 mb-4",children:a.jsxs("nav",{className:"flex space-x-4",children:[a.jsx("button",{onClick:()=>M("form"),className:`py-2 px-1 border-b-2 font-medium text-sm ${_==="form"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""}),a.jsx("button",{onClick:()=>M("list"),className:`py-2 px-1 border-b-2 font-medium text-sm ${_==="list"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""}),a.jsx("button",{onClick:()=>M("image"),className:`py-2 px-1 border-b-2 font-medium text-sm ${_==="image"?"border-gray-900 text-gray-900":"border-transparent text-gray-500"}`,children:""})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 ipad:grid-cols-6 ipad-lg:grid-cols-6 ipad-xl:grid-cols-12 ipad-2xl:grid-cols-12 gap-3 md:gap-4",children:[a.jsx("div",{className:`md:col-span-2 ipad:col-span-2 ipad-lg:col-span-2 ipad-xl:col-span-2 ipad-2xl:col-span-2 bg-white rounded-lg border p-3 md:p-4 overflow-y-auto ${_!=="form"?"hidden md:block":""}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"hidden lg:block",children:a.jsxs("select",{value:N.project,onChange:$=>{D({...N,project:$.target.value}),$.target.value&&localStorage.setItem("lastSelectedProject",$.target.value)},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white cursor-pointer hover:border-gray-400 transition-colors appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22M6%208l4%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-no-repeat pr-10",children:[(i==null?void 0:i.name)!==""&&a.jsx("option",{value:"",children:" "}),o.filter($=>$.status!=="completed").map($=>a.jsx("option",{value:$.name,children:$.name},$.id))]})}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("textarea",{value:N.quickText,onChange:$=>D({...N,quickText:$.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:""}),a.jsx("button",{type:"button",onClick:F,className:"mt-2 w-full px-4 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors text-sm font-medium",children:"  "})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",N.date&&`(${Se(new Date(N.date),"E",{locale:it})})`]}),a.jsx("input",{type:"date",value:N.date,onChange:$=>D({...N,date:$.target.value}),className:"w-full px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 cursor-pointer text-gray-900",style:{WebkitAppearance:"none",MozAppearance:"none",appearance:"none",backgroundColor:"white",backgroundImage:"none"}})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("button",{ref:ne,type:"button",onClick:()=>Q(!0),className:"w-full px-3 py-2 border rounded-lg text-left bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:N.process||a.jsx("span",{className:"text-gray-400",children:""})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:N.itemName,onChange:$=>D({...N,itemName:$.target.value}),onFocus:()=>de(!0),onBlur:()=>setTimeout(()=>de(!1),200),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500"}),X.length>0&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:X.map(($,oe)=>a.jsx("button",{type:"button",onClick:()=>{D({...N,itemName:$}),we([])},className:"w-full px-3 py-2 text-left hover:bg-gray-50 text-sm",children:a.jsx("div",{className:"font-medium text-gray-900",children:$})},oe))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:N.amount?Number(N.amount).toLocaleString():"",onChange:$=>{const oe=$.target.value.replace(/[^0-9]/g,"");D({...N,amount:oe})},className:"w-full px-3 py-2 pr-8 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "}),a.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"includeVat",checked:p,onChange:$=>{$.target.checked&&v(!1),k($.target.checked)},className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"includeVat",className:"ml-2 block text-sm text-gray-700",children:"  (10%)"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"includeTaxDeduction",checked:h,onChange:$=>{$.target.checked&&k(!1),v($.target.checked)},className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"includeTaxDeduction",className:"ml-2 block text-sm text-gray-700",children:"3.3% "})]})]})]}),Re.length>0&&a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-amber-900 mb-2",children:" "}),a.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Re.map($=>{const oe=$.id||$._id,re=me===oe;return a.jsx("button",{type:"button",onClick:()=>le($),className:`w-full text-left px-3 py-2 rounded-lg border transition-colors ${re?"border-gray-900 bg-gray-50":"border-gray-200 hover:border-gray-400 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm text-gray-900",children:$l($.name)}),$.companyName&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-300",children:"|"}),a.jsx("span",{className:"text-xs text-gray-600",children:$.companyName})]})]}),$.accountNumber&&$.bankName&&a.jsxs("div",{className:"text-xs text-gray-500",children:[$.bankName," ",$.accountNumber]})]})},oe)})})]}),a.jsxs("div",{className:"border-t pt-3 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:N.accountHolder,onChange:$=>D({...N,accountHolder:$.target.value}),onFocus:q,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "})]}),se.length>0&&!me&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"  "}),a.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:se.map(($,oe)=>a.jsx("button",{type:"button",onClick:()=>{D(re=>({...re,accountHolder:$.accountHolder,bankName:$.bankName,accountNumber:$.accountNumber})),ae([])},className:"w-full text-left px-3 py-2 rounded-lg border border-blue-200 bg-white hover:border-blue-400 hover:bg-blue-50 transition-colors",children:a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm text-gray-900",children:$.accountHolder}),a.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[$.bankName," ",$.accountNumber]})]})})},oe))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsxs("select",{value:N.bankName,onChange:$=>D({...N,bankName:$.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[a.jsx("option",{value:"",children:" "}),a.jsx("option",{value:"KB",children:"KB"}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"NH",children:"NH"}),a.jsx("option",{value:"IBK",children:"IBK"}),a.jsx("option",{value:"SC",children:"SC"}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"KDB",children:"KDB"}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsx("input",{type:"text",value:N.accountNumber,onChange:$=>D({...N,accountNumber:$.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",placeholder:" "})]}),a.jsx("div",{className:"pt-2 border-t",children:a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("span",{className:"font-medium",children:""}),a.jsxs("div",{className:"text-right",children:[(p||h)&&a.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["(",p&&" ",h&&"3.3% ",")"]}),a.jsxs("span",{className:"font-semibold",children:[(()=>{const $=Number(N.amount)||0;let oe=$;return h&&(oe=Math.round($*.967)),oe.toLocaleString()})(),""]})]})]})}),a.jsxs("div",{className:"my-6 lg:my-[50px] sticky bottom-0 bg-white pt-4 pb-4 -mb-4 lg:static lg:pb-0",style:{zIndex:100},children:[f&&a.jsx("button",{onClick:()=>{m(null),D($=>({project:$.project,date:Se(new Date,"yyyy-MM-dd"),process:"",itemName:"",materialCost:"",laborCost:"",amount:"",accountHolder:"",bankName:"",accountNumber:"",images:[],quickText:""})),k(!1),v(!1),I(null),H.info(" ")},className:"w-full py-2 mb-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 touch-manipulation",style:{minHeight:"48px"},children:""}),a.jsx("button",{onClick:$=>{console.log(" Payment button clicked!",$),console.log(" Button element:",$.currentTarget),console.log(" Form data:",N),Me()},className:"w-full py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 active:bg-gray-950 touch-manipulation font-medium text-base",style:{minHeight:"48px",position:"relative",zIndex:101,WebkitTapHighlightColor:"transparent"},children:f?"":""})]})]})]})}),a.jsxs("div",{className:`md:col-span-4 ipad:col-span-4 ipad-lg:col-span-4 ipad-xl:col-span-4 ipad-2xl:col-span-4 bg-white rounded-lg border overflow-hidden flex flex-col ${_!=="list"?"hidden md:flex":""}`,children:[a.jsx("div",{className:"bg-gray-50 px-4 pt-3 pb-0",children:a.jsx("div",{className:"flex items-center justify-between gap-4",children:a.jsxs("nav",{className:"flex gap-2 overflow-x-auto flex-1",children:[a.jsxs("button",{onClick:()=>fe("pending"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${Z==="pending"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["",a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${Z==="pending"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:J.filter($=>$.status==="pending").length})]}),a.jsxs("button",{onClick:()=>fe("completed"),className:`px-4 py-2.5 rounded-t-lg font-medium text-sm transition-all whitespace-nowrap flex items-center gap-2 ${Z==="completed"?"bg-white text-gray-900 shadow-sm border-b-2 border-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:["",a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${Z==="completed"?"bg-gray-900 text-white":"bg-gray-300 text-gray-600"}`,children:J.filter($=>$.status==="completed").length})]})]})})}),a.jsx("div",{className:"border-b border-gray-200"}),a.jsx("div",{className:"flex-1 overflow-auto p-4",children:W.length>0?a.jsx("div",{className:"space-y-4",children:Z==="completed"?(()=>{const $=W.reduce((oe,re)=>{const je=re.project||"";return oe[je]||(oe[je]=[]),oe[je].push(re),oe},{});return Object.entries($).map(([oe,re])=>{const je=re.reduce((ce,ke)=>ce+(ke.amount||0),0);return a.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:oe}),a.jsxs("p",{className:"text-xs text-gray-500",children:[" ",re.length,"  ",je.toLocaleString(),""]})]})}),a.jsx("div",{className:"p-2 space-y-2",children:re.map(ce=>{var Ge,gr,Bt;const ke=ce.amount||0,pe=((Ge=ce.bankInfo)==null?void 0:Ge.accountHolder)||ce.accountHolder||"",Oe=((gr=ce.bankInfo)==null?void 0:gr.bankName)||ce.bank||"",Be=((Bt=ce.bankInfo)==null?void 0:Bt.accountNumber)||ce.accountNumber||"",Je=pe&&Oe&&Be?`${pe} | ${Oe} ${Be}`:" ";return a.jsxs("div",{onClick:()=>d(ce.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${u===ce.id?"border-gray-900 bg-gray-50":"border-gray-200 bg-white hover:border-gray-400"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2.5",children:[a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-baseline gap-2",children:[ce.process&&a.jsxs("span",{className:"text-xs text-gray-500 shrink-0",children:["[",ce.process,"]"]}),a.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:ce.purpose||ce.itemName||"-"})]})}),a.jsxs("div",{className:"flex items-start gap-2 ml-3 shrink-0",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-base font-bold text-gray-900",children:[ke.toLocaleString(),""]}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[ce.requestedBy||"-","  ",Se(new Date(ce.requestDate),"MM/dd",{locale:it})]})]}),a.jsx("button",{onClick:async Kt=>{var Gt;if(Kt.stopPropagation(),window.confirm("  ?"))try{await n(ce.id),H.success("")}catch(Mr){console.error(" :",Mr),((Gt=Mr.response)==null?void 0:Gt.status)===404?(H.error("  .  ."),await t()):H.error(" : "+(Mr.message||"   "))}},className:"p-0.5 text-gray-300 hover:text-red-500 transition-colors",title:"",children:a.jsx(Et,{className:"h-3.5 w-3.5"})})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2.5 text-xs",children:[a.jsxs("span",{className:"text-gray-400",children:[" ",(ce.materialAmount||0).toLocaleString()]}),a.jsx("span",{className:"text-gray-300",children:""}),a.jsxs("span",{className:"text-gray-400",children:[" ",(ce.laborAmount||0).toLocaleString()]}),ce.includesVAT&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-300",children:""}),a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-700 text-[10px] rounded",children:"VAT"})]}),ce.applyTaxDeduction&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-300",children:""}),a.jsx("span",{className:"px-1.5 py-0.5 bg-purple-50 text-purple-700 text-[10px] rounded",children:"3.3%"})]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-xs text-gray-500 truncate flex-1",children:Je}),a.jsx("button",{onClick:Kt=>{Kt.stopPropagation(),Ce(ce)},className:"text-xs text-gray-600 hover:text-gray-900 ml-2 flex-shrink-0",children:""})]})]},ce.id)})})]},oe)})})():W.map($=>{var pe,Oe,Be;const oe=$.amount||0,re=((pe=$.bankInfo)==null?void 0:pe.accountHolder)||$.accountHolder||"",je=((Oe=$.bankInfo)==null?void 0:Oe.bankName)||$.bank||"",ce=((Be=$.bankInfo)==null?void 0:Be.accountNumber)||$.accountNumber||"",ke=re&&je&&ce?`${re} | ${je} ${ce}`:" ";return a.jsxs("div",{onClick:()=>d($.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${u===$.id?"border-gray-900 bg-gray-50":"border-gray-200 bg-white hover:border-gray-400"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2.5",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-baseline gap-2",children:[$.process&&a.jsxs("span",{className:"text-xs text-gray-500 shrink-0",children:["[",$.process,"]"]}),a.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:$.purpose||$.itemName||"-"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:$.project||"-"})]}),a.jsxs("div",{className:"flex items-start gap-2 ml-3 shrink-0",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-base font-bold text-gray-900",children:[oe.toLocaleString(),""]}),a.jsxs("p",{className:"text-[10px] text-gray-400",children:[$.requestedBy||"-","  ",Se(new Date($.requestDate),"MM/dd",{locale:it})]})]}),a.jsx("button",{onClick:async Je=>{Je.stopPropagation(),window.confirm("  ?")&&(await n($.id),H.success(""))},className:"p-0.5 text-gray-300 hover:text-red-500 transition-colors",title:"",children:a.jsx(Et,{className:"h-3.5 w-3.5"})})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2.5 text-xs",children:[a.jsxs("span",{className:"text-gray-400",children:[" ",($.materialAmount||0).toLocaleString()]}),a.jsx("span",{className:"text-gray-300",children:""}),a.jsxs("span",{className:"text-gray-400",children:[" ",($.laborAmount||0).toLocaleString()]}),$.includesVAT&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-300",children:""}),a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-50 text-blue-700 text-[10px] rounded",children:"VAT"})]}),$.applyTaxDeduction&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-300",children:""}),a.jsx("span",{className:"px-1.5 py-0.5 bg-purple-50 text-purple-700 text-[10px] rounded",children:"3.3%"})]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[a.jsx("div",{className:"text-xs text-gray-500 truncate flex-1",children:ke}),a.jsx("button",{onClick:Je=>{Je.stopPropagation(),Ce($)},className:"text-xs text-gray-600 hover:text-gray-900 ml-2 flex-shrink-0",children:""})]}),Z==="pending"&&(i==null?void 0:i.role)&&["manager","admin"].includes(i.role)&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:Je=>{if(Je.stopPropagation(),$.status==="completed"){H.info("   ");return}ze($)},disabled:$.status==="completed",className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${$.status==="completed"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-800"}`,children:$.status==="completed"?"":""}),a.jsx("button",{onClick:Je=>{Je.stopPropagation(),rt($.id)},disabled:$.status==="completed",className:`flex-1 py-1.5 px-2 text-white rounded text-xs font-medium transition-colors ${$.status==="completed"?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:$.status==="completed"?"#9ca3af":"#5f81a5"},onMouseEnter:Je=>{$.status!=="completed"&&(Je.currentTarget.style.backgroundColor="#4a6b8a")},onMouseLeave:Je=>{$.status!=="completed"&&(Je.currentTarget.style.backgroundColor="#5f81a5")},children:""})]})]},$.id)})}):a.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:" "})})]}),a.jsxs("div",{className:`md:col-span-6 ipad:col-span-6 ipad-lg:col-span-6 ipad-xl:col-span-6 ipad-2xl:col-span-6 bg-white rounded-lg border flex flex-col overflow-hidden ${_!=="image"?"hidden lg:flex":""}`,onDragOver:dt,onDragLeave:Ft,onDrop:pr,children:[a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Ye,className:"hidden",id:"image-file-input"}),O&&u&&_==="image"&&(()=>{const $=J.find(oe=>oe.id===u);return $?a.jsx("div",{className:"border-b bg-gray-50 p-3",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900 text-sm",children:$.purpose||$.itemName}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[$.process||"-","  ",Se(new Date($.requestDate),"yyyy.MM.dd",{locale:it})]})]}),a.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["",($.amount||0).toLocaleString()]})]})}):null})(),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 relative",onClick:$=>{var re;const oe=$.target;!oe.closest("img")&&!oe.closest("button")&&u&&(C[u]||[]).length>0&&((re=document.getElementById("image-file-input"))==null||re.click())},children:u?(()=>{const $=C[u]||[];return $.length>0?a.jsx("div",{className:"grid grid-cols-1 gap-3",children:$.map((oe,re)=>a.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[a.jsx("img",{src:oe,alt:` ${re+1}`,className:"w-full h-auto cursor-pointer hover:opacity-90 transition-opacity",onClick:je=>{je.stopPropagation(),xt(oe)}}),a.jsx("button",{onClick:je=>{je.stopPropagation(),Qe(re)},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(et,{className:"h-4 w-4"})})]},re))}):a.jsx("label",{htmlFor:"image-file-input",className:"h-full flex items-center justify-center cursor-pointer",children:a.jsxs("div",{className:`w-full h-full min-h-[200px] border-2 border-dashed rounded-lg p-6 text-center transition-colors flex flex-col items-center justify-center ${y?"border-gray-500 bg-gray-50":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx(ks,{className:"h-10 w-10 mx-auto text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:" "}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"   Ctrl+V "})]})})})():a.jsx("div",{className:"h-full flex items-center justify-center min-h-[200px]",children:a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(Un,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:" "})]})})})]})]}),K&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"lg:hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[a.jsx("h2",{className:"text-base font-bold text-gray-900",children:" "}),a.jsx("button",{onClick:()=>Q(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(et,{className:"h-4 w-4 text-gray-500"})})]}),a.jsxs("div",{className:"p-3 overflow-y-auto max-h-[calc(80vh-100px)]",children:[a.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:kj.map($=>a.jsx("button",{onClick:()=>{D({...N,process:$}),Q(!1)},className:`p-2 text-sm text-center border rounded-lg transition-all ${N.process===$?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:$},$))}),a.jsx("button",{onClick:()=>{D({...N,process:""}),Q(!1)},className:"w-full p-2 text-sm text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:" "})]})]})}),a.jsx("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>Q(!1),children:a.jsxs("div",{onClick:$=>$.stopPropagation(),className:"absolute bg-white rounded-lg shadow-xl border border-gray-200",style:{top:ne.current?`${ne.current.getBoundingClientRect().bottom+window.scrollY+4}px`:"50%",left:ne.current?`${ne.current.getBoundingClientRect().left+window.scrollX}px`:"50%"},children:[a.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[a.jsx("h2",{className:"text-sm font-bold text-gray-900",children:" "}),a.jsx("button",{onClick:()=>Q(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(et,{className:"h-3 w-3 text-gray-500"})})]}),a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"grid grid-cols-4 gap-1.5 mb-2",children:kj.map($=>a.jsx("button",{onClick:()=>{D({...N,process:$}),Q(!1)},className:`p-1.5 text-xs text-center border rounded-lg transition-all whitespace-nowrap ${N.process===$?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-700 border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,children:$},$))}),a.jsx("button",{onClick:()=>{D({...N,process:""}),Q(!1)},className:"w-full p-1.5 text-xs text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 text-gray-500",children:" "})]})]})})]}),S&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90",onClick:()=>x(!1),children:a.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[a.jsx("button",{onClick:$=>{$.stopPropagation(),x(!1)},className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:a.jsx(et,{className:"h-8 w-8"})}),a.jsx("img",{src:T,alt:" ",className:"max-w-full max-h-[90vh] object-contain",onClick:$=>$.stopPropagation()})]})}),U&&a.jsx(Lne,{projectName:Y,onClose:()=>L(!1)})]})},Fne=()=>{const[e,t]=b.useState([]),[r,n]=b.useState(null),[s,i]=b.useState(!0);b.useEffect(()=>{o()},[]);const o=async()=>{try{i(!0);const f=await Te.get("/quote-inquiries");t(f.data)}catch(f){console.error("Failed to load inquiries:",f),H.error("  ")}finally{i(!1)}},l=async f=>{try{await Te.put(`/quote-inquiries/${f}/read`),t(m=>m.map(y=>y.id===f?{...y,isRead:!0}:y))}catch(m){console.error("Failed to mark as read:",m)}},c=f=>{n(f),f.isRead||l(f.id)},u=async(f,m)=>{if(m.stopPropagation(),!!confirm("  ?"))try{await Te.delete(`/quote-inquiries/${f}`),t(y=>y.filter(j=>j.id!==f)),(r==null?void 0:r.id)===f&&n(null),H.success(" ")}catch(y){console.error("Failed to delete inquiry:",y),H.error("  ")}},d=e.filter(f=>!f.isRead).length;return s?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"text-gray-500",children:" ..."})}):a.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4 p-4",children:[a.jsxs("div",{className:`w-full md:w-1/3 bg-white rounded-lg shadow overflow-hidden flex flex-col ${r?"hidden md:flex":"flex"}`,children:[a.jsx("div",{className:"p-4 border-b bg-gray-50",children:a.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[" ",d>0&&a.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-red-500 text-white rounded-full",children:d})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"  "}):a.jsx("div",{className:"divide-y",children:e.map(f=>a.jsx("div",{className:`relative group ${(r==null?void 0:r.id)===f.id?"bg-blue-50 border-l-4 border-blue-500":""} ${f.isRead?"":"bg-yellow-50"}`,children:a.jsxs("button",{onClick:()=>c(f),className:"w-full p-4 text-left hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-gray-900",children:f.name}),!f.isRead&&a.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:Se(new Date(f.createdAt),"MM/dd HH:mm")}),a.jsx("button",{onClick:m=>u(f.id,m),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"",children:a.jsx(Et,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1 mb-1",children:[a.jsx(ew,{className:"w-3 h-3"}),f.phone]}),a.jsx("div",{className:"text-sm text-gray-500 line-clamp-2",children:f.message})]})},f.id))})})]}),a.jsx("div",{className:`flex-1 bg-white rounded-lg shadow overflow-hidden ${r?"flex flex-col":"hidden md:flex md:flex-col"}`,children:r?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:r.name}),a.jsx("button",{onClick:()=>n(null),className:"md:hidden px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 text-gray-700 rounded transition-colors",children:""})]}),a.jsx("div",{className:"text-sm text-gray-500",children:Se(new Date(r.createdAt),"yyyy MM dd HH:mm")})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(O4,{className:"w-4 h-4"})," "]}),a.jsxs("div",{className:"pl-6 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(ew,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{children:r.phone})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(_4,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{children:r.email})]}),r.address&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[a.jsx(P4,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{children:r.address})]})]})]}),(r.projectType||r.budget)&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(N4,{className:"w-4 h-4"})," "]}),a.jsxs("div",{className:"pl-6 space-y-2",children:[r.projectType&&a.jsxs("div",{className:"text-gray-700",children:[a.jsx("span",{className:"text-gray-500",children:" : "}),r.projectType]}),r.budget&&a.jsxs("div",{className:"text-gray-700",children:[a.jsx("span",{className:"text-gray-500",children:": "}),r.budget]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:" "}),a.jsx("div",{className:"pl-6 text-gray-700 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:r.message})]})]})]}):a.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:" "})})]})},Bne=()=>{const{login:e}=Ar(),[t,r]=b.useState(!1),{register:n,handleSubmit:s,setValue:i,formState:{errors:o}}=yu(),l=async u=>{r(!0);try{await e(u.username,u.password)}finally{r(!1)}},c=u=>{i("username",u)};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md w-full",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"HV LAB"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"   "})]}),a.jsxs("form",{onSubmit:s(l),className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("input",{...n("username",{required:" "}),type:"text",className:"input",placeholder:" ",autoFocus:!0}),o.username&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.username.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:""}),a.jsx("input",{...n("password",{required:" "}),type:"password",className:"input",placeholder:""}),o.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.password.message})]}),a.jsx("button",{type:"submit",disabled:t,className:"w-full btn btn-primary flex items-center justify-center",children:t?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):a.jsxs(a.Fragment,{children:[a.jsx(A4,{className:"mr-2 h-5 w-5"}),""]})})]}),a.jsxs("div",{className:"mt-6 border-t pt-6",children:[a.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:" "}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:["","","","","","",""].map(u=>a.jsx("button",{onClick:()=>c(u),className:"px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",type:"button",children:u},u))})]})]})})})},Wne=e=>{try{const t=window.AudioContext||window.webkitAudioContext,r=new t,n=e==="emergency"?5:3;let s=0;const i=()=>{if(s>=n)return;const o=r.createOscillator(),l=r.createGain();o.connect(l),l.connect(r.destination),o.frequency.value=e==="emergency"?1e3:800,o.type="sine",l.gain.setValueAtTime(.3,r.currentTime),l.gain.exponentialRampToValueAtTime(.01,r.currentTime+.5),o.start(r.currentTime),o.stop(r.currentTime+.5),s++,s<n&&setTimeout(i,700)};i()}catch(t){console.error("  :",t)}},Hne=e=>{if("vibrate"in navigator){const t=e==="emergency"?[200,200,200,200,200,200,200,200,200,200]:[200,200,200,200,200,200];navigator.vibrate(t)}},Une=(e,t)=>{Wne(e),Hne(e),"Notification"in window&&Notification.permission==="granted"&&new Notification("  ",{body:t,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:"urgent-payment",requireInteraction:!0})},zne=async()=>"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":Notification.permission==="granted",Vne=new t3({defaultOptions:{queries:{staleTime:1e3*60*5,refetchOnWindowFocus:!1}}});function Yne(){const[e,t]=b.useState(!1);return b.useEffect(()=>{const r=HM({immediate:!0,onNeedRefresh(){console.log("   ."),t(!0),H.loading("   ...",{duration:2e3}),setTimeout(()=>{r(!0).then(()=>{H.dismiss(),H.success(" !",{duration:2e3,icon:""}),setTimeout(()=>{window.location.reload()},1e3)})},1500)},onOfflineReady(){console.log("    ")},onRegisteredSW(l,c){console.log(" Service Worker :",l),c&&setInterval(()=>{console.log("   ..."),c.update()},6e4)},onRegisterError(l){console.error(" Service Worker  :",l)}});zne();const n=async()=>{try{const c=await(await fetch("/version.json?t="+Date.now())).json(),u=localStorage.getItem("app_version");u&&u!==c.version?(console.log("   :",c.version),localStorage.setItem("app_version",c.version),"serviceWorker"in navigator&&(await navigator.serviceWorker.ready).update()):u||localStorage.setItem("app_version",c.version)}catch(l){console.error("  :",l)}};setTimeout(n,5e3);const s=setInterval(n,3e4),o=Wd("/",{transports:["websocket","polling"]});return o.on("connect",()=>{console.log(" Socket.IO ")}),o.on("urgent-payment",l=>{console.log("    :",l);const c=`${l.project}  ${l.amount.toLocaleString()}  `;Une(l.urgency,c)}),o.on("disconnect",()=>{console.log(" Socket.IO  ")}),()=>{o.disconnect(),clearInterval(s)}},[]),a.jsx(n3,{client:Vne,children:a.jsx(wP,{children:a.jsxs(x4,{children:[a.jsxs(J_,{children:[a.jsx(tr,{path:"/login",element:a.jsx(Bne,{})}),a.jsxs(tr,{path:"/",element:a.jsx(p5,{}),children:[a.jsx(tr,{index:!0,element:a.jsx(Sm,{to:"/dashboard",replace:!0})}),a.jsx(tr,{path:"dashboard",element:a.jsx(F5,{})}),a.jsx(tr,{path:"projects",element:a.jsx(V5,{})}),a.jsx(tr,{path:"schedule",element:a.jsx(Bte,{})}),a.jsx(tr,{path:"site-log",element:a.jsx(Wte,{})}),a.jsx(tr,{path:"after-service",element:a.jsx(Ute,{})}),a.jsx(tr,{path:"additional-work",element:a.jsx(Vte,{})}),a.jsx(tr,{path:"construction-payment",element:a.jsx(qte,{})}),a.jsx(tr,{path:"contractors",element:a.jsx(Kte,{})}),a.jsx(tr,{path:"work-request",element:a.jsx(Gte,{})}),a.jsx(tr,{path:"finish-check",element:a.jsx(Qte,{})}),a.jsx(tr,{path:"specbook",element:a.jsx(Rne,{})}),a.jsx(tr,{path:"estimate-preview",element:a.jsx(One,{})}),a.jsx(tr,{path:"execution-history",element:a.jsx(Ine,{})}),a.jsx(tr,{path:"payments",element:a.jsx($ne,{})}),a.jsx(tr,{path:"quote-inquiry",element:a.jsx(Fne,{})})]})]}),a.jsx(V3,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#363636",border:"1px solid #e5e5e5"}}})]})})})}"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(e){for(const t of e)t.update()});K2(document.getElementById("root")).render(a.jsx(b.StrictMode,{children:a.jsx(Yne,{})}))});export default qne();
