Mounting volume on: /var/lib/containers/railwayapp/bind-mounts/d18ef4a3-e51e-4147-a0c1-b8db800583c8/vol_qezfz4bdxuuyyiqt
Starting Container

[dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }
npm WARN config production Use `--omit=dev` instead.

> interior-schedule-app@1.0.0 start
> node server.js
[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
âœ… ì´ë©”ì¼ ì„œë¹„ìŠ¤ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.
ğŸ“§ ì´ë©”ì¼: hv_lab@naver.com
ğŸ”„ Updating schedules table to allow NULL project_id...
Port configuration: 8080
CORS Origin: https://hvlab.app
Environment: production
[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
âœ… CoolSMS ì„œë¹„ìŠ¤ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.
ğŸ“ ê´€ë¦¬ì ì „í™”ë²ˆí˜¸: 2ê°œ ë“±ë¡ë¨
ğŸ“± ë°œì‹ ë²ˆí˜¸: 01074088864
[dotenv@17.2.3] injecting env (0) from .env -- tip: âœ… audit secrets and track compliance: https://dotenvx.com/ops
ì„œë²„ê°€ 0.0.0.0:8080ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.
http://localhost:8080
ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸° ì‚¬ìš©ì ìƒì„± ì™„ë£Œ
ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ì´ˆê¸°í™” ì™„ë£Œ
ğŸ“§ ì´ë©”ì¼ ì²´í¬ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤ (5ë¶„ë§ˆë‹¤ ì‹¤í–‰)
SQLite ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ
âœ… original_material_amount column already exists
âœ… quote_inquiries table created successfully
âœ“ meeting_notes column already exists
âœ“ entrance_password column already exists
âœ“ site_password column already exists
âœ“ customer_requests column already exists
âœ“ No quotes found in contractors table
ì‚¬ìš©ì ìƒì¤€ ìƒì„± ì™„ë£Œ
ì‚¬ìš©ì ì‹ ì•  ìƒì„± ì™„ë£Œ
ì‚¬ìš©ì ì¬ì²œ ìƒì„± ì™„ë£Œ
ì‚¬ìš©ì ë¯¼ê¸° ìƒì„± ì™„ë£Œ
ì‚¬ìš©ì ì¬ì„± ìƒì„± ì™„ë£Œ
ğŸ”„ Checking schedules table for time column...
ì‚¬ìš©ì ì¬í˜„ ìƒì„± ì™„ë£Œ
ë°ì´í„°ë² ì´ìŠ¤ì— ì´ë¯¸ 157ê°œì˜ í˜‘ë ¥ì—…ì²´ê°€ ìˆìŠµë‹ˆë‹¤.
âœ… Time column already exists in schedules table
âœ… schedules table updated successfully - project_id is now nullable and project_name column added
ğŸ”„ Checking payment_requests table for new columns...
âœ… Column item_name already exists in payment_requests table
âœ… Column apply_tax_deduction already exists in payment_requests table
âœ… Column includes_vat already exists in payment_requests table
âœ… Column original_labor_amount already exists in payment_requests table
âœ… Column material_amount already exists in payment_requests table
âœ… Column labor_amount already exists in payment_requests table
ğŸ”„ Checking work_requests table schema...
âœ… Column 'project' already exists
âœ… Column 'request_date' already exists
âœ… Column 'request_type' already exists
âœ… Column 'requested_by' already exists
âœ… work_requests migration completed
âœ… ë°ì´í„°ë² ì´ìŠ¤ì— 6ëª…ì˜ ì‚¬ìš©ìê°€ ìˆìŠµë‹ˆë‹¤.
ğŸ“§ ì„œë²„ ì‹œì‘ ì‹œ ê²¬ì ë¬¸ì˜ ë©”ì¼ í™•ì¸...
ğŸ“¬ ìƒˆë¡œìš´ ê²¬ì ë¬¸ì˜ ë©”ì¼ì„ í™•ì¸í•©ë‹ˆë‹¤...
âŒ IMAP ì—°ê²° ì˜¤ë¥˜: Error: "hv_lab@naver.com": access denied. (Please check your OTP number)
    at Connection._resTagged (/app/node_modules/imap/lib/Connection.js:1502:11)
    at Parser.<anonymous> (/app/node_modules/imap/lib/Connection.js:194:10)
    at Parser.emit (node:events:513:28)
    at Parser._resTagged (/app/node_modules/imap/lib/Parser.js:175:10)
    at Parser._parse (/app/node_modules/imap/lib/Parser.js:139:16)
    at Parser._tryread (/app/node_modules/imap/lib/Parser.js:82:15)
    at TLSSocket.Parser._cbReadable (/app/node_modules/imap/lib/Parser.js:53:12)
    at TLSSocket.emit (node:events:513:28)
    at emitReadable_ (node:internal/streams/readable:578:12)
    at processTicksAndRejections (node:internal/process/task_queues:82:21) {
  type: 'no',
  textCode: 'AUTH',
  source: 'authentication'
}
âŒ ì´ˆê¸° ì´ë©”ì¼ í™•ì¸ ì¤‘ ì˜¤ë¥˜: "hv_lab@naver.com": access denied. (Please check your OTP number)
ğŸ“ª IMAP ì—°ê²° ì¢…ë£Œ
ìƒˆë¡œìš´ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°: suwPvF0IGMfDMXhrAAAB
  "receipt_url": null,
  "notes": "",
  "created_at": "2025-10-29 21:28:05",
  "updated_at": "2025-10-29 21:28:05",
  "apply_tax_deduction": 1,
  "amount": 338450,
[GET /api/payments] Request received
  "account_holder": "ë°•ìƒí˜„",
  "bank_name": "NHë†í˜‘ì€í–‰",
[GET /api/payments] Found 7 payments
  "account_number": "100136-56-031677",
[GET /api/payments] Sample: {
  "status": "pending",
  "id": 48,
  "approved_by": null,
  "project_id": 6,
  "approved_at": null,
  "paid_at": null,
  "user_id": 1,
  "request_type": "material",
  "vendor_name": "ë„ë°°",
  "description": "í•­test",
  "material_amount": 0,
  "labor_amount": 338450,
  "original_labor_amount": 350000,
  "item_name": "í•­test",
  "includes_vat": 0,
  "original_material_amount": 0,
  "requester_name": "ìƒì¤€",
  "project_name": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "project_color": "#4A90E2",
  "approver_name": null
}
[GET /api/payments] Request received
[GET /api/payments] Found 7 payments
  "vendor_name": "ë„ë°°",
[GET /api/payments] Sample: {
  "id": 48,
  "project_id": 6,
  "description": "í•­test",
  "user_id": 1,
  "request_type": "material",
  "amount": 338450,
  "account_holder": "ë°•ìƒí˜„",
  "bank_name": "NHë†í˜‘ì€í–‰",
  "account_number": "100136-56-031677",
  "status": "pending",
  "approved_by": null,
  "approved_at": null,
  "paid_at": null,
  "receipt_url": null,
  "notes": "",
  "created_at": "2025-10-29 21:28:05",
  "updated_at": "2025-10-29 21:28:05",
  "apply_tax_deduction": 1,
  "material_amount": 0,
  "labor_amount": 338450,
  "original_labor_amount": 350000,
  "item_name": "í•­test",
  "includes_vat": 0,
  "original_material_amount": 0,
  "requester_name": "ìƒì¤€",
  "project_name": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "project_color": "#4A90E2",
  "approver_name": null
}
ìƒˆë¡œìš´ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°: pcahjzbpPz3TvX1OAAAD
ìƒˆë¡œìš´ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°: 0noWpjhRsYrKGZ6OAAAF
  - description: í•­ëª©te
  - vendor_name: ë„ë°°
  - itemName: í•­ëª©te
[POST /api/payments] project_id is a name, looking up ID for: ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜
  originalLaborAmount: 350000,
  account_number: '100136-56-031677',
  applyTaxDeduction: true,
  notes: '',
  includesVAT: false
  itemName: 'í•­ëª©te',
}
  materialAmount: 0,
[POST /api/payments] User: {
  laborAmount: 338450,
  id: 1,
[POST /api/payments] Received request body: {
  username: 'ìƒì¤€',
  description: 'í•­ëª©te',
  project_id: 'ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜',
  role: 'manager',
  amount: 338450,
  vendor_name: 'ë„ë°°',
  iat: 1761773227,
  account_holder: 'ë°•ìƒí˜„',
  exp: 2077133227
  bank_name: 'NHë†í˜‘ì€í–‰',
}
[POST /api/payments] í•„ë“œ ê°’ í™•ì¸:
  - process: undefined
[POST /api/payments] Found project ID: 6
ìƒˆ ê²°ì œ ìš”ì²­: ìƒì¤€ë‹˜ì´ 338,450ì› ìš”ì²­
[CoolSMS] í”„ë¡œì íŠ¸ ì¡°íšŒ ê²°ê³¼: { name: 'ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜' }
[CoolSMS] ê²°ì œ ìš”ì²­ ë°ì´í„°: {
  project_id: 6,
  amount: 338450,
  account_holder: 'ë°•ìƒí˜„',
  bank_name: 'NHë†í˜‘ì€í–‰',
  account_number: '100136-56-031677'
}
[CoolSMS] ë¬¸ì ë°œì†¡ ë°ì´í„°: {
  projectName: 'ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜',
  amount: 338450,
  accountHolder: 'ë°•ìƒí˜„',
  bankName: 'NHë†í˜‘ì€í–‰',
  accountNumber: '100136-56-031677',
  requesterName: 'ìƒì¤€',
  itemName: 'í•­ëª©te',
  purpose: 'í•­ëª©te',
  category: 'material',
  includesVat: false,
  applyTaxDeduction: true
}
[DEBUG] request_type ì›ë³¸ê°’: material
ğŸ“± [CoolSMS] sendPaymentNotification í˜¸ì¶œë¨
ğŸ“± [CoolSMS] ë°ì´í„°: {
  "projectName": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "includes_vat": 0,
  "material_amount": 0,
  "original_material_amount": 0,
  "labor_amount": 338450,
  "requester_name": "ìƒì¤€",
  "original_labor_amount": 350000,
  "project_name": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "item_name": "í•­ëª©te",
  "project_color": "#4A90E2",
  "approver_name": null
}
  "apply_tax_deduction": 1,
  "amount": 338450,
  "accountHolder": "ë°•ìƒí˜„",
  "bankName": "NHë†í˜‘ì€í–‰",
  "accountNumber": "100136-56-031677",
  "requesterName": "ìƒì¤€",
  "itemName": "í•­ëª©te",
  "purpose": "í•­ëª©te",
  "category": "material",
  "includesVat": false,
  "applyTaxDeduction": true
}
[createPaymentMessage] ë°›ì€ ë°ì´í„°: {
  "projectName": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "amount": 338450,
  "accountHolder": "ë°•ìƒí˜„",
  "bankName": "NHë†í˜‘ì€í–‰",
  "accountNumber": "100136-56-031677",
  "requesterName": "ìƒì¤€",
  "itemName": "í•­ëª©te",
  "purpose": "í•­ëª©te",
  "category": "material",
  "includesVat": false,
  "applyTaxDeduction": true
}
[createPaymentMessage] process: í•­ëª©te
[createPaymentMessage] itemName: í•­ëª©te
ğŸ“± [CoolSMS] ì´ 2ëª…ì˜ ê´€ë¦¬ìì—ê²Œ SMS ë°œì†¡ ì‹œì‘
ğŸ“¤ [CoolSMS] 01074088864ë¡œ SMS ë°œì†¡ ì‹œë„...
ğŸ“¤ [CoolSMS] ë°œì†¡ ìš”ì²­ ë°ì´í„°: {
  "message": {
    "to": "01074088864",
    "from": "01074088864",
    "text": "ëŒ€ë¦¼/í•­ëª©te/í•­ëª©te\nNHë†í˜‘ì€í–‰ 100136-56-031677 ë°•ìƒí˜„\n338,450ì›(3.3%)"
  }
}
[GET /api/payments] Request received
[GET /api/payments] Found 8 payments
[GET /api/payments] Sample: {
  "id": 49,
  "project_id": 6,
  "user_id": 1,
  "request_type": "material",
  "vendor_name": "ë„ë°°",
  "description": "í•­ëª©te",
  "amount": 338450,
  "account_holder": "ë°•ìƒí˜„",
  "bank_name": "NHë†í˜‘ì€í–‰",
  "account_number": "100136-56-031677",
  "status": "pending",
  "approved_by": null,
  "approved_at": null,
  "paid_at": null,
  "receipt_url": null,
  "notes": "",
  "created_at": "2025-10-29 21:31:05",
  "updated_at": "2025-10-29 21:31:05",
âœ… SMS ë°œì†¡ ì„±ê³µ: 01074088864 {
  groupId: 'G4V20251030063105L5RCP2S9F68TYJN',
  to: '01074088864',
  from: '01074088864',
  type: 'SMS',
  statusMessage: 'ì •ìƒ ì ‘ìˆ˜(ì´í†µì‚¬ë¡œ ì ‘ìˆ˜ ì˜ˆì •) ',
  country: '82',
  messageId: 'M4V202510300631050JBBFQDKDRQP4AH',
  statusCode: '2000',
  accountId: '25101068262046'
}
ğŸ“¤ [CoolSMS] 01089423283ë¡œ SMS ë°œì†¡ ì‹œë„...
ğŸ“¤ [CoolSMS] ë°œì†¡ ìš”ì²­ ë°ì´í„°: {
  "message": {
    "to": "01089423283",
    "from": "01074088864",
    "text": "ëŒ€ë¦¼/í•­ëª©te/í•­ëª©te\nNHë†í˜‘ì€í–‰ 100136-56-031677 ë°•ìƒí˜„\n338,450ì›(3.3%)"
  }
}
      groupId: 'G4V20251030063106EDD7UZT5ZILZR1O',
      to: '01089423283',
      from: '01074088864',
      type: 'SMS',
      statusMessage: 'ì •ìƒ ì ‘ìˆ˜(ì´í†µì‚¬ë¡œ ì ‘ìˆ˜ ì˜ˆì •) ',
      country: '82',
      messageId: 'M4V20251030063106XXOOILYFW3XACUU',
    success: true,
    response: {
âœ… SMS ë°œì†¡ ì„±ê³µ: 01089423283 {
  groupId: 'G4V20251030063106EDD7UZT5ZILZR1O',
  to: '01089423283',
  from: '01074088864',
  type: 'SMS',
  statusMessage: 'ì •ìƒ ì ‘ìˆ˜(ì´í†µì‚¬ë¡œ ì ‘ìˆ˜ ì˜ˆì •) ',
  country: '82',
  messageId: 'M4V20251030063106XXOOILYFW3XACUU',
  statusCode: '2000',
  accountId: '25101068262046'
}
âœ… CoolSMS ë°œì†¡ ê²°ê³¼: [
  {
    phone: '01074088864',
    success: true,
    response: {
      groupId: 'G4V20251030063105L5RCP2S9F68TYJN',
      to: '01074088864',
      from: '01074088864',
      type: 'SMS',
      statusMessage: 'ì •ìƒ ì ‘ìˆ˜(ì´í†µì‚¬ë¡œ ì ‘ìˆ˜ ì˜ˆì •) ',
      country: '82',
      messageId: 'M4V202510300631050JBBFQDKDRQP4AH',
      statusCode: '2000',
      accountId: '25101068262046'
    }
  },
  {
    phone: '01089423283',
      statusCode: '2000',
      accountId: '25101068262046'
    }
  }
]
  "approved_by": null,
[GET /api/payments] Request received
  "requester_name": "ìƒì¤€",
[GET /api/payments] Found 8 payments
  "approved_at": null,
[GET /api/payments] Sample: {
  "paid_at": null,
  "id": 49,
  "receipt_url": null,
  "project_id": 6,
  "notes": "",
  "user_id": 1,
  "created_at": "2025-10-29 21:31:05",
  "request_type": "material",
  "updated_at": "2025-10-29 21:31:05",
  "vendor_name": "ë„ë°°",
  "apply_tax_deduction": 1,
  "material_amount": 0,
  "description": "í•­ëª©te",
  "labor_amount": 338450,
  "amount": 338450,
  "original_labor_amount": 350000,
  "account_holder": "ë°•ìƒí˜„",
  "item_name": "í•­ëª©te",
  "includes_vat": 0,
  "bank_name": "NHë†í˜‘ì€í–‰",
  "original_material_amount": 0,
  "account_number": "100136-56-031677",
  "status": "pending",
  "project_name": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "project_color": "#4A90E2",
  "approver_name": null
}
[GET /api/payments] Request received
[GET /api/payments] Found 8 payments
[GET /api/payments] Sample: {
  "id": 49,
  "project_id": 6,
  "user_id": 1,
  "request_type": "material",
  "vendor_name": "ë„ë°°",
  "description": "í•­ëª©te",
  "amount": 338450,
  "account_holder": "ë°•ìƒí˜„",
  "bank_name": "NHë†í˜‘ì€í–‰",
  "account_number": "100136-56-031677",
  "status": "pending",
  "approved_by": null,
  "approved_at": null,
  "paid_at": null,
  "receipt_url": null,
  "notes": "",
  "created_at": "2025-10-29 21:31:05",
  "updated_at": "2025-10-29 21:31:05",
  "apply_tax_deduction": 1,
  "material_amount": 0,
  "labor_amount": 338450,
  "original_labor_amount": 350000,
  "paid_at": null,
  "item_name": "í•­ëª©te",
  "receipt_url": null,
  "includes_vat": 0,
  "notes": "",
  "original_material_amount": 0,
  "created_at": "2025-10-29 21:31:05",
  "requester_name": "ìƒì¤€",
  "updated_at": "2025-10-29 21:31:05",
  "project_name": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "project_color": "#4A90E2",
  "approver_name": null
}
[GET /api/payments] Request received
[GET /api/payments] Found 8 payments
[GET /api/payments] Sample: {
  "id": 49,
  "project_id": 6,
  "user_id": 1,
  "request_type": "material",
  "vendor_name": "ë„ë°°",
  "description": "í•­ëª©te",
  "amount": 338450,
  "account_holder": "ë°•ìƒí˜„",
  "bank_name": "NHë†í˜‘ì€í–‰",
  "account_number": "100136-56-031677",
  "status": "pending",
  "approved_by": null,
  "approved_at": null,
  "apply_tax_deduction": 1,
  "material_amount": 0,
  "labor_amount": 338450,
  "original_labor_amount": 350000,
  "item_name": "í•­ëª©te",
  "includes_vat": 0,
  "original_material_amount": 0,
  "requester_name": "ìƒì¤€",
  "project_name": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "project_color": "#4A90E2",
  "approver_name": null
}
[GET /api/payments] Request received
[GET /api/payments] Found 8 payments
[GET /api/payments] Sample: {
  "id": 49,
  "project_id": 6,
  "user_id": 1,
  "request_type": "material",
  "vendor_name": "ë„ë°°",
  "description": "í•­ëª©te",
  "amount": 338450,
  "account_holder": "ë°•ìƒí˜„",
  "bank_name": "NHë†í˜‘ì€í–‰",
  "account_number": "100136-56-031677",
  "status": "pending",
  "approved_by": null,
  "approved_at": null,
  "paid_at": null,
  "receipt_url": null,
  "notes": "",
  "created_at": "2025-10-29 21:31:05",
  "updated_at": "2025-10-29 21:31:05",
  "apply_tax_deduction": 1,
  "material_amount": 0,
  "labor_amount": 338450,
  "original_labor_amount": 350000,
  "item_name": "í•­ëª©te",
  "includes_vat": 0,
  "original_material_amount": 0,
  "requester_name": "ìƒì¤€",
  "project_name": "ëŒ€ë¦¼ì•„í¬ë¡œí…”_ì—„ìƒì§„ë‹˜",
  "project_color": "#4A90E2",
  "approver_name": null
}
